<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Configuration | APM Python Agent Reference [master] | Elastic</title>
<meta class="elastic" name="content" content="Configuration | APM Python Agent Reference [master]">

<link rel="home" href="index.html" title="APM Python Agent Reference [master]"/>
<link rel="up" href="index.html" title="APM Python Agent Reference [master]"/>
<link rel="prev" href="supported-technologies.html" title="Supported Technologies"/>
<link rel="next" href="advanced-topics.html" title="Advanced Topics"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Python Agent/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="supported-technologies.html">« Supported Technologies</a>
</span>
<span class="next">
<a href="advanced-topics.html">Advanced Topics »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Python Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configuration</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="configuration"></a>Configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h2>
</div></div></div>
<p>To adapt the Elastic APM agent to your needs, configure it using environment variables or framework-specific
configuration.</p>
<p>You can either configure the agent by setting environment variables:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">ELASTIC_APM_SERVICE_NAME=foo python manage.py runserver</pre>
</div>
<p>or with inline configuration:</p>
<div class="pre_wrapper lang-python">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python">apm_client = Client(service_name="foo")</pre>
</div>
<p>or by using framework specific configuration e.g. in your Django <code class="literal">settings.py</code> file:</p>
<div class="pre_wrapper lang-python">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python">ELASTIC_APM = {
    "SERVICE_NAME": "foo",
}</pre>
</div>
<p>The precedence is as follows:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="configuration.html#config-central_config" title="central_config">Central configuration</a>
(supported options are marked with <a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a>)
</li>
<li class="listitem">
Environment variables
</li>
<li class="listitem">
Inline configuration
</li>
<li class="listitem">
Framework-specific configuration
</li>
<li class="listitem">
Default value
</li>
</ul>
</div>
<h3><a id="dynamic-configuration"></a>Dynamic configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<p>Configuration options marked with the <span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> badge can be changed at runtime
when set from a supported source.</p>
<p>The Python Agent supports <a href="/guide/en/kibana/8.15/agent-configuration.html" class="ulink" target="_top">Central configuration</a>,
which allows you to fine-tune certain configurations from in the APM app.
This feature is enabled in the Agent by default with <a class="xref" href="configuration.html#config-central_config" title="central_config"><code class="literal">central_config</code></a>.</p>
<h3><a id="django-configuration"></a>Django<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<p>To configure Django, add an <code class="literal">ELASTIC_APM</code> dictionary to your <code class="literal">settings.py</code>:</p>
<div class="pre_wrapper lang-python">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python">ELASTIC_APM = {
    'SERVICE_NAME': 'my-app',
    'SECRET_TOKEN': 'changeme',
}</pre>
</div>
<h3><a id="flask-configuration"></a>Flask<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<p>To configure Flask, add an <code class="literal">ELASTIC_APM</code> dictionary to your <code class="literal">app.config</code>:</p>
<div class="pre_wrapper lang-python">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python">app.config['ELASTIC_APM'] = {
    'SERVICE_NAME': 'my-app',
    'SECRET_TOKEN': 'changeme',
}

apm = ElasticAPM(app)</pre>
</div>
<h3><a id="core-options"></a>Core options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<h4><a id="config-service-name"></a><code class="literal">service_name</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_NAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">SERVICE_NAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">unknown-python-service</code></p></td>
<td align="left" valign="top"><p><code class="literal">my-app</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The name of your service.
This is used to keep all the errors and transactions of your service together
and is the primary filter in the Elastic APM user interface.</p>
<p>While a default is provided, it is essential that you override this default
with something more descriptive and unique across your infrastructure.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The service name must conform to this regular expression: <code class="literal">^[a-zA-Z0-9 _-]+$</code>.
In other words, the service name must only contain characters from the ASCII
alphabet, numbers, dashes, underscores, and spaces. It cannot be an empty string
or whitespace-only.</p>
</div>
</div>
<h4><a id="config-server-url"></a><code class="literal">server_url</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVER_URL</code></p></td>
<td align="left" valign="top"><p><code class="literal">SERVER_URL</code></p></td>
<td align="left" valign="top"><p><code class="literal">'http://127.0.0.1:8200'</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The URL for your APM Server.
The URL must be fully qualified, including protocol (<code class="literal">http</code> or <code class="literal">https</code>) and port.
Note: Do not set this if you are using APM in an AWS lambda function. APM Agents are designed to proxy their calls to the APM Server through the lambda extension. Instead, set <code class="literal">ELASTIC_APM_LAMBDA_APM_SERVER</code>. For more info, see <a class="xref" href="lambda-support.html" title="Monitoring AWS Lambda Python Functions">AWS Lambda</a>.</p>
<h3><a id="config-enabled"></a><code class="literal">enabled</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_ENABLED</code></p></td>
<td align="left" valign="top"><p><code class="literal">ENABLED</code></p></td>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Enable or disable the agent.
When set to false, the agent will not collect any data or start any background threads.</p>
<h3><a id="config-recording"></a><code class="literal">recording</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_RECORDING</code></p></td>
<td align="left" valign="top"><p><code class="literal">RECORDING</code></p></td>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Enable or disable recording of events.
If set to false, then the Python agent does not send any events to the Elastic APM server,
and instrumentation overhead is minimized. The agent will continue to poll the server for configuration changes.</p>
<h3><a id="logging-options"></a>Logging Options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<h4><a id="config-log_level"></a><code class="literal">log_level</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_LEVEL</code></p></td>
<td align="left" valign="top"><p><code class="literal">LOG_LEVEL</code></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>The <code class="literal">logging.logLevel</code> at which the <code class="literal">elasticapm</code> logger will log. The available
options are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">"off"</code> (sets <code class="literal">logging.logLevel</code> to 1000)
</li>
<li class="listitem">
<code class="literal">"critical"</code>
</li>
<li class="listitem">
<code class="literal">"error"</code>
</li>
<li class="listitem">
<code class="literal">"warning"</code>
</li>
<li class="listitem">
<code class="literal">"info"</code>
</li>
<li class="listitem">
<code class="literal">"debug"</code>
</li>
<li class="listitem">
<code class="literal">"trace"</code> (sets <code class="literal">logging.log_level</code> to 5)
</li>
</ul>
</div>
<p>Options are case-insensitive</p>
<p>Note that this option doesn&#8217;t do anything with logging handlers. In order
for any logs to be visible, you must either configure a handler
(<a href="https://docs.python.org/3/library/logging.html#logging.basicConfig" class="ulink" target="_top"><code class="literal">logging.basicConfig</code></a>
will do this for you) or set <a class="xref" href="configuration.html#config-log_file" title="log_file"><code class="literal">log_file</code></a>. This will also override
any log level your app has set for the <code class="literal">elasticapm</code> logger.</p>
<h4><a id="config-log_file"></a><code class="literal">log_file</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_FILE</code></p></td>
<td align="left" valign="top"><p><code class="literal">LOG_FILE</code></p></td>
<td align="left" valign="top"><p><code class="literal">""</code></p></td>
<td align="left" valign="top"><p><code class="literal">"/var/log/elasticapm/log.txt"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This enables the agent to log to a file. This is disabled by default. The agent will log
at the <code class="literal">logging.logLevel</code> configured with <a class="xref" href="configuration.html#config-log_level" title="log_level"><code class="literal">log_level</code></a>. Use
<a class="xref" href="configuration.html#config-log_file_size" title="log_file_size"><code class="literal">log_file_size</code></a> to configure the maximum size of the log file. This log
file will automatically rotate.</p>
<p>Note that setting <a class="xref" href="configuration.html#config-log_level" title="log_level"><code class="literal">log_level</code></a> is required for this setting to do
anything.</p>
<p>If <a href="https://github.com/elastic/ecs-logging-python" class="ulink" target="_top"><code class="literal">ecs_logging</code></a> is installed,
the logs will automatically be formatted as ecs-compatible json.</p>
<h4><a id="config-log_file_size"></a><code class="literal">log_file_size</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_FILE_SIZE</code></p></td>
<td align="left" valign="top"><p><code class="literal">LOG_FILE_SIZE</code></p></td>
<td align="left" valign="top"><p><code class="literal">"50mb"</code></p></td>
<td align="left" valign="top"><p><code class="literal">"100mb"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The size of the log file if <a class="xref" href="configuration.html#config-log_file" title="log_file"><code class="literal">log_file</code></a> is set.</p>
<p>The agent always keeps one backup file when rotating, so the maximum space that
the log files will consume is twice the value of this setting.</p>
<h4><a id="config-log_ecs_reformatting"></a><code class="literal">log_ecs_reformatting</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_ECS_REFORMATTING</code></p></td>
<td align="left" valign="top"><p><code class="literal">LOG_ECS_REFORMATTING</code></p></td>
<td align="left" valign="top"><p><code class="literal">"off"</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Valid options:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">"off"</code>
</li>
<li class="listitem">
<code class="literal">"override"</code>
</li>
</ul>
</div>
<p>If <a href="https://github.com/elastic/ecs-logging-python" class="ulink" target="_top"><code class="literal">ecs_logging</code></a> is installed,
setting this to <code class="literal">"override"</code> will cause the agent to automatically attempt to enable
ecs-formatted logging.</p>
<p>For base <code class="literal">logging</code> from the standard library, the agent will get the root
logger, find any attached handlers, and for each, set the formatter to
<code class="literal">ecs_logging.StdlibFormatter()</code>.</p>
<p>If <code class="literal">structlog</code> is installed, the agent will override any configured processors
with <code class="literal">ecs_logging.StructlogFormatter()</code>.</p>
<p>Note that this is a very blunt instrument that could have unintended side effects.
If problems arise, please apply these formatters manually and leave this setting
as <code class="literal">"off"</code>. See the
<a href="/guide/en/ecs-logging/python/current/installation.html" class="ulink" target="_top"><code class="literal">ecs_logging</code> docs</a>
for more information about using these formatters.</p>
<p>Also note that this setting does not facilitate shipping logs to Elasticsearch.
We recommend <a href="/beats/filebeat" class="ulink" target="_top">Filebeat</a> for that purpose.</p>
<h3><a id="other-options"></a>Other options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<h4><a id="config-transport-class"></a><code class="literal">transport_class</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSPORT_CLASS</code></p></td>
<td align="left" valign="top"><p><code class="literal">TRANSPORT_CLASS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elasticapm.transport.http.Transport</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The transport class to use when sending events to the APM Server.</p>
<h4><a id="config-service-node-name"></a><code class="literal">service_node_name</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_NODE_NAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">SERVICE_NODE_NAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
<td align="left" valign="top"><p><code class="literal">"redis1"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The name of the given service node. This is optional and if omitted, the APM
Server will fall back on <code class="literal">system.container.id</code> if available, and
<code class="literal">host.name</code> if necessary.</p>
<p>This option allows you to set the node name manually to ensure it is unique and meaningful.</p>
<h4><a id="config-environment"></a><code class="literal">environment</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_ENVIRONMENT</code></p></td>
<td align="left" valign="top"><p><code class="literal">ENVIRONMENT</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
<td align="left" valign="top"><p><code class="literal">"production"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The name of the environment this service is deployed in,
e.g. "production" or "staging".</p>
<p>Environments allow you to easily filter data on a global level in the APM app.
It&#8217;s important to be consistent when naming environments across agents.
See <a href="/guide/en/kibana/8.15/filters.html#environment-selector" class="ulink" target="_top">environment selector</a> in the APM app for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is fully supported in the APM app in Kibana versions &gt;= 7.2.
You must use the query bar to filter for a specific environment in versions prior to 7.2.</p>
</div>
</div>
<h4><a id="config-cloud-provider"></a><code class="literal">cloud_provider</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CLOUD_PROVIDER</code></p></td>
<td align="left" valign="top"><p><code class="literal">CLOUD_PROVIDER</code></p></td>
<td align="left" valign="top"><p><code class="literal">"auto"</code></p></td>
<td align="left" valign="top"><p><code class="literal">"aws"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This config value allows you to specify which cloud provider should be assumed
for metadata collection. By default, the agent will attempt to detect the cloud
provider or, if that fails, will use trial and error to collect the metadata.</p>
<p>Valid options are <code class="literal">"auto"</code>, <code class="literal">"aws"</code>, <code class="literal">"gcp"</code>, and <code class="literal">"azure"</code>. If this config value is set
to <code class="literal">"none"</code>, then no cloud metadata will be collected.</p>
<h4><a id="config-secret-token"></a><code class="literal">secret_token</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SECRET_TOKEN</code></p></td>
<td align="left" valign="top"><p><code class="literal">SECRET_TOKEN</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
<td align="left" valign="top"><p>A random string</p></td>
</tr>
</tbody>
</table>
</div>
<p>This string is used to ensure that only your agents can send data to your APM Server.
Both the agents and the APM Server have to be configured with the same secret token.
An example to generate a secure secret token is:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">python -c "import secrets; print(secrets.token_urlsafe(32))"</pre>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Secret tokens only provide any security if your APM Server uses TLS.</p>
</div>
</div>
<h4><a id="config-api-key"></a><code class="literal">api_key</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_API_KEY</code></p></td>
<td align="left" valign="top"><p><code class="literal">API_KEY</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
<td align="left" valign="top"><p>A base64-encoded string</p></td>
</tr>
</tbody>
</table>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>This base64-encoded string is used to ensure that only your agents can send data to your APM Server.
The API key must be created using the <a href="/guide/en/apm/guide/8.15/api-key.html" class="ulink" target="_top">APM server command-line tool</a>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>API keys only provide any real security if your APM Server uses TLS.</p>
</div>
</div>
<h4><a id="config-service-version"></a><code class="literal">service_version</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_VERSION</code></p></td>
<td align="left" valign="top"><p><code class="literal">SERVICE_VERSION</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
<td align="left" valign="top"><p>A string indicating the version of the deployed service</p></td>
</tr>
</tbody>
</table>
</div>
<p>A version string for the currently deployed version of the service.
If youre deploys are not versioned, the recommended value for this field is the commit identifier of the deployed revision, e.g. the output of <code class="literal">git rev-parse HEAD</code>.</p>
<h4><a id="config-framework-name"></a><code class="literal">framework_name</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_FRAMEWORK_NAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">FRAMEWORK_NAME</code></p></td>
<td align="left" valign="top"><p>Depending on framework</p></td>
</tr>
</tbody>
</table>
</div>
<p>The name of the used framework.
For Django and Flask, this defaults to <code class="literal">django</code> and <code class="literal">flask</code> respectively,
otherwise, the default is <code class="literal">None</code>.</p>
<h4><a id="config-framework-version"></a><code class="literal">framework_version</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_FRAMEWORK_VERSION</code></p></td>
<td align="left" valign="top"><p><code class="literal">FRAMEWORK_VERSION</code></p></td>
<td align="left" valign="top"><p>Depending on framework</p></td>
</tr>
</tbody>
</table>
</div>
<p>The version number of the used framework.
For Django and Flask, this defaults to the used version of the framework,
otherwise, the default is <code class="literal">None</code>.</p>
<h4><a id="config-filter-exception-types"></a><code class="literal">filter_exception_types</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_FILTER_EXCEPTION_TYPES</code></p></td>
<td align="left" valign="top"><p><code class="literal">FILTER_EXCEPTION_TYPES</code></p></td>
<td align="left" valign="top"><p><code class="literal">[]</code></p></td>
<td align="left" valign="top"><p><code class="literal">['OperationalError', 'mymodule.SomeoneElsesProblemError']</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>multiple values separated by commas, without spaces</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>A list of exception types to be filtered.
Exceptions of these types will not be sent to the APM Server.</p>
<h4><a id="config-transaction-ignore-urls"></a><code class="literal">transaction_ignore_urls</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_IGNORE_URLS</code></p></td>
<td align="left" valign="top"><p><code class="literal">TRANSACTION_IGNORE_URLS</code></p></td>
<td align="left" valign="top"><p><code class="literal">[]</code></p></td>
<td align="left" valign="top"><p><code class="literal">['/api/ping', '/static/*']</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>multiple values separated by commas, without spaces</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>A list of URLs for which the agent should not capture any transaction data.</p>
<p>Optionally, <code class="literal">*</code> can be used to match multiple URLs at once.</p>
<h4><a id="config-transactions-ignore-patterns"></a><code class="literal">transactions_ignore_patterns</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTIONS_IGNORE_PATTERNS</code></p></td>
<td align="left" valign="top"><p><code class="literal">TRANSACTIONS_IGNORE_PATTERNS</code></p></td>
<td align="left" valign="top"><p><code class="literal">[]</code></p></td>
<td align="left" valign="top"><p><code class="literal">['^OPTIONS ', 'myviews.Healthcheck']</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>multiple values separated by commas, without spaces</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>A list of regular expressions.
Transactions with a name that matches any of the configured patterns will be ignored and not sent to the APM Server.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>as the the name of the transaction can only be determined at the end of the transaction,
the agent might still cause overhead for transactions ignored through this setting.
If agent overhead is a concern, we recommend <a class="xref" href="configuration.html#config-transaction-ignore-urls" title="transaction_ignore_urls"><code class="literal">transaction_ignore_urls</code></a> instead.</p>
</div>
</div>
<h4><a id="config-server-timeout"></a><code class="literal">server_timeout</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVER_TIMEOUT</code></p></td>
<td align="left" valign="top"><p><code class="literal">SERVER_TIMEOUT</code></p></td>
<td align="left" valign="top"><p><code class="literal">"5s"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>A timeout for requests to the APM Server.
The setting has to be provided in <span class="strong strong"><strong><a class="xref" href="configuration.html#config-format-duration" title="Duration format">duration format</a></strong></span>.
If a request to the APM Server takes longer than the configured timeout,
the request is cancelled and the event (exception or transaction) is discarded.
Set to <code class="literal">None</code> to disable timeouts.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If timeouts are disabled or set to a high value,
your app could experience memory issues if the APM Server times out.</p>
</div>
</div>
<h4><a id="config-hostname"></a><code class="literal">hostname</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_HOSTNAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">HOSTNAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">socket.gethostname()</code></p></td>
<td align="left" valign="top"><p><code class="literal">app-server01.example.com</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The host name to use when sending error and transaction data to the APM Server.</p>
<h4><a id="config-auto-log-stacks"></a><code class="literal">auto_log_stacks</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_AUTO_LOG_STACKS</code></p></td>
<td align="left" valign="top"><p><code class="literal">AUTO_LOG_STACKS</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>set to <code class="literal">"true"</code> / <code class="literal">"false"</code></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>If set to <code class="literal">True</code> (the default), the agent will add a stack trace to each log event,
indicating where the log message has been issued.</p>
<p>This setting can be overridden on an individual basis by setting the <code class="literal">extra</code>-key <code class="literal">stack</code>:</p>
<div class="pre_wrapper lang-python">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python">logger.info('something happened', extra={'stack': False})</pre>
</div>
<h4><a id="config-collect-local-variables"></a><code class="literal">collect_local_variables</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_COLLECT_LOCAL_VARIABLES</code></p></td>
<td align="left" valign="top"><p><code class="literal">COLLECT_LOCAL_VARIABLES</code></p></td>
<td align="left" valign="top"><p><code class="literal">errors</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Possible values: <code class="literal">errors</code>, <code class="literal">transactions</code>, <code class="literal">all</code>, <code class="literal">off</code></p>
<p>The Elastic APM Python agent can collect local variables for stack frames.
By default, this is only done for errors.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Collecting local variables has a non-trivial overhead.
Collecting local variables for transactions in production environments
can have adverse effects for the performance of your service.</p>
</div>
</div>
<h4><a id="config-local-var-max-length"></a><code class="literal">local_var_max_length</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOCAL_VAR_MAX_LENGTH</code></p></td>
<td align="left" valign="top"><p><code class="literal">LOCAL_VAR_MAX_LENGTH</code></p></td>
<td align="left" valign="top"><p><code class="literal">200</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>When collecting local variables, they will be converted to strings.
This setting allows you to limit the length of the resulting string.</p>
<h4><a id="config-local-list-var-max-length"></a><code class="literal">local_var_list_max_length</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p>Environment</p></td>
<td align="left" valign="top"><p>Django/Flask</p></td>
<td align="left" valign="top"><p>Default</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOCAL_VAR_LIST_MAX_LENGTH</code></p></td>
<td align="left" valign="top"><p><code class="literal">LOCAL_VAR_LIST_MAX_LENGTH</code></p></td>
<td align="left" valign="top"><p><code class="literal">10</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This setting allows you to limit the length of lists in local variables.</p>
<h4><a id="config-local-dict-var-max-length"></a><code class="literal">local_var_dict_max_length</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOCAL_VAR_DICT_MAX_LENGTH</code></p></td>
<td align="left" valign="top"><p><code class="literal">LOCAL_VAR_DICT_MAX_LENGTH</code></p></td>
<td align="left" valign="top"><p><code class="literal">10</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This setting allows you to limit the length of dicts in local variables.</p>
<h4><a id="config-source-lines-error-app-frames"></a><code class="literal">source_lines_error_app_frames</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<h4><a id="config-source-lines-error-library-frames"></a><code class="literal">source_lines_error_library_frames</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<h4><a id="config-source-lines-span-app-frames"></a><code class="literal">source_lines_span_app_frames</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<h4><a id="config-source-lines-span-library-frames"></a><code class="literal">source_lines_span_library_frames</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SOURCE_LINES_ERROR_APP_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">SOURCE_LINES_ERROR_APP_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">5</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SOURCE_LINES_ERROR_LIBRARY_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">SOURCE_LINES_ERROR_LIBRARY_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">5</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SOURCE_LINES_SPAN_APP_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">SOURCE_LINES_SPAN_APP_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">0</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SOURCE_LINES_SPAN_LIBRARY_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">SOURCE_LINES_SPAN_LIBRARY_FRAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">0</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the APM agent collects source code snippets for errors.
This setting allows you to modify the number of lines of source code that are being collected.</p>
<p>We differ between errors and spans, as well as library frames and app frames.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Especially for spans, collecting source code can have a large impact on storage use in your Elasticsearch cluster.</p>
</div>
</div>
<h4><a id="config-capture-body"></a><code class="literal">capture_body</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_BODY</code></p></td>
<td align="left" valign="top"><p><code class="literal">CAPTURE_BODY</code></p></td>
<td align="left" valign="top"><p><code class="literal">off</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>For transactions that are HTTP requests,
the Python agent can optionally capture the request body (e.g. <code class="literal">POST</code> variables).</p>
<p>Possible values: <code class="literal">errors</code>, <code class="literal">transactions</code>, <code class="literal">all</code>, <code class="literal">off</code>.</p>
<p>If the request has a body and this setting is disabled, the body will be shown as <code class="literal">[REDACTED]</code>.</p>
<p>For requests with a content type of <code class="literal">multipart/form-data</code>,
any uploaded files will be referenced in a special <code class="literal">_files</code> key.
It contains the name of the field and the name of the uploaded file, if provided.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Request bodies often contain sensitive values like passwords and credit card numbers.
If your service handles data like this, we advise to only enable this feature with care.</p>
</div>
</div>
<h4><a id="config-capture-headers"></a><code class="literal">capture_headers</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_HEADERS</code></p></td>
<td align="left" valign="top"><p><code class="literal">CAPTURE_HEADERS</code></p></td>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>For transactions and errors that happen due to HTTP requests,
the Python agent can optionally capture the request and response headers.</p>
<p>Possible values: <code class="literal">true</code>, <code class="literal">false</code></p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Request headers often contain sensitive values like session IDs and cookies.
See <a class="xref" href="sanitizing-data.html" title="Sanitizing data">sanitizing data</a> for more information on how to filter out sensitive data.</p>
</div>
</div>
<h4><a id="config-transaction-max-spans"></a><code class="literal">transaction_max_spans</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_MAX_SPANS</code></p></td>
<td align="left" valign="top"><p><code class="literal">TRANSACTION_MAX_SPANS</code></p></td>
<td align="left" valign="top"><p><code class="literal">500</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This limits the amount of spans that are recorded per transaction.
This is helpful in cases where a transaction creates a very high amount of spans (e.g. thousands of SQL queries).
Setting an upper limit will prevent edge cases from overloading the agent and the APM Server.</p>
<h4><a id="config-stack-trace-limit"></a><code class="literal">stack_trace_limit</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_STACK_TRACE_LIMIT</code></p></td>
<td align="left" valign="top"><p><code class="literal">STACK_TRACE_LIMIT</code></p></td>
<td align="left" valign="top"><p><code class="literal">50</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This limits the number of frames captured for each stack trace.</p>
<p>Setting the limit to <code class="literal">0</code> will disable stack trace collection,
while any positive integer value will be used as the maximum number of frames to collect.
To disable the limit and always capture all frames, set the value to <code class="literal">-1</code>.</p>
<h4><a id="config-span-stack-trace-min-duration"></a><code class="literal">span_stack_trace_min_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_STACK_TRACE_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">SPAN_STACK_TRACE_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">"5ms"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the APM agent collects a stack trace with every recorded span
that has a duration equal to or longer than this configured threshold.  While
stack traces are very helpful to find the exact place in your code from which a
span originates, collecting this stack trace does have some overhead. Tune this
threshold to ensure that you only collect stack traces for spans that
could be problematic.</p>
<p>To collect traces for all spans, regardless of their length, set the value to <code class="literal">0</code>.</p>
<p>To disable stack trace collection for spans completely, set the value to <code class="literal">-1</code>.</p>
<p>Except for the special values <code class="literal">-1</code> and <code class="literal">0</code>,
this setting should be provided in <span class="strong strong"><strong><a class="xref" href="configuration.html#config-format-duration" title="Duration format">duration format</a></strong></span>.</p>
<h4><a id="config-span-frames-min-duration"></a><code class="literal">span_frames_min_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_FRAMES_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">SPAN_FRAMES_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">"5ms"</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This config value is being deprecated. Use
<a class="xref" href="configuration.html#config-span-stack-trace-min-duration" title="span_stack_trace_min_duration"><code class="literal">span_stack_trace_min_duration</code></a> instead.</p>
</div>
</div>
<h4><a id="config-span-compression-enabled"></a><code class="literal">span_compression_enabled</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_ENABLED</code></p></td>
<td align="left" valign="top"><p><code class="literal">SPAN_COMPRESSION_ENABLED</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Enable/disable span compression.</p>
<p>If enabled, the agent will compress very short, repeated spans into a single span,
which is beneficial for storage and processing requirements.
Some information is lost in this process, e.g. exact durations of each compressed span.</p>
<h4><a id="config-span-compression-exact-match-max_duration"></a><code class="literal">span_compression_exact_match_max_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_EXACT_MATCH_MAX_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">SPAN_COMPRESSION_EXACT_MATCH_MAX_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">"50ms"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Consecutive spans that are exact match and that are under this threshold will be compressed into a single composite span.
This reduces the collection, processing, and storage overhead, and removes clutter from the UI.
The tradeoff is that the DB statements of all the compressed spans will not be collected.</p>
<p>Two spans are considered exact matches if the following attributes are identical:
 * span name
 * span type
 * span subtype
 * destination resource (e.g. the Database name)</p>
<h4><a id="config-span-compression-same-kind-max-duration"></a><code class="literal">span_compression_same_kind_max_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_SAME_KIND_MAX_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">SPAN_COMPRESSION_SAME_KIND_MAX_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">"0ms"</code> (disabled)</p></td>
</tr>
</tbody>
</table>
</div>
<p>Consecutive spans to the same destination that are under this threshold will be compressed into a single composite span.
This reduces the collection, processing, and storage overhead, and removes clutter from the UI.
The tradeoff is that metadata such as database statements of all the compressed spans will not be collected.</p>
<p>Two spans are considered to be of the same kind if the following attributes are identical:
 * span type
 * span subtype
 * destination resource (e.g. the Database name)</p>
<h4><a id="config-exit-span-min-duration"></a><code class="literal">exit_span_min_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_EXIT_SPAN_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">EXIT_SPAN_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">"0ms"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Exit spans are spans that represent a call to an external service, like a database.
If such calls are very short, they are usually not relevant and can be ignored.</p>
<p>This feature is disabled by default.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>if a span propagates distributed tracing IDs, it will not be ignored, even if it is shorter than the configured threshold.
This is to ensure that no broken traces are recorded.</p>
</div>
</div>
<h4><a id="config-api-request-size"></a><code class="literal">api_request_size</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_API_REQUEST_SIZE</code></p></td>
<td align="left" valign="top"><p><code class="literal">API_REQUEST_SIZE</code></p></td>
<td align="left" valign="top"><p><code class="literal">"768kb"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The maximum queue length of the request buffer before sending the request to the APM Server.
A lower value will increase the load on your APM Server,
while a higher value can increase the memory pressure of your app.
A higher value also impacts the time until data is indexed and searchable in Elasticsearch.</p>
<p>This setting is useful to limit memory consumption if you experience a sudden spike of traffic.
It has to be provided in <span class="strong strong"><strong><a class="xref" href="configuration.html#config-format-size" title="Size format">size format</a></strong></span>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Due to internal buffering of gzip, the actual request size can be a few kilobytes larger than the given limit.
By default, the APM Server limits request payload size to <code class="literal">1 MByte</code>.</p>
</div>
</div>
<h4><a id="config-api-request-time"></a><code class="literal">api_request_time</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_API_REQUEST_TIME</code></p></td>
<td align="left" valign="top"><p><code class="literal">API_REQUEST_TIME</code></p></td>
<td align="left" valign="top"><p><code class="literal">"10s"</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The maximum queue time of the request buffer before sending the request to the APM Server.
A lower value will increase the load on your APM Server,
while a higher value can increase the memory pressure of your app.
A higher value also impacts the time until data is indexed and searchable in Elasticsearch.</p>
<p>This setting is useful to limit memory consumption if you experience a sudden spike of traffic.
It has to be provided in <span class="strong strong"><strong><a class="xref" href="configuration.html#config-format-duration" title="Duration format">duration format</a></strong></span>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The actual time will vary between 90-110% of the given value,
to avoid stampedes of instances that start at the same time.</p>
</div>
</div>
<h4><a id="config-processors"></a><code class="literal">processors</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_PROCESSORS</code></p></td>
<td align="left" valign="top"><p><code class="literal">PROCESSORS</code></p></td>
<td align="left" valign="top"><p><code class="literal">['elasticapm.processors.sanitize_stacktrace_locals',
                                              'elasticapm.processors.sanitize_http_request_cookies',
                                              'elasticapm.processors.sanitize_http_headers',
                                              'elasticapm.processors.sanitize_http_wsgi_env',
                                              'elasticapm.processors.sanitize_http_request_body']</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>A list of processors to process transactions and errors.
For more information, see <a class="xref" href="sanitizing-data.html" title="Sanitizing data">Sanitizing Data</a>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend always including the default set of validators if you customize this setting.</p>
</div>
</div>
<h4><a id="config-sanitize-field-names"></a><code class="literal">sanitize_field_names</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SANITIZE_FIELD_NAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">SANITIZE_FIELD_NAMES</code></p></td>
<td align="left" valign="top"><p><code class="literal">["password",
                                                                  "passwd",
                                                                  "pwd",
                                                                  "secret",
                                                                  "*key",
                                                                  "*token*",
                                                                  "*session*",
                                                                  "*credit*",
                                                                  "*card*",
                                                                  "*auth*",
                                                                  "*principal*",
                                                                  "set-cookie"]</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>A list of glob-matched field names to match and mask when using processors.
For more information, see <a class="xref" href="sanitizing-data.html" title="Sanitizing data">Sanitizing Data</a>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend always including the default set of field name matches
if you customize this setting.</p>
</div>
</div>
<h4><a id="config-transaction-sample-rate"></a><code class="literal">transaction_sample_rate</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_SAMPLE_RATE</code></p></td>
<td align="left" valign="top"><p><code class="literal">TRANSACTION_SAMPLE_RATE</code></p></td>
<td align="left" valign="top"><p><code class="literal">1.0</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the agent samples every transaction (e.g. request to your service).
To reduce overhead and storage requirements, set the sample rate to a value between <code class="literal">0.0</code> and <code class="literal">1.0</code>.
We still record overall time and the result for unsampled transactions, but no context information, labels, or spans.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting will be automatically rounded to 4 decimals of precision.</p>
</div>
</div>
<h4><a id="config-include-paths"></a><code class="literal">include_paths</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_INCLUDE_PATHS</code></p></td>
<td align="left" valign="top"><p><code class="literal">INCLUDE_PATHS</code></p></td>
<td align="left" valign="top"><p><code class="literal">[]</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>multiple values separated by commas, without spaces</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>A set of paths, optionally using shell globs
(see <a href="https://docs.python.org/3/library/fnmatch.html" class="ulink" target="_top"><code class="literal">fnmatch</code></a> for a description of the syntax).
These are matched against the absolute filename of every frame, and if a pattern matches, the frame is considered
to be an "in-app frame".</p>
<p><code class="literal">include_paths</code> <span class="strong strong"><strong>takes precedence</strong></span> over <code class="literal">exclude_paths</code>.</p>
<h4><a id="config-exclude-paths"></a><code class="literal">exclude_paths</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_EXCLUDE_PATHS</code></p></td>
<td align="left" valign="top"><p><code class="literal">EXCLUDE_PATHS</code></p></td>
<td align="left" valign="top"><p>Varies on Python version and implementation</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>multiple values separated by commas, without spaces</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>A set of paths, optionally using shell globs
(see <a href="https://docs.python.org/3/library/fnmatch.html" class="ulink" target="_top"><code class="literal">fnmatch</code></a> for a description of the syntax).
These are matched against the absolute filename of every frame, and if a pattern matches, the frame is considered
to be a "library frame".</p>
<p><code class="literal">include_paths</code> <span class="strong strong"><strong>takes precedence</strong></span> over <code class="literal">exclude_paths</code>.</p>
<p>The default value varies based on your Python version and implementation, e.g.:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
PyPy3: <code class="literal">['\*/lib-python/3/*', '\*/site-packages/*']</code>
</li>
<li class="listitem">
CPython 2.7: <code class="literal">['\*/lib/python2.7/*', '\*/lib64/python2.7/*']</code>
</li>
</ul>
</div>
<h4><a id="config-debug"></a><code class="literal">debug</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DEBUG</code></p></td>
<td align="left" valign="top"><p><code class="literal">DEBUG</code></p></td>
<td align="left" valign="top"><p><code class="literal">False</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>If your app is in debug mode (e.g. in Django with <code class="literal">settings.DEBUG = True</code> or in Flask with <code class="literal">app.debug = True</code>),
the agent won&#8217;t send any data to the APM Server. You can override it by changing this setting to <code class="literal">True</code>.</p>
<h4><a id="config-disable-send"></a><code class="literal">disable_send</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DISABLE_SEND</code></p></td>
<td align="left" valign="top"><p><code class="literal">DISABLE_SEND</code></p></td>
<td align="left" valign="top"><p><code class="literal">False</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>If set to <code class="literal">True</code>, the agent won&#8217;t send any events to the APM Server, independent of any debug state.</p>
<h4><a id="config-instrument"></a><code class="literal">instrument</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_INSTRUMENT</code></p></td>
<td align="left" valign="top"><p><code class="literal">INSTRUMENT</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>If set to <code class="literal">False</code>, the agent won&#8217;t instrument any code.
This disables most of the tracing functionality, but can be useful to debug possible instrumentation issues.</p>
<h4><a id="config-verify-server-cert"></a><code class="literal">verify_server_cert</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_VERIFY_SERVER_CERT</code></p></td>
<td align="left" valign="top"><p><code class="literal">VERIFY_SERVER_CERT</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the agent verifies the SSL certificate if an HTTPS connection to the APM Server is used.
Verification can be disabled by changing this setting to <code class="literal">False</code>.
This setting is ignored when <a class="xref" href="configuration.html#config-server-cert" title="server_cert"><code class="literal">server_cert</code></a> is set.</p>
<h4><a id="config-server-cert"></a><code class="literal">server_cert</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVER_CERT</code></p></td>
<td align="left" valign="top"><p><code class="literal">SERVER_CERT</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>If you have configured your APM Server with a self-signed TLS certificate, or you
just wish to pin the server certificate, you can specify the path to the PEM-encoded
certificate via the <code class="literal">ELASTIC_APM_SERVER_CERT</code> configuration.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If this option is set, the agent only verifies that the certificate provided by the APM Server is
identical to the one configured here. Validity of the certificate is not checked.</p>
</div>
</div>
<h4><a id="config-server-ca-cert-file"></a><code class="literal">server_ca_cert_file</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVER_CA_CERT_FILE</code></p></td>
<td align="left" valign="top"><p><code class="literal">SERVER_CA_CERT_FILE</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the agent will validate the TLS/SSL certificate of the APM Server using the well-known CAs curated by Mozilla,
and provided by the <a href="https://pypi.org/project/certifi/" class="ulink" target="_top"><code class="literal">certifi</code></a> package.</p>
<p>You can set this option to the path of a file containing a CA certificate that will be used instead.</p>
<p>Specifying this option is required when using self-signed certificates, unless server certificate validation is disabled.</p>
<h4><a id="config-use-certifi"></a><code class="literal">use_certifi</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_USE_CERTIFI</code></p></td>
<td align="left" valign="top"><p><code class="literal">USE_CERTIFI</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the Python Agent uses the <a href="https://pypi.org/project/certifi/" class="ulink" target="_top"><code class="literal">certifi</code></a> certificate store.
To use Python&#8217;s default mechanism for finding certificates, set this option to <code class="literal">False</code>.</p>
<h4><a id="config-metrics_interval"></a><code class="literal">metrics_interval</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_METRICS_INTERVAL</code></p></td>
<td align="left" valign="top"><p><code class="literal">METRICS_INTERVAL</code></p></td>
<td align="left" valign="top"><p><code class="literal">30s</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The interval in which the agent collects metrics. A shorter interval increases the granularity of metrics,
but also increases the overhead of the agent, as well as storage requirements.</p>
<p>It has to be provided in <span class="strong strong"><strong><a class="xref" href="configuration.html#config-format-duration" title="Duration format">duration format</a></strong></span>.</p>
<h4><a id="config-disable_metrics"></a><code class="literal">disable_metrics</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DISABLE_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">DISABLE_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>A comma-separated list of dotted metrics names that should not be sent to the APM Server.
You can use <code class="literal">*</code> to match multiple metrics; for example, to disable all CPU-related metrics,
as well as the "total system memory" metric, set <code class="literal">disable_metrics</code> to:</p>
<pre class="literallayout">"*.cpu.*,system.memory.total"</pre>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This setting only disables the <span class="strong strong"><strong>sending</strong></span> of the given metrics, not collection.</p>
</div>
</div>
<h4><a id="config-breakdown_metrics"></a><code class="literal">breakdown_metrics</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_BREAKDOWN_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">BREAKDOWN_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Enable or disable the tracking and collection of breakdown metrics.
Setting this to <code class="literal">False</code> disables the tracking of breakdown metrics, which can reduce the overhead of the agent.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires APM Server and Kibana &gt;= 7.3.</p>
</div>
</div>
<h4><a id="config-prometheus_metrics"></a><code class="literal">prometheus_metrics</code> (Beta)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_PROMETHEUS_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">PROMETHEUS_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">False</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Enable/disable the tracking and collection of metrics from <code class="literal">prometheus_client</code>.</p>
<p>See <a class="xref" href="metrics.html#prometheus-metricset" title="Prometheus metric set (beta)">Prometheus metric set (beta)</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is currently in beta status.</p>
</div>
</div>
<h4><a id="config-prometheus_metrics_prefix"></a><code class="literal">prometheus_metrics_prefix</code> (Beta)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_PROMETHEUS_METRICS_PREFIX</code></p></td>
<td align="left" valign="top"><p><code class="literal">PROMETHEUS_METRICS_PREFIX</code></p></td>
<td align="left" valign="top"><p><code class="literal">prometheus.metrics.</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>A prefix to prepend to Prometheus metrics names.</p>
<p>See <a class="xref" href="metrics.html#prometheus-metricset" title="Prometheus metric set (beta)">Prometheus metric set (beta)</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is currently in beta status.</p>
</div>
</div>
<h4><a id="config-metrics_sets"></a><code class="literal">metrics_sets</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_METRICS_SETS</code></p></td>
<td align="left" valign="top"><p><code class="literal">METRICS_SETS</code></p></td>
<td align="left" valign="top"><p>["elasticapm.metrics.sets.cpu.CPUMetricSet"]</p></td>
</tr>
</tbody>
</table>
</div>
<p>List of import paths for the MetricSets that should be used to collect metrics.</p>
<p>See <a class="xref" href="metrics.html#custom-metrics" title="Custom Metrics">Custom Metrics</a> for more information.</p>
<h4><a id="config-central_config"></a><code class="literal">central_config</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CENTRAL_CONFIG</code></p></td>
<td align="left" valign="top"><p><code class="literal">CENTRAL_CONFIG</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>When enabled, the agent will make periodic requests to the APM Server to fetch updated configuration.</p>
<p>See <a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration">Dynamic configuration</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires APM Server and Kibana &gt;= 7.3.</p>
</div>
</div>
<h4><a id="config-global_labels"></a><code class="literal">global_labels</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_GLOBAL_LABELS</code></p></td>
<td align="left" valign="top"><p><code class="literal">GLOBAL_LABELS</code></p></td>
<td align="left" valign="top"><p><code class="literal">None</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Labels added to all events, with the format <code class="literal">key=value[,key=value[,...]]</code>.
Any labels set by application via the API will override global labels with the same keys.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires APM Server &gt;= 7.2.</p>
</div>
</div>
<h4><a id="config-generic-disable-log-record-factory"></a><code class="literal">disable_log_record_factory</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DISABLE_LOG_RECORD_FACTORY</code></p></td>
<td align="left" valign="top"><p><code class="literal">DISABLE_LOG_RECORD_FACTORY</code></p></td>
<td align="left" valign="top"><p><code class="literal">False</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default in python 3, the agent installs a <a class="xref" href="logs.html#logging" title="logging">LogRecord factory</a> that
automatically adds tracing fields to your log records. Disable this
behavior by setting this to <code class="literal">True</code>.</p>
<h4><a id="config-use-elastic-traceparent-header"></a><code class="literal">use_elastic_traceparent_header</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_USE_ELASTIC_TRACEPARENT_HEADER</code></p></td>
<td align="left" valign="top"><p><code class="literal">USE_ELASTIC_TRACEPARENT_HEADER</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>To enable <a href="/guide/en/apm/guide/8.15/apm-distributed-tracing.html" class="ulink" target="_top">distributed tracing</a>,
the agent sets a number of HTTP headers to outgoing requests made with <a class="xref" href="supported-technologies.html#automatic-instrumentation-http" title="External HTTP requests">instrumented HTTP libraries</a>.
These headers (<code class="literal">traceparent</code> and <code class="literal">tracestate</code>) are defined in the <a href="https://www.w3.org/TR/trace-context-1/" class="ulink" target="_top">W3C Trace Context</a> specification.</p>
<p>Additionally, when this setting is set to <code class="literal">True</code>, the agent will set <code class="literal">elasticapm-traceparent</code> for backwards compatibility.</p>
<h4><a id="config-trace-continuation-strategy"></a><code class="literal">trace_continuation_strategy</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRACE_CONTINUATION_STRATEGY</code></p></td>
<td align="left" valign="top"><p><code class="literal">TRACE_CONTINUATION_STRATEGY</code></p></td>
<td align="left" valign="top"><p><code class="literal">continue</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This option allows some control on how the APM agent handles W3C trace-context headers on incoming requests.
By default, the <code class="literal">traceparent</code> and <code class="literal">tracestate</code> headers are used per W3C spec for distributed tracing.
However, in certain cases it can be helpful to <span class="strong strong"><strong>not</strong></span> use the incoming <code class="literal">traceparent</code> header.
Some example use cases:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An Elastic-monitored service is receiving requests with <code class="literal">traceparent</code> headers from <span class="strong strong"><strong>unmonitored</strong></span> services.
</li>
<li class="listitem">
An Elastic-monitored service is publicly exposed, and does not want tracing data (trace-ids, sampling decisions) to possibly be spoofed by user requests.
</li>
</ul>
</div>
<p>Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">'continue'</code>: The default behavior. An incoming <code class="literal">traceparent</code> value is used to continue the trace and determine the sampling decision.
</li>
<li class="listitem">
<code class="literal">'restart'</code>: Always ignores the <code class="literal">traceparent</code> header of incoming requests.
A new trace-id will be generated and the sampling decision will be made based on <a class="xref" href="configuration.html#config-transaction-sample-rate" title="transaction_sample_rate"><code class="literal">transaction_sample_rate</code></a>.
A <span class="strong strong"><strong>span link</strong></span> will be made to the incoming traceparent.
</li>
<li class="listitem">
<code class="literal">'restart_external'</code>: If an incoming request includes the <code class="literal">es</code> vendor flag in <code class="literal">tracestate</code>, then any <em>traceparent</em> will be considered internal and will be handled as described for <code class="literal">'continue'</code> above.
Otherwise, any <code class="literal">'traceparent'</code> is considered external and will be handled as described for <code class="literal">'restart'</code> above.
</li>
</ul>
</div>
<p>Starting with Elastic Observability 8.2, span links will be visible in trace
views.</p>
<h4><a id="config-use-elastic-excepthook"></a><code class="literal">use_elastic_excepthook</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_USE_ELASTIC_EXCEPTHOOK</code></p></td>
<td align="left" valign="top"><p><code class="literal">USE_ELASTIC_EXCEPTHOOK</code></p></td>
<td align="left" valign="top"><p><code class="literal">False</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>If set to <code class="literal">True</code>, the agent will intercept the default <code class="literal">sys.excepthook</code>, which
allows the agent to collect all uncaught exceptions.</p>
<h4><a id="config-include-process-args"></a><code class="literal">include_process_args</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django/Flask</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_INCLUDE_PROCESS_ARGS</code></p></td>
<td align="left" valign="top"><p><code class="literal">INCLUDE_PROCESS_ARGS</code></p></td>
<td align="left" valign="top"><p><code class="literal">False</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Whether each transaction should have the process arguments attached. Disabled by default to save disk space.</p>
<h3><a id="config-django-specific"></a>Django-specific configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<h4><a id="config-django-transaction-name-from-route"></a><code class="literal">django_transaction_name_from_route</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DJANGO_TRANSACTION_NAME_FROM_ROUTE</code></p></td>
<td align="left" valign="top"><p><code class="literal">DJANGO_TRANSACTION_NAME_FROM_ROUTE</code></p></td>
<td align="left" valign="top"><p><code class="literal">False</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, we use the function or class name of the view as the transaction name.
Starting with Django 2.2, Django makes the route (e.g. <code class="literal">users/&lt;int:user_id&gt;/</code>) available on the <code class="literal">request.resolver_match</code> object.
If you want to use the route instead of the view name as the transaction name, set this config option to <code class="literal">true</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>in versions previous to Django 2.2, changing this setting will have no effect.</p>
</div>
</div>
<h4><a id="config-django-autoinsert-middleware"></a><code class="literal">django_autoinsert_middleware</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment</th>
<th align="left" valign="top">Django</th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DJANGO_AUTOINSERT_MIDDLEWARE</code></p></td>
<td align="left" valign="top"><p><code class="literal">DJANGO_AUTOINSERT_MIDDLEWARE</code></p></td>
<td align="left" valign="top"><p><code class="literal">True</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>To trace Django requests, the agent uses a middleware, <code class="literal">elasticapm.contrib.django.middleware.TracingMiddleware</code>.
By default, this middleware is inserted automatically as the first item in <code class="literal">settings.MIDDLEWARES</code>.
To disable the automatic insertion of the middleware, change this setting to <code class="literal">False</code>.</p>
<h3><a id="config-generic-environment"></a>Generic Environment variables<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<p>Some environment variables that are not specific to the APM agent can be used to configure the agent.</p>
<h4><a id="config-generic-http-proxy"></a><code class="literal">HTTP_PROXY</code> and <code class="literal">HTTPS_PROXY</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p>By using <code class="literal">HTTP_PROXY</code> and <code class="literal">HTTPS_PROXY</code>, the agent can be instructed to use a proxy to connect to the APM Server.
If both are set, <code class="literal">HTTPS_PROXY</code> takes precedence.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The environment variables are case-insensitive.</p>
</div>
</div>
<h4><a id="config-generic-no-proxy"></a><code class="literal">NO_PROXY</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p>To instruct the agent to <span class="strong strong"><strong>not</strong></span> use a proxy, you can use the <code class="literal">NO_PROXY</code> environment variable.
You can either set it to a comma-separated list of hosts for which no proxy should be used (e.g. <code class="literal">localhost,example.com</code>)
or use <code class="literal">*</code> to match any host.</p>
<p>This is useful if <code class="literal">HTTP_PROXY</code> / <code class="literal">HTTPS_PROXY</code> is set for other reasons than agent / APM Server communication.</p>
<h4><a id="config-ssl-cert-file"></a><code class="literal">SSL_CERT_FILE</code> and <code class="literal">SSL_CERT_DIR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p>To tell the agent to use a different SSL certificate, you can use these environment variables.
See also <a href="https://www.openssl.org/docs/manmaster/man7/openssl-env.html#SSL_CERT_DIR-SSL_CERT_FILE" class="ulink" target="_top">OpenSSL docs</a>.</p>
<p>Please note that these variables may apply to other SSL/TLS communication in your service,
not just related to the APM agent.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These environment variables only take effect if <a class="xref" href="configuration.html#config-use-certifi" title="use_certifi"><code class="literal">use_certifi</code></a> is set to <code class="literal">False</code>.</p>
</div>
</div>
<h3><a id="config-formats"></a>Configuration formats<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h3>
<p>Some options require a unit, either duration or size.
These need to be provided in a specific format.</p>
<h4><a id="config-format-duration"></a>Duration format<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p>The <em>duration</em> format is used for options like timeouts.
The unit is provided as a suffix directly after the number–without any separation by whitespace.</p>
<p><span class="strong strong"><strong>Example</strong></span>: <code class="literal">5ms</code></p>
<p><span class="strong strong"><strong>Supported units</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">us</code> (microseconds)
</li>
<li class="listitem">
<code class="literal">ms</code> (milliseconds)
</li>
<li class="listitem">
<code class="literal">s</code> (seconds)
</li>
<li class="listitem">
<code class="literal">m</code> (minutes)
</li>
</ul>
</div>
<h4><a id="config-format-size"></a>Size format<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-python/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p>The <em>size</em> format is used for options like maximum buffer sizes.
The unit is provided as suffix directly after the number, without and separation by whitespace.</p>
<p><span class="strong strong"><strong>Example</strong></span>: <code class="literal">10kb</code></p>
<p><span class="strong strong"><strong>Supported units</strong></span>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">b</code> (bytes)
</li>
<li class="listitem">
<code class="literal">kb</code> (kilobytes)
</li>
<li class="listitem">
<code class="literal">mb</code> (megabytes)
</li>
<li class="listitem">
<code class="literal">gb</code> (gigabytes)
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>We use the power-of-two sizing convention, e.g. <code class="literal">1 kilobyte == 1024 bytes</code></p>
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="supported-technologies.html">« Supported Technologies</a>
</span>
<span class="next">
<a href="advanced-topics.html">Advanced Topics »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
