<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Supported technologies | APM Ruby Agent Reference [3.x] | Elastic</title>
<meta class="elastic" name="content" content="Supported technologies | APM Ruby Agent Reference [3.x]">

<link rel="home" href="index.html" title="APM Ruby Agent Reference [3.x]"/>
<link rel="up" href="index.html" title="APM Ruby Agent Reference [3.x]"/>
<link rel="prev" href="getting-started-rack.html" title="Getting started with Rack"/>
<link rel="next" href="configuration.html" title="Configuration"/>
<meta class="elastic" name="product_version" content="3.x"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Ruby Agent/Reference/3.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="3.x"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Ruby Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/apm/guide/current/apm-overview.html">User Guide</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">Monitoring AWS Lambda Functions</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
</div>
<div class="navheader">
<span class="prev">
<a href="getting-started-rack.html">« Getting started with Rack</a>
</span>
<span class="next">
<a href="configuration.html">Configuration »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="supported-technologies"></a>Supported technologies<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h1>
</div></div></div>
<p>The Elastic APM Ruby Agent has built-in support for many frameworks and
libraries. Generally, we want to support all of the most popular libraries. If your favorite
is missing, feel free to request it in an issue, or better yet, create a pull
request.</p>
<h3><a id="supported-technologies-ruby"></a>Ruby<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>We follow Ruby&#8217;s own maintenance policy and officially support all currently
maintained versions per
<a href="https://www.ruby-lang.org/en/downloads/branches/" class="ulink" target="_top">Ruby Maintenance Branches</a>.</p>
<h3><a id="supported-technologies-web"></a>Web Frameworks and Libraries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>We have automatic support for Ruby on Rails and all Rack compatible web
frameworks.</p>
<p>We test against all supported minor versions of Rails, Sinatra, and Grape.</p>
<h4><a id="supported-technologies-rails"></a>Ruby on Rails<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h4>
<p>We currently support all versions of Rails since 4.2.
This follows Rails' own <a href="https://rubyonrails.org/security/" class="ulink" target="_top">Security policy</a>.</p>
<p>See <a class="xref" href="getting-started-rails.html" title="Getting started with Rails">Getting started with Rails</a>.</p>
<h4><a id="supported-technologies-sinatra"></a>Sinatra<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h4>
<p>We currently support all versions of Sinatra since 1.0.</p>
<p>See <a class="xref" href="getting-started-rack.html" title="Getting started with Rack">Getting started with Rack</a>.</p>
<h4><a id="supported-technologies-grape"></a>Grape<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h4>
<p>We currently support all versions of Grape since 1.2.</p>
<p>See <a class="xref" href="getting-started-rack.html#getting-started-grape" title="Grape example">Grape example</a>.</p>
<h3><a id="supported-technologies-databases"></a>Databases<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>We automatically instrument database actions using:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
ActiveRecord (v4.2+)
</li>
<li class="listitem">
DynamoDB (v1.0+)
</li>
<li class="listitem">
Elasticsearch (v0.9+)
</li>
<li class="listitem">
Mongo (v2.1+)
</li>
<li class="listitem">
Redis (v3.1+)
</li>
<li class="listitem">
Sequel (v4.35+)
</li>
</ul>
</div>
<h3><a id="supported-technologies-http"></a>External HTTP requests<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>We automatically instrument and add support for distributed tracing to external
requests using these libraries:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">net/http</code>
</li>
<li class="listitem">
Http.rb (v0.6+)
</li>
<li class="listitem">
Faraday (v0.2.1+)
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Note:</strong></span> These libraries usually assume <code class="literal">localhost</code> if no <code class="literal">Host</code> is specified, so the agent does as well.</p>
<h3><a id="supported-technologies-backgroud-processing"></a>Background Processing<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>We automatically instrument background processing using:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
DelayedJob
</li>
<li class="listitem">
Sidekiq
</li>
<li class="listitem">
Shoryuken
</li>
<li class="listitem">
Sneakers (v2.12.0+) (Experimental, see <a href="https://github.com/elastic/apm-agent-ruby/pull/676" class="ulink" target="_top">#676</a>)
</li>
<li class="listitem">
Resque (v2.0.0+)
</li>
<li class="listitem">
SuckerPunch (v2.0.0+)
</li>
</ul>
</div>
<h3><a id="supported-technologies-resque"></a>Resque<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>To make the agent work with Resque, you need to require <code class="literal">elastic_apm/resque</code> before you boot your Resque worker process.</p>
<p>For example in your <code class="literal">Rakefile</code>:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">require 'resque'
require 'elastic_apm'
require 'elastic_apm/resque'</pre>
</div>
<p>When you start Resque, you should see a series of messages like the following in the Resque logs:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">I, [XXX #81227]  INFO -- : Starting worker main
D, [XXX #81227] DEBUG -- : Registered signals
I, [XXX #81227]  INFO -- : Running before_first_fork hooks
D, [XXX #81227] DEBUG -- : Starting ElasticAPM agent</pre>
</div>
<p>Also be sure to set the Resque environment variable <code class="literal">RUN_AT_EXIT_HOOKS</code> to <code class="literal">true</code>. Otherwise, the fork may be
terminated before the agent has a chance to send all the fork&#8217;s events to the APM server.</p>
<h3><a id="supported-technologies-sucker-punch"></a>SuckerPunch<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>Asynchronously executed jobs in SuckerPunch are automatically instrumented.</p>
<p>Note that errors raised in the user-defined <code class="literal">JobClass#perform</code> method will be first handled by the SuckerPunch exception
handler before being handled by the agent. The handler is accessed/set via <code class="literal">SuckerPunch.exception_handler</code> in version
2.0. The agent transaction will be marked as successful unless you re-raise the error in the exception handler.
You can also explicitly report the error via <a class="xref" href="api.html#api-agent-report" title="ElasticAPM.report"><code class="literal">ElasticAPM.report</code></a> in a custom SuckerPunch exception
handler.</p>
<h3><a id="supported-technologies-grpc"></a>gRPC<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/3.x/docs/supported-technologies.asciidoc">edit</a></h3>
<p>We automatically instrument gRPC using the <code class="literal">grpc</code> gem. Note that this is experimental, as the <code class="literal">grpc</code> gem&#8217;s
support for <code class="literal">Interceptors</code> is experimental as of version 1.27.0.</p>
<p>To instrument a client, add the <code class="literal">ElasticAPM::GRPC::ClientInterceptor</code> as an <code class="literal">interceptor</code> at Stub creation.</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">Helloworld::Greeter::Stub.new(
  'localhost:50051',
  interceptors: [ElasticAPM::GRPC::ClientInterceptor.new]
)</pre>
</div>
<p>To instrument a server, add the <code class="literal">ElasticAPM::GRPC::ServerInterceptor</code>.</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">GRPC::RpcServer.new(interceptors: [ElasticAPM::GRPC::ServerInterceptor.new])</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="getting-started-rack.html">« Getting started with Rack</a>
</span>
<span class="next">
<a href="configuration.html">Configuration »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
