<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Troubleshooting | APM Real User Monitoring JavaScript Agent Reference [5.x] | Elastic</title>
<link rel="home" href="index.html" title="APM Real User Monitoring JavaScript Agent Reference [5.x]"/>
<link rel="up" href="index.html" title="APM Real User Monitoring JavaScript Agent Reference [5.x]"/>
<link rel="prev" href="performance-tuning.html" title="Performance Tuning"/>
<link rel="next" href="upgrading.html" title="Upgrading"/>
<meta name="DC.type" content="Learn/Docs/APM Real User Monitoring JavaScript Agent/Reference/5.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="5.x"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">APM Real User Monitoring JavaScript Agent Reference [5.x]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="performance-tuning.html">« Performance Tuning</a>
</span>
<span class="next">
<a href="upgrading.html">Upgrading »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="troubleshooting"></a>Troubleshooting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h1>
</div></div></div>
<h3><a id="errors-originating-from-agent"></a>Some errors in the application appear to be originating from the agent&#8217;s JavaScript file<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h3>
<p>In some cases when you look at the stack trace of an error, it appears to be originating from
the agent&#8217;s JavaScript file. However, since we need to patch some browser APIs in order to provide
some of the core functionalities of the agent, our JavaScript file appears in the error stack trace.
Often, the error is generated from another part your application, you can follow the stack trace
further to identify the offending code.</p>
<p>Of course, there are errors that might have been caused by the agent itself and we appreciate it if
you <a class="xref" href="troubleshooting.html#get-in-touch" title="Get in touch">report them back to us</a>.</p>
<h3><a id="cross-origin-script-error"></a>Some errors in the application only show <code class="literal">script error</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h3>
<p>In some cases when you look at the details of an error, the only information you can see is the message <code class="literal">Script error</code>.
This happens when an error originates from a JavaScript file served from a different origin than the page&#8217;s origin.</p>
<p>In order to get visibility of the error&#8217;s detail, you must do two things.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Add the attribute <code class="literal">crossorigin</code> to the <code class="literal">&lt;script&gt;</code> element:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">&lt;script src="https://example.com/example.js" crossorigin&gt;</pre>
</div>
</li>
<li class="listitem">
<p>Make sure that the server response includes the <code class="literal">Access-Control-Allow-Origin</code> header when serving the JavaScript file.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">// Either of the two values is valid:

Access-Control-Allow-Origin: *
Access-Control-Allow-Origin: your page's origin</pre>
</div>
</li>
</ol>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To learn more about how browsers handle script errors, see the MDN page on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror#notes" class="ulink" target="_top">onerror</a> event.</p>
</div>
</div>
<h3><a id="no-stack-trace-available"></a>No stack trace available in the Span detail view<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h3>
<p>The RUM JS agent does not support stack traces for spans due to performance concerns related to gathering stack information.</p>
<h3><a id="debugging"></a>Debugging<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h3>
<p>In order to debug the agent consider performing the following steps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Add <code class="literal">logLevel: 'debug'</code> to the agent configuration
</li>
<li class="listitem">
Reload the application
</li>
<li class="listitem">
Wait at least 5 seconds after the page has loaded
</li>
<li class="listitem">
Monitor the Console and Network panel in your browsers developer tools
</li>
</ol>
</div>
<h3><a id="disable-events-payload-compression"></a>Disable events payload compression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h3>
<p>In browsers such as Chrome, the RUM agent event payload is compressed with gzip.
Because of this compression, you will not see readable content when inspecting the event with the Network panel of your browser developer tools.</p>
<p>There are situations where that can be an issue. For instance, HAR files will not show readable information. Therefore, inspecting events
for debugging purposes will not be possible.</p>
<p>There are two ways to disable the payload compression:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Create an item named <code class="literal">_elastic_inspect_beacon_</code> using the sessionStorage browser API.
</li>
<li class="listitem">
Load the webpage with the query param <code class="literal">_elastic_inspect_beacon_</code> in the URL. For example, <code class="literal">https://elastic.co?_elastic_inspect_beacon_=true</code>
</li>
</ol>
</div>
<p>The effect of this will remain until the tab or browser is closed.</p>
<h3><a id="disable-agent"></a>Disable the Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h3>
<p>In the unlikely event the agent causes disruptions to a production application,
you can disable the agent while you troubleshoot.</p>
<p>To disable the agent, set <a class="xref" href="configuration.html#active" title="active"><code class="literal">active</code></a> to <code class="literal">false</code>.</p>
<h3><a id="get-in-touch"></a>Get in touch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/5.x/docs/troubleshooting.asciidoc">edit</a></h3>
<p>If you have any questions, please create a new topic in the <a href="https://discuss.elastic.co/c/apm" class="ulink" target="_top">Elastic APM discuss forum</a>.</p>
<p>For bug reports and feature requests, please <a href="https://github.com/elastic/apm-agent-rum-js/issues/new" class="ulink" target="_top">create an issue</a> on our <a href="https://github.com/elastic/apm-agent-rum-js" class="ulink" target="_top">github repo</a>
and include as much information as possible. See <a class="xref" href="troubleshooting.html#debugging" title="Debugging">Debugging</a> for how to gather debugging information.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="performance-tuning.html">« Performance Tuning</a>
</span>
<span class="next">
<a href="upgrading.html">Upgrading »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
