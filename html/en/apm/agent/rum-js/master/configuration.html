<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Configuration | APM Real User Monitoring JavaScript Agent Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="APM Real User Monitoring JavaScript Agent Reference [master]"/>
<link rel="up" href="index.html" title="APM Real User Monitoring JavaScript Agent Reference [master]"/>
<link rel="prev" href="supported-technologies.html" title="Supported Technologies"/>
<link rel="next" href="api.html" title="API Reference"/>
<meta name="DC.type" content="Learn/Docs/APM Real User Monitoring JavaScript Agent/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">APM Real User Monitoring JavaScript Agent Reference [master]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="supported-technologies.html">« Supported Technologies</a>
</span>
<span class="next">
<a href="api.html">API Reference »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="configuration"></a>Configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h1>
</div></div></div>
<p>While initializing the agent you can provide the following configuration options:</p>
<h3><a id="service-name"></a><code class="literal">serviceName</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
<li class="listitem">
<span class="strong strong"><strong>Required</strong></span>
</li>
</ul>
</div>
<p>The Elastic APM service name is used to differentiate data from each of your services.
Can only contain alphanumeric characters, spaces, underscores, and dashes (must match ^[a-zA-Z0-9 _-]+$).</p>
<h3><a id="server-url"></a><code class="literal">serverUrl</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">http://localhost:8200</code>
</li>
</ul>
</div>
<p>The URL used to make requests to the APM Server.</p>
<h3><a id="server-url-prefix"></a><code class="literal">serverUrlPrefix</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
<li class="listitem">
<span class="strong strong"><strong>Default</strong></span> <code class="literal">/intake/v${apiVersion}/rum/events</code>
</li>
</ul>
</div>
<p>The server prefix URL used to make requests to the APM Server. Some ad blockers block outgoing requests
from the browser if the default server prefix URL is being used. Using a custom server prefix URL can be used to
evade the ad blocker.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the default server prefix URL is overwritten, the reverse proxy that sits between the
APM Server and the rum agent must reroute traffic to <code class="literal">/intake/v${apiVersion}/rum/events</code>
so the APM Server knows what intake API to use.</p>
</div>
</div>
<h3><a id="service-version"></a><code class="literal">serviceVersion</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
</ul>
</div>
<p>The version of the app.
This could be the version from your <code class="literal">package.json</code> file,
a git commit reference,
or any other string that might help you reference a specific version.
This option is used on the APM Server to find the right sourcemap file to apply to the stack trace.</p>
<h3><a id="active"></a><code class="literal">active</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li>
</ul>
</div>
<p>A Boolean value that specifies if the agent should be active or not.
If active, the agent will send APM transactions and track errors.
This option can be used to deactivate the agent in your staging environment.
It can also be used to sample a number of clients. Below is an example to sample 10% of the page loads:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">var options = {
  active: Math.random() &lt; 0.1
}</pre>
</div>
<h3><a id="instrument"></a><code class="literal">instrument</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li>
</ul>
</div>
<p>A Boolean value that specifies if the agent should automatically instrument the application to collect
performance metrics for the application.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Both active and instrument needs to be true for instrumentation to be running.</p>
</div>
</div>
<h3><a id="disable-instrumentations"></a><code class="literal">disableInstrumentations</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Array
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">[]</code>
</li>
</ul>
</div>
<p>A list of instrumentations which can be disabled. When disabled, no transactions or spans will be created for that type.
The valid options are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">page-load</code>
</li>
<li class="listitem">
<code class="literal">history</code>
</li>
<li class="listitem">
<code class="literal">eventtarget</code>
</li>
<li class="listitem">
<code class="literal">click</code>
</li>
<li class="listitem">
<code class="literal">xmlhttprequest</code>
</li>
<li class="listitem">
<code class="literal">fetch</code>
</li>
<li class="listitem">
<code class="literal">error</code>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To disable all <code class="literal">http-request</code> transactions, add both <code class="literal">fetch</code> and <code class="literal">xmlhttprequest</code>.
to this config.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To disable <code class="literal">user-interaction</code> transactions,  add <code class="literal">eventtarget</code> or <code class="literal">click</code> to this config.
The option <code class="literal">eventtarget</code> is deprecated and will be removed in the future releases.</p>
</div>
</div>
<h3><a id="environment"></a><code class="literal">environment</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">''</code>
</li>
</ul>
</div>
<p>The environment where the service being monitored is deployed, e.g. "production", "development", "test", etc.</p>
<p>Environments allow you to easily filter data on a global level in the APM app.
It&#8217;s important to be consistent when naming environments across agents.
See <a href="/guide/en/kibana/8.3/filters.html#environment-selector" class="ulink" target="_top">environment selector</a> in the APM app for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is fully supported in the APM app in Kibana versions &gt;= 7.2.
You must use the query bar to filter for a specific environment in versions prior to 7.2.</p>
</div>
</div>
<h3><a id="log-level"></a><code class="literal">logLevel</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">'warn'</code>
</li>
</ul>
</div>
<p>Set the verbosity level for the agent.
This does not have any influence on the types of errors that are sent to the APM Server. This option is useful when you want to report an issue with the agent to us.</p>
<p>Possible levels are: <code class="literal">trace</code>, <code class="literal">debug</code>, <code class="literal">info</code>, <code class="literal">warn</code>, and <code class="literal">error</code>.</p>
<h3><a id="api-version"></a><code class="literal">apiVersion</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> number
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">2</code>
</li>
</ul>
</div>
<p>This denotes the version of APM Server&#8217;s intake API. Setting this value to any number
above <code class="literal">2</code> will compress the events (transactions and errors) payload sent to the server.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires APM Server &gt;= 7.8. Setting this flag to number &gt; 2 with older
APM server version would break the RUM payload from reaching the server.</p>
</div>
</div>
<h3><a id="breakdown-metrics"></a><code class="literal">breakdownMetrics</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code>
</li>
</ul>
</div>
<p>Enable or disable the tracking and collection of breakdown metrics for the transaction.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires APM Server and Kibana &gt;= 7.4. Setting this flag to <code class="literal">true</code> with older APM server version
would break the RUM payload from reaching the server.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Breakdown distribution for the transaction varies depending on the type of the transaction.
To understand the different types, see <a class="xref" href="breakdown-metrics-docs.html" title="Breakdown Metrics"><em>Breakdown Metrics</em></a></p>
</div>
</div>
<h3><a id="flush-interval"></a><code class="literal">flushInterval</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">500</code>
</li>
</ul>
</div>
<p>The agent maintains a single queue to record transaction and error events when they are added.
This option sets the flush interval in <span class="strong strong"><strong>milliseconds</strong></span> for the queue.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>After each flush of the queue, the next flush isn&#8217;t scheduled until an item is added to the queue.</p>
</div>
</div>
<h3><a id="page-load-trace-id"></a><code class="literal">pageLoadTraceId</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
</ul>
</div>
<p>This option overrides the page load transactions trace ID.</p>
<h3><a id="page-load-sampled"></a><code class="literal">pageLoadSampled</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
</ul>
</div>
<p>This option overrides the page load transactions sampled property.
It is only applicable to <code class="literal">page-load</code> transactions.</p>
<h3><a id="page-load-span-id"></a><code class="literal">pageLoadSpanId</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
</ul>
</div>
<p>This option overrides the ID of the span that is generated for receiving the initial document.</p>
<h3><a id="page-load-transaction-name"></a><code class="literal">pageLoadTransactionName</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> String
</li>
</ul>
</div>
<p>This option sets the name for the page load transaction. By default, transaction names for hard (page load) and soft (route change) navigations are
inferred by the agent based on the current URL. Check the <a class="xref" href="custom-transaction-name.html" title="Custom page load transaction names">custom initial page load transaction names</a>
documentation for more details.</p>
<h3><a id="distributed-tracing"></a><code class="literal">distributedTracing</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li>
</ul>
</div>
<p>Distributed tracing is enabled by default. Use this option to disable it.</p>
<h3><a id="distributed-tracing-origins"></a><code class="literal">distributedTracingOrigins</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Array
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">[]</code>
</li>
</ul>
</div>
<p>This option can be set to an array containing one or more Strings or RegExp objects and determines which origins should be monitored as part of distributed tracing.
This option is consulted when the agent is about to add the distributed tracing HTTP header (<code class="literal">traceparent</code>) to a request.
Please note that each item in the array should be a valid URL containing the origin (other parts of the url are ignored) or a RegExp object. If an item in the array is a string, an exact match will be performed. If it&#8217;s a RegExp object, its test function will be called with the request origin.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">var options = {
  distributedTracingOrigins: ['https://example.com', /https?:\/\/example\.com:\d{4}/]
}</pre>
</div>
<h3><a id="propagate-tracestate"></a><code class="literal">propagateTracestate</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code>
</li>
</ul>
</div>
<p>When distributed tracing is enabled, this option can be used to propagate the <a href="https://www.w3.org/TR/trace-context/#tracestate-header" class="ulink" target="_top">tracestate</a>
HTTP header to the configured origins. Before enabling this flag, make sure to change your <a class="xref" href="distributed-tracing-guide.html#server-configuration" title="Server configuration">server configuration</a> to avoid
Cross-Origin Resource Sharing errors.</p>
<h3><a id="event-throttling"></a>Event throttling<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h3>
<p>Throttle the number of events sent to APM Server.</p>
<h4><a id="events-limit"></a><code class="literal">eventsLimit</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h4>
<p>By default, the agent can only send up to <code class="literal">80</code> events every <code class="literal">60000</code> milliseconds (one minute).</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">80</code>
</li>
</ul>
</div>
<h4><a id="transaction-sample-rate"></a><code class="literal">transactionSampleRate</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Number
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">1.0</code>
</li>
</ul>
</div>
<p>A number between <code class="literal">0.0</code> and <code class="literal">1.0</code> that specifies the sample rate of transactions. By default, all transactions are sampled.</p>
<h4><a id="central-config"></a><code class="literal">centralConfig</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code>
</li>
</ul>
</div>
<p>This option activates APM Agent Configuration via Kibana.
When set to <code class="literal">true</code>, the agent starts fetching configurations via the APM Server during the initialization phase.
These central configurations are cached in <code class="literal">sessionStorage</code>, and will not be fetched again until
the session is closed and/or <code class="literal">sessionStorage</code> is cleared.
In most cases, this means when the tab/window of the page is closed.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Currently, only <a class="xref" href="configuration.html#transaction-sample-rate" title="transactionSampleRate">transaction sample rate</a> can be configured via Kibana.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires APM Server v7.5 or later and that the APM Server is configured with <code class="literal">kibana.enabled: true</code>.
More information is available in <a href="/guide/en/kibana/8.3/agent-configuration.html" class="ulink" target="_top">APM Agent configuration</a>.</p>
</div>
</div>
<h4><a id="ignore-transactions"></a><code class="literal">ignoreTransactions</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Array
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">[]</code>
</li>
</ul>
</div>
<p>An array containing a list of transaction names that should be ignored when sending the payload to the APM server.
It can be set to an array containing one or more Strings or RegExp objects. If an element in the array is a String, an exact match will be performed.
If an element in the array is a RegExp object, its test function will be called with the name of the transation.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const options = {
  ignoreTransactions: [/login*/, '/app']
}</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Spans that are captured as part of the ignored transactions would also be ignored.</p>
</div>
</div>
<h4><a id="monitor-longtasks"></a><code class="literal">monitorLongtasks</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code>
</li>
</ul>
</div>
<p>Instructs the agent to start monitoring for browser tasks that block the UI
thread and might delay other user inputs by affecting the overall page
responsiveness. Learn more about <a class="xref" href="longtasks.html" title="How to interpret long task spans in the UI">long task spans</a> and how to interpret them.</p>
<h4><a id="apm-request"></a><code class="literal">apmRequest</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Function
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">null</code>
</li>
</ul>
</div>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">apm.init({ apmRequest: (requestParams) =&gt; true})</pre>
</div>
<p>Arguments:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><code class="literal">requestParams</code> - This is an object that contains the APM HTTP request details:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">url</code> - The full url of the APM server
</li>
<li class="listitem">
<code class="literal">method</code> - Method of the HTTP request
</li>
<li class="listitem">
<code class="literal">headers</code> - Headers of the HTTP request
</li>
<li class="listitem">
<code class="literal">payload</code> - Body of the HTTP request
</li>
<li class="listitem">
<code class="literal">xhr</code> - The <code class="literal">XMLHttpRequest</code> instance used by the agent to send the request
</li>
</ul>
</div>
</li>
</ul>
</div>
<p><code class="literal">apmRequest</code> can be used to change or reject requests that are made to the
APM Server. This config can be set to a function, which is called whenever the agent
needs to make a request to the APM Server.</p>
<p>The callback function is called with a single argument and is expected to return
an output synchronously. If the return value is <code class="literal">true</code> then the agent continues
with making the (potentially modified) request to the APM Server.</p>
<p>If this function returns a falsy value the request is discarded with a warning in the console.</p>
<p>The following example adds a header to the HTTP request:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">apm.init({
  apmRequest({ xhr }) {
    xhr.setRequestHeader('custom', 'header')
    return true
  }
})</pre>
</div>
<p>This example instructs the agent to discard the request, since it&#8217;s handled by the user:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">apm.init({
  apmRequest({ url, method, headers, payload }) {
    // Handle the APM request here or at some later point.
    fetch(url, {
      method,
      headers,
      body: payload
    });
    return false
  }
})</pre>
</div>
<h4><a id="send-credentials"></a><code class="literal">sendCredentials</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-rum-js/edit/main/docs/configuration.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Type:</strong></span> Boolean
</li>
<li class="listitem">
<span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code>
</li>
</ul>
</div>
<p>This allows the agent to send cookies when making requests to the APM server.
This is useful on scenarios where the APM server is behind a reverse proxy that requires requests to be authenticated.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If APM Server is deployed in an origin different than the page’s origin, you will need to
<a class="xref" href="configuring-cors.html" title="Configure CORS">configure Cross-Origin Resource Sharing (CORS)</a>.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="supported-technologies.html">« Supported Technologies</a>
</span>
<span class="next">
<a href="api.html">API Reference »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
