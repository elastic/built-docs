<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>OpenTelemetry integration | APM Overview [master] | Elastic</title>
<link rel="home" href="index.html" title="APM Overview [master]"/>
<link rel="up" href="apm-features.html" title="Elastic APM features"/>
<link rel="prev" href="opentracing.html" title="OpenTracing bridge"/>
<link rel="next" href="observability-integrations.html" title="Observability integrations"/>
<meta name="DC.type" content="Learn/Docs/APM Server/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM Overview [master]</a></span>
»
<span class="breadcrumb-link"><a href="apm-features.html">Elastic APM features</a></span>
»
<span class="breadcrumb-node">OpenTelemetry integration</span>
</div>
<div class="navheader">
<span class="prev">
<a href="opentracing.html">« OpenTracing bridge</a>
</span>
<span class="next">
<a href="observability-integrations.html">Observability integrations »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="open-telemetry-elastic"></a>OpenTelemetry integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h2>
</div></div></div>
<style>
.tabs {
  width: 100%;
}
[role="tablist"] {
  margin: 0 0 -0.1em;
  overflow: visible;
}
[role="tab"] {
  position: relative;
  padding: 0.3em 0.5em 0.4em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0.2em 0.2em 0 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  background: hsl(220, 20%, 94%);
}
[role="tab"]:hover::before,
[role="tab"]:focus::before,
[role="tab"][aria-selected="true"]::before {
  position: absolute;
  bottom: 100%;
  right: -1px;
  left: -1px;
  border-radius: 0.2em 0.2em 0 0;
  border-top: 3px solid hsl(219, 1%, 72%);
  content: '';
}
[role="tab"][aria-selected="true"] {
  border-radius: 0;
  background: hsl(220, 43%, 99%);
  outline: 0;
}
[role="tab"][aria-selected="true"]:not(:focus):not(:hover)::before {
  border-top: 5px solid hsl(218, 96%, 48%);
}
[role="tab"][aria-selected="true"]::after {
  position: absolute;
  z-index: 3;
  bottom: -1px;
  right: 0;
  left: 0;
  height: 0.3em;
  background: hsl(220, 43%, 99%);
  box-shadow: none;
  content: '';
}
[role="tab"]:hover,
[role="tab"]:focus,
[role="tab"]:active {
  outline: 0;
  border-radius: 0;
  color: inherit;
}
[role="tab"]:hover::before,
[role="tab"]:focus::before {
  border-color: hsl(218, 96%, 48%);
}
[role="tabpanel"] {
  position: relative;
  z-index: 2;
  padding: 1em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0 0.2em 0.2em 0.2em;
  box-shadow: 0 0 0.2em hsl(219, 1%, 72%);
  background: hsl(220, 43%, 99%);
  margin-bottom: 1em;
}
[role="tabpanel"] p {
  margin: 0;
}
[role="tabpanel"] * + p {
  margin-top: 1em;
}
</style>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabList = document.querySelector('[role="tablist"]');
  // Add a click event handler to each tab
  tabs.forEach(tab => {
    tab.addEventListener("click", changeTabs);
  });
  // Enable arrow navigation between tabs in the tab list
  let tabFocus = 0;
  tabList.addEventListener("keydown", e => {
    // Move right
    if (e.keyCode === 39 || e.keyCode === 37) {
      tabs[tabFocus].setAttribute("tabindex", -1);
      if (e.keyCode === 39) {
        tabFocus++;
        // If we're at the end, go to the start
        if (tabFocus >= tabs.length) {
          tabFocus = 0;
        }
        // Move left
      } else if (e.keyCode === 37) {
        tabFocus--;
        // If we're at the start, move to the end
        if (tabFocus < 0) {
          tabFocus = tabs.length - 1;
        }
      }
      tabs[tabFocus].setAttribute("tabindex", 0);
      tabs[tabFocus].focus();
    }
  });
});

function setActiveTab(target) {
  const parent = target.parentNode;
  const grandparent = parent.parentNode;
  // console.log(grandparent);
  // Remove all current selected tabs
  parent
    .querySelectorAll('[aria-selected="true"]')
    .forEach(t => t.setAttribute("aria-selected", false));
  // Set this tab as selected
  target.setAttribute("aria-selected", true);
  // Hide all tab panels
  grandparent
    .querySelectorAll('[role="tabpanel"]')
    .forEach(p => p.setAttribute("hidden", true));
  // Show the selected panel
  grandparent.parentNode
    .querySelector(`#${target.getAttribute("aria-controls")}`)
    .removeAttribute("hidden");
}

function changeTabs(e) {
  // get the containing list of the tab that was just clicked
  const tabList = e.target.parentNode;

  // get all of the sibling tabs
  const buttons = Array.apply(null, tabList.querySelectorAll('button'));

  // loop over the siblings to discover which index thje clicked one was
  const { index } = buttons.reduce(({ found, index }, button) => {
    if (!found && buttons[index] === e.target) {
      return { found: true, index };
    } else if (!found) {
      return { found, index: index + 1 };
    } else {
      return { found, index };
    }
  }, { found: false, index: 0 });

  // get the tab container
  const container = tabList.parentNode;
  // read the data-tab-group value from the container, e.g. "os"
  const { tabGroup } = container.dataset;
  // get a list of all the tab groups that match this value on the page
  const groups = document.querySelectorAll('[data-tab-group=' + tabGroup + ']');

  // for each of the found tab groups, find the tab button at the previously discovered index and select it for each group
  groups.forEach((group) => {
    const target = group.querySelectorAll('button')[index];
    setActiveTab(target);
  });
}
</script>
<p>Elastic&#8217;s OpenTelemetry integration allows you to reuse your existing OpenTelemetry
instrumentation to quickly analyze distributed traces and metrics to help you monitor
business KPIs and technical components with the Elastic Stack.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="what-is-opentelemetry"></a>What is OpenTelemetry?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h3>
</div></div></div>
<p>OpenTelemetry is a set of APIs, SDKs, tooling, and integrations that enable the creation and
management of telemetry data. It formed through a merger of the OpenTracing and OpenCensus projects.</p>
<p>OpenTelemetry is an open-source project that provides the components necessary to observe your applications and services.
If you&#8217;re unfamiliar with the project, see the <a href="https://github.com/open-telemetry/opentelemetry-specification/blob/master/README.md" class="ulink" target="_top">spec</a> for more information.</p>
<h4><a id="open-telemetry-elastic-exporter"></a>Elastic exporter<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Elastic&#8217;s integration is designed to drop into your current OpenTelemetry setup.
We&#8217;ve done this by extending the "contrib" OpenTelemetry collector and adding an Elastic exporter.</p>
<p>Before sending the data to the Elastic Stack, the exporter translates the OpenTelemetry trace data collected from your services
and the metrics data collected from your applications and infrastructure to Elastic&#8217;s protocol.
By extending the OpenTelemetry collector, no changes are needed in your instrumented services to begin using the Elastic Stack.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To collect infrastructure metrics, we still recommend using
<a href="/guide/en/beats/metricbeat/master/metricbeat-overview.html" class="ulink" target="_top">Metricbeat</a> to get a mature collector with more integrations
and integrated visualizations.</p>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/open-telemetry-elastic-arch.png" alt="OpenTelemetry Elastic architecture diagram">
</div>
</div>
<h4><a id="open-telemetry-elastic-works"></a>How the OpenTelemetry Collector works<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>The OpenTelemetry collector uses the following three types of components to handle data:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">receivers</code>: Configure how data gets to the collector. At least one receiver must be configured.
</li>
<li class="listitem">
<code class="literal">processors</code>: Defines optional transformations that occur between receiving and exporting data.
</li>
<li class="listitem">
<code class="literal">exporters</code>: Configures how data is sent to its destination&#8212;&#8203;in this case, the Elastic Stack.
</li>
</ul>
</div>
<p>Once a <code class="literal">receiver</code>, <code class="literal">processor</code>, and <code class="literal">exporter</code> is defined, <code class="literal">pipelines</code> can be configured in the <code class="literal">services</code> section of your configuration.
The <code class="literal">traces</code> and <code class="literal">metrics</code> pipelines define the path of trace data and metrics through your collector and bring all three of these components together.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>More information is available in the <a href="https://opentelemetry.io/docs/collector/configuration/" class="ulink" target="_top">OpenTelemetry pipeline docs</a>.</p>
</div>
</div>
<p>A final note: <code class="literal">extensions</code> can also be enabled for tasks like monitoring the health of the collector.
See the <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/master/extension/README.md" class="ulink" target="_top">OpenTelemetry extension readme</a> for a list of supported extensions.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-telemetry-elastic-get-started"></a>Get started<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h3>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This guide assumes you&#8217;ve already instrumented your services with the OpenTelemetry API and/or SDK.
If you haven&#8217;t, see the Elastic APM <a class="xref" href="install-and-run.html" title="Quick start guide">install and run guide</a> to get started with Elastic APM Agents instead.</p>
</div>
</div>
<h4><a id="open-telemetry-elastic-deployment-planning"></a>Plan your deployment<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>OpenTelemetry Collectors can be run as an Agent, or as standalone collectors.
They can be deployed as often as necessary and scaled up or out.</p>
<p>Deployment planning resources are available in OpenTelemetry&#8217;s <a href="https://opentelemetry.io/docs/collector/getting-started/" class="ulink" target="_top">Getting Started</a>
documentation and <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/master/docs/performance.md" class="ulink" target="_top">Collector Performance</a> research.</p>
<h4><a id="open-telemetry-elastic-download"></a>Download the collector<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>The Elastic exporter lives in the <a href="https://github.com/open-telemetry/opentelemetry-collector" class="ulink" target="_top"><code class="literal">opentelemetry-collector-contrib repository</code></a>,
and the latest release can be downloaded from <a href="https://github.com/open-telemetry/opentelemetry-collector/releases" class="ulink" target="_top">GitHub releases page</a>.</p>
<p>Docker images are available on <a href="https://hub.docker.com/r/otel/opentelemetry-collector-contrib-dev" class="ulink" target="_top">dockerhub</a>:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">docker pull otel/opentelemetry-collector-contrib-dev</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-telemetry-elastic-traces-metrics"></a>Collect traces and metrics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h3>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This guide assumes your services and applications have already been instrumented with the OpenTelemetry API and/or SDK.
If you are new to APM, we recommend <a class="xref" href="install-and-run.html" title="Quick start guide">getting started with Elastic APM agents</a> instead.</p>
</div>
</div>
<p>To export traces and metrics to the OpenTelemetry Collector, ensure that you have instrumented your services and applications
with the OpenTelemetry API and/or SDK.</p>
<p>Here is an example of how to set up the OpenTelemetry Java agent.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">export OTEL_RESOURCE_ATTRIBUTES=service.name=frontend,service.version=1.0-SNAPSHOT,deployment.environment=staging
java -javaagent:/path/to/opentelemetry-javaagent-all-0.10.1.jar \
     -Dotel.otlp.endpoint=my-otel-collector.mycompany.com:55680 \
     -jar target/frontend-1.0-SNAPSHOT.jar</pre>
</div>
<p>Here is an example of how to capture business metrics from an application.</p>
<div class="pre_wrapper lang-java">
<pre class="programlisting prettyprint lang-java">// initialize metric
Meter meter = OpenTelemetry.getGlobalMeter("my-frontend");
DoubleCounter orderValueCounter = meter.doubleCounterBuilder("order_value").build();

public void createOrder(HttpServletRequest request) {

   // create order in the database
   ...
   // increment business metrics for monitoring
   orderValueCounter.add(orderPrice);
}</pre>
</div>
<p>For more information on setting up OpenTelemetry, see OpenTelemetry&#8217;s <a href="https://opentelemetry.io/docs/collector/getting-started/" class="ulink" target="_top">Getting Started</a>.</p>
<h4><a id="open-telemetry-elastic-configure"></a>Configure the collector<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Create a <code class="literal">yaml</code> configuration file.</p>
<p>This example configuration file accepts input from an OpenTelemetry Agent, processes the data, and sends it to an Elasticsearch Service instance.</p>
<div class="pre_wrapper lang-yml">
<pre class="programlisting prettyprint lang-yml">  receivers:
    otlp:
      protocols:
        grpc:
          endpoint: 'localhost:55680'
    hostmetrics: <a id="CO1-1"></a><i class="conum" data-value="1"></i>
      collection_interval: 1m
      scrapers:
        load:
        memory:

  processors:
    batch: null
    queued_retry: null

  exporters:
    elastic:
      apm_server_url: 'https://elasticapm.example.com' <a id="CO1-2"></a><i class="conum" data-value="2"></i>
      secret_token: 'APM_SERVER_SECRET_TOKEN'

  service:
    pipelines:
      metrics:
        receivers:
          - otlp
          - hostmetrics
        exporters:
          - elastic <a id="CO1-3"></a><i class="conum" data-value="3"></i>
      traces:
        receivers:
          - otlp
        processors:
          - batch
        exporters:
          - elastic <a id="CO1-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">hostmetrics</code> receiver must be defined to generate metrics about the host system scraped from various sources.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>At a minimum, you must define the URL of the APM Server instance you are sending data to. See the <a class="xref" href="open-telemetry-elastic.html#open-telemetry-elastic-config-ref" title="Elastic exporter configuration reference">configuration reference</a>
for additional configuration options, like specifying an API key, secret token, or TLS settings.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>To translate metrics, the Elastic exporter must be defined in <code class="literal">service.pipelines.metrics.exporters</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>To translate trace data, the Elastic exporter must be defined in <code class="literal">service.pipelines.traces.exporters</code>.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For more information about getting started with an OpenTelemetry Collector,
see the <a href="https://opentelemetry.io/docs/collector/getting-started/" class="ulink" target="_top">OpenTelemetry collector</a> docs.</p>
</div>
</div>
<h4><a id="open-telemetry-elastic-caveats"></a>Caveats<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>If collecting metrics, please note that the <a href="https://www.javadoc.io/doc/io.opentelemetry/opentelemetry-api/latest/io/opentelemetry/api/metrics/DoubleValueRecorder.html" class="ulink" target="_top"><code class="literal">DoubleValueRecorder</code></a>
and <a href="https://www.javadoc.io/doc/io.opentelemetry/opentelemetry-api/latest/io/opentelemetry/api/metrics/LongValueObserver.html" class="ulink" target="_top"><code class="literal">LongValueRecorder</code></a> metrics are not yet supported.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-telemetry-elastic-verify"></a>Verify OpenTelemetry metrics data<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h3>
</div></div></div>
<p>Use <span class="strong strong"><strong>Discover</strong></span> to validate that metrics are successfully being reported to Kibana.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Launch Kibana:</p>
<div class="tabs" data-tab-group="spin-up-stack">
  <div role="tablist" aria-label="Configure Server">
    <button role="tab"
            aria-selected="true"
            aria-controls="cloud-tab-open-kib"
            id="cloud-open-kib">
      Elasticsearch Service
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="self-managed-tab-open-kib"
            id="self-managed-open-kib"
            tabindex="-1">
      Self-managed
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="cloud-tab-open-kib"
       aria-labelledby="cloud-open-kib">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a href="https://cloud.elastic.co/" class="ulink" target="_top">Log in</a> to your Elastic Cloud account.
</li>
<li class="listitem">
Navigate to the Kibana endpoint in your deployment.
</li>
</ol>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="self-managed-tab-open-kib"
       aria-labelledby="self-managed-open-kib"
       hidden="">
<p>Point your browser to <a href="http://localhost:5601" class="ulink" target="_top">http://localhost:5601</a>, replacing
<code class="literal">localhost</code> with the name of the Kibana host.</p>
  </div>
</div>
</li>
<li class="listitem">
In the side navigation, under <span class="strong strong"><strong>Kibana</strong></span>, select <span class="strong strong"><strong>Discover</strong></span>.
</li>
<li class="listitem">
Select <code class="literal">apm-*</code> as your index pattern.
</li>
<li class="listitem">
Filter the data to only show documents with metrics: <code class="literal">processor.name :"metric"</code>
</li>
<li class="listitem">
Narrow your search with a known OpenTelemetry field. For example, if you have an <code class="literal">order_value</code> field, add <code class="literal">order_value: *</code> to your search to return
only OpenTelemetry metrics documents.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-telemetry-elastic-kibana"></a>Visualize in Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h3>
</div></div></div>
<p>TSVB within Kibana is the recommended visualization for OpenTelemetry metrics. TSVB is a time series data visualizer that allows you to use the full power of the
Elasticsearch aggregation framework. With TSVB, you can combine an infinite number of aggregations to display complex data.</p>
<p>In this example eCommerce OpenTelemetry dashboard, there are four visualizations; sales, order count, product cache, and system load. The dashboard provides us with business
KPI metrics, along with performance-related metrics.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/ecommerce-dashboard.png" alt="OpenTelemetry visualizations">
</div>
</div>
<p>Let&#8217;s have a look at how this dashboard was created, specifically the Sales USD and System load visualizations.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In the side navigation, under <span class="strong strong"><strong>Kibana</strong></span>, select <span class="strong strong"><strong>Dashboard</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Create dashboard</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save</strong></span>, enter the name of your dashboard, and then click <span class="strong strong"><strong>Save</strong></span> again.
</li>
<li class="listitem">
Let’s add a Sales USD visualization. Click <span class="strong strong"><strong>Edit</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Create new</strong></span> and then select <span class="strong strong"><strong>TSVB</strong></span>.
</li>
<li class="listitem">
<p>For the label name, enter Sales USD, and then select the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Aggregation: <code class="literal">Positive Rate</code>.
</li>
<li class="listitem">
Field: <code class="literal">order_sum</code>.
</li>
<li class="listitem">
Scale: <code class="literal">auto</code>.
</li>
<li class="listitem">
Group by: <code class="literal">Everything</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save</strong></span>, enter Sales USD as the visualization name, and then click <span class="strong strong"><strong>Save and return</strong></span>.
</li>
<li class="listitem">
Now let&#8217;s create a visualization of load averages on the system. Click <span class="strong strong"><strong>Create new</strong></span>.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>TSVB</strong></span>.
</li>
<li class="listitem">
<p>Select the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Aggregation: <code class="literal">Average</code>.
</li>
<li class="listitem">
Field: <code class="literal">system.cpu.load_average.1m</code>.
</li>
<li class="listitem">
Group by: <code class="literal">Terms</code>.
</li>
<li class="listitem">
By: <code class="literal">host.ip</code>.
</li>
<li class="listitem">
Top: <code class="literal">10</code>.
</li>
<li class="listitem">
Order by: <code class="literal">Doc Count (default)</code>.
</li>
<li class="listitem">
Direction: <code class="literal">Descending</code>.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Save</strong></span>, enter System load per host IP as the visualization name, and then click <span class="strong strong"><strong>Save and return</strong></span>.</p>
<p>Both visualizations are now displayed on your custom dashboard.</p>
</li>
</ol>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, Discover shows data for the last 15 minutes. If you have a time-based index,
and no data displays, you might need to increase the time range.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="open-telemetry-elastic-config-ref"></a>Elastic exporter configuration reference<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h3>
</div></div></div>
<h4><a id="open-telemetry-config-url"></a><code class="literal">apm_server_url</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Elastic APM Server URL. (required)</p>
<h4><a id="open-telemetry-config-api-key"></a><code class="literal">api_key</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Credential for <a href="/guide/en/apm/server/master/api-key.html" class="ulink" target="_top">API key authorization</a>.
Must also be enabled in Elastic APM Server. (optional)</p>
<h4><a id="open-telemetry-config-secret-token"></a><code class="literal">secret_token</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Credential for <a href="/guide/en/apm/server/master/secret-token.html" class="ulink" target="_top">secret token authorization</a>.
Must also be enabled in Elastic APM Server. (optional)</p>
<h4><a id="open-telemetry-config-ca-file"></a><code class="literal">ca_file</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Root Certificate Authority (CA) certificate, for verifying the server&#8217;s identity if TLS is enabled. (optional)</p>
<h4><a id="open-telemetry-config-cert-file"></a><code class="literal">cert_file</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Client TLS certificate. (optional)</p>
<h4><a id="open-telemetry-config-key-file"></a><code class="literal">key_file</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Client TLS key. (optional)</p>
<h4><a id="open-telemetry-config-insecure"></a><code class="literal">insecure</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/guide/opentelemetry-elastic.asciidoc">edit</a></h4>
<p>Disable verification of the server&#8217;s identity if TLS is enabled. (optional)</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="opentracing.html">« OpenTracing bridge</a>
</span>
<span class="next">
<a href="observability-integrations.html">Observability integrations »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
