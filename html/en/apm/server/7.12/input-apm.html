<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>APM input settings | APM Server Reference [7.12] | Elastic</title>
<meta class="elastic" name="content" content="APM input settings | APM Server Reference [7.12]">

<link rel="home" href="index.html" title="APM Server Reference [7.12]"/>
<link rel="up" href="apm-integration.html" title="APM integration for Elastic Agent"/>
<link rel="prev" href="apm-integration-data-streams.html" title="Data streams"/>
<link rel="next" href="apm-integration-configure.html" title="Configure APM integration"/>
<meta class="elastic" name="product_version" content="7.12"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Server/Reference/7.12"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="7.12"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Server Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/apm/guide/current/apm-overview.html">User Guide</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">Monitoring AWS Lambda Functions</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-integration.html">APM integration for Elastic Agent</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="apm-integration-data-streams.html">« Data streams</a>
</span>
<span class="next">
<a href="apm-integration-configure.html">Configure APM integration »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="input-apm"></a>APM input settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-server/edit/7.12/docs/apm-package/input-apm.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>To edit the APM integration input settings, open Kibana and select:
<span class="strong strong"><strong>Fleet</strong></span> / <span class="strong strong"><strong>Integrations</strong></span> / <span class="strong strong"><strong>Elastic APM</strong></span> / <span class="strong strong"><strong>Add Elastic APM</strong></span>.
Expand the carrot to view all settings.</p>
<p>A limited number of settings are currently supported.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Templates, pipelines, index lifecycle management, etc., cannot be configured
with APM Server or Fleet, and must instead be configured with Kibana or Elasticsearch.
<a class="xref" href="apm-integration-configure.html" title="Configure APM integration">Learn more</a>.</p>
</div>
</div>
<h3><a id="apm-input-general-settings"></a>General settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-server/edit/7.12/docs/apm-package/input-apm.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-host-setting"></a><code class="literal">host</code></p>
</td>
<td align="left" valign="top">
<p>(string) Defines the host and port the server is listening on.
Use <code class="literal">unix:/path/to.sock</code> to listen on a unix domain socket.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">localhost:8200</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-secret_token-setting"></a><code class="literal">secret_token</code></p>
</td>
<td align="left" valign="top">
<p>(string) Authorization token for sending APM data.
The same token must also be set in each APM agent.
This token is not used for RUM endpoints.
By default, no authorization token is set.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-max_event_bytes-setting"></a><code class="literal">max_event_bytes</code></p>
</td>
<td align="left" valign="top">
<p>(int) Maximum permitted size of an event accepted by the server to be processed (in Bytes).</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">307200</code> Bytes</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-default_service_environment-setting"></a><code class="literal">default_service_environment</code></p>
</td>
<td align="left" valign="top">
<p>(string) The default service environment for events without a defined service environment.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-capture_personal_data-setting"></a><code class="literal">capture_personal_data</code></p>
</td>
<td align="left" valign="top">
<p>(bool) Capture personal data such as IP or User Agent.
If true, APM Server captures the IP of the instrumented service and its User Agent if any.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<h3><a id="apm-input-rum-settings"></a>Real User Monitoring (RUM) settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-server/edit/7.12/docs/apm-package/input-apm.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-enable_rum-setting"></a><code class="literal">enable_rum</code></p>
</td>
<td align="left" valign="top">
<p>(bool) Enables and disables Real User Monitoring (RUM).</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code> (disabled)</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_allow_origins-setting"></a><code class="literal">rum_allow_origins</code></p>
</td>
<td align="left" valign="top">
<p>(string) A list of permitted origins for RUM support.
User-agents send an Origin header that will be validated against this list.
This is done automatically by modern browsers as part of the <a href="https://www.w3.org/TR/cors/" class="ulink" target="_top">CORS specification</a>.
An origin is made of a protocol scheme, host and port, without the URL path.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">["*"]</code> (allows everything)</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_allow_headers-setting"></a><code class="literal">rum_allow_headers</code></p>
</td>
<td align="left" valign="top">
<p>(string) By default, HTTP requests made from the RUM agent to the APM integration are limited in the HTTP headers they are allowed to have.
If any other headers are added, the request will be rejected by the browser due to Cross-Origin Resource Sharing (CORS) restrictions.
If you need to add extra headers to these requests, use this configuration to allow additional headers.</p>
<p>The default list of values includes <code class="literal">"Content-Type"</code>, <code class="literal">"Content-Encoding"</code>, and <code class="literal">"Accept"</code>.
Configured values are appended to the default list and used as the value for the
<code class="literal">Access-Control-Allow-Headers</code> header.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_response_headers-setting"></a><code class="literal">rum_response_headers</code></p>
</td>
<td align="left" valign="top">
<p>(yaml) Custom HTTP headers to add to RUM responses. For example, for security policy compliance.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_event_rate_limit-setting"></a><code class="literal">rum_event_rate_limit</code></p>
</td>
<td align="left" valign="top">
<p>(int) Defines the maximum amount of events allowed to be sent to the APM Server RUM endpoint per ip per second.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">300</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_event_rate_lru_size-setting"></a><code class="literal">rum_event_rate_lru_size</code></p>
</td>
<td align="left" valign="top">
<p>(int) An LRU cache is used to keep a rate limit per IP for the most recently seen IPs.
This setting defines the number of unique IPs that can be tracked in the cache.
Sites with many concurrent clients should consider increasing this limit.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1000</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<h3><a id="_api_key_settings"></a>API key settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-server/edit/7.12/docs/apm-package/input-apm.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-api_key_enabled-setting"></a><code class="literal">api_key_enabled</code></p>
</td>
<td align="left" valign="top">
<p>(bool) Enable or disable API key authorization between APM Server and APM agents.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code> (disabled)</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-api_key_limit-setting"></a><code class="literal">api_key_limit</code></p>
</td>
<td align="left" valign="top">
<p>(int) Each unique API key triggers one request to Elasticsearch.
This setting restricts the number of unique API keys are allowed per minute.
The minimum value for this setting should be the number of API keys configured in your monitored services.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">100</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-sourcemap_api_key-setting"></a><code class="literal">sourcemap_api_key</code></p>
</td>
<td align="left" valign="top">
<p>(string) RUM API key for sourcemaps. Formatted as <code class="literal">&lt;Id&gt;:&lt;API Key&gt;</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-kibana_api_key-setting"></a><code class="literal">kibana_api_key</code></p>
</td>
<td align="left" valign="top">
<p>(string) API Key for APM central configuration feature. Formatted as <code class="literal">&lt;Id&gt;:&lt;API Key&gt;</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="apm-integration-data-streams.html">« Data streams</a>
</span>
<span class="next">
<a href="apm-integration-configure.html">Configure APM integration »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
