<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>APM integration for Elastic Agent | APM Server Reference [7.14] | Elastic</title>
<meta class="elastic" name="content" content="APM integration for Elastic Agent | APM Server Reference [7.14]">

<link rel="home" href="index.html" title="APM Server Reference [7.14]"/>
<link rel="up" href="index.html" title="APM Server Reference [7.14]"/>
<link rel="prev" href="release-notes-6.1.html" title="APM Server version 6.1"/>
<link rel="next" href="apm-integration-data-streams.html" title="Data streams"/>
<meta class="elastic" name="product_version" content="7.14"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Server/Reference/7.14"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="7.14"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Server Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/apm/guide/current/apm-overview.html">User Guide</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">Monitoring AWS Lambda Functions</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-6.1.html">« APM Server version 6.1</a>
</span>
<span class="next">
<a href="apm-integration-data-streams.html">Data streams »</a>
</span>
</div>
<div class="part">
<div class="titlepage"><div><div>
<h1 class="title"><a id="apm-integration"></a>APM integration for Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/7.14/docs/apm-package/apm-integration.asciidoc">edit</a></h1>
</div></div></div>
<div class="openblock partintro">
<div class="content">

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Elastic Agent is a single, unified way to add monitoring for logs, metrics, and other types of data to each host.
The APM integration for Elastic Agent assigns the APM input to a specified policy,
and installs Elasticsearch templates and ingest node pipelines for APM data.
When Elastic Agent is assigned a policy with an APM input,
Elastic Agent will run the APM Server binary locally and listen for APM data.</p>
<h3><a id="apm-integration-get-started"></a>Get started<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/7.14/docs/apm-package/apm-integration.asciidoc">edit</a></h3>
<p>Ready to jump in?
Read through the <a class="xref" href="apm-integration.html#apm-integration-limitations" title="Limitations">APM integration limitations</a>, then head over to the
quick start guide: <a href="/guide/en/fleet/7.14/fleet-quick-start-traces.html" class="ulink" target="_top">Get application traces into the Elastic Stack</a>.</p>
<h3><a id="apm-integration-architecture"></a>Architecture<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/7.14/docs/apm-package/apm-integration.asciidoc">edit</a></h3>
<p>If RUM is enabled, you must run Elastic Agent centrally.
If RUM is disabled, Elastic Agent can be run on edge machines. To do this,
download and enroll an Elastic Agent on the same machines that your instrumented services run on.</p>
<h3><a id="apm-integration-limitations"></a>Limitations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/7.14/docs/apm-package/apm-integration.asciidoc">edit</a></h3>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This integration is still in beta and does not have feature parity with standalone APM.
Do not migrate production deployments.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Data steams migration
</span>
</dt>
<dd>
Existing APM users will need to migrate to data streams to use the APM integration.
This change cannot be reverted, and impacts how APM Server and its indices are configured&#8201;&#8212;&#8201;see <a class="xref" href="apm-integration-data-streams.html#apm-integration-naming-scheme" title="Data stream naming scheme">Data stream naming scheme</a> and <a class="xref" href="apm-integration-configure.html" title="Configure APM integration"><em>Configure</em></a>.
Additionally, users on Elastic Cloud Enterprise require additional steps prior to migrating, like configuring TLS certificates for the connection between APM Server and Elasticsearch.
</dd>
<dt>
<span class="term">
Stack monitoring
</span>
</dt>
<dd>
<a class="xref" href="monitoring.html" title="Monitor APM Server">Stack monitoring</a> is not yet available.
</dd>
<dt>
<span class="term">
Index lifecycle management (ILM)
</span>
</dt>
<dd>
A default ILM policy, named <code class="literal">traces-apm.traces-default_policy</code> is created for all event types.
This policy moves indices to a warm data tier after 30 days.
No default cold or delete data tier is defined.
It is not possible to configure this policy in APM Server or Elastic Agent–
it must be configured with Elasticsearch or Kibana.
See <a href="/guide/en/elasticsearch/reference/7.14/example-using-index-lifecycle-policy.html" class="ulink" target="_top">Customize built-in ILM policies</a> for more information.
</dd>
<dt>
<span class="term">
Onboarding
</span>
</dt>
<dd>
APM Server no longer writes an onboarding document when setting up.
</dd>
<dt>
<span class="term">
Standalone mode
</span>
</dt>
<dd>
<a href="/guide/en/fleet/7.14/run-elastic-agent-standalone.html" class="ulink" target="_top">Standalone mode</a> is not currently supported.
An Elastic Agent with the APM integration enabled must be managed by fleet.
</dd>
<dt>
<span class="term">
Service names
</span>
</dt>
<dd>
Service names are case-insensitive and must be unique.
See <a class="xref" href="apm-integration-data-streams.html#apm-integration-service-name" title="Service names">Service names</a> for more information.
</dd>
<dt>
<span class="term">
Upgrading from prior Elastic Agent versions
</span>
</dt>
<dd>
Due to changing API key permissions, an Elastic Agent enrolled before version 7.12 is not compatible with the APM integration.
You must enroll a new Elastic Agent to use the integration.
</dd>
</dl>
</div>
<h3><a id="apm-integration-terminology"></a>Terminology<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/7.14/docs/apm-package/apm-integration.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Agents
</span>
</dt>
<dd>
<p>
Elastic Agent and APM agents are different components:
</p>
<p><a href="/guide/en/fleet/7.14/fleet-overview.html" class="ulink" target="_top"><span class="strong strong"><strong>Elastic Agent</strong></span></a> is a single,
unified agent that you can deploy to hosts or containers to collect data and send it to the Elastic Stack.
Behind the scenes, Elastic Agent runs APM Server to listen for <code class="literal">apm</code> data.</p>
<p><a href="/guide/en/apm/get-started/7.14/components.html" class="ulink" target="_top"><span class="strong strong"><strong>APM agents</strong></span></a> are open source libraries written in the same language as your service.
You may only need one, or you might use all of them.
You install them into your service as you would install any other library.
They instrument your code and collect performance data and errors at runtime.
This data is sent to APM Server.</p>
</dd>
<dt>
<span class="term">
Central management/configuration
</span>
</dt>
<dd>
<p>
Fleet central management and APM agent central configuration are two different features
that can be accessed in Kibana:
</p>
<p><span class="strong strong"><strong>Fleet central management</strong></span> serves as the communication channel with your Elastic Agents;
agents check in for the latest updates on a regular basis.</p>
<p><span class="strong strong"><strong>APM agent central configuration</strong></span> allows you to fine-tune your agent configuration from within the APM app.
Changes are automatically propagated to your APM agents, so there’s no need to redeploy your services.</p>
</dd>
</dl>
</div>
<h3><a id="apm-integration-versioning"></a>Package versioning<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/7.14/docs/apm-package/apm-integration.asciidoc">edit</a></h3>
<p>The APM package is versioned separately from the Elastic Stack.
In the future, we may align with Elastic Stack versioning.</p>
<h3><a id="apm-integration-learn-more"></a>Learn more<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/7.14/docs/apm-package/apm-integration.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="input-apm.html" title="APM input settings"><em>Input settings</em></a>
</li>
<li class="listitem">
<a class="xref" href="apm-integration-data-streams.html" title="Data streams"><em>Data streams</em></a>
</li>
<li class="listitem">
<a href="/guide/en/fleet/7.14/fleet-overview.html" class="ulink" target="_top">Fleet overview</a>
</li>
</ul>
</div>
</div>
</div>



</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes-6.1.html">« APM Server version 6.1</a>
</span>
<span class="next">
<a href="apm-integration-data-streams.html">Data streams »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
