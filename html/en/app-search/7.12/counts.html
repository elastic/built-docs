<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Analytics counts API | Elastic App Search Documentation [7.12] | Elastic</title>
<link rel="home" href="index.html" title="Elastic App Search Documentation [7.12]"/>
<link rel="up" href="api-reference.html" title="API Reference"/>
<link rel="prev" href="clicks.html" title="Analytics clicks API"/>
<link rel="next" href="queries.html" title="Analytics queries API"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/7.12"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="7.12"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic App Search Documentation [7.12]</a></span>
»
<span class="breadcrumb-link"><a href="api-reference.html">API Reference</a></span>
»
<span class="breadcrumb-node">Analytics counts API</span>
</div>
<div class="navheader">
<span class="prev">
<a href="clicks.html">« Analytics clicks API</a>
</span>
<span class="next">
<a href="queries.html">Analytics queries API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="counts"></a>Analytics counts API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h2>
</div></div></div>
<p>Returns the number of <code class="literal">clicks</code> and total number of <code class="literal">queries</code> in ascending order.</p>
<p>One day is the default block of time and the default time/date format is <a href="https://www.ietf.org/rfc/rfc3339.txt" class="ulink" target="_top">RFC3339</a>.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="counts.html#counts-week-counts" title="Weekly Counts">Weekly Counts</a></strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="counts.html#counts-counts-filters" title="Counts Filtering">Counts Filtering</a></strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="counts.html#counts-counts-full" title="Full Example">Full example</a></strong></span>
</li>
</ul>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">GET /api/as/v1/engines/{ENGINE_NAME}/analytics/counts</pre>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">POST /api/as/v1/engines/{ENGINE_NAME}/analytics/counts</pre>
</div>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">// An example JSON payload from the analytics/counts endpoint.
{
  "results": [
    {
      "clicks": number,
      "queries": number,
      "from": date,
      "to": date
    }
  ]
}</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="counts-week-counts"></a>Weekly Counts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h3>
</div></div></div>
<p>Return <code class="literal">7</code> days worth of results by default.</p>
<p>Each object represents a single day.</p>
<p><em>Example</em> - A <code class="literal">GET</code> request with no addition parameters.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 123,
      "queries": 2322,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 214,
      "queries": 5122,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 321,
      "queries": 4544,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 10,
      "queries": 500,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 434,
      "queries": 1100,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 312,
      "queries": 4343,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 87,
      "queries": 434,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 23,
      "queries": 439,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="counts-counts-filters"></a>Counts Filtering<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filters</code> (optional)
</span>
</dt>
<dd>
The filters key is the parent key. If no options are provided underneath it, the last 7 days are returned.
</dd>
<dt>
<span class="term">
<code class="literal">query</code> (optional)
</span>
</dt>
<dd>
You can supply a particular query to see the relevant documents that have received clicks and/or queries within a time frame. You may only include one query parameter. View example.
</dd>
<dt>
<span class="term">
<code class="literal">tag</code> (optional)
</span>
</dt>
<dd>
The Search endpoint can be used to attach tags to your documents. One or more tags can be applied to filter results via the API or within your analytics dashboard. View example.
</dd>
<dt>
<span class="term">
<code class="literal">document_id</code> (optional)
</span>
</dt>
<dd>
Providing a document_id will narrow results down to that specific document. You may only provide one document_id at a time. View example.
</dd>
<dt>
<span class="term">
<code class="literal">date</code> (optional)
</span>
</dt>
<dd>
Specify a range of time. The from and to fields are optional and the expected format is RFC3339. You may omit the time: YYYY-MM-DD. View example.
</dd>
<dt>
<span class="term">
<code class="literal">interval</code> (optional)
</span>
</dt>
<dd>
You can define an interval along with your date range. Can be either hour or day, with day as the default. You are limited to a maximum of 100 results within your interval. Therefore, when expecting hours, a date range can not exceed 100 hours or 4 days.
</dd>
<dt>
<span class="term">
<code class="literal">all</code> (optional)
</span>
</dt>
<dd>
Nest multiple filters under the all option. View example.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-queries"></a>Query<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">query</code> filter option. We want to see how many <code class="literal">clicks</code> and <code class="literal">queries</code> the <code class="literal">everglade</code> query received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "query": "everglade" }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 23,
      "queries": 322,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 14,
      "queries": 122,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 21,
      "queries": 544,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 50,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 34,
      "queries": 100,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 12,
      "queries": 343,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 7,
      "queries": 34,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 39,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-tags"></a>Tag(s)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We have a <a class="xref" href="analytics-tags-guide.html" title="Analytics Tags Guide">Tags Guide</a>, too.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="counts-single-tags"></a>Single Tag<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h5>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">tag</code> filter option. We want to see how many clicks and queries that documents with the <code class="literal">web</code> tag received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "tag": "web" }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 1,
      "queries": 12,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 44,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 133,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 5,
      "queries": 234,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 4,
      "queries": 211,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 146,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 245,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 210,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="counts-multiple-tags"></a>Multiple Tags<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h5>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">tag</code> filter option containing multiple tags. We want to see how many clicks and queries that documents with the <code class="literal">web</code> and <code class="literal">mobile</code> tags received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "tag": ["web", "mobile"] }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 2,
      "queries": 22,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 4,
      "queries": 34,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 233,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 450,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 11,
      "queries": 1403,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 5,
      "queries": 546,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 375,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 240,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-document"></a>Document ID<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">document_id</code> filter option. We want to see how many clicks and queries that the document with id <code class="literal">321</code> received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "document_id": 321 }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 4,
      "queries": 239,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 131,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 356,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 150,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 6,
      "queries": 190,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 411,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 34,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 6,
      "queries": 339,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-dates"></a>Date<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">POST</code> request with the <code class="literal">date</code> filters option. We want a shorter time frame than the default <code class="literal">7</code> days. We only want <code class="literal">4</code> days. Expects results <em>from</em> the earlier date, <em>to</em> the later date.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2018-06-15T00:00:00+00:00",
      "to": "2018-06-19T00:00:00+00:00"
    }
  }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 1,
      "queries": 139,
      "from": "2018-06-15T00:00:00+00:00",
      "to": "2018-07-16T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 349,
      "from": "2018-07-16T00:00:00+00:00",
      "to": "2018-07-17T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 297,
      "from": "2018-07-17T00:00:00+00:00",
      "to": "2018-07-18T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 111,
      "from": "2018-07-18T00:00:00+00:00",
      "to": "2018-07-19T00:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-interval"></a>Interval<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only <code class="literal">100</code> results may be returned at one time. Changing the <code class="literal">interval</code> will require a <code class="literal">date</code> range set to no greater than <code class="literal">100</code> hours or <code class="literal">4</code> days.</p>
</div>
</div>
<p><em>Example</em> - A <code class="literal">POST</code> request with the <code class="literal">date</code> filters option. We are asking for a <code class="literal">6</code> hour window. Interval is set to <code class="literal">hour</code>.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2018-06-18T18:00:00+00:00",
      "to": "2018-06-19T00:00:00+00:00"
    }
  },
  "interval": "hour"
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 0,
      "queries": 31,
      "from": "2018-06-18T18:00:00+00:00",
      "to": "2018-06-18T19:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 58,
      "from": "2018-06-18T19:00:00+00:00",
      "to": "2018-06-18T20:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 24,
      "from": "2018-06-18T20:00:00+00:00",
      "to": "2018-06-18T21:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 34,
      "from": "2018-06-18T21:00:00+00:00",
      "to": "2018-06-18T22:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 15,
      "from": "2018-06-18T22:00:00+00:00",
      "to": "2018-06-18T23:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 9,
      "from": "2018-06-18T23:00:00+00:00",
      "to": "2018-06-19T00:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-all"></a>Multiple Filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">date</code> and <code class="literal">tag</code> filter options. We want to see how many <code class="literal">clicks</code> and <code class="literal">queries</code> documents with the <code class="literal">web</code> and <code class="literal">mobile</code> tag received within a <code class="literal">2</code> day window.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "all": [
      {
        "date": {
          "from": "2018-06-17T00:00:00+00:00",
          "to": "2018-06-19T00:00:00+00:00"
        }
      }, {
        "tag": ["web", "mobile"]
      }
    ]
  }'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 4,
      "queries": 639,
      "from": "2018-06-15T00:00:00+00:00",
      "to": "2018-07-16T00:00:00+00:00"
    },
    {
      "clicks": 13,
      "queries": 949,
      "from": "2018-07-16T00:00:00+00:00",
      "to": "2018-07-17T00:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-full"></a>Full Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p>You can combine all of the different parameters for granular responses.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Including both <code class="literal">tags</code> and <code class="literal">document_id</code> is strange, but it helps to see everything within one example.</p>
</div>
</div>
<p><em>Example</em> - A <code class="literal">GET</code> request that includes the <code class="literal">interval</code> and <code class="literal">filters</code> arguments. All <code class="literal">filters</code> options are included. The <code class="literal">interval</code> is set to <code class="literal">hour</code>, with the <code class="literal">date</code> range set to <code class="literal">2</code> hours.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://[instance id].ent-search.[region].[provider].cloud.es.io/api/as/v1/engines/national-parks-demo/analytics/clicks' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "all": [
      {
        "tag": ["mobile", "web"]
      },{
        "query": "rails"
      }, {
        "document_id": "163"
      }, {
        "date": {
          "from": "2018-07-05T12:00:00+00:00",
          "to": "2018-07-05T14:00:00+00:00"
        }
      }
    ]
  },
  "interval": "hour"
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 1,
      "queries": 139,
      "from": "2018-07-05T12:00:00+00:00",
      "to": "2018-07-05T13:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 59,
      "from": "2018-07-05T13:00:00+00:00",
      "to": "2018-07-05T14:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="clicks.html">« Analytics clicks API</a>
</span>
<span class="next">
<a href="queries.html">Analytics queries API »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
