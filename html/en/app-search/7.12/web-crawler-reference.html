<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Web crawler (beta) reference | Elastic App Search Documentation [7.12] | Elastic</title>
<meta class="elastic" name="content" content="Web crawler (beta) reference | Elastic App Search Documentation [7.12]">

<link rel="home" href="index.html" title="Elastic App Search Documentation [7.12]"/>
<link rel="up" href="guides.html" title="Guides"/>
<link rel="prev" href="web-crawler-faq.html" title="Web crawler (beta) FAQ"/>
<link rel="next" href="web-crawler-events-logs-reference.html" title="Web crawler (beta) events logs reference"/>
<meta class="elastic" name="product_version" content="7.12"/>
<meta class="elastic" name="product_name" content="App Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/7.12"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="7.12"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Elastic App Search Documentation<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="guides.html">Guides</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="web-crawler-faq.html">« Web crawler (beta) FAQ</a>
</span>
<span class="next">
<a href="web-crawler-events-logs-reference.html">Web crawler (beta) events logs reference »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="web-crawler-reference"></a>Web crawler (beta) reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h2>
</div></div></div>
<div class="caution admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Elastic Enterprise Search web crawler is a <span class="strong strong"><strong>beta</strong></span> feature.
Beta features are subject to change and are not covered by the support SLA of general release (GA) features.
Elastic plans to promote this feature to GA in a future release.</p>
</div>
</div>
<p>See <a class="xref" href="web-crawler.html" title="Web crawler (beta)">Web crawler (beta)</a> for a guided introduction to the Elastic Enterprise Search web crawler.</p>
<p>Refer to the following sections for terms, definitions, tables, and other detailed information.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl" title="Crawl">Crawl</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-discovery" title="Content discovery">Content discovery</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-extraction-and-indexing" title="Content extraction and indexing">Content extraction and indexing</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-deletion" title="Content deletion">Content deletion</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">Domain</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-entry-point" title="Entry point">Entry point</a>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap" title="Sitemap">Sitemap</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap-discovery-management" title="Sitemap discovery and management">Sitemap discovery and management</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap-format" title="Sitemap format and technical specification">Sitemap format and technical specification</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">Crawl rule</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule-rules" title="Crawl rule logic (rules)">Crawl rule logic (rules)</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule-matching" title="Crawl rule matching">Crawl rule matching</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule-order" title="Crawl rule order">Crawl rule order</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule-restricting-paths" title="Restricting paths using crawl rules">Restricting paths using crawl rules</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">Robots.txt file</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file-discovery-management" title="Robots.txt file discovery and management">Robots.txt file discovery and management</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file-format" title="Robots.txt file format and technical specification">Robots.txt file format and technical specification</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-canonical-url-link-tag" title="Canonical URL link tag">Canonical URL link tag</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-meta-tags" title="Robots meta tags">Robots meta tags</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-nofollow-link" title="Nofollow link">Nofollow link</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-status" title="Crawl status">Crawl status</a>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-response-status-codes" title="HTTP response status codes handling">HTTP response status codes handling</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-response-status-codes-html" title="HTML response code handling">HTML response code handling</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-response-status-codes-robots-txt" title="Robots.txt file response code handling">Robots.txt file response code handling</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-web-crawler-schema" title="Web crawler schema">Web crawler schema</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-web-crawler-events-logs" title="Web crawler events logs">Web crawler events logs</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-reference.html#web-crawler-reference-web-crawler-configuration-settings" title="Web crawler configuration settings">Web crawler configuration settings</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-crawl"></a>Crawl<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>A <em>crawl</em> is a process, associated with an engine, by which the web crawler <a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-discovery" title="Content discovery">discovers web content</a>, and <a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-extraction-and-indexing" title="Content extraction and indexing">extracts and indexes that content</a> into the engine as search documents.</p>
<p>During a crawl, the web crawler stays within user-defined <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">domains</a>, starting from specific <a class="xref" href="web-crawler-reference.html#web-crawler-reference-entry-point" title="Entry point">entry points</a>, and it discovers additional content according to <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a>.
Operators and administrators <a class="xref" href="crawl-web-content.html#crawl-web-content-manage-crawl" title="Manage crawl">manage crawls</a> through the App Search dashboard.</p>
<p>Each crawl also respects instructions within <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt files</a> and <a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap" title="Sitemap">sitemaps</a>, and instructions embedded within HTML files using <a class="xref" href="web-crawler-reference.html#web-crawler-reference-canonical-url-link-tag" title="Canonical URL link tag">canonical link tags</a>, <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-meta-tags" title="Robots meta tags">robots meta tags</a>, and <a class="xref" href="web-crawler-reference.html#web-crawler-reference-nofollow-link" title="Nofollow link">nofollow links</a>.</p>
<p>Operators can <a class="xref" href="crawl-web-content.html#crawl-web-content-monitor-crawl" title="Monitor crawl">monitor crawls</a> using the ID and status of each crawl, and using the web crawler events logs.</p>
<p>Each engine may run one active crawl at a time, but multiple engines can run crawls concurrently.</p>
<p>Each crawl is stateless.
Crawl state is not persisted, and crawls cannot be resumed.</p>
<p>Each re-crawl is a full crawl.
Partial crawls are not supported at this time.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-content-discovery"></a>Content discovery<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>To begin each crawl, the web crawler populates a <em>crawl queue</em> with the <a class="xref" href="web-crawler-reference.html#web-crawler-reference-entry-point" title="Entry point">entry points</a> for the crawl and the URLs provided by any <a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap" title="Sitemap">sitemaps</a>.
It then begins fetching and parsing each page in the queue.
The crawler handles each page according to its <a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-response-status-codes" title="HTTP response status codes handling">HTTP response status code</a>.</p>
<p>As the web crawler discovers additional URLs, it uses the <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a> from the crawl configuration, the directives from any <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt files</a>, and instructions embedded within the content to determine which of those URLs it is allowed to crawl.
The crawler adds the allowed URLs to the crawl queue.</p>
<p>If a page is not linked from other pages, the web crawler will not discover it.
Refer to the web of pages in the following image.
The crawler will not discover the page outlined in red, unless an admin adds its URL as an entry point for the domain or includes the URL in a sitemap:</p>
<div class="imageblock">
<div class="content">
<img src="images/app-search/web-of-content.png" alt="web of content">
</div>
</div>
<p>The web crawler continues fetching and adding to the crawl queue until the queue is empty, the crawler hits a resource limit, or the crawl fails unexpectedly.</p>
<p>The crawler logs detailed events while it crawls, which allow monitoring and auditing of the content discovery process.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-content-extraction-and-indexing"></a>Content extraction and indexing<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p><em>Content extraction</em> is the process where the web crawler transforms an HTML document into a search document.
And <em>indexing</em> is the process where the crawler puts the search document into an App Search engine for searching.</p>
<p>During content extraction, the web crawler checks for duplicate content.
The crawler indexes duplicate web documents as a single search document.</p>
<p>The web crawler extracts each web document into a predefined <a class="xref" href="web-crawler-reference.html#web-crawler-reference-web-crawler-schema" title="Web crawler schema">schema</a> before indexing it as a search document.
At this time, the web crawler does not provide configuration or control over what content is extracted or how it is extracted.</p>
<p>During a crawl, the web crawler uses <a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-response-status-codes" title="HTTP response status codes handling">HTTP response status codes</a> and <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-meta-tags" title="Robots meta tags">robots meta tags</a> to determine which documents it is allowed to index.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-content-deletion"></a>Content deletion<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>The web crawler must also delete documents from an engine to keep its documents in sync with the corresponding web content.</p>
<p>During a crawl, the web crawler uses <a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-response-status-codes" title="HTTP response status codes handling">HTTP response status codes</a> to determine which documents to delete.
However, this process cannot delete stale documents in the engine that are no longer linked to on the web.</p>
<p>Therefore, at the conclusion of each crawl, the web crawler begins an additional "purge" crawl, which fetches URLs that exist in the engine, but have not been seen on the web during recent crawls.
The crawler deletes from the engine all documents that respond with <code class="literal">4xx</code> and <code class="literal">3xx</code> responses during the phase.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-domain"></a>Domain<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>A <em>domain</em> is a website or other internet realm that is the target of a <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl" title="Crawl">crawl</a>.
Each domain belongs to a crawl, and each crawl has one or more domains.</p>
<p>See <a class="xref" href="crawl-web-content.html#crawl-web-content-manage-domains" title="Manage domains">Manage domains</a> to manage domains for a crawl.</p>
<p>A crawl always stays <em>within</em> its domains when <a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-discovery" title="Content discovery">discovering content</a>.
It cannot discover and index content outside of its domains.</p>
<p>Each domain has a <em>domain URL</em> that identifies the domain using a protocol and hostname.
The domain URL must not include a path.</p>
<p>Each unique combination of protocol and hostname is a separate domain.
Each of the following is its own domain:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">http://example.com</code>
</li>
<li class="listitem">
<code class="literal">https://example.com</code>
</li>
<li class="listitem">
<code class="literal">http://www.example.com</code>
</li>
<li class="listitem">
<code class="literal">https://www.example.com</code>
</li>
<li class="listitem">
<code class="literal">http://shop.example.com</code>
</li>
<li class="listitem">
<code class="literal">https://shop.example.com</code>
</li>
</ul>
</div>
<p>Each domain has:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
One or more <a class="xref" href="web-crawler-reference.html#web-crawler-reference-entry-point" title="Entry point">entry points</a>
</li>
<li class="listitem">
One or more <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a>
</li>
<li class="listitem">
Zero or one <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt files</a>
</li>
<li class="listitem">
Zero or more <a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap" title="Sitemap">sitemaps</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-entry-point"></a>Entry point<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>An <em>entry point</em> is a path within a <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">domain</a> that serves as a starting point for a crawl.
Each entry point belongs to a domain, and each domain has one or more entry points.</p>
<p>See <a class="xref" href="crawl-web-content.html#crawl-web-content-manage-entry-points" title="Manage entry points">Manage entry points</a> to manage entry points for a domain.</p>
<p>Use entry points to instruct the crawler to fetch URLs it would otherwise not discover.
For example, if you&#8217;d like to index a page that isn&#8217;t linked from other pages, add the page&#8217;s URL as an entry point.</p>
<p>Ensure the entry points for each domain are allowed by the domain&#8217;s <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a>, and the directives within the domain&#8217;s <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt file</a>.
The web crawler will not fetch entry points that are disallowed by crawl rules or robots.txt directives.</p>
<p>You can also inform the crawler of URLs using <a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap" title="Sitemap">sitemaps</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-sitemap"></a>Sitemap<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>A sitemap is an XML file, associated with a <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">domain</a>, that informs web crawlers about pages within that domain.
XML elements within the sitemap identify specific URLs that are available for crawling.</p>
<p>These elements are similar to <a class="xref" href="web-crawler-reference.html#web-crawler-reference-entry-point" title="Entry point">entry points</a>.
You can therefore choose to submit URLs to the Enterprise Search web crawler using sitemaps, entry points, or a combination of both.</p>
<p>You may prefer using sitemaps over entry points for any of the following reasons:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You have already been publishing sitemaps for other web crawlers.
</li>
<li class="listitem">
You don&#8217;t have access to the web crawler UI.
</li>
<li class="listitem">
You prefer the sitemap file interface over the web crawler web interface.
</li>
</ul>
</div>
<p>Use sitemaps to inform the web crawler of pages you think are important, or pages that are isolated and not linked from other pages.
However, be aware the web crawler will visit only those pages from the sitemap that are allowed by the domain&#8217;s <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a> and <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt file</a> directives.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-sitemap-discovery-management"></a>Sitemap discovery and management<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>To add a sitemap to a domain, you must specify it within a <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt file</a>.
At the start of each <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl" title="Crawl">crawl</a>, the web crawler fetches and processes each domain&#8217;s robots.txt file and each sitemap specified within those robots.txt files.</p>
<p>See <a class="xref" href="crawl-web-content.html#crawl-web-content-manage-sitemaps" title="Manage sitemaps">Manage sitemaps</a> to manage sitemaps for your domains.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-sitemap-format"></a>Sitemap format and technical specification<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>The <a href="https://www.sitemaps.org/index.html" class="ulink" target="_blank" rel="noopener">sitemaps standard</a> defines the format and technical specification for sitemaps.
Refer to the standard for the required and optional elements, character escaping, and other technical considerations and examples.</p>
<p>The Enterprise Search web crawler does not process optional meta data defined by the standard.
The crawler extracts a list of URLs from each sitemap and ignores all other information.</p>
<p>Ensure each URL within your sitemap matches the exact <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">domain</a> (here defined as scheme + host + port) for your site.
Different subdomains (like <code class="literal">www.example.com</code> and <code class="literal">blog.example.com</code>) and different schemes (like <code class="literal">http://example.com</code> and <code class="literal">https://example.com</code>) require separate sitemaps.</p>
<p>The Enterprise Search web crawler also supports sitemap index files.
Refer to <a href="https://www.sitemaps.org/protocol.html#index" class="ulink" target="_blank" rel="noopener">Using sitemap index files</a> within the sitemap standard for sitemap index file details and examples.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-crawl-rule"></a>Crawl rule<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>A <em>crawl rule</em> is a crawler instruction to <em>allow</em> or <em>disallow</em> specific paths within a <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">domain</a>.
Each crawl rule belongs to a domain, and each domain has one or more crawl rules.</p>
<p>See <a class="xref" href="crawl-web-content.html#crawl-web-content-manage-crawl-rules" title="Manage crawl rules">Manage crawl rules</a> to manage crawl rules for a domain.</p>
<p>During <a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-discovery" title="Content discovery">content discovery</a>, the web crawler discovers new URLs and must determine which it is allowed to follow.
Each URL has a <em>domain</em> (e.g. <code class="literal">https://example.com</code>) and a <em>path</em> (e.g. <code class="literal">/category/clothing</code> or <code class="literal">/c/Credit_Center</code>).</p>
<p>The web crawler looks up the crawl rules for the domain, and applies the path to the crawl rules to determine if the path is <em>allowed</em> or <em>disallowed</em>.
The crawler evaluates the crawl rules in order.
The <em>first</em> matching crawl rule determines the policy for the newly discovered URL.</p>
<p>Each crawl rule has a <em>path pattern</em>, a <em>rule</em>, and a <em>policy</em>.
To evaluate each rule, the web crawler compares a newly discovered <em>path</em> to the path pattern, using the logic represented by the rule, resulting in a policy.</p>
<p>The policy for each URL is also affected by directives in <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt files</a>.
The web crawler will crawl only those URLs that are allowed by crawl rules <em>and</em> robots.txt directives.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-crawl-rule-rules"></a>Crawl rule logic (rules)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>The logic for each rule is as follows:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Begins with
</span>
</dt>
<dd>
<p>
The <em>path pattern</em> is a literal string (no metacharacters).
</p>
<p>The rule matches when the <em>path pattern</em> matches the <span class="strong strong"><strong>beginning</strong></span> of the <em>path</em> (which always begins with <code class="literal">/</code>).</p>
<p>If using this rule, begin your <em>path pattern</em> with <code class="literal">/</code>.</p>
</dd>
<dt>
<span class="term">
Ends with
</span>
</dt>
<dd>
<p>
The <em>path pattern</em> is a literal string (no metacharacters).
</p>
<p>The rule matches when the <em>path pattern</em> matches the <span class="strong strong"><strong>end</strong></span> of the <em>path</em>.</p>
</dd>
<dt>
<span class="term">
Contains
</span>
</dt>
<dd>
<p>
The <em>path pattern</em> is a literal string (no metacharacters).
</p>
<p>The rule matches when the <em>path pattern</em> matches anywhere <span class="strong strong"><strong>within</strong></span> the <em>path</em>.</p>
</dd>
<dt>
<span class="term">
Regex
</span>
</dt>
<dd>
<p>
The <em>path pattern</em> is a regular expression compatible with the Ruby language regular expression engine.
In addition to literal characters, the path pattern may include
<a href="https://ruby-doc.org/core-2.5.1/Regexp.html#class-Regexp-label-Metacharacters+and+Escapes" class="ulink" target="_blank" rel="noopener">metacharacters</a>, <a href="https://ruby-doc.org/core-2.5.1/Regexp.html#class-Regexp-label-Character+Classes" class="ulink" target="_blank" rel="noopener">character classes</a>, and <a href="https://ruby-doc.org/core-2.5.1/Regexp.html#class-Regexp-label-Repetition" class="ulink" target="_blank" rel="noopener">repetitions</a>.
You can test Ruby regular expressions using <a href="https://rubular.com" class="ulink" target="_blank" rel="noopener">Rubular</a>.
</p>
<p>The rule matches when the <em>path pattern</em> matches the <span class="strong strong"><strong>beginning</strong></span> of the <em>path</em> (which always begins with <code class="literal">/</code>).</p>
<p>If using this rule, begin your <em>path pattern</em> with <code class="literal">\/</code> or a metacharacter or character class that matches <code class="literal">/</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-crawl-rule-matching"></a>Crawl rule matching<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>The following table provides examples of crawl rule matching:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">URL path</th>
<th align="left" valign="top">Rule</th>
<th align="left" valign="top">Path pattern</th>
<th align="left" valign="top">Match?</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">/foo/bar</code></p></td>
<td align="left" valign="top"><p><em>Begins with</em></p></td>
<td align="left" valign="top"><p><code class="literal">/foo</code></p></td>
<td align="left" valign="top"><p>YES</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/bar/foo</code></p></td>
<td align="left" valign="top"><p><em>Begins with</em></p></td>
<td align="left" valign="top"><p><code class="literal">/foo</code></p></td>
<td align="left" valign="top"><p>NO</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/foo/bar</code></p></td>
<td align="left" valign="top"><p><em>Begins with</em></p></td>
<td align="left" valign="top"><p><code class="literal">foo</code></p></td>
<td align="left" valign="top"><p>NO</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/blog/posts/hello-world</code></p></td>
<td align="left" valign="top"><p><em>Ends</em></p></td>
<td align="left" valign="top"><p><code class="literal">world</code></p></td>
<td align="left" valign="top"><p>YES</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/blog/world-hello</code></p></td>
<td align="left" valign="top"><p><em>Ends</em></p></td>
<td align="left" valign="top"><p><code class="literal">world</code></p></td>
<td align="left" valign="top"><p>NO</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/fruits/bananas</code></p></td>
<td align="left" valign="top"><p><em>Contains</em></p></td>
<td align="left" valign="top"><p><code class="literal">banana</code></p></td>
<td align="left" valign="top"><p>YES</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/fruits/apples</code></p></td>
<td align="left" valign="top"><p><em>Contains</em></p></td>
<td align="left" valign="top"><p><code class="literal">banana</code></p></td>
<td align="left" valign="top"><p>NO</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/2020</code></p></td>
<td align="left" valign="top"><p><em>Regex</em></p></td>
<td align="left" valign="top"><p><code class="literal">\/[0-9]{3,5}</code></p></td>
<td align="left" valign="top"><p>YES</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/20</code></p></td>
<td align="left" valign="top"><p><em>Regex</em></p></td>
<td align="left" valign="top"><p><code class="literal">\/[0-9]{3,5}</code></p></td>
<td align="left" valign="top"><p>NO</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/2020</code></p></td>
<td align="left" valign="top"><p><em>Regex</em></p></td>
<td align="left" valign="top"><p><code class="literal">[0-9]{3,5}</code></p></td>
<td align="left" valign="top"><p>NO</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-crawl-rule-order"></a>Crawl rule order<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>The <em>first</em> crawl rule to match determines the policy for the URL.
Therefore, the order of the crawl rules is significant.</p>
<p>The following table demonstrates how crawl rule order affects the resulting policy for a path:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Path</th>
<th align="left" valign="top">Crawl rules</th>
<th align="left" valign="top">Resulting policy</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">/blog/2021/foo-bar-baz</code></p></td>
<td align="left" valign="top"><p>1. <code class="literal">Disallow</code> if <code class="literal">Begins with</code> <code class="literal">/blog</code></p>
<p>2. <code class="literal">Allow</code> if <code class="literal">Regex</code> <code class="literal">.*</code></p></td>
<td align="left" valign="top"><p>DISALLOW</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">/blog/2021/foo-bar-baz</code></p></td>
<td align="left" valign="top"><p>1. <code class="literal">Allow</code> if <code class="literal">Regex</code> <code class="literal">.*</code></p>
<p>2. <code class="literal">Disallow</code> if <code class="literal">Begins with</code> <code class="literal">/blog</code></p></td>
<td align="left" valign="top"><p>ALLOW</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-crawl-rule-restricting-paths"></a>Restricting paths using crawl rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>The domain dashboard adds a default crawl rule to each domain: <code class="literal">Allow</code> if <code class="literal">Regex</code> <code class="literal">.*</code>.
You cannot delete or re-order this rule through the dashboard.</p>
<p>This rule is permissive, allowing all paths within the domain.
To restrict paths, use either of the following techniques:</p>
<p>Add rules that disallow specific paths (e.g. disallow the blog):</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Policy</th>
<th align="left" valign="top">Rule</th>
<th align="left" valign="top">Path pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">Disallow</code></p></td>
<td align="left" valign="top"><p><code class="literal">Begins with</code></p></td>
<td align="left" valign="top"><p><code class="literal">/blog</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">Allow</code></p></td>
<td align="left" valign="top"><p><code class="literal">Regex</code></p></td>
<td align="left" valign="top"><p><code class="literal">.*</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Or, add rules that allow specific paths and disallow all others (e.g. allow <em>only</em> the blog):</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Policy</th>
<th align="left" valign="top">Rule</th>
<th align="left" valign="top">Path pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">Allow</code></p></td>
<td align="left" valign="top"><p><code class="literal">Begins with</code></p></td>
<td align="left" valign="top"><p><code class="literal">/blog</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">Disallow</code></p></td>
<td align="left" valign="top"><p><code class="literal">Regex</code></p></td>
<td align="left" valign="top"><p><code class="literal">.*</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">Allow</code></p></td>
<td align="left" valign="top"><p><code class="literal">Regex</code></p></td>
<td align="left" valign="top"><p><code class="literal">.*</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>When you restrict a crawl to specific paths, be sure to add <a class="xref" href="web-crawler-reference.html#web-crawler-reference-entry-point" title="Entry point">entry points</a> that allow the crawler to discover those paths.
For example, if your crawl rules restrict the crawler to <code class="literal">/blog</code>, add <code class="literal">/blog</code> as an entry point.</p>
<p>If you leave only the default entry point of <code class="literal">/</code>, the crawl will end immediately, since <code class="literal">/</code> is disallowed.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-robots-txt-file"></a>Robots.txt file<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>A robots.txt file is a plain text file, associated with a <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">domain</a>, that provides instructions to web crawlers.
The instructions within the file, also called directives, communicate which paths within that domain are disallowed (and allowed) for crawling.</p>
<p>The directives within a robots.txt file are similar to <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a>.
You can therefore choose to manage inclusion and exclusion through robots.txt files, crawl rules, or a combination of both.
The Enterprise Search web crawler will crawl only those paths that are allowed by the crawl rules for the domain <span class="strong strong"><strong>and</strong></span> the directives within the robots.txt file for the domain.</p>
<p>You may prefer using a robots.txt file over crawl rules for any of the following reasons:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You have already been publishing a robots.txt file for other web crawlers.
</li>
<li class="listitem">
You don&#8217;t have access to the web crawler UI.
</li>
<li class="listitem">
You prefer the robots.txt file interface over the web crawler web interface.
</li>
</ul>
</div>
<p>You can also use a robots.txt file to specify <a class="xref" href="web-crawler-reference.html#web-crawler-reference-sitemap" title="Sitemap">sitemaps</a> for a domain.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-robots-txt-file-discovery-management"></a>Robots.txt file discovery and management<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>At the start of each <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl" title="Crawl">crawl</a>, the web crawler fetches and processes the robots.txt file for each domain.
When fetching a robots.txt file, the crawler handles 2xx, 4xx, and 5xx responses differenty.
See <a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-response-status-codes-robots-txt" title="Robots.txt file response code handling">Robots.txt file response code handling</a> for an explanation of each response.</p>
<p>See <a class="xref" href="crawl-web-content.html#crawl-web-content-manage-robots-txt-files" title="Manage robots.txt files">Manage robots.txt files</a> to manage robots.txt files for your domains.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-robots-txt-file-format"></a>Robots.txt file format and technical specification<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>See <a href="https://en.wikipedia.org/wiki/Robots_exclusion_standard" class="ulink" target="_blank" rel="noopener">Robots exclusion standard</a> on Wikipedia for a summary of robots.txt conventions.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-canonical-url-link-tag"></a>Canonical URL link tag<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>A <em>canonical URL link tag</em> is an HTML element you can embed within pages that contain duplicate content.
The canonical URL link tag indicates the URL of the canonical page with the same content.</p>
<p>Template:</p>
<div class="pre_wrapper lang-html">
<pre class="programlisting prettyprint lang-html">&lt;link rel="canonical" href="{CANONICAL_URL}"&gt;</pre>
</div>
<p>Example:</p>
<div class="pre_wrapper lang-html">
<pre class="programlisting prettyprint lang-html">&lt;link rel="canonical" href="https://example.com/categories/dresses/starlet-red-medium"&gt;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-robots-meta-tags"></a>Robots meta tags<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p><em>Robots meta tags</em> are HTML elements you can embed within pages to prevent the crawler from following links or indexing content.</p>
<p>Template:</p>
<div class="pre_wrapper lang-html">
<pre class="programlisting prettyprint lang-html">&lt;meta name="robots" content="{DIRECTIVES}"&gt;</pre>
</div>
<p>Supported directives:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">noindex</code>
</span>
</dt>
<dd>
The web crawler will not index the page.
</dd>
<dt>
<span class="term">
<code class="literal">nofollow</code>
</span>
</dt>
<dd>
<p>
The web crawler will not follow links from the page (i.e. will not add links to the crawl queue).
The web crawler logs a <code class="literal">url_discover_denied</code> event for each link.
</p>
<p>The directive does not prevent the web crawler from indexing the page.</p>
</dd>
</dl>
</div>
<p>Examples:</p>
<div class="pre_wrapper lang-html">
<pre class="programlisting prettyprint lang-html">&lt;meta name="robots" content="noindex"&gt;
&lt;meta name="robots" content="nofollow"&gt;
&lt;meta name="robots" content="noindex, nofollow"&gt;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-nofollow-link"></a>Nofollow link<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p><em>Nofollow links</em> are HTML links that instruct the crawler to not follow the URL.</p>
<p>The web crawler will not follow links that include <code class="literal">rel="nofollow"</code> (i.e. will not add links to the crawl queue).
The web crawler logs a <code class="literal">url_discover_denied</code> event for each link.</p>
<p>The link does not prevent the web crawler from indexing the page in which it appears.</p>
<p>Template:</p>
<div class="pre_wrapper lang-html">
<pre class="programlisting prettyprint lang-html">&lt;a rel="nofollow" href="{LINK_URL}"&gt;{LINK_TEXT}&lt;/a&gt;</pre>
</div>
<p>Example:</p>
<div class="pre_wrapper lang-html">
<pre class="programlisting prettyprint lang-html">&lt;a rel="nofollow" href="/admin/categories"&gt;Edit this category&lt;/a&gt;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-crawl-status"></a>Crawl status<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>Each crawl has a <em>status</em>, which quickly communicates its state.</p>
<p>See <a class="xref" href="crawl-web-content.html#crawl-web-content-view-crawl-status" title="View crawl status">View crawl status</a> to view the status for a crawl.</p>
<p>All crawl statuses:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Pending
</span>
</dt>
<dd>
The crawl is enqueued and will start after resources are available.
</dd>
<dt>
<span class="term">
Starting
</span>
</dt>
<dd>
The crawl is starting.
You may see this status briefly, while a crawl moves from <em>pending</em> to <em>running</em>.
</dd>
<dt>
<span class="term">
Running
</span>
</dt>
<dd>
The crawl is running.
</dd>
<dt>
<span class="term">
Success
</span>
</dt>
<dd>
The crawl completed without error.
The web crawler may stop a crawl due to hitting resource limits.
Such a crawl will report its status as <em>success</em>, as long as it completes without error.
</dd>
<dt>
<span class="term">
Canceling
</span>
</dt>
<dd>
The crawl is canceling.
You may see this status briefly, after choosing to cancel a crawl.
</dd>
<dt>
<span class="term">
Canceled
</span>
</dt>
<dd>
The crawl was intentionally canceled and therefore did not complete.
</dd>
<dt>
<span class="term">
Failed
</span>
</dt>
<dd>
The crawl ended unexpectedly.
<a class="xref" href="view-web-crawler-events-logs.html" title="View web crawler events logs">View the web crawler events logs</a> for a message providing an explanation.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-http-response-status-codes"></a>HTTP response status codes handling<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>The following sections describe how the web crawler handles HTTP response status codes for HTML documents and robots.txt files.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-http-response-status-codes-html"></a>HTML response code handling<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Code</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Web crawler behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">2xx</code></p></td>
<td align="left" valign="top"><p>Success</p></td>
<td align="left" valign="top"><p>The web crawler extracts and de-duplicates the page&#8217;s content into a search document.
Then it indexes the document into the engine, replacing an existing document with the same content if present.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">3xx</code></p></td>
<td align="left" valign="top"><p>Redirection</p></td>
<td align="left" valign="top"><p>The web crawler follows all redirects recursively until it receives a <code class="literal">2xx</code>, <code class="literal">4xx</code>, or <code class="literal">5xx</code> response status code.
The crawler then handles that code as indicated in this table.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">4xx</code></p></td>
<td align="left" valign="top"><p>Permanent error</p></td>
<td align="left" valign="top"><p>The web crawler assumes this error is permanent.
It therefore does not index the document.
Furthermore, if the document is present in the engine, the web crawler deletes the document.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">5xx</code></p></td>
<td align="left" valign="top"><p>Temporary error</p></td>
<td align="left" valign="top"><p>The web crawler optimistically assumes this error will resolve in the future.
If the engine already contains a document representing the page, the document is updated to indicate the page was inaccessible.
After the page is inaccessible for three separate crawls, the document is deleted from the engine.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-reference-http-response-status-codes-robots-txt"></a>Robots.txt file response code handling<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Code</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Web crawler behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">2xx</code></p></td>
<td align="left" valign="top"><p>Success</p></td>
<td align="left" valign="top"><p>The web crawler processes and honors the directives for the domain within the <a class="xref" href="web-crawler-reference.html#web-crawler-reference-robots-txt-file" title="Robots.txt file">robots.txt file</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">4xx</code></p></td>
<td align="left" valign="top"><p>Permanent error</p></td>
<td align="left" valign="top"><p>The web crawler assumes this error is permanent and no specific rules exist for the domain.
It therefore <span class="strong strong"><strong>allows all</strong></span> paths for the domain (subject to <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a>).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">5xx</code></p></td>
<td align="left" valign="top"><p>Temporary error</p></td>
<td align="left" valign="top"><p>The web crawler optimistically assumes this error will resolve in the future.
However, in the interim, the crawler does not know which paths are allowed and disallowed.
It therefore <span class="strong strong"><strong>disallows all</strong></span> paths for the domain.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-web-crawler-schema"></a>Web crawler schema<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>The web crawler indexes search documents using the following schema.
All fields are strings or arrays of strings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">additional_urls</code>
</span>
</dt>
<dd>
The URLs of additional pages with the same content.
</dd>
<dt>
<span class="term">
<code class="literal">body_content</code>
</span>
</dt>
<dd>
The content of the page&#8217;s <code class="literal">&lt;body&gt;</code> tag with all HTML tags removed.
Truncated to <code class="literal">crawler.extraction.body_size.limit</code>.
</dd>
<dt>
<span class="term">
<code class="literal">content_hash</code>
</span>
</dt>
<dd>
A "fingerprint" to uniquely identify this content.
Used for de-duplication and re-crawling.
</dd>
<dt>
<span class="term">
<code class="literal">domains</code>
</span>
</dt>
<dd>
The domains in which this content appears.
</dd>
<dt>
<span class="term">
<code class="literal">headings</code>
</span>
</dt>
<dd>
The text of the page&#8217;s HTML headings (<code class="literal">h1</code> - <code class="literal">h6</code> elements).
Limited by <code class="literal">crawler.extraction.headings_count.limit</code>.
</dd>
<dt>
<span class="term">
<code class="literal">id</code>
</span>
</dt>
<dd>
The unique identifier for the page.
</dd>
<dt>
<span class="term">
<code class="literal">links</code>
</span>
</dt>
<dd>
Links found on the page.
Limited by <code class="literal">crawler.extraction.indexed_links_count.limit</code>.
</dd>
<dt>
<span class="term">
<code class="literal">meta_description</code>
</span>
</dt>
<dd>
The page&#8217;s description, taken from the <code class="literal">&lt;meta name="description"&gt;</code> tag.
Truncated to <code class="literal">crawler.extraction.description_size.limit</code>.
</dd>
<dt>
<span class="term">
<code class="literal">meta_keywords</code>
</span>
</dt>
<dd>
The page&#8217;s keywords, taken from the <code class="literal">&lt;meta name="keywords"&gt;</code> tag.
Truncated to <code class="literal">crawler.extraction.keywords_size.limit</code>.
</dd>
<dt>
<span class="term">
<code class="literal">title</code>
</span>
</dt>
<dd>
The title of the page, taken from the <code class="literal">&lt;title&gt;</code> tag.
Truncated to <code class="literal">crawler.extraction.title_size.limit</code>.
</dd>
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
The URL of the page.
</dd>
<dt>
<span class="term">
<code class="literal">url_host</code>
</span>
</dt>
<dd>
The hostname or IP from the page&#8217;s URL.
</dd>
<dt>
<span class="term">
<code class="literal">url_path</code>
</span>
</dt>
<dd>
The full pathname from the page&#8217;s URL.
</dd>
<dt>
<span class="term">
<code class="literal">url_path_dir1</code>
</span>
</dt>
<dd>
The first segment of the pathname from the page&#8217;s URL.
</dd>
<dt>
<span class="term">
<code class="literal">url_path_dir2</code>
</span>
</dt>
<dd>
The second segment of the pathname from the page&#8217;s URL.
</dd>
<dt>
<span class="term">
<code class="literal">url_path_dir3</code>
</span>
</dt>
<dd>
The third segment of the pathname from the page&#8217;s URL.
</dd>
<dt>
<span class="term">
<code class="literal">url_port</code>
</span>
</dt>
<dd>
The port number from the page&#8217;s URL (as a string).
</dd>
<dt>
<span class="term">
<code class="literal">url_scheme</code>
</span>
</dt>
<dd>
The scheme of the page&#8217;s URL.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-web-crawler-events-logs"></a>Web crawler events logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>The web crawler logs many events while discovering, extracting, and indexing web content.</p>
<p>To view these events, see <a class="xref" href="view-web-crawler-events-logs.html" title="View web crawler events logs">View web crawler events logs</a>.</p>
<p>For a complete reference of all events, see <a class="xref" href="web-crawler-events-logs-reference.html" title="Web crawler (beta) events logs reference">Web crawler (beta) events logs reference</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-reference-web-crawler-configuration-settings"></a>Web crawler configuration settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.12/app-search-docs/guides/web-crawler-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>Operators can configure several web crawler settings.</p>
<p>See <a href="/guide/en/enterprise-search/7.12/configuration.html" class="ulink" target="_blank" rel="noopener">Configuration</a> in the Enterprise Search documentation for a complete list of Enterprise Search configuration settings.</p>
<p>Settings beginning with <code class="literal">crawler.</code> are specific to the web crawler.</p>
<p>These settings include:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">crawler.crawl.max_crawl_depth.limit
crawler.crawl.max_duration.limit
crawler.crawl.max_unique_url_count.limit
crawler.crawl.max_url_length.limit
crawler.crawl.max_url_params.limit
crawler.crawl.max_url_segments.limit
crawler.crawl.threads.limit
crawler.http.connection_timeout
crawler.http.read_timeout
crawler.http.redirects.limit
crawler.http.request_timeout
crawler.http.response_size.limit
crawler.http.user_agent
crawler.extraction.body_size.limit
crawler.extraction.description_size.limit
crawler.extraction.extracted_links_count.limit
crawler.extraction.headings_count.limit
crawler.extraction.indexed_links_count.limit
crawler.extraction.keywords_size.limit
crawler.extraction.title_size.limit
crawler.workers.pool_size.limit</pre>
</div>
<p>Refer to the Enterprise Search documentation for an up-to-date list of all configuration settings.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="web-crawler-faq.html">« Web crawler (beta) FAQ</a>
</span>
<span class="next">
<a href="web-crawler-events-logs-reference.html">Web crawler (beta) events logs reference »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
