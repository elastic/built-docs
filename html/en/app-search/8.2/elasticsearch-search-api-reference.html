<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Elasticsearch search API for App Search (technical preview) | Elastic App Search Documentation [8.2] | Elastic</title>
<link rel="home" href="index.html" title="Elastic App Search Documentation [8.2]"/>
<link rel="up" href="api-reference.html" title="API Reference"/>
<link rel="prev" href="documents.html" title="Documents API"/>
<link rel="next" href="engines.html" title="Engines API"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/8.2"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="8.2"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elastic App Search Documentation [8.2]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="api-reference.html">API Reference</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="documents.html">« Documents API</a>
</span>
<span class="next">
<a href="engines.html">Engines API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="elasticsearch-search-api-reference"></a>Elasticsearch search API for App Search (technical preview)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.2/app-search-docs/api-reference/elasticsearch-search.asciidoc">edit</a></h2>
</div></div></div>

<div class="caution admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Elasticsearch search API is a <span class="strong strong"><strong>technical preview</strong></span> feature.
Technical preview features are subject to change and are not covered by the support SLA of generally available (GA) features.
Elastic plans to promote this feature to GA in a future release.</p>
</div>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>A <a class="xref" href="authentication.html#authentication-private" title="Private API key permissions">Private API key</a> is required to access this endpoint.</p>
<p>In addition, a feature flag should be set either in the <a class="xref" href="configuration.html" title="Configuration">configuration settings</a>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">feature_flag.elasticsearch_search_api: true</pre>
</div>
<p>or in an environment variable:</p>
<p><code class="literal">ELASTICSEARCH_SEARCH_API=true</code></p>
<p>By default, the API is disabled.</p>
</div>
</div>
<p>Submit an Elasticsearch search request to the document indices that power an App Search engine and retrieve the results.</p>
<p>You can use this API with regular engines and meta engines.</p>
<p><code class="literal">GET &lt;enterprise-search-base-url&gt;/api/as/v0/engines/&lt;engine&gt;/elasticsearch/_search</code><br>
<code class="literal">POST &lt;enterprise-search-base-url&gt;/api/as/v0/engines/&lt;engine&gt;/elasticsearch/_search</code></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="elasticsearch-search-api-reference.html#elasticsearch-search-api-reference-path-parameters" title="Path parameters">Path parameters</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-search-api-reference.html#elasticsearch-search-api-reference-request-body" title="Request body">Request body</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-search-api-reference.html#elasticsearch-search-api-reference-response-body" title="Response body">Response body</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-search-api-reference.html#elasticsearch-search-api-reference-examples" title="Examples">Examples</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-search-api-reference.html#elasticsearch-search-api-reference-limitations" title="Limitations">Limitations</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-search-api-reference.html#elasticsearch-search-api-reference-see-also" title="See also">See also</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="elasticsearch-search-api-reference-path-parameters"></a>Path parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.2/app-search-docs/api-reference/elasticsearch-search.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">enterprise-search-base-url</code> (required)
</span>
</dt>
<dd>
The <a href="/guide/en/enterprise-search/8.2/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">Enterprise Search base URL</a> for the deployment.
</dd>
<dt>
<span class="term">
<code class="literal">engine</code> (required)
</span>
</dt>
<dd>
The engine name.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="elasticsearch-search-api-reference-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.2/app-search-docs/api-reference/elasticsearch-search.asciidoc">edit</a></h3>
</div></div></div>
<p>Request body has the following elements:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">request</code>
</span>
</dt>
<dd>
<p>This is an object that contains the following properties:</p>
</dd>
<dt>
<span class="term">
<code class="literal">request.body</code>
</span>
</dt>
<dd>
<p>JSON query to be sent directly to Elasticsearch.</p>
</dd>
<dt>
<span class="term">
<code class="literal">request.query_params</code> (optional)
</span>
</dt>
<dd>
<p>A list of query parameters to be included in the request sent to Elasticsearch. Each parameter is an object with a <code class="literal">key</code> and a <code class="literal">value</code>.</p>
</dd>
</dl>
</div>
<p>The <code class="literal">body</code> contains the actual Elasticsearch query. The query can be written using any elements of the <a href="/guide/en/elasticsearch/reference/8.2/query-dsl.html" class="ulink" target="_blank" rel="noopener">Elasticsearch Query DSL</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">analytics.query</code> (optional)
</span>
</dt>
<dd>
<p>Specify the search query associated with this request when recording search analytics.</p>
</dd>
<dt>
<span class="term">
<code class="literal">analytics.tags</code> (optional)
</span>
</dt>
<dd>
<p>See <a class="xref" href="tags.html" title="Search API analytics tags">Search API analytics tags</a>.</p>
</dd>
</dl>
</div>
<p>Query analytics are recorded only if something is specified in <code class="literal">analytics</code> params.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="elasticsearch-search-api-reference-response-body"></a>Response body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.2/app-search-docs/api-reference/elasticsearch-search.asciidoc">edit</a></h3>
</div></div></div>
<p>Response is returned directly from Elasticsearch and depends on the provided request and its parameters. Unlike the <a class="xref" href="search.html" title="Search API">Search endpoint</a>, this endpoint does not do any parsing or formatting of the Elasticsearch response, it simply passes the response back as-is.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="elasticsearch-search-api-reference-examples"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.2/app-search-docs/api-reference/elasticsearch-search.asciidoc">edit</a></h3>
</div></div></div>
<p>Retrieve all documents for a given engine:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl --request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v0/engines/national-parks-demo/elasticsearch/_search" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer private-g6673wmo7529rmvk7ckry530" \
--data '{
    "request": {
      "body": {"query": {"match_all": {}}}
    }
}'</pre>
</div>
<p>Response (10 documents are returned, but only 1 is shown here):</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "took": 2,
  "timed_out": false,
  "_shards": {
    "total": 2,
    "successful": 2,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 59,
      "relation": "eq"
    },
    "max_score": 1.0,
    "hits": [
      {
        "_index": ".ent-search-engine-documents-national-parks-demo",
        "_id": "park_acadia",
        "_score": 1.0,
        "_ignored": [
          "description.date",
          "title.float",
          "date_established.location",
          "acres.location",
          "nps_link.date",
          "world_heritage_site.float",
          "acres.date",
          "states.float",
          "title.location",
          "states.location",
          "visitors.date",
          "location.float",
          "world_heritage_site.date",
          "description.float",
          "description.location",
          "nps_link.float",
          "square_km.location",
          "title.date",
          "location.date",
          "nps_link.location",
          "world_heritage_site.location",
          "states.date",
          "square_km.date",
          "date_established.float"
        ],
        "_source": {
          "description": "Covering most of Mount Desert Island and other coastal islands, Acadia features the tallest mountain on the Atlantic coast of the United States, granite peaks, ocean shoreline, woodlands, and lakes. There are freshwater, estuary, forest, and intertidal habitats.",
          "nps_link": "https://www.nps.gov/acad/index.htm",
          "states": [
            "Maine"
          ],
          "title": "Acadia",
          "visitors": "3303393",
          "world_heritage_site": "false",
          "location": "44.35,-68.21",
          "acres": "49057.36",
          "square_km": "198.5",
          "date_established": "1919-02-26T06:00:00Z",
          "id": "park_acadia"
        }
      }
    ]
  }
}</pre>
</div>
<p>By default, Elasticsearch returns 10 documents, unless the <code class="literal">size</code> parameter is specified. We can provide the parameter in <code class="literal">query_params</code>. Request:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl --request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v0/engines/national-parks-demo/elasticsearch/_search" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer private-g6673wmo7529rmvk7ckry530" \
--data '{
    "request": {
      "body": {"query": {"match_all": {}}},
      "query_params": [
        {"key": "size", "value": "1"}
      ]
    }
}'</pre>
</div>
<p>Response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "took": 0,
  "timed_out": false,
  "_shards": {
    "total": 2,
    "successful": 2,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 59,
      "relation": "eq"
    },
    "max_score": 1.0,
    "hits": [
      {
        "_index": ".ent-search-engine-documents-national-parks-demo",
        "_id": "park_acadia",
        "_score": 1.0,
        "_ignored": [
          "description.date",
          "title.float",
          "date_established.location",
          "acres.location",
          "nps_link.date",
          "world_heritage_site.float",
          "acres.date",
          "states.float",
          "title.location",
          "states.location",
          "visitors.date",
          "location.float",
          "world_heritage_site.date",
          "description.float",
          "description.location",
          "nps_link.float",
          "square_km.location",
          "title.date",
          "location.date",
          "nps_link.location",
          "world_heritage_site.location",
          "states.date",
          "square_km.date",
          "date_established.float"
        ],
        "_source": {
          "description": "Covering most of Mount Desert Island and other coastal islands, Acadia features the tallest mountain on the Atlantic coast of the United States, granite peaks, ocean shoreline, woodlands, and lakes. There are freshwater, estuary, forest, and intertidal habitats.",
          "nps_link": "https://www.nps.gov/acad/index.htm",
          "states": [
            "Maine"
          ],
          "title": "Acadia",
          "visitors": "3303393",
          "world_heritage_site": "false",
          "location": "44.35,-68.21",
          "acres": "49057.36",
          "square_km": "198.5",
          "date_established": "1919-02-26T06:00:00Z",
          "id": "park_acadia"
        }
      }
    ]
  }
}</pre>
</div>
<p>For more guidance and examples, please see the <a class="xref" href="elasticsearch-search-guide.html" title="Elasticsearch search for App Search Guide">Elasticsearch search guide</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="elasticsearch-search-api-reference-limitations"></a>Limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.2/app-search-docs/api-reference/elasticsearch-search.asciidoc">edit</a></h3>
</div></div></div>
<p>This API only exposes the Elasticsearch <a href="/guide/en/elasticsearch/reference/8.2/search-search.html" class="ulink" target="_blank" rel="noopener">Search API</a>. It&#8217;s currently not possible to access other Elasticsearch search APIs, such as <a href="/guide/en/elasticsearch/reference/8.2/search-multi-search.html" class="ulink" target="_blank" rel="noopener">Multi search API</a>, <a href="/guide/en/elasticsearch/reference/8.2/scroll-api.html" class="ulink" target="_blank" rel="noopener">Scroll API</a>, <a href="/guide/en/elasticsearch/reference/8.2/async-search.html" class="ulink" target="_blank" rel="noopener">Async search API</a>, etc.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="elasticsearch-search-api-reference-see-also"></a>See also<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.2/app-search-docs/api-reference/elasticsearch-search.asciidoc">edit</a></h3>
</div></div></div>
<p>You can see exactly how App Search searches for the documents if you use the related <a class="xref" href="search-explain.html" title="Search Explain API (beta)">Search Explain API</a> endpoint. That endpoint will build and return an Elasticsearch search query being used by App Search. The query can be used as a starting point to create your own queries.</p>
<p>More examples are available in the <a class="xref" href="elasticsearch-search-guide.html" title="Elasticsearch search for App Search Guide">Elasticsearch search guide</a>.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="documents.html">« Documents API</a>
</span>
<span class="next">
<a href="engines.html">Engines API »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
