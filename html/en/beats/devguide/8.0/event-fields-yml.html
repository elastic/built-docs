<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Defining field mappings | Beats Developer Guide [8.0] | Elastic</title>
<link rel="home" href="index.html" title="Beats Developer Guide [8.0]"/>
<link rel="up" href="community-beats.html" title="Community Beats"/>
<link rel="prev" href="community-beats.html" title="Community Beats"/>
<link rel="next" href="event-conventions.html" title="Naming Conventions"/>
<meta name="DC.type" content="Learn/Docs/Devguide/Reference/8.0"/>
<meta name="DC.subject" content="Beats"/>
<meta name="DC.identifier" content="8.0"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Beats Developer Guide [8.0]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="community-beats.html">Community Beats</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="community-beats.html">« Community Beats</a>
</span>
<span class="next">
<a href="event-conventions.html">Naming Conventions »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="event-fields-yml"></a>Defining field mappings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/8.0/docs/devguide/fields-yml.asciidoc">edit</a></h2>
</div></div></div>
<p>You must define the fields used by your Beat, along with their mapping details,
in <code class="literal">_meta/fields.yml</code>. After editing this file, run <code class="literal">make update</code>.</p>
<p>Define the field mappings in the <code class="literal">fields</code> array:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">- key: mybeat
  title: mybeat
  description: These are the fields used by mybeat.
  fields:
    - name: last_name <a id="CO1-1"></a><i class="conum" data-value="1"></i>
      type: keyword <a id="CO1-2"></a><i class="conum" data-value="2"></i>
      required: true <a id="CO1-3"></a><i class="conum" data-value="3"></i>
      description: &gt; <a id="CO1-4"></a><i class="conum" data-value="4"></i>
        The last name.
    - name: first_name
      type: keyword
      required: true
      description: &gt;
        The first name.
    - name: comment
      type: text
      required: false
      description: &gt;
        Comment made by the user.</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">name</code>: The field name</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">type</code>: The field type. The value of <code class="literal">type</code> can be any datatype <a href="/guide/en/elasticsearch/reference/8.0/mapping-types.html" class="ulink" target="_top">available in Elasticsearch</a>. If no value is specified, the default type is <code class="literal">keyword</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">required</code>: Whether or not a field value is required</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">description</code>: Some information about the field contents</p>
</td>
</tr>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_mapping_parameters"></a>Mapping parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/8.0/docs/devguide/fields-yml.asciidoc">edit</a></h3>
</div></div></div>
<p>You can specify other mapping parameters for each field. See the
<a href="/guide/en/elasticsearch/reference/8.0/mapping-params.html" class="ulink" target="_top">Elasticsearch Reference</a> for more details about each
parameter.</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">format</code>
</p>
</td>
<td valign="top">
<p>
Specify a custom date format used by the field.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">multi_fields</code>
</p>
</td>
<td valign="top">
<p>
For <code class="literal">text</code> or <code class="literal">keyword</code> fields, use <code class="literal">multi_fields</code> to define
multi-field mappings.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">enabled</code>
</p>
</td>
<td valign="top">
<p>
Whether or not the field is enabled.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">analyzer</code>
</p>
</td>
<td valign="top">
<p>
Which analyzer to use when indexing.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">search_analyzer</code>
</p>
</td>
<td valign="top">
<p>
Which analyzer to use when searching.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">norms</code>
</p>
</td>
<td valign="top">
<p>
Applies to <code class="literal">text</code> and <code class="literal">keyword</code> fields. Default is <code class="literal">false</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">dynamic</code>
</p>
</td>
<td valign="top">
<p>
Dynamic field control. Can be one of <code class="literal">true</code> (default), <code class="literal">false</code>, or
<code class="literal">strict</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">index</code>
</p>
</td>
<td valign="top">
<p>
Whether or not the field should be indexed.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">doc_values</code>
</p>
</td>
<td valign="top">
<p>
Whether or not the field should have doc values generated.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">copy_to</code>
</p>
</td>
<td valign="top">
<p>
Which field to copy the field value into.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">ignore_above</code>
</p>
</td>
<td valign="top">
<p>
Elasticsearch ignores (does not index) strings that are longer than the
specified value. When this property value is missing or <code class="literal">0</code>, the <code class="literal">libbeat</code>
default value of <code class="literal">1024</code> characters is used. If the value is <code class="literal">-1</code>, the Elasticsearch
default value is used.
</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>For example, you can use the <code class="literal">copy_to</code> mapping parameter to copy the
<code class="literal">last_name</code> and <code class="literal">first_name</code> fields into the <code class="literal">full_name</code> field at index time:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">- key: mybeat
  title: mybeat
  description: These are the fields used by mybeat.
  fields:
    - name: last_name
      type: text
      required: true
      copy_to: full_name <a id="CO2-1"></a><i class="conum" data-value="1"></i>
      description: &gt;
        The last name.
    - name: first_name
      type: text
      required: true
      copy_to: full_name <a id="CO2-2"></a><i class="conum" data-value="2"></i>
      description: &gt;
        The first name.
    - name: full_name
      type: text
      required: false
      description: &gt;
        The last_name and first_name combined into one field for easy searchability.</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Copy the value of <code class="literal">last_name</code> into <code class="literal">full_name</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Copy the value of <code class="literal">first_name</code> into <code class="literal">full_name</code></p>
</td>
</tr>
</table>
</div>
<p>There are also some Kibana-specific properties, not detailed here. These are:
<code class="literal">analyzed</code>, <code class="literal">count</code>, <code class="literal">searchable</code>, <code class="literal">aggregatable</code>, and <code class="literal">script</code>. Kibana
parameters can also be described using <code class="literal">pattern</code>, <code class="literal">input_format</code>,
<code class="literal">output_format</code>, <code class="literal">output_precision</code>, <code class="literal">label_template</code>, <code class="literal">url_template</code>, and
<code class="literal">open_link_in_current_tab</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_defining_text_multi_fields"></a>Defining text multi-fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/8.0/docs/devguide/fields-yml.asciidoc">edit</a></h3>
</div></div></div>
<p>There are various options that you can apply when using text fields. You can
define a simple text field using the default analyzer without any other options,
as in the example shown earlier.</p>
<p>To keep the original keyword value when using <code class="literal">text</code> mappings, for instance to
use in aggregations or ordering, you can use a multi-field mapping:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">- key: mybeat
  title: mybeat
  description: These are the fields used by mybeat.
  fields:
    - name: city
      type: text
      multi_fields: <a id="CO3-1"></a><i class="conum" data-value="1"></i>
        - name: keyword <a id="CO3-2"></a><i class="conum" data-value="2"></i>
          type: keyword <a id="CO3-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">multi_fields</code>: Define the <code class="literal">multi_fields</code> mapping parameter.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">name</code>: This is a conventional name for a multi-field. It can be anything (<code class="literal">raw</code> is another common option) but the convention is to use <code class="literal">keyword</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">type</code>: Specify the <code class="literal">keyword</code> type to use the field in aggregations or to order documents.</p>
</td>
</tr>
</table>
</div>
<p>For more information, see the <a href="/guide/en/elasticsearch/reference/8.0/multi-fields.html" class="ulink" target="_top">Elasticsearch documentation about
multi-fields</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_defining_a_text_analyzer_in_line"></a>Defining a text analyzer in-line<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/8.0/docs/devguide/fields-yml.asciidoc">edit</a></h3>
</div></div></div>
<p>It is possible to define a new text analyzer or search analyzer in-line with
the field definition in the field&#8217;s mapping parameters.</p>
<p>For example, you can define a new text analyzer that does not break hyphenated names:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">- key: mybeat
  title: mybeat
  description: These are the fields used by mybeat.
  fields:
    - name: last_name
      type: text
      required: true
      description: &gt;
        The last name.
      analyzer:
        mybeat_hyphenated_name: <a id="CO4-1"></a><i class="conum" data-value="1"></i>
          type: pattern <a id="CO4-2"></a><i class="conum" data-value="2"></i>
          pattern: "[\\W&amp;&amp;[^-]]+" <a id="CO4-3"></a><i class="conum" data-value="3"></i>
      search_analyzer:
        mybeat_hyphenated_name: <a id="CO4-4"></a><i class="conum" data-value="4"></i>
          type: pattern
          pattern: "[\\W&amp;&amp;[^-]]+"</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO4-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use a newly defined text analyzer</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO4-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Define the custome analyzer type</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO4-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify the analyzer behaviour</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO4-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use the same analyzer for the search</p>
</td>
</tr>
</table>
</div>
<p>The names of custom analyzers that are defined in-line may not be reused for a different
text analyzer. If a text analyzer name is reused it is checked for matching existing
instances of the analyzer. It is recommended that the analyzer name is prefixed with the
beat name to avoid name clashes.</p>
<p>For more information, see <a href="/guide/en/elasticsearch/reference/8.0/analysis-custom-analyzer.html" class="ulink" target="_top">Elasticsearch documentation about
defining custom text analyzers</a>.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="community-beats.html">« Community Beats</a>
</span>
<span class="next">
<a href="event-conventions.html">Naming Conventions »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
