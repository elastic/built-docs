<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Frequently asked questions
        | Filebeat Reference [6.6]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filebeat Reference [6.6]" /><link rel="up" href="troubleshooting.html" title="Troubleshooting" /><link rel="prev" href="enable-filebeat-debugging.html" title="Debug" /><link rel="next" href="migrating-from-logstash-forwarder.html" title="Migrating from Logstash Forwarder to Filebeat" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Filebeat/Reference/6.6" /><meta name="DC.subject" content="Filebeat" /><meta name="DC.identifier" content="6.6" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Filebeat Reference
      [6.6]
    </a></span> » <span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-node">Frequently asked questions</span></div><div class="navheader"><span class="prev"><a href="enable-filebeat-debugging.html">
              « 
              Debug</a>
           
        </span><span class="next">
           
          <a href="migrating-from-logstash-forwarder.html">Migrating from Logstash Forwarder to Filebeat
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="faq"></a>Frequently asked questions<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>This section contains frequently asked questions about Filebeat. Also check out the
<a class="ulink" href="https://discuss.elastic.co/c/beats/filebeat" target="_top">Filebeat discussion forum</a>.</p><h3><a id="filebeat-network-volumes"></a>Can’t read log files from network volumes?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>We do not recommend reading log files from network volumes. Whenever possible, install Filebeat on the host machine and
send the log files directly from there. Reading files from network volumes (especially on Windows) can have unexpected side
effects. For example, changed file identifiers may result in Filebeat reading a log file from scratch again.</p><h3><a id="filebeat-not-collecting-lines"></a>Filebeat isn’t collecting lines from a file?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Filebeat might be incorrectly configured or unable to send events to the output. To resolve the issue:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Make sure the config file specifies the correct path to the file that you are collecting. See <a class="xref" href="filebeat-configuration.html" title="Step 2: Configure Filebeat">Step 2: Configure Filebeat</a>
for more information.
</li><li class="listitem">
Verify that the file is not older than the value specified by <a class="link" href="filebeat-input-log.html#filebeat-input-log-ignore-older" title="ignore_older"><code class="literal">ignore_older</code></a>. <code class="literal">ignore_older</code> is disable by
default so this depends on the value you have set. You can change this behavior by specifying a different value for
<a class="link" href="filebeat-input-log.html#filebeat-input-log-ignore-older" title="ignore_older"><code class="literal">ignore_older</code></a>.
</li><li class="listitem"><p class="simpara">
Make sure that Filebeat is able to send events to the configured output. Run Filebeat in debug mode to determine whether
it’s publishing events successfully:
</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">./filebeat -c config.yml -e -d "*"</pre></div></li></ul></div><h3><a id="open-file-handlers"></a>Too many open file handlers?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Filebeat keeps the file handler open in case it reaches the end of a file so that it can read new log lines in near real time. If Filebeat is harvesting a large number of files, the number of open files can become an issue. In most environments, the number of files that are actively updated is low. The <code class="literal">close_inactive</code> configuration option should be set accordingly to close files that are no longer active.</p><p>There are additional configuration options that you can use to close file handlers, but all of them should be used carefully because they can have side effects. The options are:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="filebeat-input-log.html#filebeat-input-log-close-renamed" title="close_renamed"><code class="literal">close_renamed</code></a>
</li><li class="listitem">
<a class="link" href="filebeat-input-log.html#filebeat-input-log-close-removed" title="close_removed"><code class="literal">close_removed</code></a>
</li><li class="listitem">
<a class="link" href="filebeat-input-log.html#filebeat-input-log-close-eof" title="close_eof"><code class="literal">close_eof</code></a>
</li><li class="listitem">
<a class="link" href="filebeat-input-log.html#filebeat-input-log-close-timeout" title="close_timeout"><code class="literal">close_timeout</code></a>
</li><li class="listitem">
<a class="link" href="filebeat-input-log.html#filebeat-input-log-harvester-limit" title="harvester_limit"><code class="literal">harvester_limit</code></a>
</li></ul></div><p>The <code class="literal">close_renamed</code> and <code class="literal">close_removed</code> options can be useful on Windows to resolve issues related to file rotation. See <a class="xref" href="faq.html#windows-file-rotation" title="Open file handlers cause issues with Windows file rotation?">Open file handlers cause issues with Windows file rotation?</a>. The <code class="literal">close_eof</code> option can be useful in environments with a large number of files that have only very few entries. The <code class="literal">close_timeout</code> option is useful in environments where closing file handlers is more important than sending all log lines. For more details, see <a class="xref" href="configuration-filebeat-options.html" title="Configure inputs"><em>Configure inputs</em></a>.</p><p>Make sure that you read the documentation for these configuration options before using any of them.</p><h3><a id="reduce-registry-size"></a>Registry file is too large?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Filebeat keeps the state of each file and persists the state to disk in the <code class="literal">registry_file</code>. The file state is used to continue file reading at a previous position when Filebeat is restarted. If a large number of new files are produced every day, the registry file might grow to be too large. To reduce the size of the registry file, there are two configuration options available: <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-removed" title="clean_removed"><code class="literal">clean_removed</code></a> and <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-inactive" title="clean_inactive"><code class="literal">clean_inactive</code></a>.</p><p>For old files that you no longer touch and are ignored (see <a class="link" href="filebeat-input-log.html#filebeat-input-log-ignore-older" title="ignore_older"><code class="literal">ignore_older</code></a>), we recommended that you use <code class="literal">clean_inactive</code>. If old files get removed from disk, then use the <code class="literal">clean_removed</code> option.</p><h3><a id="inode-reuse-issue"></a>Inode reuse causes Filebeat to skip lines?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>On Linux file systems, Filebeat uses the inode and device to identify files. When a file is removed from disk, the inode may be assigned to a new file. In use cases involving file rotation, if an old file is removed and a new one is created immediately afterwards, the new file may have the exact same inode as the file that was removed. In this case, Filebeat assumes that the new file is the same as the old and tries to continue reading at the old position, which is not correct.</p><p>By default states are never removed from the registry file. To resolve the inode reuse issue, we recommend that you use the <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-options" title="clean_*"><code class="literal">clean_*</code></a> options, especially <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-inactive" title="clean_inactive"><code class="literal">clean_inactive</code></a>, to remove the state of inactive files. For example, if your files get rotated every 24 hours, and the rotated files are not updated anymore, you can set <a class="link" href="filebeat-input-log.html#filebeat-input-log-ignore-older" title="ignore_older"><code class="literal">ignore_older</code></a> to 48 hours and <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-inactive" title="clean_inactive"><code class="literal">clean_inactive</code></a> to 72 hours.</p><p>You can use <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-removed" title="clean_removed"><code class="literal">clean_removed</code></a> for files that are removed from disk. Be aware that <code class="literal">clean_removed</code> cleans the file state from the registry whenever a file cannot be found during a scan. If the file shows up again later, it will be sent again from scratch.</p><h3><a id="windows-file-rotation"></a>Open file handlers cause issues with Windows file rotation?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>On Windows, you might have problems renaming or removing files because Filebeat keeps the file handlers open. This can lead to issues with the file rotating system. To avoid this issue, you can use the <a class="link" href="filebeat-input-log.html#filebeat-input-log-close-removed" title="close_removed"><code class="literal">close_removed</code></a> and <a class="link" href="filebeat-input-log.html#filebeat-input-log-close-renamed" title="close_renamed"><code class="literal">close_renamed</code></a> options together.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>When you configure these options, files may be closed before the harvester has finished reading the files. If the file cannot be picked up again by the input and the harvester hasn’t finish reading the file, the missing lines will never be sent to the output.</p></div></div><h3><a id="filebeat-cpu"></a>Filebeat is using too much CPU?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Filebeat might be configured to scan for files too frequently. Check the setting for <code class="literal">scan_frequency</code> in the <code class="literal">filebeat.yml</code>
config file. Setting <code class="literal">scan_frequency</code> to less than 1s may cause Filebeat to scan the disk in a tight loop.</p><h3><a id="dashboard-fields-incorrect-filebeat"></a>Dashboard in Kibana is breaking up data fields incorrectly?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The index template might not be loaded correctly. See <a class="xref" href="filebeat-template.html" title="Step 4: Load the index template in Elasticsearch">Step 4: Load the index template in Elasticsearch</a>.</p><h3><a id="fields-not-indexed"></a>Fields are not indexed or usable in Kibana visualizations?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>If you have recently performed an operation that loads or parses custom, structured logs,
you might need to refresh the index to make the fields available in Kibana. To refresh
the index, use the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/indices-refresh.html" target="_top">refresh API</a>. For example:</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">curl -XPOST 'http://localhost:9200/filebeat-2016.08.09/_refresh'</pre></div><h3><a id="newline-character-required-eof"></a>Filebeat isn’t shipping the last line of a file?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Filebeat uses a newline character to detect the end of an event. If lines are added incrementally to a file that’s being
harvested, a newline character is required after the last line, or Filebeat will not read the last line of
the file.</p><h3><a id="faq-deleted-files-are-not-freed"></a>Filebeat keeps open file handlers of deleted files for a long time?<a href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>In the default behaviour, Filebeat opens the files and keeps them open until it
reaches the end of them.  In situations when the configured output is blocked
(e.g. Elasticsearch or Logstash is unavailable) for a long time, this can cause
Filebeat to keep file handlers to files that were deleted from the file system
in the mean time. As long as Filebeat keeps the deleted files open, the
operating system doesn’t free up the space on disk, which can lead to increase
disk utilisation or even out of disk situations.</p><p>To mitigate this issue, you can set the
<a class="xref" href="filebeat-input-log.html#filebeat-input-log-close-timeout" title="close_timeout"><code class="literal">close_timeout</code></a> setting to <code class="literal">5m</code>. This will ensure
every file handler is closed once every 5 minutes, regardless of whether it
reached EOF or not. Note that this option can lead to data loss if the file is
deleted before Filebeat reaches the end of the file.</p><h3><a id="bandwidth-throttling"></a>Need to limit bandwidth used by Filebeat?<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/faq-limit-bandwidth.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>If you need to limit bandwidth usage, we recommend that you configure the network stack on your OS to perform
bandwidth throttling.</p><p>For example, the following Linux commands cap the connection between Filebeat and Logstash by setting a
limit of 50 kbps on TCP connections over port 5044:</p><div class="pre_wrapper lang-shell"><pre class="programlisting prettyprint lang-shell">tc qdisc add dev $DEV root handle 1: htb
tc class add dev $DEV parent 1:1 classid 1:10 htb rate 50kbps ceil 50kbps
tc filter add dev $DEV parent 1:0 prio 1 protocol ip handle 10 fw flowid 1:10
iptables -A OUTPUT -t mangle -p tcp --dport 5044 -j MARK --set-mark 10</pre></div><p>Using OS tools to perform bandwidth throttling gives you better control over policies. For example, you can use
OS tools to cap bandwidth during the day, but not at night. Or you can leave the bandwidth uncapped, but assign a low priority to the traffic.</p><h3><a id="error-loading-config"></a>Error loading config file?<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>You may encounter errors loading the config file on POSIX operating systems if:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
an unauthorized user tries to load the config file, or
</li><li class="listitem">
the config file has the wrong permissions.
</li></ul></div><p>See <a class="ulink" href="https://www.elastic.co/guide/en/beats/libbeat/6.6/config-file-permissions.html" target="_top">Config File Ownership and Permissions</a>
for more about resolving these errors.</p><h3><a id="error-found-unexpected-character"></a>Found Unexpected or Unknown Characters?<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Either there is a problem with the structure of your config file, or you have
used a path or expression that the YAML parser cannot resolve because the config
file contains characters that aren’t properly escaped.</p><p>If the YAML file contains paths with spaces or unusual characters, wrap the
paths in single quotation marks (see <a class="xref" href="yaml-tips.html#wrap-paths-in-quotes" title="Wrap paths in single quotation marks">Wrap paths in single quotation marks</a>).</p><p>Also see the general advice under <a class="xref" href="yaml-tips.html" title="YAML tips and gotchas"><em>YAML tips and gotchas</em></a>.</p><h3><a id="connection-problem"></a>Logstash connection doesn’t work?<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>You may have configured Logstash or Filebeat incorrectly. To resolve the issue:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
Make sure that Logstash is running and you can connect to it. First, try to ping the Logstash host to verify that you can reach it
from the host running Filebeat. Then use either <code class="literal">nc</code> or <code class="literal">telnet</code> to make sure that the port is available. For example:
</p><div class="pre_wrapper lang-shell"><pre class="programlisting prettyprint lang-shell">ping &lt;hostname or IP&gt;
telnet &lt;hostname or IP&gt; 5044</pre></div></li><li class="listitem">
Verify that the config file for Filebeat specifies the correct port where Logstash is running.
</li><li class="listitem">
Make sure that the Elasticsearch output is commented out in the config file and the Logstash output is uncommented.
</li><li class="listitem">
Confirm that the most recent <a class="ulink" href="http://www.elastic.co/guide/en/logstash/6.6/plugins-inputs-beats.html" target="_top">Beats
input plugin for Logstash</a> is installed and configured. Note that Beats will not
connect to the Lumberjack input plugin. To learn how to install and update
plugins, see <a class="ulink" href="http://www.elastic.co/guide/en/logstash/6.6/working-with-plugins.html" target="_top">Working with plugins</a>.
</li></ul></div><h3><a id="metadata-missing"></a>@metadata is missing in Logstash?<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Logstash outputs remove <code class="literal">@metadata</code> fields automatically. Therefore, if Logstash instances are chained directly or via some message
queue (for example, Redis or Kafka), the <code class="literal">@metadata</code> field will not be available in the final Logstash instance.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>To preserve <code class="literal">@metadata</code> fields, use the Logstash mutate filter with the rename setting to rename the fields to
non-internal fields.</p></div></div><h3><a id="diff-logstash-beats"></a>Difference between Logstash and Beats?<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Beats are lightweight data shippers that you install as agents on your servers to send specific types of operational
data to Elasticsearch. Beats have a small footprint and use fewer system resources than Logstash.</p><p>Logstash has a larger footprint, but provides a broad array of input, filter, and output plugins for collecting, enriching,
and transforming data from a variety of sources.</p><p>For more information, see the <a class="ulink" href="https://www.elastic.co/guide/en/logstash/current/introduction.html" target="_top">Logstash Introduction</a> and
the <a class="ulink" href="https://www.elastic.co/guide/en/beats/libbeat/current/beats-reference.html" target="_top">Beats Overview</a>.</p><h3><a id="ssl-client-fails"></a>SSL client fails to connect to Logstash?<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The host running Logstash might be unreachable or the certificate may not be valid. To resolve your issue:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
Make sure that Logstash is running and you can connect to it. First, try to ping the Logstash host to verify that you can reach it
from the host running Filebeat. Then use either <code class="literal">nc</code> or <code class="literal">telnet</code> to make sure that the port is available. For example:
</p><div class="pre_wrapper lang-shell"><pre class="programlisting prettyprint lang-shell">ping &lt;hostname or IP&gt;
telnet &lt;hostname or IP&gt; 5044</pre></div></li><li class="listitem"><p class="simpara">
Verify that the certificate is valid and that the hostname and IP match.
</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>For testing purposes only, you can set <code class="literal">verification_mode: none</code> to disable hostname checking.</p></div></div></li><li class="listitem">
Use OpenSSL to test connectivity to the Logstash server and diagnose problems. See the <a class="ulink" href="https://www.openssl.org/docs/manmaster/apps/s_client.html" target="_top">OpenSSL documentation</a> for more info.
</li><li class="listitem">
Make sure that you have enabled SSL (set <code class="literal">ssl =&gt; true</code>) when configuring the <a class="ulink" href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-beats.html" target="_top">Beats input plugin for Logstash</a>.
</li></ul></div><h4><a id="_common_ssl_related_errors_and_resolutions"></a>Common SSL-Related Errors and Resolutions<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Here are some common errors and ways to fix them:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="faq.html#cannot-validate-certificate" title="x509: cannot validate certificate for &lt;IP address&gt; because it doesn’t contain any IP SANs">x509: cannot validate certificate</a>
</li><li class="listitem">
<a class="link" href="faq.html#getsockopt-no-route-to-host" title="getsockopt: no route to host">getsockopt: no route to host</a>
</li><li class="listitem">
<a class="link" href="faq.html#getsockopt-connection-refused" title="getsockopt: connection refused">getsockopt: connection refused</a>
</li><li class="listitem">
<a class="link" href="faq.html#target-machine-refused-connection" title="No connection could be made because the target machine actively refused it">No connection could be made because the target machine actively refused it</a>
</li></ul></div><h5><a id="cannot-validate-certificate"></a>x509: cannot validate certificate for &lt;IP address&gt; because it doesn’t contain any IP SANs<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>This happens because your certificate is only valid for the hostname present in the Subject field.</p><p>To resolve this problem, try one of these solutions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Create a DNS entry for the hostname mapping it to the server’s IP.
</li><li class="listitem">
Create an entry in <code class="literal">/etc/hosts</code> for the hostname. Or on Windows add an entry to
<code class="literal">C:\Windows\System32\drivers\etc\hosts</code>.
</li><li class="listitem">
Re-create the server certificate and add a SubjectAltName (SAN) for the IP address of the server. This make the
server’s certificate valid for both the hostname and the IP address.
</li></ul></div><h5><a id="getsockopt-no-route-to-host"></a>getsockopt: no route to host<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>This is not a SSL problem. It’s a networking problem. Make sure the two hosts can communicate.</p><h5><a id="getsockopt-connection-refused"></a>getsockopt: connection refused<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>This is not a SSL problem. Make sure that Logstash is running and that there is no firewall blocking the traffic.</p><h5><a id="target-machine-refused-connection"></a>No connection could be made because the target machine actively refused it<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>A firewall is refusing the connection. Check if a firewall is blocking the traffic on the client, the network, or the
destination host.</p><h3><a id="monitoring-shows-fewer-than-expected-beats"></a>Monitoring UI shows fewer Beats than expected<a href="https://github.com/elastic/beats/edit/6.6/libbeat/docs/shared-faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>If you are running multiple Beat instances on the same host, make sure they each have a distinct <code class="literal">path.data</code> value.</p></div><div class="navfooter"><span class="prev"><a href="enable-filebeat-debugging.html">
              « 
              Debug</a>
           
        </span><span class="next">
           
          <a href="migrating-from-logstash-forwarder.html">Migrating from Logstash Forwarder to Filebeat
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>
