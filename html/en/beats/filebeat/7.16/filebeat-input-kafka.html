<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Kafka input | Filebeat Reference [7.16] | Elastic</title>
<link rel="home" href="index.html" title="Filebeat Reference [7.16]"/>
<link rel="up" href="configuration-filebeat-options.html" title="Configure inputs"/>
<link rel="prev" href="filebeat-input-journald.html" title="Journald input"/>
<link rel="next" href="filebeat-input-log.html" title="Log input"/>
<meta name="DC.type" content="Learn/Docs/Filebeat/Reference/7.16"/>
<meta name="DC.subject" content="Filebeat"/>
<meta name="DC.identifier" content="7.16"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Filebeat Reference [7.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuring-howto-filebeat.html">Configure Filebeat</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuration-filebeat-options.html">Configure inputs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="filebeat-input-journald.html">« Journald input</a>
</span>
<span class="next">
<a href="filebeat-input-log.html">Log input »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="filebeat-input-kafka"></a>Kafka input<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h2>
</div></div></div>

<p>Use the <code class="literal">kafka</code> input to read from topics in a Kafka cluster.</p>
<p>To configure this input, specify a list of one or more <a class="xref" href="logstash-output.html#hosts" title="hosts"><code class="literal">hosts</code></a> in the
cluster to bootstrap the connection with, a list of <a class="xref" href="filebeat-input-kafka.html#topics" title="topics"><code class="literal">topics</code></a> to
track, and a <a class="xref" href="filebeat-input-kafka.html#groupid" title="group_id"><code class="literal">group_id</code></a> for the connection.</p>
<p>Example configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: kafka
  hosts:
    - kafka-broker-1:9092
    - kafka-broker-2:9092
  topics: ["my-topic"]
  group_id: "filebeat"</pre>
</div>
<p>The following example shows how to use the <code class="literal">kafka</code> input to ingest data from
Microsoft Azure Event Hubs that have Kafka compatibility enabled:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: kafka
  hosts: ["&lt;your event hub namespace&gt;.servicebus.windows.net:9093"]
  topics: ["&lt;your event hub instance&gt;"]
  group_id: "&lt;your consumer group&gt;"

  username: "$ConnectionString"
  password: "&lt;your connection string&gt;"
  ssl.enabled: true</pre>
</div>
<p>For more details on the mapping between Kafka and Event Hubs configuration
parameters, see the
<a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview" class="ulink" target="_top">Azure documentation</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="kafka-input-compatibility"></a>Compatibility<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h3>
</div></div></div>
<p>This input works with all Kafka versions in between 0.11 and 2.8.0. Older versions
might work as well, but are not supported.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="filebeat-input-kafka-options"></a>Configuration options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">kafka</code> input supports the following configuration options plus the
<a class="xref" href="filebeat-input-kafka.html#filebeat-input-kafka-common-options" title="Common options">Common options</a> described later.</p>
<h5><a id="kafka-hosts"></a><code class="literal">hosts</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>A list of Kafka bootstrapping hosts (brokers) for this cluster.</p>
<h5><a id="topics"></a><code class="literal">topics</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>A list of topics to read from.</p>
<h5><a id="groupid"></a><code class="literal">group_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>The Kafka consumer group id.</p>
<h5><a id="_client_id_2"></a><code class="literal">client_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>The Kafka client id (optional).</p>
<h5><a id="_version_2"></a><code class="literal">version</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>The version of the Kafka protocol to use (defaults to <code class="literal">"1.0.0"</code>).</p>
<h5><a id="_initial_offset"></a><code class="literal">initial_offset</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>The initial offset to start reading, either "oldest" or "newest". Defaults to
"oldest".</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_connect_backoff"></a><code class="literal">connect_backoff</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>How long to wait before trying to reconnect to the kafka cluster after a
fatal error. Default is 30s.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_consume_backoff"></a><code class="literal">consume_backoff</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>How long to wait before retrying a failed read. Default is 2s.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_max_wait_time"></a><code class="literal">max_wait_time</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>How long to wait for the minimum number of input bytes while reading. Default
is 250ms.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_wait_close"></a><code class="literal">wait_close</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>When shutting down, how long to wait for in-flight messages to be delivered
and acknowledged.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_isolation_level"></a><code class="literal">isolation_level</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>This configures the Kafka group isolation level:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">"read_uncommitted"</code> returns <em>all</em> messages in the message channel.
</li>
<li class="listitem">
<code class="literal">"read_committed"</code> hides messages that are part of an aborted transaction.
</li>
</ul>
</div>
<p>The default is <code class="literal">"read_uncommitted"</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_fetch"></a><code class="literal">fetch</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>Kafka fetch settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">min</code></strong></span>
</span>
</dt>
<dd>
The minimum number of bytes to wait for. Defaults to 1.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">default</code></strong></span>
</span>
</dt>
<dd>
The default number of bytes to read per request. Defaults to 1MB.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">max</code></strong></span>
</span>
</dt>
<dd>
The maximum number of bytes to read per request. Defaults to 0
(no limit).
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_expand_event_list_from_field_2"></a><code class="literal">expand_event_list_from_field</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>If the fileset using this input expects to receive multiple messages bundled under a specific field then the config option <code class="literal">expand_event_list_from_field</code> value can be assigned the name of the field.
For example in the case of azure filesets the events are found under the json object "records".</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
"records": [ {event1}, {event2}]
}</pre>
</div>
<p>This setting will be able to split the messages under the group value (<em>records</em>) into separate events.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_rebalance"></a><code class="literal">rebalance</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<p>Kafka rebalance settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">strategy</code></strong></span>
</span>
</dt>
<dd>
Either <code class="literal">"range"</code> or <code class="literal">"roundrobin"</code>. Defaults to <code class="literal">"range"</code>.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">timeout</code></strong></span>
</span>
</dt>
<dd>
How long to wait for an attempted rebalance. Defaults to 60s.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">max_retries</code></strong></span>
</span>
</dt>
<dd>
How many times to retry if rebalancing fails. Defaults to 4.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">retry_backoff</code></strong></span>
</span>
</dt>
<dd>
How long to wait after an unsuccessful rebalance attempt.
Defaults to 2s.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_kerberos"></a><code class="literal">kerberos</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Configuration options for Kerberos authentication.</p>
<p>See <a class="xref" href="configuration-kerberos.html" title="Configure Kerberos"><em>Kerberos</em></a> for more information.</p>
<h5><a id="_parsers_2"></a><code class="literal">parsers</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>This option expects a list of parsers that the payload has to go through.</p>
<p>Available parsers:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ndjson</code>
</li>
<li class="listitem">
<code class="literal">multiline</code>
</li>
</ul>
</div>
<h5><a id="_ndjson_2"></a><code class="literal">ndjson</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>These options make it possible for Filebeat to decode the payload as
JSON messages.</p>
<p>Example configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">- ndjson:
  keys_under_root: true
  add_error_key: true
  message_key: log</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">keys_under_root</code></strong></span>
</span>
</dt>
<dd>
By default, the decoded JSON is placed under a "json" key
in the output document. If you enable this setting, the keys are copied top
level in the output document. The default is false.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">overwrite_keys</code></strong></span>
</span>
</dt>
<dd>
If <code class="literal">keys_under_root</code> and this setting are enabled, then the
values from the decoded JSON object overwrite the fields that Filebeat
normally adds (type, source, offset, etc.) in case of conflicts.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">expand_keys</code></strong></span>
</span>
</dt>
<dd>
If this setting is enabled, Filebeat will recursively
de-dot keys in the decoded JSON, and expand them into a hierarchical object
structure. For example, <code class="literal">{"a.b.c": 123}</code> would be expanded into <code class="literal">{"a":{"b":{"c":123}}}</code>.
This setting should be enabled when the input is produced by an
<a href="https://github.com/elastic/ecs-logging" class="ulink" target="_top">ECS logger</a>.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">add_error_key</code></strong></span>
</span>
</dt>
<dd>
If this setting is enabled, Filebeat adds an
"error.message" and "error.type: json" key in case of JSON unmarshalling errors
or when a <code class="literal">message_key</code> is defined in the configuration but cannot be used.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">message_key</code></strong></span>
</span>
</dt>
<dd>
An optional configuration setting that specifies a JSON key on
which to apply the line filtering and multiline settings. If specified the key
must be at the top level in the JSON object and the value associated with the
key must be a string, otherwise no filtering or multiline aggregation will
occur.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">document_id</code></strong></span>
</span>
</dt>
<dd>
Option configuration setting that specifies the JSON key to
set the document id. If configured, the field will be removed from the original
JSON document and stored in <code class="literal">@metadata._id</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">ignore_decoding_error</code></strong></span>
</span>
</dt>
<dd>
An optional configuration setting that specifies if
JSON decoding errors should be logged or not. If set to true, errors will not
be logged. The default is false.
</dd>
</dl>
</div>
<h5><a id="_multiline_5"></a><code class="literal">multiline</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-kafka.asciidoc">edit</a></h5>
<p>Options that control how Filebeat deals with log messages that span
multiple lines. See <a class="xref" href="multiline-examples.html" title="Manage multiline messages">Multiline messages</a> for more information about
configuring multiline options.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="filebeat-input-kafka-common-options"></a>Common options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h3>
</div></div></div>
<p>The following configuration options are supported by all inputs.</p>
<h5><a id="_enabled_11"></a><code class="literal">enabled</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>Use the <code class="literal">enabled</code> option to enable and disable inputs. By default, enabled is
set to true.</p>
<h5><a id="_tags_11"></a><code class="literal">tags</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>A list of tags that Filebeat includes in the <code class="literal">tags</code> field of each published
event. Tags make it easy to select specific events in Kibana or apply
conditional filtering in Logstash. These tags will be appended to the list of
tags specified in the general configuration.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: kafka
  . . .
  tags: ["json"]</pre>
</div>
<h5><a id="filebeat-input-kafka-fields"></a><code class="literal">fields</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>Optional fields that you can specify to add additional information to the
output. For example, you might add fields that you can use for filtering log
data. Fields can be scalar values, arrays, dictionaries, or any nested
combination of these. By default, the fields that you specify here will be
grouped under a <code class="literal">fields</code> sub-dictionary in the output document. To store the
custom fields as top-level fields, set the <code class="literal">fields_under_root</code> option to true.
If a duplicate field is declared in the general configuration, then its value
will be overwritten by the value declared here.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: kafka
  . . .
  fields:
    app_id: query_engine_12</pre>
</div>
<h5><a id="fields-under-root-kafka"></a><code class="literal">fields_under_root</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>If this option is set to true, the custom
<a class="xref" href="filebeat-input-kafka.html#filebeat-input-kafka-fields" title="fields">fields</a> are stored as top-level fields in
the output document instead of being grouped under a <code class="literal">fields</code> sub-dictionary. If
the custom field names conflict with other field names added by Filebeat,
then the custom fields overwrite the other fields.</p>
<h5><a id="_processors_11"></a><code class="literal">processors</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>A list of processors to apply to the input data.</p>
<p>See <a class="xref" href="filtering-and-enhancing-data.html" title="Filter and enhance data with processors"><em>Processors</em></a> for information about specifying
processors in your config.</p>
<h5><a id="_pipeline_11"></a><code class="literal">pipeline</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>The ingest pipeline ID to set for the events generated by this input.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The pipeline ID can also be configured in the Elasticsearch output, but
this option usually results in simpler configuration files. If the pipeline is
configured both in the input and output, the option from the
input is used.</p>
</div>
</div>
<h5><a id="_keep_null_11"></a><code class="literal">keep_null</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>If this option is set to true, fields with <code class="literal">null</code> values will be published in
the output document. By default, <code class="literal">keep_null</code> is set to <code class="literal">false</code>.</p>
<h5><a id="_index_11"></a><code class="literal">index</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>If present, this formatted string overrides the index for events from this input
(for elasticsearch outputs), or sets the <code class="literal">raw_index</code> field of the event&#8217;s
metadata (for other outputs). This string can only refer to the agent name and
version and the event timestamp; for access to dynamic fields, use
<code class="literal">output.elasticsearch.index</code> or a processor.</p>
<p>Example value: <code class="literal">"%{[agent.name]}-myindex-%{+yyyy.MM.dd}"</code> might
expand to <code class="literal">"filebeat-myindex-2019.11.01"</code>.</p>
<h5><a id="_publisher_pipeline_disable_host_11"></a><code class="literal">publisher_pipeline.disable_host</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.16/filebeat/docs/inputs/input-common-options.asciidoc">edit</a></h5>
<p>By default, all events contain <code class="literal">host.name</code>. This option can be set to <code class="literal">true</code> to
disable the addition of this field to all events. The default value is <code class="literal">false</code>.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="filebeat-input-journald.html">« Journald input</a>
</span>
<span class="next">
<a href="filebeat-input-log.html">Log input »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
