<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Installing Logstash (Optional) | Beats Platform Reference [5.4] | Elastic</title>
<link rel="home" href="index.html" title="Beats Platform Reference [5.4]"/>
<link rel="up" href="getting-started.html" title="Getting Started with Beats and the Elastic Stack"/>
<link rel="prev" href="elasticsearch-installation.html" title="Installing Elasticsearch"/>
<link rel="next" href="kibana-installation.html" title="Installing Kibana"/>
<meta name="DC.type" content="Learn/Docs/Libbeat/Reference/5.4"/>
<meta name="DC.subject" content="libbeat"/>
<meta name="DC.identifier" content="5.4"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<p>
  <strong>WARNING</strong>: Version 5.4 of Beats has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Beats Platform Reference [5.4]</a></span>
»
<span class="breadcrumb-link"><a href="getting-started.html">Getting Started with Beats and the Elastic Stack</a></span>
»
<span class="breadcrumb-node">Installing Logstash (Optional)</span>
</div>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-installation.html">« Installing Elasticsearch</a>
</span>
<span class="next">
<a href="kibana-installation.html">Installing Kibana »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="logstash-installation"></a>Installing Logstash (Optional)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/gettingstarted.asciidoc">edit</a></h2>
</div></div></div>
<p>The simplest architecture for the Beats platform setup consists of one or more Beats,
Elasticsearch, and Kibana. This architecture is easy to get started
with and sufficient for networks with low traffic. It also uses the minimum amount of
servers: a single machine running Elasticsearch and Kibana. The Beats
insert the transactions directly into the Elasticsearch instance.</p>
<p>If you want to perform additional processing or buffering on the data, however,
you&#8217;ll want to install Logstash.</p>
<p>An important advantage to this approach is that you can
use Logstash to modify the data captured by Beats in any way you like. You can also
use Logstash&#8217;s many output plugins to integrate with other systems.</p>
<p>To download and install Logstash, use the commands that work
with your system:</p>
<p><span class="strong strong"><strong>deb:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo apt-get install openjdk-8-jre
curl -L -O https://artifacts.elastic.co/downloads/logstash/logstash-5.4.3.deb
sudo dpkg -i logstash-5.4.3.deb</pre>
</div>
<p><span class="strong strong"><strong>rpm:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo yum install java-1.8.0-openjdk
curl -L -O https://artifacts.elastic.co/downloads/logstash/logstash-5.4.3.rpm
sudo rpm -i logstash-5.4.3.rpm</pre>
</div>
<p><span class="strong strong"><strong>mac:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh"># install Java, e.g. from: https://www.java.com/en/download/manual.jsp
curl -L -O https://artifacts.elastic.co/downloads/logstash/logstash-5.4.3.zip
unzip logstash-5.4.3.zip</pre>
</div>
<p><span class="strong strong"><strong>win:</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
If necessary, download and install the latest version of the Java from <a href="https://www.java.com" class="ulink" target="_top">www.java.com</a>.
</li>
<li class="listitem">
Download the Logstash 5.4.3 Windows zip file from the
<a href="/downloads/logstash" class="ulink" target="_top">downloads page</a>.
</li>
<li class="listitem">
Extract the contents of the zip file to a directory on your computer, for example, <code class="literal">C:\Program Files</code>.
</li>
</ol>
</div>
<p>Don&#8217;t start Logstash yet. You need to set a couple of configuration options first.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="logstash-setup"></a>Setting Up Logstash<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/gettingstarted.asciidoc">edit</a></h3>
</div></div></div>
<p>In this setup, the Beat sends events to Logstash. Logstash receives
these events by using the
<a href="/guide/en/logstash/5.4/plugins-inputs-beats.html" class="ulink" target="_top">Beats input plugin for Logstash</a>
and then sends the transaction to Elasticsearch by using the
<a href="/guide/en/logstash/5.4/plugins-outputs-elasticsearch.html" class="ulink" target="_top">Elasticsearch output plugin for Logstash</a>.
The Elasticsearch output plugin uses the bulk API, making indexing very efficient.</p>
<p>To set up Logstash, you create a Logstash pipeline configuration file that
configures Logstash to listen on port 5044 for incoming Beats connections
and to index into Elasticsearch.  For example, you can save the following
example configuration to a file called <code class="literal">logstash.conf</code>:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">input {
  beats {
    port =&gt; 5044
  }
}

# The filter part of this file is commented out to indicate that it is
# optional.
# filter {
#
# }

output {
  elasticsearch {
    hosts =&gt; "localhost:9200"
    manage_template =&gt; false
    index =&gt; "%{[@metadata][beat]}-%{+YYYY.MM.dd}" <a id="CO1-1"></a><i class="conum" data-value="1"></i>
    document_type =&gt; "%{[@metadata][type]}" <a id="CO1-2"></a><i class="conum" data-value="2"></i>
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">%{[@metadata][beat]}</code> sets the first part of the index name to the value
of the <code class="literal">beat</code> metadata field, and <code class="literal">%{+YYYY.MM.dd}</code> sets the second part of the
name to a date based on the Logstash <code class="literal">@timestamp</code> field. For example:
<code class="literal">beatname-2017.03.29</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">%{[@metadata][type]}</code> sets the document type based on the value of the <code class="literal">type</code>
metadata field.</p>
</td>
</tr>
</table>
</div>
<p>When you run Logstash with this configuration, it indexes events into
Elasticsearch in the same way that the Beat would, but you get access to other
capabilities provided by Logstash for collecting, enriching, and transforming
data. See the <a href="/guide/en/logstash/5.4/introduction.html" class="ulink" target="_top">Logstash introduction</a> for more
information about these capabilities.</p>
<p>To use this setup, you&#8217;ll also need to configure your Beat to use Logstash.
For more information, see the documentation for the Beat.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="logstash-input-update"></a>Updating the Beats Input Plugin for Logstash<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/gettingstarted.asciidoc">edit</a></h4>
</div></div></div>
<p>Plugins have their own release cycle and are often released independent of
Logstash’s core release cycle. To ensure that you have the latest version of
the <a href="/guide/en/logstash/current/plugins-inputs-beats.html" class="ulink" target="_top">Beats input plugin for Logstash</a>,
run the following command from your Logstash installation:</p>
<p><span class="strong strong"><strong>deb, rpm, and mac:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/logstash-plugin update logstash-input-beats</pre>
</div>
<p><span class="strong strong"><strong>win:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin\logstash-plugin update logstash-input-beats</pre>
</div>
<p>Keep in mind that you can update to the latest version of the plugin without
having to upgrade to a newer version of Logstash. More details about working
with input plugins in Logstash are available
<a href="/guide/en/logstash/current/working-with-plugins.html" class="ulink" target="_top">here</a>.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_starting_logstash"></a>Starting Logstash<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/gettingstarted.asciidoc">edit</a></h3>
</div></div></div>
<p>Now you can start Logstash. Use the command that works with your system. If you
installed Logstash as a deb or rpm package, make sure the config file is in the
expected directory.</p>
<p><span class="strong strong"><strong>deb:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo /etc/init.d/logstash start</pre>
</div>
<p><span class="strong strong"><strong>rpm:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">sudo service logstash start</pre>
</div>
<p><span class="strong strong"><strong>mac:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/logstash -f logstash.conf</pre>
</div>
<p><span class="strong strong"><strong>win:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin\logstash.bat -f logstash.conf</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default configuration for Beats and Logstash uses plain TCP. For
encryption you must explicitly enable SSL when you configure Beats and Logstash.</p>
</div>
</div>
<p>You can learn more about installing, configuring, and running Logstash
<a href="/guide/en/logstash/current/getting-started-with-logstash.html" class="ulink" target="_top">here</a>.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="elasticsearch-installation.html">« Installing Elasticsearch</a>
</span>
<span class="next">
<a href="kibana-installation.html">Installing Kibana »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
