<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Configure index lifecycle management | Metricbeat Reference [7.5] | Elastic</title>
<meta class="elastic" name="content" content="Configure index lifecycle management | Metricbeat Reference [7.5]">

<link rel="home" href="index.html" title="Metricbeat Reference [7.5]"/>
<link rel="up" href="configuring-howto-metricbeat.html" title="Configuring Metricbeat"/>
<link rel="prev" href="configuration-output-codec.html" title="Change the output codec"/>
<link rel="next" href="configuration-ssl.html" title="Specify SSL settings"/>
<meta class="elastic" name="product_version" content="7.5"/>
<meta class="elastic" name="product_name" content="Metricbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/7.5"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="7.5"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="configuration-output-codec.html">« Change the output codec</a>
</span>
<span class="next">
<a href="configuration-ssl.html">Specify SSL settings »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [7.5]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuring-howto-metricbeat.html">Configuring Metricbeat</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configure index lifecycle management</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/reference/beats/metricbeat/ilm">latest documentation</a>.
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ilm"></a>Configure index lifecycle management<a class="xpack_tag" href="/subscriptions"></a></h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
</div></div></div>
<p>Use the <a href="/guide/en/elasticsearch/reference/7.5/getting-started-index-lifecycle-management.html" class="ulink" target="_top">index lifecycle
management</a> feature in Elasticsearch to manage your Metricbeat indices as they age.
For example, instead of creating daily indices where index size can vary based
on the number of Beats and number of events sent, use an index lifecycle policy
to automate a rollover to a new index when the existing index reaches a
specified size or age.</p>
<p>Starting with version 7.0, Metricbeat uses index lifecycle management by
default when it connects to a cluster that supports lifecycle management.
Metricbeat loads the default policy automatically and applies it to any
indices created by Metricbeat.</p>
<p>You can view and edit the policy in the <span class="strong strong"><strong>Index lifecycle policies</strong></span> UI in Kibana.
For more information about working with the UI, see
<a href="/guide/en/kibana/7.5/index-lifecycle-policies.html" class="ulink" target="_top">Index lifecyle policies</a>.</p>
<p>Example configuration:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">setup.ilm.enabled: auto
setup.ilm.rollover_alias: "metricbeat"
setup.ilm.pattern: "{now/d}-000001" <a id="CO13-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO13-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Date math is supported here. For more information, see
<a href="/guide/en/elasticsearch/reference/7.5/indices-rollover-index.html#_using_date_math_with_the_rollover_api" class="ulink" target="_top">Using
date math with the rollover API</a>.</p>
</td>
</tr>
</table>
</div>
<div class="position-relative"><h3><a id="_configuration_options_8"></a>Configuration options</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>You can specify the following settings in the <code class="literal">setup.ilm</code> section of the
<code class="literal">metricbeat.yml</code> config file:</p>
<div class="position-relative"><h4><a id="setup-ilm-option"></a><code class="literal">setup.ilm.enabled</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>Enables or disables index lifecycle management on any new indices created by
Metricbeat. Valid values are <code class="literal">true</code>, <code class="literal">false</code>, and <code class="literal">auto</code>. When <code class="literal">auto</code> (the
default) is specified on version 7.0 and later, Metricbeat automatically uses
index lifecycle management if the feature is enabled in Elasticsearch and has the
required license; otherwise, Metricbeat creates daily indices.</p>
<div class="position-relative"><h4><a id="setup-ilm-rollover_alias-option"></a><code class="literal">setup.ilm.rollover_alias</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>The index lifecycle write alias name. The default is
<code class="literal">metricbeat-%{[agent.version]}</code>. Setting this option changes the alias name.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you modify this setting after loading the index template, you must
overwrite the template to apply the changes.</p>
</div>
</div>
<div class="position-relative"><h4><a id="setup-ilm-pattern-option"></a><code class="literal">setup.ilm.pattern</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>The rollover index pattern. The default is <code class="literal">%{now/d}-000001</code>.</p>
<p>Date math is supported in this setting. For example:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">setup.ilm.pattern: "{now/M{YYYY.MM}}-000001"</pre>
</div>
<p>For more information, see
<a href="/guide/en/elasticsearch/reference/7.5/indices-rollover-index.html#_using_date_math_with_the_rollover_api" class="ulink" target="_top">Using
date math with the rollover API</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you modify this setting after loading the index template, you must
overwrite the template to apply the changes.</p>
</div>
</div>
<div class="position-relative"><h4><a id="setup-ilm-policy_name-option"></a><code class="literal">setup.ilm.policy_name</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>The name to use for the lifecycle policy. The default is
<code class="literal">metricbeat-%{[agent.version]}</code>.</p>
<div class="position-relative"><h4><a id="setup-ilm-policy_file-option"></a><code class="literal">setup.ilm.policy_file</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>The path to a JSON file that contains a lifecycle policy configuration. Use this
setting to load your own lifecycle policy.</p>
<p>For more information about lifecycle policies, see
<a href="/guide/en/elasticsearch/reference/7.5/set-up-lifecycle-policy.html" class="ulink" target="_top">Set up index lifecycle management policy</a> in
the <em>Elasticsearch Reference</em>.</p>
<div class="position-relative"><h4><a id="setup-ilm-check_exists-option"></a><code class="literal">setup.ilm.check_exists</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>When set to <code class="literal">false</code>, disables the check for an existing lifecycle policy. The
default is <code class="literal">true</code>. You need to disable this check if the Metricbeat
user connecting to a secured cluster doesn&#8217;t have the <code class="literal">read_ilm</code> privilege.</p>
<p>If you set this option to <code class="literal">false</code>, set <code class="literal">setup.ilm.overwrite: true</code> so the
lifecycle policy can be installed.</p>
<div class="position-relative"><h4><a id="setup-ilm-overwrite-option"></a><code class="literal">setup.ilm.overwrite</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.5/libbeat/docs/shared-ilm.asciidoc">edit</a></div>
<p>When set to <code class="literal">true</code>, the lifecycle policy is overwritten at startup. The default
is <code class="literal">false</code>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="configuration-output-codec.html">« Change the output codec</a>
</span>
<span class="next">
<a href="configuration-ssl.html">Specify SSL settings »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
