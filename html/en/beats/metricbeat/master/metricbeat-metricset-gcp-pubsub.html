<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Google Cloud Platform pubsub metricset | Metricbeat Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Metricbeat Reference [master]"/>
<link rel="up" href="metricbeat-module-gcp.html" title="Google Cloud Platform module"/>
<link rel="prev" href="metricbeat-metricset-gcp-metrics.html" title="Google Cloud Platform metrics metricset"/>
<link rel="next" href="metricbeat-metricset-gcp-storage.html" title="Google Cloud Platform storage metricset"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/master"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="metricbeat-modules.html">Modules</a></span>
»
<span class="breadcrumb-link"><a href="metricbeat-module-gcp.html">Google Cloud Platform module</a></span>
»
<span class="breadcrumb-node">Google Cloud Platform pubsub metricset</span>
</div>
<div class="navheader">
<span class="prev">
<a href="metricbeat-metricset-gcp-metrics.html">« Google Cloud Platform metrics metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-gcp-storage.html">Google Cloud Platform storage metricset »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="metricbeat-metricset-gcp-pubsub"></a>Google Cloud Platform pubsub metricset<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/metricbeat/docs/modules/gcp/pubsub.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>PubSub metricsetf fetches metrics from <a href="https://cloud.google.com/pubsub/" class="ulink" target="_top">Pub/Sub</a> topics and subscriptions in Google Cloud Platform.</p>
<p>The <code class="literal">pubsub</code> metricset contains all GA stage metrics exported from the <a href="https://cloud.google.com/monitoring/api/metrics_gcp#gcp-pubsub" class="ulink" target="_top">Stackdriver API</a>. The field names have been left untouched for people already familiar with them.</p>
<p>No special permissions are needed apart from the ones detailed in the module section of the docs.</p>
<h3><a id="_metrics_8"></a>Metrics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/x-pack/metricbeat/module/gcp/pubsub/_meta/docs.asciidoc">edit</a></h3>
<p>Here is a list of metrics collected by <code class="literal">pubsub</code> metricset:</p>
<h4><a id="_snapshot_metrics"></a>Snapshot Metrics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/x-pack/metricbeat/module/gcp/pubsub/_meta/docs.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">pubsub.snapshot.backlog_bytes</code>: Total byte size of the messages retained in a snapshot.
</li>
<li class="listitem">
<code class="literal">pubsub.snapshot.backlog_bytes_by_region</code>: Total byte size of the messages retained in a snapshot, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.snapshot.config_updates_count</code>: Cumulative count of configuration changes, grouped by operation type and result.
</li>
<li class="listitem">
<code class="literal">pubsub.snapshot.num_messages</code>: Number of messages retained in a snapshot. Sampled every 60 seconds.
</li>
<li class="listitem">
<code class="literal">pubsub.snapshot.num_messages_by_region</code>: Number of messages retained in a snapshot, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.snapshot.oldest_message_age</code>: Age (in seconds) of the oldest message retained in a snapshot.
</li>
<li class="listitem">
<code class="literal">pubsub.snapshot.oldest_message_age_by_region</code>: Age (in seconds) of the oldest message retained in a snapshot, broken down by Cloud region.
</li>
</ul>
</div>
<h4><a id="_subscription_metrics"></a>Subscription Metrics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/x-pack/metricbeat/module/gcp/pubsub/_meta/docs.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">pubsub.subscription.ack_message_count</code>: Cumulative count of messages acknowledged by Acknowledge requests, grouped by delivery type.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.backlog_bytes</code>: Total byte size of the unacknowledged messages (a.k.a. backlog messages) in a subscription.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.byte_cost</code>: Cumulative cost of operations, measured in bytes. This is used to measure quota utilization.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.config_updates_count</code>: Cumulative count of configuration changes for each subscription, grouped by operation type and result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.dead_letter_message_count</code>: Cumulative count of messages published to dead letter topic, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.mod_ack_deadline_message_count</code>: Cumulative count of messages whose deadline was updated by ModifyAckDeadline requests, grouped by delivery type.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.mod_ack_deadline_message_operation_count</code>: Cumulative count of ModifyAckDeadline message operations, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.mod_ack_deadline_request_count</code>: Cumulative count of ModifyAckDeadline requests, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.num_outstanding_messages</code>: Number of messages delivered to a subscription&#8217;s push endpoint, but not yet acknowledged.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.num_undelivered_messages</code>: Number of unacknowledged messages (a.k.a. backlog messages) in a subscription.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.oldest_retained_acked_message_age</code>: Age (in seconds) of the oldest acknowledged message retained in a subscription.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.oldest_retained_acked_message_age_by_region</code>: Age (in seconds) of the oldest acknowledged message retained in a subscription, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.oldest_unacked_message_age</code>: Age (in seconds) of the oldest unacknowledged message (a.k.a. backlog message) in a subscription.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.oldest_unacked_message_age_by_region</code>: Age (in seconds) of the oldest unacknowledged message in a subscription, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.pull_ack_message_operation_count</code>: Cumulative count of acknowledge message operations, grouped by result. For a definition of message operations, see Cloud Pub/Sub metric subscription/mod_ack_deadline_message_operation_count.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.pull_ack_request_count</code>: Cumulative count of acknowledge requests, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.pull_message_operation_count</code>: Cumulative count of pull message operations, grouped by result. For a definition of message operations, see Cloud Pub/Sub metric subscription/mod_ack_deadline_message_operation_count.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.pull_request_count</code>: Cumulative count of pull requests, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.push_request_count</code>: Cumulative count of push attempts, grouped by result. Unlike pulls, the push server implementation does not batch user messages. So each request only contains one user message. The push server retries on errors, so a given user message can appear multiple times.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.retained_acked_bytes</code>: otal byte size of the acknowledged messages retained in a subscription.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.retained_acked_bytes_by_region</code>: Total byte size of the acknowledged messages retained in a subscription, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.seek_request_count</code>: Cumulative count of seek attempts, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.sent_message_count</code>: Cumulative count of messages sent by Cloud Pub/Sub to subscriber clients, grouped by delivery type.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.streaming_pull_ack_message_operation_count</code>: Cumulative count of StreamingPull acknowledge message operations, grouped by result. For a definition of message operations, see Cloud Pub/Sub metric subscription/mod_ack_deadline_message_operation_count.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.streaming_pull_ack_request_count</code>: Cumulative count of streaming pull requests with non-empty acknowledge ids, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.streaming_pull_message_operation_count</code>: Cumulative count of streaming pull message operations, grouped by result. For a definition of message operations, see Cloud Pub/Sub metric &lt;code&gt;subscription/mod_ack_deadline_message_operation_count
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.streaming_pull_mod_ack_deadline_message_operation_count</code>: Cumulative count of StreamingPull ModifyAckDeadline operations, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.streaming_pull_mod_ack_deadline_request_count</code>: Cumulative count of streaming pull requests with non-empty ModifyAckDeadline fields, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.streaming_pull_response_count</code>: Cumulative count of streaming pull responses, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.subscription.unacked_bytes_by_region</code>: Total byte size of the unacknowledged messages in a subscription, broken down by Cloud region.
</li>
</ul>
</div>
<h4><a id="_topic_metrics"></a>Topic Metrics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/x-pack/metricbeat/module/gcp/pubsub/_meta/docs.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">pubsub.topic.byte_cost</code>: Cost of operations, measured in bytes. This is used to measure utilization for quotas.
</li>
<li class="listitem">
<code class="literal">pubsub.topic.config_updates_count</code>: Cumulative count of configuration changes, grouped by operation type and result.
</li>
<li class="listitem">
<code class="literal">pubsub.topic.oldest_retained_acked_message_age_by_region</code>: Age (in seconds) of the oldest acknowledged message retained in a topic, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.topic.oldest_unacked_message_age_by_region</code>: Age (in seconds) of the oldest unacknowledged message in a topic, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.topic.retained_acked_bytes_by_region</code>: Total byte size of the acknowledged messages retained in a topic, broken down by Cloud region.
</li>
<li class="listitem">
<code class="literal">pubsub.topic.send_message_operation_count</code>: Cumulative count of publish message operations, grouped by result. For a definition of message operations, see Cloud Pub/Sub metric subscription/mod_ack_deadline_message_operation_count.
</li>
<li class="listitem">
<code class="literal">pubsub.topic.send_request_count</code>: Cumulative count of publish requests, grouped by result.
</li>
<li class="listitem">
<code class="literal">pubsub.topic.unacked_bytes_by_region</code>: Total byte size of the unacknowledged messages in a topic, broken down by Cloud region.
</li>
</ul>
</div>
<p>This is a default metricset. If the host module is unconfigured, this metricset is enabled by default.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fields_91"></a>Fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/metricbeat/docs/modules/gcp/pubsub.asciidoc">edit</a></h3>
</div></div></div>
<p>For a description of each field in the metricset, see the
<a class="xref" href="exported-fields-gcp.html" title="Google Cloud Platform fields">exported fields</a> section.</p>
<p>Here is an example document generated by this metricset:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "@timestamp": "2017-10-12T08:05:34.853Z",
    "cloud": {
        "account": {
            "id": "elastic-observability"
        },
        "provider": "gcp"
    },
    "event": {
        "dataset": "gcp.pubsub",
        "duration": 115000,
        "module": "gcp"
    },
    "gcp": {
        "labels": {
            "resource": {
                "subscription_id": "test-subscription-1"
            }
        },
        "pubsub": {
            "subscription": {
                "backlog_bytes": {
                    "value": 0
                }
            }
        }
    },
    "metricset": {
        "name": "pubsub",
        "period": 10000
    },
    "service": {
        "type": "gcp"
    }
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="metricbeat-metricset-gcp-metrics.html">« Google Cloud Platform metrics metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-gcp-storage.html">Google Cloud Platform storage metricset »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
