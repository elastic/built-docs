<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Kibana queries and filters | Packetbeat Reference [7.8] | Elastic</title>
<link rel="home" href="index.html" title="Packetbeat Reference [7.8]"/>
<link rel="up" href="visualizing-data-packetbeat.html" title="Visualize Packetbeat data in Kibana"/>
<link rel="prev" href="customizing-discover.html" title="Customize the Discover page"/>
<link rel="next" href="troubleshooting.html" title="Troubleshoot"/>
<meta name="DC.type" content="Learn/Docs/Packetbeat/Reference/7.8"/>
<meta name="DC.subject" content="Packetbeat"/>
<meta name="DC.identifier" content="7.8"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Packetbeat Reference [7.8]</a></span>
»
<span class="breadcrumb-link"><a href="visualizing-data-packetbeat.html">Visualize Packetbeat data in Kibana</a></span>
»
<span class="breadcrumb-node">Kibana queries and filters</span>
</div>
<div class="navheader">
<span class="prev">
<a href="customizing-discover.html">« Customize the Discover page</a>
</span>
<span class="next">
<a href="troubleshooting.html">Troubleshoot »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="kibana-queries-filters"></a>Kibana queries and filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h2>
</div></div></div>
<p>This topic provides a short introduction to some useful queries for searching
Packetbeat data. For a full description of the query syntax, see
<a href="/guide/en/kibana/7.8/search.html" class="ulink" target="_top">Searching Your Data</a> in the <em>Kibana User Guide</em>.</p>
<p>In Kibana, you can filter transactions either by entering a search query or by
clicking on elements within a visualization.</p>
<h3><a id="_create_queries"></a>Create queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h3>
<p>The search field on the <span class="strong strong"><strong>Discover</strong></span> page provides a way to query a specific
subset of transactions from the selected time frame. It allows boolean
operators, wildcards, and field filtering. For example, if you want to find the
HTTP redirects, you can search for <code class="literal">http.response.status_code: 302</code>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="./images/kibana-query-filtering.png" alt="Kibana query">
</div>
</div>
<h4><a id="_string_queries"></a>String queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h4>
<p>A query may consist of one or more words or a phrase. A phrase is a
group of words surrounded by double quotation marks, such as <code class="literal">"test search"</code>.</p>
<p>To search for all HTTP requests initiated by Mozilla Web browser version 5.0:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">"Mozilla/5.0"</pre>
</div>
<p>To search for all the transactions that contain the following message:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">"Cannot change the info of a user"</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To search for an exact string, you need to wrap the string in double
quotation marks. Without quotation marks, the search in the example would match
any documents containing one of the following words: "Cannot" OR "change" OR
"the" OR "info" OR "a" OR "user".</p>
</div>
</div>
<p>To search for all transactions with the "chunked" encoding:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">"Transfer-Encoding: chunked"</pre>
</div>
<h4><a id="_field_based_queries"></a>Field-based queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h4>
<p>Kibana allows you to search specific fields.</p>
<p>To view HTTP transactions only:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">type: http</pre>
</div>
<p>To view failed transactions only:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">status: Error</pre>
</div>
<p>To view INSERT queries only:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">method: INSERT</pre>
</div>
<h4><a id="_regexp_queries"></a>Regexp queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h4>
<p>Kibana supports regular expression for filters and expressions. For example,
to search for all HTTP responses with JSON as the returned value type:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">http.response_headers.content_type: *json</pre>
</div>
<p>See
<a href="/guide/en/elasticsearch/reference/7.8/query-dsl-regexp-query.html" class="ulink" target="_top">Elasticsearch regexp query</a> for more details
about the syntax.</p>
<h4><a id="_range_queries"></a>Range queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h4>
<p>Range queries allow a field to have values between the lower and upper bounds.
The interval can include or exclude the bounds depending on the type of
brackets that you use.</p>
<p>To search for slow transactions with a response time greater than or equal to
10ms:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">event.duration: [10000000 TO *]</pre>
</div>
<p>To search for slow transactions with a response time greater than 10ms:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">responsetime: {10000000 TO *}</pre>
</div>
<h4><a id="_boolean_queries"></a>Boolean queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h4>
<p>Boolean operators (AND, OR, NOT) allow combining multiple sub-queries through
logic operators.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Operators such as AND, OR, and NOT must be capitalized.</p>
</div>
</div>
<p>To search for all transactions except MySQL transactions:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">NOT type: mysql</pre>
</div>
<p>To search for all MySQL INSERT queries with errors:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">type: mysql AND method: INSERT AND status: Error</pre>
</div>
<p>Kibana Query Language (KQL) also supports parentheses to group sub-queries.</p>
<p>To search for either INSERT or UPDATE queries with a response time greater
than or equal to 30ms:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">(method: INSERT OR method: UPDATE) AND event.duration &gt;= 30000000</pre>
</div>
<h3><a id="_create_filters"></a>Create filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/7.8/packetbeat/docs/filtering.asciidoc">edit</a></h3>
<p>In Kibana, you can also filter transactions by clicking on elements within a
visualization. For example, to filter for all the HTTP redirects that are coming
from a specific IP and port, click the <span class="strong strong"><strong>Filter for value</strong></span>
<span class="image"><img src="./images/filterforval_icon.png" alt="filterforval icon"></span> icon next to the <code class="literal">client.ip</code>
and <code class="literal">client.port</code> fields in the transaction detail table. To exclude the HTTP
redirects coming from the IP and port, click the <span class="strong strong"><strong>Filter out value</strong></span>
<span class="image"><img src="./images/filteroutval_icon.png" alt="filteroutval icon"></span> icon instead.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="./images/filter_from_context.png" alt="Filter from context">
</div>
</div>
<p>The selected filters appear under the search box.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="./images/kibana-filters.png" alt="Kibana filters">
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="customizing-discover.html">« Customize the Discover page</a>
</span>
<span class="next">
<a href="troubleshooting.html">Troubleshoot »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
