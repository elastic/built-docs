<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Load the Elasticsearch index template | Packetbeat Reference [7.10] | Elastic</title>
<link rel="home" href="index.html" title="Packetbeat Reference [7.10]"/>
<link rel="up" href="howto-guides.html" title="How to guides"/>
<link rel="prev" href="howto-guides.html" title="How to guides"/>
<link rel="next" href="change-index-name.html" title="Change the index name"/>
<meta name="DC.type" content="Learn/Docs/Packetbeat/Reference/7.10"/>
<meta name="DC.subject" content="Packetbeat"/>
<meta name="DC.identifier" content="7.10"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Packetbeat Reference [7.10]</a></span>
»
<span class="breadcrumb-link"><a href="howto-guides.html">How to guides</a></span>
»
<span class="breadcrumb-node">Load the Elasticsearch index template</span>
</div>
<div class="navheader">
<span class="prev">
<a href="howto-guides.html">« How to guides</a>
</span>
<span class="next">
<a href="change-index-name.html">Change the index name »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="packetbeat-template"></a>Load the Elasticsearch index template<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.10/libbeat/docs/howto/load-index-templates.asciidoc">edit</a></h2>
</div></div></div>
<p>Elasticsearch uses <a href="/guide/en/elasticsearch/reference/7.10/indices-templates.html" class="ulink" target="_top">index templates</a> to define:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Settings that control the behavior of your indices. The settings include the
lifecycle policy used to manage indices as they grow and age.
</li>
<li class="listitem">
Mappings that determine how fields are analyzed. Each mapping sets the
<a href="/guide/en/elasticsearch/reference/7.10/mapping-types.html" class="ulink" target="_top">Elasticsearch datatype</a> to use for a specific data field.
</li>
</ul>
</div>
<p>The recommended index template file for Packetbeat is installed by the
Packetbeat packages. If you accept the default configuration in the
<code class="literal">packetbeat.yml</code> config file, Packetbeat loads the template automatically
after successfully connecting to Elasticsearch. If the template already exists,
it&#8217;s not overwritten unless you configure Packetbeat to do so.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>A connection to Elasticsearch is required to load the index template. If
the output is not Elasticsearch (or Elasticsearch Service), you must
<a class="xref" href="packetbeat-template.html#load-template-manually" title="Load the index template manually">load the template manually</a>.</p>
</div>
</div>
<p>This page shows how to change the default template loading behavior to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="packetbeat-template.html#load-custom-template" title="Load your own index template">Load your own index template</a>
</li>
<li class="listitem">
<a class="xref" href="packetbeat-template.html#overwrite-template" title="Overwrite an existing index template">Overwrite an existing index template</a>
</li>
<li class="listitem">
<a class="xref" href="packetbeat-template.html#disable-template-loading" title="Disable automatic index template loading">Disable automatic index template loading</a>
</li>
<li class="listitem">
<a class="xref" href="packetbeat-template.html#load-template-manually" title="Load the index template manually">Load the index template manually</a>
</li>
</ul>
</div>
<p>For a full list of template setup options, see <a class="xref" href="configuration-template.html" title="Configure Elasticsearch index template loading"><em>Elasticsearch index template</em></a>.</p>
<h3><a id="load-custom-template"></a>Load your own index template<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.10/libbeat/docs/howto/load-index-templates.asciidoc">edit</a></h3>
<p>To load your own index template, set the following options:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">setup.template.name: "your_template_name"
setup.template.fields: "path/to/fields.yml"</pre>
</div>
<p>If the template already exists, it’s not overwritten unless you configure
Packetbeat to do so.</p>
<h3><a id="overwrite-template"></a>Overwrite an existing index template<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.10/libbeat/docs/howto/load-index-templates.asciidoc">edit</a></h3>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not enable this option for more than one instance of Packetbeat. If you start
multiple instances at the same time, it can overload your Elasticsearch with too many
template update requests.</p>
</div>
</div>
<p>To overwrite a template that&#8217;s already loaded into Elasticsearch, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">setup.template.overwrite: true</pre>
</div>
<h3><a id="disable-template-loading"></a>Disable automatic index template loading<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.10/libbeat/docs/howto/load-index-templates.asciidoc">edit</a></h3>
<p>You may want to disable automatic template loading if you&#8217;re using an output
other than Elasticsearch and need to load the template manually. To disable automatic
template loading, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">setup.template.enabled: false</pre>
</div>
<p>If you disable automatic template loading, you must load the index template
manually.</p>
<h3><a id="load-template-manually"></a>Load the index template manually<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.10/libbeat/docs/howto/load-index-templates.asciidoc">edit</a></h3>
<p>To load the index template manually, run the <a class="xref" href="command-line-options.html#setup-command" title="setup command"><code class="literal">setup</code></a> command.
A connection to Elasticsearch is required.  If another output is enabled, you need to
temporarily disable that output and enable Elasticsearch by using the <code class="literal">-E</code> option.
The examples here assume that Logstash output is enabled.
You can omit the <code class="literal">-E</code> flags if Elasticsearch output is already enabled.</p>
<p>If you are connecting to a secured Elasticsearch cluster, make sure you&#8217;ve
configured credentials as described in the <a class="xref" href="packetbeat-installation-configuration.html" title="Packetbeat quick start: installation and configuration"><em>Quick start: installation and configuration</em></a>.</p>
<p>If the host running Packetbeat does not have direct connectivity to
Elasticsearch, see <a class="xref" href="packetbeat-template.html#load-template-manually-alternate" title="Load the index template manually (alternate method)">Load the index template manually (alternate method)</a>.</p>
<p>To load the template, use the appropriate command for your system.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Use <code class="literal">sudo</code> to run these commands if the config file is owned by root.</p>
</div>
</div>
<p><span class="strong strong"><strong>deb and rpm:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">packetbeat setup --index-management -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["localhost:9200"]'</pre>
</div>
<p><span class="strong strong"><strong>mac:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./packetbeat setup --index-management -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["localhost:9200"]'</pre>
</div>
<p><span class="strong strong"><strong>brew:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">packetbeat setup --index-management -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["localhost:9200"]'</pre>
</div>
<p><span class="strong strong"><strong>linux:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./packetbeat setup --index-management -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["localhost:9200"]'</pre>
</div>
<p><span class="strong strong"><strong>docker:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run docker.elastic.co/beats/packetbeat:7.10.0 setup --index-management -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["localhost:9200"]'</pre>
</div>
<p><span class="strong strong"><strong>win:</strong></span></p>
<p>Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).</p>
<p>From the PowerShell prompt, change to the directory where you installed Packetbeat,
and run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">PS &gt; .\packetbeat.exe setup --index-management -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["localhost:9200"]'</pre>
</div>
<h4><a id="force-kibana-new"></a>Force Kibana to look at newest documents<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.10/libbeat/docs/howto/load-index-templates.asciidoc">edit</a></h4>
<p>If you&#8217;ve already used Packetbeat to index data into Elasticsearch,
the index may contain old documents. After you load the index template,
you can delete the old documents from <code class="literal">packetbeat-*</code> to force Kibana to look
at the newest documents.</p>
<p>Use this command:</p>
<p><span class="strong strong"><strong>deb and rpm:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -XDELETE 'http://localhost:9200/packetbeat-*'</pre>
</div>
<p><span class="strong strong"><strong>mac:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -XDELETE 'http://localhost:9200/packetbeat-*'</pre>
</div>
<p><span class="strong strong"><strong>linux:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -XDELETE 'http://localhost:9200/packetbeat-*'</pre>
</div>
<p><span class="strong strong"><strong>win:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">PS &gt; Invoke-RestMethod -Method Delete "http://localhost:9200/packetbeat-*"</pre>
</div>
<p>This command deletes all indices that match the pattern <code class="literal">packetbeat-*</code>.
Before running this command, make sure you want to delete all indices that match
the pattern.</p>
<h3><a id="load-template-manually-alternate"></a>Load the index template manually (alternate method)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.10/libbeat/docs/howto/load-index-templates.asciidoc">edit</a></h3>
<p>If the host running Packetbeat does not have direct connectivity to
Elasticsearch, you can export the index template to a file, move it to a
machine that does have connectivity, and then install the template manually.</p>
<p>To export the index template, run:</p>
<p><span class="strong strong"><strong>deb and rpm:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">packetbeat export template &gt; packetbeat.template.json</pre>
</div>
<p><span class="strong strong"><strong>mac:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./packetbeat export template &gt; packetbeat.template.json</pre>
</div>
<p><span class="strong strong"><strong>brew:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">packetbeat export template &gt; packetbeat.template.json</pre>
</div>
<p><span class="strong strong"><strong>linux:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./packetbeat export template &gt; packetbeat.template.json</pre>
</div>
<p><span class="strong strong"><strong>win:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">PS &gt; .\packetbeat.exe export template --es.version 7.10.0 | Out-File -Encoding UTF8 packetbeat.template.json</pre>
</div>
<p>To install the template, run:</p>
<p><span class="strong strong"><strong>deb and rpm:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -XPUT -H 'Content-Type: application/json' http://localhost:9200/_template/packetbeat-7.10.0 -d@packetbeat.template.json</pre>
</div>
<p><span class="strong strong"><strong>mac:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -XPUT -H 'Content-Type: application/json' http://localhost:9200/_template/packetbeat-7.10.0 -d@packetbeat.template.json</pre>
</div>
<p><span class="strong strong"><strong>linux:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl -XPUT -H 'Content-Type: application/json' http://localhost:9200/_template/packetbeat-7.10.0 -d@packetbeat.template.json</pre>
</div>
<p><span class="strong strong"><strong>win:</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">PS &gt; Invoke-RestMethod -Method Put -ContentType "application/json" -InFile packetbeat.template.json -Uri http://localhost:9200/_template/packetbeat-7.10.0</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="howto-guides.html">« How to guides</a>
</span>
<span class="next">
<a href="change-index-name.html">Change the index name »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
