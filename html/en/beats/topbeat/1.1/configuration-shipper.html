<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Shipper | Topbeat Reference [1.1] | Elastic</title>
<link rel="home" href="index.html" title="Topbeat Reference [1.1]"/>
<link rel="up" href="topbeat-configuration-options.html" title="Configuration Options"/>
<link rel="prev" href="configuration-output-tls.html" title="TLS Options"/>
<link rel="next" href="configuration-logging.html" title="Logging (Optional)"/>
<meta name="DC.type" content="Learn/Docs/Legacy/Topbeat/Reference/1.1"/>
<meta name="DC.subject" content="Topbeat"/>
<meta name="DC.identifier" content="1.1"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
Topbeat was replaced by <a href="https://www.elastic.co/products/beats/metricbeat">
Metricbeat</a> in 5.0. To learn more about Metricbeat, see the
<a href="https://www.elastic.co/guide/en/beats/metricbeat/current/index.html">
Metricbeat documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Topbeat Reference [1.1]</a></span>
»
<span class="breadcrumb-link"><a href="reference.html">Reference</a></span>
»
<span class="breadcrumb-link"><a href="topbeat-configuration-options.html">Configuration Options</a></span>
»
<span class="breadcrumb-node">Shipper</span>
</div>
<div class="navheader">
<span class="prev">
<a href="configuration-output-tls.html">« TLS Options</a>
</span>
<span class="next">
<a href="configuration-logging.html">Logging (Optional) »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="configuration-shipper"></a>Shipper<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h2>
</div></div></div>
<p>The <code class="literal">shipper</code> section contains configuration options for the Beat and some
general settings that control its behaviour.</p>
<p>Here is an example configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">shipper:
  # The name of the shipper that publishes the network data. It can be used to group
  # all the transactions sent by a single shipper in the web interface.
  # If this options is not defined, the hostname is used.
  #name:

  # The tags of the shipper are included in their own field with each
  # transaction published. Tags make it easy to group servers by different
  # logical properties.
  tags: ["service-X", "web-tier"]

  # Uncomment the following if you want to ignore transactions created
  # by the server on which the shipper is installed. This option is useful
  # to remove duplicates if shippers are installed on multiple servers.
  ignore_outgoing: true

  # How often (in seconds) shippers are publishing their IPs to the topology map.
  # The default is 10 seconds.
  refresh_topology_freq: 10

  # Expiration time (in seconds) of the IPs published by a shipper to the topology map.
  # All the IPs will be deleted afterwards. Note, that the value must be higher than
  # refresh_topology_freq. The default is 15 seconds.
  topology_expire: 15

  # Configure local GeoIP database support.
  # If no paths are not configured geoip is disabled.
  #geoip:
    #paths:
    #  - "/usr/share/GeoIP/GeoLiteCity.dat"
    #  - "/usr/local/var/GeoIP/GeoLiteCity.dat"</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_shipper_options"></a>Shipper Options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h3>
</div></div></div>
<p>You can specify the following options under the <code class="literal">shipper</code> section:</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_name"></a>name<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The name of the Beat. If this option is empty, the <code class="literal">hostname</code> of the server is
used. The name is included as the <code class="literal">shipper</code> field in each published transaction. You can
use the name to group all transactions sent by a single Beat.</p>
<p>At startup, each Beat can publish its IP, port, and name to Elasticsearch. This information
is stored in Elasticsearch as a network topology map that maps the IP and port
of each Beat to the name that you specify here.</p>
<p>When a Beat receives a new request and response (called a transaction), the Beat can query
Elasticsearch to see if the network topology includes the IP and port of the source
and destination servers. If this information is available, the <code class="literal">client_server</code> field in the
output is set to the name of the Beat running on the source server, and the <code class="literal">server</code> field is set to the
name of the Beat running on the destination server.</p>
<p>To use the topology map in Elasticsearch, you must enable Elasticsearch as output and set the
<code class="literal">save_topology</code> option to true.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">shipper:
  name: "my-shipper"</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_tags"></a>tags<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>A list of tags that the Beat includes in the <code class="literal">tags</code> field of each published
transaction. Tags make it easy to group servers by different logical properties.
For example, if you have a cluster of web servers, you can add the "webservers" tag
to the Beat on each server, and then use filters and queries in the
Kibana web interface to get visualisations for the whole group of servers.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">shipper:
  tags: ["my-service", "hardware", "test"]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_ignore_outgoing"></a>ignore_outgoing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>If the <code class="literal">ignore_outgoing</code> option is enabled, the Beat ignores all the
transactions initiated from the server running the Beat.</p>
<p>This is useful when two Beats publish the same transactions. Because one Beat
sees the transaction in its outgoing queue and the other sees it in its incoming
queue, you can end up with duplicate transactions. To remove the duplicates, you
can enable the <code class="literal">ignore_outgoing</code> option on one of the servers.</p>
<p>For example, in the following scenario, you see a 3-server architecture
where a Beat is installed on each server. t1 is the transaction exchanged between
Server1 and Server2, and t2 is the transaction between Server2 and Server3.</p>
<p><span class="image"><img src="./images/option_ignore_outgoing.png" alt="Beats Architecture"></span></p>
<p>By default, each transaction is indexed twice because Beat2
sees both transactions. So you would see the following published transactions
(when <code class="literal">ignore_outgoing</code> is false):</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Beat1: t1
</li>
<li class="listitem">
Beat2: t1 and t2
</li>
<li class="listitem">
Beat3: t2
</li>
</ul>
</div>
<p>To avoid duplicates, you can force your Beats to send only the incoming
transactions and ignore the transactions created by the local server. So you would
see the following published transactions (when <code class="literal">ignore_outgoing</code> is true):</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Beat1: none
</li>
<li class="listitem">
Beat2: t1
</li>
<li class="listitem">
Beat3: t2
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_refresh_topology_freq"></a>refresh_topology_freq<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The refresh interval of the topology map in
seconds. In other words, this setting specifies how often each Beat publishes its
IP addresses to the topology map. The default is 10 seconds.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_topology_expire_2"></a>topology_expire<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The expiration time for the topology in seconds. This is
useful in case a Beat stops publishing its IP addresses. The IP addresses
are removed automatically from the topology map after expiration. The default
is 15 seconds.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_queue_size"></a>queue_size<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The internal queue size for single events in the processing pipeline. The default
value is 1000.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_bulk_queue_size"></a>bulk_queue_size<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>(DO NOT TOUCH) The internal queue size for bulk events in the processing pipeline. The default value is 0.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_geoip_paths"></a>geoip.paths<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/1.1/libbeat/docs/shipperconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>This configuration option is currently used by Packetbeat only.</p>
<p>The paths to search for GeoIP databases. The Beat loads the first installed GeoIP database
that if finds. Then, for each transaction, the Beat exports the GeoIP location of the client.</p>
<p>The recommended values for geoip.paths are <code class="literal">/usr/share/GeoIP/GeoLiteCity.dat</code>
and <code class="literal">/usr/local/var/GeoIP/GeoLiteCity.dat</code>.</p>
<p><span class="strong strong"><strong>Important</strong></span>: For GeoIP support to function correctly, the
<a href="https://dev.maxmind.com/geoip/legacy/geolite/" class="ulink" target="_top">GeoLite City database</a> is required.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="configuration-output-tls.html">« TLS Options</a>
</span>
<span class="next">
<a href="configuration-logging.html">Logging (Optional) »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
