<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Upgrade to Elasticsearch 7.x | Elastic Cloud Enterprise Reference [2.4] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.4]"/>
<link rel="up" href="ece-upgrade-deployment.html" title="Upgrade versions"/>
<link rel="prev" href="ece-upgrading-major.html" title="Best practices for major version upgrades"/>
<link rel="next" href="ece-upgrading-v6.html" title="Upgrade to Elasticsearch 6.x"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.4"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="2.4"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [2.4]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="ece-administering-deployments.html">Administering deployments</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="ece-upgrade-deployment.html">Upgrade versions</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-upgrading-major.html">« Best practices for major version upgrades</a>
</span>
<span class="next">
<a href="ece-upgrading-v6.html">Upgrade to Elasticsearch 6.x »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-upgrading-v7"></a>Upgrade to Elasticsearch 7.x<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h2>
</div></div></div>
<p>If you have a cluster and want to upgrade to version 7.x, there are a few things you must do to prepare for the upgrade. Preparing for your upgrade ahead of time ensures that you can enjoy the new features and improved usability of Elasticsearch 7.x as quickly as possible.</p>
<h3><a id="ece_before_you_begin_19"></a>Before you begin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h3>
<p>Elastic Cloud Enterprise upgrades differ from your on-premise installation because all major configuration changes for Elasticsearch, Kibana, and the security features are handled for you.</p>
<p>When you upgrade, Elastic Cloud Enterprise automatically runs the deprecation API to retrieve information about the cluster, node, and index-level settings that need to be removed or changed. If there are any deprecation issues that would prevent the upgraded deployment from successfully performing, the upgrade fails. To resolve the deprecation issues, use the Upgrade Assistant in Kibana.</p>
<p>If your cluster does not include a Kibana instance yet, you can
<a class="xref" href="ece-manage-kibana.html" title="Manage your Kibana instance">enable Kibana first,</a>
then use the Upgrade Assistant. After you resolve the deprecation issues, try the upgrade again.</p>
<p>For more information, refer to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elastic-stack/7.0/upgrading-elastic-stack.html" class="ulink" target="_top">Upgrading the Elastic Stack</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.0/setup-upgrade.html" class="ulink" target="_top">Upgrading Elasticsearch</a>
</li>
</ul>
</div>
<h4><a id="ece_snapshot_behavior_during_upgrades"></a>Snapshot behavior during upgrades<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h4>
<p>To keep your data safe, Elastic Cloud Enterprise takes a snapshot before making any changes to your cluster. After a major version upgrade is complete, and the first successful snapshot with the new major version is available, all snapshots taken with the previous version of Elasticsearch are removed.</p>
<p>For example, before upgrading from Elasticsearch version 6.7 to version 7.x, a snapshot is taken. After the upgrade to version 7.x is complete, and a snapshot is available, all snapshots taken with version 6.x are removed.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To enable snapshots, configure the snapshot repository.</p>
</div>
</div>
<h4><a id="ece-upgrading-v7-reindex"></a>Reindex indices<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h4>
<p>Elasticsearch 7.x is compatible with indices created in version 6.0 or later. If you have indices from version 5.x or earlier, you must remove or reindex them before you upgrade.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If prompted by Elastic Cloud Enterprise, use the Upgrade Assistant in Kibana to reindex your data.</p>
</div>
</div>
<h4><a id="ece-upgrading-v7-breaking"></a>Review breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h4>
<p>Major version upgrades can include changes that expose the upgrading process to possible risk. A breaking change is the result of a functional change between major Elasticsearch versions, and requires you to perform additional steps to ensure that you can use the new version as intended.</p>
<p>For more information, refer to <a href="/guide/en/elasticsearch/reference/7.5/breaking-changes.html" class="ulink" target="_top">Breaking changes in 7.5</a>.</p>
<h4><a id="ece-upgrading-v7-issues"></a>Review the known issues<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h4>
<p>The following known issues apply to the Elastic Stack 7.x releases:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
There are deprecated APIs that are still available for use. If you see warnings in the Elastic Cloud Enterprise logs about the deprecated APIs, you can ignore them.
</li>
<li class="listitem">
Elastic Cloud Enterprise does not support the ability to upgrade to or from release candidate builds, such as 7.0.0-rc1.
</li>
<li class="listitem">
For Elasticsearch 7.8 and later the Snapshot Lifecycle Managment (SLM) api is always enabled. In past Elasticsearch versions Elastic Cloud Enterprise has proactively disabled this feature as it may conflict with automated snapshot functionality built in with Elastic Cloud Enterprise. Elastic Cloud Enterprise 2.5.0 supports integration with SLM and use it for the automated snapshots. When running Elasticsearch 7.8 or later on versions of Elastic Cloud Enterprise older than 2.5.0 then automated snapshots against repositories instrumented by Elastic Cloud Enterprise must only be configured from the ui or api in Elastic Cloud Enterprise and not through Kibana or Elasticsearch.
</li>
<li class="listitem">
For Elasticsearch 7.8 and later the Index Lifecycle Managment (ILM) API is always enabled, even if the cluster is still using the deprecated index curation. If index curation and ILM are both configured to process the same indices the outcome can be unpredictable. As other stack products default to using ILM when it is available in Elasticsearch, we strongly encourage you to <a class="xref" href="ece-migrate-index-management.html" title="Migrate to index lifecycle management">migrate to index lifecycle management</a>. It also has a superior feature set.
</li>
</ul>
</div>
<h4><a id="ece-log-in-kibana"></a>Log into Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h4>
<p>When you upgrade from version 6.7 to 7.0, you must first <a class="xref" href="ece-access-kibana.html" title="Access Kibana">log into Kibana</a> to make sure that your upgrade is successful.</p>
<h4><a id="ece-update-security-realm-settings"></a>Update the security realm settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h4>
<p>During the upgrade process, you are prompted to update the security realm settings when your <code class="literal">user_settings</code> include a <code class="literal">xpack.security.authc.realms</code> value.</p>
<p>There are two settings that prompt you to update:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the security realm settings are located in <code class="literal">user_settings_override</code>, contact support to help you upgrade.
</li>
<li class="listitem">
If the security realm settings are located in <code class="literal">user_settings</code>, you&#8217;ll receive a message that allows you modify these settings.
</li>
</ul>
</div>
<p>To modify the <code class="literal">user_settings</code>:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
On the <span class="strong strong"><strong>Update security realm settings</strong></span> window, edit the settings.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Update settings</strong></span>.
</li>
</ol>
</div>
<h4><a id="ece_a_note_about_x_pack"></a>A note about X-Pack<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.4/docs/shared/ec-ce-upgrading-v7.asciidoc">edit</a></h4>
<p><span class="strong strong"><strong>In Elasticsearch version 7.0 and later</strong></span>, the security features to keep your Elastic Cloud Enterprise deployments safe are now referred to simply as security features instead of X-Pack.</p>
<p>For information about the security features in Elasticsearch version 7.0 and earlier, refer to
<a class="xref" href="ece-securing-clusters.html" title="Secure your clusters">Secure your clusters</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ece-upgrading-major.html">« Best practices for major version upgrades</a>
</span>
<span class="next">
<a href="ece-upgrading-v6.html">Upgrade to Elasticsearch 6.x »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":false},"go":{"hasAny":false},"ruby":{"hasAny":false},"java":{"hasAny":false},"javascript":{"hasAny":false},"python":{"hasAny":false},"csharp":{"hasAny":false}}}}</script>
  </body>
</html>
