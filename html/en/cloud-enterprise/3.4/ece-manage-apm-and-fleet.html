<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Manage your APM &amp; Fleet Server (7.13+) | Elastic Cloud Enterprise Reference [3.4] | Elastic</title>
<meta class="elastic" name="content" content="Manage your APM &amp; Fleet Server (7.13+) | Elastic Cloud Enterprise Reference [3.4]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.4]"/>
<link rel="up" href="ece-administering-deployments.html" title="Administering deployments"/>
<link rel="prev" href="ece-manage-kibana.html" title="Manage your Kibana instance"/>
<link rel="next" href="ece-manage-apm.html" title="Manage your APM Server (versions before 7.13)"/>
<meta class="elastic" name="product_version" content="3.4"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.4"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.4"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.4]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-administering-deployments.html">Administering deployments</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-manage-kibana.html">« Manage your Kibana instance</a>
</span>
<span class="next">
<a href="ece-manage-apm.html">Manage your APM Server (versions before 7.13) »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-manage-apm-and-fleet"></a>Manage your APM &amp; Fleet Server (7.13+)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/shared/ec-ce-manage-apm-and-fleet.asciidoc">edit</a></h2>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Beginning with Elastic Stack version 8.0, <a class="xref" href="ece-manage-integrations-server.html" title="Manage your Integrations Server">Integrations Server</a> is replacing APM &amp; Fleet Server.
New deployments with version 8.0 will use Integrations Server automatically.
Existing deployments using APM &amp; Fleet Server will continue to use APM &amp; Fleet Server after upgrading to version 8.0.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Beginning with Elastic Stack version 7.16, the APM integration for Elastic Agent is generally available! This new APM ecosystem brings a number of new benefits to Elastic APM. Check <a href="/guide/en/apm/guide/8.8/upgrade-to-apm-integration.html" class="ulink" target="_top">Switch to the Elastic APM integration</a> to learn more.</p>
</div>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>In ECE version 2.10 with the original Elastic Stack pack version 7.14, if downloaded from the Elastic website before August 10, 2021, Fleet does not work when enabled in a deployment. To support Fleet, you can <a class="xref" href="ece-manage-elastic-stack.html" title="Manage Elastic Stack versions">get and re-upload a fresh copy</a> of the version 7.14 Elastic Stack pack to overwrite the original one. If you have existing version 7.14 deployments, then restart Fleet/APM after re-uploading the Elastic Stack pack to enable Fleet. This issue will be addressed in later stack packs and ECE versions.</p>
</div>
</div>
<p>For deployments that are version 7.13 and later, you have the option to add a combined <a href="/guide/en/apm/guide/8.8/apm-overview.html" class="ulink" target="_top">Application Performance Monitoring (APM) Server</a> and <a href="/guide/en/fleet/8.8/fleet-overview.html" class="ulink" target="_top">Fleet Server</a> to your deployment. APM allows you to monitor software services and applications in real time, turning that data into documents stored in the Elasticsearch cluster. Fleet allows you to centrally manage Elastic Agents on many hosts.</p>
<p>As part of provisioning, the APM Server and Fleet Server are already configured to work with Elasticsearch and Kibana. At the end of provisioning, you are shown the secret token to configure communication between the APM Server and the backend <a href="/guide/en/apm/agent/index.html" class="ulink" target="_top">APM Agents</a>. The APM Agents get deployed within your services and applications.</p>
<p>From the deployment <span class="strong strong"><strong>APM &amp; Fleet</strong></span> page you can also:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Get the URL to complete the APM agent configuration.
</li>
<li class="listitem">
Use the <code class="literal">elastic</code> credentials to go to the APM area of Kibana. Step by step instructions to configure a variety of agents are available right in Kibana. After that, you can use the pre-built, dedicated dashboards and the APM tab to visualize the data that is sent back from the APM Agents.
</li>
<li class="listitem">
Use the <code class="literal">elastic</code> credentials to go to the Fleet area of Kibana. Step by step instructions to download and install Elastic Agent on your hosts are available right in Kibana. After that, you can manage enrolled Elastic Agents on the <span class="strong strong"><strong>Agents</strong></span> tab, and the data shipped back from those Elastic Agents on the <span class="strong strong"><strong>Data streams</strong></span> tab.
</li>
<li class="listitem">
<p>Reset the APM secret token.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Resetting the token disrupts your APM service and restarts the server. When the server restarts, you&#8217;ll need to update all of your agents with the new token.</p>
</div>
</div>
</li>
<li class="listitem">
Access the APM &amp; Fleet logs and metrics.
</li>
<li class="listitem">
Stop and restart your APM &amp; Fleet Server.
</li>
<li class="listitem">
Upgrade your APM &amp; Fleet Server version if it is out of sync with your Elasticsearch cluster.
</li>
<li class="listitem">
Fully remove the APM &amp; Fleet Server, delete it from the disk, and stop the charges.
</li>
</ul>
</div>
<h1><a id="ece-upgrade-apm-stack-8"></a>Upgrading to Elastic Stack 8.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/shared/ec-ce-manage-apm-and-fleet.asciidoc">edit</a></h1>
<p>The following APM settings have been removed in Elastic Stack version 8.0.
This change is only relevant to users upgrading a standalone (legacy) deployment of APM Server to Elastic Stack version 8.0.
Check <a class="xref" href="ece-manage-apm-settings.html" title="Add APM user settings">Add APM user settings</a> for more details.</p>
<div class="pre_wrapper lang-yml">
<pre class="programlisting prettyprint lang-yml">apm-server.api_key.enabled
apm-server.api_key.limit
apm-server.ilm.*
apm-server.frontend.*
apm-server.register.*
apm-server.rum.allow_service_names
apm-server.rum.event_rate.lru_size
apm-server.rum.event_rate.limit
apm-server.rum.rate_limit
output.elasticsearch.bulk_max_size
output.elasticsearch.index
output.elasticsearch.indices
output.elasticsearch.pipeline
output.elasticsearch.pipelines
output.elasticsearch.worker
setup.*
queue.*</pre>
</div>
<h2><a id="ece-enable-fleet-on-upgrade"></a>Upgrading to ECE 2.10<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/shared/ec-ce-manage-apm-and-fleet.asciidoc">edit</a></h2>
<p>When you upgrade an ECE installation to version 2.10 or higher, you need to apply a no-op plan to any existing APM-enabled, version 7.13+ deployment to make Fleet Server available. To apply a no-op plan, perform a rolling update on your deployment without applying any configuration changes:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
On the <span class="strong strong"><strong>Deployments</strong></span> page, select your deployment.
</li>
<li class="listitem">
From your deployment menu, go to the <span class="strong strong"><strong>Edit</strong></span> page.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Save</strong></span>.
</li>
</ol>
</div>
<h2><a id="ece-fleet-routing"></a>Routing to Fleet Server<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/shared/ec-ce-manage-apm-and-fleet.asciidoc">edit</a></h2>
<p>Because Fleet Server and APM Server live on the same instance, an additional part is added to the Fleet Server hostname to help distinguish between the traffic to each. If you have not configured support for deployment aliases, your certificate may not be configured to expect this extra part.</p>
<p>Data is routed to APM using the same hostname <code class="literal">&lt;&lt;apm-id&gt;&gt;.&lt;&lt;your-domain&gt;&gt;</code>, but two new endpoints are introduced:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">&lt;&lt;deployment-id&gt;&gt;.apm.&lt;&lt;your-domain&gt;&gt;</code> as an alternate endpoint for APM
</li>
<li class="listitem">
<code class="literal">&lt;&lt;deployment-id&gt;&gt;.fleet.&lt;&lt;your-domain&gt;&gt;</code> is the <em>only</em> way of routing data to Fleet Server
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>New certificates must be generated for both these endpoints. Check <a class="xref" href="ece-configuring-deployment-aliases.html" title="Enable custom endpoint aliases">Enable custom endpoint aliases</a> for more details.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ece-manage-kibana.html">« Manage your Kibana instance</a>
</span>
<span class="next">
<a href="ece-manage-apm.html">Manage your APM Server (versions before 7.13) »</a>
</span>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":false},"go":{"hasAny":false},"ruby":{"hasAny":false},"java":{"hasAny":false},"javascript":{"hasAny":false},"python":{"hasAny":false},"csharp":{"hasAny":false}}}}</script>
  </body>
</html>
