<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Migrating data | Elastic Cloud Enterprise Reference [3.5] | Elastic</title>
<meta class="elastic" name="content" content="Migrating data | Elastic Cloud Enterprise Reference [3.5]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.5]"/>
<link rel="up" href="ece-cloud-ingest-data.html" title="Adding data to Elasticsearch"/>
<link rel="prev" href="ece-cloud-ingest-data.html" title="Adding data to Elasticsearch"/>
<link rel="next" href="ece-ingest-guides.html" title="Ingesting data from your application"/>
<meta class="elastic" name="product_version" content="3.5"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.5"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.5"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="ece-cloud-ingest-data.html">« Adding data to Elasticsearch</a>
</span>
<span class="next">
<a href="ece-ingest-guides.html">Ingesting data from your application »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.5]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-stack-getting-started.html">Working with deployments</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-cloud-ingest-data.html">Adding data to Elasticsearch</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Migrating data</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-81/docs/shared/ec-ce-cloud-ingest-data.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-migrating-data"></a>Migrating data<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-81/docs/shared/ec-ce-cloud-ingest-data.asciidoc">edit</a></h2>
</div></div></div>
<p>If you want to move your existing Elasticsearch data into your new infrastructure, check out the <a class="xref" href="ece-migrating-data.html#ece-migrate-data2" title="Migrate your Elasticsearch data">migration options</a>. You&#8217;ll find instructions to guide you through:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Migrating data <a class="xref" href="ece-migrating-data.html#ece-index-source" title="Index from the source">from its original source</a>
</li>
<li class="listitem">
Reindexing data <a class="xref" href="ece-migrating-data.html#ece-reindex-remote" title="Reindex from a remote cluster">from a remote Elasticsearch cluster</a>
</li>
<li class="listitem">
Restoring data <a class="xref" href="ece-migrating-data.html#ece-restore-snapshots" title="Restore from a snapshot">from a snapshot</a>
</li>
</ul>
</div>
<h3><a id="ece-migrate-data2"></a>Migrate your Elasticsearch data<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-81/docs/shared/ec-ce-migrating-data.asciidoc">edit</a></h3>
<p>You might have switched to Elastic Cloud Enterprise for any number of reasons and you&#8217;re likely wondering how to get your existing Elasticsearch data into your new infrastructure. Along with easily creating as many new deployments with Elasticsearch clusters that you need, you have several options for moving your data over. Choose the option that works best for you:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Index your data from the original source, which is the simplest method and provides the greatest flexibility for the Elasticsearch version and ingestion method.
</li>
<li class="listitem">
Reindex from a remote cluster, which rebuilds the index from scratch.
</li>
<li class="listitem">
Restore from a snapshot, which copies the existing indices.
</li>
</ul>
</div>
<p>One of the many advantages of Elastic Cloud Enterprise is that you can spin up a deployment quickly, try out something, and then delete it if you don&#8217;t like it. This flexibility provides the freedom to experiment while your existing production cluster continues to work.</p>
<h4><a id="ece_before_you_begin_11"></a>Before you begin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-81/docs/shared/ec-ce-migrating-data.asciidoc">edit</a></h4>
<p>Depending on which option that you choose, you might have limitations or need to do some preparation beforehand.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Indexing from the source
</span>
</dt>
<dd>
The new cluster must be the same size as your old one, or larger, to accommodate the data.
</dd>
<dt>
<span class="term">
Reindex from a remote cluster
</span>
</dt>
<dd>
The new cluster must be the same size as your old one, or larger, to accommodate the data. Depending on your security settings for your old cluster, you might need to temporarily allow TCP traffic on port 9243 for this procedure.
</dd>
<dt>
<span class="term">
Restore from a snapshot
</span>
</dt>
<dd>
The new cluster must be the same size as your old one, or larger, to accommodate the data. The new cluster must also be an Elasticsearch version that is compatible with the old cluster (check <a href="/guide/en/elasticsearch/reference/8.15/snapshot-restore.html#snapshot-restore-version-compatibility" class="ulink" target="_top">Elasticsearch snapshot version compatibility</a> for details). If you have not already done so, you will need to <a href="/guide/en/elasticsearch/reference/8.15/modules-snapshots.html" class="ulink" target="_top">set up snapshots for your old cluster</a> using a repository that can be accessed from the new cluster.
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before you migrate your Elasticsearch data, <a href="/guide/en/elasticsearch/reference/8.15/mapping.html" class="ulink" target="_top">define your index mappings</a> on the new cluster. Index mappings are unable to migrate during reindex operations.</p>
</div>
</div>
<h4><a id="ece-index-source"></a>Index from the source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-81/docs/shared/ec-ce-migrating-data.asciidoc">edit</a></h4>
<p>If you still have access to the original data source, outside of your old Elasticsearch cluster, you can load the data from there. This might be the simplest option, allowing you to choose the Elasticsearch version and take advantage of the latest features. You have the option to use any ingestion method that you want&#8212;&#8203;Logstash, Beats, the Elasticsearch clients, or whatever works best for you.</p>
<p>If the original source isn&#8217;t available or has other issues that make it non-viable, there are still two more migration options, getting the data from a remote cluster or restoring from a snapshot.</p>
<h4><a id="ece-reindex-remote"></a>Reindex from a remote cluster<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-81/docs/shared/ec-ce-migrating-data.asciidoc">edit</a></h4>
<p>Through the Elasticsearch reindex API, available in version 5.x and later, you can connect your new Elastic Cloud Enterprise deployment remotely to your old Elasticsearch cluster. This pulls the data from your old cluster and indexes it into your new one. Reindexing essentially rebuilds the index from scratch and it can be more resource intensive to run.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="ece-login.html" title="Log into the Cloud UI">Log into the Cloud UI</a>.
</li>
<li class="listitem">
Select a deployment or create one.
</li>
<li class="listitem">
<p>If the old Elasticsearch cluster is on a remote host, add an Elasticsearch <code class="literal">reindex.remote.whitelist</code> user setting:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From your deployment menu, go to the <span class="strong strong"><strong>Edit</strong></span> page.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Elasticsearch</strong></span> section, select <span class="strong strong"><strong>Manage user settings and extensions</strong></span>. For deployments with existing user settings, you may have to expand the <span class="strong strong"><strong>Edit elasticsearch.yml</strong></span> caret for each node type instead.
</li>
<li class="listitem">
<p>Add the following user setting:</p>
<p><code class="literal">reindex.remote.whitelist: [REMOTE_HOST:PORT]</code></p>
<p>where <code class="literal">REMOTE_HOST</code> and <code class="literal">PORT</code> are the endpoint of the Elasticsearch cluster that you are reindexing from, without the <code class="literal">https://</code> prefix. For example:</p>
<p><code class="literal">reindex.remote.whitelist: [81693ca13302469c8cbca193625c941c.us-east-1.aws.found.io:9243]</code></p>
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Save changes</strong></span>.
</li>
</ol>
</div>
</li>
<li class="listitem">
From the <span class="strong strong"><strong>API Console</strong></span> or in the Kibana Console app, create the destination index on Elastic Cloud Enterprise.
</li>
<li class="listitem">
<p>Copy the index from the remote cluster:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">POST _reindex
{
  "source": {
    "remote": {
      "host": "https://REMOTE_ELASTICSEARCH_ENDPOINT:PORT",
      "username": "USER",
      "password": "PASSWORD"
    },
    "index": "INDEX_NAME",
    "query": {
      "match_all": {}
    }
  },
  "dest": {
    "index": "INDEX_NAME"
  }
}</pre>
</div>
</li>
<li class="listitem">
<p>Verify that the new index is present:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">GET INDEX-NAME/_search?pretty</pre>
</div>
</li>
<li class="listitem">
You can remove the reindex.remote.whitelist user setting that you added previously.
</li>
</ol>
</div>
<h4><a id="ece-restore-snapshots"></a>Restore from a snapshot<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-81/docs/shared/ec-ce-migrating-data.asciidoc">edit</a></h4>
<p>If you cannot connect to a remote index for whatever reason, such as if it&#8217;s in a non-working state, you can try restoring from the most recent working snapshot.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>On your old Elasticsearch cluster, choose an option to get the name of your snapshot repository bucket:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">GET /_snapshot
GET /_snapshot/_all</pre>
</div>
</li>
<li class="listitem">
<p>Get the snapshot name:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">GET /_snapshot/NEW-REPOSITORY-NAME/_all</pre>
</div>
<p>The output for each entry provides a <code class="literal">"snapshot":</code> value which is the snapshot name.</p>
<pre class="screen">  {
  "snapshots": [
    {
      "snapshot": "scheduled-1527616008-instance-0000000004",</pre>
</li>
<li class="listitem">
From the Cloud UI of the <span class="strong strong"><strong>new</strong></span> Elasticsearch cluster add the snapshot repository. For details about configuring snapshot repositories on Amazon Web Services (AWS), Google Cloud Storage (GCS), or Azure Blob Storage, check <a class="xref" href="ece-manage-repositories.html" title="Manage snapshot repositories">manage Snapshot Repositories</a>.
</li>
<li class="listitem">
<p>Start the Restore process.</p>
<p>For deployments with <span class="strong strong"><strong>Elastic Stack version 7.2 and higher</strong></span>:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open Kibana and go to <span class="strong strong"><strong>Management</strong></span> &gt; <span class="strong strong"><strong>Snapshot and Restore</strong></span>.
</li>
<li class="listitem">
Under the <span class="strong strong"><strong>Snapshots</strong></span> tab, you can find the available snapshots from your newly added snapshot repository. Select any snapshot to view its details, and from there you can choose to restore it.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Restore</strong></span>.
</li>
<li class="listitem">
Select the indices you wish to restore.
</li>
<li class="listitem">
Configure any additional index settings.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Restore snapshot</strong></span> to begin the process.
</li>
</ol>
</div>
<p>For deployments with <span class="strong strong"><strong>Elastic Stack version 7.1 and lower:</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Open the API Console or the Kibana Console app of the new Elasticsearch cluster and restore the snapshot:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">POST /_snapshot/REPOSITORY_NAME/SNAPSHOT_NAME/_restore?pretty
{
"indices": "*",
"ignore_unavailable": true,
"include_global_state": true
}</pre>
</div>
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>Verify that the new index is restored in your Elastic Cloud Enterprise deployment with this query:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">GET INDEX_NAME/_search?pretty</pre>
</div>
</li>
</ol>
</div>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</div><div class="navfooter">
<span class="prev">
<a href="ece-cloud-ingest-data.html">« Adding data to Elasticsearch</a>
</span>
<span class="next">
<a href="ece-ingest-guides.html">Ingesting data from your application »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":false},"go":{"hasAny":false},"ruby":{"hasAny":false},"java":{"hasAny":false},"javascript":{"hasAny":false},"python":{"hasAny":false},"csharp":{"hasAny":false}}}}</script>
  </body>
</html>
