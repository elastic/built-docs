<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Upgrade to Elasticsearch 6.x | Elasticsearch Add-On for Heroku Documentation | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Add-On for Heroku Documentation"/>
<link rel="up" href="ech-upgrade-deployment.html" title="Upgrade versions"/>
<link rel="prev" href="ech-upgrading-v7.html" title="Upgrade to Elasticsearch 7.x"/>
<link rel="next" href="ech-upgrading-v5.html" title="Upgrade to Elasticsearch 5.x"/>
<meta name="DC.type" content="Learn/Docs/Cloud-Heroku/Reference"/>
<meta name="DC.subject" content="Elasticsearch Add-On for Heroku"/>
<meta name="DC.identifier" content="ms-47"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Add-On for Heroku Documentation</a></span>
»
<span class="breadcrumb-link"><a href="ech-configure.html">Configuring your deployment</a></span>
»
<span class="breadcrumb-link"><a href="ech-upgrade-deployment.html">Upgrade versions</a></span>
»
<span class="breadcrumb-node">Upgrade to Elasticsearch 6.x</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ech-upgrading-v7.html">« Upgrade to Elasticsearch 7.x</a>
</span>
<span class="next">
<a href="ech-upgrading-v5.html">Upgrade to Elasticsearch 5.x »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ech-upgrading-v6"></a>Upgrade to Elasticsearch 6.x<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-upgrading-v6.asciidoc">edit</a></h2>
</div></div></div>
<p>If you have an existing cluster and want to upgrade to version 6.x, there are a few things you need to keep in mind. Preparing for your upgrade ahead of time ensures that you can enjoy the major new features and improved usability of Elasticsearch 6.x as quickly as possible.</p>
<h3><a id="echbefore_you_begin_10"></a>Before you begin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-upgrading-v6.asciidoc">edit</a></h3>
<p>Upgrading on Elasticsearch Add-On for Heroku differs from upgrading your on-premise installation in that all major configuration changes to upgrade Elasticsearch, Kibana, and X-Pack are handled for you. Your responsibility when preparing to upgrade to version 6.x is to make sure that your indices are ready for version 6.x by reindexing, if necessary, and that you are aware of breaking changes that could affect you.</p>
<p>The upgrade process to Elasticsearch 6.x is a two-step process that uses version 5.6 as an intermediate upgrade step. To upgrade to version 6.x, you must:
. Upgrade from Elasticsearch version 5.x to version 5.6.
. Upgrade from Elasticsearch version 5.6 to version 6.x.</p>
<p>When upgrading to version 6.x, Elasticsearch Add-On for Heroku automatically runs the deprecation API to retrieve information about different cluster, node, and index level settings that are removed or changed. If there are any deprecation issues that would prevent the upgraded cluster from performing correctly, Elasticsearch Add-On for Heroku does not perform the upgrade and instead asks you to resolve the issues through the Upgrade Assistant in Kibana first. If your cluster does not include a Kibana instance yet, you can
<a class="xref" href="ech-enable-kibana.html" title="Enable Kibana">enable Kibana first</a>
and then use the Upgrade Assistant. After resolving the issues flagged by the deprecation API, you should be able to perform the upgrade successfully.</p>
<p>Steps you might need to perform before upgrading:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ech-customize-deployment-components.html#ech-scripting" title="Scripting">Enable inline scripting</a>. At least the default <span class="strong strong"><strong>Enable sandboxed inline scripts</strong></span> option must be set on the <span class="strong strong"><strong>Configuration</strong></span> page for your cluster or the upgrade to version 6.x cannot proceed.
</li>
<li class="listitem">
<a class="xref" href="ech-upgrading-v6.html#ech-upgrading-v6-reindex" title="Reindex indices created in older versions of Elasticsearch">Reindex indices created in older versions of Elasticsearch</a> to ensure compatibility with version 6.x.
</li>
<li class="listitem">
<a class="xref" href="ech-upgrading-v6.html#ech-upgrading-v6-breaking" title="Review breaking changes in Elasticsearch 6.x">Review breaking changes in Elasticsearch 6.x</a> before upgrading.
</li>
</ul>
</div>
<p>For production systems, we recommend that you follow our <a class="xref" href="ech-upgrading-major.html" title="Best practices for major version upgrades">Best Practices for Major Version Upgrades</a>.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Check the <a class="xref" href="ech-upgrading-v6.html#ech-upgrading-v6-issues" title="Known issues with 6.8.6 on Elasticsearch Add-On for Heroku">known issues</a> on Elasticsearch Add-On for Heroku.
</li>
</ul>
</div>
<p>In version 6.x, TLS between Elasticsearch cluster nodes is always enabled on Elasticsearch Add-On for Heroku. To enable internal TLS between cluster nodes, Elasticsearch cluster must perform a full cluster restart on Elasticsearch Add-On for Heroku, even if you are upgrading from version 5.6.</p>
<p>Additional background information about upgrading the Elastic Stack is available, but keep in mind that most steps are handled for you, unless they are specifically called out in the Elasticsearch Add-On for Heroku documentation that you are currently reading:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elastic-stack/6.8/upgrading-elastic-stack.html" class="ulink" target="_top">Upgrading the Elastic Stack</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/6.0/setup-upgrade.html" class="ulink" target="_top">Upgrading Elasticsearch</a>
</li>
</ul>
</div>
<h4><a id="echsnapshot_behavior_during_upgrades_2"></a>Snapshot behavior during upgrades<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-upgrading-v6.asciidoc">edit</a></h4>
<p>To ensure an upgrade process that always keeps your data safe, Elasticsearch Add-On for Heroku takes a snapshot before making any changes to your cluster. After a major version upgrade is complete and the first successful snapshot with the new major version is available, all snapshots taken with previous version of Elasticsearch are removed.</p>
<p>For example, before upgrading from Elasticsearch version 5.6 to version 6.x, a snapshot is taken. After the upgrade to version 6.x is complete and a first snapshot with the new version is available, all snapshots taken with version 5.x are removed.</p>
<h3><a id="ech-upgrading-v6-breaking"></a>Review breaking changes in Elasticsearch 6.x<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-upgrading-v6.asciidoc">edit</a></h3>
<p>Elastic is always working on making upgrades across major versions easier, but major version upgrades often include so many changes that upgrading can carry some risk. A breaking change is the result of a functional change between major Elasticsearch versions that requires you to perform some additional step or steps in order to ensure that you can use the new version as intended. To learn more, see <a href="/guide/en/elasticsearch/reference/6.8/breaking-changes.html" class="ulink" target="_top">Breaking changes in 6.8</a>.</p>
<h3><a id="ech-upgrading-v6-reindex"></a>Reindex indices created in older versions of Elasticsearch<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-upgrading-v6.asciidoc">edit</a></h3>
<p>Elasticsearch 6.x can read indices created in version 5.0 or above. An Elasticsearch 6.x node will not start if indices created in a version of Elasticsearch before 5.0 are present.
If prompted by Elasticsearch Add-On for Heroku, use the Upgrade Assistant in Kibana to reindex your data.</p>
<h3><a id="ech-upgrading-v6-issues"></a>Known issues with 6.8.6 on Elasticsearch Add-On for Heroku<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-upgrading-v6.asciidoc">edit</a></h3>
<p>The following known problems apply to the Elastic Stack 6.8.6 release:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The Transport Client is not supported in 6.8.6. While we work on adding support, you can continue to use the  <a href="/guide/en/elasticsearch/client/java-rest/6.8/index.html" class="ulink" target="_top">Java REST client</a> as a workaround.
</li>
</ul>
</div>
<h3><a id="ech-upgrading-v6-steps"></a>Upgrade to Elastic Stack 6.8<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-upgrading-v6.asciidoc">edit</a></h3>
<p>To deploy 6.8, excluding Elastic Stack 6.8.6 and earlier releases:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Elasticsearch Add-On for Heroku console</a>.
</li>
<li class="listitem">
Upgrade from Elasticsearch version 2.x or version 5.x to version 5.6.
</li>
<li class="listitem">
Upgrade from version 5.6 to version 6.x.
</li>
<li class="listitem">
Test Elasticsearch and Kibana 6.x!
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ech-upgrading-v7.html">« Upgrade to Elasticsearch 7.x</a>
</span>
<span class="next">
<a href="ech-upgrading-v5.html">Upgrade to Elasticsearch 5.x »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":false},"go":{"hasAny":false},"ruby":{"hasAny":false},"java":{"hasAny":false},"javascript":{"hasAny":false},"python":{"hasAny":false},"csharp":{"hasAny":false}}}}</script>
  </body>
</html>
