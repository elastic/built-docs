<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>How can I customize the components of my deployment? | Elasticsearch Add-On for Heroku Documentation | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Add-On for Heroku Documentation"/>
<link rel="up" href="ech-configure-settings.html" title="Configure your deployment"/>
<link rel="prev" href="ech-configure-deployment-settings.html" title="What deployment settings are available?"/>
<link rel="next" href="ech-adding-plugins.html" title="Add plugins"/>
<meta name="DC.type" content="Learn/Docs/Cloud-Heroku/Reference"/>
<meta name="DC.subject" content="Elasticsearch Add-On for Heroku"/>
<meta name="DC.identifier" content="ms-48"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Add-On for Heroku Documentation</a></span>
»
<span class="breadcrumb-link"><a href="ech-configure.html">Configuring your deployment</a></span>
»
<span class="breadcrumb-link"><a href="ech-configure-settings.html">Configure your deployment</a></span>
»
<span class="breadcrumb-node">How can I customize the components of my deployment?</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ech-configure-deployment-settings.html">« What deployment settings are available?</a>
</span>
<span class="next">
<a href="ech-adding-plugins.html">Add plugins »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ech-customize-deployment-components"></a>How can I customize the components of my deployment?<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h2>
</div></div></div>
<p>When you create or edit an existing deployment, you can fine-tune the capacity, add extensions, and select additional features.</p>
<h4><a id="ech-cluster-size"></a>Elasticsearch<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>Depending upon how much data you have and what queries you plan to run, you need to select a cluster size that fits your needs. There is no silver bullet for deciding how much memory you need other than simply testing it. The <a class="xref" href="ech-monitoring.html" title="Keeping your cluster healthy">cluster performance metrics</a> in the <a href="https://cloud.elastic.co?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Elasticsearch Add-On for Heroku console</a> can tell you if your cluster is sized appropriately. You can also <a class="xref" href="ech-enable-logging-and-monitoring.html" title="Enable logging and monitoring">enable deployment monitoring</a> for more detailed performance metrics. Fortunately, you can change the amount of memory allocated to the cluster later without any downtime for HA deployments. And, once you&#8217;ve scaled up to the maximum allotted RAM per node, you can also scale the cluster horizontally by adding more nodes.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-capacity.png" alt="Capacity slider to adjust Elasticsearch cluster size">
</div>
</div>
<p>For trials, larger sizes are not available until you <a class="xref" href="ech-billing-details.html" title="Add your billing details">add a credit card</a>.</p>
<p>Currently, half the memory is assigned to the JVM heap. For example, on a 32 GB cluster, 16 GB are allotted to heap. The disk-to-RAM ratio currently is 1:24, meaning that you get 24 GB of storage space for each 1 GB of RAM. All clusters are backed by SSD drives.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>For production systems, we recommend not using less than 4 GB of RAM for your cluster, which assigns 2 GB to the JVM heap.</p>
</div>
</div>
<p>The CPU resources assigned to a cluster are relative to the size of your cluster, meaning that a 32 GB cluster gets twice as much CPU resources as a 16 GB cluster. All clusters are guaranteed their share of CPU resources, as we do not overcommit resources. Smaller clusters up to and including 8 GB of RAM benefit from temporary CPU boosting to improve performance when needed most.</p>
<p>To learn more about how much memory might be needed, see <a href="/blog/found-elasticsearch-in-production?q=elasticsearch%20in%20prod#memory" class="ulink" target="_top">Elasticsearch in Production</a>.</p>
<h4><a id="ech-high-availability"></a>Fault tolerance<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>High availability is achieved by running a cluster with replicas in multiple data centers (availability zones), to prevent against downtime when infrastructure problems occur or when resizing or upgrading deployments. We offer the options of running in one, two, or three data centers.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-fault-tolerance.png" alt="High availability features">
</div>
</div>
<p>Running in two data centers or availability zones is our default high availability configuration. It provides reasonably high protection against infrastructure failures and intermittent network problems. You might want three data centers if you need even higher fault tolerance. Just one zone might be sufficient, if the cluster is mainly used for testing or development.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Some <a class="xref" href="ech-reference-regions.html" title="Elasticsearch Add-On for Heroku regions">regions</a> might have only two availability zones.</p>
</div>
</div>
<p>Like many other changes, you change the level of fault tolerance while the cluster is running. For example, when you prepare a new cluster for production use, you can first run it in a single data center and then add another data center right before deploying to production.</p>
<p>While multiple data centers or availability zones increase a cluster&#8217;s fault tolerance, they do not protect against problematic searches that cause nodes to run out of memory, for example. For a cluster to be highly reliable and available, it is also <a href="/blog/found-elasticsearch-in-production?q=elasticsearch%20in%20prod#memory" class="ulink" target="_top">important to have enough memory</a>.</p>
<p>The node capacity you chose is per data center. The reason for this is that there is no point in having two data centers if the failure of one will result in a cascading error because the remaining data center cannot handle the total load. Through the allocation awareness in Elasticsearch, we configure the nodes so that your Elasticsearch cluster will automatically allocate replicas between each availability zone</p>
<p>Our article on <a href="/blog/found-elasticsearch-in-production?q=elasticsearch%20in%20prod#networking" class="ulink" target="_top">Elasticsearch in Production</a> covers availability zones and resilience against infrastructure failures in more detail.</p>
<h4><a id="ech-scripting"></a>Scripting<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>The defaults for the different supported script types are generally safe to accept as is, unless you have a specific requirement. The script_fields in filters and facets are one of the features that make Elasticsearch so flexible, but they can allow arbitrary code execution, like <code class="literal">Runtime.exec("cat /etc/passwd")</code> and other malicious operations.</p>
<p>We provide you with three levels of scripting control for each of the script types that are supported: You can disable the scripts completely, enable scripts to run in a sandbox or enable all scripts. Especially for inline scripts, we strongly recommend that you do not enable all inline scripts, because of the security risk that they can pose.</p>
<h4><a id="echsharding"></a>Sharding<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>You can review your Elasticsearch shard activity from Elasticsearch Add-On for Heroku. At the bottom of the Elasticsearch page, you can hover over each part of the shard visualization for specific numbers.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-shard-activity.gif" alt="Shard activity">
</div>
</div>
<p>For versions before 5.0: Select the number of shards. The default is 1. We recommend that you read <a href="/blog/found-sizing-elasticsearch/" class="ulink" target="_top">Sizing Elasticsearch</a> before your change the number of shards.</p>
<h4><a id="echcustom_plugins_dictionaries_and_scripts"></a>Custom plugins, dictionaries, and scripts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>If you have uploaded any plugins or user bundles with dictionaries or scripts then this where you choose to enable them for the cluster.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only Gold and Platinum subscriptions have access to uploading custom plugins. All subscription levels, including Standard, can upload scripts and dictionaries.</p>
</div>
</div>
<h4><a id="echplugins"></a>Plugins<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>Lists the official plugins available for your selected Elasticsearch version.</p>
<p>When selecting a plugin from this list you get a version that has been tested with the chosen Elasticsearch version. The main difference between selecting a plugin from this list and uploading the same plugin as a custom extension is in who decides the version used. See also <a class="xref" href="ech-adding-plugins.html" title="Add plugins">Add plugins</a>.</p>
<p>The reason we do not list the version chosen on this page is because we reserve the option to change it when necessary. That said, we will not force a cluster restart for a simple plugin upgrade unless there are severe issues with the current version. In most cases, plugin upgrades are applied lazily, in other words when something else forces a restart like you changing the plan or Elasticsearch runs out of memory.</p>
<h4><a id="echkibana"></a>Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>For new deployments that use Elasticsearch version 5.0 and later, we automatically create a Kibana instance for you. If you use a version before 5.0 or if your cluster didn&#8217;t include a Kibana instance initially, there might not be a Kibana endpoint URL shown, yet. To enable Kibana, simply click <span class="strong strong"><strong>Enable</strong></span>.</p>
<p>Enabling Kibana provides you with an endpoint URL, where you can access Kibana. It can take a short while to provision Kibana right after you click <span class="strong strong"><strong>Enable</strong></span>, so if you get an error message when you first click the endpoint URL, try again.</p>
<p><span class="strong strong"><strong>For version 5.0 and later</strong></span>: Log in to Kibana with the <code class="literal">elastic</code> superuser to try it out. The password was provided when you created your cluster or <a class="xref" href="ech-password-reset.html" title="Reset the elastic user password">can be reset</a>.</p>
<p>+
<span class="strong strong"><strong>For versions before 5.0</strong></span>: If Shield is enabled, you can log in to Kibana with the <code class="literal">admin</code> user to try it out. The password was provided when you enabled Shield or <a class="xref" href="ech-users-manage-shield.html" title="Before Version 5.0, manage users and roles in Shield">can be reset</a>.</p>
<p>In production systems, you might need to control what Elasticsearch data users can access through Kibana, so you need to create credentials that can be used to access the necessary Elasticsearch resources. This means granting read access to the necessary indexes, as well as access to update the <code class="literal">.kibana</code> index.</p>
<h4><a id="ech-manage-apm"></a>Application Performance Monitoring<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>For deployments that are version 6.3 and later, you have the option to add an Application Performance Monitoring (APM) Server to your deployment. APM allows you to monitor software services and applications in real time, turning that data into documents stored in the Elasticsearch cluster. The APM data is automatically available in Kibana for searching and visualizing. For more information regarding Elastic APM, see <a href="/solutions/apm" class="ulink" target="_top">www.elastic.co/solutions/apm</a>.</p>
<p>As part of provisioning, the APM Server is already configured to work with Elasticsearch and Kibana. At the end of provisioning, you are shown the secret token to configure communication between the APM Server and the <a href="/guide/en/apm/agent/index.html" class="ulink" target="_top">APM Agents</a>. The APM Agents get deployed within your services and applications.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can reset the secret token; however, it will disrupt your APM service, restart the server, and all of your agents will need to be updated with the new token.</p>
</div>
</div>
<p>When you are using Kibana and have configured an agent, you can use the pre-built, dedicated dashboards and the APM tab to visualize the data that is sent back.</p>
<h4><a id="ech-user-settings"></a>User settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>Use your own user settings to change how Elasticsearch and other Elastic products run. User settings are appended to the appropriate YAML configuration file, but not all settings are supported. See also <a class="xref" href="ech-editing-user-settings.html" title="Edit your user settings">Editing Your User Settings</a>.</p>
<h4><a id="ech-maintenance-mode"></a>Maintenance mode<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>In maintenance mode, requests to your cluster are blocked during configuration changes. You use maintenance mode to perform corrective actions that might otherwise be difficult to complete. Maintenance mode lasts for the duration of a configuration change and is turned off after the change completes.</p>
<p>We strongly recommend that you use maintenance mode when your cluster is overwhelmed by requests and you need to increase capacity. If your cluster is being overwhelmed because it is undersized for its workload, nodes might not respond to efforts to resize. Putting the cluster into maintenance mode as part of the configuration change can stop the cluster from becoming completely unresponsive during the configuration change, so that you can resolve the capacity issue. Without this option, configuration changes for clusters that are overwhelmed can take longer and are more likely to fail.</p>
<h4><a id="echdeployment_management"></a>Deployment Management<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-48/docs/saas/ec-configuring.asciidoc">edit</a></h4>
<p>There are two actions you can perform in the deployment management:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Perform a cluster restart - Needed only rarely, but full cluster restarts can help with a suspected operational issue before reaching out to Elastic for help.
</li>
<li class="listitem">
Delete your cluster - For clusters that you no longer need and don&#8217;t want to be charged for any longer. Deleting a cluster removes the cluster and all your data permanently.
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Use the actions in the deployment management with care. Clusters are not available while they restart and deleting a cluster does really remove the cluster and all your data permanently.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ech-configure-deployment-settings.html">« What deployment settings are available?</a>
</span>
<span class="next">
<a href="ech-adding-plugins.html">Add plugins »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":false},"go":{"hasAny":false},"ruby":{"hasAny":false},"java":{"hasAny":false},"javascript":{"hasAny":false},"python":{"hasAny":false},"csharp":{"hasAny":false}}}}</script>
  </body>
</html>
