<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Enhancements and bug fixes | Elasticsearch Service Documentation | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-release-notes.html" title="Release notes"/>
<link rel="prev" href="ec-release-notes-2022-06-09.html" title="Enhancements and bug fixes"/>
<link rel="next" href="ec-release-notes-2022-04-26-canada.html" title="Azure region Canada Central (Toronto) now available"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="latest"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="ec-release-notes.html">Release notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ec-release-notes-2022-06-09.html">« Enhancements and bug fixes</a>
</span>
<span class="next">
<a href="ec-release-notes-2022-04-26-canada.html">Azure region Canada Central (Toronto) now available »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ec-release-notes-2022-05-16"></a>Enhancements and bug fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-77/docs/saas/releases/ms-74.0/index.asciidoc">edit</a></h2>
</div></div></div>
<p>The following changes are included in this release.</p>
<h3><a id="ec_features_4"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-77/docs/saas/releases/ms-74.0/feature.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Make allocator add direct trust certificates to Elasticsearch.</strong></span> This release of Elasticsearch Service configures Elasticsearch instances to trust certificates uploaded by customers for use with remote connections to Elasticsearch clusters outside of a Cloud managed environment.</p>
<p><span class="strong strong"><strong>New <code class="literal">migrate_template</code> endpoint to migrate a deployment to a different deployment template.</strong></span> Adds the <code class="literal">migrate_template</code> endpoint to allow migrating a deployment to a different deployment template.</p>
<p><span class="strong strong"><strong>Add type parameter and more validation to DirectTrustRelationship.</strong></span> DirectTrustRelationships now take an optional <code class="literal">type</code> parameter which enables use case specific validation and supports a more guided experience in the user interface.</p>
<p><span class="strong strong"><strong>Allow xpack.security.authc.realms.jwt settings.</strong></span> Adds support for the beta JWT realm for Elasticsearch authentication.</p>
<p><span class="strong strong"><strong>Enable using different domain for Microsoft Azure storage.</strong></span> Enables support for the different domain used by blob storage in Azure Govcloud.</p>
<h3><a id="ec_enhancements_4"></a>Enhancements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-77/docs/saas/releases/ms-74.0/enhancement.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Reset the stack version of stateless resources when they are being re-enabled.</strong></span> Explicitly reset the version of a stateless resource (APM, Kibana, Enterprise Search) when re-enabling the resource on the Deployment edit page. Previously, these resources would be re-enabled using the version they were last running on. This blocked further changes when the Elasticsearch resource had been upgraded to different major version (for example 7.x to 8.x).</p>
<p><span class="strong strong"><strong>cloud-security-posture feature flag.</strong></span> Adding <code class="literal">xpack.cloudSecurityPosture.enabled:</code> Kibana feature flag for cloud-security-posture.</p>
<p><span class="strong strong"><strong>Replace watcheralert.found.io references with alerts.elastic.co.</strong></span> Changes the email address references for watcher alert emails from <code class="literal">watcheralert.found.io</code> to <code class="literal">alerts.elastic.co</code>.</p>
<p><span class="strong strong"><strong>Allow monitoring to be shipped to a deployment running the next major version.</strong></span> Allow logs and metrics to be shipped to deployments running the next major version via the UI. For example, a 7.x deployment can now be configured to ship monitoring data to an 8.x deployment.</p>
<p><span class="strong strong"><strong>In runner&#8217;s reference.conf, set notification-email-from to <em>Watcher Alert &lt;<a href="mailto:noreply@alerts.elastic.co" class="ulink" target="_top">noreply@alerts.elastic.co</a>&gt;</em> by default.</strong></span> Changes the email address that&#8217;s used as sender for the Watcher alert emails from <code class="literal">noreply@watcher.elastic-cloud.co</code> to <code class="literal">noreply@alerts.elastic.co</code>. The change will apply to newly created deployments and when applying a plan to existing deployments.</p>
<p><span class="strong strong"><strong>Change sender address for Kibana alerts.</strong></span> Changes the email address that&#8217;s used as sender for Kibana alert emails from <code class="literal">alerts-noreply@elastic.co</code> to <code class="literal">noreply@alerts.elastic.co</code>. The change will apply to newly created deployments and when applying a plan to existing deployments.</p>
<p><span class="strong strong"><strong>Don&#8217;t show the APM secret token when APM is in managed mode.</strong></span> Stop showing the APM secret token when APM is managed by the Elastic Agent. Instead link through to the Fleet UI containing the secret token.</p>
<p><span class="strong strong"><strong>Adds support for service logs that are sent directly to Firehose.</strong></span>  For example Route 53 query logging, Firewall, etc. These logs are configured to send to a given Firehose delivery stream instead of going through CloudWatch log group first.</p>
<p>Output log event looks like this:</p>
<div class="pre_wrapper lang-log">
<pre class="programlisting prettyprint lang-log">{
  "_index": ".ds-logs-aws.route53_resolver-default-2022.04.15-000001",
  "_type": "_doc",
  "_id": "660ddd8aaa",
  "_version": 1,
  "_score": 1,
  "_source": {
    "message": "{\"version\":\"1.100000\",\"account_id\":\"12345\",\"region\":\"us-east-1\",\"vpc_id\":\"vpc-e8722d92\",\"query_timestamp\":\"2022-04-15T22:26:37Z\",\"query_name\":\"tk2-209-14006.vs.sakura.ne.jp.\",\"query_type\":\"A\",\"query_class\":\"IN\",\"rcode\":\"NOERROR\",\"answers\":[{\"Rdata\":\"160.16.66.10\",\"Type\":\"A\",\"Class\":\"IN\"}],\"srcaddr\":\"172.31.84.43\",\"srcport\":\"50231\",\"transport\":\"UDP\",\"srcids\":{\"instance\":\"i-0646c0435554cc5ed\"}}",
    "@timestamp": "2022-04-15T22:27:49Z",
    "cloud.provider": "aws",
    "cloud.account.id": "12345",
    "cloud.region": "us-east-1",
    "aws.firehose.arn": "arn:aws:firehose:us-east-1:12345:deliverystream/route53-resolver-logs",
    "aws.firehose.request_id": "3d919d79-69c0-48b7-aa63-85d2f886a582",
    "aws.kinesis.type": "deliverystream",
    "aws.kinesis.name": "route53-resolver-logs",
    "aws.firehose.parameters.X-Found-Cluster": "ff0b7f06475245199add23784d445d3e",
    "aws.firehose.parameters.es_datastream_name": "logs-aws.route53_resolver-default",
    "data_stream.type": "logs",
    "data_stream.dataset": "aws.route53_resolver",
    "data_stream.namespace": "default"
  }
}</pre>
</div>
<p><span class="strong strong"><strong>Change Firehose parameter name to es_datastream_name.</strong></span> Changes the Firehose parameter name for users to specify a data stream name/index name to be only <code class="literal">es_datastream_name</code>. Using an index is not recommended and should not be exposed in the parameter name.</p>
<p><span class="strong strong"><strong>Adds support for Firehose GZIP content encoding.</strong></span> When configuring Firehose delivery stream, user can choose to uses the content encoding to compress the body of a request before sending the request to the destination.</p>
<p><span class="strong strong"><strong>Don&#8217;t check the upgrade rules when re-enabling a terminated stateless resource.</strong></span> Stop enforcing upgrade rules when re-enabling stateless resources. For example, allow APM to be re-enabled on 8.2 if it was disabled on 7.14</p>
<p><span class="strong strong"><strong>Remove CSV maxSizeBytes whitelist cap for 7.15+.</strong></span> Allow <code class="literal">xpack.reporting.csv.maxSizeBytes</code> whitelisting to exceed 50MB for cluster versions 7.15+, since it is <a href="https://github.com/elastic/kibana/pull/108485" class="ulink" target="_top">chunked now</a>.</p>
<p><span class="strong strong"><strong>Allow configuring Crawler content extraction settings.</strong></span> In version 8.3, the crawler in Enterprise Search adds new settings related to content extraction.</p>
<p><span class="strong strong"><strong>Warning when keystore entry is suspected to be invalid.</strong></span> In order to prevent invalid entries to the keystore that might cause all future plan changes to fail, we&#8217;ve added a list of well known keys that are expected to work, and validates the user-entered keystore entries against this list.</p>
<p>In case a key is not on the list of well known keys, the UI now issues a warning, provides some extra details on how secure settings work, and also asks the user to confirm that the setting might prevent future plan changes and may put the availability of their clusters at risk.</p>
<p><span class="strong strong"><strong>Reject requests to restart stopped deployment resources not running the same major stack version.</strong></span> Block requests to restart stopped stateless resources when they are not configured with the same major stack version as the Elasticsearch resource.</p>
<p><span class="strong strong"><strong>Beats upgrade to 7.17.1.</strong></span> Filebeat and Metricbeat shipping logs and metrics to the <code class="literal">logging-and-metrics</code> cluster in Elastic Cloud Enterprise are upgraded from 7.12 to 7.17.</p>
<p><span class="strong strong"><strong>Set the region when creating a dedicated monitoring deployment.</strong></span> Pre-select the correct region when creating a dedicated monitoring deployment</p>
<p><span class="strong strong"><strong>Fix structured logging exceptions to comply with ECS.</strong></span> Changes the structured logging format to be Elastic Common Schema (ECS) compliant. Changes <code class="literal">exception</code> to <code class="literal">error</code> and <code class="literal">class_name</code> to <code class="literal">type</code>.</p>
<h3><a id="ec_bug_fixes_4"></a>Bug fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-77/docs/saas/releases/ms-74.0/bug.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Change SSO realms to start at order 101, after user settings realms.</strong></span> Elasticsearch Service now uses realm orders above 100 for SSO realms to avoid conflict with any realms defined in user settings.</p>
<p><span class="strong strong"><strong>Show hourly rate instead of total usage in hourly rate tile.</strong></span> Fixes the value shown in the hourly rate tile of the usage page for trial users.</p>
<p><span class="strong strong"><strong>Fixed Summary sidebar.</strong></span> When editing a deployment, the summary sidebar no longer gets squashed when scrolling down the page.</p>
<p><span class="strong strong"><strong>Added more detail when instance overrides are reset.</strong></span> The calculate incremental elasticsearch change step was omitting the reason why the instance resize is done, when dealing with instance capacity overrides. This is fixed now and the reason is included in the detail step view.</p>
<p><span class="strong strong"><strong>Reset instance capacity overrides.</strong></span> Instance capacity overrides were not reset during the next plan change. Now, during the next plan change, the instance capacity overrides are removed and the initial capacity is used.</p>
<p><span class="strong strong"><strong>Fixed overflow problem when displaying summary of resized instances.</strong></span> Fixes the negative numbers that were sometimes shown in the overview of the resize step due to an overflow bug. This occurred when calculating the capacity of an instance in human readable fashion.</p>
<p><span class="strong strong"><strong>Don&#8217;t count stopped deployments on the platform region overview page.</strong></span> The healthy/unhealthy deployment counts on the platform overview page now exclude stopped deployments.</p>
<p><span class="strong strong"><strong>Only show the Enterprise Search read-only warning if Enterprise Search is enabled.</strong></span> During upgrades, if Enterprise Search was not enabled, sometimes a warning would be displayed about it being read-only.</p>
<p><span class="strong strong"><strong>Fix Proxy panic on error with empty request body</strong></span> Fixes Proxy <code class="literal">panic</code> on retry of <code class="literal">url.Error</code> with empty request body.</p>
<h3><a id="ec_deprecations_2"></a>Deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-77/docs/saas/releases/ms-74.0/deprecation.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Change useDiskThreshold to hidden property and don&#8217;t parse or serialize.</strong></span> The formerly deprecated <code class="literal">use_disk_threshold</code> field in <code class="literal">ElasticsearchSystemSettings</code> will no longer be returned in API responses and any value attempted written is ignored.</p>
<p><span class="strong strong"><strong>Update legacy region cipher suite.</strong></span> Updated the legacy region cipher suites to intermediate ciphers + Windows 11 client compatible cipher suites. Read more about this <a href="/blog/notice-cipher-changes-ess" class="ulink" target="_top">change to the supported ciphers list</a>.</p>
<h3><a id="ec_docs_3"></a>Docs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-77/docs/saas/releases/ms-74.0/docs.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Add docs example for simplified deployment creation.</strong></span> We&#8217;ve added a new example to the Elasticsearch Service API docs showing how to <a class="xref" href="ec-api-deployment-crud.html#ec-api-examples-deployment-simple" title="Create a deployment using default values">create a deployment using default values</a> based on a deployment template specified in the API request.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ec-release-notes-2022-06-09.html">« Enhancements and bug fixes</a>
</span>
<span class="next">
<a href="ec-release-notes-2022-04-26-canada.html">Azure region Canada Central (Toronto) now available »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"go":{"hasAny":true},"ruby":{"hasAny":true},"java":{"hasAny":true},"javascript":{"hasAny":true},"python":{"hasAny":true},"csharp":{"hasAny":true}}}}</script>
  </body>
</html>
