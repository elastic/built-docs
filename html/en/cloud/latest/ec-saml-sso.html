<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Configure Elastic Cloud SAML single sign-on | Elasticsearch Service Documentation | Elastic</title>
<meta class="elastic" name="content" content="Configure Elastic Cloud SAML single sign-on | Elasticsearch Service Documentation">

<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-organizations.html" title="Managing your organization"/>
<link rel="prev" href="ec-user-privileges.html" title="User roles and privileges"/>
<link rel="next" href="ec-saml-sso-okta.html" title="Register Elastic Cloud SAML in Okta"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elastic Cloud"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="latest"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="ec-user-privileges.html">« User roles and privileges</a>
</span>
<span class="next">
<a href="ec-saml-sso-okta.html">Register Elastic Cloud SAML in Okta »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-organizations.html">Managing your organization</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configure Elastic Cloud SAML single sign-on</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ec-saml-sso"></a>Configure Elastic Cloud SAML single sign-on</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Elastic Cloud supports SAML single sign-on (SSO) after you you register a SAML 2.0 identity provider (IdP).
Your organization&#8217;s members can sign into an organization-specific SSO login URL then join your Elastic Cloud organization automatically.</p>
<div class="position-relative"><h3><a id="ec_prerequisites_4"></a>Prerequisites</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>You must have a SAML 2.0 compatible identity provider.</p>
<div class="position-relative"><h3><a id="ec_known_issues_and_risks"></a>Known issues and risks</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>Actions taken on the IdP are not automatically reflected in Elastic Cloud.
For example, if you remove a user from your IdP, they are not removed from the Elastic Cloud organization and their active sessions are not invalidated.
To immediately revoke a user&#8217;s active sessions, an organization owner must remove the user from the Elastic Cloud organization or remove their assigned roles.</p>
<p>At this time, users that join your Elastic Cloud organization by using IdP authentication are not automatically assigned roles.
You must manually assign roles to organization members after they have joined the organization.</p>
<p>The IdP registration and domain claim features are available only by using APIs, which are in subject to change while in technical preview.
The features are not yet available in the Elastic Cloud UI.</p>
<div class="position-relative"><h3><a id="ec-saml-sso-claim-domain"></a>Claim a domain</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>Before you can register and use your IdP with Elastic Cloud, you must claim one or more domains.
Only users that have email addresses that match claimed domains can authenticate with your IdP.</p>
<p>You must have authority to modify your domain&#8217;s DNS records and an organization owner API key.
To create the latter, refer to <a class="xref" href="ec-api-authentication.html" title="Access and authentication"><em>Access and authentication</em></a>.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Generate a verification code for your domain:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPOST \
-H 'Content-Type: application/json' \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID/domains/domain_claims/_generate_verification_code" \
-d '
{
  "domain_claim_request": "$DOMAIN"
}
'</pre>
</div>
</li>
<li class="listitem">
Update your DNS settings for your domain to add a new TXT record with name <code class="literal">_elastic_domain_challenge</code>. Put the value returned from the API in the previous step into the TXT record.
</li>
<li class="listitem">
<p>Verify the domain ownership for your domain:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPOST \
-H 'Content-Type: application/json' \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID/domains/domain_claims/_verify" \
-d '
{
  "domain_claim_request": "$DOMAIN"
}
'</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It may take some time for the DNS records to be updated and propagated in the network. If verification isn&#8217;t successful, wait a while and try again.</p>
</div>
</div>
<p>If the members of your Elastic Cloud organization have email addresses from multiple domains, you can claim multiple domains.</p>
<div class="position-relative"><h3><a id="ec-saml-sso-register-idp"></a>Register a SAML IdP</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>After you have claimed one or more domains, you can register your IdP with Elastic Cloud.
The steps vary by IdP; for more specific details, refer to <a class="xref" href="ec-saml-sso-entra.html" title="Register Elastic Cloud SAML in Microsoft Entra ID">Register Elastic Cloud SAML in Microsoft Entra ID</a> and <a class="xref" href="ec-saml-sso-okta.html" title="Register Elastic Cloud SAML in Okta">Register Elastic Cloud SAML in Okta</a>.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Create a new SAML 2 application in your IdP.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Use placeholder values for the assertion consumer service (ACS) and SP entity ID/audience.
Those values will be provided by Elastic Cloud in a later step.
</li>
<li class="listitem">
Configure your application to send an <code class="literal">email</code> attribute statement with the email address of your organization members.
The email should match the domain that you claimed.
</li>
<li class="listitem">
Optionally configure the application to send <code class="literal">firstName</code> and <code class="literal">lastName</code> attribute statements, which will be used to set the respective fields of the user&#8217;s Elastic Cloud account.
</li>
<li class="listitem">
Note the SAML issuer and the SSO URL, which is the URL of the IdP where users will be redirected at login.
</li>
<li class="listitem">
Make sure to download the public certificate of the SAML 2 application.
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>Register the IdP with Elastic Cloud:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPUT \
-H 'Content-Type: application/json' \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID/idp" \
-d '
{
  "enabled": true,
  "login_identifier_prefix": "&lt;businessname&gt;", <a id="CO39-1"></a><i class="conum" data-value="1"></i>
  "name": "SSO with &lt;businessname&gt;",
  "saml_idp": {
    "public_certificate": [ <a id="CO39-2"></a><i class="conum" data-value="2"></i>
      "&lt;publiccert&gt;"
    ],
    "issuer": "&lt;issuer&gt;", <a id="CO39-3"></a><i class="conum" data-value="3"></i>
    "sso_url": "&lt;ssourl&gt;", <a id="CO39-4"></a><i class="conum" data-value="4"></i>
    "subject": {
      "format": "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified" <a id="CO39-5"></a><i class="conum" data-value="5"></i>
    }
  }
}
'</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO39-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">login_identifier_prefix</code> is a customizable piece of the Elastic Cloud SSO url that your organization members can use to authenticate. This could be the name of your business. You can use alphanumeric characters and hyphens in this value and you can change it later.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO39-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">public_certificate</code> is a Base64-encoded DER-encoded certificate from your IdP. You must remove newlines and any PEM markers (such as <code class="literal">-----BEGIN CERTIFICATE-----</code> or <code class="literal">-----END CERTIFICATE-----</code>) so that the certificate is a single-line Base64-encoded string. If your IdP provides a <code class="literal">metadata.xml</code> file, this would be the value of the <code class="literal">X509Data</code> element with newlines removed.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO39-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">issuer</code> is a value provided by your IdP.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO39-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">sso_url</code> is a value provided by your IdP.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO39-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">format</code> is the SAML name-id format to use.</p>
</td>
</tr>
</table>
</div>
<p>If successful, the API will return the details of the registered IdP containing important details that will need to be provided to the IdP.
For example:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">{
	"login_identifier": "&lt;loginidentifier&gt;",
	"sso_login_url": "https://cloud.elastic.co/login/sso/&lt;loginidentifier&gt;", <a id="CO40-1"></a><i class="conum" data-value="1"></i>
	"metadata_url": "https://cloud.elastic.co/api/v1/organizations/&lt;orgid&gt;/idp/metadata.xml",
	"acs": "&lt;acs&gt;", <a id="CO40-2"></a><i class="conum" data-value="2"></i>
	"sp_entity_id": "https://cloud.elastic.co/organizations/&lt;orgid&gt;", <a id="CO40-3"></a><i class="conum" data-value="3"></i>
	"signing_certificate": [ <a id="CO40-4"></a><i class="conum" data-value="4"></i>
		"&lt;cert&gt;"
	]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO40-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">sso_login_url</code> is the URL you can provide to organization members to initiate SSO with your Elastic Cloud organization.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO40-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">acs</code> is the SAML assertion consumer service that your SAML IdP should send SAML assertions.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO40-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">sp_entity_id</code> is the SAML entity ID of the service provider that your SAML IdP should send in the SAML audience.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO40-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">signing_certificate</code> is the Base64-encoded DER-encoded certificate that SAML requests to your IdP will be signed with.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
<p>Update the SAML 2 application in your IdP with the values from the API response in the previous step.</p>
<p>If your IdP accepts a <code class="literal">metadata.xml</code> file, you can fetch the file from the API.
For example:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XGET \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID/idp/metadata.xml"</pre>
</div>
</li>
</ol>
</div>
<div class="position-relative"><h3><a id="ec_test_sso"></a>Test SSO</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>After you register the IdP in Elastic Cloud and configure your IdP, you can test authentication.
To begin SSO, open the <code class="literal">sso_login_url</code> in your browser.
If everything is configured correctly you should be redirected to your IdP for authentication and then redirected back to Elastic Cloud signed in.
Users who are not a member of the Elastic Cloud organization can authenticate with your IdP to automatically create an Elastic Cloud account provided that their email matches the claimed domain.</p>
<p>At this time, new users in your Elastic Cloud organization will join without any roles assigned.
An administrator must manually assign roles to the organization members.</p>
<div class="position-relative"><h3><a id="ec_enforce_sso"></a>Enforce SSO</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>After SSO is configured successfully, you may wish to enforce SSO authentication for members of your organization.
This enforcement requires members to authenticate with SSO through the organization&#8217;s SAML IdP and prevents them from logging in by any other methods.
It ensures that users who have been off-boarded in your IdP can no longer authenticate to Elastic Cloud.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you turn on enforcement, you will be unable to access Elastic Cloud if your IdP is unavailable or misconfigured or there is an Elastic Cloud incident.
It is recommended that you maintain and store an Elastic Cloud API key with organization owner level privileges so that an administrator can disable enforcement in an emergency. Refer to <a class="xref" href="ec-api-authentication.html#ec-api-keys" title="Create an API key">Create an API key</a>.
You can also open a support issue if you lose access to your Elastic Cloud account.</p>
</div>
</div>
<p>To turn on enforcement, use the following API call:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPUT \
-H 'Content-Type: application/json' \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID" \
-d '
{
  "enforce_authentication_method": "sso"
}
'</pre>
</div>
<p>To turn off enforcement, use the following API call:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPUT \
-H 'Content-Type: application/json' \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID" \
-d '
{
  "enforce_authentication_method": null
}
'</pre>
</div>
<div class="position-relative"><h3><a id="ec_disable_sso"></a>Disable SSO</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>To disable SSO and make it unavailable for your organization, update the organization IdP with <code class="literal">enabled: false</code>.
For example:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPUT \
-H 'Content-Type: application/json' \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID/idp" \
-d '
{
  "enabled": false,
  "login_identifier_prefix": "&lt;businessname&gt;",
  "name": "SSO with &lt;businessname&gt;",
  "saml_idp": {
    "public_certificate": [
      "&lt;publiccert&gt;"
    ],
    "issuer": "&lt;issuer&gt;",
    "sso_url": "&lt;ssourl&gt;",
    "subject": {
      "format": "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"
    }
  }
}
'</pre>
</div>
<div class="position-relative"><h3><a id="ec_troubleshoot_sso"></a>Troubleshoot SSO</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="ec_sso_screen_is_not_redirecting_to_my_idp"></a>SSO screen is not redirecting to my IdP</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>Double check the <code class="literal">saml_idp.sso_url</code> provided during IdP registration.
This should be the URL to your IdP&#8217;s SAML application.
Elastic Cloud will redirect to this URL during sign in.</p>
<div class="position-relative"><h4><a id="ec_failure_to_redirect_back_to_elastic_cloud_after_idp_log_in"></a>Failure to redirect back to Elastic Cloud after IdP log in</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>There could be a variety of issues that might result in sign in failure.
Try tracing the SAML request with a SAML tracer.
Double check the components of the SAML request:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">Destination</code> and <code class="literal">Recipient</code> should match the <code class="literal">acs</code> provided by the Elastic Cloud IdP registration API.
</li>
<li class="listitem">
An <code class="literal">AttributeStatement</code> named <code class="literal">email</code> should be sent with the email matching a domain claimed by your Elastic Cloud organization.
</li>
<li class="listitem">
The <code class="literal">AudienceRestriction</code> <code class="literal">Audience</code> should match the <code class="literal">sp_entity_id</code> provided by the Elastic Cloud IdP registration API.
</li>
<li class="listitem">
The <code class="literal">Issuer</code> should match the value provided to the Elastic Cloud IdP registration API.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="ec_limitations"></a>Limitations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso.asciidoc">edit</a></div>
<p>At this time, the following features are not supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Role mappings: Assign Elastic Cloud roles based on a SAML attribute passed by your IdP. Manage the role mappings in the Elastic Cloud UI.
</li>
<li class="listitem">
Domain claiming and IdP registration UI: Manage the IdP configuration for your organization and your claimed domains in the Elastic Cloud UI
</li>
<li class="listitem">
Email-based SSO lookup: Enter an email address at sign-in and be redirected to the right IdP with no need for the organization SSO URL.
</li>
</ul>
</div>
<p>These features will be available in a future release.</p>


</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ec-user-privileges.html">« User roles and privileges</a>
</span>
<span class="next">
<a href="ec-saml-sso-okta.html">Register Elastic Cloud SAML in Okta »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
