<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Why is my master node unavailable? | Elasticsearch Service Documentation | Elastic</title>
<meta class="elastic" name="content" content="Why is my master node unavailable? | Elasticsearch Service Documentation">

<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-monitoring-diagnose-resolve.html" title="Diagnose and resolve issues"/>
<link rel="prev" href="ec-monitoring-diagnose-resolve.html" title="Diagnose and resolve issues"/>
<link rel="next" href="ec-scenario_why_are_shards_unavailable.html" title="Why are my shards unavailable?"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elastic Cloud"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="latest"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="ec-monitoring-diagnose-resolve.html">« Diagnose and resolve issues</a>
</span>
<span class="next">
<a href="ec-scenario_why_are_shards_unavailable.html">Why are my shards unavailable? »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-monitoring.html">Monitoring your deployment</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-monitoring-diagnose-resolve.html">Diagnose and resolve issues</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Why is my master node unavailable?</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ec-scenario_why_is_my_master_node_unavailable"></a>Why is my master node unavailable?<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></h2>
</div></div></div>
<p>This section provides a list of common symptoms and possible actions that you can take to resolve issues when the master node becomes unhealthy or unavailable. This guide is particularly useful if you are not <a class="xref" href="ec-monitoring-setup.html" title="How to set up monitoring">shipping your logs and metrics</a> to a dedicated monitoring cluster.</p>
<p><span class="strong strong"><strong>What are the symptoms?</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ec-scenario_why_is_my_master_node_unavailable.html#ec-single-node-deployment-disk-used" title="Full disk on single-node deployment">Full disk on single-node deployment</a>
</li>
<li class="listitem">
<a class="xref" href="ec-scenario_why_is_my_master_node_unavailable.html#ec-multiple-node-deployment-disk-used" title="Full disk on multiple-nodes deployment">Full disk on multiple-nodes deployment</a>
</li>
<li class="listitem">
<a class="xref" href="ec-scenario_why_is_my_master_node_unavailable.html#ec-jvm-heap-usage-exceed-allowed-threshold" title="JVM heap usage exceeds the allowed threshold on master nodes">JVM heap usage exceeds the allowed threshold on master nodes</a>
</li>
<li class="listitem">
<a class="xref" href="ec-scenario_why_is_my_master_node_unavailable.html#ec-cpu-usage-exceed-allowed-threshold" title="CPU usage exceeds the allowed threshold on master nodes">CPU usage exceeds the allowed threshold on master nodes</a>
</li>
<li class="listitem">
<a class="xref" href="ec-scenario_why_is_my_master_node_unavailable.html#ec-nodes-unavailable-missing" title="Some nodes are unavailable and are displayed as missing">Some nodes are unavailable and are displayed as missing</a>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>What is the impact?</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Only some search results are successful
</li>
<li class="listitem">
Ingesting, updating, and deleting data do not work
</li>
<li class="listitem">
Most Elasticsearch API requests fail
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Some actions described here, such as stopping indexing or Machine Learning jobs, are temporary remediations intended to get your cluster into a state where you can make configuration changes to resolve the issue.</p>
</div>
</div>
<p>For production deployments, we recommend setting up a dedicated monitoring cluster to collect metrics and logs, troubleshooting views, and cluster alerts.</p>
<p>If your issue is not addressed here, open a topic in the <a href="https://discuss.elastic.co" class="ulink" target="_top">Discuss</a> forum or contact <a href="mailto:support@elastic.co" class="ulink" target="_top">support@elastic.co</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ec-single-node-deployment-disk-used"></a>Full disk on single-node deployment<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></h3>
</div></div></div>
<p><span class="strong strong"><strong>Health check</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>From the Elasticsearch Service panel, click the <span class="strong strong"><strong>Quick link</strong></span> icon corresponding to the deployment that you want to manage.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-quick-link-to-deployment.png" alt="Quick link to the deployment page">
</div>
</div>
</li>
<li class="listitem">
<p>On your deployment page, scroll down to <span class="strong strong"><strong>Instances</strong></span> and check if the disk allocation for your Elasticsearch instance is over 90%.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-full-disk-single-node.png" alt="Full disk on single-node deployment">
</div>
</div>
</li>
</ol>
</div>
<p><span class="strong strong"><strong>Possible cause</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The available storage is insufficient for the amount of ingested data.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Resolution</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/8.14/docs-delete.html" class="ulink" target="_top">Delete unused data</a>.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If your Elasticsearch cluster is unhealthy and reports a status of red, you can only delete unused data or reach out to <a href="mailto:support@elastic.co" class="ulink" target="_top">support@elastic.co</a> for help. If your Elasticsearch cluster reports a status of yellow or green, you might still take the following preventive steps.</p>
</div>
</div>
<p><span class="strong strong"><strong>Preventions</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Increase the disk size on your Hot and Content tier.</p>
<p>From your deployment menu, go to the <span class="strong strong"><strong>Edit</strong></span> page and increase the <span class="strong strong"><strong>Size per zone</strong></span> for your Hot data and Content tiers.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-increase-size-per-zone.png" alt="Increase size per zone">
</div>
</div>
</li>
<li class="listitem">
Enable <a class="xref" href="ec-autoscaling.html" title="Deployment autoscaling">autoscaling</a> to grow your cluster automatically when it runs out of space.
</li>
<li class="listitem">
Configure <a class="xref" href="ec-configure-index-management.html" title="Configure index management">ILM</a> policies to automatically delete unused data.
</li>
<li class="listitem">
Add nodes to your Elasticsearch cluster and enable <a href="/guide/en/elasticsearch/reference/8.14/data-tiers.html" class="ulink" target="_top">data tiers</a> to move older data that you don&#8217;t query often to more cost-effective storage.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ec-multiple-node-deployment-disk-used"></a>Full disk on multiple-nodes deployment<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></h3>
</div></div></div>
<p><span class="strong strong"><strong>Health check</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>From the Elasticsearch Service panel, click the <span class="strong strong"><strong>Quick link</strong></span> icon corresponding to the deployment that you want to manage.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-quick-link-to-deployment.png" alt="Quick link to the deployment page">
</div>
</div>
</li>
<li class="listitem">
<p>On your deployment page, scroll down to <span class="strong strong"><strong>Instances</strong></span> and check if the disk allocation for any of your Elasticsearch instances is over 90%.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-full-disk-multiple-nodes.png" alt="Full disk on multiple-nodes deployment">
</div>
</div>
</li>
</ol>
</div>
<p><span class="strong strong"><strong>Possible cause</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The available storage is insufficient for the amount of ingested data.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Resolution</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/8.14/docs-delete.html" class="ulink" target="_top">Delete unused data</a>.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If your Elasticsearch cluster is unhealthy and reports a status of red, you can only delete unused data or reach out to <a href="mailto:support@elastic.co" class="ulink" target="_top">support@elastic.co</a> for help. If your Elasticsearch cluster reports a status of yellow or green, you might still take the following preventive steps.</p>
</div>
</div>
<p><span class="strong strong"><strong>Preventions</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Increase the disk size.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>On your deployment page, scroll down to <span class="strong strong"><strong>Instances</strong></span> and identify the node attribute of the instances that are running out of disk space.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-node-attribute.png" alt="Instance node attribute">
</div>
</div>
</li>
<li class="listitem">
<p>Use the node types identified at step 1 to find out the corresponding data tier.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-node-types-data-tiers.png" alt="Node type and corresponding attribute">
</div>
</div>
</li>
<li class="listitem">
<p>From your deployment menu, go to the <span class="strong strong"><strong>Edit</strong></span> page and increase the <span class="strong strong"><strong>Size per zone</strong></span> for the data tiers identified at step 2.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-increase-size-per-zone.png" alt="Increase size per zone">
</div>
</div>
</li>
</ol>
</div>
</li>
<li class="listitem">
Enable <a class="xref" href="ec-autoscaling.html" title="Deployment autoscaling">autoscaling</a> to grow your cluster automatically when it runs out of space.
</li>
<li class="listitem">
Configure <a class="xref" href="ec-configure-index-management.html" title="Configure index management">ILM</a> policies to automatically delete unused data.
</li>
<li class="listitem">
Enable <a href="/guide/en/elasticsearch/reference/8.14/data-tiers.html" class="ulink" target="_top">data tiers</a> to move older data that you don&#8217;t query often to more cost-effective storage.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ec-jvm-heap-usage-exceed-allowed-threshold"></a>JVM heap usage exceeds the allowed threshold on master nodes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></h3>
</div></div></div>
<p><span class="strong strong"><strong>Health check</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>From the Elasticsearch Service panel, click the <span class="strong strong"><strong>Quick link</strong></span> icon corresponding to the deployment that you want to manage.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-quick-link-to-deployment.png" alt="Quick link to the deployment page">
</div>
</div>
</li>
<li class="listitem">
<p>On your deployment page, scroll down to <span class="strong strong"><strong>Instances</strong></span> and check if the JVM memory pressure for your Elasticsearch instances is high.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-deployment-instances-config.png" alt="Deployment instances configuration">
</div>
</div>
</li>
</ol>
</div>
<p><span class="strong strong"><strong>Possible causes</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>The master node is overwhelmed by a large number of snapshots or shards.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>External tasks initiated by clients</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Index, search, update
</li>
<li class="listitem">
Frequent template updates due to the Beats configuration
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Internal tasks initiated by users</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Machine Learning jobs, watches, monitoring, ingest pipeline
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Internal tasks initiated by Elasticsearch</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Nodes joining and leaving due to hardware failures
</li>
<li class="listitem">
Shard allocation due to nodes joining and leaving
</li>
<li class="listitem">
Configuration of <a class="xref" href="ec-configure-index-management.html" title="Configure index management">ILM</a> policies.
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Resolutions</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>If the master node is overwhelmed by external tasks initiated by clients:</p>
<p>Investigate which clients might be overwhelming the cluster and reduce the request rate or pause ingesting, searching, or updating from the client. If you are using Beats, temporarily stop the Beat that&#8217;s overwhelming the cluster to avoid frequent template updates.</p>
</li>
<li class="listitem">
<p>If the master node is overwhelmed by internal tasks initiated by users:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Check <a href="/guide/en/elasticsearch/reference/8.14/cat-pending-tasks.html" class="ulink" target="_top">cluster-level pending tasks</a>.
</li>
<li class="listitem">
Reduce the number of Machine Learning jobs or watches.
</li>
<li class="listitem">
Change the number of ingest pipelines or processors to use less memory.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>If the master node is overwhelmed by internal tasks initiated by Elasticsearch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
For nodes joining and leaving, this should resolve itself. If increasing the master nodes size doesn’t resolve the issue, contact support.
</li>
<li class="listitem">
<p>For shard allocation, inspect the progress of shards recovery.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make sure <code class="literal">indices.recovery.max_concurrent_operations</code> is not aggressive, which could cause the master to be unavailable.
</li>
<li class="listitem">
Make sure <code class="literal">indices.recovery.max_bytes_per_sec</code> is set adequately to avoid impact on ingest and search workload.
</li>
</ul>
</div>
</li>
<li class="listitem">
Check <a class="xref" href="ec-configure-index-management.html" title="Configure index management">ILM</a> policies to avoid index rollover and relocate actions that are concurrent and aggressive.
</li>
</ul>
</div>
</li>
<li class="listitem">
If the master node is overwhelmed by a large number of snapshots, reduce the number of snapshots in the repo.
</li>
<li class="listitem">
If the master node is overwhelmed by a large number of shards, delete unneeded indices and shrink read-only indices to fewer shards. For more information, check <a href="/guide/en/elasticsearch/reference/8.14/size-your-shards.html#reduce-cluster-shard-count" class="ulink" target="_top">Reduce a cluster&#8217;s shard count</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ec-cpu-usage-exceed-allowed-threshold"></a>CPU usage exceeds the allowed threshold on master nodes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></h3>
</div></div></div>
<p><span class="strong strong"><strong>Health check</strong></span></p>
<p>By default, the allowed CPU usage threshold is set at 85%.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>From the Elasticsearch Service panel, click the <span class="strong strong"><strong>Quick link</strong></span> icon corresponding to the deployment that you want to manage.</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-quick-link-to-deployment.png" alt="Quick link to the deployment page">
</div>
</div>
</li>
<li class="listitem">
<p>Identify the IDs of your master nodes. On your deployment page, scroll down to <span class="strong strong"><strong>Instances</strong></span> and filter your instance configuration by master. The IDs of your master nodes are in the title. In this example, the IDs are 21, 26 and 27:</p>
<div class="imageblock">
<div class="content">
<img src="images/ec-instances-filtered-by-master-id.png" alt="Instances configuration filtered by master nodes ID">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The name of the instance configuration might differ depending on the cloud provider.</p>
</div>
</div>
</li>
<li class="listitem">
Navigate to the <span class="strong strong"><strong>Performance</strong></span> page of your deployment. Check if the CPU usage of your master nodes exceeds 85%. Your master node has the format <code class="literal">instance-&lt;ID&gt;`</code>, where <code class="literal">&lt;ID&gt;`</code> is the ID of the master node.
</li>
</ol>
</div>
<p>If you use <a href="/guide/en/kibana/8.14/xpack-monitoring.html" class="ulink" target="_top">Stack Monitoring</a>, open Kibana from your deployment page and select <span class="strong strong"><strong>Stack Monitoring</strong></span> from the menu or the search bar.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Stack Monitoring comes with out-of-the-box rules, but you need to enable them when prompted.</p>
</div>
</div>
<p><span class="strong strong"><strong>Possible causes</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The master node is overwhelmed by a large number of snapshots or shards.
</li>
<li class="listitem">
<p>The memory available on the master node is overwhelmed by these tasks:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>External tasks initiated by clients</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Index, search, update
</li>
<li class="listitem">
Frequent template updates due to the Beats configuration
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Internal tasks initiated by users</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Machine Learning jobs, watches, monitoring, ingest pipelines
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Internal tasks initiated by Elasticsearch</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Nodes joining and leaving due to hardware failures
</li>
<li class="listitem">
Shard allocation due to nodes joining and leaving
</li>
<li class="listitem">
Configuration of <a class="xref" href="ec-configure-index-management.html" title="Configure index management">ILM</a> policies.
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Resolutions</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Navigate to the <span class="strong strong"><strong>Edit</strong></span> page of your deployment and increase the master node size.
</li>
<li class="listitem">
<a href="/guide/en/elastic-stack/8.14/upgrading-elastic-stack.html" class="ulink" target="_top">Upgrade the cluster</a> to the latest version.
</li>
<li class="listitem">
<p>If the master node is overwhelmed by external tasks initiated by clients:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Reduce the request rate or pause ingesting, searching, or updating from the client.
</li>
<li class="listitem">
Enable ingest and search-based autoscaling.
</li>
<li class="listitem">
Stop Beats to avoid frequent template updates.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>If the master node is overwhelmed by internal tasks initiated by users:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Check <a href="/guide/en/elasticsearch/reference/8.14/cat-pending-tasks.html" class="ulink" target="_top">cluster-level pending tasks</a>.
</li>
<li class="listitem">
Reduce the number of Machine Learning jobs or watches.
</li>
<li class="listitem">
Change the number of ingest pipelines or processors to use less memory.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>If the master node is overwhelmed by internal tasks initiated by Elasticsearch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
For nodes joining and leaving, this should resolve itself. If increasing the master nodes size doesn’t resolve the issue, contact support.
</li>
<li class="listitem">
<p>For shard allocation, inspect the progress of shards recovery. If there’s no progress, contact support.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make sure <code class="literal">indices.recovery.max_concurrent_operations</code> is not aggressive, which could cause the master to be unavailable.
</li>
<li class="listitem">
Make sure <code class="literal">indices.recovery.max_bytes_per_sec</code> is set adequately to avoid impact on ingest and search workload.
</li>
</ul>
</div>
</li>
<li class="listitem">
Check <a class="xref" href="ec-configure-index-management.html" title="Configure index management">ILM</a> policies to avoid index rollover and relocate actions that are concurrent and aggressive.
</li>
</ul>
</div>
</li>
<li class="listitem">
If the master node is overwhelmed by a large number of snapshots, reduce the number of snapshots in the repo.
</li>
<li class="listitem">
If the master node is overwhelmed by a large number of shards, reduce the number of shards on the node. For more information, check <a href="/guide/en/elasticsearch/reference/8.14/size-your-shards.html" class="ulink" target="_top">Size your shards</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ec-nodes-unavailable-missing"></a>Some nodes are unavailable and are displayed as missing<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></h3>
</div></div></div>
<p><span class="strong strong"><strong>Health check</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the <a href="/guide/en/observability/8.14/analyze-metrics.html" class="ulink" target="_top">Metrics inventory</a> to identify unavailable or unhealthy nodes. If the number of minimum master nodes is down, Elasticsearch is not available.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Possible causes</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Hardware issue.
</li>
<li class="listitem">
Routing has stopped because of a previous ES configuration failure.
</li>
<li class="listitem">
Disk/memory/CPU are saturated.
</li>
<li class="listitem">
The network is saturated or disconnected.
</li>
<li class="listitem">
Nodes are unable to join.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Resolutions</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Hardware issue: Any unhealthy hardware detected by the platform is automatically vacated within the hour. If this doesn’t happen, contact support.
</li>
<li class="listitem">
Routing stopped: A failed Elasticsearch configuration might stop the nodes routing. Restart the routing manually to bring the node back to health.
</li>
<li class="listitem">
<p>Disk/memory/CPU saturated:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/8.14/docs-delete.html" class="ulink" target="_top">Delete unused data</a>.
</li>
<li class="listitem">
Increase disk size.
</li>
<li class="listitem">
<a class="xref" href="ec-autoscaling.html" title="Deployment autoscaling">Enable autoscaling</a>.
</li>
<li class="listitem">
Configuration of <a class="xref" href="ec-configure-index-management.html" title="Configure index management">ILM</a> policies.
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/8.14/data-tiers.html" class="ulink" target="_top">Manage data tiers</a>.
</li>
</ul>
</div>
</li>
<li class="listitem">
Network saturated or disconnected: Contact support.
</li>
<li class="listitem">
Nodes unable to join: Fix the Elasticsearch configuration.
</li>
<li class="listitem">
Nodes unable to join: Contact support.
</li>
</ul>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ec-monitoring-diagnose-resolve.html">« Diagnose and resolve issues</a>
</span>
<span class="next">
<a href="ec-scenario_why_are_shards_unavailable.html">Why are my shards unavailable? »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
