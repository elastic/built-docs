<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Work with snapshots | Elasticsearch Service Documentation | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-snapshot-restore.html" title="Snapshot and restore"/>
<link rel="prev" href="ec-azure-snapshotting.html" title="Configure a snapshot repository using Azure Blob storage"/>
<link rel="next" href="ec-billing.html" title="Your account and billing"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="ms-49"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span>
»
<span class="breadcrumb-link"><a href="ec-snapshot-restore.html">Snapshot and restore</a></span>
»
<span class="breadcrumb-node">Work with snapshots</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ec-azure-snapshotting.html">« Configure a snapshot repository using Azure Blob storage</a>
</span>
<span class="next">
<a href="ec-billing.html">Your account and billing »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ec-restoring-snapshots"></a>Work with snapshots<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-49/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h2>
</div></div></div>
<p>Snapshots provide a way to restore your Elasticsearch indices. They can be used to copy indices for testing, to recover from failures or accidental deletions, or to migrate data to other deployments.</p>
<p>By default, Elasticsearch Service takes a snapshot of all the indices in your Elasticsearch cluster every 30 minutes. You can set a different snapshot interval, if needed for your environment. You can also take snapshots on demand, without having to wait for the next interval. Taking a snapshot on demand does not affect the retention schedule for existing snapshots, it just adds an additional snapshot to the repository. This might be helpful if you are about to make a deployment change and you don&#8217;t have a current snapshot.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Snapshots back up only open indices. If you close an index, it is not included in snapshots and you will not be able to restore the data.</p>
</div>
</div>
<p><span class="strong strong"><strong>Beginning with Elastic Stack version 7.6</strong></span>, use Kibana to manage your snapshots. In Kibana, you can set up additional repositories where the snapshots are stored, other than the one currently managed by Elasticsearch Service. You can view and delete snapshots, and configure a snapshot lifecycle management (SLM) policy to automate when snapshots are created and deleted. To learn more, see the Kibana <a href="/guide/en/kibana/7.10/snapshot-repositories.html" class="ulink" target="_top">Snapshot and Restore</a> documentation.</p>
<p>From within Elasticsearch Service you can <a class="xref" href="ec-restoring-snapshots.html#ec-list-snapshots" title="List available snapshots">view the list of snapshots</a> and also <a class="xref" href="ec-restoring-snapshots.html#ec-restore-snapshot" title="Restore a snapshot">restore a snapshot</a> from a different deployment in the same region.</p>
<p><span class="strong strong"><strong>For deployments with Elastic Stack versions 7.5 and earlier</strong></span>, anywhere between a minimum of 12 and up to a maximum of the 100 most recent, successful snapshots may be stored. These tasks are available from the Elasticsearch Service UI:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ec-restoring-snapshots.html#ec-list-snapshots" title="List available snapshots">List the available snapshots</a>
</li>
<li class="listitem">
<a class="xref" href="ec-restoring-snapshots.html#ec-change-retention-period" title="Configure the snapshot retention period">Configure the snapshot retention period</a>
</li>
<li class="listitem">
<a class="xref" href="ec-restoring-snapshots.html#ec-restore-snapshot" title="Restore a snapshot">Restore a snapshot</a>
</li>
<li class="listitem">
<a class="xref" href="ec-restoring-snapshots.html#ec-restore-across-clusters" title="Restore across clusters">Restore a snapshot from another cluster</a>
</li>
</ul>
</div>
<h3><a id="ec-list-snapshots"></a>List available snapshots<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-49/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h3>
<p>To list all available snapshots:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>Select your deployment on the home page in the Elasticsearch Service card or go to the deployments page.</p>
<p>Narrow your deployments by name, ID, or choose from several other filters. To customize your view, use a combination of filters, or change the format from a grid to a list.</p>
</li>
<li class="listitem">
From your deployment menu, go to <span class="strong strong"><strong>Elasticsearch</strong></span> and then <span class="strong strong"><strong>Snapshots</strong></span> where the list of available snapshots is shown, newest first.
</li>
<li class="listitem">
Click on a specific snapshot to see more details.
</li>
</ol>
</div>
<p>The list shows when the snapshot was completed, whether the snapshot succeeded or was only partially successful, along with the number of shards and indices in the snapshot.</p>
<h3><a id="ec-change-retention-period"></a>Configure the snapshot retention period<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-49/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h3>
<p>For Elastic Stack versions 7.6 and above, refer to the Kibana <a href="/guide/en/kibana/7.10/snapshot-repositories.html" class="ulink" target="_top">Snapshot and Restore</a> documentation to learn about the snapshot management features.</p>
<p>For Elastic Stack versions 7.5 and below, from within Elasticsearch Service you can set the snapshot interval and count to have control over the retention period for your clusters. The calculation displayed is based on a projected estimate of the snapshot interval, expected snapshot count, and current cluster size. Changing any of these factors results in a different retention period.</p>
<h4><a id="ec-change-snapshot-interval"></a>Change the snapshot interval<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-49/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h4>
<p>If you find the the default snapshot interval isn&#8217;t working for your environment, you can change it. It might make sense to use a 4 or 24 hour interval if the data in your index doesn&#8217;t change that often but you need more snapshot history.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>Select your deployment on the home page in the Elasticsearch Service card or go to the deployments page.</p>
<p>Narrow your deployments by name, ID, or choose from several other filters. To customize your view, use a combination of filters, or change the format from a grid to a list.</p>
</li>
<li class="listitem">
Open the <span class="strong strong"><strong>Snapshot settings</strong></span> section.
</li>
<li class="listitem">
Make a selection from the <span class="strong strong"><strong>Snapshot interval</strong></span> drop-down menu.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Update settings</strong></span>.
</li>
</ol>
</div>
<p>When you change the interval, the interval timer begins after the next scheduled snapshot.</p>
<h4><a id="ec-change-snapshot-count"></a>Change the snapshot count<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-49/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h4>
<p>You can get more control over your repository space by adjusting the number of snapshots that are stored for your cluster. The minimum number of snapshots must be at least 12, the maximum limit is 100.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>Select your deployment on the home page in the Elasticsearch Service card or go to the deployments page.</p>
<p>Narrow your deployments by name, ID, or choose from several other filters. To customize your view, use a combination of filters, or change the format from a grid to a list.</p>
</li>
<li class="listitem">
Open the <span class="strong strong"><strong>Snapshot settings</strong></span> section.
</li>
<li class="listitem">
Enter a number in the <span class="strong strong"><strong>Snapshot count</strong></span> field.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Update settings</strong></span>.
</li>
</ol>
</div>
<h3><a id="ec-restore-snapshot"></a>Restore a snapshot<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-49/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h3>
<p>For Elastic Stack versions 7.6 and above, for details about restoring a snapshot see the Kibana <a href="/guide/en/kibana/7.10/snapshot-repositories.html" class="ulink" target="_top">Snapshot and Restore</a> documentation.</p>
<p>For Elastic Stack versions 7.5 and below, use these steps to restore a snapshot:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="ec-restoring-snapshots.html#ec-list-snapshots" title="List available snapshots">List the available snapshots</a>, and click on the timestamp link of a snapshot to see the snapshot details.
</li>
<li class="listitem">
<p>Optional: In the <span class="strong strong"><strong>Restore Snapshot</strong></span> section, specify how you want to restore the snapshot. If you do not specify any options, all the indices of the snapshot are restored on the Elasticsearch cluster where the snapshot was taken.</p>
<p><span class="image"><img src="images/restore-snapshot.png" alt="Snapshot restore"></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
In the <span class="strong strong"><strong>Specify Indices</strong></span> field, you can limit which indices get restored by specifying an index pattern. For example, entering <code class="literal">logstash-*,.kibana</code> restores any indices starting with <code class="literal">logstash-</code> as well as the <code class="literal">.kibana</code> index. All other indices are ignored.
</li>
<li class="listitem">
You might need to specify values in the <span class="strong strong"><strong>Match</strong></span> and <span class="strong strong"><strong>Replace with</strong></span> fields, if you restore to the same cluster, as you cannot restore to an index that already exists.
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist orderedlist">
<ol class="orderedlist" start="3">
<li class="listitem">
Click <span class="strong strong"><strong>Restore snapshot</strong></span>.
</li>
</ol>
</div>
<p>After the snapshot is restored, a brief message indicates that the operation was successful.</p>
<h3><a id="ec-restore-across-clusters"></a>Restore across clusters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-49/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h3>
<p>Snapshots can be restored to either the same Elasticsearch cluster or to another cluster. If you are restoring all indices to another cluster, you can <em>clone</em> a cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Users created using the X-Pack security features or using Shield are not included when you restore across clusters, only data from Elasticsearch indices is restored. If you do want to create a cloned cluster with the same users as your old cluster, you need to recreate the users manually on the new cluster.</p>
</div>
</div>
<p>Restoring to another cluster is useful for scenarios where isolating activities on a separate cluster is beneficial, such as:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Performing ad hoc analytics
</span>
</dt>
<dd>
For most logging and metrics use cases, it is cost prohibitive to have all the data in memory, even if it would provide the best performance for aggregations. Cloning the relevant data to an ad hoc analytics cluster that can be discarded after use is a cost effective way to experiment with your data, without risk to existing clusters used for production.
</dd>
<dt>
<span class="term">
Enabling your developers
</span>
</dt>
<dd>
Realistic test data is crucial for uncovering unexpected errors early in the development cycle. What can be more realistic than actual data from a production cluster? Giving your developers access to real production data is a great way to break down silos.
</dd>
<dt>
<span class="term">
Testing mapping changes
</span>
</dt>
<dd>
Mapping changes almost always require reindexing. Unless your data volume is trivial, reindexing requires time and tweaking the parameters to achieve the best reindexing performance usually takes a little trial and error. While this use case could also be handled by running the scan and scroll query directly against the source cluster, a long lived scroll has the side effect of blocking merges even if the scan query is very light weight.
</dd>
<dt>
<span class="term">
Integration testing
</span>
</dt>
<dd>
Test your application against a real live Elasticsearch cluster with actual data. If you automate this, you could also aggregate performance metrics from the tests and use those metrics to detect if a change in your application has introduced a performance degradation.
</dd>
</dl>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>A cluster is eligible as a destination for a snapshot restore, if it meets these criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The cluster is in the same region. For example, a snapshot made in <code class="literal">eu-west-1</code> cannot be restored to <code class="literal">us-east-1</code> at this point. If you need to restore snapshots across regions, use a <a class="xref" href="ec-custom-repository.html" title="Snapshot and restore with custom repositories">custom repository</a>.
</li>
<li class="listitem">
The destination cluster is able to read the indices. You can restore to your Elasticsearch cluster snapshots of indices created back to the previous major version.
</li>
</ul>
</div>
</div>
</div>
<p>To restore snapshots across clusters:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>First, <a class="xref" href="ec-create-deployment.html" title="Create your deployment">create a new deployment</a> and in the <span class="strong strong"><strong>Snapshot source</strong></span> section under Deployment settings, select the deployment that you want to restore a snapshot <em>from</em>.</p>
<p>The latest successful snapshot from the cluster you selected is restored on the new cluster when you create it. If you don&#8217;t know the exact name, you can put in a few characters and then select from the list of matching deployments.</p>
<p><span class="image"><img src="images/snapshot-restore-from.png" alt="Restoring from a snapshot"></span></p>
</li>
<li class="listitem">
Manually recreate users using the X-Pack security features or using Shield on the new cluster. User information is not included when you restore across clusters.
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ec-azure-snapshotting.html">« Configure a snapshot repository using Azure Blob storage</a>
</span>
<span class="next">
<a href="ec-billing.html">Your account and billing »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"go":{"hasAny":true},"ruby":{"hasAny":true},"java":{"hasAny":true},"javascript":{"hasAny":true},"python":{"hasAny":true},"csharp":{"hasAny":true}}}}</script>
  </body>
</html>
