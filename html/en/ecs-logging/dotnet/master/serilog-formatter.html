<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Serilog formatter | ECS Logging .NET Reference | Elastic</title>
<meta class="elastic" name="content" content="Serilog formatter | ECS Logging .NET Reference">

<link rel="home" href="index.html" title="ECS Logging .NET Reference"/>
<link rel="up" href="_formatters.html" title="Formatters"/>
<link rel="prev" href="_formatters.html" title="Formatters"/>
<link rel="next" href="nlog-formatter.html" title="NLog Layout"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="ECS Logging .NET Reference"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/ECS-logging/.NET/Guide"/>
<meta name="DC.subject" content="ECS Logging .NET Reference"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="_formatters.html">« Formatters</a>
</span>
<span class="next">
<a href="nlog-formatter.html">NLog Layout »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
    <div class="related-products-title">ECS Logging:</div>
    <div class="dropdown-anchor" tabindex="0">.NET Reference<span class="dropdown-icon"></span></div>
    <div class="dropdown-content">
      <ul>
        <li><a href="/guide/en/ecs-logging/overview/current/intro.html">Reference</a></li>
        <li><a href="/guide/en/ecs-logging/go-logrus/current/intro.html">Go (Logrus) Reference</a></li>
        <li><a href="/guide/en/ecs-logging/go-zap/current/intro.html">Go (zap) Reference</a></li>
        <li><a href="/guide/en/ecs-logging/go-zerolog/current/intro.html">Go (zerolog) Reference</a></li>
        <li><a href="/guide/en/ecs-logging/java/current/intro.html">Java Reference</a></li>
        <li><a href="/guide/en/ecs-logging/dotnet/current/intro.html">.NET Reference</a></li>
        <li><a href="/guide/en/ecs-logging/nodejs/current/intro.html">Node.js Reference</a></li>
        <li><a href="/guide/en/ecs-logging/ruby/current/intro.html">Ruby Reference</a></li>
        <li><a href="/guide/en/ecs-logging/php/current/intro.html">PHP Reference</a></li>
        <li><a href="/guide/en/ecs-logging/python/current/intro.html">Python Reference</a></li>
      </ul>
    </div>
  </div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="_formatters.html">Formatters</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Serilog formatter</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/formatters/serilog.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="serilog-formatter"></a>Serilog formatter</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/formatters/serilog.asciidoc">edit</a></div>
</div></div></div>
<p>This <code class="literal">ITextFormatter</code> implementation formats a Serilog event into a JSON representation that adheres to the Elastic Common Schema specification.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="_installation_2"></a>Installation</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/formatters/serilog.asciidoc">edit</a></div>
</div></div></div>
<p>Add a reference to the <a href="http://nuget.org/packages/Elastic.CommonSchema.Serilog" class="ulink" target="_top">Elastic.CommonSchema.Serilog</a> package:</p>
<div class="pre_wrapper lang-xml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-xml">&lt;PackageReference Include="Elastic.CommonSchema.Serilog" Version="8.6.0" /&gt;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="_usage_2"></a>Usage</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/formatters/serilog.asciidoc">edit</a></div>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-csharp">var logger = new LoggerConfiguration()
    .WriteTo.Console(new EcsTextFormatter())
    .CreateLogger();</pre>
</div>
<p>In the code snippet above <code class="literal">new EcsTextFormatter()</code> enables the text formatter and instructs Serilog to format the event as JSON. The sample above uses the Console sink, but you are free to use any sink of your choice, perhaps consider using a filesystem sink and <a href="/downloads/beats/filebeat" class="ulink" target="_top">Elastic Filebeat</a> for durable and reliable ingestion.</p>
<p>In ASP.NET (core) applications</p>
<div class="pre_wrapper lang-csharp">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-csharp">.UseSerilog((ctx, config) =&gt;
{
	// Ensure HttpContextAccessor is accessible
	var httpAccessor = ctx.Configuration.Get&lt;HttpContextAccessor&gt;();

	config
		.ReadFrom.Configuration(ctx.Configuration)
		.Enrich.WithEcsHttpContext(httpAccessor)
		.WriteTo.Async(a =&gt; a.Console(new EcsTextFormatter()));
})</pre>
</div>
<p>The <code class="literal">WithEcsHttpContext</code> ensures logs will be enriched with <code class="literal">HttpContext</code> data.</p>
<p>An example of the output is given below:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "@timestamp": "2019-11-22T14:59:02.5903135+11:00",
  "log.level": "Information",
  "message": "Log message",
  "ecs": {
    "version": "1.4.0"
  },
  "event": {
    "severity": 0,
    "timezone": "AUS Eastern Standard Time",
    "created": "2019-11-22T14:59:02.5903135+11:00"
  },
  "log": {
    "logger": "Elastic.CommonSchema.Serilog"
  },
  "process": {
    "thread": {
      "id": 1
    },
    "executable": "System.Threading.ExecutionContext"
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="_configuration"></a>Configuration</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/formatters/serilog.asciidoc">edit</a></div>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Option</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">MapCurrentThead</code></p></td>
<td align="left" valign="top"><p><code class="literal">true</code> map <code class="literal">ecs.process</code> by looking up the <code class="literal">Process</code> from the current thread</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">MapHttpAdapter</code></p></td>
<td align="left" valign="top"><p><code class="literal">null</code> a way to map <code class="literal">HttpContextAccessor</code> to ECS fields.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">LogEventPropertiesToFilter</code></p></td>
<td align="left" valign="top"><p>A <code class="literal">Set&lt;string&gt;</code> of properties that should not be emitted as <code class="literal">labels.*</code> or <code class="literal">metadata.*</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">MapCustom</code></p></td>
<td align="left" valign="top"><p>A Func that allows you to mutate the EcsDocument before its fully converted.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="_ecs_aware_message_templates_2"></a>ECS Aware Message Templates</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/formatters/serilog.asciidoc">edit</a></div>
</div></div></div>
<p>This formatter also allows you to set ECS fields directly from the message template using properties that adhere to the
<a href="https://messagetemplates.org/" class="ulink" target="_top">https://messagetemplates.org/</a> format.</p>
<p>The available ECS message template properties are listed under <code class="literal">LogTemplateProperties.*</code> e.g <code class="literal">LogTemplateProperties.TraceId</code></p>
<div class="pre_wrapper lang-chsarp">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-chsarp">Log.Information("The time is {TraceId}", "my-trace-id");</pre>
</div>
<p>Will override <code class="literal">trace.id</code> on the resulting ECS json document.</p>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="_formatters.html">« Formatters</a>
</span>
<span class="next">
<a href="nlog-formatter.html">NLog Layout »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
