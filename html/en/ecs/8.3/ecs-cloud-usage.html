<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Cloud Fields Usage and Examples | Elastic Common Schema (ECS) Reference [8.3] | Elastic</title>
<meta class="elastic" name="content" content="Cloud Fields Usage and Examples | Elastic Common Schema (ECS) Reference [8.3]">

<link rel="home" href="index.html" title="Elastic Common Schema (ECS) Reference [8.3]"/>
<link rel="up" href="ecs-cloud.html" title="Cloud Fields"/>
<link rel="prev" href="ecs-cloud.html" title="Cloud Fields"/>
<link rel="next" href="ecs-code_signature.html" title="Code Signature Fields"/>
<meta class="elastic" name="product_version" content="8.3"/>
<meta class="elastic" name="product_name" content="Elastic Common Schema (ECS)"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elastic Common Schema (ECS)/Reference/8.3"/>
<meta name="DC.subject" content="Elastic Common Schema (ECS)"/>
<meta name="DC.identifier" content="8.3"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Common Schema (ECS) Reference [8.3]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ecs-field-reference.html">ECS Field Reference</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ecs-cloud.html">Cloud Fields</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ecs-cloud.html">« Cloud Fields</a>
</span>
<span class="next">
<a href="ecs-code_signature.html">Code Signature Fields »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ecs-cloud-usage"></a>Cloud Fields Usage and Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ecs/edit/8.3/docs/fields/usage/cloud.asciidoc">edit</a></h3>
</div></div></div>
<p>Here are the subjects covered in this page.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><a class="xref" href="ecs-cloud-usage.html#ecs-cloud-usage-field-reuse" title="Field reuse">Field reuse</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ecs-cloud-usage.html#ecs-cloud-usage-cloud-at-root" title="Cloud fields at the Root of an Event">Cloud fields at the Root of an Event</a>
</li>
<li class="listitem">
<a class="xref" href="ecs-cloud-usage.html#ecs-cloud-usage-origin-target" title="Describing external cloud resources in an invocation relationship">Describing external cloud resources in an invocation relationship</a>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h5><a id="ecs-cloud-usage-field-reuse"></a>Field reuse<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ecs/edit/8.3/docs/fields/usage/cloud.asciidoc">edit</a></h5>
<p>The cloud fields can be used to
* <a class="xref" href="ecs-cloud-usage.html#ecs-cloud-usage-cloud-at-root" title="Cloud fields at the Root of an Event">describe the cloud resource an event comes from</a>
* or to <a class="xref" href="ecs-cloud-usage.html#ecs-cloud-usage-origin-target" title="Describing external cloud resources in an invocation relationship">describe the context of an external cloud resource</a> that has a direct invocation relationship to the observed service or resource</p>
<h6><a id="ecs-cloud-usage-cloud-at-root"></a>Cloud fields at the Root of an Event<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ecs/edit/8.3/docs/fields/usage/cloud.asciidoc">edit</a></h6>
<p>Use the cloud fields at the root of an event to describe the cloud resource the event primarily relates to.
An example for this use case is a log entry being recorded for a service that is deployed in a cloud environment:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "cloud": {
    "provider": "aws",
    "region": "us-east-1",
    "service": { "name": "ec2" }
  }
}</pre>
</div>
<h6><a id="ecs-cloud-usage-origin-target"></a>Describing external cloud resources in an invocation relationship<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ecs/edit/8.3/docs/fields/usage/cloud.asciidoc">edit</a></h6>
<p>Managed cloud services can be in an invocation relationship to the observed service (i.e. service for which the corresponding event is captured).
For instance, an observed service running on AWS Lambda can be invoked through an AWS API Gateway.
Another example is an observed service that invokes an external cloud service (e.g. AWS Simple Email Service).
In the context of an invocation relationship, cloud fields can be nested under <code class="literal">cloud.origin.*</code> and <code class="literal">cloud.target.*</code>, respectively,
to capture the cloud context on origin or target cloud services from the perspective of an observed service.
This concept is similar to <a class="xref" href="ecs-service-usage.html#ecs-service-usage-origin-target" title="Describing external services in an invocation relationship">nesting of service fields</a> under <code class="literal">service.origin.*</code> and <code class="literal">service.target.*</code>.</p>
<p>Let&#8217;s consider an exemplary event that represents an inbound AWS Lambda invocation coming from an AWS API Gateway. Use the following <code class="literal">cloud.origin.*</code>
nesting to describe the API Gateway service from the perspective of the AWS Lambda service:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "service": { <a id="CO2-1"></a><i class="conum" data-value="1"></i>
    "name": "MyLambdaFunction",
    "version": "1.0.0",
    "origin": { <a id="CO2-2"></a><i class="conum" data-value="2"></i>
      "name": "MyGateway",
      "version" "2.0",
    }
  },
  "cloud": { <a id="CO2-3"></a><i class="conum" data-value="3"></i>
    "provider": "aws",
    "region": "us-east-1",
    "service": { "name": "lambda" },
    "origin": { <a id="CO2-4"></a><i class="conum" data-value="4"></i>
      "provider": "aws",
      "region": "eu-west-1",
      "service": { "name": "apigateway" }
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Describes the observed AWS Lambda function</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Describes the API Gateway service where the inbound request comes from</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Describes the cloud context of the observed AWS Lambda function</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Describes the cloud context of the API Gateway service where the inbound request comes from</p>
</td>
</tr>
</table>
</div>
<p>Note that <code class="literal">cloud.origin.*</code> and <code class="literal">cloud.target.*</code> fields should only be used on events that represent an invocation relationship.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ecs-cloud.html">« Cloud Fields</a>
</span>
<span class="next">
<a href="ecs-code_signature.html">Code Signature Fields »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
