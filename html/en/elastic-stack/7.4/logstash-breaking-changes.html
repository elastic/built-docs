<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Logstash breaking changes | Installation and Upgrade Guide [7.4] | Elastic</title>
<link rel="home" href="index.html" title="Installation and Upgrade Guide [7.4]"/>
<link rel="up" href="elastic-stack-breaking-changes.html" title="Breaking changes"/>
<link rel="prev" href="kibana-breaking-changes.html" title="Kibana breaking changes"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Installation and Upgrade/7.4"/>
<meta name="DC.subject" content="Elastic Stack"/>
<meta name="DC.identifier" content="7.4"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<p>
  <strong>IMPORTANT</strong>: Version 7.4 of the Elastic Stack has passed its 
  <a href="https://www.elastic.co/support/eol">maintenance date</a>. 
</p>  
<p>
  This documentation is no longer being updated. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Installation and Upgrade Guide [7.4]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="elastic-stack-breaking-changes.html">Breaking changes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="kibana-breaking-changes.html">« Kibana breaking changes</a>
</span>
<span class="next">
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="logstash-breaking-changes"></a>Logstash breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.4/docs/en/install-upgrade/breaking.asciidoc">edit</a></h2>
</div></div></div>

<p>This list summarizes the most important breaking changes in Logstash 7.4.2. For
the complete list, go to
<a href="/guide/en/logstash/7.4/breaking-changes.html" class="ulink" target="_top">Logstash breaking changes</a>.</p>
<h4><a id="_changes_in_logstash_core"></a>Changes in Logstash Core<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h4>
<p>These changes can affect any instance of Logstash that uses impacted features.
Changes to Logstash Core are plugin agnostic.</p>
<h5><a id="java-exec-default"></a>Java execution engine enabled by default<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h5>
<p>The new Java execution engine is enabled by default. It features faster
performance, reduced memory usage, and lower config startup and reload times.</p>
<p>For more information, see the blog post about the
<a href="/blog/meet-the-new-logstash-java-execution-engine" class="ulink" target="_top">initial
release of the Java execution engine</a>.</p>
<p>We went to considerable lengths to make this change seamless. Still, it&#8217;s a big
change. If you notice different behaviors that might be related, please
<a href="https://github.com/elastic/logstash/issues" class="ulink" target="_top">open a GitHub issue</a> to let us
know.</p>
<h5><a id="beats-ecs"></a>Beats conform to the Elastic Common Schema (ECS)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h5>
<p>As of 7.0, Beats fields conform to the <a href="/guide/en/ecs/1.1/index.html" class="ulink" target="_top">Elastic Common
Schema (ECS)</a>.</p>
<p>If you upgrade Logstash before you upgrade Beats, the payloads continue to use
the pre-ECS schema. If you upgrade your Beats before you upgrade Logstash, then
you&#8217;ll get payloads with the ECS schema in advance of any Logstash upgrade.</p>
<p>If you see mapping conflicts after upgrade, that is an indication that the
Beats/ECS change is influencing the data reaching existing indices.</p>
<p>See the <span class="strong strong"><strong>Beats Platform Reference</strong></span> for more information on
<a href="/guide/en/beats/libbeat/7.4/upgrading-6-to-7.html#enable-ecs-compatibility" class="ulink" target="_top">Beats and ECS</a>.</p>
<h5><a id="field-ref-strict"></a>Field Reference parser is more strict<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h5>
<p>The Field Reference parser, which is used to interpret references to fields in
your pipelines and plugins, was made to be more strict and will now reject
inputs that are either ambiguous or illegal. Since 6.4, Logstash has emitted
warnings when encountering input that is ambiguous, and allowed an early opt-in
of strict-mode parsing either by providing the command-line flag
<code class="literal">--field-reference-parser STRICT</code> or by adding <code class="literal">config.field_reference.parser:
STRICT</code> to <code class="literal">logstash.yml</code>.</p>
<p>Here&#8217;s an example.</p>
<p><span class="strong strong"><strong>Before</strong></span></p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">logstash-6.7.0 % echo "hello"| bin/logstash -e 'filter { mutate { replace =&gt; { "message" =&gt; "%{[[]]message]} you" } } }'
[2019-04-05T16:52:18,691][WARN ][org.logstash.FieldReference] Detected ambiguous Field Reference `[[]]message]`, which we expanded to the path `[message]`; in a future release of Logstash, ambiguous Field References will not be expanded.
{
       "message" =&gt; "hello you",
      "@version" =&gt; "1",
    "@timestamp" =&gt; 2019-04-05T15:52:18.546Z,
          "type" =&gt; "stdin",
          "host" =&gt; "overcraft.lan"
}</pre>
</div>
<p><span class="strong strong"><strong>After</strong></span></p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">logstash-7.0.0 % echo "hello"| bin/logstash -e 'filter { mutate { replace =&gt; { "message" =&gt; "%{[[]]message]} you" } } }'
[2019-04-05T16:48:09,135][FATAL][logstash.runner          ] An unexpected error occurred! {:error=&gt;java.lang.IllegalStateException: org.logstash.FieldReference$IllegalSyntaxException: Invalid FieldReference: `[[]]message]`
[2019-04-05T16:48:09,167][ERROR][org.logstash.Logstash    ] java.lang.IllegalStateException: Logstash stopped processing because of an error: (SystemExit) exit</pre>
</div>
<h4><a id="_changes_in_logstash_plugins"></a>Changes in Logstash Plugins<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h4>
<p>With 7.0.0, we have taken the opportunity to upgrade a number of bundled plugins
to their newest major version, absorbing their breaking changes into the
Logstash distribution.</p>
<p>While these upgrades included new features and important fixes, only the
breaking changes are called out below.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The majority of the changes to plugins are the removal of previously-deprecated
and now-obsolete options. Please ensure that your pipeline
configurations do not use these removed options before upgrading.</p>
</div>
</div>
<h5><a id="_codec_plugins"></a>Codec Plugins<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h5>
<p>Here are the breaking changes for codec plugins.</p>
<p><span class="strong strong"><strong>CEF Codec</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">sev</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">deprecated_v1_fields</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Netflow Codec</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Changed decoding of application_id to implement RFC6759; the format changes from a pair of colon-separated ids (e.g. <code class="literal">0:40567</code>) to a variable number of double-dot-separated ids (e.g. <code class="literal">0..12356..40567</code>).
</li>
</ul>
</div>
<h5><a id="_filter_plugins"></a>Filter Plugins<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h5>
<p>Here are the breaking changes for filter plugins.</p>
<p><span class="strong strong"><strong>Clone Filter</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make <code class="literal">clones</code> a required option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Geoip Filter</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">lru_cache_size</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>HTTP Filter</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">ssl_certificate_verify</code> option
</li>
</ul>
</div>
<h5><a id="_input_plugins"></a>Input Plugins<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h5>
<p>Here are the breaking changes for  input plugins.</p>
<p><span class="strong strong"><strong>Beats Input</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">congestion_threshold</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">target_field_for_codec</code> option
</li>
<li class="listitem">
Changed default value of <code class="literal">add_hostname</code> to false
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>In Beats 7.0.0, the fields exported by Beats <em>to</em> the Logstash Beats Input
conform to the <a href="/guide/en/ecs/1.1/index.html" class="ulink" target="_top">Elastic Common Schema (ECS)</a>. Many of the
exported fields have been renamed, so you may need to modify your pipeline
configurations to access them at their new locations prior to upgrading your
Beats. See <a href="/guide/en/beats/libbeat/7.4/breaking-changes-7.0.html" class="ulink" target="_top">Beats Breaking changes in 7.0</a>
for the full list of changed names.</p>
</div>
</div>
<p><span class="strong strong"><strong>HTTP Input</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">ssl_certificate_verify</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>HTTP Poller Input</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">interval</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">ssl_certificate_verify</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Tcp Input</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">data_timeout</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">ssl_cacert</code> option
</li>
</ul>
</div>
<h5><a id="_output_plugins"></a>Output Plugins<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.4/docs/static/breaking-changes.asciidoc">edit</a></h5>
<p>Here are the breaking changes for output plugins.</p>
<p><span class="strong strong"><strong>Elasticsearch Output</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Elasticsearch <a href="/guide/en/elasticsearch/reference/7.4/index-lifecycle-management.html" class="ulink" target="_top">Index lifecycle management (ILM)</a> is
auto-detected and enabled by default if your Elasticsearch cluster supports it.
</li>
<li class="listitem">
Remove support for parent/child (still support join data type) since we don&#8217;t
support multiple document types any more
</li>
<li class="listitem">
Removed obsolete <code class="literal">flush_size</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">idle_flush_time</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>HTTP Output</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">ssl_certificate_verify</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Kafka Output</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">block_on_buffer_full</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">ssl</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">timeout_ms</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Redis Output</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">queue</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">name</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Sqs Output</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">batch</code> option
</li>
<li class="listitem">
Removed obsolete <code class="literal">batch_timeout</code> option
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Tcp Output</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed obsolete <code class="literal">message_format</code> option
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="kibana-breaking-changes.html">« Kibana breaking changes</a>
</span>
<span class="next">
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
