<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>seal | Curator Reference [3.4] | Elastic</title>
<link rel="home" href="index.html" title="Curator Reference [3.4]"/>
<link rel="up" href="commands.html" title="Commands"/>
<link rel="prev" href="replicas.html" title="replicas"/>
<link rel="next" href="show.html" title="show"/>
<meta name="DC.type" content="Learn/Docs/Clients/Curator/3.4"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="3.4"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Curator Reference [3.4]</a></span>
»
<span class="breadcrumb-link"><a href="commands.html">Commands</a></span>
»
<span class="breadcrumb-node">seal</span>
</div>
<div class="navheader">
<span class="prev">
<a href="replicas.html">« replicas</a>
</span>
<span class="next">
<a href="show.html">show »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="seal"></a>seal<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/curator/edit/3.4/docs/asciidoc/commands/seal.asciidoc">edit</a></h2>
</div></div></div>
<h3><a id="_summary_41"></a>Summary<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/curator/edit/3.4/docs/asciidoc/commands/seal.asciidoc">edit</a></h3>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires Elasticsearch version 1.6.0+ and Curator 3.2.0</p>
</div>
</div>
<p>From the
<a href="http://www.elastic.co/guide/en/elasticsearch/reference/2.2/indices-synced-flush.html" class="ulink" target="_top">Elasticsearch Synced Flush API documentation</a></p>
<div class="quoteblock">
<blockquote>
<p>Elasticsearch tracks the indexing activity of each shard. Shards that have not
received any indexing operations for 5 minutes are automatically marked as
inactive. This presents an opportunity for Elasticsearch to reduce shard
resources and also perform a special kind of flush, called synced flush. A
synced flush performs a normal flush, then adds a generated unique marker
(sync_id) to all shards.</p>
<p>Since the sync id marker was added when there were no ongoing indexing
operations, it can be used as a quick way to check if the two shards' lucene
indices are identical. This quick sync id comparison (if present) is used during
recovery or restarts to skip the first and most costly phase of the process. In
that case, no segment files need to be copied and the transaction log replay
phase of the recovery can start immediately. Note that since the sync id marker
was applied together with a flush, it is very likely that the transaction log
will be empty, speeding up recoveries even more.</p>
<p>This is particularly useful for use cases having lots of indices which are never
or very rarely updated, such as time based data. This use case typically
generates lots of indices whose recovery without the synced flush marker would
take a long time.</p>
<p>&#8230;&#8203;</p>
<p>The Synced Flush API allows an administrator to initiate a synced flush
manually. This can be particularly useful for a planned (rolling) cluster
restart where you can stop indexing and don’t want to wait the default 5 minutes
for idle indices to be sync-flushed automatically.</p>
</blockquote>
</div>
<p>&nbsp;</p>
<p>As mentioned, Elasticsearch will <em>automatically</em> seal indices after 5 minutes
of inactivity. This command is here for times when you might need to manually
seal (synced flush) an index.  This command is also performed when closing
indices.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>From the
<a href="http://www.elastic.co/guide/en/elasticsearch/reference/2.2/indices-synced-flush.html" class="ulink" target="_top">Elasticsearch Synced Flush API documentation</a>:</p>
<div class="quoteblock">
<blockquote>
<p>Synced flush is a best effort operation. Any ongoing indexing operations
will cause the synced flush to fail on that shard. This means that some shards
may be synced flushed while others aren’t.</p>
</blockquote>
</div>
<p>&nbsp;</p>
<p>and also:</p>
<div class="quoteblock">
<blockquote>
<p>It is harmless to request a synced flush while there is ongoing indexing. Shards
that are idle will succeed and shards that are not will fail. Any shards that
succeeded will have faster recovery times.</p>
</blockquote>
</div>
</div>
</div>
<p>The seal command will always exit successfully, even if all shards fail the
synced flush.  As a result, you must pay attention to the logs to see which
indices (and which shards) may have failed.  All reasons for the failure which
are returned will be logged with the correlating index name.</p>
<h3><a id="_flags_40"></a>Flags<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/curator/edit/3.4/docs/asciidoc/commands/seal.asciidoc">edit</a></h3>
<pre class="screen">$ curator seal --help
Usage: curator seal [OPTIONS] COMMAND [ARGS]...


  Seal indices (Synced flush: ES 1.6.0+ only)

Options:
  --help  Show this message and exit.

Commands:
  indices  Index selection.</pre>
<p>&nbsp;</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command requires the <a class="xref" href="indices-subcommand.html" title="indices">indices</a>
<a class="xref" href="subcommand.html" title="Subcommands">subcommand</a> for <a class="xref" href="index-selection.html" title="Index Selection">index selection</a>.</p>
</div>
</div>
<h3><a id="_example_31"></a>Example<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/curator/edit/3.4/docs/asciidoc/commands/seal.asciidoc">edit</a></h3>
<p>Seal matching indices:</p>
<pre class="screen">curator seal indices &lt;&lt;index selection parameters&gt;&gt;</pre>
</div>
<div class="navfooter">
<span class="prev">
<a href="replicas.html">« replicas</a>
</span>
<span class="next">
<a href="show.html">show »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
