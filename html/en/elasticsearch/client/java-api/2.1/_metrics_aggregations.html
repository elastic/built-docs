<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Metrics aggregations
        | Java API [2.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Java API [2.1]" /><link rel="up" href="java-aggs.html" title="Aggregations" /><link rel="prev" href="_structuring_aggregations.html" title="Structuring aggregations" /><link rel="next" href="_bucket_aggregations.html" title="Bucket aggregations" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Clients/Java/2.1" /><meta name="DC.subject" content="Clients" /><meta name="DC.identifier" content="2.1" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Java API
      [2.1]
    </a></span> » <span class="breadcrumb-link"><a href="java-aggs.html">Aggregations</a></span> » <span class="breadcrumb-node">Metrics aggregations</span></div><div class="navheader"><span class="prev"><a href="_structuring_aggregations.html">
              « 
              Structuring aggregations</a>
           
        </span><span class="next">
           
          <a href="_bucket_aggregations.html">Bucket aggregations
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_metrics_aggregations"></a>Metrics aggregations<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-min"></a>Min Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/min-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-min-aggregation.html" target="_top">Min Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/min-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .min("agg")
                .field("height");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/min-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.min.Min;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Min agg = sr.getAggregations().get("agg");
double value = agg.getValue();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-max"></a>Max Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/max-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-max-aggregation.html" target="_top">Max Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_2"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/max-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .max("agg")
                .field("height");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_2"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/max-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.max.Max;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Max agg = sr.getAggregations().get("agg");
double value = agg.getValue();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-sum"></a>Sum Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/sum-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-sum-aggregation.html" target="_top">Sum Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_3"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/sum-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .sum("agg")
                .field("height");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_3"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/sum-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.sum.Sum;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Sum agg = sr.getAggregations().get("agg");
double value = agg.getValue();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-avg"></a>Avg Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/avg-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-avg-aggregation.html" target="_top">Avg Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_4"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/avg-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .avg("agg")
                .field("height");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_4"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/avg-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.avg.Avg;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Avg agg = sr.getAggregations().get("agg");
double value = agg.getValue();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-stats"></a>Stats Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/stats-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-stats-aggregation.html" target="_top">Stats Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_5"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/stats-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .stats("agg")
                .field("height");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_5"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/stats-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.stats.Stats;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Stats agg = sr.getAggregations().get("agg");
double min = agg.getMin();
double max = agg.getMax();
double avg = agg.getAvg();
double sum = agg.getSum();
long count = agg.getCount();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-extendedstats"></a>Extended Stats Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/extendedstats-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-extendedstats-aggregation.html" target="_top">Extended Stats Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_6"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/extendedstats-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .extendedStats("agg")
                .field("height");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_6"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/extendedstats-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.stats.extended.ExtendedStats;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
ExtendedStats agg = sr.getAggregations().get("agg");
double min = agg.getMin();
double max = agg.getMax();
double avg = agg.getAvg();
double sum = agg.getSum();
long count = agg.getCount();
double stdDeviation = agg.getStdDeviation();
double sumOfSquares = agg.getSumOfSquares();
double variance = agg.getVariance();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-valuecount"></a>Value Count Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/valuecount-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-valuecount-aggregation.html" target="_top">Value Count Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_7"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/valuecount-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .count("agg")
                .field("height");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_7"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/valuecount-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.valuecount.ValueCount;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
ValueCount agg = sr.getAggregations().get("agg");
long value = agg.getValue();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-percentile"></a>Percentile Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/percentile-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-percentile-aggregation.html" target="_top">Percentile Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_8"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/percentile-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .percentiles("agg")
                .field("height");</pre></div><p>You can provide your own percentiles instead of using defaults:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .percentiles("agg")
                .field("height")
                .percentiles(1.0, 5.0, 10.0, 20.0, 30.0, 75.0, 95.0, 99.0);</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_8"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/percentile-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.percentiles.Percentile;
import org.elasticsearch.search.aggregations.metrics.percentiles.Percentiles;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Percentiles agg = sr.getAggregations().get("agg");
// For each entry
for (Percentile entry : agg) {
    double percent = entry.getPercent();    // Percent
    double value = entry.getValue();        // Value

    logger.info("percent [{}], value [{}]", percent, value);
}</pre></div><p>This will basically produce for the first example:</p><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">percent [1.0], value [0.814338896154595]
percent [5.0], value [0.8761912455821302]
percent [25.0], value [1.173346540141847]
percent [50.0], value [1.5432023318692198]
percent [75.0], value [1.923915462033674]
percent [95.0], value [2.2273644908535335]
percent [99.0], value [2.284989339108279]</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-percentile-rank"></a>Percentile Ranks Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/percentile-rank-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-percentile-rank-aggregation.html" target="_top">Percentile Ranks Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_9"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/percentile-rank-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .percentileRanks("agg")
                .field("height")
                .percentiles(1.24, 1.91, 2.22);</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_9"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/percentile-rank-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.percentiles.Percentile;
import org.elasticsearch.search.aggregations.metrics.percentiles.PercentileRanks;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
PercentileRanks agg = sr.getAggregations().get("agg");
// For each entry
for (Percentile entry : agg) {
    double percent = entry.getPercent();    // Percent
    double value = entry.getValue();        // Value

    logger.info("percent [{}], value [{}]", percent, value);
}</pre></div><p>This will basically produce:</p><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">percent [29.664353095090945], value [1.24]
percent [73.9335313461868], value [1.91]
percent [94.40095147327283], value [2.22]</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-cardinality"></a>Cardinality Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/cardinality-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-cardinality-aggregation.html" target="_top">Cardinality Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_10"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/cardinality-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .cardinality("agg")
                .field("tags");</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_10"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/cardinality-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.cardinality.Cardinality;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Cardinality agg = sr.getAggregations().get("agg");
long value = agg.getValue();</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-geobounds"></a>Cardinality Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/geobounds-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-geobounds-aggregation.html" target="_top">Geo Bounds Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_11"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/geobounds-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">GeoBoundsBuilder aggregation =
        AggregationBuilders
                .geoBounds("agg")
                .field("address.location")
                .wrapLongitude(true);</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_11"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/geobounds-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.metrics.geobounds.GeoBounds;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
GeoBounds agg = sr.getAggregations().get("agg");
GeoPoint bottomRight = agg.bottomRight();
GeoPoint topLeft = agg.topLeft();
logger.info("bottomRight {}, topLeft {}", bottomRight, topLeft);</pre></div><p>This will basically produce:</p><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">bottomRight [40.70500764381921, 13.952946866893775], topLeft [53.49603022435221, -4.190029308156676]</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-tophits"></a>Top Hits Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/tophits-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-top-hits-aggregation.html" target="_top">Top Hits Aggregation</a>
with Java API.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_12"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/tophits-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">AggregationBuilder aggregation =
    AggregationBuilders
        .terms("agg").field("gender")
        .subAggregation(
            AggregationBuilders.topHits("top")
        );</pre></div><p>You can use most of the options available for standard search such as <code class="literal">from</code>, <code class="literal">size</code>, <code class="literal">sort</code>, <code class="literal">highlight</code>, <code class="literal">explain</code>…​</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">AggregationBuilder aggregation =
    AggregationBuilders
        .terms("agg").field("gender")
        .subAggregation(
            AggregationBuilders.topHits("top")
                .setExplain(true)
                .setSize(1)
                .setFrom(10)
        );</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_12"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/tophits-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.bucket.terms.Terms;
import org.elasticsearch.search.aggregations.metrics.tophits.TopHits;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
Terms agg = sr.getAggregations().get("agg");

// For each entry
for (Terms.Bucket entry : agg.getBuckets()) {
    String key = entry.getKey();                    // bucket key
    long docCount = entry.getDocCount();            // Doc count
    logger.info("key [{}], doc_count [{}]", key, docCount);

    // We ask for top_hits for each bucket
    TopHits topHits = entry.getAggregations().get("top");
    for (SearchHit hit : topHits.getHits().getHits()) {
        logger.info(" -&gt; id [{}], _source [{}]", hit.getId(), hit.getSourceAsString());
    }
}</pre></div><p>This will basically produce for the first example:</p><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">key [male], doc_count [5107]
 -&gt; id [AUnzSZze9k7PKXtq04x2], _source [{"gender":"male",...}]
 -&gt; id [AUnzSZzj9k7PKXtq04x4], _source [{"gender":"male",...}]
 -&gt; id [AUnzSZzl9k7PKXtq04x5], _source [{"gender":"male",...}]
key [female], doc_count [4893]
 -&gt; id [AUnzSZzM9k7PKXtq04xy], _source [{"gender":"female",...}]
 -&gt; id [AUnzSZzp9k7PKXtq04x8], _source [{"gender":"female",...}]
 -&gt; id [AUnzSZ0W9k7PKXtq04yS], _source [{"gender":"female",...}]</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="java-aggs-metrics-scripted-metric"></a>Scripted Metric Aggregation<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Here is how you can use
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-aggregations-metrics-scripted-metric-aggregation.html" target="_top">Scripted Metric Aggregation</a>
with Java API.</p><p>Don’t forget to add Groovy in your classpath if you want to run Groovy scripts in an embedded data node
(for unit tests for example).
For example, with Maven, add this dependency to your <code class="literal">pom.xml</code> file:</p><div class="pre_wrapper lang-xml"><pre class="programlisting prettyprint lang-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;
    &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;
    &lt;version&gt;2.3.2&lt;/version&gt;
    &lt;classifier&gt;indy&lt;/classifier&gt;
&lt;/dependency&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_prepare_aggregation_request_13"></a>Prepare aggregation request<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here is an example on how to create the aggregation request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .scriptedMetric("agg")
                .initScript("_agg['heights'] = []")
                .mapScript(new Script("if (doc['gender'].value == \"male\") " +
                        "{ _agg.heights.add(doc['height'].value) } " +
                        "else " +
                        "{ _agg.heights.add(-1 * doc['height'].value) }"));</pre></div><p>You can also specify a <code class="literal">combine</code> script which will be executed on each shard:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .scriptedMetric("agg")
                .initScript(new Script("_agg['heights'] = []"))
                .mapScript(new Script("if (doc['gender'].value == \"male\") " +
                        "{ _agg.heights.add(doc['height'].value) } " +
                        "else " +
                        "{ _agg.heights.add(-1 * doc['height'].value) }"))
                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum"));</pre></div><p>You can also specify a <code class="literal">reduce</code> script which will be executed on the node which gets the request:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">MetricsAggregationBuilder aggregation =
        AggregationBuilders
                .scriptedMetric("agg")
                .initScript(new Script("_agg['heights'] = []"))
                .mapScript(new Script("if (doc['gender'].value == \"male\") " +
                        "{ _agg.heights.add(doc['height'].value) } " +
                        "else " +
                        "{ _agg.heights.add(-1 * doc['height'].value) }"))
                .combineScript(new Script("heights_sum = 0; for (t in _agg.heights) { heights_sum += t }; return heights_sum"))
                .reduceScript(new Script("heights_sum = 0; for (a in _aggs) { heights_sum += a }; return heights_sum"));</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_aggregation_response_13"></a>Use aggregation response<a href="https://github.com/elastic/elasticsearch/edit/2.1/docs/java-api/aggregations/metrics/scripted-metric-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Import Aggregation definition classes:</p><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">import org.elasticsearch.search.aggregations.bucket.terms.Terms;
import org.elasticsearch.search.aggregations.metrics.tophits.TopHits;</pre></div><div class="pre_wrapper lang-java"><pre class="programlisting prettyprint lang-java">// sr is here your SearchResponse object
ScriptedMetric agg = sr.getAggregations().get("agg");
Object scriptedResult = agg.aggregation();
logger.info("scriptedResult [{}]", scriptedResult);</pre></div><p>Note that the result depends on the script you built.
For the first example, this will basically produce:</p><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">scriptedResult object [ArrayList]
scriptedResult [ {
"heights" : [ 1.122218480146643, -1.8148918111233887, -1.7626731575142909, ... ]
}, {
"heights" : [ -0.8046067304119863, -2.0785486707864553, -1.9183567430207953, ... ]
}, {
"heights" : [ 2.092635728868694, 1.5697545960886536, 1.8826954461968808, ... ]
}, {
"heights" : [ -2.1863201099468403, 1.6328549117346856, -1.7078288405893842, ... ]
}, {
"heights" : [ 1.6043904836424177, -2.0736538674414025, 0.9898266674373053, ... ]
} ]</pre></div><p>The second example will produce:</p><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">scriptedResult object [ArrayList]
scriptedResult [-41.279615707402876,
                -60.88007362339038,
                38.823270659734256,
                14.840192739445632,
                11.300902755741326]</pre></div><p>The last example will produce:</p><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">scriptedResult object [Double]
scriptedResult [2.171917696507009]</pre></div></div></div></div><div class="navfooter"><span class="prev"><a href="_structuring_aggregations.html">
              « 
              Structuring aggregations</a>
           
        </span><span class="next">
           
          <a href="_bucket_aggregations.html">Bucket aggregations
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>

  
            <script type="text/javascript" src="/guide/static/docs.js"></script>

            </body>
        
</html>
