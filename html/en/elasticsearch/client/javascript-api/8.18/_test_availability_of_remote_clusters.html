<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Test availability of remote clusters | Elasticsearch JavaScript Client [8.18] | Elastic</title>
<meta class="elastic" name="content" content="Test availability of remote clusters | Elasticsearch JavaScript Client [8.18]">

<link rel="home" href="index.html" title="Elasticsearch JavaScript Client [8.18]"/>
<link rel="up" href="index.html" title="Elasticsearch JavaScript Client [8.18]"/>
<link rel="prev" href="_advantages_of_using_this_endpoint_before_a_cross_cluster_search.html" title="Advantages of using this endpoint before a cross-cluster search"/>
<link rel="next" href="examples.html" title="Examples"/>
<meta class="elastic" name="product_version" content="8.18"/>
<meta class="elastic" name="product_name" content="Clients"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Clients/JavaScript/8.18"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="8.18"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="_advantages_of_using_this_endpoint_before_a_cross_cluster_search.html">« Advantages of using this endpoint before a cross-cluster search</a>
</span>
<span class="next">
<a href="examples.html">Examples »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch JavaScript Client [8.18]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Test availability of remote clusters</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="_test_availability_of_remote_clusters"></a>Test availability of remote clusters</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
</div></div></div>
<p>The <code class="literal">remote/info</code> endpoint is commonly used to test whether the "local" cluster (the cluster being queried) is connected to its remote clusters, but it does not necessarily reflect whether the remote cluster is available or not.
The remote cluster may be available, while the local cluster is not currently connected to it.</p>
<p>You can use the <code class="literal">_resolve/cluster</code> API to attempt to reconnect to remote clusters.
For example with <code class="literal">GET _resolve/cluster</code> or <code class="literal">GET _resolve/cluster/*:*</code>.
The <code class="literal">connected</code> field in the response will indicate whether it was successful.
If a connection was (re-)established, this will also cause the <code class="literal">remote/info</code> endpoint to now indicate a connected status.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-resolve-cluster-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.resolveCluster({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_213"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string | string[])</strong></span>: A list of names or index patterns for the indices, aliases, and data streams to resolve.
Resources on remote clusters can be specified using the <code class="literal">&lt;cluster&gt;</code>:<code class="literal">&lt;name&gt;</code> syntax.
Index and cluster exclusions (e.g., <code class="literal">-cluster1:*</code>) are also supported.
If no index expression is specified, information about all remote clusters configured on the local cluster
is returned without doing any index matching
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If false, the request returns an error if any wildcard expression, index alias, or <code class="literal">_all</code> value targets only missing
or closed indices. This behavior applies even if the request targets other open indices. For example, a request
targeting <code class="literal">foo*,bar*</code> returns an error if an index starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
NOTE: This option is only supported when specifying an index expression. You will get an error if you specify index
options to the <code class="literal">_resolve/cluster</code> API endpoint that takes no index expression.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match.
If the request can target data streams, this argument determines whether wildcard expressions match hidden data streams.
Supports a list of values, such as <code class="literal">open,hidden</code>.
Valid values are: <code class="literal">all</code>, <code class="literal">open</code>, <code class="literal">closed</code>, <code class="literal">hidden</code>, <code class="literal">none</code>.
NOTE: This option is only supported when specifying an index expression. You will get an error if you specify index
options to the <code class="literal">_resolve/cluster</code> API endpoint that takes no index expression.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_throttled</code> (Optional, boolean)</strong></span>: If true, concrete, expanded, or aliased indices are ignored when frozen.
NOTE: This option is only supported when specifying an index expression. You will get an error if you specify index
options to the <code class="literal">_resolve/cluster</code> API endpoint that takes no index expression.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If false, the request returns an error if it targets a missing or closed index.
NOTE: This option is only supported when specifying an index expression. You will get an error if you specify index
options to the <code class="literal">_resolve/cluster</code> API endpoint that takes no index expression.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The maximum time to wait for remote clusters to respond.
If a remote cluster does not respond within this timeout period, the API response
will show the cluster as not connected and include an error message that the
request timed out.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default timeout is unset and the query can take
as long as the networking layer is configured to wait for remote clusters that are
not responding (typically 30 seconds).</p>
<div class="position-relative"><h4><a id="_resolve_index"></a>resolve_index</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Resolve indices.
Resolve the names and/or index patterns for indices, aliases, and data streams.
Multiple patterns and remote clusters are supported.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-resolve-index-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.resolveIndex({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_214"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string | string[])</strong></span>: Comma-separated name(s) or index pattern(s) of the indices, aliases, and data streams to resolve.
Resources on remote clusters can be specified using the <code class="literal">&lt;cluster&gt;</code>:<code class="literal">&lt;name&gt;</code> syntax.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match.
If the request can target data streams, this argument determines whether wildcard expressions match hidden data streams.
Supports a list of values, such as <code class="literal">open,hidden</code>.
Valid values are: <code class="literal">all</code>, <code class="literal">open</code>, <code class="literal">closed</code>, <code class="literal">hidden</code>, <code class="literal">none</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if it targets a missing or closed index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if any wildcard expression, index alias, or <code class="literal">_all</code> value targets only missing or closed indices.
This behavior applies even if the request targets other open indices.
For example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index starts with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_rollover"></a>rollover</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Roll over to a new index.
TIP: It is recommended to use the index lifecycle rollover action to automate rollovers.</p>
<p>The rollover API creates a new index for a data stream or index alias.
The API behavior depends on the rollover target.</p>
<p><span class="strong strong"><strong>Roll over a data stream</strong></span></p>
<p>If you roll over a data stream, the API creates a new write index for the stream.
The stream&#8217;s previous write index becomes a regular backing index.
A rollover also increments the data stream&#8217;s generation.</p>
<p><span class="strong strong"><strong>Roll over an index alias with a write index</strong></span></p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Prior to Elasticsearch 7.9, you&#8217;d typically use an index alias with a write index to manage time series data.
Data streams replace this functionality, require less maintenance, and automatically integrate with data tiers.</p>
</div>
</div>
<p>If an index alias points to multiple indices, one of the indices must be a write index.
The rollover API creates a new write index for the alias with <code class="literal">is_write_index</code> set to <code class="literal">true</code>.
The API also <code class="literal">sets is_write_index</code> to <code class="literal">false</code> for the previous write index.</p>
<p><span class="strong strong"><strong>Roll over an index alias with one index</strong></span></p>
<p>If you roll over an index alias that points to only one index, the API creates a new index for the alias and removes the original index from the alias.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>A rollover creates a new index and is subject to the <code class="literal">wait_for_active_shards</code> setting.</p>
</div>
</div>
<p><span class="strong strong"><strong>Increment index names for an alias</strong></span></p>
<p>When you roll over an index alias, you can specify a name for the new index.
If you don&#8217;t specify a name and the current index ends with <code class="literal">-</code> and a number, such as <code class="literal">my-index-000001</code> or <code class="literal">my-index-3</code>, the new index name increments that number.
For example, if you roll over an alias with a current index of <code class="literal">my-index-000001</code>, the rollover creates a new index named <code class="literal">my-index-000002</code>.
This number is always six characters and zero-padded, regardless of the previous index&#8217;s name.</p>
<p>If you use an index alias for time series data, you can use date math in the index name to track the rollover date.
For example, you can create an alias that points to an index named <code class="literal">&lt;my-index-{now/d}-000001&gt;</code>.
If you create the index on May 6, 2099, the index&#8217;s name is <code class="literal">my-index-2099.05.06-000001</code>.
If you roll over the alias on May 7, 2099, the new index&#8217;s name is <code class="literal">my-index-2099.05.07-000002</code>.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-rollover-index.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.rollover({ alias })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_215"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">alias</code> (string)</strong></span>: Name of the data stream or index alias to roll over.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">new_index</code> (Optional, string)</strong></span>: Name of the index to create.
Supports date math.
Data streams do not support this parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">aliases</code> (Optional, Record&lt;string, { filter, index_routing, is_hidden, is_write_index, routing, search_routing }&gt;)</strong></span>: Aliases for the target index.
Data streams do not support this parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">conditions</code> (Optional, { min_age, max_age, max_age_millis, min_docs, max_docs, max_size, max_size_bytes, min_size, min_size_bytes, max_primary_shard_size, max_primary_shard_size_bytes, min_primary_shard_size, min_primary_shard_size_bytes, max_primary_shard_docs, min_primary_shard_docs })</strong></span>: Conditions for the rollover.
If specified, Elasticsearch only performs the rollover if the current index satisfies these conditions.
If this parameter is not specified, Elasticsearch performs the rollover unconditionally.
If conditions are specified, at least one of them must be a <code class="literal">max_*</code> condition.
The index will rollover if any <code class="literal">max_*</code> condition is satisfied and all <code class="literal">min_*</code> conditions are satisfied.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">mappings</code> (Optional, { all_field, date_detection, dynamic, dynamic_date_formats, dynamic_templates, _field_names, index_field, _meta, numeric_detection, properties, _routing, _size, _source, runtime, enabled, subobjects, _data_stream_timestamp })</strong></span>: Mapping for fields in the index.
If specified, this mapping can include field names, field data types, and mapping paramaters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">settings</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Configuration options for the index.
Data streams do not support this parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dry_run</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, checks whether the current index satisfies the specified conditions but does not perform a rollover.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_active_shards</code> (Optional, number | Enum("all" | "index-setting"))</strong></span>: The number of shard copies that must be active before proceeding with the operation.
Set to all or any positive integer up to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">lazy</code> (Optional, boolean)</strong></span>: If set to true, the rollover action will only mark a data stream to signal that it needs to be rolled over at the next write.
Only allowed on data streams.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_segments_2"></a>segments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get index segments.
Get low-level information about the Lucene segments in index shards.
For data streams, the API returns information about the stream&#8217;s backing indices.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-segments.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.segments({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_216"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string | string[])</strong></span>: List of data streams, indices, and aliases used to limit the request.
Supports wildcards (<code class="literal">*</code>).
To target all data streams and indices, omit this parameter or use <code class="literal">*</code> or <code class="literal">_all</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if any wildcard expression, index alias, or <code class="literal">_all</code> value targets only missing or closed indices.
This behavior applies even if the request targets other open indices.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match.
If the request can target data streams, this argument determines whether wildcard expressions match hidden data streams.
Supports a list of values, such as <code class="literal">open,hidden</code>.
Valid values are: <code class="literal">all</code>, <code class="literal">open</code>, <code class="literal">closed</code>, <code class="literal">hidden</code>, <code class="literal">none</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if it targets a missing or closed index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">verbose</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the request returns a verbose response.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_shard_stores"></a>shard_stores</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get index shard stores.
Get store information about replica shards in one or more indices.
For data streams, the API retrieves store information for the stream&#8217;s backing indices.</p>
<p>The index shard stores API returns the following information:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The node on which each replica shard exists.
</li>
<li class="listitem">
The allocation ID for each replica shard.
</li>
<li class="listitem">
A unique ID for each replica shard.
</li>
<li class="listitem">
Any errors encountered while opening the shard index or from an earlier failure.
</li>
</ul>
</div>
<p>By default, the API returns store information only for primary shards that are unassigned or have one or more unassigned replica shards.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-shards-stores.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.shardStores({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_217"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string | string[])</strong></span>: List of data streams, indices, and aliases used to limit the request.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If false, the request returns an error if any wildcard expression, index alias, or _all
value targets only missing or closed indices. This behavior applies even if the request
targets other open indices.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match. If the request can target data streams,
this argument determines whether wildcard expressions match hidden data streams.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If true, missing or closed indices are not included in the response.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">status</code> (Optional, Enum("green" | "yellow" | "red" | "all") | Enum("green" | "yellow" | "red" | "all")[])</strong></span>: List of shard health statuses used to limit the request.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_shrink"></a>shrink</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Shrink an index.
Shrink an index into a new index with fewer primary shards.</p>
<p>Before you can shrink an index:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The index must be read-only.
</li>
<li class="listitem">
A copy of every shard in the index must reside on the same node.
</li>
<li class="listitem">
The index must have a green health status.
</li>
</ul>
</div>
<p>To make shard allocation easier, we recommend you also remove the index&#8217;s replica shards.
You can later re-add replica shards as part of the shrink operation.</p>
<p>The requested number of primary shards in the target index must be a factor of the number of shards in the source index.
For example an index with 8 primary shards can be shrunk into 4, 2 or 1 primary shards or an index with 15 primary shards can be shrunk into 5, 3 or 1.
If the number of shards in the index is a prime number it can only be shrunk into a single primary shard
 Before shrinking, a (primary or replica) copy of every shard in the index must be present on the same node.</p>
<p>The current write index on a data stream cannot be shrunk. In order to shrink the current write index, the data stream must first be rolled over so that a new write index is created and then the previous write index can be shrunk.</p>
<p>A shrink operation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Creates a new target index with the same definition as the source index, but with a smaller number of primary shards.
</li>
<li class="listitem">
Hard-links segments from the source index into the target index. If the file system does not support hard-linking, then all segments are copied into the new index, which is a much more time consuming process. Also if using multiple data paths, shards on different data paths require a full copy of segment files if they are not on the same disk since hardlinks do not work across disks.
</li>
<li class="listitem">
Recovers the target index as though it were a closed index which had just been re-opened. Recovers shards to the <code class="literal">.routing.allocation.initial_recovery._id</code> index setting.
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Indices can only be shrunk if they satisfy the following requirements:</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The target index must not exist.
</li>
<li class="listitem">
The source index must have more primary shards than the target index.
</li>
<li class="listitem">
The number of primary shards in the target index must be a factor of the number of primary shards in the source index. The source index must have more primary shards than the target index.
</li>
<li class="listitem">
The index must not contain more than 2,147,483,519 documents in total across all shards that will be shrunk into a single shard on the target index as this is the maximum number of docs that can fit into a single shard.
</li>
<li class="listitem">
The node handling the shrink process must have sufficient free disk space to accommodate a second copy of the existing index.
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-shrink-index.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.shrink({ index, target })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_218"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string)</strong></span>: Name of the source index to shrink.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">target</code> (string)</strong></span>: Name of the target index to create.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">aliases</code> (Optional, Record&lt;string, { filter, index_routing, is_hidden, is_write_index, routing, search_routing }&gt;)</strong></span>: The key is the alias name.
Index alias names support date math.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">settings</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Configuration options for the target index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_active_shards</code> (Optional, number | Enum("all" | "index-setting"))</strong></span>: The number of shard copies that must be active before proceeding with the operation.
Set to <code class="literal">all</code> or any positive integer up to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_simulate_index_template"></a>simulate_index_template</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Simulate an index.
Get the index configuration that would be applied to the specified index from an existing index template.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-simulate-index.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.simulateIndexTemplate({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_219"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: Name of the index to simulate
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">create</code> (Optional, boolean)</strong></span>: Whether the index template we optionally defined in the body should only be dry-run added if new or can also replace an existing one
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cause</code> (Optional, string)</strong></span>: User defined reason for dry-run creating the new template for simulation purposes
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_defaults</code> (Optional, boolean)</strong></span>: If true, returns all relevant default configurations for the index template.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_simulate_template"></a>simulate_template</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Simulate an index template.
Get the index configuration that would be applied by a particular index template.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-simulate-template.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.simulateTemplate({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_220"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string)</strong></span>: Name of the index template to simulate. To test a template configuration before you add it to the cluster, omit
this parameter and specify the template configuration in the request body.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_auto_create</code> (Optional, boolean)</strong></span>: This setting overrides the value of the <code class="literal">action.auto_create_index</code> cluster setting.
If set to <code class="literal">true</code> in a template, then indices can be automatically created using that template even if auto-creation of indices is disabled via <code class="literal">actions.auto_create_index</code>.
If set to <code class="literal">false</code>, then indices or data streams matching the template must always be explicitly created, and may never be automatically created.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_patterns</code> (Optional, string | string[])</strong></span>: Array of wildcard (<code class="literal">*</code>) expressions used to match the names of data streams and indices during creation.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">composed_of</code> (Optional, string[])</strong></span>: An ordered list of component template names.
Component templates are merged in the order specified, meaning that the last component template specified has the highest precedence.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">template</code> (Optional, { aliases, mappings, settings, lifecycle })</strong></span>: Template to be applied.
It may optionally include an <code class="literal">aliases</code>, <code class="literal">mappings</code>, or <code class="literal">settings</code> configuration.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">data_stream</code> (Optional, { hidden, allow_custom_routing })</strong></span>: If this object is included, the template is used to create data streams and their backing indices.
Supports an empty object.
Data streams require a matching index template with a <code class="literal">data_stream</code> object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">priority</code> (Optional, number)</strong></span>: Priority to determine index template precedence when a new data stream or index is created.
The index template with the highest priority is chosen.
If no priority is specified the template is treated as though it is of priority 0 (lowest priority).
This number is not automatically generated by Elasticsearch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">version</code> (Optional, number)</strong></span>: Version number used to manage index templates externally.
This number is not automatically generated by Elasticsearch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">_meta</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Optional user metadata about the index template.
May have any contents.
This map is not automatically generated by Elasticsearch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_missing_component_templates</code> (Optional, string[])</strong></span>: The configuration option ignore_missing_component_templates can be used when an index template
references a component template that might not exist
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">deprecated</code> (Optional, boolean)</strong></span>: Marks this index template as deprecated. When creating or updating a non-deprecated index template
that uses deprecated components, Elasticsearch will emit a deprecation warning.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">create</code> (Optional, boolean)</strong></span>: If true, the template passed in the body is only used if no existing templates match the same index patterns. If false, the simulation uses the template with the highest priority. Note that the template is not permanently added or updated in either case; it is only used for the simulation.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cause</code> (Optional, string)</strong></span>: User defined reason for dry-run creating the new template for simulation purposes
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_defaults</code> (Optional, boolean)</strong></span>: If true, returns all relevant default configurations for the index template.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_split"></a>split</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Split an index.
Split an index into a new index with more primary shards.
* Before you can split an index:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The index must be read-only.
</li>
<li class="listitem">
The cluster health status must be green.
</li>
</ul>
</div>
<p>You can do make an index read-only with the following request using the add index block API:</p>
<pre class="screen">PUT /my_source_index/_block/write</pre>
<p>The current write index on a data stream cannot be split.
In order to split the current write index, the data stream must first be rolled over so that a new write index is created and then the previous write index can be split.</p>
<p>The number of times the index can be split (and the number of shards that each original shard can be split into) is determined by the <code class="literal">index.number_of_routing_shards</code> setting.
The number of routing shards specifies the hashing space that is used internally to distribute documents across shards with consistent hashing.
For instance, a 5 shard index with <code class="literal">number_of_routing_shards</code> set to 30 (5 x 2 x 3) could be split by a factor of 2 or 3.</p>
<p>A split operation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Creates a new target index with the same definition as the source index, but with a larger number of primary shards.
</li>
<li class="listitem">
Hard-links segments from the source index into the target index. If the file system doesn&#8217;t support hard-linking, all segments are copied into the new index, which is a much more time consuming process.
</li>
<li class="listitem">
Hashes all documents again, after low level files are created, to delete documents that belong to a different shard.
</li>
<li class="listitem">
Recovers the target index as though it were a closed index which had just been re-opened.
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Indices can only be split if they satisfy the following requirements:</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The target index must not exist.
</li>
<li class="listitem">
The source index must have fewer primary shards than the target index.
</li>
<li class="listitem">
The number of primary shards in the target index must be a multiple of the number of primary shards in the source index.
</li>
<li class="listitem">
The node handling the split process must have sufficient free disk space to accommodate a second copy of the existing index.
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-split-index.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.split({ index, target })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_221"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string)</strong></span>: Name of the source index to split.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">target</code> (string)</strong></span>: Name of the target index to create.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">aliases</code> (Optional, Record&lt;string, { filter, index_routing, is_hidden, is_write_index, routing, search_routing }&gt;)</strong></span>: Aliases for the resulting index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">settings</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Configuration options for the target index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_active_shards</code> (Optional, number | Enum("all" | "index-setting"))</strong></span>: The number of shard copies that must be active before proceeding with the operation.
Set to <code class="literal">all</code> or any positive integer up to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stats_4"></a>stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get index statistics.
For data streams, the API retrieves statistics for the stream&#8217;s backing indices.</p>
<p>By default, the returned statistics are index-level with <code class="literal">primaries</code> and <code class="literal">total</code> aggregations.
<code class="literal">primaries</code> are the values for only the primary shards.
<code class="literal">total</code> are the accumulated values for both primary and replica shards.</p>
<p>To get shard-level statistics, set the <code class="literal">level</code> parameter to <code class="literal">shards</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When moving to another node, the shard-level statistics for a shard are cleared.
Although the shard is no longer part of the node, that node retains any node-level statistics to which the shard contributed.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/indices-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.stats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_222"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metric</code> (Optional, string | string[])</strong></span>: Limit the information returned the specific metrics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string | string[])</strong></span>: A list of index names; use <code class="literal">_all</code> or empty string to perform the operation on all indices
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">completion_fields</code> (Optional, string | string[])</strong></span>: List or wildcard expressions of fields to include in fielddata and suggest statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match. If the request can target data streams, this argument
determines whether wildcard expressions match hidden data streams. Supports a list of values,
such as <code class="literal">open,hidden</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">fielddata_fields</code> (Optional, string | string[])</strong></span>: List or wildcard expressions of fields to include in fielddata statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">fields</code> (Optional, string | string[])</strong></span>: List or wildcard expressions of fields to include in the statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">forbid_closed_indices</code> (Optional, boolean)</strong></span>: If true, statistics are not collected from closed indices.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">groups</code> (Optional, string | string[])</strong></span>: List of search groups to include in the search statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_segment_file_sizes</code> (Optional, boolean)</strong></span>: If true, the call reports the aggregated disk usage of each one of the Lucene index files (only applies if segment stats are requested).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_unloaded_segments</code> (Optional, boolean)</strong></span>: If true, the response includes information from segments that are not loaded into memory.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">level</code> (Optional, Enum("cluster" | "indices" | "shards"))</strong></span>: Indicates whether statistics are aggregated at the cluster, index, or shard level.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_unfreeze"></a>unfreeze</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Unfreeze an index.
When a frozen index is unfrozen, the index goes through the normal recovery process and becomes writeable again.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/unfreeze-index-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.unfreeze({ index })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_223"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string)</strong></span>: Identifier for the index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if any wildcard expression, index alias, or <code class="literal">_all</code> value targets only missing or closed indices.
This behavior applies even if the request targets other open indices.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match.
If the request can target data streams, this argument determines whether wildcard expressions match hidden data streams.
Supports a list of values, such as <code class="literal">open,hidden</code>.
Valid values are: <code class="literal">all</code>, <code class="literal">open</code>, <code class="literal">closed</code>, <code class="literal">hidden</code>, <code class="literal">none</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if it targets a missing or closed index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_active_shards</code> (Optional, string)</strong></span>: The number of shard copies that must be active before proceeding with the operation.
Set to <code class="literal">all</code> or any positive integer up to the total number of shards in the index (<code class="literal">number_of_replicas+1</code>).
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_aliases"></a>update_aliases</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update an alias.
Adds a data stream or index to an alias.</p>
<p><a href="/docs/api/doc/elasticsearch/v8/operation/operation-indices-update-aliases" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.updateAliases({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_224"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">actions</code> (Optional, { add_backing_index, remove_backing_index }[])</strong></span>: Actions to perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_validate_query"></a>validate_query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Validate a query.
Validates a query without running it.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/search-validate.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.indices.validateQuery({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_225"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string | string[])</strong></span>: List of data streams, indices, and aliases to search.
Supports wildcards (<code class="literal">*</code>).
To search all data streams or indices, omit this parameter or use <code class="literal">*</code> or <code class="literal">_all</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: Query in the Lucene query string syntax.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if any wildcard expression, index alias, or <code class="literal">_all</code> value targets only missing or closed indices.
This behavior applies even if the request targets other open indices.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">all_shards</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the validation is executed on all shards instead of one random shard per index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analyzer</code> (Optional, string)</strong></span>: Analyzer to use for the query string.
This parameter can only be used when the <code class="literal">q</code> query string parameter is specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analyze_wildcard</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, wildcard and prefix queries are analyzed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">default_operator</code> (Optional, Enum("and" | "or"))</strong></span>: The default operator for query string query: <code class="literal">AND</code> or <code class="literal">OR</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">df</code> (Optional, string)</strong></span>: Field to use as default where no field prefix is given in the query string.
This parameter can only be used when the <code class="literal">q</code> query string parameter is specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match.
If the request can target data streams, this argument determines whether wildcard expressions match hidden data streams.
Supports a list of values, such as <code class="literal">open,hidden</code>.
Valid values are: <code class="literal">all</code>, <code class="literal">open</code>, <code class="literal">closed</code>, <code class="literal">hidden</code>, <code class="literal">none</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">explain</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the response returns detailed information if an error has occurred.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the request returns an error if it targets a missing or closed index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">lenient</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, format-based query failures (such as providing text to a numeric field) in the query string will be ignored.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rewrite</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, returns a more detailed explanation showing the actual Lucene query that will be executed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">q</code> (Optional, string)</strong></span>: Query in the Lucene query string syntax.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_inference"></a>inference</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_chat_completion_unified"></a>chat_completion_unified</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Perform chat completion inference</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/chat-completion-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.chatCompletionUnified({ inference_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_226"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The inference Id
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chat_completion_request</code> (Optional, { messages, model, max_completion_tokens, stop, temperature, tool_choice, tools, top_p })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Specifies the amount of time to wait for the inference request to complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_completion"></a>completion</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Perform completion inference on the service</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/post-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.completion({ inference_id, input })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_227"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The inference Id
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">input</code> (string | string[])</strong></span>: Inference input.
Either a string or an array of strings.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, User-defined value)</strong></span>: Optional task settings
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Specifies the amount of time to wait for the inference request to complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_6"></a>delete</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete an inference endpoint</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.delete({ inference_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_228"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The inference identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Optional, Enum("sparse_embedding" | "text_embedding" | "rerank" | "completion" | "chat_completion"))</strong></span>: The task type
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dry_run</code> (Optional, boolean)</strong></span>: When true, the endpoint is not deleted and a list of ingest processors which reference this endpoint is returned.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: When true, the inference endpoint is forcefully deleted even if it is still being used by ingest processors or semantic text fields.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_6"></a>get</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get an inference endpoint</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.get({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_229"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Optional, Enum("sparse_embedding" | "text_embedding" | "rerank" | "completion" | "chat_completion"))</strong></span>: The task type
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (Optional, string)</strong></span>: The inference Id
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_2"></a>put</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an inference endpoint.
When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The inference APIs enable you to use certain services, such as built-in machine learning models (ELSER, E5), models uploaded through Eland, Cohere, OpenAI, Mistral, Azure OpenAI, Google AI Studio, Google Vertex AI, Anthropic, Watsonx.ai, or Hugging Face.
For built-in models and models uploaded through Eland, the inference APIs offer an alternative way to use and manage trained models.
However, if you do not plan to use the inference APIs to use these models or if you want to use non-NLP models, use the machine learning trained model APIs.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.put({ inference_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_230"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The inference Id
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Optional, Enum("sparse_embedding" | "text_embedding" | "rerank" | "completion" | "chat_completion"))</strong></span>: The task type
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_config</code> (Optional, { chunking_settings, service, service_settings, task_settings })</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_alibabacloud"></a>put_alibabacloud</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an AlibabaCloud AI Search inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">alibabacloud-ai-search</code> service.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-alibabacloud-ai-search.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putAlibabacloud({ task_type, alibabacloud_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_231"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("completion" | "rerank" | "space_embedding" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">alibabacloud_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("alibabacloud-ai-search"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">alibabacloud-ai-search</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, host, rate_limit, service_id, workspace })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">alibabacloud-ai-search</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { input_type, return_token })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_amazonbedrock"></a>put_amazonbedrock</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an Amazon Bedrock inference endpoint.</p>
<p>Creates an inference endpoint to perform an inference task with the <code class="literal">amazonbedrock</code> service.</p>
<p>&gt;info
&gt; You need to provide the access and secret keys only once, during the inference model creation. The get inference API does not retrieve your access or secret keys. After creating the inference model, you cannot change the associated key pairs. If you want to use a different access and secret key pair, delete the inference model and recreate it with the same name and the updated keys.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-amazon-bedrock.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putAmazonbedrock({ task_type, amazonbedrock_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_232"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("completion" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">amazonbedrock_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("amazonbedrock"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">amazonbedrock</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ access_key, model, provider, region, rate_limit, secret_key })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">amazonbedrock</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { max_new_tokens, temperature, top_k, top_p })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_anthropic"></a>put_anthropic</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an Anthropic inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">anthropic</code> service.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-anthropic.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putAnthropic({ task_type, anthropic_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_233"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("completion"))</strong></span>: The task type.
The only valid task type for the model to perform is <code class="literal">completion</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">anthropic_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("anthropic"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">anthropic</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, model_id, rate_limit })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">watsonxai</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { max_tokens, temperature, top_k, top_p })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_azureaistudio"></a>put_azureaistudio</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an Azure AI studio inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">azureaistudio</code> service.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-azure-ai-studio.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putAzureaistudio({ task_type, azureaistudio_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_234"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("completion" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">azureaistudio_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("azureaistudio"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">azureaistudio</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, endpoint_type, target, provider, rate_limit })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">openai</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { do_sample, max_new_tokens, temperature, top_p, user })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_azureopenai"></a>put_azureopenai</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an Azure OpenAI inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">azureopenai</code> service.</p>
<p>The list of chat completion models that you can choose from in your Azure OpenAI deployment include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
[GPT-4 and GPT-4 Turbo models](<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions#gpt-4-and-gpt-4-turbo-models" class="ulink" target="_top">https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions#gpt-4-and-gpt-4-turbo-models</a>)
</li>
<li class="listitem">
[GPT-3.5](<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions#gpt-35" class="ulink" target="_top">https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions#gpt-35</a>)
</li>
</ul>
</div>
<p>The list of embeddings models that you can choose from in your deployment can be found in the [Azure models documentation](<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions#embeddings" class="ulink" target="_top">https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions#embeddings</a>).</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-azure-openai.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putAzureopenai({ task_type, azureopenai_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_235"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("completion" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
NOTE: The <code class="literal">chat_completion</code> task type only supports streaming and only through the _stream API.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">azureopenai_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("azureopenai"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">azureopenai</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, api_version, deployment_id, entra_id, rate_limit, resource_name })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">azureopenai</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { user })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_cohere"></a>put_cohere</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a Cohere inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">cohere</code> service.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-cohere.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putCohere({ task_type, cohere_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_236"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("completion" | "rerank" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cohere_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("cohere"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">cohere</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, embedding_type, model_id, rate_limit, similarity })</strong></span>: Settings used to install the inference model.
These settings are specific to the <code class="literal">cohere</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { input_type, return_documents, top_n, truncate })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_elasticsearch"></a>put_elasticsearch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an Elasticsearch inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">elasticsearch</code> service.</p>
<div class="quoteblock">
<blockquote>
<p>info
Your Elasticsearch deployment contains preconfigured ELSER and E5 inference endpoints, you only need to create the enpoints using the API if you want to customize the settings.</p>
</blockquote>
</div>
<p>If you use the ELSER or the E5 model through the <code class="literal">elasticsearch</code> service, the API request will automatically download and deploy the model if it isn&#8217;t downloaded yet.</p>
<div class="quoteblock">
<blockquote>
<p>info
You might see a 502 bad gateway error in the response when using the Kibana Console. This error usually just reflects a timeout, while the model downloads in the background. You can check the download progress in the Machine Learning UI. If using the Python client, you can set the timeout parameter to a higher value.</p>
</blockquote>
</div>
<p>After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-elasticsearch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putElasticsearch({ task_type, elasticsearch_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_237"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("rerank" | "sparse_embedding" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">elasticsearch_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
The must not match the <code class="literal">model_id</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("elasticsearch"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">elasticsearch</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ adaptive_allocations, deployment_id, model_id, num_allocations, num_threads })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">elasticsearch</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { return_documents })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_elser"></a>put_elser</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an ELSER inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">elser</code> service.
You can also deploy ELSER by using the Elasticsearch inference integration.</p>
<div class="quoteblock">
<blockquote>
<p>info
Your Elasticsearch deployment contains a preconfigured ELSER inference endpoint, you only need to create the enpoint using the API if you want to customize the settings.</p>
</blockquote>
</div>
<p>The API request will automatically download and deploy the ELSER model if it isn&#8217;t already downloaded.</p>
<div class="quoteblock">
<blockquote>
<p>info
You might see a 502 bad gateway error in the response when using the Kibana Console. This error usually just reflects a timeout, while the model downloads in the background. You can check the download progress in the Machine Learning UI. If using the Python client, you can set the timeout parameter to a higher value.</p>
</blockquote>
</div>
<p>After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-elser.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putElser({ task_type, elser_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_238"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("sparse_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">elser_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("elser"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">elser</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ adaptive_allocations, num_allocations, num_threads })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">elser</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_googleaistudio"></a>put_googleaistudio</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an Google AI Studio inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">googleaistudio</code> service.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-google-ai-studio.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putGoogleaistudio({ task_type, googleaistudio_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_239"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("completion" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">googleaistudio_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("googleaistudio"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">googleaistudio</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, model_id, rate_limit })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">googleaistudio</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_googlevertexai"></a>put_googlevertexai</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a Google Vertex AI inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">googlevertexai</code> service.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-google-vertex-ai.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putGooglevertexai({ task_type, googlevertexai_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_240"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("rerank" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">googlevertexai_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("googlevertexai"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">googlevertexai</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ location, model_id, project_id, rate_limit, service_account_json })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">googlevertexai</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { auto_truncate, top_n })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_hugging_face"></a>put_hugging_face</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a Hugging Face inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">hugging_face</code> service.</p>
<p>You must first create an inference endpoint on the Hugging Face endpoint page to get an endpoint URL.
Select the model you want to use on the new endpoint creation page (for example <code class="literal">intfloat/e5-small-v2</code>), then select the sentence embeddings task under the advanced configuration section.
Create the endpoint and copy the URL after the endpoint initialization has been finished.</p>
<p>The following models are recommended for the Hugging Face service:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">all-MiniLM-L6-v2</code>
</li>
<li class="listitem">
<code class="literal">all-MiniLM-L12-v2</code>
</li>
<li class="listitem">
<code class="literal">all-mpnet-base-v2</code>
</li>
<li class="listitem">
<code class="literal">e5-base-v2</code>
</li>
<li class="listitem">
<code class="literal">e5-small-v2</code>
</li>
<li class="listitem">
<code class="literal">multilingual-e5-base</code>
</li>
<li class="listitem">
<code class="literal">multilingual-e5-small</code>
</li>
</ul>
</div>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-hugging-face.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putHuggingFace({ task_type, huggingface_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_241"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">huggingface_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("hugging_face"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">hugging_face</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, rate_limit, url })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">hugging_face</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_jinaai"></a>put_jinaai</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an JinaAI inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">jinaai</code> service.</p>
<p>To review the available <code class="literal">rerank</code> models, refer to <a href="https://jina.ai/reranker" class="ulink" target="_top">https://jina.ai/reranker</a>.
To review the available <code class="literal">text_embedding</code> models, refer to the <a href="https://jina.ai/embeddings/" class="ulink" target="_top">https://jina.ai/embeddings/</a>.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-jinaai.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putJinaai({ task_type, jinaai_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_242"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("rerank" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">jinaai_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("jinaai"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">jinaai</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, model_id, rate_limit, similarity })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">jinaai</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { return_documents, task, top_n })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_mistral"></a>put_mistral</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a Mistral inference endpoint.</p>
<p>Creates an inference endpoint to perform an inference task with the <code class="literal">mistral</code> service.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putMistral({ task_type, mistral_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_243"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("text_embedding"))</strong></span>: The task type.
The only valid task type for the model to perform is <code class="literal">text_embedding</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">mistral_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("mistral"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">mistral</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, max_input_tokens, model, rate_limit })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">mistral</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_openai"></a>put_openai</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an OpenAI inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">openai</code> service or <code class="literal">openai</code> compatible APIs.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-openai.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putOpenai({ task_type, openai_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_244"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("chat_completion" | "completion" | "text_embedding"))</strong></span>: The type of the inference task that the model will perform.
NOTE: The <code class="literal">chat_completion</code> task type only supports streaming and only through the _stream API.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">openai_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("openai"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">openai</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, dimensions, model_id, organization_id, rate_limit, url })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">openai</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { user })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_voyageai"></a>put_voyageai</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a VoyageAI inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">voyageai</code> service.</p>
<p>Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-voyageai.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putVoyageai({ task_type, voyageai_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_245"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("text_embedding" | "rerank"))</strong></span>: The type of the inference task that the model will perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">voyageai_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("voyageai"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">voyageai</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ dimensions, model_id, rate_limit, embedding_type })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">voyageai</code> service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_settings</code> (Optional, { max_chunk_size, overlap, sentence_overlap, strategy })</strong></span>: The chunking configuration object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, { input_type, return_documents, top_k, truncation })</strong></span>: Settings to configure the inference task.
These settings are specific to the task type you specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_watsonx"></a>put_watsonx</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a Watsonx inference endpoint.</p>
<p>Create an inference endpoint to perform an inference task with the <code class="literal">watsonxai</code> service.
You need an IBM Cloud Databases for Elasticsearch deployment to use the <code class="literal">watsonxai</code> inference service.
You can provision one through the IBM catalog, the Cloud Databases CLI plug-in, the Cloud Databases API, or Terraform.</p>
<p>When you create an inference endpoint, the associated machine learning model is automatically deployed if it is not already running.
After creating the endpoint, wait for the model deployment to complete before using it.
To verify the deployment status, use the get trained model statistics API.
Look for <code class="literal">"state": "fully_allocated"</code> in the response and ensure that the <code class="literal">"allocation_count"</code> matches the <code class="literal">"target_allocation_count"</code>.
Avoid creating multiple endpoints for the same model unless required, as each endpoint consumes significant resources.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-service-watsonx-ai.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.putWatsonx({ task_type, watsonx_inference_id, service, service_settings })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_246"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Enum("text_embedding"))</strong></span>: The task type.
The only valid task type for the model to perform is <code class="literal">text_embedding</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">watsonx_inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Enum("watsonxai"))</strong></span>: The type of service supported for the specified task type. In this case, <code class="literal">watsonxai</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service_settings</code> ({ api_key, api_version, model_id, project_id, rate_limit, url })</strong></span>: Settings used to install the inference model. These settings are specific to the <code class="literal">watsonxai</code> service.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_rerank"></a>rerank</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Perform rereanking inference on the service</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/post-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.rerank({ inference_id, query, input })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_247"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The unique identifier for the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (string)</strong></span>: Query input.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">input</code> (string | string[])</strong></span>: The text on which you want to perform the inference task.
It can be a single string or an array.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<p>info
Inference endpoints for the <code class="literal">completion</code> task type currently only support a single string as input.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, User-defined value)</strong></span>: Task settings for the individual inference request.
These settings are specific to the task type you specified and override the task settings specified when initializing the service.
</strong></span> <span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The amount of time to wait for the inference request to complete.</p>
</blockquote>
</div>
<div class="position-relative"><h4><a id="_sparse_embedding"></a>sparse_embedding</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Perform sparse embedding inference on the service</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/post-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.sparseEmbedding({ inference_id, input })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_248"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The inference Id
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">input</code> (string | string[])</strong></span>: Inference input.
Either a string or an array of strings.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, User-defined value)</strong></span>: Optional task settings
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Specifies the amount of time to wait for the inference request to complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stream_completion"></a>stream_completion</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Perform streaming inference.
Get real-time responses for completion tasks by delivering answers incrementally, reducing response times during computation.
This API works only with the completion task type.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The inference APIs enable you to use certain services, such as built-in machine learning models (ELSER, E5), models uploaded through Eland, Cohere, OpenAI, Azure, Google AI Studio, Google Vertex AI, Anthropic, Watsonx.ai, or Hugging Face. For built-in models and models uploaded through Eland, the inference APIs offer an alternative way to use and manage trained models. However, if you do not plan to use the inference APIs to use these models or if you want to use non-NLP models, use the machine learning trained model APIs.</p>
</div>
</div>
<p>This API requires the <code class="literal">monitor_inference</code> cluster privilege (the built-in <code class="literal">inference_admin</code> and <code class="literal">inference_user</code> roles grant this privilege). You must use a client that supports streaming.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/stream-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.streamCompletion({ inference_id, input })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_249"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The unique identifier for the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">input</code> (string | string[])</strong></span>: The text on which you want to perform the inference task.
It can be a single string or an array.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Inference endpoints for the completion task type currently only support a single string as input.
<span class="strong strong"><strong>* *<code class="literal">task_settings</code> (Optional, User-defined value)</strong></span>: Optional task settings</p>
</div>
</div>
<div class="position-relative"><h4><a id="_text_embedding"></a>text_embedding</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Perform text embedding inference on the service</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/post-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.textEmbedding({ inference_id, input })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_250"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The inference Id
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">input</code> (string | string[])</strong></span>: Inference input.
Either a string or an array of strings.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_settings</code> (Optional, User-defined value)</strong></span>: Optional task settings
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Specifies the amount of time to wait for the inference request to complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_2"></a>update</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update an inference endpoint.</p>
<p>Modify <code class="literal">task_settings</code>, secrets (within <code class="literal">service_settings</code>), or <code class="literal">num_allocations</code> for an inference endpoint, depending on the specific endpoint service and <code class="literal">task_type</code>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The inference APIs enable you to use certain services, such as built-in machine learning models (ELSER, E5), models uploaded through Eland, Cohere, OpenAI, Azure, Google AI Studio, Google Vertex AI, Anthropic, Watsonx.ai, or Hugging Face.
For built-in models and models uploaded through Eland, the inference APIs offer an alternative way to use and manage trained models.
However, if you do not plan to use the inference APIs to use these models or if you want to use non-NLP models, use the machine learning trained model APIs.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/update-inference-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.inference.update({ inference_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_251"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_id</code> (string)</strong></span>: The unique identifier of the inference endpoint.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_type</code> (Optional, Enum("sparse_embedding" | "text_embedding" | "rerank" | "completion" | "chat_completion"))</strong></span>: The type of inference task that the model performs.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_config</code> (Optional, { chunking_settings, service, service_settings, task_settings })</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_ingest"></a>ingest</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_geoip_database"></a>delete_geoip_database</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete GeoIP database configurations.</p>
<p>Delete one or more IP geolocation database configurations.</p>
<p><a href="/docs/api/doc/elasticsearch/v8/operation/operation-ingest-delete-geoip-database" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.deleteGeoipDatabase({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_252"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string | string[])</strong></span>: A list of geoip database configurations to delete
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_ip_location_database"></a>delete_ip_location_database</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete IP geolocation database configurations.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-ip-location-database-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.deleteIpLocationDatabase({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_253"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string | string[])</strong></span>: A list of IP location database configurations.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
A value of <code class="literal">-1</code> indicates that the request should never time out.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
A value of <code class="literal">-1</code> indicates that the request should never time out.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_pipeline"></a>delete_pipeline</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete pipelines.
Delete one or more ingest pipelines.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-pipeline-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.deletePipeline({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_254"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Pipeline ID or wildcard expression of pipeline IDs used to limit the request.
To delete all ingest pipelines in a cluster, use a value of <code class="literal">*</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_geo_ip_stats"></a>geo_ip_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get GeoIP statistics.
Get download statistics for GeoIP2 databases that are used with the GeoIP processor.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/geoip-processor.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.geoIpStats()</pre>
</div>
<div class="position-relative"><h4><a id="_get_geoip_database"></a>get_geoip_database</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get GeoIP database configurations.</p>
<p>Get information about one or more IP geolocation database configurations.</p>
<p><a href="/docs/api/doc/elasticsearch/v8/operation/operation-ingest-get-geoip-database" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.getGeoipDatabase({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_255"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string | string[])</strong></span>: A list of database configuration IDs to retrieve.
Wildcard (<code class="literal">*</code>) expressions are supported.
To get all database configurations, omit this parameter or use <code class="literal">*</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_ip_location_database"></a>get_ip_location_database</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get IP geolocation database configurations.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-ip-location-database-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.getIpLocationDatabase({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_256"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string | string[])</strong></span>: List of database configuration IDs to retrieve.
Wildcard (<code class="literal">*</code>) expressions are supported.
To get all database configurations, omit this parameter or use <code class="literal">*</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
A value of <code class="literal">-1</code> indicates that the request should never time out.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_pipeline"></a>get_pipeline</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get pipelines.</p>
<p>Get information about one or more ingest pipelines.
This API returns a local reference of the pipeline.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-pipeline-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.getPipeline({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_257"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: List of pipeline IDs to retrieve.
Wildcard (<code class="literal">*</code>) expressions are supported.
To get all ingest pipelines, omit this parameter or use <code class="literal">*</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">summary</code> (Optional, boolean)</strong></span>: Return pipelines without their definitions (default: false)
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_processor_grok"></a>processor_grok</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Run a grok processor.
Extract structured fields out of a single text field within a document.
You must choose which field to extract matched fields from, as well as the grok pattern you expect will match.
A grok pattern is like a regular expression that supports aliased expressions that can be reused.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/grok-processor.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.processorGrok()</pre>
</div>
<div class="position-relative"><h4><a id="_put_geoip_database"></a>put_geoip_database</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a GeoIP database configuration.</p>
<p>Refer to the create or update IP geolocation database configuration API.</p>
<p><a href="/docs/api/doc/elasticsearch/v8/operation/operation-ingest-put-geoip-database" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.putGeoipDatabase({ id, name, maxmind })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_258"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: ID of the database configuration to create or update.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The provider-assigned name of the IP geolocation database to download.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">maxmind</code> ({ account_id })</strong></span>: The configuration necessary to identify which IP geolocation provider to use to download the database, as well as any provider-specific configuration necessary for such downloading.
At present, the only supported provider is maxmind, and the maxmind provider requires that an account_id (string) is configured.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_ip_location_database"></a>put_ip_location_database</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update an IP geolocation database configuration.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-ip-location-database-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.putIpLocationDatabase({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_259"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The database configuration identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">configuration</code> (Optional, { name, maxmind, ipinfo })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
A value of <code class="literal">-1</code> indicates that the request should never time out.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response from all relevant nodes in the cluster after updating the cluster metadata.
If no response is received before the timeout expires, the cluster metadata update still applies but the response indicates that it was not completely acknowledged.
A value of <code class="literal">-1</code> indicates that the request should never time out.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_pipeline"></a>put_pipeline</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a pipeline.
Changes made using this API take effect immediately.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ingest.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.putPipeline({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_260"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: ID of the ingest pipeline to create or update.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">_meta</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Optional metadata about the ingest pipeline. May have any contents. This map is not automatically generated by Elasticsearch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: Description of the ingest pipeline.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">on_failure</code> (Optional, { append, attachment, bytes, circle, community_id, convert, csv, date, date_index_name, dissect, dot_expander, drop, enrich, fail, fingerprint, foreach, ip_location, geo_grid, geoip, grok, gsub, html_strip, inference, join, json, kv, lowercase, network_direction, pipeline, redact, registered_domain, remove, rename, reroute, script, set, set_security_user, sort, split, terminate, trim, uppercase, urldecode, uri_parts, user_agent }[])</strong></span>: Processors to run immediately after a processor failure. Each processor supports a processor-level <code class="literal">on_failure</code> value. If a processor without an <code class="literal">on_failure</code> value fails, Elasticsearch uses this pipeline-level parameter as a fallback. The processors in this parameter run sequentially in the order specified. Elasticsearch will not attempt to run the pipeline&#8217;s remaining processors.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">processors</code> (Optional, { append, attachment, bytes, circle, community_id, convert, csv, date, date_index_name, dissect, dot_expander, drop, enrich, fail, fingerprint, foreach, ip_location, geo_grid, geoip, grok, gsub, html_strip, inference, join, json, kv, lowercase, network_direction, pipeline, redact, registered_domain, remove, rename, reroute, script, set, set_security_user, sort, split, terminate, trim, uppercase, urldecode, uri_parts, user_agent }[])</strong></span>: Processors used to perform transformations on documents before indexing. Processors run sequentially in the order specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">version</code> (Optional, number)</strong></span>: Version number used by external systems to track ingest pipelines. This parameter is intended for external systems only. Elasticsearch does not use or validate pipeline version numbers.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">deprecated</code> (Optional, boolean)</strong></span>: Marks this ingest pipeline as deprecated.
When a deprecated ingest pipeline is referenced as the default or final pipeline when creating or updating a non-deprecated index template, Elasticsearch will emit a deprecation warning.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">if_version</code> (Optional, number)</strong></span>: Required version for optimistic concurrency control for pipeline updates
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_simulate"></a>simulate</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Simulate a pipeline.</p>
<p>Run an ingest pipeline against a set of provided documents.
You can either specify an existing pipeline to use with the provided documents or supply a pipeline definition in the body of the request.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/simulate-pipeline-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ingest.simulate({ docs })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_261"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">docs</code> ({ _id, _index, _source }[])</strong></span>: Sample documents to test in the pipeline.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: The pipeline to test.
If you don&#8217;t specify a <code class="literal">pipeline</code> in the request body, this parameter is required.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">pipeline</code> (Optional, { description, on_failure, processors, version, deprecated, _meta })</strong></span>: The pipeline to test.
If you don&#8217;t specify the <code class="literal">pipeline</code> request path parameter, this parameter is required.
If you specify both this and the request path parameter, the API only uses the request path parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">verbose</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the response includes output data for each processor in the executed pipeline.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_license"></a>license</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_7"></a>delete</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete the license.</p>
<p>When the license expires, your subscription level reverts to Basic.</p>
<p>If the operator privileges feature is enabled, only operator users can use this API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-license.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.license.delete({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_262"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_7"></a>get</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get license information.</p>
<p>Get information about your Elastic license including its type, its status, when it was issued, and when it expires.</p>
<p>&gt;info
&gt; If the master node is generating a new cluster state, the get license API may return a <code class="literal">404 Not Found</code> response.
&gt; If you receive an unexpected 404 response after cluster startup, wait a short period and retry the request.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-license.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.license.get({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_263"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">accept_enterprise</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, this parameter returns enterprise for Enterprise license types. If <code class="literal">false</code>, this parameter returns platinum for both platinum and enterprise license types. This behavior is maintained for backwards compatibility.
This parameter is deprecated and will always be set to true in 8.x.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">local</code> (Optional, boolean)</strong></span>: Specifies whether to retrieve local information. The default value is <code class="literal">false</code>, which means the information is retrieved from the master node.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_basic_status"></a>get_basic_status</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the basic license status.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-basic-status.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.license.getBasicStatus()</pre>
</div>
<div class="position-relative"><h4><a id="_get_trial_status"></a>get_trial_status</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the trial status.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-trial-status.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.license.getTrialStatus()</pre>
</div>
<div class="position-relative"><h4><a id="_post_2"></a>post</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update the license.</p>
<p>You can update your license at runtime without shutting down your nodes.
License updates take effect immediately.
If the license you are installing does not support all of the features that were available with your previous license, however, you are notified in the response.
You must then re-submit the API request with the acknowledge parameter set to true.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If Elasticsearch security features are enabled and you are installing a gold or higher license, you must enable TLS on the transport networking layer before you install the license.
If the operator privileges feature is enabled, only operator users can use this API.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/update-license.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.license.post({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_264"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">license</code> (Optional, { expiry_date_in_millis, issue_date_in_millis, start_date_in_millis, issued_to, issuer, max_nodes, max_resource_units, signature, type, uid })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">licenses</code> (Optional, { expiry_date_in_millis, issue_date_in_millis, start_date_in_millis, issued_to, issuer, max_nodes, max_resource_units, signature, type, uid }[])</strong></span>: A sequence of one or more JSON documents containing the license information.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">acknowledge</code> (Optional, boolean)</strong></span>: Specifies whether you acknowledge the license changes.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_post_start_basic"></a>post_start_basic</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start a basic license.</p>
<p>Start an indefinite basic license, which gives access to all the basic features.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>In order to start a basic license, you must not currently have a basic license.</p>
</div>
</div>
<p>If the basic license does not support all of the features that are available with your current license, however, you are notified in the response.
You must then re-submit the API request with the <code class="literal">acknowledge</code> parameter set to <code class="literal">true</code>.</p>
<p>To check the status of your basic license, use the get basic license API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/start-basic.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.license.postStartBasic({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_265"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">acknowledge</code> (Optional, boolean)</strong></span>: whether the user has acknowledged acknowledge messages (default: false)
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_post_start_trial"></a>post_start_trial</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start a trial.
Start a 30-day trial, which gives access to all subscription features.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You are allowed to start a trial only if your cluster has not already activated a trial for the current major product version.
For example, if you have already activated a trial for v8.0, you cannot start a new trial until v9.0. You can, however, request an extended trial at <a href="/trialextension" class="ulink" target="_top">https://www.elastic.co/trialextension</a>.</p>
</div>
</div>
<p>To check the status of your trial, use the get trial status API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/start-trial.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.license.postStartTrial({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_266"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">acknowledge</code> (Optional, boolean)</strong></span>: whether the user has acknowledged acknowledge messages (default: false)
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">type_query_string</code> (Optional, string)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_logstash"></a>logstash</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_pipeline_2"></a>delete_pipeline</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a Logstash pipeline.
Delete a pipeline that is used for Logstash Central Management.
If the request succeeds, you receive an empty response with an appropriate status code.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/logstash-api-delete-pipeline.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.logstash.deletePipeline({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_267"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: An identifier for the pipeline.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_pipeline_2"></a>get_pipeline</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get Logstash pipelines.
Get pipelines that are used for Logstash Central Management.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/logstash-api-get-pipeline.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.logstash.getPipeline({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_268"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string | string[])</strong></span>: A list of pipeline identifiers.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_pipeline_2"></a>put_pipeline</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a Logstash pipeline.</p>
<p>Create a pipeline that is used for Logstash Central Management.
If the specified pipeline exists, it is replaced.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/logstash-api-put-pipeline.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.logstash.putPipeline({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_269"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: An identifier for the pipeline.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">pipeline</code> (Optional, { description, on_failure, processors, version, deprecated, _meta })</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_migration"></a>migration</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_deprecations"></a>deprecations</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get deprecation information.
Get information about different cluster, node, and index level settings that use deprecated features that will be removed or changed in the next major version.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>This APIs is designed for indirect use by the Upgrade Assistant.
You are strongly recommended to use the Upgrade Assistant.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/migration-api-deprecation.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.migration.deprecations({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_270"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string)</strong></span>: Comma-separate list of data streams or indices to check. Wildcard (*) expressions are supported.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_feature_upgrade_status"></a>get_feature_upgrade_status</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get feature migration information.
Version upgrades sometimes require changes to how features store configuration information and data in system indices.
Check which features need to be migrated and the status of any migrations that are in progress.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is designed for indirect use by the Upgrade Assistant.
You are strongly recommended to use the Upgrade Assistant.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/feature-migration-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.migration.getFeatureUpgradeStatus()</pre>
</div>
<div class="position-relative"><h4><a id="_post_feature_upgrade"></a>post_feature_upgrade</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start the feature migration.
Version upgrades sometimes require changes to how features store configuration information and data in system indices.
This API starts the automatic migration process.</p>
<p>Some functionality might be temporarily unavailable during the migration process.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>The API is designed for indirect use by the Upgrade Assistant. We strongly recommend you use the Upgrade Assistant.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/feature-migration-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.migration.postFeatureUpgrade()</pre>
</div>
<div class="position-relative"><h3><a id="_ml"></a>ml</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_clear_trained_model_deployment_cache"></a>clear_trained_model_deployment_cache</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear trained model deployment cache.</p>
<p>Cache will be cleared on all nodes where the trained model is assigned.
A trained model deployment may have an inference cache enabled.
As requests are handled by each allocated node, their responses may be cached on that individual node.
Calling this API clears the caches without restarting the deployment.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/clear-trained-model-deployment-cache.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.clearTrainedModelDeploymentCache({ model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_271"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_close_job"></a>close_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Close anomaly detection jobs.</p>
<p>A job can be opened and closed multiple times throughout its lifecycle. A closed job cannot receive data or perform analysis operations, but you can still explore and navigate results.
When you close a job, it runs housekeeping tasks such as pruning the model history, flushing buffers, calculating final results and persisting the model snapshots. Depending upon the size of the job, it could take several minutes to close and the equivalent time to re-open. After it is closed, the job has a minimal overhead on the cluster except for maintaining its meta data. Therefore it is a best practice to close jobs that are no longer required to process data.
If you close an anomaly detection job whose datafeed is running, the request first tries to stop the datafeed. This behavior is equivalent to calling stop datafeed API with the same timeout and force parameters as the close job request.
When a datafeed that has a specified end date stops, it automatically closes its associated job.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-close-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.closeJob({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_272"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job. It can be a job identifier, a group name, or a wildcard expression. You can close multiple anomaly detection jobs in a single API request by using a group name, a list of jobs, or a wildcard expression. You can close all jobs by using <code class="literal">_all</code> or by specifying <code class="literal">*</code> as the job identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">allow_no_match</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: Refer to the descriptiion for the <code class="literal">force</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Refer to the description for the <code class="literal">timeout</code> query parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_calendar"></a>delete_calendar</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a calendar.</p>
<p>Remove all scheduled events from a calendar, then delete it.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-calendar.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteCalendar({ calendar_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_273"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (string)</strong></span>: A string that uniquely identifies a calendar.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_calendar_event"></a>delete_calendar_event</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete events from a calendar.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-calendar-event.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteCalendarEvent({ calendar_id, event_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_274"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (string)</strong></span>: A string that uniquely identifies a calendar.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">event_id</code> (string)</strong></span>: Identifier for the scheduled event.
You can obtain this identifier by using the get calendar events API.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_calendar_job"></a>delete_calendar_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete anomaly jobs from a calendar.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-calendar-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteCalendarJob({ calendar_id, job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_275"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (string)</strong></span>: A string that uniquely identifies a calendar.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string | string[])</strong></span>: An identifier for the anomaly detection jobs. It can be a job identifier, a group name, or a
list of jobs or groups.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_data_frame_analytics"></a>delete_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a data frame analytics job.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteDataFrameAnalytics({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_276"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the data frame analytics job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, it deletes a job that is not stopped; this method is quicker than stopping and deleting the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The time to wait for the job to be deleted.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_datafeed"></a>delete_datafeed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a datafeed.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-datafeed.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteDatafeed({ datafeed_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_277"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (string)</strong></span>: A numerical character string that uniquely identifies the datafeed. This
identifier can contain lowercase alphanumeric characters (a-z and 0-9),
hyphens, and underscores. It must start and end with alphanumeric
characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: Use to forcefully delete a started datafeed; this method is quicker than
stopping and deleting the datafeed.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_expired_data"></a>delete_expired_data</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete expired ML data.</p>
<p>Delete all job results, model snapshots and forecast data that have exceeded
their retention days period. Machine learning state documents that are not
associated with any job are also deleted.
You can limit the request to a single or set of anomaly detection jobs by
using a job identifier, a group name, a list of jobs, or a
wildcard expression. You can delete expired data for all anomaly detection
jobs by using <code class="literal">_all</code>, by specifying <code class="literal">*</code> as the <code class="literal">&lt;job_id&gt;</code>, or by omitting the
<code class="literal">&lt;job_id&gt;</code>.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-expired-data.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteExpiredData({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_278"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (Optional, string)</strong></span>: Identifier for an anomaly detection job. It can be a job identifier, a
group name, or a wildcard expression.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">requests_per_second</code> (Optional, float)</strong></span>: The desired requests per second for the deletion processes. The default
behavior is no throttling.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: How long can the underlying delete processes run until they are canceled.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_filter"></a>delete_filter</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a filter.</p>
<p>If an anomaly detection job references the filter, you cannot delete the
filter. You must update or delete the job before you can delete the filter.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-filter.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteFilter({ filter_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_279"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">filter_id</code> (string)</strong></span>: A string that uniquely identifies a filter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_forecast"></a>delete_forecast</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete forecasts from a job.</p>
<p>By default, forecasts are retained for 14 days. You can specify a
different retention period with the <code class="literal">expires_in</code> parameter in the forecast
jobs API. The delete forecast API enables you to delete one or more
forecasts before they expire.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-forecast.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteForecast({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_280"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">forecast_id</code> (Optional, string)</strong></span>: A list of forecast identifiers. If you do not specify
this optional parameter or if you specify <code class="literal">_all</code> or <code class="literal">*</code> the API deletes
all forecasts from the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_forecasts</code> (Optional, boolean)</strong></span>: Specifies whether an error occurs when there are no forecasts. In
particular, if this parameter is set to <code class="literal">false</code> and there are no
forecasts associated with the job, attempts to delete all forecasts
return an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Specifies the period of time to wait for the completion of the delete
operation. When this period of time elapses, the API fails and returns an
error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_job"></a>delete_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete an anomaly detection job.</p>
<p>All job configuration, model state and results are deleted.
It is not currently possible to delete multiple jobs using wildcards or a
comma separated list. If you delete a job that has a datafeed, the request
first tries to delete the datafeed. This behavior is equivalent to calling
the delete datafeed API with the same timeout and force parameters as the
delete job request.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteJob({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_281"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: Use to forcefully delete an opened job; this method is quicker than
closing and deleting the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delete_user_annotations</code> (Optional, boolean)</strong></span>: Specifies whether annotations that have been added by the
user should be deleted along with any auto-generated annotations when the job is
reset.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: Specifies whether the request should return immediately or wait until the
job deletion completes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_model_snapshot"></a>delete_model_snapshot</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a model snapshot.</p>
<p>You cannot delete the active model snapshot. To delete that snapshot, first
revert to a different one. To identify the active model snapshot, refer to
the <code class="literal">model_snapshot_id</code> in the results from the get jobs API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-delete-snapshot.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteModelSnapshot({ job_id, snapshot_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_282"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot_id</code> (string)</strong></span>: Identifier for the model snapshot.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_trained_model"></a>delete_trained_model</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete an unreferenced trained model.</p>
<p>The request deletes a trained inference model that is not referenced by an ingest pipeline.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-trained-models.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteTrainedModel({ model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_283"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: Forcefully deletes a trained model that is referenced by ingest pipelines or has a started deployment.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_trained_model_alias"></a>delete_trained_model_alias</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a trained model alias.</p>
<p>This API deletes an existing model alias that refers to a trained model. If
the model alias is missing or refers to a model other than the one identified
by the <code class="literal">model_id</code>, this API returns an error.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-trained-models-aliases.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.deleteTrainedModelAlias({ model_alias, model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_284"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_alias</code> (string)</strong></span>: The model alias to delete.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The trained model ID to which the model alias refers.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_estimate_model_memory"></a>estimate_model_memory</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Estimate job model memory usage.</p>
<p>Make an estimation of the memory usage for an anomaly detection job model.
The estimate is based on analysis configuration details for the job and cardinality
estimates for the fields it references.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-estimate-model-memory.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.estimateModelMemory({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_285"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analysis_config</code> (Optional, { bucket_span, categorization_analyzer, categorization_field_name, categorization_filters, detectors, influencers, latency, model_prune_window, multivariate_by_fields, per_partition_categorization, summary_count_field_name })</strong></span>: For a list of the properties that you can specify in the
<code class="literal">analysis_config</code> component of the body of this API.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_bucket_cardinality</code> (Optional, Record&lt;string, number&gt;)</strong></span>: Estimates of the highest cardinality in a single bucket that is observed
for influencer fields over the time period that the job analyzes data.
To produce a good answer, values must be provided for all influencer
fields. Providing values for fields that are not listed as <code class="literal">influencers</code>
has no effect on the estimation.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">overall_cardinality</code> (Optional, Record&lt;string, number&gt;)</strong></span>: Estimates of the cardinality that is observed for fields over the whole
time period that the job analyzes data. To produce a good answer, values
must be provided for fields referenced in the <code class="literal">by_field_name</code>,
<code class="literal">over_field_name</code> and <code class="literal">partition_field_name</code> of any detectors. Providing
values for other fields has no effect on the estimation. It can be
omitted from the request if no detectors have a <code class="literal">by_field_name</code>,
<code class="literal">over_field_name</code> or <code class="literal">partition_field_name</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_evaluate_data_frame"></a>evaluate_data_frame</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Evaluate data frame analytics.</p>
<p>The API packages together commonly used evaluation metrics for various types
of machine learning features. This has been designed for use on indexes
created by data frame analytics. Evaluation requires both a ground truth
field and an analytics result field to be present.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/evaluate-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.evaluateDataFrame({ evaluation, index })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_286"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">evaluation</code> ({ classification, outlier_detection, regression })</strong></span>: Defines the type of evaluation you want to perform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string)</strong></span>: Defines the <code class="literal">index</code> in which the evaluation will be performed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: A query clause that retrieves a subset of data from the source index.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_explain_data_frame_analytics"></a>explain_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Explain data frame analytics config.</p>
<p>This API provides explanations for a data frame analytics config that either
exists already or one that has not been created yet. The following
explanations are provided:
* which fields are included or not in the analysis and why,
* how much memory is estimated to be required. The estimate can be used when deciding the appropriate value for model_memory_limit setting later on.
If you have object fields or fields that are excluded via source filtering, they are not included in the explanation.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/explain-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.explainDataFrameAnalytics({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_287"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: Identifier for the data frame analytics job. This identifier can contain
lowercase alphanumeric characters (a-z and 0-9), hyphens, and
underscores. It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">source</code> (Optional, { index, query, runtime_mappings, _source })</strong></span>: The configuration of how to source the analysis data. It requires an
index. Optionally, query and _source may be specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dest</code> (Optional, { index, results_field })</strong></span>: The destination configuration, consisting of index and optionally
results_field (ml by default).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analysis</code> (Optional, { classification, outlier_detection, regression })</strong></span>: The analysis configuration, which contains the information necessary to
perform one of the following types of analysis: classification, outlier
detection, or regression.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_memory_limit</code> (Optional, string)</strong></span>: The approximate maximum amount of memory resources that are permitted for
analytical processing. If your <code class="literal">elasticsearch.yml</code> file contains an
<code class="literal">xpack.ml.max_model_memory_limit</code> setting, an error occurs when you try to
create data frame analytics jobs that have <code class="literal">model_memory_limit</code> values
greater than that setting.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_num_threads</code> (Optional, number)</strong></span>: The maximum number of threads to be used by the analysis. Using more
threads may decrease the time necessary to complete the analysis at the
cost of using more CPU. Note that the process may use additional threads
for operational functionality other than the analysis itself.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analyzed_fields</code> (Optional, { includes, excludes })</strong></span>: Specify includes and/or excludes patterns to select which fields will be
included in the analysis. The patterns specified in excludes are applied
last, therefore excludes takes precedence. In other words, if the same
field is specified in both includes and excludes, then the field will not
be included in the analysis.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_lazy_start</code> (Optional, boolean)</strong></span>: Specifies whether this job can start when there is insufficient machine
learning node capacity for it to be immediately assigned to a node.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_flush_job"></a>flush_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Force buffered data to be processed.
The flush jobs API is only applicable when sending data for analysis using
the post data API. Depending on the content of the buffer, then it might
additionally calculate new results. Both flush and close operations are
similar, however the flush is more efficient if you are expecting to send
more data for analysis. When flushing, the job remains open and is available
to continue analyzing data. A close operation additionally prunes and
persists the model state to disk and the job must be opened again before
analyzing further data.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-flush-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.flushJob({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_288"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">advance_time</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">advance_time</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calc_interim</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">calc_interim</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">end</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">skip_time</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">skip_time</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">start</code> query parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_forecast"></a>forecast</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Predict future behavior of a time series.</p>
<p>Forecasts are not supported for jobs that perform population analysis; an
error occurs if you try to create a forecast for a job that has an
<code class="literal">over_field_name</code> in its configuration. Forcasts predict future behavior
based on historical data.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-forecast.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.forecast({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_289"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job. The job must be open when you
create a forecast; otherwise, an error occurs.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">duration</code> (Optional, string | -1 | 0)</strong></span>: Refer to the description for the <code class="literal">duration</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expires_in</code> (Optional, string | -1 | 0)</strong></span>: Refer to the description for the <code class="literal">expires_in</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_model_memory</code> (Optional, string)</strong></span>: Refer to the description for the <code class="literal">max_model_memory</code> query parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_buckets"></a>get_buckets</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get anomaly detection job results for buckets.
The API presents a chronological view of the records, grouped by bucket.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-bucket.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getBuckets({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_290"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timestamp</code> (Optional, string | Unit)</strong></span>: The timestamp of a single bucket result. If you do not specify this
parameter, the API returns information about all buckets.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">anomaly_score</code> (Optional, number)</strong></span>: Refer to the description for the <code class="literal">anomaly_score</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">desc</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">desc</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">end</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">exclude_interim</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">exclude_interim</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">expand</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page</code> (Optional, { from, size })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, string)</strong></span>: Refer to the desription for the <code class="literal">sort</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">start</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of buckets.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of buckets to obtain.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_calendar_events"></a>get_calendar_events</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get info about events in calendars.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-calendar-event.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getCalendarEvents({ calendar_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_291"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (string)</strong></span>: A string that uniquely identifies a calendar. You can get information for multiple calendars by using a list of ids or a wildcard expression. You can get information for all calendars by using <code class="literal">_all</code> or <code class="literal">*</code> or by omitting the calendar identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Specifies to get events with timestamps earlier than this time.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of events.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (Optional, string)</strong></span>: Specifies to get events for a specific anomaly detection job identifier or job group. It must be used with a calendar identifier of <code class="literal">_all</code> or <code class="literal">*</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of events to obtain.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Specifies to get events with timestamps after this time.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_calendars"></a>get_calendars</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get calendar configuration info.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-calendar.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getCalendars({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_292"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (Optional, string)</strong></span>: A string that uniquely identifies a calendar. You can get information for multiple calendars by using a list of ids or a wildcard expression. You can get information for all calendars by using <code class="literal">_all</code> or <code class="literal">*</code> or by omitting the calendar identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page</code> (Optional, { from, size })</strong></span>: This object is supported only when you omit the calendar identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of calendars. This parameter is supported only when you omit the calendar identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of calendars to obtain. This parameter is supported only when you omit the calendar identifier.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_categories"></a>get_categories</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get anomaly detection job results for categories.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-category.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getCategories({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_293"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">category_id</code> (Optional, string)</strong></span>: Identifier for the category, which is unique in the job. If you specify
neither the category ID nor the partition_field_value, the API returns
information about all categories. If you specify only the
partition_field_value, it returns information about all categories for
the specified partition.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page</code> (Optional, { from, size })</strong></span>: Configures pagination.
This parameter has the <code class="literal">from</code> and <code class="literal">size</code> properties.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of categories.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">partition_field_value</code> (Optional, string)</strong></span>: Only return categories for the specified partition.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of categories to obtain.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_data_frame_analytics"></a>get_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get data frame analytics job configuration info.
You can get information for multiple data frame analytics jobs in a single
API request by using a list of data frame analytics jobs or a
wildcard expression.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getDataFrameAnalytics({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_294"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: Identifier for the data frame analytics job. If you do not specify this
option, the API returns information for the first hundred data frame
analytics jobs.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no data frame analytics
jobs that match.
</li>
<li class="listitem">
Contains the <code class="literal">_all</code> string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default value returns an empty data_frame_analytics array when there
are no matches and the subset of results when there are partial matches.
If this parameter is <code class="literal">false</code>, the request returns a 404 status code when
there are no matches or only partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of data frame analytics jobs.
</strong></span> <span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of data frame analytics jobs to obtain.
<span class="strong strong"><strong>* *<code class="literal">exclude_generated</code> (Optional, boolean)</strong></span>: Indicates if certain fields should be removed from the configuration on
retrieval. This allows the configuration to be in an acceptable format to
be retrieved and then added to another cluster.</p>
<div class="position-relative"><h4><a id="_get_data_frame_analytics_stats"></a>get_data_frame_analytics_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get data frame analytics jobs usage info.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-dfanalytics-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getDataFrameAnalyticsStats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_295"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: Identifier for the data frame analytics job. If you do not specify this
option, the API returns information for the first hundred data frame
analytics jobs.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no data frame analytics
jobs that match.
</li>
<li class="listitem">
Contains the <code class="literal">_all</code> string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default value returns an empty data_frame_analytics array when there
are no matches and the subset of results when there are partial matches.
If this parameter is <code class="literal">false</code>, the request returns a 404 status code when
there are no matches or only partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of data frame analytics jobs.
</strong></span> <span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of data frame analytics jobs to obtain.
<span class="strong strong"><strong>* *<code class="literal">verbose</code> (Optional, boolean)</strong></span>: Defines whether the stats response should be verbose.</p>
<div class="position-relative"><h4><a id="_get_datafeed_stats"></a>get_datafeed_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get datafeeds usage info.
You can get statistics for multiple datafeeds in a single API request by
using a list of datafeeds or a wildcard expression. You can
get statistics for all datafeeds by using <code class="literal">_all</code>, by specifying <code class="literal">*</code> as the
<code class="literal">&lt;feed_id&gt;</code>, or by omitting the <code class="literal">&lt;feed_id&gt;</code>. If the datafeed is stopped, the
only information you receive is the <code class="literal">datafeed_id</code> and the <code class="literal">state</code>.
This API returns a maximum of 10,000 datafeeds.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-datafeed-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getDatafeedStats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_296"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (Optional, string | string[])</strong></span>: Identifier for the datafeed. It can be a datafeed identifier or a
wildcard expression. If you do not specify one of these options, the API
returns information about all datafeeds.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no datafeeds that match.
</li>
<li class="listitem">
Contains the <code class="literal">_all</code> string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default value is <code class="literal">true</code>, which returns an empty <code class="literal">datafeeds</code> array
when there are no matches and the subset of results when there are
partial matches. If this parameter is <code class="literal">false</code>, the request returns a
<code class="literal">404</code> status code when there are no matches or only partial matches.</p>
<div class="position-relative"><h4><a id="_get_datafeeds"></a>get_datafeeds</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get datafeeds configuration info.
You can get information for multiple datafeeds in a single API request by
using a list of datafeeds or a wildcard expression. You can
get information for all datafeeds by using <code class="literal">_all</code>, by specifying <code class="literal">*</code> as the
<code class="literal">&lt;feed_id&gt;</code>, or by omitting the <code class="literal">&lt;feed_id&gt;</code>.
This API returns a maximum of 10,000 datafeeds.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-datafeed.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getDatafeeds({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_297"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (Optional, string | string[])</strong></span>: Identifier for the datafeed. It can be a datafeed identifier or a
wildcard expression. If you do not specify one of these options, the API
returns information about all datafeeds.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no datafeeds that match.
</li>
<li class="listitem">
Contains the <code class="literal">_all</code> string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default value is <code class="literal">true</code>, which returns an empty <code class="literal">datafeeds</code> array
when there are no matches and the subset of results when there are
partial matches. If this parameter is <code class="literal">false</code>, the request returns a
<code class="literal">404</code> status code when there are no matches or only partial matches.
<span class="strong strong"><strong>* *<code class="literal">exclude_generated</code> (Optional, boolean)</strong></span>: Indicates if certain fields should be removed from the configuration on
retrieval. This allows the configuration to be in an acceptable format to
be retrieved and then added to another cluster.</p>
<div class="position-relative"><h4><a id="_get_filters"></a>get_filters</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get filters.
You can get a single filter or all filters.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-filter.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getFilters({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_298"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">filter_id</code> (Optional, string | string[])</strong></span>: A string that uniquely identifies a filter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of filters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of filters to obtain.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_influencers"></a>get_influencers</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get anomaly detection job results for influencers.
Influencers are the entities that have contributed to, or are to blame for,
the anomalies. Influencer results are available only if an
<code class="literal">influencer_field_name</code> is specified in the job configuration.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-influencer.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getInfluencers({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_299"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page</code> (Optional, { from, size })</strong></span>: Configures pagination.
This parameter has the <code class="literal">from</code> and <code class="literal">size</code> properties.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">desc</code> (Optional, boolean)</strong></span>: If true, the results are sorted in descending order.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Returns influencers with timestamps earlier than this time.
The default value means it is unset and results are not limited to
specific timestamps.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">exclude_interim</code> (Optional, boolean)</strong></span>: If true, the output excludes interim results. By default, interim results
are included.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">influencer_score</code> (Optional, number)</strong></span>: Returns influencers with anomaly scores greater than or equal to this
value.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of influencers.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of influencers to obtain.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, string)</strong></span>: Specifies the sort field for the requested influencers. By default, the
influencers are sorted by the <code class="literal">influencer_score</code> value.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Returns influencers with timestamps after this time. The default value
means it is unset and results are not limited to specific timestamps.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_job_stats"></a>get_job_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get anomaly detection jobs usage info.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-job-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getJobStats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_300"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (Optional, string)</strong></span>: Identifier for the anomaly detection job. It can be a job identifier, a
group name, a list of jobs, or a wildcard expression. If
you do not specify one of these options, the API returns information for
all anomaly detection jobs.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no jobs that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>If <code class="literal">true</code>, the API returns an empty <code class="literal">jobs</code> array when
there are no matches and the subset of results when there are partial
matches. If <code class="literal">false</code>, the API returns a <code class="literal">404</code> status
code when there are no matches or only partial matches.</p>
<div class="position-relative"><h4><a id="_get_jobs"></a>get_jobs</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get anomaly detection jobs configuration info.
You can get information for multiple anomaly detection jobs in a single API
request by using a group name, a list of jobs, or a wildcard
expression. You can get information for all anomaly detection jobs by using
<code class="literal">_all</code>, by specifying <code class="literal">*</code> as the <code class="literal">&lt;job_id&gt;</code>, or by omitting the <code class="literal">&lt;job_id&gt;</code>.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getJobs({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_301"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (Optional, string | string[])</strong></span>: Identifier for the anomaly detection job. It can be a job identifier, a
group name, or a wildcard expression. If you do not specify one of these
options, the API returns information for all anomaly detection jobs.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no jobs that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default value is <code class="literal">true</code>, which returns an empty <code class="literal">jobs</code> array when
there are no matches and the subset of results when there are partial
matches. If this parameter is <code class="literal">false</code>, the request returns a <code class="literal">404</code> status
code when there are no matches or only partial matches.
<span class="strong strong"><strong>* *<code class="literal">exclude_generated</code> (Optional, boolean)</strong></span>: Indicates if certain fields should be removed from the configuration on
retrieval. This allows the configuration to be in an acceptable format to
be retrieved and then added to another cluster.</p>
<div class="position-relative"><h4><a id="_get_memory_stats"></a>get_memory_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get machine learning memory usage info.
Get information about how machine learning jobs and trained models are using memory,
on each node, both within the JVM heap, and natively, outside of the JVM.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-ml-memory.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getMemoryStats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_302"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string)</strong></span>: The names of particular nodes in the cluster to target. For example, <code class="literal">nodeId1,nodeId2</code> or
<code class="literal">ml:true</code>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout
expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request
fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_model_snapshot_upgrade_stats"></a>get_model_snapshot_upgrade_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get anomaly detection job model snapshot upgrade usage info.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-job-model-snapshot-upgrade-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getModelSnapshotUpgradeStats({ job_id, snapshot_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_303"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot_id</code> (string)</strong></span>: A numerical character string that uniquely identifies the model snapshot. You can get information for multiple
snapshots by using a list or a wildcard expression. You can get all snapshots by using <code class="literal">_all</code>,
by specifying <code class="literal">*</code> as the snapshot ID, or by omitting the snapshot ID.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Contains wildcard expressions and there are no jobs that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default value is true, which returns an empty jobs array when there are no matches and the subset of results
when there are partial matches. If this parameter is false, the request returns a 404 status code when there are
no matches or only partial matches.</p>
<div class="position-relative"><h4><a id="_get_model_snapshots"></a>get_model_snapshots</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get model snapshots info.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-snapshot.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getModelSnapshots({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_304"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot_id</code> (Optional, string)</strong></span>: A numerical character string that uniquely identifies the model snapshot. You can get information for multiple
snapshots by using a list or a wildcard expression. You can get all snapshots by using <code class="literal">_all</code>,
by specifying <code class="literal">*</code> as the snapshot ID, or by omitting the snapshot ID.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">desc</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">desc</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">end</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page</code> (Optional, { from, size })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, string)</strong></span>: Refer to the description for the <code class="literal">sort</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">start</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of snapshots.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of snapshots to obtain.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_overall_buckets"></a>get_overall_buckets</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get overall bucket results.</p>
<p>Retrievs overall bucket results that summarize the bucket results of
multiple anomaly detection jobs.</p>
<p>The <code class="literal">overall_score</code> is calculated by combining the scores of all the
buckets within the overall bucket span. First, the maximum
<code class="literal">anomaly_score</code> per anomaly detection job in the overall bucket is
calculated. Then the <code class="literal">top_n</code> of those scores are averaged to result in
the <code class="literal">overall_score</code>. This means that you can fine-tune the
<code class="literal">overall_score</code> so that it is more or less sensitive to the number of
jobs that detect an anomaly at the same time. For example, if you set
<code class="literal">top_n</code> to <code class="literal">1</code>, the <code class="literal">overall_score</code> is the maximum bucket score in the
overall bucket. Alternatively, if you set <code class="literal">top_n</code> to the number of jobs,
the <code class="literal">overall_score</code> is high only when all jobs detect anomalies in that
overall bucket. If you set the <code class="literal">bucket_span</code> parameter (to a value
greater than its default), the <code class="literal">overall_score</code> is the maximum
<code class="literal">overall_score</code> of the overall buckets that have a span equal to the
jobs' largest bucket span.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-overall-buckets.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getOverallBuckets({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_305"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job. It can be a job identifier, a
group name, a list of jobs or groups, or a wildcard
expression.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>You can summarize the bucket results for all anomaly detection jobs by
using <code class="literal">_all</code> or by specifying <code class="literal">*</code> as the <code class="literal">&lt;job_id&gt;</code>.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">allow_no_match</code> query parameter.
</strong></span> <span class="strong strong"><strong><code class="literal">bucket_span</code> (Optional, string | -1 | 0)</strong></span>: Refer to the description for the <code class="literal">bucket_span</code> query parameter.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">end</code> query parameter.
</strong></span> <span class="strong strong"><strong><code class="literal">exclude_interim</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">exclude_interim</code> query parameter.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">overall_score</code> (Optional, number | string)</strong></span>: Refer to the description for the <code class="literal">overall_score</code> query parameter.
</strong></span> <span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">start</code> query parameter.
<span class="strong strong"><strong>* *<code class="literal">top_n</code> (Optional, number)</strong></span>: Refer to the description for the <code class="literal">top_n</code> query parameter.</p>
<div class="position-relative"><h4><a id="_get_records"></a>get_records</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get anomaly records for an anomaly detection job.
Records contain the detailed analytical results. They describe the anomalous
activity that has been identified in the input data based on the detector
configuration.
There can be many anomaly records depending on the characteristics and size
of the input data. In practice, there are often too many to be able to
manually process them. The machine learning features therefore perform a
sophisticated aggregation of the anomaly records into buckets.
The number of record results depends on the number of anomalies found in each
bucket, which relates to the number of time series being modeled and the
number of detectors.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-get-record.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getRecords({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_306"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">desc</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">desc</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">end</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">exclude_interim</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">exclude_interim</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page</code> (Optional, { from, size })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">record_score</code> (Optional, number)</strong></span>: Refer to the description for the <code class="literal">record_score</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, string)</strong></span>: Refer to the description for the <code class="literal">sort</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">start</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of records.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of records to obtain.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_trained_models"></a>get_trained_models</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get trained model configuration info.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-trained-models.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getTrainedModels({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_307"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (Optional, string | string[])</strong></span>: The unique identifier of the trained model or a model alias.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>You can get information for multiple trained models in a single API
request by using a list of model IDs or a wildcard
expression.
<span class="strong strong"><strong>* *<code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Contains wildcard expressions and there are no models that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ul>
</div>
<p>If true, it returns an empty array when there are no matches and the
subset of results when there are partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">decompress_definition</code> (Optional, boolean)</strong></span>: Specifies whether the included model definition should be returned as a
JSON map (true) or in a custom compressed format (false).
</strong></span> <span class="strong strong"><strong><code class="literal">exclude_generated</code> (Optional, boolean)</strong></span>: Indicates if certain fields should be removed from the configuration on
retrieval. This allows the configuration to be in an acceptable format to
be retrieved and then added to another cluster.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of models.
</strong></span> <span class="strong strong"><strong><code class="literal">include</code> (Optional, Enum("definition" | "feature_importance_baseline" | "hyperparameters" | "total_feature_importance" | "definition_status"))</strong></span>: A comma delimited string of optional fields to include in the response
body.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">include_model_definition</code> (Optional, boolean)</strong></span>: parameter is deprecated! Use [include=definition] instead
</strong></span> <span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of models to obtain.
<span class="strong strong"><strong>* *<code class="literal">tags</code> (Optional, string | string[])</strong></span>: A comma delimited string of tags. A trained model can have many tags, or
none. When supplied, only trained models that contain all the supplied
tags are returned.</p>
<div class="position-relative"><h4><a id="_get_trained_models_stats"></a>get_trained_models_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get trained models usage info.
You can get usage information for multiple trained
models in a single API request by using a list of model IDs or a wildcard expression.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-trained-models-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.getTrainedModelsStats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_308"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (Optional, string | string[])</strong></span>: The unique identifier of the trained model or a model alias. It can be a
list or a wildcard expression.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Contains wildcard expressions and there are no models that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>If true, it returns an empty array when there are no matches and the
subset of results when there are partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of models.
</strong></span> <span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of models to obtain.</p>
<div class="position-relative"><h4><a id="_infer_trained_model"></a>infer_trained_model</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Evaluate a trained model.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/infer-trained-model.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.inferTrainedModel({ model_id, docs })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_309"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">docs</code> (Record&lt;string, User-defined value&gt;[])</strong></span>: An array of objects to pass to the model for inference. The objects should contain a fields matching your
configured trained model input. Typically, for NLP models, the field name is <code class="literal">text_field</code>.
Currently, for NLP models, only a single value is allowed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_config</code> (Optional, { regression, classification, text_classification, zero_shot_classification, fill_mask, ner, pass_through, text_embedding, text_expansion, question_answering })</strong></span>: The inference configuration updates to apply on the API call
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Controls the amount of time to wait for inference results.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_info_3"></a>info</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get machine learning information.
Get defaults and limits used by machine learning.
This endpoint is designed to be used by a user interface that needs to fully
understand machine learning configurations where some options are not
specified, meaning that the defaults should be used. This endpoint may be
used to find out what those defaults are. It also provides information about
the maximum size of machine learning jobs that could run in the current
cluster configuration.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-ml-info.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.info()</pre>
</div>
<div class="position-relative"><h4><a id="_open_job"></a>open_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Open anomaly detection jobs.</p>
<p>An anomaly detection job must be opened to be ready to receive and analyze
data. It can be opened and closed multiple times throughout its lifecycle.
When you open a new job, it starts with an empty model.
When you open an existing job, the most recent model state is automatically
loaded. The job is ready to resume its analysis from where it left off, once
new data is received.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-open-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.openJob({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_310"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Refer to the description for the <code class="literal">timeout</code> query parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_post_calendar_events"></a>post_calendar_events</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Add scheduled events to the calendar.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-post-calendar-event.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.postCalendarEvents({ calendar_id, events })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_311"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (string)</strong></span>: A string that uniquely identifies a calendar.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">events</code> ({ calendar_id, event_id, description, end_time, start_time }[])</strong></span>: A list of one of more scheduled events. The event’s start and end times can be specified as integer milliseconds since the epoch or as a string in ISO 8601 format.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_post_data"></a>post_data</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Send data to an anomaly detection job for analysis.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>For each job, data can be accepted from only a single connection at a time.
It is not currently possible to post data to multiple jobs using wildcards or a list.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-post-data.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.postData({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_312"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job. The job must have a state of open to receive and process the data.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">data</code> (Optional, TData[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">reset_end</code> (Optional, string | Unit)</strong></span>: Specifies the end of the bucket resetting range.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">reset_start</code> (Optional, string | Unit)</strong></span>: Specifies the start of the bucket resetting range.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_preview_data_frame_analytics"></a>preview_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Preview features used by data frame analytics.
Preview the extracted features used by a data frame analytics config.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/preview-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.previewDataFrameAnalytics({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_313"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: Identifier for the data frame analytics job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">config</code> (Optional, { source, analysis, model_memory_limit, max_num_threads, analyzed_fields })</strong></span>: A data frame analytics config as described in create data frame analytics
jobs. Note that <code class="literal">id</code> and <code class="literal">dest</code> don’t need to be provided in the context of
this API.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_preview_datafeed"></a>preview_datafeed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Preview a datafeed.
This API returns the first "page" of search results from a datafeed.
You can preview an existing datafeed or provide configuration details for a datafeed
and anomaly detection job in the API. The preview shows the structure of the data
that will be passed to the anomaly detection engine.
IMPORTANT: When Elasticsearch security features are enabled, the preview uses the credentials of the user that
called the API. However, when the datafeed starts it uses the roles of the last user that created or updated the
datafeed. To get a preview that accurately reflects the behavior of the datafeed, use the appropriate credentials.
You can also use secondary authorization headers to supply the credentials.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-preview-datafeed.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.previewDatafeed({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_314"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (Optional, string)</strong></span>: A numerical character string that uniquely identifies the datafeed. This identifier can contain lowercase
alphanumeric characters (a-z and 0-9), hyphens, and underscores. It must start and end with alphanumeric
characters. NOTE: If you use this path parameter, you cannot provide datafeed or anomaly detection job
configuration details in the request body.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_config</code> (Optional, { aggregations, chunking_config, datafeed_id, delayed_data_check_config, frequency, indices, indices_options, job_id, max_empty_searches, query, query_delay, runtime_mappings, script_fields, scroll_size })</strong></span>: The datafeed definition to preview.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_config</code> (Optional, { allow_lazy_open, analysis_config, analysis_limits, background_persist_interval, custom_settings, daily_model_snapshot_retention_after_days, data_description, datafeed_config, description, groups, job_id, job_type, model_plot_config, model_snapshot_retention_days, renormalization_window_days, results_index_name, results_retention_days })</strong></span>: The configuration details for the anomaly detection job that is associated with the datafeed. If the
<code class="literal">datafeed_config</code> object does not include a <code class="literal">job_id</code> that references an existing anomaly detection job, you must
supply this <code class="literal">job_config</code> object. If you include both a <code class="literal">job_id</code> and a <code class="literal">job_config</code>, the latter information is
used. You cannot specify a <code class="literal">job_config</code> object unless you also supply a <code class="literal">datafeed_config</code> object.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: The start time from where the datafeed preview should begin
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: The end time when the datafeed preview should stop
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_calendar"></a>put_calendar</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a calendar.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-put-calendar.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putCalendar({ calendar_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_315"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (string)</strong></span>: A string that uniquely identifies a calendar.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_ids</code> (Optional, string[])</strong></span>: An array of anomaly detection job identifiers.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the calendar.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_calendar_job"></a>put_calendar_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Add anomaly detection job to calendar.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-put-calendar-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putCalendarJob({ calendar_id, job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_316"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">calendar_id</code> (string)</strong></span>: A string that uniquely identifies a calendar.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string | string[])</strong></span>: An identifier for the anomaly detection jobs. It can be a job identifier, a group name, or a list of jobs or groups.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_data_frame_analytics"></a>put_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a data frame analytics job.
This API creates a data frame analytics job that performs an analysis on the
source indices and stores the outcome in a destination index.
By default, the query used in the source configuration is <code class="literal">{"match_all": {}}</code>.</p>
<p>If the destination index does not exist, it is created automatically when you start the job.</p>
<p>If you supply only a subset of the regression or classification parameters, hyperparameter optimization occurs. It determines a value for each of the undefined parameters.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putDataFrameAnalytics({ id, analysis, dest, source })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_317"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the data frame analytics job. This identifier can contain
lowercase alphanumeric characters (a-z and 0-9), hyphens, and
underscores. It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analysis</code> ({ classification, outlier_detection, regression })</strong></span>: The analysis configuration, which contains the information necessary to
perform one of the following types of analysis: classification, outlier
detection, or regression.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dest</code> ({ index, results_field })</strong></span>: The destination configuration.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">source</code> ({ index, query, runtime_mappings, _source })</strong></span>: The configuration of how to source the analysis data.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_lazy_start</code> (Optional, boolean)</strong></span>: Specifies whether this job can start when there is insufficient machine
learning node capacity for it to be immediately assigned to a node. If
set to <code class="literal">false</code> and a machine learning node with capacity to run the job
cannot be immediately found, the API returns an error. If set to <code class="literal">true</code>,
the API does not return an error; the job waits in the <code class="literal">starting</code> state
until sufficient machine learning node capacity is available. This
behavior is also affected by the cluster-wide
<code class="literal">xpack.ml.max_lazy_ml_nodes</code> setting.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analyzed_fields</code> (Optional, { includes, excludes })</strong></span>: Specifies <code class="literal">includes</code> and/or <code class="literal">excludes</code> patterns to select which fields
will be included in the analysis. The patterns specified in <code class="literal">excludes</code>
are applied last, therefore <code class="literal">excludes</code> takes precedence. In other words,
if the same field is specified in both <code class="literal">includes</code> and <code class="literal">excludes</code>, then
the field will not be included in the analysis. If <code class="literal">analyzed_fields</code> is
not set, only the relevant fields will be included. For example, all the
numeric fields for outlier detection.
The supported fields vary for each type of analysis. Outlier detection
requires numeric or <code class="literal">boolean</code> data to analyze. The algorithms don’t
support missing values therefore fields that have data types other than
numeric or boolean are ignored. Documents where included fields contain
missing values, null values, or an array are also ignored. Therefore the
<code class="literal">dest</code> index may contain documents that don’t have an outlier score.
Regression supports fields that are numeric, <code class="literal">boolean</code>, <code class="literal">text</code>,
<code class="literal">keyword</code>, and <code class="literal">ip</code> data types. It is also tolerant of missing values.
Fields that are supported are included in the analysis, other fields are
ignored. Documents where included fields contain an array with two or
more values are also ignored. Documents in the <code class="literal">dest</code> index that don’t
contain a results field are not included in the regression analysis.
Classification supports fields that are numeric, <code class="literal">boolean</code>, <code class="literal">text</code>,
<code class="literal">keyword</code>, and <code class="literal">ip</code> data types. It is also tolerant of missing values.
Fields that are supported are included in the analysis, other fields are
ignored. Documents where included fields contain an array with two or
more values are also ignored. Documents in the <code class="literal">dest</code> index that don’t
contain a results field are not included in the classification analysis.
Classification analysis can be improved by mapping ordinal variable
values to a single number. For example, in case of age ranges, you can
model the values as <code class="literal">0-14 = 0</code>, <code class="literal">15-24 = 1</code>, <code class="literal">25-34 = 2</code>, and so on.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_num_threads</code> (Optional, number)</strong></span>: The maximum number of threads to be used by the analysis. Using more
threads may decrease the time necessary to complete the analysis at the
cost of using more CPU. Note that the process may use additional threads
for operational functionality other than the analysis itself.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">_meta</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_memory_limit</code> (Optional, string)</strong></span>: The approximate maximum amount of memory resources that are permitted for
analytical processing. If your <code class="literal">elasticsearch.yml</code> file contains an
<code class="literal">xpack.ml.max_model_memory_limit</code> setting, an error occurs when you try
to create data frame analytics jobs that have <code class="literal">model_memory_limit</code> values
greater than that setting.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">headers</code> (Optional, Record&lt;string, string | string[]&gt;)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">version</code> (Optional, string)</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_datafeed"></a>put_datafeed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a datafeed.
Datafeeds retrieve data from Elasticsearch for analysis by an anomaly detection job.
You can associate only one datafeed with each anomaly detection job.
The datafeed contains a query that runs at a defined interval (<code class="literal">frequency</code>).
If you are concerned about delayed data, you can add a delay (<code class="literal">query_delay') at each interval.
By default, the datafeed uses the following query: `{"match_all": {"boost": 1}}</code>.</p>
<p>When Elasticsearch security features are enabled, your datafeed remembers which roles the user who created it had
at the time of creation and runs the query using those same roles. If you provide secondary authorization headers,
those credentials are used instead.
You must use Kibana, this API, or the create anomaly detection jobs API to create a datafeed. Do not add a datafeed
directly to the <code class="literal">.ml-config</code> index. Do not give users <code class="literal">write</code> privileges on the <code class="literal">.ml-config</code> index.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-put-datafeed.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putDatafeed({ datafeed_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_318"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (string)</strong></span>: A numerical character string that uniquely identifies the datafeed.
This identifier can contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores.
It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">aggregations</code> (Optional, Record&lt;string, { aggregations, meta, adjacency_matrix, auto_date_histogram, avg, avg_bucket, boxplot, bucket_script, bucket_selector, bucket_sort, bucket_count_ks_test, bucket_correlation, cardinality, categorize_text, children, composite, cumulative_cardinality, cumulative_sum, date_histogram, date_range, derivative, diversified_sampler, extended_stats, extended_stats_bucket, frequent_item_sets, filter, filters, geo_bounds, geo_centroid, geo_distance, geohash_grid, geo_line, geotile_grid, geohex_grid, global, histogram, ip_range, ip_prefix, inference, line, matrix_stats, max, max_bucket, median_absolute_deviation, min, min_bucket, missing, moving_avg, moving_percentiles, moving_fn, multi_terms, nested, normalize, parent, percentile_ranks, percentiles, percentiles_bucket, range, rare_terms, rate, reverse_nested, random_sampler, sampler, scripted_metric, serial_diff, significant_terms, significant_text, stats, stats_bucket, string_stats, sum, sum_bucket, terms, time_series, top_hits, t_test, top_metrics, value_count, weighted_avg, variable_width_histogram }&gt;)</strong></span>: If set, the datafeed performs aggregation searches.
Support for aggregations is limited and should be used only with low cardinality data.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_config</code> (Optional, { mode, time_span })</strong></span>: Datafeeds might be required to search over long time periods, for several months or years.
This search is split into time chunks in order to ensure the load on Elasticsearch is managed.
Chunking configuration controls how the size of these time chunks are calculated;
it is an advanced configuration option.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delayed_data_check_config</code> (Optional, { check_window, enabled })</strong></span>: Specifies whether the datafeed checks for missing data and the size of the window.
The datafeed can optionally search over indices that have already been read in an effort to determine whether
any data has subsequently been added to the index. If missing data is found, it is a good indication that the
<code class="literal">query_delay</code> is set too low and the data is being indexed after the datafeed has passed that moment in time.
This check runs only on real-time datafeeds.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">frequency</code> (Optional, string | -1 | 0)</strong></span>: The interval at which scheduled queries are made while the datafeed runs in real time.
The default value is either the bucket span for short bucket spans, or, for longer bucket spans, a sensible
fraction of the bucket span. When <code class="literal">frequency</code> is shorter than the bucket span, interim results for the last
(partial) bucket are written then eventually overwritten by the full bucket results. If the datafeed uses
aggregations, this value must be divisible by the interval of the date histogram aggregation.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices</code> (Optional, string | string[])</strong></span>: An array of index names. Wildcards are supported. If any of the indices are in remote clusters, the machine
learning nodes must have the <code class="literal">remote_cluster_client</code> role.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices_options</code> (Optional, { allow_no_indices, expand_wildcards, ignore_unavailable, ignore_throttled })</strong></span>: Specifies index expansion options that are used during search
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (Optional, string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_empty_searches</code> (Optional, number)</strong></span>: If a real-time datafeed has never seen any data (including during any initial training period), it automatically
stops and closes the associated job after this many real-time searches return no documents. In other words,
it stops after <code class="literal">frequency</code> times <code class="literal">max_empty_searches</code> of real-time operation. If not set, a datafeed with no
end time that sees no data remains started until it is explicitly stopped. By default, it is not set.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: The Elasticsearch query domain-specific language (DSL). This value corresponds to the query object in an
Elasticsearch search POST body. All the options that are supported by Elasticsearch can be used, as this
object is passed verbatim to Elasticsearch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query_delay</code> (Optional, string | -1 | 0)</strong></span>: The number of seconds behind real time that data is queried. For example, if data from 10:04 a.m. might
not be searchable in Elasticsearch until 10:06 a.m., set this property to 120 seconds. The default
value is randomly selected between <code class="literal">60s</code> and <code class="literal">120s</code>. This randomness improves the query performance
when there are multiple jobs running on the same node.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">runtime_mappings</code> (Optional, Record&lt;string, { fields, fetch_fields, format, input_field, target_field, target_index, script, type }&gt;)</strong></span>: Specifies runtime fields for the datafeed search.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">script_fields</code> (Optional, Record&lt;string, { script, ignore_failure }&gt;)</strong></span>: Specifies scripts that evaluate custom expressions and returns script fields to the datafeed.
The detector configuration objects in a job can contain functions that use these script fields.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">scroll_size</code> (Optional, number)</strong></span>: The size parameter that is used in Elasticsearch searches when the datafeed does not use aggregations.
The maximum value is the value of <code class="literal">index.max_result_window</code>, which is 10,000 by default.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">headers</code> (Optional, Record&lt;string, string | string[]&gt;)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If true, wildcard indices expressions that resolve into no concrete indices are ignored. This includes the <code class="literal">_all</code>
string or when no indices are specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match. If the request can target data streams, this argument determines
whether wildcard expressions match hidden data streams. Supports a list of values.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_throttled</code> (Optional, boolean)</strong></span>: If true, concrete, expanded, or aliased indices are ignored when frozen.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If true, unavailable indices (missing or closed) are ignored.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_filter"></a>put_filter</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a filter.
A filter contains a list of strings. It can be used by one or more anomaly detection jobs.
Specifically, filters are referenced in the <code class="literal">custom_rules</code> property of detector configuration objects.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-put-filter.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putFilter({ filter_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_319"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">filter_id</code> (string)</strong></span>: A string that uniquely identifies a filter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the filter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">items</code> (Optional, string[])</strong></span>: The items of the filter. A wildcard <code class="literal">*</code> can be used at the beginning or the end of an item.
Up to 10000 items are allowed in each filter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_job"></a>put_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an anomaly detection job.</p>
<p>If you include a <code class="literal">datafeed_config</code>, you must have read index privileges on the source index.
If you include a <code class="literal">datafeed_config</code> but do not provide a query, the datafeed uses <code class="literal">{"match_all": {"boost": 1}}</code>.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-put-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putJob({ job_id, analysis_config, data_description })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_320"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: The identifier for the anomaly detection job. This identifier can contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores. It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analysis_config</code> ({ bucket_span, categorization_analyzer, categorization_field_name, categorization_filters, detectors, influencers, latency, model_prune_window, multivariate_by_fields, per_partition_categorization, summary_count_field_name })</strong></span>: Specifies how to analyze the data. After you create a job, you cannot change the analysis configuration; all the properties are informational.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">data_description</code> ({ format, time_field, time_format, field_delimiter })</strong></span>: Defines the format of the input data when you send data to the job by using the post data API. Note that when configure a datafeed, these properties are automatically set. When data is received via the post data API, it is not stored in Elasticsearch. Only the results for anomaly detection are retained.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_lazy_open</code> (Optional, boolean)</strong></span>: Advanced configuration option. Specifies whether this job can open when there is insufficient machine learning node capacity for it to be immediately assigned to a node. By default, if a machine learning node with capacity to run the job cannot immediately be found, the open anomaly detection jobs API returns an error. However, this is also subject to the cluster-wide <code class="literal">xpack.ml.max_lazy_ml_nodes</code> setting. If this option is set to true, the open anomaly detection jobs API does not return an error and the job waits in the opening state until sufficient machine learning node capacity is available.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analysis_limits</code> (Optional, { categorization_examples_limit, model_memory_limit })</strong></span>: Limits can be applied for the resources required to hold the mathematical models in memory. These limits are approximate and can be set per job. They do not control the memory used by other processes, for example the Elasticsearch Java processes.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">background_persist_interval</code> (Optional, string | -1 | 0)</strong></span>: Advanced configuration option. The time between each periodic persistence of the model. The default value is a randomized value between 3 to 4 hours, which avoids all jobs persisting at exactly the same time. The smallest allowed value is 1 hour. For very large models (several GB), persistence could take 10-20 minutes, so do not set the <code class="literal">background_persist_interval</code> value too low.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">custom_settings</code> (Optional, User-defined value)</strong></span>: Advanced configuration option. Contains custom meta data about the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">daily_model_snapshot_retention_after_days</code> (Optional, number)</strong></span>: Advanced configuration option, which affects the automatic removal of old model snapshots for this job. It specifies a period of time (in days) after which only the first snapshot per day is retained. This period is relative to the timestamp of the most recent snapshot for this job. Valid values range from 0 to <code class="literal">model_snapshot_retention_days</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_config</code> (Optional, { aggregations, chunking_config, datafeed_id, delayed_data_check_config, frequency, indices, indices_options, job_id, max_empty_searches, query, query_delay, runtime_mappings, script_fields, scroll_size })</strong></span>: Defines a datafeed for the anomaly detection job. If Elasticsearch security features are enabled, your datafeed remembers which roles the user who created it had at the time of creation and runs the query using those same roles. If you provide secondary authorization headers, those credentials are used instead.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">groups</code> (Optional, string[])</strong></span>: A list of job groups. A job can belong to no groups or many.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_plot_config</code> (Optional, { annotations_enabled, enabled, terms })</strong></span>: This advanced configuration option stores model information along with the results. It provides a more detailed view into anomaly detection. If you enable model plot it can add considerable overhead to the performance of the system; it is not feasible for jobs with many entities. Model plot provides a simplified and indicative view of the model and its bounds. It does not display complex features such as multivariate correlations or multimodal data. As such, anomalies may occasionally be reported which cannot be seen in the model plot. Model plot config can be configured when the job is created or updated later. It must be disabled if performance issues are experienced.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_snapshot_retention_days</code> (Optional, number)</strong></span>: Advanced configuration option, which affects the automatic removal of old model snapshots for this job. It specifies the maximum period of time (in days) that snapshots are retained. This period is relative to the timestamp of the most recent snapshot for this job. By default, snapshots ten days older than the newest snapshot are deleted.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">renormalization_window_days</code> (Optional, number)</strong></span>: Advanced configuration option. The period over which adjustments to the score are applied, as new data is seen. The default value is the longer of 30 days or 100 bucket spans.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">results_index_name</code> (Optional, string)</strong></span>: A text string that affects the name of the machine learning results index. By default, the job generates an index named <code class="literal">.ml-anomalies-shared</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">results_retention_days</code> (Optional, number)</strong></span>: Advanced configuration option. The period of time (in days) that results are retained. Age is calculated relative to the timestamp of the latest bucket result. If this property has a non-null value, once per day at 00:30 (server time), results that are the specified number of days older than the latest bucket result are deleted from Elasticsearch. The default value is null, which means all results are retained. Annotations generated by the system also count as results for retention purposes; they are deleted after the same number of days as results. Annotations added by users are retained forever.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, wildcard indices expressions that resolve into no concrete indices are ignored. This includes the
<code class="literal">_all</code> string or when no indices are specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match. If the request can target data streams, this argument determines
whether wildcard expressions match hidden data streams. Supports a list of values. Valid values are:
</li>
</ul>
</div>
</li>
<li class="listitem">
<code class="literal">all</code>: Match any data stream or index, including hidden ones.
</li>
<li class="listitem">
<code class="literal">closed</code>: Match closed, non-hidden indices. Also matches any non-hidden data stream. Data streams cannot be closed.
</li>
<li class="listitem">
<code class="literal">hidden</code>: Match hidden data streams and hidden indices. Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</li>
<li class="listitem">
<code class="literal">none</code>: Wildcard patterns are not accepted.
</li>
<li class="listitem">
<p><code class="literal">open</code>: Match open, non-hidden indices. Also matches any non-hidden data stream.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_throttled</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, concrete, expanded or aliased indices are ignored when frozen.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, unavailable indices (missing or closed) are ignored.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_trained_model"></a>put_trained_model</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a trained model.
Enable you to supply a trained model that is not created by data frame analytics.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-trained-models.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putTrainedModel({ model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_321"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">compressed_definition</code> (Optional, string)</strong></span>: The compressed (GZipped and Base64 encoded) inference definition of the
model. If compressed_definition is specified, then definition cannot be
specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">definition</code> (Optional, { preprocessors, trained_model })</strong></span>: The inference definition for the model. If definition is specified, then
compressed_definition cannot be specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A human-readable description of the inference trained model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">inference_config</code> (Optional, { regression, classification, text_classification, zero_shot_classification, fill_mask, learning_to_rank, ner, pass_through, text_embedding, text_expansion, question_answering })</strong></span>: The default configuration for inference. This can be either a regression
or classification configuration. It must match the underlying
definition.trained_model&#8217;s target_type. For pre-packaged models such as
ELSER the config is not required.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">input</code> (Optional, { field_names })</strong></span>: The input field names for the model definition.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metadata</code> (Optional, User-defined value)</strong></span>: An object map that contains metadata about the model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_type</code> (Optional, Enum("tree_ensemble" | "lang_ident" | "pytorch"))</strong></span>: The model type.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_size_bytes</code> (Optional, number)</strong></span>: The estimated memory usage in bytes to keep the trained model in memory.
This property is supported only if defer_definition_decompression is true
or the model definition is not supplied.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">platform_architecture</code> (Optional, string)</strong></span>: The platform architecture (if applicable) of the trained mode. If the model
only works on one platform, because it is heavily optimized for a particular
processor architecture and OS combination, then this field specifies which.
The format of the string must match the platform identifiers used by Elasticsearch,
so one of, <code class="literal">linux-x86_64</code>, <code class="literal">linux-aarch64</code>, <code class="literal">darwin-x86_64</code>, <code class="literal">darwin-aarch64</code>,
or <code class="literal">windows-x86_64</code>. For portable models (those that work independent of processor
architecture or OS features), leave this field unset.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">tags</code> (Optional, string[])</strong></span>: An array of tags to organize the model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">prefix_strings</code> (Optional, { ingest, search })</strong></span>: Optional prefix strings applied at inference
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">defer_definition_decompression</code> (Optional, boolean)</strong></span>: If set to <code class="literal">true</code> and a <code class="literal">compressed_definition</code> is provided,
the request defers definition decompression and skips relevant
validations.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: Whether to wait for all child operations (e.g. model download)
to complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_trained_model_alias"></a>put_trained_model_alias</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a trained model alias.
A trained model alias is a logical name used to reference a single trained
model.
You can use aliases instead of trained model identifiers to make it easier to
reference your models. For example, you can use aliases in inference
aggregations and processors.
An alias must be unique and refer to only a single trained model. However,
you can have multiple aliases for each trained model.
If you use this API to update an alias such that it references a different
trained model ID and the model uses a different type of data frame analytics,
an error occurs. For example, this situation occurs if you have a trained
model for regression analysis and a trained model for classification
analysis; you cannot reassign an alias from one type of trained model to
another.
If you use this API to update an alias and there are very few input fields in
common between the old and new trained models for the model alias, the API
returns a warning.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-trained-models-aliases.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putTrainedModelAlias({ model_alias, model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_322"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_alias</code> (string)</strong></span>: The alias to create or update. This value cannot end in numbers.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The identifier for the trained model that the alias refers to.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">reassign</code> (Optional, boolean)</strong></span>: Specifies whether the alias gets reassigned to the specified trained
model if it is already assigned to a different model. If the alias is
already assigned and this parameter is false, the API returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_trained_model_definition_part"></a>put_trained_model_definition_part</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create part of a trained model definition.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-trained-model-definition-part.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putTrainedModelDefinitionPart({ model_id, part, definition, total_definition_length, total_parts })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_323"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">part</code> (number)</strong></span>: The definition part number. When the definition is loaded for inference the definition parts are streamed in the
order of their part number. The first part must be <code class="literal">0</code> and the final part must be <code class="literal">total_parts - 1</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">definition</code> (string)</strong></span>: The definition part for the model. Must be a base64 encoded string.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">total_definition_length</code> (number)</strong></span>: The total uncompressed definition length in bytes. Not base64 encoded.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">total_parts</code> (number)</strong></span>: The total number of parts that will be uploaded. Must be greater than 0.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_trained_model_vocabulary"></a>put_trained_model_vocabulary</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a trained model vocabulary.
This API is supported only for natural language processing (NLP) models.
The vocabulary is stored in the index as described in <code class="literal">inference_config.*.vocabulary</code> of the trained model definition.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-trained-model-vocabulary.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.putTrainedModelVocabulary({ model_id, vocabulary })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_324"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">vocabulary</code> (string[])</strong></span>: The model vocabulary, which must not be empty.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">merges</code> (Optional, string[])</strong></span>: The optional model merges if required by the tokenizer.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">scores</code> (Optional, number[])</strong></span>: The optional vocabulary value scores if required by the tokenizer.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_reset_job"></a>reset_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Reset an anomaly detection job.
All model state and results are deleted. The job is ready to start over as if
it had just been created.
It is not currently possible to reset multiple jobs using wildcards or a
comma separated list.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-reset-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.resetJob({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_325"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: The ID of the job to reset.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: Should this request wait until the operation has completed before
returning.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delete_user_annotations</code> (Optional, boolean)</strong></span>: Specifies whether annotations that have been added by the
user should be deleted along with any auto-generated annotations when the job is
reset.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_revert_model_snapshot"></a>revert_model_snapshot</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Revert to a snapshot.
The machine learning features react quickly to anomalous input, learning new
behaviors in data. Highly anomalous input increases the variance in the
models whilst the system learns whether this is a new step-change in behavior
or a one-off event. In the case where this anomalous input is known to be a
one-off, then it might be appropriate to reset the model state to a time
before this event. For example, you might consider reverting to a saved
snapshot after Black Friday or a critical system failure.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-revert-snapshot.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.revertModelSnapshot({ job_id, snapshot_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_326"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot_id</code> (string)</strong></span>: You can specify <code class="literal">empty</code> as the &lt;snapshot_id&gt;. Reverting to the empty
snapshot means the anomaly detection job starts learning a new model from
scratch when it is started.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delete_intervening_results</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">delete_intervening_results</code> query parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_set_upgrade_mode"></a>set_upgrade_mode</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Set upgrade_mode for ML indices.
Sets a cluster wide upgrade_mode setting that prepares machine learning
indices for an upgrade.
When upgrading your cluster, in some circumstances you must restart your
nodes and reindex your machine learning indices. In those circumstances,
there must be no machine learning jobs running. You can close the machine
learning jobs, do the upgrade, then open all the jobs again. Alternatively,
you can use this API to temporarily halt tasks associated with the jobs and
datafeeds and prevent new jobs from opening. You can also use this API
during upgrades that do not require you to reindex your machine learning
indices, though stopping jobs is not a requirement in that case.
You can see the current value for the upgrade_mode setting by using the get
machine learning info API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-set-upgrade-mode.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.setUpgradeMode({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_327"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">enabled</code> (Optional, boolean)</strong></span>: When <code class="literal">true</code>, it enables <code class="literal">upgrade_mode</code> which temporarily halts all job
and datafeed tasks and prohibits new job and datafeed tasks from
starting.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The time to wait for the request to be completed.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_start_data_frame_analytics"></a>start_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start a data frame analytics job.
A data frame analytics job can be started and stopped multiple times
throughout its lifecycle.
If the destination index does not exist, it is created automatically the
first time you start the data frame analytics job. The
<code class="literal">index.number_of_shards</code> and <code class="literal">index.number_of_replicas</code> settings for the
destination index are copied from the source index. If there are multiple
source indices, the destination index copies the highest setting values. The
mappings for the destination index are also copied from the source indices.
If there are any mapping conflicts, the job fails to start.
If the destination index exists, it is used as is. You can therefore set up
the destination index in advance with custom settings and mappings.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/start-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.startDataFrameAnalytics({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_328"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the data frame analytics job. This identifier can contain
lowercase alphanumeric characters (a-z and 0-9), hyphens, and
underscores. It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Controls the amount of time to wait until the data frame analytics job
starts.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_start_datafeed"></a>start_datafeed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start datafeeds.</p>
<p>A datafeed must be started in order to retrieve data from Elasticsearch. A datafeed can be started and stopped
multiple times throughout its lifecycle.</p>
<p>Before you can start a datafeed, the anomaly detection job must be open. Otherwise, an error occurs.</p>
<p>If you restart a stopped datafeed, it continues processing input data from the next millisecond after it was stopped.
If new data was indexed for that exact millisecond between stopping and starting, it will be ignored.</p>
<p>When Elasticsearch security features are enabled, your datafeed remembers which roles the last user to create or
update it had at the time of creation or update and runs the query using those same roles. If you provided secondary
authorization headers when you created or updated the datafeed, those credentials are used instead.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-start-datafeed.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.startDatafeed({ datafeed_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_329"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (string)</strong></span>: A numerical character string that uniquely identifies the datafeed. This identifier can contain lowercase
alphanumeric characters (a-z and 0-9), hyphens, and underscores. It must start and end with alphanumeric
characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">end</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">end</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">start</code> (Optional, string | Unit)</strong></span>: Refer to the description for the <code class="literal">start</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Refer to the description for the <code class="literal">timeout</code> query parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_start_trained_model_deployment"></a>start_trained_model_deployment</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start a trained model deployment.
It allocates the model to every machine learning node.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/start-trained-model-deployment.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.startTrainedModelDeployment({ model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_330"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model. Currently, only PyTorch models are supported.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">adaptive_allocations</code> (Optional, { enabled, min_number_of_allocations, max_number_of_allocations })</strong></span>: Adaptive allocations configuration. When enabled, the number of allocations
is set based on the current load.
If adaptive_allocations is enabled, do not set the number of allocations manually.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cache_size</code> (Optional, number | string)</strong></span>: The inference cache size (in memory outside the JVM heap) per node for the model.
The default value is the same size as the <code class="literal">model_size_bytes</code>. To disable the cache,
<code class="literal">0b</code> can be provided.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">deployment_id</code> (Optional, string)</strong></span>: A unique identifier for the deployment of the model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">number_of_allocations</code> (Optional, number)</strong></span>: The number of model allocations on each node where the model is deployed.
All allocations on a node share the same copy of the model in memory but use
a separate set of threads to evaluate the model.
Increasing this value generally increases the throughput.
If this setting is greater than the number of hardware threads
it will automatically be changed to a value less than the number of hardware threads.
If adaptive_allocations is enabled, do not set this value, because it’s automatically set.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">priority</code> (Optional, Enum("normal" | "low"))</strong></span>: The deployment priority.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">queue_capacity</code> (Optional, number)</strong></span>: Specifies the number of inference requests that are allowed in the queue. After the number of requests exceeds
this value, new requests are rejected with a 429 error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">threads_per_allocation</code> (Optional, number)</strong></span>: Sets the number of threads used by each model allocation during inference. This generally increases
the inference speed. The inference process is a compute-bound process; any number
greater than the number of available hardware threads on the machine does not increase the
inference speed. If this setting is greater than the number of hardware threads
it will automatically be changed to a value less than the number of hardware threads.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Specifies the amount of time to wait for the model to deploy.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for</code> (Optional, Enum("started" | "starting" | "fully_allocated"))</strong></span>: Specifies the allocation status to wait for before returning.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stop_data_frame_analytics"></a>stop_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Stop data frame analytics jobs.
A data frame analytics job can be started and stopped multiple times
throughout its lifecycle.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/stop-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.stopDataFrameAnalytics({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_331"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the data frame analytics job. This identifier can contain
lowercase alphanumeric characters (a-z and 0-9), hyphens, and
underscores. It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no data frame analytics
jobs that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The default value is true, which returns an empty data_frame_analytics
array when there are no matches and the subset of results when there are
partial matches. If this parameter is false, the request returns a 404
status code when there are no matches or only partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: If true, the data frame analytics job is stopped forcefully.
</strong></span> <span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Controls the amount of time to wait until the data frame analytics job
stops. Defaults to 20 seconds.</p>
<div class="position-relative"><h4><a id="_stop_datafeed"></a>stop_datafeed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Stop datafeeds.
A datafeed that is stopped ceases to retrieve data from Elasticsearch. A datafeed can be started and stopped
multiple times throughout its lifecycle.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-stop-datafeed.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.stopDatafeed({ datafeed_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_332"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (string)</strong></span>: Identifier for the datafeed. You can stop multiple datafeeds in a single API request by using a comma-separated
list of datafeeds or a wildcard expression. You can close all datafeeds by using <code class="literal">_all</code> or by specifying <code class="literal">*</code> as
the identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">allow_no_match</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: Refer to the description for the <code class="literal">force</code> query parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Refer to the description for the <code class="literal">timeout</code> query parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stop_trained_model_deployment"></a>stop_trained_model_deployment</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Stop a trained model deployment.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/stop-trained-model-deployment.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.stopTrainedModelDeployment({ model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_333"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request: contains wildcard expressions and there are no deployments that match;
contains the  <code class="literal">_all</code> string or no identifiers and there are no matches; or contains wildcard expressions and
there are only partial matches. By default, it returns an empty array when there are no matches and the subset of results when there are partial matches.
If <code class="literal">false</code>, the request returns a 404 status code when there are no matches or only partial matches.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: Forcefully stops the deployment, even if it is used by ingest pipelines. You can&#8217;t use these pipelines until you
restart the model deployment.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_data_frame_analytics"></a>update_data_frame_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update a data frame analytics job.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/update-dfanalytics.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.updateDataFrameAnalytics({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_334"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the data frame analytics job. This identifier can contain
lowercase alphanumeric characters (a-z and 0-9), hyphens, and
underscores. It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_memory_limit</code> (Optional, string)</strong></span>: The approximate maximum amount of memory resources that are permitted for
analytical processing. If your <code class="literal">elasticsearch.yml</code> file contains an
<code class="literal">xpack.ml.max_model_memory_limit</code> setting, an error occurs when you try
to create data frame analytics jobs that have <code class="literal">model_memory_limit</code> values
greater than that setting.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_num_threads</code> (Optional, number)</strong></span>: The maximum number of threads to be used by the analysis. Using more
threads may decrease the time necessary to complete the analysis at the
cost of using more CPU. Note that the process may use additional threads
for operational functionality other than the analysis itself.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_lazy_start</code> (Optional, boolean)</strong></span>: Specifies whether this job can start when there is insufficient machine
learning node capacity for it to be immediately assigned to a node.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_datafeed"></a>update_datafeed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update a datafeed.
You must stop and start the datafeed for the changes to be applied.
When Elasticsearch security features are enabled, your datafeed remembers which roles the user who updated it had at
the time of the update and runs the query using those same roles. If you provide secondary authorization headers,
those credentials are used instead.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-update-datafeed.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.updateDatafeed({ datafeed_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_335"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">datafeed_id</code> (string)</strong></span>: A numerical character string that uniquely identifies the datafeed.
This identifier can contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores.
It must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">aggregations</code> (Optional, Record&lt;string, { aggregations, meta, adjacency_matrix, auto_date_histogram, avg, avg_bucket, boxplot, bucket_script, bucket_selector, bucket_sort, bucket_count_ks_test, bucket_correlation, cardinality, categorize_text, children, composite, cumulative_cardinality, cumulative_sum, date_histogram, date_range, derivative, diversified_sampler, extended_stats, extended_stats_bucket, frequent_item_sets, filter, filters, geo_bounds, geo_centroid, geo_distance, geohash_grid, geo_line, geotile_grid, geohex_grid, global, histogram, ip_range, ip_prefix, inference, line, matrix_stats, max, max_bucket, median_absolute_deviation, min, min_bucket, missing, moving_avg, moving_percentiles, moving_fn, multi_terms, nested, normalize, parent, percentile_ranks, percentiles, percentiles_bucket, range, rare_terms, rate, reverse_nested, random_sampler, sampler, scripted_metric, serial_diff, significant_terms, significant_text, stats, stats_bucket, string_stats, sum, sum_bucket, terms, time_series, top_hits, t_test, top_metrics, value_count, weighted_avg, variable_width_histogram }&gt;)</strong></span>: If set, the datafeed performs aggregation searches. Support for aggregations is limited and should be used only
with low cardinality data.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">chunking_config</code> (Optional, { mode, time_span })</strong></span>: Datafeeds might search over long time periods, for several months or years. This search is split into time
chunks in order to ensure the load on Elasticsearch is managed. Chunking configuration controls how the size of
these time chunks are calculated; it is an advanced configuration option.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delayed_data_check_config</code> (Optional, { check_window, enabled })</strong></span>: Specifies whether the datafeed checks for missing data and the size of the window. The datafeed can optionally
search over indices that have already been read in an effort to determine whether any data has subsequently been
added to the index. If missing data is found, it is a good indication that the <code class="literal">query_delay</code> is set too low and
the data is being indexed after the datafeed has passed that moment in time. This check runs only on real-time
datafeeds.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">frequency</code> (Optional, string | -1 | 0)</strong></span>: The interval at which scheduled queries are made while the datafeed runs in real time. The default value is
either the bucket span for short bucket spans, or, for longer bucket spans, a sensible fraction of the bucket
span. When <code class="literal">frequency</code> is shorter than the bucket span, interim results for the last (partial) bucket are
written then eventually overwritten by the full bucket results. If the datafeed uses aggregations, this value
must be divisible by the interval of the date histogram aggregation.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices</code> (Optional, string[])</strong></span>: An array of index names. Wildcards are supported. If any of the indices are in remote clusters, the machine
learning nodes must have the <code class="literal">remote_cluster_client</code> role.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices_options</code> (Optional, { allow_no_indices, expand_wildcards, ignore_unavailable, ignore_throttled })</strong></span>: Specifies index expansion options that are used during search.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (Optional, string)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_empty_searches</code> (Optional, number)</strong></span>: If a real-time datafeed has never seen any data (including during any initial training period), it automatically
stops and closes the associated job after this many real-time searches return no documents. In other words,
it stops after <code class="literal">frequency</code> times <code class="literal">max_empty_searches</code> of real-time operation. If not set, a datafeed with no
end time that sees no data remains started until it is explicitly stopped. By default, it is not set.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: The Elasticsearch query domain-specific language (DSL). This value corresponds to the query object in an
Elasticsearch search POST body. All the options that are supported by Elasticsearch can be used, as this
object is passed verbatim to Elasticsearch. Note that if you change the query, the analyzed data is also
changed. Therefore, the time required to learn might be long and the understandability of the results is
unpredictable. If you want to make significant changes to the source data, it is recommended that you
clone the job and datafeed and make the amendments in the clone. Let both run in parallel and close one
when you are satisfied with the results of the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query_delay</code> (Optional, string | -1 | 0)</strong></span>: The number of seconds behind real time that data is queried. For example, if data from 10:04 a.m. might
not be searchable in Elasticsearch until 10:06 a.m., set this property to 120 seconds. The default
value is randomly selected between <code class="literal">60s</code> and <code class="literal">120s</code>. This randomness improves the query performance
when there are multiple jobs running on the same node.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">runtime_mappings</code> (Optional, Record&lt;string, { fields, fetch_fields, format, input_field, target_field, target_index, script, type }&gt;)</strong></span>: Specifies runtime fields for the datafeed search.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">script_fields</code> (Optional, Record&lt;string, { script, ignore_failure }&gt;)</strong></span>: Specifies scripts that evaluate custom expressions and returns script fields to the datafeed.
The detector configuration objects in a job can contain functions that use these script fields.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">scroll_size</code> (Optional, number)</strong></span>: The size parameter that is used in Elasticsearch searches when the datafeed does not use aggregations.
The maximum value is the value of <code class="literal">index.max_result_window</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, wildcard indices expressions that resolve into no concrete indices are ignored. This includes the
<code class="literal">_all</code> string or when no indices are specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Type of index that wildcard patterns can match. If the request can target data streams, this argument determines
whether wildcard expressions match hidden data streams. Supports a list of values. Valid values are:
</li>
</ul>
</div>
</li>
<li class="listitem">
<code class="literal">all</code>: Match any data stream or index, including hidden ones.
</li>
<li class="listitem">
<code class="literal">closed</code>: Match closed, non-hidden indices. Also matches any non-hidden data stream. Data streams cannot be closed.
</li>
<li class="listitem">
<code class="literal">hidden</code>: Match hidden data streams and hidden indices. Must be combined with <code class="literal">open</code>, <code class="literal">closed</code>, or both.
</li>
<li class="listitem">
<code class="literal">none</code>: Wildcard patterns are not accepted.
</li>
<li class="listitem">
<p><code class="literal">open</code>: Match open, non-hidden indices. Also matches any non-hidden data stream.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_throttled</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, concrete, expanded or aliased indices are ignored when frozen.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, unavailable indices (missing or closed) are ignored.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_filter"></a>update_filter</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update a filter.
Updates the description of a filter, adds items, or removes items from the list.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-update-filter.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.updateFilter({ filter_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_336"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">filter_id</code> (string)</strong></span>: A string that uniquely identifies a filter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">add_items</code> (Optional, string[])</strong></span>: The items to add to the filter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description for the filter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">remove_items</code> (Optional, string[])</strong></span>: The items to remove from the filter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_job"></a>update_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update an anomaly detection job.
Updates certain properties of an anomaly detection job.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-update-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.updateJob({ job_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_337"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_lazy_open</code> (Optional, boolean)</strong></span>: Advanced configuration option. Specifies whether this job can open when
there is insufficient machine learning node capacity for it to be
immediately assigned to a node. If <code class="literal">false</code> and a machine learning node
with capacity to run the job cannot immediately be found, the open
anomaly detection jobs API returns an error. However, this is also
subject to the cluster-wide <code class="literal">xpack.ml.max_lazy_ml_nodes</code> setting. If this
option is set to <code class="literal">true</code>, the open anomaly detection jobs API does not
return an error and the job waits in the opening state until sufficient
machine learning node capacity is available.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">analysis_limits</code> (Optional, { model_memory_limit })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">background_persist_interval</code> (Optional, string | -1 | 0)</strong></span>: Advanced configuration option. The time between each periodic persistence
of the model.
The default value is a randomized value between 3 to 4 hours, which
avoids all jobs persisting at exactly the same time. The smallest allowed
value is 1 hour.
For very large models (several GB), persistence could take 10-20 minutes,
so do not set the value too low.
If the job is open when you make the update, you must stop the datafeed,
close the job, then reopen the job and restart the datafeed for the
changes to take effect.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">custom_settings</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Advanced configuration option. Contains custom meta data about the job.
For example, it can contain custom URL information as shown in Adding
custom URLs to machine learning results.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">categorization_filters</code> (Optional, string[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_plot_config</code> (Optional, { annotations_enabled, enabled, terms })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_prune_window</code> (Optional, string | -1 | 0)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">daily_model_snapshot_retention_after_days</code> (Optional, number)</strong></span>: Advanced configuration option, which affects the automatic removal of old
model snapshots for this job. It specifies a period of time (in days)
after which only the first snapshot per day is retained. This period is
relative to the timestamp of the most recent snapshot for this job. Valid
values range from 0 to <code class="literal">model_snapshot_retention_days</code>. For jobs created
before version 7.8.0, the default value matches
<code class="literal">model_snapshot_retention_days</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_snapshot_retention_days</code> (Optional, number)</strong></span>: Advanced configuration option, which affects the automatic removal of old
model snapshots for this job. It specifies the maximum period of time (in
days) that snapshots are retained. This period is relative to the
timestamp of the most recent snapshot for this job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">renormalization_window_days</code> (Optional, number)</strong></span>: Advanced configuration option. The period over which adjustments to the
score are applied, as new data is seen.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">results_retention_days</code> (Optional, number)</strong></span>: Advanced configuration option. The period of time (in days) that results
are retained. Age is calculated relative to the timestamp of the latest
bucket result. If this property has a non-null value, once per day at
00:30 (server time), results that are the specified number of days older
than the latest bucket result are deleted from Elasticsearch. The default
value is null, which means all results are retained.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">groups</code> (Optional, string[])</strong></span>: A list of job groups. A job can belong to no groups or many.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">detectors</code> (Optional, { detector_index, description, custom_rules }[])</strong></span>: An array of detector update objects.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">per_partition_categorization</code> (Optional, { enabled, stop_on_warn })</strong></span>: Settings related to how categorization interacts with partition fields.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_model_snapshot"></a>update_model_snapshot</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update a snapshot.
Updates certain properties of a snapshot.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-update-snapshot.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.updateModelSnapshot({ job_id, snapshot_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_338"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot_id</code> (string)</strong></span>: Identifier for the model snapshot.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: A description of the model snapshot.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">retain</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, this snapshot will not be deleted during automatic cleanup of
snapshots older than <code class="literal">model_snapshot_retention_days</code>. However, this
snapshot will be deleted when the job is deleted.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_trained_model_deployment"></a>update_trained_model_deployment</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update a trained model deployment.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/update-trained-model-deployment.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.updateTrainedModelDeployment({ model_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_339"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">model_id</code> (string)</strong></span>: The unique identifier of the trained model. Currently, only PyTorch models are supported.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">number_of_allocations</code> (Optional, number)</strong></span>: The number of model allocations on each node where the model is deployed.
All allocations on a node share the same copy of the model in memory but use
a separate set of threads to evaluate the model.
Increasing this value generally increases the throughput.
If this setting is greater than the number of hardware threads
it will automatically be changed to a value less than the number of hardware threads.
If adaptive_allocations is enabled, do not set this value, because it’s automatically set.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">adaptive_allocations</code> (Optional, { enabled, min_number_of_allocations, max_number_of_allocations })</strong></span>: Adaptive allocations configuration. When enabled, the number of allocations
is set based on the current load.
If adaptive_allocations is enabled, do not set the number of allocations manually.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_upgrade_job_snapshot"></a>upgrade_job_snapshot</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Upgrade a snapshot.
Upgrade an anomaly detection model snapshot to the latest major version.
Over time, older snapshot formats are deprecated and removed. Anomaly
detection jobs support only snapshots that are from the current or previous
major version.
This API provides a means to upgrade a snapshot to the current major version.
This aids in preparing the cluster for an upgrade to the next major version.
Only one snapshot per anomaly detection job can be upgraded at a time and the
upgraded snapshot cannot be the current snapshot of the anomaly detection
job.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/ml-upgrade-job-model-snapshot.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ml.upgradeJobSnapshot({ job_id, snapshot_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_340"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">job_id</code> (string)</strong></span>: Identifier for the anomaly detection job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot_id</code> (string)</strong></span>: A numerical character string that uniquely identifies the model snapshot.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: When true, the API won’t respond until the upgrade is complete.
Otherwise, it responds as soon as the upgrade task is assigned to a node.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Controls the time to wait for the request to complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_nodes_2"></a>nodes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_clear_repositories_metering_archive"></a>clear_repositories_metering_archive</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear the archived repositories metering.
Clear the archived repositories metering information in the cluster.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/clear-repositories-metering-archive-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.nodes.clearRepositoriesMeteringArchive({ node_id, max_archive_version })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_341"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (string | string[])</strong></span>: List of node IDs or names used to limit returned information.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_archive_version</code> (number)</strong></span>: Specifies the maximum <code class="literal">archive_version</code> to be cleared from the archive.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_repositories_metering_info"></a>get_repositories_metering_info</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get cluster repositories metering.
Get repositories metering information for a cluster.
This API exposes monotonically non-decreasing counters and it is expected that clients would durably store the information needed to compute aggregations over a period of time.
Additionally, the information exposed by this API is volatile, meaning that it will not be present after node restarts.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-repositories-metering-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.nodes.getRepositoriesMeteringInfo({ node_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_342"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (string | string[])</strong></span>: List of node IDs or names used to limit returned information.
All the nodes selective options are explained [here](<a href="/guide/en/elasticsearch/reference/current/cluster.html#cluster-nodes" class="ulink" target="_top">https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster.html#cluster-nodes</a>).
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_hot_threads"></a>hot_threads</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the hot threads for nodes.
Get a breakdown of the hot threads on each selected node in the cluster.
The output is plain text with a breakdown of the top hot threads for each node.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/cluster-nodes-hot-threads.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.nodes.hotThreads({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_343"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string | string[])</strong></span>: List of node IDs or names used to limit returned information.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_idle_threads</code> (Optional, boolean)</strong></span>: If true, known idle threads (e.g. waiting in a socket select, or to get
a task from an empty queue) are filtered out.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">interval</code> (Optional, string | -1 | 0)</strong></span>: The interval to do the second sampling of threads.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshots</code> (Optional, number)</strong></span>: Number of samples of thread stacktrace.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">threads</code> (Optional, number)</strong></span>: Specifies the number of hot threads to provide information for.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received
before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">type</code> (Optional, Enum("cpu" | "wait" | "block" | "gpu" | "mem"))</strong></span>: The type to sample.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, Enum("cpu" | "wait" | "block" | "gpu" | "mem"))</strong></span>: The sort order for <em>cpu</em> type (default: total)
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_info_4"></a>info</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get node information.</p>
<p>By default, the API returns all attributes and core settings for cluster nodes.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/cluster-nodes-info.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.nodes.info({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_344"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string | string[])</strong></span>: List of node IDs or names used to limit returned information.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metric</code> (Optional, string | string[])</strong></span>: Limits the information returned to the specific metrics. Supports a list, such as http,ingest.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">flat_settings</code> (Optional, boolean)</strong></span>: If true, returns settings in flat format.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_reload_secure_settings"></a>reload_secure_settings</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Reload the keystore on nodes in the cluster.</p>
<p>Secure settings are stored in an on-disk keystore. Certain of these settings are reloadable.
That is, you can change them on disk and reload them without restarting any nodes in the cluster.
When you have updated reloadable secure settings in your keystore, you can use this API to reload those settings on each node.</p>
<p>When the Elasticsearch keystore is password protected and not simply obfuscated, you must provide the password for the keystore when you reload the secure settings.
Reloading the settings for the whole cluster assumes that the keystores for all nodes are protected with the same password; this method is allowed only when inter-node communications are encrypted.
Alternatively, you can reload the secure settings on each node by locally accessing the API and passing the node-specific Elasticsearch keystore password.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/cluster-nodes-reload-secure-settings.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.nodes.reloadSecureSettings({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_345"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string | string[])</strong></span>: The names of particular nodes in the cluster to target.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">secure_settings_password</code> (Optional, string)</strong></span>: The password for the Elasticsearch keystore.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stats_5"></a>stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get node statistics.
Get statistics for nodes in a cluster.
By default, all stats are returned. You can limit the returned information by using metrics.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/cluster-nodes-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.nodes.stats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_346"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string | string[])</strong></span>: List of node IDs or names used to limit returned information.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metric</code> (Optional, string | string[])</strong></span>: Limit the information returned to the specified metrics
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_metric</code> (Optional, string | string[])</strong></span>: Limit the information returned for indices metric to the specific index metrics. It can be used only if indices (or all) metric is specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">completion_fields</code> (Optional, string | string[])</strong></span>: List or wildcard expressions of fields to include in fielddata and suggest statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">fielddata_fields</code> (Optional, string | string[])</strong></span>: List or wildcard expressions of fields to include in fielddata statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">fields</code> (Optional, string | string[])</strong></span>: List or wildcard expressions of fields to include in the statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">groups</code> (Optional, boolean)</strong></span>: List of search groups to include in the search statistics.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_segment_file_sizes</code> (Optional, boolean)</strong></span>: If true, the call reports the aggregated disk usage of each one of the Lucene index files (only applies if segment stats are requested).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">level</code> (Optional, Enum("cluster" | "indices" | "shards"))</strong></span>: Indicates whether statistics are aggregated at the cluster, index, or shard level.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">types</code> (Optional, string[])</strong></span>: A list of document types for the indexing index metric.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_unloaded_segments</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the response includes information from segments that are not loaded into memory.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_usage"></a>usage</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get feature usage information.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/cluster-nodes-usage.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.nodes.usage({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_347"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string | string[])</strong></span>: A list of node IDs or names to limit the returned information; use <code class="literal">_local</code> to return information from the node you&#8217;re connecting to, leave empty to get information from all nodes
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metric</code> (Optional, string | string[])</strong></span>: Limits the information returned to the specific metrics.
A list of the following options: <code class="literal">_all</code>, <code class="literal">rest_actions</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_query_rules"></a>query_rules</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_rule"></a>delete_rule</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a query rule.
Delete a query rule within a query ruleset.
This is a destructive action that is only recoverable by re-adding the same rule with the create or update query rule API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-query-rule.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.deleteRule({ ruleset_id, rule_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_348"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ruleset_id</code> (string)</strong></span>: The unique identifier of the query ruleset containing the rule to delete
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rule_id</code> (string)</strong></span>: The unique identifier of the query rule within the specified ruleset to delete
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_ruleset"></a>delete_ruleset</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a query ruleset.
Remove a query ruleset and its associated data.
This is a destructive action that is not recoverable.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-query-ruleset.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.deleteRuleset({ ruleset_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_349"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ruleset_id</code> (string)</strong></span>: The unique identifier of the query ruleset to delete
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_rule"></a>get_rule</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get a query rule.
Get details about a query rule within a query ruleset.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-query-rule.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.getRule({ ruleset_id, rule_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_350"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ruleset_id</code> (string)</strong></span>: The unique identifier of the query ruleset containing the rule to retrieve
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rule_id</code> (string)</strong></span>: The unique identifier of the query rule within the specified ruleset to retrieve
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_ruleset"></a>get_ruleset</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get a query ruleset.
Get details about a query ruleset.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-query-ruleset.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.getRuleset({ ruleset_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_351"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ruleset_id</code> (string)</strong></span>: The unique identifier of the query ruleset
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_list_rulesets"></a>list_rulesets</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get all query rulesets.
Get summarized information about the query rulesets.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/list-query-rulesets.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.listRulesets({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_352"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: The offset from the first result to fetch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The maximum number of results to retrieve.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_rule"></a>put_rule</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a query rule.
Create or update a query rule within a query ruleset.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Due to limitations within pinned queries, you can only pin documents using ids or docs, but cannot use both in single rule.
It is advised to use one or the other in query rulesets, to avoid errors.
Additionally, pinned queries have a maximum limit of 100 pinned hits.
If multiple matching rules pin more than 100 documents, only the first 100 documents are pinned in the order they are specified in the ruleset.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-query-rule.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.putRule({ ruleset_id, rule_id, type, criteria, actions })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_353"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ruleset_id</code> (string)</strong></span>: The unique identifier of the query ruleset containing the rule to be created or updated.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rule_id</code> (string)</strong></span>: The unique identifier of the query rule within the specified ruleset to be created or updated.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">type</code> (Enum("pinned" | "exclude"))</strong></span>: The type of rule.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">criteria</code> ({ type, metadata, values } | { type, metadata, values }[])</strong></span>: The criteria that must be met for the rule to be applied.
If multiple criteria are specified for a rule, all criteria must be met for the rule to be applied.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">actions</code> ({ ids, docs })</strong></span>: The actions to take when the rule is matched.
The format of this action depends on the rule type.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">priority</code> (Optional, number)</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_ruleset"></a>put_ruleset</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a query ruleset.
There is a limit of 100 rules per ruleset.
This limit can be increased by using the <code class="literal">xpack.applications.rules.max_rules_per_ruleset</code> cluster setting.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Due to limitations within pinned queries, you can only select documents using <code class="literal">ids</code> or <code class="literal">docs</code>, but cannot use both in single rule.
It is advised to use one or the other in query rulesets, to avoid errors.
Additionally, pinned queries have a maximum limit of 100 pinned hits.
If multiple matching rules pin more than 100 documents, only the first 100 documents are pinned in the order they are specified in the ruleset.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-query-ruleset.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.putRuleset({ ruleset_id, rules })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_354"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ruleset_id</code> (string)</strong></span>: The unique identifier of the query ruleset to be created or updated.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rules</code> ({ rule_id, type, criteria, actions, priority } | { rule_id, type, criteria, actions, priority }[])</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_test"></a>test</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Test a query ruleset.
Evaluate match criteria against a query ruleset to identify the rules that would match that criteria.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/test-query-ruleset.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.queryRules.test({ ruleset_id, match_criteria })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_355"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ruleset_id</code> (string)</strong></span>: The unique identifier of the query ruleset to be created or updated
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">match_criteria</code> (Record&lt;string, User-defined value&gt;)</strong></span>: The match criteria to apply to rules in the given query ruleset.
Match criteria should match the keys defined in the <code class="literal">criteria.metadata</code> field of the rule.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_rollup"></a>rollup</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_job_2"></a>delete_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a rollup job.</p>
<p>A job must be stopped before it can be deleted.
If you attempt to delete a started job, an error occurs.
Similarly, if you attempt to delete a nonexistent job, an exception occurs.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>When you delete a job, you remove only the process that is actively monitoring and rolling up data.
The API does not delete any previously rolled up data.
This is by design; a user may wish to roll up a static data set.
Because the data set is static, after it has been fully rolled up there is no need to keep the indexing rollup job around (as there will be no new data).
Thus the job can be deleted, leaving behind the rolled up data for analysis.
If you wish to also remove the rollup data and the rollup index contains the data for only a single job, you can delete the whole rollup index.
If the rollup index stores data from several jobs, you must issue a delete-by-query that targets the rollup job&#8217;s identifier in the rollup index. For example:</p>
</div>
</div>
<pre class="screen">POST my_rollup_index/_delete_by_query
{
  "query": {
    "term": {
      "_rollup.id": "the_rollup_job_id"
    }
  }
}</pre>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-delete-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.deleteJob({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_356"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the job.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_jobs_2"></a>get_jobs</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get rollup job information.
Get the configuration, stats, and status of rollup jobs.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API returns only active (both <code class="literal">STARTED</code> and <code class="literal">STOPPED</code>) jobs.
If a job was created, ran for a while, then was deleted, the API does not return any details about it.
For details about a historical rollup job, the rollup capabilities API may be more useful.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-get-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.getJobs({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_357"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: Identifier for the rollup job.
If it is <code class="literal">_all</code> or omitted, the API returns all rollup jobs.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_rollup_caps"></a>get_rollup_caps</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the rollup job capabilities.
Get the capabilities of any rollup jobs that have been configured for a specific index or index pattern.</p>
<p>This API is useful because a rollup job is often configured to rollup only a subset of fields from the source index.
Furthermore, only certain aggregations can be configured for various fields, leading to a limited subset of functionality depending on that configuration.
This API enables you to inspect an index and determine:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Does this index have associated rollup data somewhere in the cluster?
</li>
<li class="listitem">
If yes to the first question, what fields were rolled up, what aggregations can be performed, and where does the data live?
</li>
</ol>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-get-rollup-caps.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.getRollupCaps({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_358"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: Index, indices or index-pattern to return rollup capabilities for.
<code class="literal">_all</code> may be used to fetch rollup capabilities from all jobs.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_rollup_index_caps"></a>get_rollup_index_caps</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the rollup index capabilities.
Get the rollup capabilities of all jobs inside of a rollup index.
A single rollup index may store the data for multiple rollup jobs and may have a variety of capabilities depending on those jobs. This API enables you to determine:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
What jobs are stored in an index (or indices specified via a pattern)?
</li>
<li class="listitem">
What target indices were rolled up, what fields were used in those rollups, and what aggregations can be performed on each job?
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-get-rollup-index-caps.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.getRollupIndexCaps({ index })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_359"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string | string[])</strong></span>: Data stream or index to check for rollup capabilities.
Wildcard (<code class="literal">*</code>) expressions are supported.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_job_2"></a>put_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a rollup job.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>From 8.15.0, calling this API in a cluster with no rollup usage will fail with a message about the deprecation and planned removal of rollup features. A cluster needs to contain either a rollup job or a rollup index in order for this API to be allowed to run.</p>
</div>
</div>
<p>The rollup job configuration contains all the details about how the job should run, when it indexes documents, and what future queries will be able to run against the rollup index.</p>
<p>There are three main sections to the job configuration: the logistical details about the job (for example, the cron schedule), the fields that are used for grouping, and what metrics to collect for each group.</p>
<p>Jobs are created in a <code class="literal">STOPPED</code> state. You can start them with the start rollup jobs API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-put-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.putJob({ id, cron, groups, index_pattern, page_size, rollup_index })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_360"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the rollup job. This can be any alphanumeric string and uniquely identifies the
data that is associated with the rollup job. The ID is persistent; it is stored with the rolled
up data. If you create a job, let it run for a while, then delete the job, the data that the job
rolled up is still be associated with this job ID. You cannot create a new job with the same ID
since that could lead to problems with mismatched job configurations.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cron</code> (string)</strong></span>: A cron string which defines the intervals when the rollup job should be executed. When the interval
triggers, the indexer attempts to rollup the data in the index pattern. The cron pattern is unrelated
to the time interval of the data being rolled up. For example, you may wish to create hourly rollups
of your document but to only run the indexer on a daily basis at midnight, as defined by the cron. The
cron pattern is defined just like a Watcher cron schedule.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">groups</code> ({ date_histogram, histogram, terms })</strong></span>: Defines the grouping fields and aggregations that are defined for this rollup job. These fields will then be
available later for aggregating into buckets. These aggs and fields can be used in any combination. Think of
the groups configuration as defining a set of tools that can later be used in aggregations to partition the
data. Unlike raw data, we have to think ahead to which fields and aggregations might be used. Rollups provide
enough flexibility that you simply need to determine which fields are needed, not in what order they are needed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_pattern</code> (string)</strong></span>: The index or index pattern to roll up. Supports wildcard-style patterns (<code class="literal">logstash-*</code>). The job attempts to
rollup the entire index or index-pattern.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page_size</code> (number)</strong></span>: The number of bucket results that are processed on each iteration of the rollup indexer. A larger value tends
to execute faster, but requires more memory during processing. This value has no effect on how the data is
rolled up; it is merely used for tweaking the speed or memory cost of the indexer.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rollup_index</code> (string)</strong></span>: The index that contains the rollup results. The index can be shared with other rollup jobs. The data is stored so that it doesn’t interfere with unrelated jobs.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metrics</code> (Optional, { field, metrics }[])</strong></span>: Defines the metrics to collect for each grouping tuple. By default, only the doc_counts are collected for each
group. To make rollup useful, you will often add metrics like averages, mins, maxes, etc. Metrics are defined
on a per-field basis and for each field you configure which metric should be collected.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Time to wait for the request to complete.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">headers</code> (Optional, Record&lt;string, string | string[]&gt;)</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_rollup_search"></a>rollup_search</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Search rolled-up data.
The rollup search endpoint is needed because, internally, rolled-up documents utilize a different document structure than the original data.
It rewrites standard Query DSL into a format that matches the rollup documents then takes the response and rewrites it back to what a client would expect given the original query.</p>
<p>The request body supports a subset of features from the regular search API.
The following functionality is not available:</p>
<p><code class="literal">size</code>: Because rollups work on pre-aggregated data, no search hits can be returned and so size must be set to zero or omitted entirely.
<code class="literal">highlighter</code>, <code class="literal">suggestors</code>, <code class="literal">post_filter</code>, <code class="literal">profile</code>, <code class="literal">explain</code>: These are similarly disallowed.</p>
<p><span class="strong strong"><strong>Searching both historical rollup and non-rollup data</strong></span></p>
<p>The rollup search API has the capability to search across both "live" non-rollup data and the aggregated rollup data.
This is done by simply adding the live indices to the URI. For example:</p>
<pre class="screen">GET sensor-1,sensor_rollup/_rollup_search
{
  "size": 0,
  "aggregations": {
     "max_temperature": {
      "max": {
        "field": "temperature"
      }
    }
  }
}</pre>
<p>The rollup search endpoint does two things when the search runs:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The original request is sent to the non-rollup index unaltered.
</li>
<li class="listitem">
A rewritten version of the original request is sent to the rollup index.
</li>
</ul>
</div>
<p>When the two responses are received, the endpoint rewrites the rollup response and merges the two together.
During the merging process, if there is any overlap in buckets between the two responses, the buckets from the non-rollup index are used.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-search.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.rollupSearch({ index })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_361"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string | string[])</strong></span>: A list of data streams and indices used to limit the request.
This parameter has the following rules:
</li>
</ul>
</div>
</li>
<li class="listitem">
At least one data stream, index, or wildcard expression must be specified. This target can include a rollup or non-rollup index. For data streams, the stream&#8217;s backing indices can only serve as non-rollup indices. Omitting the parameter or using <code class="literal">_all</code> are not permitted.
</li>
<li class="listitem">
Multiple non-rollup indices may be specified.
</li>
<li class="listitem">
Only one rollup index may be specified. If more than one are supplied, an exception occurs.
</li>
<li class="listitem">
<p>Wildcard expressions (<code class="literal">*</code>) may be used. If they match more than one rollup index, an exception occurs. However, you can use an expression to match multiple non-rollup indices or data streams.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">aggregations</code> (Optional, Record&lt;string, { aggregations, meta, adjacency_matrix, auto_date_histogram, avg, avg_bucket, boxplot, bucket_script, bucket_selector, bucket_sort, bucket_count_ks_test, bucket_correlation, cardinality, categorize_text, children, composite, cumulative_cardinality, cumulative_sum, date_histogram, date_range, derivative, diversified_sampler, extended_stats, extended_stats_bucket, frequent_item_sets, filter, filters, geo_bounds, geo_centroid, geo_distance, geohash_grid, geo_line, geotile_grid, geohex_grid, global, histogram, ip_range, ip_prefix, inference, line, matrix_stats, max, max_bucket, median_absolute_deviation, min, min_bucket, missing, moving_avg, moving_percentiles, moving_fn, multi_terms, nested, normalize, parent, percentile_ranks, percentiles, percentiles_bucket, range, rare_terms, rate, reverse_nested, random_sampler, sampler, scripted_metric, serial_diff, significant_terms, significant_text, stats, stats_bucket, string_stats, sum, sum_bucket, terms, time_series, top_hits, t_test, top_metrics, value_count, weighted_avg, variable_width_histogram }&gt;)</strong></span>: Specifies aggregations.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: Specifies a DSL query that is subject to some limitations.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Must be zero if set, as rollups work on pre-aggregated data.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rest_total_hits_as_int</code> (Optional, boolean)</strong></span>: Indicates whether hits.total should be rendered as an integer or an object in the rest search response
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">typed_keys</code> (Optional, boolean)</strong></span>: Specify whether aggregation and suggester names should be prefixed by their respective types in the response
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_start_job"></a>start_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start rollup jobs.
If you try to start a job that does not exist, an exception occurs.
If you try to start a job that is already started, nothing happens.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-start-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.startJob({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_362"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the rollup job.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stop_job"></a>stop_job</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Stop rollup jobs.
If you try to stop a job that does not exist, an exception occurs.
If you try to stop a job that is already stopped, nothing happens.</p>
<p>Since only a stopped job can be deleted, it can be useful to block the API until the indexer has fully stopped.
This is accomplished with the <code class="literal">wait_for_completion</code> query parameter, and optionally a timeout. For example:</p>
<pre class="screen">POST _rollup/job/sensor/_stop?wait_for_completion=true&amp;timeout=10s</pre>
<p>The parameter blocks the API call from returning until either the job has moved to STOPPED or the specified time has elapsed.
If the specified time elapses without the job moving to STOPPED, a timeout exception occurs.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/rollup-stop-job.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.rollup.stopJob({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_363"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: Identifier for the rollup job.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: If <code class="literal">wait_for_completion</code> is <code class="literal">true</code>, the API blocks for (at maximum) the specified duration while waiting for the job to stop.
If more than <code class="literal">timeout</code> time has passed, the API throws a timeout exception.
NOTE: Even if a timeout occurs, the stop request is still processing and eventually moves the job to STOPPED.
The timeout simply means the API call itself timed out while waiting for the status change.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: If set to <code class="literal">true</code>, causes the API to block until the indexer state completely stops.
If set to <code class="literal">false</code>, the API returns immediately and the indexer is stopped asynchronously in the background.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_search_application"></a>search_application</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_8"></a>delete</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a search application.</p>
<p>Remove a search application and its associated alias. Indices attached to the search application are not removed.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-search-application.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.delete({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_364"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the search application to delete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_behavioral_analytics"></a>delete_behavioral_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a behavioral analytics collection.
The associated data stream is also deleted.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-analytics-collection.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.deleteBehavioralAnalytics({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_365"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the analytics collection to be deleted
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_8"></a>get</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get search application details.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-search-application.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.get({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_366"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the search application
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_behavioral_analytics"></a>get_behavioral_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get behavioral analytics collections.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/list-analytics-collection.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.getBehavioralAnalytics({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_367"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string[])</strong></span>: A list of analytics collections to limit the returned information
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_list_2"></a>list</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get search applications.
Get information about search applications.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/list-analytics-collection.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.list({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_368"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">q</code> (Optional, string)</strong></span>: Query in the Lucene query string syntax.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Starting offset.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies a max number of results to get.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_post_behavioral_analytics_event"></a>post_behavioral_analytics_event</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a behavioral analytics collection event.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/post-analytics-collection-event.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.postBehavioralAnalyticsEvent({ collection_name, event_type })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_369"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">collection_name</code> (string)</strong></span>: The name of the behavioral analytics collection.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">event_type</code> (Enum("page_view" | "search" | "search_click"))</strong></span>: The analytics event type.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">payload</code> (Optional, User-defined value)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">debug</code> (Optional, boolean)</strong></span>: Whether the response type has to include more details
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_3"></a>put</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a search application.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-search-application.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.put({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_370"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the search application to be created or updated.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">search_application</code> (Optional, { indices, analytics_collection_name, template })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">create</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, this request cannot replace or update existing Search Applications.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_behavioral_analytics"></a>put_behavioral_analytics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a behavioral analytics collection.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-analytics-collection.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.putBehavioralAnalytics({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_371"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the analytics collection to be created or updated.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_render_query"></a>render_query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Render a search application query.
Generate an Elasticsearch query using the specified query parameters and the search template associated with the search application or a default template if none is specified.
If a parameter used in the search template is not specified in <code class="literal">params</code>, the parameter&#8217;s default value will be used.
The API returns the specific Elasticsearch query that would be generated and run by calling the search application search API.</p>
<p>You must have <code class="literal">read</code> privileges on the backing alias of the search application.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/search-application-render-query.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.renderQuery({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_372"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the search application to render teh query for.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">params</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_search_4"></a>search</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Run a search application search.
Generate and run an Elasticsearch query that uses the specified query parameteter and the search template associated with the search application or default template.
Unspecified template parameters are assigned their default values if applicable.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/search-application-search.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchApplication.search({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_373"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the search application to be searched.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">params</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Query parameters specific to this request, which will override any defaults specified in the template.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">typed_keys</code> (Optional, boolean)</strong></span>: Determines whether aggregation names are prefixed by their respective types in the response.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_searchable_snapshots"></a>searchable_snapshots</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_cache_stats"></a>cache_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get cache statistics.
Get statistics about the shared cache for partially mounted indices.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/searchable-snapshots-api-cache-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchableSnapshots.cacheStats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_374"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string | string[])</strong></span>: The names of the nodes in the cluster to target.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_clear_cache_2"></a>clear_cache</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear the cache.
Clear indices and data streams from the shared cache for partially mounted indices.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/searchable-snapshots-api-clear-cache.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchableSnapshots.clearCache({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_375"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string | string[])</strong></span>: A list of data streams, indices, and aliases to clear from the cache.
It supports wildcards (<code class="literal">*</code>).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expand_wildcards</code> (Optional, Enum("all" | "open" | "closed" | "hidden" | "none") | Enum("all" | "open" | "closed" | "hidden" | "none")[])</strong></span>: Whether to expand wildcard expression to concrete indices that are open, closed or both.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_indices</code> (Optional, boolean)</strong></span>: Whether to ignore if a wildcard indices expression resolves into no concrete indices. (This includes <code class="literal">_all</code> string or when no indices have been specified)
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: Whether specified concrete indices should be ignored when unavailable (missing or closed)
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_mount"></a>mount</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Mount a snapshot.
Mount a snapshot as a searchable snapshot index.
Do not use this API for snapshots managed by index lifecycle management (ILM).
Manually mounting ILM-managed snapshots can interfere with ILM processes.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/searchable-snapshots-api-mount-snapshot.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchableSnapshots.mount({ repository, snapshot, index })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_376"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: The name of the repository containing the snapshot of the index to mount.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot</code> (string)</strong></span>: The name of the snapshot of the index to mount.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string)</strong></span>: The name of the index contained in the snapshot whose data is to be mounted.
If no <code class="literal">renamed_index</code> is specified, this name will also be used to create the new index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">renamed_index</code> (Optional, string)</strong></span>: The name of the index that will be created.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_settings</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: The settings that should be added to the index when it is mounted.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_index_settings</code> (Optional, string[])</strong></span>: The names of settings that should be removed from the index when it is mounted.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for the master node.
If the master node is not available before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: If true, the request blocks until the operation is complete.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">storage</code> (Optional, string)</strong></span>: The mount option for the searchable snapshot index.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stats_6"></a>stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get searchable snapshot statistics.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/searchable-snapshots-api-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.searchableSnapshots.stats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_377"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string | string[])</strong></span>: A list of data streams and indices to retrieve statistics for.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">level</code> (Optional, Enum("cluster" | "indices" | "shards"))</strong></span>: Return stats aggregated at cluster, index or shard level
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_security"></a>security</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_activate_user_profile"></a>activate_user_profile</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Activate a user profile.</p>
<p>Create or update a user profile on behalf of another user.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and Elastic&#8217;s Observability, Enterprise Search, and Elastic Security solutions.
Individual users and external applications should not call this API directly.
The calling application must have either an <code class="literal">access_token</code> or a combination of <code class="literal">username</code> and <code class="literal">password</code> for the user that the profile document is intended for.
Elastic reserves the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p>This API creates or updates a profile document for end users with information that is extracted from the user&#8217;s authentication object including <code class="literal">username</code>, <code class="literal">full_name,</code> <code class="literal">roles</code>, and the authentication realm.
For example, in the JWT <code class="literal">access_token</code> case, the profile user&#8217;s <code class="literal">username</code> is extracted from the JWT token claim pointed to by the <code class="literal">claims.principal</code> setting of the JWT realm that authenticated the token.</p>
<p>When updating a profile document, the API enables the document if it was disabled.
Any updates do not change existing content for either the <code class="literal">labels</code> or <code class="literal">data</code> fields.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-activate-user-profile.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.activateUserProfile({ grant_type })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_378"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">grant_type</code> (Enum("password" | "access_token"))</strong></span>: The type of grant.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">access_token</code> (Optional, string)</strong></span>: The user&#8217;s Elasticsearch access token or JWT.
Both <code class="literal">access</code> and <code class="literal">id</code> JWT token types are supported and they depend on the underlying JWT realm configuration.
If you specify the <code class="literal">access_token</code> grant type, this parameter is required.
It is not valid with other grant types.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">password</code> (Optional, string)</strong></span>: The user&#8217;s password.
If you specify the <code class="literal">password</code> grant type, this parameter is required.
It is not valid with other grant types.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string)</strong></span>: The username that identifies the user.
If you specify the <code class="literal">password</code> grant type, this parameter is required.
It is not valid with other grant types.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_authenticate"></a>authenticate</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Authenticate a user.</p>
<p>Authenticates a user and returns information about the authenticated user.
Include the user information in a [basic auth header](<a href="https://en.wikipedia.org/wiki/Basic_access_authentication" class="ulink" target="_top">https://en.wikipedia.org/wiki/Basic_access_authentication</a>).
A successful call returns a JSON structure that shows user information such as their username, the roles that are assigned to the user, any assigned metadata, and information about the realms that authenticated and authorized the user.
If the user cannot be authenticated, this API returns a 401 status code.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-authenticate.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.authenticate()</pre>
</div>
<div class="position-relative"><h4><a id="_bulk_delete_role"></a>bulk_delete_role</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Bulk delete roles.</p>
<p>The role management APIs are generally the preferred way to manage roles, rather than using file-based role management.
The bulk delete roles API cannot delete roles that are defined in roles files.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-bulk-delete-role.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.bulkDeleteRole({ names })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_379"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">names</code> (string[])</strong></span>: An array of role names to delete
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_bulk_put_role"></a>bulk_put_role</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Bulk create or update roles.</p>
<p>The role management APIs are generally the preferred way to manage roles, rather than using file-based role management.
The bulk create or update roles API cannot update roles that are defined in roles files.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-bulk-put-role.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.bulkPutRole({ roles })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_380"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">roles</code> (Record&lt;string, { cluster, indices, remote_indices, remote_cluster, global, applications, metadata, run_as, description, restriction, transient_metadata }&gt;)</strong></span>: A dictionary of role name to RoleDescriptor objects to add or update
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_bulk_update_api_keys"></a>bulk_update_api_keys</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Bulk update API keys.
Update the attributes for multiple API keys.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>It is not possible to use an API key as the authentication credential for this API. To update API keys, the owner user&#8217;s credentials are required.</p>
</div>
</div>
<p>This API is similar to the update API key API but enables you to apply the same update to multiple API keys in one API call. This operation can greatly improve performance over making individual updates.</p>
<p>It is not possible to update expired or invalidated API keys.</p>
<p>This API supports updates to API key access scope, metadata and expiration.
The access scope of each API key is derived from the <code class="literal">role_descriptors</code> you specify in the request and a snapshot of the owner user&#8217;s permissions at the time of the request.
The snapshot of the owner&#8217;s permissions is updated automatically on every call.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you don&#8217;t specify <code class="literal">role_descriptors</code> in the request, a call to this API might still change an API key&#8217;s access scope. This change can occur if the owner user&#8217;s permissions have changed since the API key was created or last modified.</p>
</div>
</div>
<p>A successful request returns a JSON structure that contains the IDs of all updated API keys, the IDs of API keys that already had the requested changes and did not require an update, and error details for any failed update.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-bulk-update-api-keys.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.bulkUpdateApiKeys({ ids })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_381"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ids</code> (string | string[])</strong></span>: The API key identifiers.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expiration</code> (Optional, string | -1 | 0)</strong></span>: Expiration time for the API keys.
By default, API keys never expire.
This property can be omitted to leave the value unchanged.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Arbitrary nested metadata to associate with the API keys.
Within the <code class="literal">metadata</code> object, top-level keys beginning with an underscore (<code class="literal">_</code>) are reserved for system usage.
Any information specified with this parameter fully replaces metadata previously associated with the API key.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">role_descriptors</code> (Optional, Record&lt;string, { cluster, indices, remote_indices, remote_cluster, global, applications, metadata, run_as, description, restriction, transient_metadata }&gt;)</strong></span>: The role descriptors to assign to the API keys.
An API key&#8217;s effective permissions are an intersection of its assigned privileges and the point-in-time snapshot of permissions of the owner user.
You can assign new privileges by specifying them in this parameter.
To remove assigned privileges, supply the <code class="literal">role_descriptors</code> parameter as an empty object <code class="literal">{}</code>.
If an API key has no assigned privileges, it inherits the owner user&#8217;s full permissions.
The snapshot of the owner&#8217;s permissions is always updated, whether you supply the <code class="literal">role_descriptors</code> parameter.
The structure of a role descriptor is the same as the request for the create API keys API.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_change_password"></a>change_password</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Change passwords.</p>
<p>Change the passwords of users in the native realm and built-in users.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-change-password.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.changePassword({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_382"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string)</strong></span>: The user whose password you want to change. If you do not specify this
parameter, the password is changed for the current user.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">password</code> (Optional, string)</strong></span>: The new password value. Passwords must be at least 6 characters long.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">password_hash</code> (Optional, string)</strong></span>: A hash of the new password value. This must be produced using the same
hashing algorithm as has been configured for password storage. For more details,
see the explanation of the <code class="literal">xpack.security.authc.password_hashing.algorithm</code>
setting.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_clear_api_key_cache"></a>clear_api_key_cache</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear the API key cache.</p>
<p>Evict a subset of all entries from the API key cache.
The cache is also automatically cleared on state changes of the security index.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-clear-api-key-cache.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.clearApiKeyCache({ ids })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_383"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ids</code> (string | string[])</strong></span>: List of API key IDs to evict from the API key cache.
To evict all API keys, use <code class="literal">*</code>.
Does not support other wildcard patterns.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_clear_cached_privileges"></a>clear_cached_privileges</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear the privileges cache.</p>
<p>Evict privileges from the native application privilege cache.
The cache is also automatically cleared for applications that have their privileges updated.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-clear-privilege-cache.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.clearCachedPrivileges({ application })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_384"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">application</code> (string)</strong></span>: A list of applications.
To clear all applications, use an asterism (<code class="literal">*</code>).
It does not support other wildcard patterns.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_clear_cached_realms"></a>clear_cached_realms</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear the user cache.</p>
<p>Evict users from the user cache.
You can completely clear the cache or evict specific users.</p>
<p>User credentials are cached in memory on each node to avoid connecting to a remote authentication service or hitting the disk for every incoming request.
There are realm settings that you can use to configure the user cache.
For more information, refer to the documentation about controlling the user cache.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-clear-cache.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.clearCachedRealms({ realms })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_385"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realms</code> (string | string[])</strong></span>: A list of realms.
To clear all realms, use an asterisk (<code class="literal">*</code>).
It does not support other wildcard patterns.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">usernames</code> (Optional, string[])</strong></span>: A list of the users to clear from the cache.
If you do not specify this parameter, the API evicts all users from the user cache.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_clear_cached_roles"></a>clear_cached_roles</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear the roles cache.</p>
<p>Evict roles from the native role cache.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-clear-role-cache.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.clearCachedRoles({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_386"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string | string[])</strong></span>: A list of roles to evict from the role cache.
To evict all roles, use an asterisk (<code class="literal">*</code>).
It does not support other wildcard patterns.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_clear_cached_service_tokens"></a>clear_cached_service_tokens</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear service account token caches.</p>
<p>Evict a subset of all entries from the service account token caches.
Two separate caches exist for service account tokens: one cache for tokens backed by the <code class="literal">service_tokens</code> file, and another for tokens backed by the <code class="literal">.security</code> index.
This API clears matching entries from both caches.</p>
<p>The cache for service account tokens backed by the <code class="literal">.security</code> index is cleared automatically on state changes of the security index.
The cache for tokens backed by the <code class="literal">service_tokens</code> file is cleared automatically on file changes.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-clear-service-token-caches.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.clearCachedServiceTokens({ namespace, service, name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_387"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">namespace</code> (string)</strong></span>: The namespace, which is a top-level grouping of service accounts.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (string)</strong></span>: The name of the service, which must be unique within its namespace.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string | string[])</strong></span>: A list of token names to evict from the service account token caches.
Use a wildcard (<code class="literal">*</code>) to evict all tokens that belong to a service account.
It does not support other wildcard patterns.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_create_api_key"></a>create_api_key</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create an API key.</p>
<p>Create an API key for access without requiring basic authentication.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the credential that is used to authenticate this request is an API key, the derived API key cannot have any privileges.
If you specify privileges, the API returns an error.</p>
</div>
</div>
<p>A successful request returns a JSON structure that contains the API key, its unique id, and its name.
If applicable, it also returns expiration information for the API key in milliseconds.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, API keys never expire. You can specify expiration information when you create the API keys.</p>
</div>
</div>
<p>The API keys are created by the Elasticsearch API key service, which is automatically enabled.
To configure or turn off the API key service, refer to API key service setting documentation.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-create-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.createApiKey({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_388"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expiration</code> (Optional, string | -1 | 0)</strong></span>: The expiration time for the API key.
By default, API keys never expire.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string)</strong></span>: A name for the API key.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">role_descriptors</code> (Optional, Record&lt;string, { cluster, indices, remote_indices, remote_cluster, global, applications, metadata, run_as, description, restriction, transient_metadata }&gt;)</strong></span>: An array of role descriptors for this API key.
When it is not specified or it is an empty array, the API key will have a point in time snapshot of permissions of the authenticated user.
If you supply role descriptors, the resultant permissions are an intersection of API keys permissions and the authenticated user&#8217;s permissions thereby limiting the access scope for API keys.
The structure of role descriptor is the same as the request for the create role API.
For more details, refer to the create or update roles API.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Due to the way in which this permission intersection is calculated, it is not possible to create an API key that is a child of another API key, unless the derived key is created without any privileges.
In this case, you must explicitly specify a role descriptor with no privileges.
The derived API key can be used for authentication; it will not have authority to call Elasticsearch APIs.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Arbitrary metadata that you want to associate with the API key. It supports nested data structure. Within the metadata object, keys beginning with <code class="literal">_</code> are reserved for system usage.
</strong></span> <span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_create_cross_cluster_api_key"></a>create_cross_cluster_api_key</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a cross-cluster API key.</p>
<p>Create an API key of the <code class="literal">cross_cluster</code> type for the API key based remote cluster access.
A <code class="literal">cross_cluster</code> API key cannot be used to authenticate through the REST interface.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>To authenticate this request you must use a credential that is not an API key. Even if you use an API key that has the required privilege, the API returns an error.</p>
</div>
</div>
<p>Cross-cluster API keys are created by the Elasticsearch API key service, which is automatically enabled.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Unlike REST API keys, a cross-cluster API key does not capture permissions of the authenticated user. The API key’s effective permission is exactly as specified with the <code class="literal">access</code> property.</p>
</div>
</div>
<p>A successful request returns a JSON structure that contains the API key, its unique ID, and its name. If applicable, it also returns expiration information for the API key in milliseconds.</p>
<p>By default, API keys never expire. You can specify expiration information when you create the API keys.</p>
<p>Cross-cluster API keys can only be updated with the update cross-cluster API key API.
Attempting to update them with the update REST API key API or the bulk update REST API keys API will result in an error.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-create-cross-cluster-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.createCrossClusterApiKey({ access, name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_389"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">access</code> ({ replication, search })</strong></span>: The access to be granted to this API key.
The access is composed of permissions for cross-cluster search and cross-cluster replication.
At least one of them must be specified.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>No explicit privileges should be specified for either search or replication access.
The creation process automatically converts the access specification to a role descriptor which has relevant privileges assigned accordingly.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: Specifies the name for this API key.
</strong></span> <span class="strong strong"><strong><code class="literal">expiration</code> (Optional, string | -1 | 0)</strong></span>: Expiration time for the API key.
By default, API keys never expire.
<span class="strong strong"><strong>* *<code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Arbitrary metadata that you want to associate with the API key.
It supports nested data structure.
Within the metadata object, keys beginning with <code class="literal">_</code> are reserved for system usage.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_create_service_token"></a>create_service_token</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a service account token.</p>
<p>Create a service accounts token for access without requiring basic authentication.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Service account tokens never expire.
You must actively delete them if they are no longer needed.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-create-service-token.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.createServiceToken({ namespace, service })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_390"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">namespace</code> (string)</strong></span>: The name of the namespace, which is a top-level grouping of service accounts.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (string)</strong></span>: The name of the service.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string)</strong></span>: The name for the service account token.
If omitted, a random name will be generated.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>Token names must be at least one and no more than 256 characters.
They can contain alphanumeric characters (a-z, A-Z, 0-9), dashes (<code class="literal">-</code>), and underscores (<code class="literal">_</code>), but cannot begin with an underscore.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Token names must be unique in the context of the associated service account.
They must also be globally unique with their fully qualified names, which are comprised of the service account principal and token name, such as <code class="literal">&lt;namespace&gt;/&lt;service&gt;/&lt;token-name&gt;</code>.
<span class="strong strong"><strong>* *<code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> (the default) then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_delegate_pki"></a>delegate_pki</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delegate PKI authentication.</p>
<p>This API implements the exchange of an X509Certificate chain for an Elasticsearch access token.
The certificate chain is validated, according to RFC 5280, by sequentially considering the trust configuration of every installed PKI realm that has <code class="literal">delegation.enabled</code> set to <code class="literal">true</code>.
A successfully trusted client certificate is also subject to the validation of the subject distinguished name according to thw <code class="literal">username_pattern</code> of the respective realm.</p>
<p>This API is called by smart and trusted proxies, such as Kibana, which terminate the user&#8217;s TLS session but still want to authenticate the user by using a PKI realm—-​as if the user connected directly to Elasticsearch.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The association between the subject public key in the target certificate and the corresponding private key is not validated.
This is part of the TLS authentication process and it is delegated to the proxy that calls this API.
The proxy is trusted to have performed the TLS authentication and this API translates that authentication into an Elasticsearch access token.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-delegate-pki-authentication.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.delegatePki({ x509_certificate_chain })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_391"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">x509_certificate_chain</code> (string[])</strong></span>: The X509Certificate chain, which is represented as an ordered string array.
Each string in the array is a base64-encoded (Section 4 of RFC4648 - not base64url-encoded) of the certificate&#8217;s DER encoding.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The first element is the target certificate that contains the subject distinguished name that is requesting access.
This may be followed by additional certificates; each subsequent certificate is used to certify the previous one.</p>
<div class="position-relative"><h4><a id="_delete_privileges"></a>delete_privileges</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete application privileges.</p>
<p>To use this API, you must have one of the following privileges:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">manage_security</code> cluster privilege (or a greater privilege such as <code class="literal">all</code>).
</li>
<li class="listitem">
The "Manage Application Privileges" global privilege for the application being referenced in the request.
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-delete-privilege.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.deletePrivileges({ application, name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_392"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">application</code> (string)</strong></span>: The name of the application.
Application privileges are always associated with exactly one application.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string | string[])</strong></span>: The name of the privilege.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_role"></a>delete_role</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete roles.</p>
<p>Delete roles in the native realm.
The role management APIs are generally the preferred way to manage roles, rather than using file-based role management.
The delete roles API cannot remove roles that are defined in roles files.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-delete-role.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.deleteRole({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_393"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the role.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_role_mapping"></a>delete_role_mapping</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete role mappings.</p>
<p>Role mappings define which roles are assigned to each user.
The role mapping APIs are generally the preferred way to manage role mappings rather than using role mapping files.
The delete role mappings API cannot remove role mappings that are defined in role mapping files.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-delete-role-mapping.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.deleteRoleMapping({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_394"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The distinct name that identifies the role mapping.
The name is used solely as an identifier to facilitate interaction via the API; it does not affect the behavior of the mapping in any way.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_service_token"></a>delete_service_token</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete service account tokens.</p>
<p>Delete service account tokens for a service in a specified namespace.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-delete-service-token.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.deleteServiceToken({ namespace, service, name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_395"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">namespace</code> (string)</strong></span>: The namespace, which is a top-level grouping of service accounts.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (string)</strong></span>: The service name.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the service account token.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> (the default) then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_user"></a>delete_user</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete users.</p>
<p>Delete users from the native realm.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-delete-user.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.deleteUser({ username })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_396"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (string)</strong></span>: An identifier for the user.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_disable_user"></a>disable_user</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Disable users.</p>
<p>Disable users in the native realm.
By default, when you create users, they are enabled.
You can use this API to revoke a user&#8217;s access to Elasticsearch.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-disable-user.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.disableUser({ username })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_397"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (string)</strong></span>: An identifier for the user.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_disable_user_profile"></a>disable_user_profile</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Disable a user profile.</p>
<p>Disable user profiles so that they are not visible in user profile searches.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and Elastic&#8217;s Observability, Enterprise Search, and Elastic Security solutions.
Individual users and external applications should not call this API directly.
Elastic reserves the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p>When you activate a user profile, its automatically enabled and visible in user profile searches. You can use the disable user profile API to disable a user profile so it’s not visible in these searches.
To re-enable a disabled user profile, use the enable user profile API .</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-disable-user-profile.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.disableUserProfile({ uid })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_398"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">uid</code> (string)</strong></span>: Unique identifier for the user profile.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <em>true</em>, Elasticsearch refreshes the affected shards to make this operation visible to search.
If <em>wait_for</em>, it waits for a refresh to make this operation visible to search.
If <em>false</em>, it does nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_enable_user"></a>enable_user</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Enable users.</p>
<p>Enable users in the native realm.
By default, when you create users, they are enabled.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-enable-user.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.enableUser({ username })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_399"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (string)</strong></span>: An identifier for the user.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_enable_user_profile"></a>enable_user_profile</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Enable a user profile.</p>
<p>Enable user profiles to make them visible in user profile searches.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and Elastic&#8217;s Observability, Enterprise Search, and Elastic Security solutions.
Individual users and external applications should not call this API directly.
Elastic reserves the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p>When you activate a user profile, it&#8217;s automatically enabled and visible in user profile searches.
If you later disable the user profile, you can use the enable user profile API to make the profile visible in these searches again.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-enable-user-profile.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.enableUserProfile({ uid })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_400"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">uid</code> (string)</strong></span>: A unique identifier for the user profile.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <em>true</em>, Elasticsearch refreshes the affected shards to make this operation
visible to search.
If <em>wait_for</em>, it waits for a refresh to make this operation visible to search.
If <em>false</em>, nothing is done with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_enroll_kibana"></a>enroll_kibana</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Enroll Kibana.</p>
<p>Enable a Kibana instance to configure itself for communication with a secured Elasticsearch cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is currently intended for internal use only by Kibana.
Kibana uses this API internally to configure itself for communications with an Elasticsearch cluster that already has security features enabled.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-kibana-enrollment.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.enrollKibana()</pre>
</div>
<div class="position-relative"><h4><a id="_enroll_node"></a>enroll_node</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Enroll a node.</p>
<p>Enroll a new node to allow it to join an existing cluster with security features enabled.</p>
<p>The response contains all the necessary information for the joining node to bootstrap discovery and security related settings so that it can successfully join the cluster.
The response contains key and certificate material that allows the caller to generate valid signed certificates for the HTTP layer of all nodes in the cluster.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-node-enrollment.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.enrollNode()</pre>
</div>
<div class="position-relative"><h4><a id="_get_api_key"></a>get_api_key</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get API key information.</p>
<p>Retrieves information for one or more API keys.
NOTE: If you have only the <code class="literal">manage_own_api_key</code> privilege, this API returns only the API keys that you own.
If you have <code class="literal">read_security</code>, <code class="literal">manage_api_key</code> or greater privileges (including <code class="literal">manage_security</code>), this API returns all API keys regardless of ownership.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getApiKey({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_401"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: An API key id.
This parameter cannot be used with any of <code class="literal">name</code>, <code class="literal">realm_name</code> or <code class="literal">username</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string)</strong></span>: An API key name.
This parameter cannot be used with any of <code class="literal">id</code>, <code class="literal">realm_name</code> or <code class="literal">username</code>.
It supports prefix search with wildcard.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">owner</code> (Optional, boolean)</strong></span>: A boolean flag that can be used to query API keys owned by the currently authenticated user.
The <code class="literal">realm_name</code> or <code class="literal">username</code> parameters cannot be specified when this parameter is set to <code class="literal">true</code> as they are assumed to be the currently authenticated ones.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm_name</code> (Optional, string)</strong></span>: The name of an authentication realm.
This parameter cannot be used with either <code class="literal">id</code> or <code class="literal">name</code> or when <code class="literal">owner</code> flag is set to <code class="literal">true</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string)</strong></span>: The username of a user.
This parameter cannot be used with either <code class="literal">id</code> or <code class="literal">name</code> or when <code class="literal">owner</code> flag is set to <code class="literal">true</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">with_limited_by</code> (Optional, boolean)</strong></span>: Return the snapshot of the owner user&#8217;s role descriptors
associated with the API key. An API key&#8217;s actual
permission is the intersection of its assigned role
descriptors and the owner user&#8217;s role descriptors.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">active_only</code> (Optional, boolean)</strong></span>: A boolean flag that can be used to query API keys that are currently active. An API key is considered active if it is neither invalidated, nor expired at query time. You can specify this together with other parameters such as <code class="literal">owner</code> or <code class="literal">name</code>. If <code class="literal">active_only</code> is false, the response will include both active and inactive (expired or invalidated) keys.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">with_profile_uid</code> (Optional, boolean)</strong></span>: Determines whether to also retrieve the profile uid, for the API key owner principal, if it exists.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_builtin_privileges"></a>get_builtin_privileges</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get builtin privileges.</p>
<p>Get the list of cluster privileges and index privileges that are available in this version of Elasticsearch.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-builtin-privileges.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getBuiltinPrivileges()</pre>
</div>
<div class="position-relative"><h4><a id="_get_privileges"></a>get_privileges</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get application privileges.</p>
<p>To use this API, you must have one of the following privileges:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">read_security</code> cluster privilege (or a greater privilege such as <code class="literal">manage_security</code> or <code class="literal">all</code>).
</li>
<li class="listitem">
The "Manage Application Privileges" global privilege for the application being referenced in the request.
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-privileges.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getPrivileges({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_402"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">application</code> (Optional, string)</strong></span>: The name of the application.
Application privileges are always associated with exactly one application.
If you do not specify this parameter, the API returns information about all privileges for all applications.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string | string[])</strong></span>: The name of the privilege.
If you do not specify this parameter, the API returns information about all privileges for the requested application.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_role"></a>get_role</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get roles.</p>
<p>Get roles in the native realm.
The role management APIs are generally the preferred way to manage roles, rather than using file-based role management.
The get roles API cannot retrieve roles that are defined in roles files.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-role.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getRole({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_403"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string | string[])</strong></span>: The name of the role.
You can specify multiple roles as a list.
If you do not specify this parameter, the API returns information about all roles.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_role_mapping"></a>get_role_mapping</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get role mappings.</p>
<p>Role mappings define which roles are assigned to each user.
The role mapping APIs are generally the preferred way to manage role mappings rather than using role mapping files.
The get role mappings API cannot retrieve role mappings that are defined in role mapping files.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-role-mapping.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getRoleMapping({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_404"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string | string[])</strong></span>: The distinct name that identifies the role mapping. The name is used solely as an identifier to facilitate interaction via the API; it does not affect the behavior of the mapping in any way. You can specify multiple mapping names as a list. If you do not specify this parameter, the API returns information about all role mappings.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_service_accounts"></a>get_service_accounts</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get service accounts.</p>
<p>Get a list of service accounts that match the provided path parameters.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Currently, only the <code class="literal">elastic/fleet-server</code> service account is available.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-service-accounts.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getServiceAccounts({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_405"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">namespace</code> (Optional, string)</strong></span>: The name of the namespace.
Omit this parameter to retrieve information about all service accounts.
If you omit this parameter, you must also omit the <code class="literal">service</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (Optional, string)</strong></span>: The service name.
Omit this parameter to retrieve information about all service accounts that belong to the specified <code class="literal">namespace</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_service_credentials"></a>get_service_credentials</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get service account credentials.</p>
<p>To use this API, you must have at least the <code class="literal">read_security</code> cluster privilege (or a greater privilege such as <code class="literal">manage_service_account</code> or <code class="literal">manage_security</code>).</p>
<p>The response includes service account tokens that were created with the create service account tokens API as well as file-backed tokens from all nodes of the cluster.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For tokens backed by the <code class="literal">service_tokens</code> file, the API collects them from all nodes of the cluster.
Tokens with the same name from different nodes are assumed to be the same token and are only counted once towards the total number of service tokens.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-service-credentials.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getServiceCredentials({ namespace, service })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_406"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">namespace</code> (string)</strong></span>: The name of the namespace.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">service</code> (string)</strong></span>: The service name.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_settings_3"></a>get_settings</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get security index settings.</p>
<p>Get the user-configurable settings for the security internal index (<code class="literal">.security</code> and associated indices).
Only a subset of the index settings — those that are user-configurable—will be shown.
This includes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">index.auto_expand_replicas</code>
</li>
<li class="listitem">
<code class="literal">index.number_of_replicas</code>
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-settings.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getSettings({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_407"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_token"></a>get_token</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get a token.</p>
<p>Create a bearer token for access without requiring basic authentication.
The tokens are created by the Elasticsearch Token Service, which is automatically enabled when you configure TLS on the HTTP interface.
Alternatively, you can explicitly enable the <code class="literal">xpack.security.authc.token.enabled</code> setting.
When you are running in production mode, a bootstrap check prevents you from enabling the token service unless you also enable TLS on the HTTP interface.</p>
<p>The get token API takes the same parameters as a typical OAuth 2.0 token API except for the use of a JSON request body.</p>
<p>A successful get token API call returns a JSON structure that contains the access token, the amount of time (seconds) that the token expires in, the type, and the scope if available.</p>
<p>The tokens returned by the get token API have a finite period of time for which they are valid and after that time period, they can no longer be used.
That time period is defined by the <code class="literal">xpack.security.authc.token.timeout</code> setting.
If you want to invalidate a token immediately, you can do so by using the invalidate token API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-token.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getToken({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_408"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">grant_type</code> (Optional, Enum("password" | "client_credentials" | "_kerberos" | "refresh_token"))</strong></span>: The type of grant.
Supported grant types are: <code class="literal">password</code>, <code class="literal">_kerberos</code>, <code class="literal">client_credentials</code>, and <code class="literal">refresh_token</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">scope</code> (Optional, string)</strong></span>: The scope of the token.
Currently tokens are only issued for a scope of FULL regardless of the value sent with the request.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">password</code> (Optional, string)</strong></span>: The user&#8217;s password.
If you specify the <code class="literal">password</code> grant type, this parameter is required.
This parameter is not valid with any other supported grant type.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">kerberos_ticket</code> (Optional, string)</strong></span>: The base64 encoded kerberos ticket.
If you specify the <code class="literal">_kerberos</code> grant type, this parameter is required.
This parameter is not valid with any other supported grant type.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh_token</code> (Optional, string)</strong></span>: The string that was returned when you created the token, which enables you to extend its life.
If you specify the <code class="literal">refresh_token</code> grant type, this parameter is required.
This parameter is not valid with any other supported grant type.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string)</strong></span>: The username that identifies the user.
If you specify the <code class="literal">password</code> grant type, this parameter is required.
This parameter is not valid with any other supported grant type.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_user"></a>get_user</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get users.</p>
<p>Get information about users in the native realm and built-in users.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-user.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getUser({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_409"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string | string[])</strong></span>: An identifier for the user. You can specify multiple usernames as a list. If you omit this parameter, the API retrieves information about all users.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">with_profile_uid</code> (Optional, boolean)</strong></span>: Determines whether to retrieve the user profile UID, if it exists, for the users.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_user_privileges"></a>get_user_privileges</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get user privileges.</p>
<p>Get the security privileges for the logged in user.
All users can use this API, but only to determine their own privileges.
To check the privileges of other users, you must use the run as feature.
To check whether a user has a specific list of privileges, use the has privileges API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-user-privileges.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getUserPrivileges({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_410"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">application</code> (Optional, string)</strong></span>: The name of the application. Application privileges are always associated with exactly one application. If you do not specify this parameter, the API returns information about all privileges for all applications.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">priviledge</code> (Optional, string)</strong></span>: The name of the privilege. If you do not specify this parameter, the API returns information about all privileges for the requested application.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string | null)</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_user_profile"></a>get_user_profile</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get a user profile.</p>
<p>Get a user&#8217;s profile using the unique profile ID.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and Elastic&#8217;s Observability, Enterprise Search, and Elastic Security solutions.
Individual users and external applications should not call this API directly.
Elastic reserves the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-get-user-profile.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.getUserProfile({ uid })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_411"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">uid</code> (string | string[])</strong></span>: A unique identifier for the user profile.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">data</code> (Optional, string | string[])</strong></span>: A list of filters for the <code class="literal">data</code> field of the profile document.
To return all content use <code class="literal">data=*</code>.
To return a subset of content use <code class="literal">data=&lt;key&gt;</code> to retrieve content nested under the specified <code class="literal">&lt;key&gt;</code>.
By default returns no <code class="literal">data</code> content.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_grant_api_key"></a>grant_api_key</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Grant an API key.</p>
<p>Create an API key on behalf of another user.
This API is similar to the create API keys API, however it creates the API key for a user that is different than the user that runs the API.
The caller must have authentication credentials for the user on whose behalf the API key will be created.
It is not possible to use this API to create an API key without that user&#8217;s credentials.
The supported user authentication credential types are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
username and password
</li>
<li class="listitem">
Elasticsearch access tokens
</li>
<li class="listitem">
JWTs
</li>
</ul>
</div>
<p>The user, for whom the authentication credentials is provided, can optionally "run as" (impersonate) another user.
In this case, the API key will be created on behalf of the impersonated user.</p>
<p>This API is intended be used by applications that need to create and manage API keys for end users, but cannot guarantee that those users have permission to create API keys on their own behalf.
The API keys are created by the Elasticsearch API key service, which is automatically enabled.</p>
<p>A successful grant API key API call returns a JSON structure that contains the API key, its unique id, and its name.
If applicable, it also returns expiration information for the API key in milliseconds.</p>
<p>By default, API keys never expire. You can specify expiration information when you create the API keys.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-grant-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.grantApiKey({ api_key, grant_type })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_412"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">api_key</code> ({ name, expiration, role_descriptors, metadata })</strong></span>: The API key.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">grant_type</code> (Enum("access_token" | "password"))</strong></span>: The type of grant. Supported grant types are: <code class="literal">access_token</code>, <code class="literal">password</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">access_token</code> (Optional, string)</strong></span>: The user&#8217;s access token.
If you specify the <code class="literal">access_token</code> grant type, this parameter is required.
It is not valid with other grant types.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string)</strong></span>: The user name that identifies the user.
If you specify the <code class="literal">password</code> grant type, this parameter is required.
It is not valid with other grant types.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">password</code> (Optional, string)</strong></span>: The user&#8217;s password.
If you specify the <code class="literal">password</code> grant type, this parameter is required.
It is not valid with other grant types.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">run_as</code> (Optional, string)</strong></span>: The name of the user to be impersonated.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_has_privileges"></a>has_privileges</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Check user privileges.</p>
<p>Determine whether the specified user has a specified list of privileges.
All users can use this API, but only to determine their own privileges.
To check the privileges of other users, you must use the run as feature.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-has-privileges.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.hasPrivileges({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_413"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">user</code> (Optional, string)</strong></span>: Username
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">application</code> (Optional, { application, privileges, resources }[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cluster</code> (Optional, Enum("all" | "cancel_task" | "create_snapshot" | "cross_cluster_replication" | "cross_cluster_search" | "delegate_pki" | "grant_api_key" | "manage" | "manage_api_key" | "manage_autoscaling" | "manage_behavioral_analytics" | "manage_ccr" | "manage_data_frame_transforms" | "manage_data_stream_global_retention" | "manage_enrich" | "manage_ilm" | "manage_index_templates" | "manage_inference" | "manage_ingest_pipelines" | "manage_logstash_pipelines" | "manage_ml" | "manage_oidc" | "manage_own_api_key" | "manage_pipeline" | "manage_rollup" | "manage_saml" | "manage_search_application" | "manage_search_query_rules" | "manage_search_synonyms" | "manage_security" | "manage_service_account" | "manage_slm" | "manage_token" | "manage_transform" | "manage_user_profile" | "manage_watcher" | "monitor" | "monitor_data_frame_transforms" | "monitor_data_stream_global_retention" | "monitor_enrich" | "monitor_inference" | "monitor_ml" | "monitor_rollup" | "monitor_snapshot" | "monitor_stats" | "monitor_text_structure" | "monitor_transform" | "monitor_watcher" | "none" | "post_behavioral_analytics_event" | "read_ccr" | "read_fleet_secrets" | "read_ilm" | "read_pipeline" | "read_security" | "read_slm" | "transport_client" | "write_connector_secrets" | "write_fleet_secrets")[])</strong></span>: A list of the cluster privileges that you want to check.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, { names, privileges, allow_restricted_indices }[])</strong></span>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_has_privileges_user_profile"></a>has_privileges_user_profile</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Check user profile privileges.</p>
<p>Determine whether the users associated with the specified user profile IDs have all the requested privileges.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and Elastic&#8217;s Observability, Enterprise Search, and Elastic Security solutions. Individual users and external applications should not call this API directly.
Elastic reserves the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-has-privileges-user-profile.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.hasPrivilegesUserProfile({ uids, privileges })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_414"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">uids</code> (string[])</strong></span>: A list of profile IDs. The privileges are checked for associated users of the profiles.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">privileges</code> ({ application, cluster, index })</strong></span>: An object containing all the privileges to be checked.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_invalidate_api_key"></a>invalidate_api_key</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Invalidate API keys.</p>
<p>This API invalidates API keys created by the create API key or grant API key APIs.
Invalidated API keys fail authentication, but they can still be viewed using the get API key information and query API key information APIs, for at least the configured retention period, until they are automatically deleted.</p>
<p>To use this API, you must have at least the <code class="literal">manage_security</code>, <code class="literal">manage_api_key</code>, or <code class="literal">manage_own_api_key</code> cluster privileges.
The <code class="literal">manage_security</code> privilege allows deleting any API key, including both REST and cross cluster API keys.
The <code class="literal">manage_api_key</code> privilege allows deleting any REST API key, but not cross cluster API keys.
The <code class="literal">manage_own_api_key</code> only allows deleting REST API keys that are owned by the user.
In addition, with the <code class="literal">manage_own_api_key</code> privilege, an invalidation request must be issued in one of the three formats:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set the parameter <code class="literal">owner=true</code>.
</li>
<li class="listitem">
Or, set both <code class="literal">username</code> and <code class="literal">realm_name</code> to match the user&#8217;s identity.
</li>
<li class="listitem">
Or, if the request is issued by an API key, that is to say an API key invalidates itself, specify its ID in the <code class="literal">ids</code> field.
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-invalidate-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.invalidateApiKey({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_415"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ids</code> (Optional, string[])</strong></span>: A list of API key ids.
This parameter cannot be used with any of <code class="literal">name</code>, <code class="literal">realm_name</code>, or <code class="literal">username</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string)</strong></span>: An API key name.
This parameter cannot be used with any of <code class="literal">ids</code>, <code class="literal">realm_name</code> or <code class="literal">username</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">owner</code> (Optional, boolean)</strong></span>: Query API keys owned by the currently authenticated user.
The <code class="literal">realm_name</code> or <code class="literal">username</code> parameters cannot be specified when this parameter is set to <code class="literal">true</code> as they are assumed to be the currently authenticated ones.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>At least one of <code class="literal">ids</code>, <code class="literal">name</code>, <code class="literal">username</code>, and <code class="literal">realm_name</code> must be specified if <code class="literal">owner</code> is <code class="literal">false</code>.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">realm_name</code> (Optional, string)</strong></span>: The name of an authentication realm.
This parameter cannot be used with either <code class="literal">ids</code> or <code class="literal">name</code>, or when <code class="literal">owner</code> flag is set to <code class="literal">true</code>.
</strong></span> <span class="strong strong"><strong><code class="literal">username</code> (Optional, string)</strong></span>: The username of a user.
This parameter cannot be used with either <code class="literal">ids</code> or <code class="literal">name</code> or when <code class="literal">owner</code> flag is set to <code class="literal">true</code>.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_invalidate_token"></a>invalidate_token</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Invalidate a token.</p>
<p>The access tokens returned by the get token API have a finite period of time for which they are valid.
After that time period, they can no longer be used.
The time period is defined by the <code class="literal">xpack.security.authc.token.timeout</code> setting.</p>
<p>The refresh tokens returned by the get token API are only valid for 24 hours.
They can also be used exactly once.
If you want to invalidate one or more access or refresh tokens immediately, use this invalidate token API.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>While all parameters are optional, at least one of them is required.
More specifically, either one of <code class="literal">token</code> or <code class="literal">refresh_token</code> parameters is required.
If none of these two are specified, then <code class="literal">realm_name</code> and/or <code class="literal">username</code> need to be specified.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-invalidate-token.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.invalidateToken({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_416"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">token</code> (Optional, string)</strong></span>: An access token.
This parameter cannot be used if any of <code class="literal">refresh_token</code>, <code class="literal">realm_name</code>, or <code class="literal">username</code> are used.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh_token</code> (Optional, string)</strong></span>: A refresh token.
This parameter cannot be used if any of <code class="literal">refresh_token</code>, <code class="literal">realm_name</code>, or <code class="literal">username</code> are used.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm_name</code> (Optional, string)</strong></span>: The name of an authentication realm.
This parameter cannot be used with either <code class="literal">refresh_token</code> or <code class="literal">token</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (Optional, string)</strong></span>: The username of a user.
This parameter cannot be used with either <code class="literal">refresh_token</code> or <code class="literal">token</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_oidc_authenticate"></a>oidc_authenticate</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Authenticate OpenID Connect.</p>
<p>Exchange an OpenID Connect authentication response message for an Elasticsearch internal access token and refresh token that can be subsequently used for authentication.</p>
<p>Elasticsearch exposes all the necessary OpenID Connect related functionality with the OpenID Connect APIs.
These APIs are used internally by Kibana in order to provide OpenID Connect based authentication, but can also be used by other, custom web applications or other clients.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-oidc-authenticate.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.oidcAuthenticate({ nonce, redirect_uri, state })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_417"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">nonce</code> (string)</strong></span>: Associate a client session with an ID token and mitigate replay attacks.
This value needs to be the same as the one that was provided to the <code class="literal">/_security/oidc/prepare</code> API or the one that was generated by Elasticsearch and included in the response to that call.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">redirect_uri</code> (string)</strong></span>: The URL to which the OpenID Connect Provider redirected the User Agent in response to an authentication request after a successful authentication.
This URL must be provided as-is (URL encoded), taken from the body of the response or as the value of a location header in the response from the OpenID Connect Provider.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">state</code> (string)</strong></span>: Maintain state between the authentication request and the response.
This value needs to be the same as the one that was provided to the <code class="literal">/_security/oidc/prepare</code> API or the one that was generated by Elasticsearch and included in the response to that call.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm</code> (Optional, string)</strong></span>: The name of the OpenID Connect realm.
This property is useful in cases where multiple realms are defined.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_oidc_logout"></a>oidc_logout</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Logout of OpenID Connect.</p>
<p>Invalidate an access token and a refresh token that were generated as a response to the <code class="literal">/_security/oidc/authenticate</code> API.</p>
<p>If the OpenID Connect authentication realm in Elasticsearch is accordingly configured, the response to this call will contain a URI pointing to the end session endpoint of the OpenID Connect Provider in order to perform single logout.</p>
<p>Elasticsearch exposes all the necessary OpenID Connect related functionality with the OpenID Connect APIs.
These APIs are used internally by Kibana in order to provide OpenID Connect based authentication, but can also be used by other, custom web applications or other clients.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-oidc-logout.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.oidcLogout({ token })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_418"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">token</code> (string)</strong></span>: The access token to be invalidated.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh_token</code> (Optional, string)</strong></span>: The refresh token to be invalidated.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_oidc_prepare_authentication"></a>oidc_prepare_authentication</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Prepare OpenID connect authentication.</p>
<p>Create an oAuth 2.0 authentication request as a URL string based on the configuration of the OpenID Connect authentication realm in Elasticsearch.</p>
<p>The response of this API is a URL pointing to the Authorization Endpoint of the configured OpenID Connect Provider, which can be used to redirect the browser of the user in order to continue the authentication process.</p>
<p>Elasticsearch exposes all the necessary OpenID Connect related functionality with the OpenID Connect APIs.
These APIs are used internally by Kibana in order to provide OpenID Connect based authentication, but can also be used by other, custom web applications or other clients.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-oidc-prepare-authentication.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.oidcPrepareAuthentication({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_419"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">iss</code> (Optional, string)</strong></span>: In the case of a third party initiated single sign on, this is the issuer identifier for the OP that the RP is to send the authentication request to.
It cannot be specified when <span class="strong strong"><strong>realm</strong></span> is specified.
One of <span class="strong strong"><strong>realm</strong></span> or <span class="strong strong"><strong>iss</strong></span> is required.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">login_hint</code> (Optional, string)</strong></span>: In the case of a third party initiated single sign on, it is a string value that is included in the authentication request as the <span class="strong strong"><strong>login_hint</strong></span> parameter.
This parameter is not valid when <span class="strong strong"><strong>realm</strong></span> is specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">nonce</code> (Optional, string)</strong></span>: The value used to associate a client session with an ID token and to mitigate replay attacks.
If the caller of the API does not provide a value, Elasticsearch will generate one with sufficient entropy and return it in the response.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm</code> (Optional, string)</strong></span>: The name of the OpenID Connect realm in Elasticsearch the configuration of which should be used in order to generate the authentication request.
It cannot be specified when <span class="strong strong"><strong>iss</strong></span> is specified.
One of <span class="strong strong"><strong>realm</strong></span> or <span class="strong strong"><strong>iss</strong></span> is required.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">state</code> (Optional, string)</strong></span>: The value used to maintain state between the authentication request and the response, typically used as a Cross-Site Request Forgery mitigation.
If the caller of the API does not provide a value, Elasticsearch will generate one with sufficient entropy and return it in the response.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_privileges"></a>put_privileges</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update application privileges.</p>
<p>To use this API, you must have one of the following privileges:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">manage_security</code> cluster privilege (or a greater privilege such as <code class="literal">all</code>).
</li>
<li class="listitem">
The "Manage Application Privileges" global privilege for the application being referenced in the request.
</li>
</ul>
</div>
<p>Application names are formed from a prefix, with an optional suffix that conform to the following rules:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The prefix must begin with a lowercase ASCII letter.
</li>
<li class="listitem">
The prefix must contain only ASCII letters or digits.
</li>
<li class="listitem">
The prefix must be at least 3 characters long.
</li>
<li class="listitem">
If the suffix exists, it must begin with either a dash <code class="literal">-</code> or <code class="literal">_</code>.
</li>
<li class="listitem">
The suffix cannot contain any of the following characters: <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, <code class="literal">,</code>, <code class="literal">*</code>.
</li>
<li class="listitem">
No part of the name can contain whitespace.
</li>
</ul>
</div>
<p>Privilege names must begin with a lowercase ASCII letter and must contain only ASCII letters and digits along with the characters <code class="literal">_</code>, <code class="literal">-</code>, and <code class="literal">.</code>.</p>
<p>Action names can contain any number of printable ASCII characters and must contain at least one of the following characters: <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">:</code>.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-put-privileges.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.putPrivileges({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_420"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">privileges</code> (Optional, Record&lt;string, Record&lt;string, { allocate, delete, downsample, freeze, forcemerge, migrate, readonly, rollover, set_priority, searchable_snapshot, shrink, unfollow, wait_for_snapshot }&gt;&gt;)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_role"></a>put_role</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update roles.</p>
<p>The role management APIs are generally the preferred way to manage roles in the native realm, rather than using file-based role management.
The create or update roles API cannot update roles that are defined in roles files.
File-based role management is not available in Elastic Serverless.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-put-role.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.putRole({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_421"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The name of the role.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">applications</code> (Optional, { application, privileges, resources }[])</strong></span>: A list of application privilege entries.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cluster</code> (Optional, Enum("all" | "cancel_task" | "create_snapshot" | "cross_cluster_replication" | "cross_cluster_search" | "delegate_pki" | "grant_api_key" | "manage" | "manage_api_key" | "manage_autoscaling" | "manage_behavioral_analytics" | "manage_ccr" | "manage_data_frame_transforms" | "manage_data_stream_global_retention" | "manage_enrich" | "manage_ilm" | "manage_index_templates" | "manage_inference" | "manage_ingest_pipelines" | "manage_logstash_pipelines" | "manage_ml" | "manage_oidc" | "manage_own_api_key" | "manage_pipeline" | "manage_rollup" | "manage_saml" | "manage_search_application" | "manage_search_query_rules" | "manage_search_synonyms" | "manage_security" | "manage_service_account" | "manage_slm" | "manage_token" | "manage_transform" | "manage_user_profile" | "manage_watcher" | "monitor" | "monitor_data_frame_transforms" | "monitor_data_stream_global_retention" | "monitor_enrich" | "monitor_inference" | "monitor_ml" | "monitor_rollup" | "monitor_snapshot" | "monitor_stats" | "monitor_text_structure" | "monitor_transform" | "monitor_watcher" | "none" | "post_behavioral_analytics_event" | "read_ccr" | "read_fleet_secrets" | "read_ilm" | "read_pipeline" | "read_security" | "read_slm" | "transport_client" | "write_connector_secrets" | "write_fleet_secrets")[])</strong></span>: A list of cluster privileges. These privileges define the cluster-level actions for users with this role.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">global</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: An object defining global privileges. A global privilege is a form of cluster privilege that is request-aware. Support for global privileges is currently limited to the management of application privileges.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices</code> (Optional, { field_security, names, privileges, query, allow_restricted_indices }[])</strong></span>: A list of indices permissions entries.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">remote_indices</code> (Optional, { clusters, field_security, names, privileges, query, allow_restricted_indices }[])</strong></span>: A list of remote indices permissions entries.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Remote indices are effective for remote clusters configured with the API key based model.
They have no effect for remote clusters configured with the certificate based model.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">remote_cluster</code> (Optional, { clusters, privileges }[])</strong></span>: A list of remote cluster permissions entries.
</strong></span> <span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Optional metadata. Within the metadata object, keys that begin with an underscore (<code class="literal">_</code>) are reserved for system use.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">run_as</code> (Optional, string[])</strong></span>: A list of users that the owners of this role can impersonate. <span class="strong strong"><strong>Note</strong></span>: in Serverless, the run-as feature is disabled. For API compatibility, you can still specify an empty <code class="literal">run_as</code> field, but a non-empty list will be rejected.
</strong></span> <span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: Optional description of the role descriptor
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">transient_metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Indicates roles that might be incompatible with the current cluster license, specifically roles with document and field level security. When the cluster license doesn’t allow certain features for a given role, this parameter is updated dynamically to list the incompatible features. If <code class="literal">enabled</code> is <code class="literal">false</code>, the role is ignored, but is still listed in the response from the authenticate API.
</strong></span> <span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_put_role_mapping"></a>put_role_mapping</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update role mappings.</p>
<p>Role mappings define which roles are assigned to each user.
Each mapping has rules that identify users and a list of roles that are granted to those users.
The role mapping APIs are generally the preferred way to manage role mappings rather than using role mapping files. The create or update role mappings API cannot update role mappings that are defined in role mapping files.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API does not create roles. Rather, it maps users to existing roles.
Roles can be created by using the create or update roles API or roles files.</p>
</div>
</div>
<p><span class="strong strong"><strong>Role templates</strong></span></p>
<p>The most common use for role mappings is to create a mapping from a known value on the user to a fixed role name.
For example, all users in the <code class="literal">cn=admin,dc=example,dc=com</code> LDAP group should be given the superuser role in Elasticsearch.
The <code class="literal">roles</code> field is used for this purpose.</p>
<p>For more complex needs, it is possible to use Mustache templates to dynamically determine the names of the roles that should be granted to the user.
The <code class="literal">role_templates</code> field is used for this purpose.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To use role templates successfully, the relevant scripting feature must be enabled.
Otherwise, all attempts to create a role mapping with role templates fail.</p>
</div>
</div>
<p>All of the user fields that are available in the role mapping rules are also available in the role templates.
Thus it is possible to assign a user to a role that reflects their username, their groups, or the name of the realm to which they authenticated.</p>
<p>By default a template is evaluated to produce a single string that is the name of the role which should be assigned to the user.
If the format of the template is set to "json" then the template is expected to produce a JSON string or an array of JSON strings for the role names.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-put-role-mapping.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.putRoleMapping({ name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_422"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (string)</strong></span>: The distinct name that identifies the role mapping.
The name is used solely as an identifier to facilitate interaction via the API; it does not affect the behavior of the mapping in any way.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">enabled</code> (Optional, boolean)</strong></span>: Mappings that have <code class="literal">enabled</code> set to <code class="literal">false</code> are ignored when role mapping is performed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Additional metadata that helps define which roles are assigned to each user.
Within the metadata object, keys beginning with <code class="literal">_</code> are reserved for system usage.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">roles</code> (Optional, string[])</strong></span>: A list of role names that are granted to the users that match the role mapping rules.
Exactly one of <code class="literal">roles</code> or <code class="literal">role_templates</code> must be specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">role_templates</code> (Optional, { format, template }[])</strong></span>: A list of Mustache templates that will be evaluated to determine the roles names that should granted to the users that match the role mapping rules.
Exactly one of <code class="literal">roles</code> or <code class="literal">role_templates</code> must be specified.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rules</code> (Optional, { any, all, field, except })</strong></span>: The rules that determine which users should be matched by the mapping.
A rule is a logical condition that is expressed by using a JSON DSL.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">run_as</code> (Optional, string[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <code class="literal">true</code> (the default) then refresh the affected shards to make this operation visible to search, if <code class="literal">wait_for</code> then wait for a refresh to make this operation visible to search, if <code class="literal">false</code> then do nothing with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_user"></a>put_user</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update users.</p>
<p>Add and update users in the native realm.
A password is required for adding a new user but is optional when updating an existing user.
To change a user&#8217;s password without updating any other fields, use the change password API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-put-user.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.putUser({ username })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_423"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">username</code> (string)</strong></span>: An identifier for the user.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Usernames must be at least 1 and no more than 507 characters.
They can contain alphanumeric characters (a-z, A-Z, 0-9), spaces, punctuation, and printable symbols in the Basic Latin (ASCII) block.
Leading or trailing whitespace is not allowed.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">email</code> (Optional, string | null)</strong></span>: The email of the user.
</strong></span> <span class="strong strong"><strong><code class="literal">full_name</code> (Optional, string | null)</strong></span>: The full name of the user.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Arbitrary metadata that you want to associate with the user.
</strong></span> <span class="strong strong"><strong><code class="literal">password</code> (Optional, string)</strong></span>: The user&#8217;s password.
Passwords must be at least 6 characters long.
When adding a user, one of <code class="literal">password</code> or <code class="literal">password_hash</code> is required.
When updating an existing user, the password is optional, so that other fields on the user (such as their roles) may be updated without modifying the user&#8217;s password
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">password_hash</code> (Optional, string)</strong></span>: A hash of the user&#8217;s password.
This must be produced using the same hashing algorithm as has been configured for password storage.
For more details, see the explanation of the <code class="literal">xpack.security.authc.password_hashing.algorithm</code> setting in the user cache and password hash algorithm documentation.
Using this parameter allows the client to pre-hash the password for performance and/or confidentiality reasons.
The <code class="literal">password</code> parameter and the <code class="literal">password_hash</code> parameter cannot be used in the same request.
</strong></span> <span class="strong strong"><strong><code class="literal">roles</code> (Optional, string[])</strong></span>: A set of roles the user has.
The roles determine the user&#8217;s access permissions.
To create a user without any roles, specify an empty list (<code class="literal">[]</code>).
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">enabled</code> (Optional, boolean)</strong></span>: Specifies whether the user is enabled.
</strong></span> <span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: Valid values are <code class="literal">true</code>, <code class="literal">false</code>, and <code class="literal">wait_for</code>.
These values have the same meaning as in the index API, but the default value for this API is true.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_query_api_keys"></a>query_api_keys</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Find API keys with a query.</p>
<p>Get a paginated list of API keys and their information.
You can optionally filter the results with a query.</p>
<p>To use this API, you must have at least the <code class="literal">manage_own_api_key</code> or the <code class="literal">read_security</code> cluster privileges.
If you have only the <code class="literal">manage_own_api_key</code> privilege, this API returns only the API keys that you own.
If you have the <code class="literal">read_security</code>, <code class="literal">manage_api_key</code>, or greater privileges (including <code class="literal">manage_security</code>), this API returns all API keys regardless of ownership.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-query-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.queryApiKeys({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_424"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">aggregations</code> (Optional, Record&lt;string, { aggregations, meta, cardinality, composite, date_range, filter, filters, missing, range, terms, value_count }&gt;)</strong></span>: Any aggregations to run over the corpus of returned API keys.
Aggregations and queries work together. Aggregations are computed only on the API keys that match the query.
This supports only a subset of aggregation types, namely: <code class="literal">terms</code>, <code class="literal">range</code>, <code class="literal">date_range</code>, <code class="literal">missing</code>,
<code class="literal">cardinality</code>, <code class="literal">value_count</code>, <code class="literal">composite</code>, <code class="literal">filter</code>, and <code class="literal">filters</code>.
Additionally, aggregations only run over the same subset of fields that query works with.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, exists, ids, match, match_all, prefix, range, simple_query_string, term, terms, wildcard })</strong></span>: A query to filter which API keys to return.
If the query parameter is missing, it is equivalent to a <code class="literal">match_all</code> query.
The query supports a subset of query types, including <code class="literal">match_all</code>, <code class="literal">bool</code>, <code class="literal">term</code>, <code class="literal">terms</code>, <code class="literal">match</code>,
<code class="literal">ids</code>, <code class="literal">prefix</code>, <code class="literal">wildcard</code>, <code class="literal">exists</code>, <code class="literal">range</code>, and <code class="literal">simple_query_string</code>.
You can query the following public information associated with an API key: <code class="literal">id</code>, <code class="literal">type</code>, <code class="literal">name</code>,
<code class="literal">creation</code>, <code class="literal">expiration</code>, <code class="literal">invalidated</code>, <code class="literal">invalidation</code>, <code class="literal">username</code>, <code class="literal">realm</code>, and <code class="literal">metadata</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The queryable string values associated with API keys are internally mapped as keywords.
Consequently, if no <code class="literal">analyzer</code> parameter is specified for a <code class="literal">match</code> query, then the provided match query string is interpreted as a single keyword value.
Such a match query is hence equivalent to a <code class="literal">term</code> query.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: The starting document offset.
It must not be negative.
By default, you cannot page through more than 10,000 hits using the <code class="literal">from</code> and <code class="literal">size</code> parameters.
To page through more hits, use the <code class="literal">search_after</code> parameter.
</strong></span> <span class="strong strong"><strong><code class="literal">sort</code> (Optional, string | { _score, _doc, _geo_distance, _script } | string | { _score, _doc, _geo_distance, _script }[])</strong></span>: The sort definition.
Other than <code class="literal">id</code>, all public fields of an API key are eligible for sorting.
In addition, sort can also be applied to the <code class="literal">_doc</code> field to sort by index order.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The number of hits to return.
It must not be negative.
The <code class="literal">size</code> parameter can be set to <code class="literal">0</code>, in which case no API key matches are returned, only the aggregation results.
By default, you cannot page through more than 10,000 hits using the <code class="literal">from</code> and <code class="literal">size</code> parameters.
To page through more hits, use the <code class="literal">search_after</code> parameter.
</strong></span> <span class="strong strong"><strong><code class="literal">search_after</code> (Optional, number | number | string | boolean | null | User-defined value[])</strong></span>: The search after definition.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">with_limited_by</code> (Optional, boolean)</strong></span>: Return the snapshot of the owner user&#8217;s role descriptors associated with the API key.
An API key&#8217;s actual permission is the intersection of its assigned role descriptors and the owner user&#8217;s role descriptors (effectively limited by it).
An API key cannot retrieve any API key’s limited-by role descriptors (including itself) unless it has <code class="literal">manage_api_key</code> or higher privileges.
</strong></span> <span class="strong strong"><strong><code class="literal">with_profile_uid</code> (Optional, boolean)</strong></span>: Determines whether to also retrieve the profile UID for the API key owner principal.
If it exists, the profile UID is returned under the <code class="literal">profile_uid</code> response field for each API key.
<span class="strong strong"><strong>* *<code class="literal">typed_keys</code> (Optional, boolean)</strong></span>: Determines whether aggregation names are prefixed by their respective types in the response.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_query_role"></a>query_role</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Find roles with a query.</p>
<p>Get roles in a paginated manner.
The role management APIs are generally the preferred way to manage roles, rather than using file-based role management.
The query roles API does not retrieve roles that are defined in roles files, nor built-in ones.
You can optionally filter the results with a query.
Also, the results can be paginated and sorted.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-query-role.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.queryRole({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_425"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, exists, ids, match, match_all, prefix, range, simple_query_string, term, terms, wildcard })</strong></span>: A query to filter which roles to return.
If the query parameter is missing, it is equivalent to a <code class="literal">match_all</code> query.
The query supports a subset of query types, including <code class="literal">match_all</code>, <code class="literal">bool</code>, <code class="literal">term</code>, <code class="literal">terms</code>, <code class="literal">match</code>,
<code class="literal">ids</code>, <code class="literal">prefix</code>, <code class="literal">wildcard</code>, <code class="literal">exists</code>, <code class="literal">range</code>, and <code class="literal">simple_query_string</code>.
You can query the following information associated with roles: <code class="literal">name</code>, <code class="literal">description</code>, <code class="literal">metadata</code>,
<code class="literal">applications.application</code>, <code class="literal">applications.privileges</code>, and <code class="literal">applications.resources</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: The starting document offset.
It must not be negative.
By default, you cannot page through more than 10,000 hits using the <code class="literal">from</code> and <code class="literal">size</code> parameters.
To page through more hits, use the <code class="literal">search_after</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, string | { _score, _doc, _geo_distance, _script } | string | { _score, _doc, _geo_distance, _script }[])</strong></span>: The sort definition.
You can sort on <code class="literal">username</code>, <code class="literal">roles</code>, or <code class="literal">enabled</code>.
In addition, sort can also be applied to the <code class="literal">_doc</code> field to sort by index order.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The number of hits to return.
It must not be negative.
By default, you cannot page through more than 10,000 hits using the <code class="literal">from</code> and <code class="literal">size</code> parameters.
To page through more hits, use the <code class="literal">search_after</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">search_after</code> (Optional, number | number | string | boolean | null | User-defined value[])</strong></span>: The search after definition.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_query_user"></a>query_user</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Find users with a query.</p>
<p>Get information for users in a paginated manner.
You can optionally filter the results with a query.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>As opposed to the get user API, built-in users are excluded from the result.
This API is only for native users.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-query-user.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.queryUser({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_426"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { ids, bool, exists, match, match_all, prefix, range, simple_query_string, term, terms, wildcard })</strong></span>: A query to filter which users to return.
If the query parameter is missing, it is equivalent to a <code class="literal">match_all</code> query.
The query supports a subset of query types, including <code class="literal">match_all</code>, <code class="literal">bool</code>, <code class="literal">term</code>, <code class="literal">terms</code>, <code class="literal">match</code>,
<code class="literal">ids</code>, <code class="literal">prefix</code>, <code class="literal">wildcard</code>, <code class="literal">exists</code>, <code class="literal">range</code>, and <code class="literal">simple_query_string</code>.
You can query the following information associated with user: <code class="literal">username</code>, <code class="literal">roles</code>, <code class="literal">enabled</code>, <code class="literal">full_name</code>, and <code class="literal">email</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: The starting document offset.
It must not be negative.
By default, you cannot page through more than 10,000 hits using the <code class="literal">from</code> and <code class="literal">size</code> parameters.
To page through more hits, use the <code class="literal">search_after</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, string | { _score, _doc, _geo_distance, _script } | string | { _score, _doc, _geo_distance, _script }[])</strong></span>: The sort definition.
Fields eligible for sorting are: <code class="literal">username</code>, <code class="literal">roles</code>, <code class="literal">enabled</code>.
In addition, sort can also be applied to the <code class="literal">_doc</code> field to sort by index order.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The number of hits to return.
It must not be negative.
By default, you cannot page through more than 10,000 hits using the <code class="literal">from</code> and <code class="literal">size</code> parameters.
To page through more hits, use the <code class="literal">search_after</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">search_after</code> (Optional, number | number | string | boolean | null | User-defined value[])</strong></span>: The search after definition
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">with_profile_uid</code> (Optional, boolean)</strong></span>: Determines whether to retrieve the user profile UID, if it exists, for the users.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_saml_authenticate"></a>saml_authenticate</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Authenticate SAML.</p>
<p>Submit a SAML response message to Elasticsearch for consumption.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is intended for use by custom web applications other than Kibana.
If you are using Kibana, refer to the documentation for configuring SAML single-sign-on on the Elastic Stack.</p>
</div>
</div>
<p>The SAML message that is submitted can be:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A response to a SAML authentication request that was previously created using the SAML prepare authentication API.
</li>
<li class="listitem">
An unsolicited SAML message in the case of an IdP-initiated single sign-on (SSO) flow.
</li>
</ul>
</div>
<p>In either case, the SAML message needs to be a base64 encoded XML document with a root element of <code class="literal">&lt;Response&gt;</code>.</p>
<p>After successful validation, Elasticsearch responds with an Elasticsearch internal access token and refresh token that can be subsequently used for authentication.
This API endpoint essentially exchanges SAML responses that indicate successful authentication in the IdP for Elasticsearch access and refresh tokens, which can be used for authentication against Elasticsearch.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-saml-authenticate.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.samlAuthenticate({ content, ids })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_427"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">content</code> (string)</strong></span>: The SAML response as it was sent by the user&#8217;s browser, usually a Base64 encoded XML document.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ids</code> (string | string[])</strong></span>: A JSON array with all the valid SAML Request Ids that the caller of the API has for the current user.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm</code> (Optional, string)</strong></span>: The name of the realm that should authenticate the SAML response. Useful in cases where many SAML realms are defined.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_saml_complete_logout"></a>saml_complete_logout</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Logout of SAML completely.</p>
<p>Verifies the logout response sent from the SAML IdP.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is intended for use by custom web applications other than Kibana.
If you are using Kibana, refer to the documentation for configuring SAML single-sign-on on the Elastic Stack.</p>
</div>
</div>
<p>The SAML IdP may send a logout response back to the SP after handling the SP-initiated SAML Single Logout.
This API verifies the response by ensuring the content is relevant and validating its signature.
An empty response is returned if the verification process is successful.
The response can be sent by the IdP with either the HTTP-Redirect or the HTTP-Post binding.
The caller of this API must prepare the request accordingly so that this API can handle either of them.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-saml-complete-logout.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.samlCompleteLogout({ realm, ids })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_428"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm</code> (string)</strong></span>: The name of the SAML realm in Elasticsearch for which the configuration is used to verify the logout response.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ids</code> (string | string[])</strong></span>: A JSON array with all the valid SAML Request Ids that the caller of the API has for the current user.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query_string</code> (Optional, string)</strong></span>: If the SAML IdP sends the logout response with the HTTP-Redirect binding, this field must be set to the query string of the redirect URI.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">content</code> (Optional, string)</strong></span>: If the SAML IdP sends the logout response with the HTTP-Post binding, this field must be set to the value of the SAMLResponse form parameter from the logout response.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_saml_invalidate"></a>saml_invalidate</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Invalidate SAML.</p>
<p>Submit a SAML LogoutRequest message to Elasticsearch for consumption.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is intended for use by custom web applications other than Kibana.
If you are using Kibana, refer to the documentation for configuring SAML single-sign-on on the Elastic Stack.</p>
</div>
</div>
<p>The logout request comes from the SAML IdP during an IdP initiated Single Logout.
The custom web application can use this API to have Elasticsearch process the <code class="literal">LogoutRequest</code>.
After successful validation of the request, Elasticsearch invalidates the access token and refresh token that corresponds to that specific SAML principal and provides a URL that contains a SAML LogoutResponse message.
Thus the user can be redirected back to their IdP.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-saml-invalidate.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.samlInvalidate({ query_string })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_429"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query_string</code> (string)</strong></span>: The query part of the URL that the user was redirected to by the SAML IdP to initiate the Single Logout.
This query should include a single parameter named <code class="literal">SAMLRequest</code> that contains a SAML logout request that is deflated and Base64 encoded.
If the SAML IdP has signed the logout request, the URL should include two extra parameters named <code class="literal">SigAlg</code> and <code class="literal">Signature</code> that contain the algorithm used for the signature and the signature value itself.
In order for Elasticsearch to be able to verify the IdP&#8217;s signature, the value of the <code class="literal">query_string</code> field must be an exact match to the string provided by the browser.
The client application must not attempt to parse or process the string in any way.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">acs</code> (Optional, string)</strong></span>: The Assertion Consumer Service URL that matches the one of the SAML realm in Elasticsearch that should be used. You must specify either this parameter or the <code class="literal">realm</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm</code> (Optional, string)</strong></span>: The name of the SAML realm in Elasticsearch the configuration. You must specify either this parameter or the <code class="literal">acs</code> parameter.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_saml_logout"></a>saml_logout</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Logout of SAML.</p>
<p>Submits a request to invalidate an access token and refresh token.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is intended for use by custom web applications other than Kibana.
If you are using Kibana, refer to the documentation for configuring SAML single-sign-on on the Elastic Stack.</p>
</div>
</div>
<p>This API invalidates the tokens that were generated for a user by the SAML authenticate API.
If the SAML realm in Elasticsearch is configured accordingly and the SAML IdP supports this, the Elasticsearch response contains a URL to redirect the user to the IdP that contains a SAML logout request (starting an SP-initiated SAML Single Logout).</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-saml-logout.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.samlLogout({ token })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_430"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">token</code> (string)</strong></span>: The access token that was returned as a response to calling the SAML authenticate API.
Alternatively, the most recent token that was received after refreshing the original one by using a <code class="literal">refresh_token</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh_token</code> (Optional, string)</strong></span>: The refresh token that was returned as a response to calling the SAML authenticate API.
Alternatively, the most recent refresh token that was received after refreshing the original access token.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_saml_prepare_authentication"></a>saml_prepare_authentication</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Prepare SAML authentication.</p>
<p>Create a SAML authentication request (<code class="literal">&lt;AuthnRequest&gt;</code>) as a URL string based on the configuration of the respective SAML realm in Elasticsearch.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is intended for use by custom web applications other than Kibana.
If you are using Kibana, refer to the documentation for configuring SAML single-sign-on on the Elastic Stack.</p>
</div>
</div>
<p>This API returns a URL pointing to the SAML Identity Provider.
You can use the URL to redirect the browser of the user in order to continue the authentication process.
The URL includes a single parameter named <code class="literal">SAMLRequest</code>, which contains a SAML Authentication request that is deflated and Base64 encoded.
If the configuration dictates that SAML authentication requests should be signed, the URL has two extra parameters named <code class="literal">SigAlg</code> and <code class="literal">Signature</code>.
These parameters contain the algorithm used for the signature and the signature value itself.
It also returns a random string that uniquely identifies this SAML Authentication request.
The caller of this API needs to store this identifier as it needs to be used in a following step of the authentication process.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-saml-prepare-authentication.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.samlPrepareAuthentication({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_431"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">acs</code> (Optional, string)</strong></span>: The Assertion Consumer Service URL that matches the one of the SAML realms in Elasticsearch.
The realm is used to generate the authentication request. You must specify either this parameter or the <code class="literal">realm</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm</code> (Optional, string)</strong></span>: The name of the SAML realm in Elasticsearch for which the configuration is used to generate the authentication request.
You must specify either this parameter or the <code class="literal">acs</code> parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">relay_state</code> (Optional, string)</strong></span>: A string that will be included in the redirect URL that this API returns as the <code class="literal">RelayState</code> query parameter.
If the Authentication Request is signed, this value is used as part of the signature computation.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_saml_service_provider_metadata"></a>saml_service_provider_metadata</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create SAML service provider metadata.</p>
<p>Generate SAML metadata for a SAML 2.0 Service Provider.</p>
<p>The SAML 2.0 specification provides a mechanism for Service Providers to describe their capabilities and configuration using a metadata file.
This API generates Service Provider metadata based on the configuration of a SAML realm in Elasticsearch.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-saml-sp-metadata.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.samlServiceProviderMetadata({ realm_name })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_432"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">realm_name</code> (string)</strong></span>: The name of the SAML realm in Elasticsearch.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_suggest_user_profiles"></a>suggest_user_profiles</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Suggest a user profile.</p>
<p>Get suggestions for user profiles that match specified search criteria.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and Elastic&#8217;s Observability, Enterprise Search, and Elastic Security solutions.
Individual users and external applications should not call this API directly.
Elastic reserves the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-suggest-user-profile.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.suggestUserProfiles({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_433"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string)</strong></span>: A query string used to match name-related fields in user profile documents.
Name-related fields are the user&#8217;s <code class="literal">username</code>, <code class="literal">full_name</code>, and <code class="literal">email</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The number of profiles to return.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">data</code> (Optional, string | string[])</strong></span>: A list of filters for the <code class="literal">data</code> field of the profile document.
To return all content use <code class="literal">data=*</code>.
To return a subset of content, use <code class="literal">data=&lt;key&gt;</code> to retrieve content nested under the specified <code class="literal">&lt;key&gt;</code>.
By default, the API returns no <code class="literal">data</code> content.
It is an error to specify <code class="literal">data</code> as both the query parameter and the request body field.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">hint</code> (Optional, { uids, labels })</strong></span>: Extra search criteria to improve relevance of the suggestion result.
Profiles matching the spcified hint are ranked higher in the response.
Profiles not matching the hint aren&#8217;t excluded from the response as long as the profile matches the <code class="literal">name</code> field query.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_api_key"></a>update_api_key</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update an API key.</p>
<p>Update attributes of an existing API key.
This API supports updates to an API key&#8217;s access scope, expiration, and metadata.</p>
<p>To use this API, you must have at least the <code class="literal">manage_own_api_key</code> cluster privilege.
Users can only update API keys that they created or that were granted to them.
To update another user’s API key, use the <code class="literal">run_as</code> feature to submit a request on behalf of another user.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>It&#8217;s not possible to use an API key as the authentication credential for this API. The owner user’s credentials are required.</p>
</div>
</div>
<p>Use this API to update API keys created by the create API key or grant API Key APIs.
If you need to apply the same update to many API keys, you can use the bulk update API keys API to reduce overhead.
It&#8217;s not possible to update expired API keys or API keys that have been invalidated by the invalidate API key API.</p>
<p>The access scope of an API key is derived from the <code class="literal">role_descriptors</code> you specify in the request and a snapshot of the owner user&#8217;s permissions at the time of the request.
The snapshot of the owner&#8217;s permissions is updated automatically on every call.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you don&#8217;t specify <code class="literal">role_descriptors</code> in the request, a call to this API might still change the API key&#8217;s access scope.
This change can occur if the owner user&#8217;s permissions have changed since the API key was created or last modified.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-update-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.updateApiKey({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_434"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The ID of the API key to update.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">role_descriptors</code> (Optional, Record&lt;string, { cluster, indices, remote_indices, remote_cluster, global, applications, metadata, run_as, description, restriction, transient_metadata }&gt;)</strong></span>: The role descriptors to assign to this API key.
The API key&#8217;s effective permissions are an intersection of its assigned privileges and the point in time snapshot of permissions of the owner user.
You can assign new privileges by specifying them in this parameter.
To remove assigned privileges, you can supply an empty <code class="literal">role_descriptors</code> parameter, that is to say, an empty object <code class="literal">{}</code>.
If an API key has no assigned privileges, it inherits the owner user&#8217;s full permissions.
The snapshot of the owner&#8217;s permissions is always updated, whether you supply the <code class="literal">role_descriptors</code> parameter or not.
The structure of a role descriptor is the same as the request for the create API keys API.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Arbitrary metadata that you want to associate with the API key.
It supports a nested data structure.
Within the metadata object, keys beginning with <code class="literal">_</code> are reserved for system usage.
When specified, this value fully replaces the metadata previously associated with the API key.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expiration</code> (Optional, string | -1 | 0)</strong></span>: The expiration time for the API key.
By default, API keys never expire.
This property can be omitted to leave the expiration unchanged.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_cross_cluster_api_key"></a>update_cross_cluster_api_key</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update a cross-cluster API key.</p>
<p>Update the attributes of an existing cross-cluster API key, which is used for API key based remote cluster access.</p>
<p>To use this API, you must have at least the <code class="literal">manage_security</code> cluster privilege.
Users can only update API keys that they created.
To update another user&#8217;s API key, use the <code class="literal">run_as</code> feature to submit a request on behalf of another user.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>It&#8217;s not possible to use an API key as the authentication credential for this API.
To update an API key, the owner user&#8217;s credentials are required.</p>
</div>
</div>
<p>It&#8217;s not possible to update expired API keys, or API keys that have been invalidated by the invalidate API key API.</p>
<p>This API supports updates to an API key&#8217;s access scope, metadata, and expiration.
The owner user&#8217;s information, such as the <code class="literal">username</code> and <code class="literal">realm</code>, is also updated automatically on every call.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API cannot update REST API keys, which should be updated by either the update API key or bulk update API keys API.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-update-cross-cluster-api-key.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.updateCrossClusterApiKey({ id, access })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_435"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The ID of the cross-cluster API key to update.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">access</code> ({ replication, search })</strong></span>: The access to be granted to this API key.
The access is composed of permissions for cross cluster search and cross cluster replication.
At least one of them must be specified.
When specified, the new access assignment fully replaces the previously assigned access.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">expiration</code> (Optional, string | -1 | 0)</strong></span>: The expiration time for the API key.
By default, API keys never expire. This property can be omitted to leave the value unchanged.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Arbitrary metadata that you want to associate with the API key.
It supports nested data structure.
Within the metadata object, keys beginning with <code class="literal">_</code> are reserved for system usage.
When specified, this information fully replaces metadata previously associated with the API key.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_settings"></a>update_settings</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update security index settings.</p>
<p>Update the user-configurable settings for the security internal index (<code class="literal">.security</code> and associated indices). Only a subset of settings are allowed to be modified. This includes <code class="literal">index.auto_expand_replicas</code> and <code class="literal">index.number_of_replicas</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If <code class="literal">index.auto_expand_replicas</code> is set, <code class="literal">index.number_of_replicas</code> will be ignored during updates.</p>
</div>
</div>
<p>If a specific index is not in use on the system and settings are provided for it, the request will be rejected.
This API does not yet support configuring the settings for indices before they are in use.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-update-settings.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.updateSettings({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_436"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">security</code> (Optional, { index })</strong></span>: Settings for the index used for most security configuration, including native realm users and roles configured with the API.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">security-profile</code> (Optional, { index })</strong></span>: Settings for the index used to store profile information.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">security-tokens</code> (Optional, { index })</strong></span>: Settings for the index used to store tokens.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_user_profile_data"></a>update_user_profile_data</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update user profile data.</p>
<p>Update specific data for the user profile that is associated with a unique ID.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and Elastic&#8217;s Observability, Enterprise Search, and Elastic Security solutions.
Individual users and external applications should not call this API directly.
Elastic reserves the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p>To use this API, you must have one of the following privileges:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">manage_user_profile</code> cluster privilege.
</li>
<li class="listitem">
The <code class="literal">update_profile_data</code> global privilege for the namespaces that are referenced in the request.
</li>
</ul>
</div>
<p>This API updates the <code class="literal">labels</code> and <code class="literal">data</code> fields of an existing user profile document with JSON objects.
New keys and their values are added to the profile document and conflicting keys are replaced by data that&#8217;s included in the request.</p>
<p>For both labels and data, content is namespaced by the top-level fields.
The <code class="literal">update_profile_data</code> global privilege grants privileges for updating only the allowed namespaces.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-update-user-profile-data.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.security.updateUserProfileData({ uid })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_437"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">uid</code> (string)</strong></span>: A unique identifier for the user profile.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">labels</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Searchable data that you want to associate with the user profile.
This field supports a nested data structure.
Within the labels object, top-level keys cannot begin with an underscore (<code class="literal">_</code>) or contain a period (<code class="literal">.</code>).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">data</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Non-searchable data that you want to associate with the user profile.
This field supports a nested data structure.
Within the <code class="literal">data</code> object, top-level keys cannot begin with an underscore (<code class="literal">_</code>) or contain a period (<code class="literal">.</code>).
The data object is not searchable, but can be retrieved with the get user profile API.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">if_seq_no</code> (Optional, number)</strong></span>: Only perform the operation if the document has this sequence number.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">if_primary_term</code> (Optional, number)</strong></span>: Only perform the operation if the document has this primary term.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">refresh</code> (Optional, Enum(true | false | "wait_for"))</strong></span>: If <em>true</em>, Elasticsearch refreshes the affected shards to make this operation
visible to search.
If <em>wait_for</em>, it waits for a refresh to make this operation visible to search.
If <em>false</em>, nothing is done with refreshes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_shutdown"></a>shutdown</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_node"></a>delete_node</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Cancel node shutdown preparations.
Remove a node from the shutdown list so it can resume normal operations.
You must explicitly clear the shutdown request when a node rejoins the cluster or when a node has permanently left the cluster.
Shutdown requests are never removed automatically by Elasticsearch.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is designed for indirect use by Elastic Cloud, Elastic Cloud Enterprise, and Elastic Cloud on Kubernetes.
Direct use is not supported.</p>
</div>
</div>
<p>If the operator privileges feature is enabled, you must be an operator to use this API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-shutdown.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.shutdown.deleteNode({ node_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_438"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (string)</strong></span>: The node id of node to be removed from the shutdown state
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, Enum("nanos" | "micros" | "ms" | "s" | "m" | "h" | "d"))</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, Enum("nanos" | "micros" | "ms" | "s" | "m" | "h" | "d"))</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_node"></a>get_node</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the shutdown status.</p>
<p>Get information about nodes that are ready to be shut down, have shut down preparations still in progress, or have stalled.
The API returns status information for each part of the shut down process.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is designed for indirect use by Elasticsearch Service, Elastic Cloud Enterprise, and Elastic Cloud on Kubernetes. Direct use is not supported.</p>
</div>
</div>
<p>If the operator privileges feature is enabled, you must be an operator to use this API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-shutdown.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.shutdown.getNode({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_439"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (Optional, string | string[])</strong></span>: Which node for which to retrieve the shutdown status
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, Enum("nanos" | "micros" | "ms" | "s" | "m" | "h" | "d"))</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_node"></a>put_node</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Prepare a node to be shut down.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is designed for indirect use by Elastic Cloud, Elastic Cloud Enterprise, and Elastic Cloud on Kubernetes. Direct use is not supported.</p>
</div>
</div>
<p>If you specify a node that is offline, it will be prepared for shut down when it rejoins the cluster.</p>
<p>If the operator privileges feature is enabled, you must be an operator to use this API.</p>
<p>The API migrates ongoing tasks and index shards to other nodes as needed to prepare a node to be restarted or shut down and removed from the cluster.
This ensures that Elasticsearch can be stopped safely with minimal disruption to the cluster.</p>
<p>You must specify the type of shutdown: <code class="literal">restart</code>, <code class="literal">remove</code>, or <code class="literal">replace</code>.
If a node is already being prepared for shutdown, you can use this API to change the shutdown type.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API does NOT terminate the Elasticsearch process.
Monitor the node shutdown status to determine when it is safe to stop Elasticsearch.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-shutdown.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.shutdown.putNode({ node_id, type, reason })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_440"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">node_id</code> (string)</strong></span>: The node identifier.
This parameter is not validated against the cluster&#8217;s active nodes.
This enables you to register a node for shut down while it is offline.
No error is thrown if you specify an invalid node ID.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">type</code> (Enum("restart" | "remove" | "replace"))</strong></span>: Valid values are restart, remove, or replace.
Use restart when you need to temporarily shut down a node to perform an upgrade, make configuration changes, or perform other maintenance.
Because the node is expected to rejoin the cluster, data is not migrated off of the node.
Use remove when you need to permanently remove a node from the cluster.
The node is not marked ready for shutdown until data is migrated off of the node Use replace to do a 1:1 replacement of a node with another node.
Certain allocation decisions will be ignored (such as disk watermarks) in the interest of true replacement of the source node with the target node.
During a replace-type shutdown, rollover and index creation may result in unassigned shards, and shrink may fail until the replacement is complete.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">reason</code> (string)</strong></span>: A human-readable reason that the node is being shut down.
This field provides information for other cluster operators; it does not affect the shut down process.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allocation_delay</code> (Optional, string)</strong></span>: Only valid if type is restart.
Controls how long Elasticsearch will wait for the node to restart and join the cluster before reassigning its shards to other nodes.
This works the same as delaying allocation with the index.unassigned.node_left.delayed_timeout setting.
If you specify both a restart allocation delay and an index-level allocation delay, the longer of the two is used.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">target_node_name</code> (Optional, string)</strong></span>: Only valid if type is replace.
Specifies the name of the node that is replacing the node being shut down.
Shards from the shut down node are only allowed to be allocated to the target node, and no other data will be allocated to the target node.
During relocation of data certain allocation rules are ignored, such as disk watermarks or user attribute filtering rules.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, Enum("nanos" | "micros" | "ms" | "s" | "m" | "h" | "d"))</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, Enum("nanos" | "micros" | "ms" | "s" | "m" | "h" | "d"))</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_simulate_2"></a>simulate</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_ingest_2"></a>ingest</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Simulate data ingestion.
Run ingest pipelines against a set of provided documents, optionally with substitute pipeline definitions, to simulate ingesting data into an index.</p>
<p>This API is meant to be used for troubleshooting or pipeline development, as it does not actually index any data into Elasticsearch.</p>
<p>The API runs the default and final pipeline for that index against a set of documents provided in the body of the request.
If a pipeline contains a reroute processor, it follows that reroute processor to the new index, running that index&#8217;s pipelines as well the same way that a non-simulated ingest would.
No data is indexed into Elasticsearch.
Instead, the transformed document is returned, along with the list of pipelines that have been run and the name of the index where the document would have been indexed if this were not a simulation.
The transformed document is validated against the mappings that would apply to this index, and any validation error is reported in the result.</p>
<p>This API differs from the simulate pipeline API in that you specify a single pipeline for that API, and it runs only that one pipeline.
The simulate pipeline API is more useful for developing a single pipeline, while the simulate ingest API is more useful for troubleshooting the interaction of the various pipelines that get applied when ingesting into an index.</p>
<p>By default, the pipeline definitions that are currently in the system are used.
However, you can supply substitute pipeline definitions in the body of the request.
These will be used in place of the pipeline definitions that are already in the system. This can be used to replace existing pipeline definitions or to create new ones. The pipeline substitutions are used only within this request.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/simulate-ingest-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.simulate.ingest({ docs })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_441"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">docs</code> ({ _id, _index, _source }[])</strong></span>: Sample documents to test in the pipeline.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (Optional, string)</strong></span>: The index to simulate ingesting into.
This value can be overridden by specifying an index on each document.
If you specify this parameter in the request path, it is used for any documents that do not explicitly specify an index argument.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">component_template_substitutions</code> (Optional, Record&lt;string, { template, version, _meta, deprecated }&gt;)</strong></span>: A map of component template names to substitute component template definition objects.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_template_substitutions</code> (Optional, Record&lt;string, { index_patterns, composed_of, template, version, priority, _meta, allow_auto_create, data_stream, deprecated, ignore_missing_component_templates }&gt;)</strong></span>: A map of index template names to substitute index template definition objects.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">mapping_addition</code> (Optional, { all_field, date_detection, dynamic, dynamic_date_formats, dynamic_templates, _field_names, index_field, _meta, numeric_detection, properties, _routing, _size, _source, runtime, enabled, subobjects, _data_stream_timestamp })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">pipeline_substitutions</code> (Optional, Record&lt;string, { description, on_failure, processors, version, deprecated, _meta }&gt;)</strong></span>: Pipelines to test.
If you don’t specify the <code class="literal">pipeline</code> request path parameter, this parameter is required.
If you specify both this and the request path parameter, the API only uses the request path parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">pipeline</code> (Optional, string)</strong></span>: The pipeline to use as the default pipeline.
This value can be used to override the default pipeline of the index.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_slm"></a>slm</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_lifecycle_2"></a>delete_lifecycle</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a policy.
Delete a snapshot lifecycle policy definition.
This operation prevents any future snapshots from being taken but does not cancel in-progress snapshots or remove previously-taken snapshots.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-delete-policy.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.deleteLifecycle({ policy_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_442"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">policy_id</code> (string)</strong></span>: The id of the snapshot lifecycle policy to remove
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_execute_lifecycle"></a>execute_lifecycle</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Run a policy.
Immediately create a snapshot according to the snapshot lifecycle policy without waiting for the scheduled time.
The snapshot policy is normally applied according to its schedule, but you might want to manually run a policy before performing an upgrade or other maintenance.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-execute-lifecycle.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.executeLifecycle({ policy_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_443"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">policy_id</code> (string)</strong></span>: The id of the snapshot lifecycle policy to be executed
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_execute_retention"></a>execute_retention</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Run a retention policy.
Manually apply the retention policy to force immediate removal of snapshots that are expired according to the snapshot lifecycle policy retention rules.
The retention policy is normally applied according to its schedule.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-execute-retention.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.executeRetention({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_444"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_lifecycle_2"></a>get_lifecycle</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get policy information.
Get snapshot lifecycle policy definitions and information about the latest snapshot attempts.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-get-policy.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.getLifecycle({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_445"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">policy_id</code> (Optional, string | string[])</strong></span>: List of snapshot lifecycle policies to retrieve
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_stats"></a>get_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get snapshot lifecycle management statistics.
Get global and policy-level statistics about actions taken by snapshot lifecycle management.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-get-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.getStats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_446"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_status_3"></a>get_status</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the snapshot lifecycle management status.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-get-status.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.getStatus({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_447"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_lifecycle_2"></a>put_lifecycle</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a policy.
Create or update a snapshot lifecycle policy.
If the policy already exists, this request increments the policy version.
Only the latest version of a policy is stored.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-put-policy.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.putLifecycle({ policy_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_448"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">policy_id</code> (string)</strong></span>: The identifier for the snapshot lifecycle policy you want to create or update.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">config</code> (Optional, { ignore_unavailable, indices, include_global_state, feature_states, metadata, partial })</strong></span>: Configuration for each snapshot created by the policy.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">name</code> (Optional, string)</strong></span>: Name automatically assigned to each snapshot created by the policy. Date math is supported. To prevent conflicting snapshot names, a UUID is automatically appended to each snapshot name.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (Optional, string)</strong></span>: Repository used to store snapshots created by this policy. This repository must exist prior to the policy’s creation. You can create a repository using the snapshot repository API.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">retention</code> (Optional, { expire_after, max_count, min_count })</strong></span>: Retention rules used to retain and delete snapshots created by the policy.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">schedule</code> (Optional, string)</strong></span>: Periodic or absolute schedule at which the policy creates snapshots. SLM applies schedule changes immediately.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_start_2"></a>start</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start snapshot lifecycle management.
Snapshot lifecycle management (SLM) starts automatically when a cluster is formed.
Manually starting SLM is necessary only if it has been stopped using the stop SLM API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-start.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.start({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_449"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stop_2"></a>stop</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Stop snapshot lifecycle management.
Stop all snapshot lifecycle management (SLM) operations and the SLM plugin.
This API is useful when you are performing maintenance on a cluster and need to prevent SLM from performing any actions on your data streams or indices.
Stopping SLM does not stop any snapshots that are in progress.
You can manually trigger snapshots with the run snapshot lifecycle policy API even if SLM is stopped.</p>
<p>The API returns a response as soon as the request is acknowledged, but the plugin might continue to run until in-progress operations complete and it can be safely stopped.
Use the get snapshot lifecycle management status API to see if SLM is running.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/slm-api-stop.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.slm.stop({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_450"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_snapshot"></a>snapshot</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_cleanup_repository"></a>cleanup_repository</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clean up the snapshot repository.
Trigger the review of the contents of a snapshot repository and delete any stale data not referenced by existing snapshots.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/clean-up-snapshot-repo-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.cleanupRepository({ repository })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_451"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: Snapshot repository to clean up.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_clone_2"></a>clone</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clone a snapshot.
Clone part of all of a snapshot into another snapshot in the same repository.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/clone-snapshot-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.clone({ repository, snapshot, target_snapshot, indices })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_452"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: A repository name
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot</code> (string)</strong></span>: The name of the snapshot to clone from
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">target_snapshot</code> (string)</strong></span>: The name of the cloned snapshot to create
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices</code> (string)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_create_3"></a>create</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a snapshot.
Take a snapshot of a cluster or of data streams and indices.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/create-snapshot-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.create({ repository, snapshot })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_453"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: Repository for the snapshot.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot</code> (string)</strong></span>: Name of the snapshot. Must be unique in the repository.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the request ignores data streams and indices in <code class="literal">indices</code> that are missing or closed. If <code class="literal">false</code>, the request returns an error for any data stream or index that is missing or closed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_global_state</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the current cluster state is included in the snapshot. The cluster state includes persistent cluster settings, composable index templates, legacy index templates, ingest pipelines, and ILM policies. It also includes data stored in system indices, such as Watches and task records (configurable via <code class="literal">feature_states</code>).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices</code> (Optional, string | string[])</strong></span>: Data streams and indices to include in the snapshot. Supports multi-target syntax. Includes all data streams and indices by default.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">feature_states</code> (Optional, string[])</strong></span>: Feature states to include in the snapshot. Each feature state includes one or more system indices containing related data. You can view a list of eligible features using the get features API. If <code class="literal">include_global_state</code> is <code class="literal">true</code>, all current feature states are included by default. If <code class="literal">include_global_state</code> is <code class="literal">false</code>, no feature states are included by default.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Optional metadata for the snapshot. May have any contents. Must be less than 1024 bytes. This map is not automatically generated by Elasticsearch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">partial</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, allows restoring a partial snapshot of indices with unavailable shards. Only shards that were successfully included in the snapshot will be restored. All missing shards will be recreated as empty. If <code class="literal">false</code>, the entire restore operation will fail if one or more indices included in the snapshot do not have all primary shards available.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the request returns a response when the snapshot is complete. If <code class="literal">false</code>, the request returns a response when the snapshot initializes.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_create_repository"></a>create_repository</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a snapshot repository.
IMPORTANT: If you are migrating searchable snapshots, the repository name must be identical in the source and destination clusters.
To register a snapshot repository, the cluster&#8217;s global metadata must be writeable.
Ensure there are no cluster blocks (for example, <code class="literal">cluster.blocks.read_only</code> and <code class="literal">clsuter.blocks.read_only_allow_delete</code> settings) that prevent write access.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/modules-snapshots.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.createRepository({ repository })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_454"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: A repository name
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">verify</code> (Optional, boolean)</strong></span>: Whether to verify the repository after creation
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_9"></a>delete</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete snapshots.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-snapshot-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.delete({ repository, snapshot })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_455"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: A repository name
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot</code> (string)</strong></span>: A list of snapshot names
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_repository"></a>delete_repository</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete snapshot repositories.
When a repository is unregistered, Elasticsearch removes only the reference to the location where the repository is storing the snapshots.
The snapshots themselves are left untouched and in place.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-snapshot-repo-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.deleteRepository({ repository })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_456"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string | string[])</strong></span>: Name of the snapshot repository to unregister. Wildcard (<code class="literal">*</code>) patterns are supported.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_9"></a>get</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get snapshot information.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-snapshot-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.get({ repository, snapshot })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_457"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: List of snapshot repository names used to limit the request. Wildcard (*) expressions are supported.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">snapshot</code> (string | string[])</strong></span>: List of snapshot names to retrieve. Also accepts wildcards (*).</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
To get information about all snapshots in a registered repository, use a wildcard (*) or _all.
</li>
<li class="listitem">
To get information about any snapshots that are currently running, use _current.
</li>
</ul>
</div>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: If false, the request returns an error for any snapshots that are unavailable.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">verbose</code> (Optional, boolean)</strong></span>: If true, returns additional information about each snapshot such as the version of Elasticsearch which took the snapshot, the start and end times of the snapshot, and the number of shards snapshotted.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_details</code> (Optional, boolean)</strong></span>: If true, returns additional information about each index in the snapshot comprising the number of shards in the index, the total size of the index in bytes, and the maximum number of segments per shard in the index. Defaults to false, meaning that this information is omitted.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_names</code> (Optional, boolean)</strong></span>: If true, returns the name of each index in each snapshot.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_repository</code> (Optional, boolean)</strong></span>: If true, returns the repository name in each snapshot.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, Enum("start_time" | "duration" | "name" | "index_count" | "repository" | "shard_count" | "failed_shard_count"))</strong></span>: Allows setting a sort order for the result. Defaults to start_time, i.e. sorting by snapshot start time stamp.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Maximum number of snapshots to return. Defaults to 0 which means return all that match the request without limit.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">order</code> (Optional, Enum("asc" | "desc"))</strong></span>: Sort order. Valid values are asc for ascending and desc for descending order. Defaults to asc, meaning ascending order.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">after</code> (Optional, string)</strong></span>: Offset identifier to start pagination from as returned by the next field in the response body.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">offset</code> (Optional, number)</strong></span>: Numeric offset to start pagination from based on the snapshots matching this request. Using a non-zero value for this parameter is mutually exclusive with using the after parameter. Defaults to 0.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from_sort_value</code> (Optional, string)</strong></span>: Value of the current sort column at which to start retrieval. Can either be a string snapshot- or repository name when sorting by snapshot or repository name, a millisecond time value or a number when sorting by index- or shard count.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">slm_policy_filter</code> (Optional, string)</strong></span>: Filter snapshots by a list of SLM policy names that snapshots belong to. Also accepts wildcards (*) and combinations of wildcards followed by exclude patterns starting with -. To include snapshots not created by an SLM policy you can use the special pattern _none that will match all snapshots without an SLM policy.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_repository"></a>get_repository</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get snapshot repository information.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-snapshot-repo-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.getRepository({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_458"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (Optional, string | string[])</strong></span>: A list of repository names
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">local</code> (Optional, boolean)</strong></span>: Return local information, do not retrieve the state from master node (default: false)
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_repository_analyze"></a>repository_analyze</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Analyze a snapshot repository.
Analyze the performance characteristics and any incorrect behaviour found in a repository.</p>
<p>The response exposes implementation details of the analysis which may change from version to version.
The response body format is therefore not considered stable and may be different in newer versions.</p>
<p>There are a large number of third-party storage systems available, not all of which are suitable for use as a snapshot repository by Elasticsearch.
Some storage systems behave incorrectly, or perform poorly, especially when accessed concurrently by multiple clients as the nodes of an Elasticsearch cluster do. This API performs a collection of read and write operations on your repository which are designed to detect incorrect behaviour and to measure the performance characteristics of your storage system.</p>
<p>The default values for the parameters are deliberately low to reduce the impact of running an analysis inadvertently and to provide a sensible starting point for your investigations.
Run your first analysis with the default parameter values to check for simple problems.
If successful, run a sequence of increasingly large analyses until you encounter a failure or you reach a <code class="literal">blob_count</code> of at least <code class="literal">2000</code>, a <code class="literal">max_blob_size</code> of at least <code class="literal">2gb</code>, a <code class="literal">max_total_data_size</code> of at least <code class="literal">1tb</code>, and a <code class="literal">register_operation_count</code> of at least <code class="literal">100</code>.
Always specify a generous timeout, possibly <code class="literal">1h</code> or longer, to allow time for each analysis to run to completion.
Perform the analyses using a multi-node cluster of a similar size to your production cluster so that it can detect any problems that only arise when the repository is accessed by many nodes at once.</p>
<p>If the analysis fails, Elasticsearch detected that your repository behaved unexpectedly.
This usually means you are using a third-party storage system with an incorrect or incompatible implementation of the API it claims to support.
If so, this storage system is not suitable for use as a snapshot repository.
You will need to work with the supplier of your storage system to address the incompatibilities that Elasticsearch detects.</p>
<p>If the analysis is successful, the API returns details of the testing process, optionally including how long each operation took.
You can use this information to determine the performance of your storage system.
If any operation fails or returns an incorrect result, the API returns an error.
If the API returns an error, it may not have removed all the data it wrote to the repository.
The error will indicate the location of any leftover data and this path is also recorded in the Elasticsearch logs.
You should verify that this location has been cleaned up correctly.
If there is still leftover data at the specified location, you should manually remove it.</p>
<p>If the connection from your client to Elasticsearch is closed while the client is waiting for the result of the analysis, the test is cancelled.
Some clients are configured to close their connection if no response is received within a certain timeout.
An analysis takes a long time to complete so you might need to relax any such client-side timeouts.
On cancellation the analysis attempts to clean up the data it was writing, but it may not be able to remove it all.
The path to the leftover data is recorded in the Elasticsearch logs.
You should verify that this location has been cleaned up correctly.
If there is still leftover data at the specified location, you should manually remove it.</p>
<p>If the analysis is successful then it detected no incorrect behaviour, but this does not mean that correct behaviour is guaranteed.
The analysis attempts to detect common bugs but it does not offer 100% coverage.
Additionally, it does not test the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Your repository must perform durable writes. Once a blob has been written it must remain in place until it is deleted, even after a power loss or similar disaster.
</li>
<li class="listitem">
Your repository must not suffer from silent data corruption. Once a blob has been written, its contents must remain unchanged until it is deliberately modified or deleted.
</li>
<li class="listitem">
Your repository must behave correctly even if connectivity from the cluster is disrupted. Reads and writes may fail in this case, but they must not return incorrect results.
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>An analysis writes a substantial amount of data to your repository and then reads it back again.
This consumes bandwidth on the network between the cluster and the repository, and storage space and I/O bandwidth on the repository itself.
You must ensure this load does not affect other users of these systems.
Analyses respect the repository settings <code class="literal">max_snapshot_bytes_per_sec</code> and <code class="literal">max_restore_bytes_per_sec</code> if available and the cluster setting <code class="literal">indices.recovery.max_bytes_per_sec</code> which you can use to limit the bandwidth they consume.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API is intended for exploratory use by humans. You should expect the request parameters and the response format to vary in future versions.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Different versions of Elasticsearch may perform different checks for repository compatibility, with newer versions typically being stricter than older ones.
A storage system that passes repository analysis with one version of Elasticsearch may fail with a different version.
This indicates it behaves incorrectly in ways that the former version did not detect.
You must work with the supplier of your storage system to address the incompatibilities detected by the repository analysis API in any version of Elasticsearch.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API may not work correctly in a mixed-version cluster.</p>
</div>
</div>
<p><span class="strong strong"><strong>Implementation details</strong></span></p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This section of documentation describes how the repository analysis API works in this version of Elasticsearch, but you should expect the implementation to vary between versions. The request parameters and response format depend on details of the implementation so may also be different in newer versions.</p>
</div>
</div>
<p>The analysis comprises a number of blob-level tasks, as set by the <code class="literal">blob_count</code> parameter and a number of compare-and-exchange operations on linearizable registers, as set by the <code class="literal">register_operation_count</code> parameter.
These tasks are distributed over the data and master-eligible nodes in the cluster for execution.</p>
<p>For most blob-level tasks, the executing node first writes a blob to the repository and then instructs some of the other nodes in the cluster to attempt to read the data it just wrote.
The size of the blob is chosen randomly, according to the <code class="literal">max_blob_size</code> and <code class="literal">max_total_data_size</code> parameters.
If any of these reads fails then the repository does not implement the necessary read-after-write semantics that Elasticsearch requires.</p>
<p>For some blob-level tasks, the executing node will instruct some of its peers to attempt to read the data before the writing process completes.
These reads are permitted to fail, but must not return partial data.
If any read returns partial data then the repository does not implement the necessary atomicity semantics that Elasticsearch requires.</p>
<p>For some blob-level tasks, the executing node will overwrite the blob while its peers are reading it.
In this case the data read may come from either the original or the overwritten blob, but the read operation must not return partial data or a mix of data from the two blobs.
If any of these reads returns partial data or a mix of the two blobs then the repository does not implement the necessary atomicity semantics that Elasticsearch requires for overwrites.</p>
<p>The executing node will use a variety of different methods to write the blob.
For instance, where applicable, it will use both single-part and multi-part uploads.
Similarly, the reading nodes will use a variety of different methods to read the data back again.
For instance they may read the entire blob from start to end or may read only a subset of the data.</p>
<p>For some blob-level tasks, the executing node will cancel the write before it is complete.
In this case, it still instructs some of the other nodes in the cluster to attempt to read the blob but all of these reads must fail to find the blob.</p>
<p>Linearizable registers are special blobs that Elasticsearch manipulates using an atomic compare-and-exchange operation.
This operation ensures correct and strongly-consistent behavior even when the blob is accessed by multiple nodes at the same time.
The detailed implementation of the compare-and-exchange operation on linearizable registers varies by repository type.
Repository analysis verifies that that uncontended compare-and-exchange operations on a linearizable register blob always succeed.
Repository analysis also verifies that contended operations either succeed or report the contention but do not return incorrect results.
If an operation fails due to contention, Elasticsearch retries the operation until it succeeds.
Most of the compare-and-exchange operations performed by repository analysis atomically increment a counter which is represented as an 8-byte blob.
Some operations also verify the behavior on small blobs with sizes other than 8 bytes.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/repo-analysis-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.repositoryAnalyze({ repository })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_459"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: The name of the repository.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">blob_count</code> (Optional, number)</strong></span>: The total number of blobs to write to the repository during the test.
For realistic experiments, you should set it to at least <code class="literal">2000</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">concurrency</code> (Optional, number)</strong></span>: The number of operations to run concurrently during the test.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">detailed</code> (Optional, boolean)</strong></span>: Indicates whether to return detailed results, including timing information for every operation performed during the analysis.
If false, it returns only a summary of the analysis.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">early_read_node_count</code> (Optional, number)</strong></span>: The number of nodes on which to perform an early read operation while writing each blob.
Early read operations are only rarely performed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_blob_size</code> (Optional, number | string)</strong></span>: The maximum size of a blob to be written during the test.
For realistic experiments, you should set it to at least <code class="literal">2gb</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">max_total_data_size</code> (Optional, number | string)</strong></span>: An upper limit on the total size of all the blobs written during the test.
For realistic experiments, you should set it to at least <code class="literal">1tb</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rare_action_probability</code> (Optional, number)</strong></span>: The probability of performing a rare action such as an early read, an overwrite, or an aborted write on each blob.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rarely_abort_writes</code> (Optional, boolean)</strong></span>: Indicates whether to rarely cancel writes before they complete.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">read_node_count</code> (Optional, number)</strong></span>: The number of nodes on which to read a blob after writing.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">register_operation_count</code> (Optional, number)</strong></span>: The minimum number of linearizable register operations to perform in total.
For realistic experiments, you should set it to at least <code class="literal">100</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">seed</code> (Optional, number)</strong></span>: The seed for the pseudo-random number generator used to generate the list of operations performed during the test.
To repeat the same set of operations in multiple experiments, use the same seed in each experiment.
Note that the operations are performed concurrently so might not always happen in the same order on each run.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period of time to wait for the test to complete.
If no response is received before the timeout expires, the test is cancelled and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_restore"></a>restore</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Restore a snapshot.
Restore a snapshot of a cluster or data streams and indices.</p>
<p>You can restore a snapshot only to a running cluster with an elected master node.
The snapshot repository must be registered and available to the cluster.
The snapshot and cluster versions must be compatible.</p>
<p>To restore a snapshot, the cluster&#8217;s global metadata must be writable. Ensure there are&#8217;t any cluster blocks that prevent writes. The restore operation ignores index blocks.</p>
<p>Before you restore a data stream, ensure the cluster contains a matching index template with data streams enabled. To check, use the index management feature in Kibana or the get index template API:</p>
<pre class="screen">GET _index_template/*?filter_path=index_templates.name,index_templates.index_template.index_patterns,index_templates.index_template.data_stream</pre>
<p>If no such template exists, you can create one or restore a cluster state that contains one. Without a matching index template, a data stream can&#8217;t roll over or create backing indices.</p>
<p>If your snapshot contains data from App Search or Workplace Search, you must restore the Enterprise Search encryption key before you restore the snapshot.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/restore-snapshot-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.restore({ repository, snapshot })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_460"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: A repository name
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot</code> (string)</strong></span>: A snapshot name
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">feature_states</code> (Optional, string[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_index_settings</code> (Optional, string[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_aliases</code> (Optional, boolean)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">include_global_state</code> (Optional, boolean)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_settings</code> (Optional, { index, mode, routing_path, soft_deletes, sort, number_of_shards, number_of_replicas, number_of_routing_shards, check_on_startup, codec, routing_partition_size, load_fixed_bitset_filters_eagerly, hidden, auto_expand_replicas, merge, search, refresh_interval, max_result_window, max_inner_result_window, max_rescore_window, max_docvalue_fields_search, max_script_fields, max_ngram_diff, max_shingle_diff, blocks, max_refresh_listeners, analyze, highlight, max_terms_count, max_regex_length, routing, gc_deletes, default_pipeline, final_pipeline, lifecycle, provided_name, creation_date, creation_date_string, uuid, version, verified_before_close, format, max_slices_per_scroll, translog, query_string, priority, top_metrics_max_size, analysis, settings, time_series, queries, similarity, mapping, indexing.slowlog, indexing_pressure, store })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">indices</code> (Optional, string | string[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">partial</code> (Optional, boolean)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rename_pattern</code> (Optional, string)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rename_replacement</code> (Optional, string)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: Should this request wait until the operation has completed before returning
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_status_2"></a>status</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the snapshot status.
Get a detailed description of the current state for each shard participating in the snapshot.
Note that this API should be used only to obtain detailed shard-level information for ongoing snapshots.
If this detail is not needed or you want to obtain information about one or more existing snapshots, use the get snapshot API.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Using the API to return the status of any snapshots other than currently running snapshots can be expensive.
The API requires a read from the repository for each shard in each snapshot.
For example, if you have 100 snapshots with 1,000 shards each, an API request that includes all snapshots will require 100,000 reads (100 snapshots x 1,000 shards).</p>
</div>
</div>
<p>Depending on the latency of your storage, such requests can take an extremely long time to return results.
These requests can also tax machine resources and, when using cloud storage, incur high processing costs.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-snapshot-status-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.status({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_461"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (Optional, string)</strong></span>: A repository name
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">snapshot</code> (Optional, string | string[])</strong></span>: A list of snapshot names
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_unavailable</code> (Optional, boolean)</strong></span>: Whether to ignore unavailable snapshots, defaults to false which means a SnapshotMissingException is thrown
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_verify_repository"></a>verify_repository</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Verify a snapshot repository.
Check for common misconfigurations in a snapshot repository.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/verify-snapshot-repo-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.snapshot.verifyRepository({ repository })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_462"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">repository</code> (string)</strong></span>: A repository name
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout for connection to master node
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Explicit operation timeout
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_sql"></a>sql</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_clear_cursor"></a>clear_cursor</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Clear an SQL search cursor.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/clear-sql-cursor-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.sql.clearCursor({ cursor })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_463"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cursor</code> (string)</strong></span>: Cursor to clear.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_async"></a>delete_async</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete an async SQL search.
Delete an async SQL search or a stored synchronous SQL search.
If the search is still running, the API cancels it.</p>
<p>If the Elasticsearch security features are enabled, only the following users can use this API to delete a search:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Users with the <code class="literal">cancel_task</code> cluster privilege.
</li>
<li class="listitem">
The user who first submitted the search.
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-async-sql-search-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.sql.deleteAsync({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_464"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The identifier for the search.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_async"></a>get_async</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get async SQL search results.
Get the current status and available results for an async SQL search or stored synchronous SQL search.</p>
<p>If the Elasticsearch security features are enabled, only the user who first submitted the SQL search can retrieve the search using this API.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-async-sql-search-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.sql.getAsync({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_465"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The identifier for the search.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delimiter</code> (Optional, string)</strong></span>: The separator for CSV results.
The API supports this parameter only for CSV responses.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">format</code> (Optional, string)</strong></span>: The format for the response.
You must specify a format using this parameter or the <code class="literal">Accept</code> HTTP header.
If you specify both, the API uses this parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">keep_alive</code> (Optional, string | -1 | 0)</strong></span>: The retention period for the search and its results.
It defaults to the <code class="literal">keep_alive</code> period for the original SQL search.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for complete results.
It defaults to no timeout, meaning the request waits for complete search results.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_async_status"></a>get_async_status</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get the async SQL search status.
Get the current status of an async SQL search or a stored synchronous SQL search.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-async-sql-search-status-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.sql.getAsyncStatus({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_466"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The identifier for the search.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_query_2"></a>query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get SQL search results.
Run an SQL request.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/sql-search-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.sql.query({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_467"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_partial_search_results</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the response has partial results when there are shard request timeouts or shard failures.
If <code class="literal">false</code>, the API returns an error with no partial results.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">catalog</code> (Optional, string)</strong></span>: The default catalog (cluster) for queries.
If unspecified, the queries execute on the data in the local cluster only.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">columnar</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the results are in a columnar fashion: one row represents all the values of a certain column from the current page of results.
The API supports this parameter only for CBOR, JSON, SMILE, and YAML responses.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">cursor</code> (Optional, string)</strong></span>: The cursor used to retrieve a set of paginated results.
If you specify a cursor, the API only uses the <code class="literal">columnar</code> and <code class="literal">time_zone</code> request body parameters.
It ignores other request body parameters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">fetch_size</code> (Optional, number)</strong></span>: The maximum number of rows (or entries) to return in one response.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">field_multi_value_leniency</code> (Optional, boolean)</strong></span>: If <code class="literal">false</code>, the API returns an exception when encountering multiple values for a field.
If <code class="literal">true</code>, the API is lenient and returns the first value from the array with no guarantee of consistent results.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">filter</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: The Elasticsearch query DSL for additional filtering.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index_using_frozen</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the search can run on frozen indices.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">keep_alive</code> (Optional, string | -1 | 0)</strong></span>: The retention period for an async or saved synchronous search.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">keep_on_completion</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, Elasticsearch stores synchronous searches if you also specify the <code class="literal">wait_for_completion_timeout</code> parameter.
If <code class="literal">false</code>, Elasticsearch only stores async searches that don&#8217;t finish before the <code class="literal">wait_for_completion_timeout</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">page_timeout</code> (Optional, string | -1 | 0)</strong></span>: The minimum retention period for the scroll cursor.
After this time period, a pagination request might fail because the scroll cursor is no longer available.
Subsequent scroll requests prolong the lifetime of the scroll cursor by the duration of <code class="literal">page_timeout</code> in the scroll request.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">params</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: The values for parameters in the query.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, string)</strong></span>: The SQL query to run.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">request_timeout</code> (Optional, string | -1 | 0)</strong></span>: The timeout before the request fails.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">runtime_mappings</code> (Optional, Record&lt;string, { fields, fetch_fields, format, input_field, target_field, target_index, script, type }&gt;)</strong></span>: One or more runtime fields for the search request.
These fields take precedence over mapped fields with the same name.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">time_zone</code> (Optional, string)</strong></span>: The ISO-8601 time zone ID for the search.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for complete results.
It defaults to no timeout, meaning the request waits for complete search results.
If the search doesn&#8217;t finish within this period, the search becomes async.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>To save a synchronous search, you must specify this parameter and the <code class="literal">keep_on_completion</code> parameter.
<span class="strong strong"><strong>* *<code class="literal">format</code> (Optional, Enum("csv" | "json" | "tsv" | "txt" | "yaml" | "cbor" | "smile"))</strong></span>: The format for the response.
You can also specify a format using the <code class="literal">Accept</code> HTTP header.
If you specify both this parameter and the <code class="literal">Accept</code> HTTP header, this parameter takes precedence.</p>
<div class="position-relative"><h4><a id="_translate"></a>translate</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Translate SQL into Elasticsearch queries.
Translate an SQL search into a search API request containing Query DSL.
It accepts the same request body parameters as the SQL search API, excluding <code class="literal">cursor</code>.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/sql-translate-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.sql.translate({ query })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_468"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (string)</strong></span>: The SQL query to run.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">fetch_size</code> (Optional, number)</strong></span>: The maximum number of rows (or entries) to return in one response.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">filter</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: The Elasticsearch query DSL for additional filtering.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">time_zone</code> (Optional, string)</strong></span>: The ISO-8601 time zone ID for the search.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_ssl"></a>ssl</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_certificates"></a>certificates</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get SSL certificates.</p>
<p>Get information about the X.509 certificates that are used to encrypt communications in the cluster.
The API returns a list that includes certificates from all TLS contexts including:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Settings for transport and HTTP interfaces
</li>
<li class="listitem">
TLS settings that are used within authentication realms
</li>
<li class="listitem">
TLS settings for remote monitoring exporters
</li>
</ul>
</div>
<p>The list includes certificates that are used for configuring trust, such as those configured in the <code class="literal">xpack.security.transport.ssl.truststore</code> and <code class="literal">xpack.security.transport.ssl.certificate_authorities</code> settings.
It also includes certificates that are used for configuring server identity, such as <code class="literal">xpack.security.http.ssl.keystore</code> and <code class="literal">xpack.security.http.ssl.certificate settings</code>.</p>
<p>The list does not include certificates that are sourced from the default SSL context of the Java Runtime Environment (JRE), even if those certificates are in use within Elasticsearch.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When a PKCS#11 token is configured as the truststore of the JRE, the API returns all the certificates that are included in the PKCS#11 token irrespective of whether these are used in the Elasticsearch TLS configuration.</p>
</div>
</div>
<p>If Elasticsearch is configured to use a keystore or truststore, the API output includes all certificates in that store, even though some of the certificates might not be in active use within the cluster.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/security-api-ssl.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.ssl.certificates()</pre>
</div>
<div class="position-relative"><h3><a id="_synonyms"></a>synonyms</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_synonym"></a>delete_synonym</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a synonym set.</p>
<p>You can only delete a synonyms set that is not in use by any index analyzer.</p>
<p>Synonyms sets can be used in synonym graph token filters and synonym token filters.
These synonym filters can be used as part of search analyzers.</p>
<p>Analyzers need to be loaded when an index is restored (such as when a node starts, or the index becomes open).
Even if the analyzer is not used on any field mapping, it still needs to be loaded on the index recovery phase.</p>
<p>If any analyzers cannot be loaded, the index becomes unavailable and the cluster status becomes red or yellow as index shards are not available.
To prevent that, synonyms sets that are used in analyzers can&#8217;t be deleted.
A delete request in this case will return a 400 response code.</p>
<p>To remove a synonyms set, you must first remove all indices that contain analyzers using it.
You can migrate an index by creating a new index that does not contain the token filter with the synonyms set, and use the reindex API in order to copy over the index data.
Once finished, you can delete the index.
When the synonyms set is not used in analyzers, you will be able to delete it.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-synonyms-set.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.synonyms.deleteSynonym({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_469"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The synonyms set identifier to delete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_synonym_rule"></a>delete_synonym_rule</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a synonym rule.
Delete a synonym rule from a synonym set.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-synonym-rule.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.synonyms.deleteSynonymRule({ set_id, rule_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_470"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">set_id</code> (string)</strong></span>: The ID of the synonym set to update.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rule_id</code> (string)</strong></span>: The ID of the synonym rule to delete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_synonym"></a>get_synonym</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get a synonym set.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-synonyms-set.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.synonyms.getSynonym({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_471"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The synonyms set identifier to retrieve.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: The starting offset for query rules to retrieve.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The max number of query rules to retrieve.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_synonym_rule"></a>get_synonym_rule</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get a synonym rule.
Get a synonym rule from a synonym set.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-synonym-rule.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.synonyms.getSynonymRule({ set_id, rule_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_472"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">set_id</code> (string)</strong></span>: The ID of the synonym set to retrieve the synonym rule from.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rule_id</code> (string)</strong></span>: The ID of the synonym rule to retrieve.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_synonyms_sets"></a>get_synonyms_sets</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get all synonym sets.
Get a summary of all defined synonym sets.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-synonyms-set.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.synonyms.getSynonymsSets({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_473"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: The starting offset for synonyms sets to retrieve.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The maximum number of synonyms sets to retrieve.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_synonym"></a>put_synonym</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a synonym set.
Synonyms sets are limited to a maximum of 10,000 synonym rules per set.
If you need to manage more synonym rules, you can create multiple synonym sets.</p>
<p>When an existing synonyms set is updated, the search analyzers that use the synonyms set are reloaded automatically for all indices.
This is equivalent to invoking the reload search analyzers API for all indices that use the synonyms set.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-synonyms-set.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.synonyms.putSynonym({ id, synonyms_set })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_474"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The ID of the synonyms set to be created or updated.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">synonyms_set</code> ({ id, synonyms } | { id, synonyms }[])</strong></span>: The synonym rules definitions for the synonyms set.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_synonym_rule"></a>put_synonym_rule</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a synonym rule.
Create or update a synonym rule in a synonym set.</p>
<p>If any of the synonym rules included is invalid, the API returns an error.</p>
<p>When you update a synonym rule, all analyzers using the synonyms set will be reloaded automatically to reflect the new rule.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-synonym-rule.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.synonyms.putSynonymRule({ set_id, rule_id, synonyms })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_475"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">set_id</code> (string)</strong></span>: The ID of the synonym set.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">rule_id</code> (string)</strong></span>: The ID of the synonym rule to be updated or created.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">synonyms</code> (string)</strong></span>: The synonym rule information definition, which must be in Solr format.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_tasks_2"></a>tasks</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_cancel"></a>cancel</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Cancel a task.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The task management API is new and should still be considered a beta feature.
The API may change in ways that are not backwards compatible.</p>
</div>
</div>
<p>A task may continue to run for some time after it has been cancelled because it may not be able to safely stop its current activity straight away.
It is also possible that Elasticsearch must complete its work on other tasks before it can process the cancellation.
The get task information API will continue to list these cancelled tasks until they complete.
The cancelled flag in the response indicates that the cancellation command has been processed and the task will stop as soon as possible.</p>
<p>To troubleshoot why a cancelled task does not complete promptly, use the get task information API with the <code class="literal">?detailed</code> parameter to identify the other tasks the system is running.
You can also use the node hot threads API to obtain detailed information about the work the system is doing instead of completing the cancelled task.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/tasks.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.tasks.cancel({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_476"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_id</code> (Optional, string | number)</strong></span>: The task identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">actions</code> (Optional, string | string[])</strong></span>: A list or wildcard expression of actions that is used to limit the request.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">nodes</code> (Optional, string[])</strong></span>: A list of node IDs or names that is used to limit the request.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">parent_task_id</code> (Optional, string)</strong></span>: A parent task ID that is used to limit the tasks.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: If true, the request blocks until all found tasks are complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_10"></a>get</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get task information.
Get information about a task currently running in the cluster.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The task management API is new and should still be considered a beta feature.
The API may change in ways that are not backwards compatible.</p>
</div>
</div>
<p>If the task identifier is not found, a 404 response code indicates that there are no resources that match the request.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/tasks.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.tasks.get({ task_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_477"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">task_id</code> (string)</strong></span>: The task identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the request blocks until the task has completed.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_list_3"></a>list</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get all tasks.
Get information about the tasks currently running on one or more nodes in the cluster.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The task management API is new and should still be considered a beta feature.
The API may change in ways that are not backwards compatible.</p>
</div>
</div>
<p><span class="strong strong"><strong>Identifying running tasks</strong></span></p>
<p>The <code class="literal">X-Opaque-Id header</code>, when provided on the HTTP request header, is going to be returned as a header in the response as well as in the headers field for in the task information.
This enables you to track certain calls or associate certain tasks with the client that started them.
For example:</p>
<pre class="screen">curl -i -H "X-Opaque-Id: 123456" "http://localhost:9200/_tasks?group_by=parents"</pre>
<p>The API returns the following result:</p>
<pre class="screen">HTTP/1.1 200 OK
X-Opaque-Id: 123456
content-type: application/json; charset=UTF-8
content-length: 831

{
  "tasks" : {
    "u5lcZHqcQhu-rUoFaqDphA:45" : {
      "node" : "u5lcZHqcQhu-rUoFaqDphA",
      "id" : 45,
      "type" : "transport",
      "action" : "cluster:monitor/tasks/lists",
      "start_time_in_millis" : 1513823752749,
      "running_time_in_nanos" : 293139,
      "cancellable" : false,
      "headers" : {
        "X-Opaque-Id" : "123456"
      },
      "children" : [
        {
          "node" : "u5lcZHqcQhu-rUoFaqDphA",
          "id" : 46,
          "type" : "direct",
          "action" : "cluster:monitor/tasks/lists[n]",
          "start_time_in_millis" : 1513823752750,
          "running_time_in_nanos" : 92133,
          "cancellable" : false,
          "parent_task_id" : "u5lcZHqcQhu-rUoFaqDphA:45",
          "headers" : {
            "X-Opaque-Id" : "123456"
          }
        }
      ]
    }
  }
 }</pre>
<p>In this example, <code class="literal">X-Opaque-Id: 123456</code> is the ID as a part of the response header.
The <code class="literal">X-Opaque-Id</code> in the task <code class="literal">headers</code> is the ID for the task that was initiated by the REST request.
The <code class="literal">X-Opaque-Id</code> in the children <code class="literal">headers</code> is the child task of the task that was initiated by the REST request.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/tasks.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.tasks.list({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_478"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">actions</code> (Optional, string | string[])</strong></span>: A list or wildcard expression of actions used to limit the request.
For example, you can use <code class="literal">cluser:*</code> to retrieve all cluster-related tasks.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">detailed</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the response includes detailed information about the running tasks.
This information is useful to distinguish tasks from each other but is more costly to run.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">group_by</code> (Optional, Enum("nodes" | "parents" | "none"))</strong></span>: A key that is used to group tasks in the response.
The task lists can be grouped either by nodes or by parent tasks.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">nodes</code> (Optional, string | string[])</strong></span>: A list of node IDs or names that is used to limit the returned information.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">parent_task_id</code> (Optional, string)</strong></span>: A parent task identifier that is used to limit returned information.
To return all tasks, omit this parameter or use a value of <code class="literal">-1</code>.
If the parent task is not found, the API does not return a 404 response code.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for each node to respond.
If a node does not respond before its timeout expires, the response does not include its information.
However, timed out nodes are included in the <code class="literal">node_failures</code> property.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the request blocks until the operation is complete.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_text_structure"></a>text_structure</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_find_field_structure"></a>find_field_structure</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Find the structure of a text field.
Find the structure of a text field in an Elasticsearch index.</p>
<p>This API provides a starting point for extracting further information from log messages already ingested into Elasticsearch.
For example, if you have ingested data into a very simple index that has just <code class="literal">@timestamp</code> and message fields, you can use this API to see what common structure exists in the message field.</p>
<p>The response from the API contains:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Sample messages.
</li>
<li class="listitem">
Statistics that reveal the most common values for all fields detected within the text and basic numeric statistics for numeric fields.
</li>
<li class="listitem">
Information about the structure of the text, which is useful when you write ingest configurations to index it or similarly formatted text.
</li>
<li class="listitem">
Appropriate mappings for an Elasticsearch index, which you could use to ingest the text.
</li>
</ul>
</div>
<p>All this information can be calculated by the structure finder with no guidance.
However, you can optionally override some of the decisions about the text structure by specifying one or more query parameters.</p>
<p>If the structure finder produces unexpected results, specify the <code class="literal">explain</code> query parameter and an explanation will appear in the response.
It helps determine why the returned structure was chosen.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/find-field-structure.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.textStructure.findFieldStructure({ field, index })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_479"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">field</code> (string)</strong></span>: The field that should be analyzed.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index</code> (string)</strong></span>: The name of the index that contains the analyzed field.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">column_names</code> (Optional, string)</strong></span>: If <code class="literal">format</code> is set to <code class="literal">delimited</code>, you can specify the column names in a list.
If this parameter is not specified, the structure finder uses the column names from the header row of the text.
If the text does not have a header row, columns are named "column1", "column2", "column3", for example.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delimiter</code> (Optional, string)</strong></span>: If you have set <code class="literal">format</code> to <code class="literal">delimited</code>, you can specify the character used to delimit the values in each row.
Only a single character is supported; the delimiter cannot have multiple characters.
By default, the API considers the following possibilities: comma, tab, semi-colon, and pipe (<code class="literal">|</code>).
In this default scenario, all rows must have the same number of fields for the delimited format to be detected.
If you specify a delimiter, up to 10% of the rows can have a different number of columns than the first row.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">documents_to_sample</code> (Optional, number)</strong></span>: The number of documents to include in the structural analysis.
The minimum value is 2.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ecs_compatibility</code> (Optional, Enum("disabled" | "v1"))</strong></span>: The mode of compatibility with ECS compliant Grok patterns.
Use this parameter to specify whether to use ECS Grok patterns instead of legacy ones when the structure finder creates a Grok pattern.
This setting primarily has an impact when a whole message Grok pattern such as <code class="literal">%{CATALINALOG}</code> matches the input.
If the structure finder identifies a common structure but has no idea of the meaning then generic field names such as <code class="literal">path</code>, <code class="literal">ipaddress</code>, <code class="literal">field1</code>, and <code class="literal">field2</code> are used in the <code class="literal">grok_pattern</code> output.
The intention in that situation is that a user who knows the meanings will rename the fields before using them.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">explain</code> (Optional, boolean)</strong></span>: If <code class="literal">true</code>, the response includes a field named <code class="literal">explanation</code>, which is an array of strings that indicate how the structure finder produced its result.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">format</code> (Optional, Enum("delimited" | "ndjson" | "semi_structured_text" | "xml"))</strong></span>: The high level structure of the text.
By default, the API chooses the format.
In this default scenario, all rows must have the same number of fields for a delimited format to be detected.
If the format is set to delimited and the delimiter is not set, however, the API tolerates up to 5% of rows that have a different number of columns than the first row.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">grok_pattern</code> (Optional, string)</strong></span>: If the format is <code class="literal">semi_structured_text</code>, you can specify a Grok pattern that is used to extract fields from every message in the text.
The name of the timestamp field in the Grok pattern must match what is specified in the <code class="literal">timestamp_field</code> parameter.
If that parameter is not specified, the name of the timestamp field in the Grok pattern must match "timestamp".
If <code class="literal">grok_pattern</code> is not specified, the structure finder creates a Grok pattern.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">quote</code> (Optional, string)</strong></span>: If the format is <code class="literal">delimited</code>, you can specify the character used to quote the values in each row if they contain newlines or the delimiter character.
Only a single character is supported.
If this parameter is not specified, the default value is a double quote (<code class="literal">"</code>).
If your delimited text format does not use quoting, a workaround is to set this argument to a character that does not appear anywhere in the sample.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">should_trim_fields</code> (Optional, boolean)</strong></span>: If the format is <code class="literal">delimited</code>, you can specify whether values between delimiters should have whitespace trimmed from them.
If this parameter is not specified and the delimiter is pipe (<code class="literal">|</code>), the default value is true.
Otherwise, the default value is <code class="literal">false</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The maximum amount of time that the structure analysis can take.
If the analysis is still running when the timeout expires, it will be stopped.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timestamp_field</code> (Optional, string)</strong></span>: The name of the field that contains the primary timestamp of each record in the text.
In particular, if the text was ingested into an index, this is the field that would be used to populate the <code class="literal">@timestamp</code> field.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>If the format is <code class="literal">semi_structured_text</code>, this field must match the name of the appropriate extraction in the <code class="literal">grok_pattern</code>.
Therefore, for semi-structured text, it is best not to specify this parameter unless <code class="literal">grok_pattern</code> is also specified.</p>
<p>For structured text, if you specify this parameter, the field must exist within the text.</p>
<p>If this parameter is not specified, the structure finder makes a decision about which field (if any) is the primary timestamp field.
For structured text, it is not compulsory to have a timestamp in the text.
<span class="strong strong"><strong>* *<code class="literal">timestamp_format</code> (Optional, string)</strong></span>: The Java time format of the timestamp field in the text.
Only a subset of Java time format letter groups are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">a</code>
</li>
<li class="listitem">
<code class="literal">d</code>
</li>
<li class="listitem">
<code class="literal">dd</code>
</li>
<li class="listitem">
<code class="literal">EEE</code>
</li>
<li class="listitem">
<code class="literal">EEEE</code>
</li>
<li class="listitem">
<code class="literal">H</code>
</li>
<li class="listitem">
<code class="literal">HH</code>
</li>
<li class="listitem">
<code class="literal">h</code>
</li>
<li class="listitem">
<code class="literal">M</code>
</li>
<li class="listitem">
<code class="literal">MM</code>
</li>
<li class="listitem">
<code class="literal">MMM</code>
</li>
<li class="listitem">
<code class="literal">MMMM</code>
</li>
<li class="listitem">
<code class="literal">mm</code>
</li>
<li class="listitem">
<code class="literal">ss</code>
</li>
<li class="listitem">
<code class="literal">XX</code>
</li>
<li class="listitem">
<code class="literal">XXX</code>
</li>
<li class="listitem">
<code class="literal">yy</code>
</li>
<li class="listitem">
<code class="literal">yyyy</code>
</li>
<li class="listitem">
<code class="literal">zzz</code>
</li>
</ul>
</div>
<p>Additionally <code class="literal">S</code> letter groups (fractional seconds) of length one to nine are supported providing they occur after <code class="literal">ss</code> and are separated from the <code class="literal">ss</code> by a period (<code class="literal">.</code>), comma (<code class="literal">,</code>), or colon (<code class="literal">:</code>).
Spacing and punctuation is also permitted with the exception a question mark (<code class="literal">?</code>), newline, and carriage return, together with literal text enclosed in single quotes.
For example, <code class="literal">MM/dd HH.mm.ss,SSSSSS 'in' yyyy</code> is a valid override format.</p>
<p>One valuable use case for this parameter is when the format is semi-structured text, there are multiple timestamp formats in the text, and you know which format corresponds to the primary timestamp, but you do not want to specify the full <code class="literal">grok_pattern</code>.
Another is when the timestamp format is one that the structure finder does not consider by default.</p>
<p>If this parameter is not specified, the structure finder chooses the best format from a built-in set.</p>
<p>If the special value <code class="literal">null</code> is specified, the structure finder will not look for a primary timestamp in the text.
When the format is semi-structured text, this will result in the structure finder treating the text as single-line messages.</p>
<div class="position-relative"><h4><a id="_find_message_structure"></a>find_message_structure</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Find the structure of text messages.
Find the structure of a list of text messages.
The messages must contain data that is suitable to be ingested into Elasticsearch.</p>
<p>This API provides a starting point for ingesting data into Elasticsearch in a format that is suitable for subsequent use with other Elastic Stack functionality.
Use this API rather than the find text structure API if your input text has already been split up into separate messages by some other process.</p>
<p>The response from the API contains:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Sample messages.
</li>
<li class="listitem">
Statistics that reveal the most common values for all fields detected within the text and basic numeric statistics for numeric fields.
</li>
<li class="listitem">
Information about the structure of the text, which is useful when you write ingest configurations to index it or similarly formatted text.
Appropriate mappings for an Elasticsearch index, which you could use to ingest the text.
</li>
</ul>
</div>
<p>All this information can be calculated by the structure finder with no guidance.
However, you can optionally override some of the decisions about the text structure by specifying one or more query parameters.</p>
<p>If the structure finder produces unexpected results, specify the <code class="literal">explain</code> query parameter and an explanation will appear in the response.
It helps determine why the returned structure was chosen.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/find-message-structure.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.textStructure.findMessageStructure({ messages })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_480"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">messages</code> (string[])</strong></span>: The list of messages you want to analyze.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">column_names</code> (Optional, string)</strong></span>: If the format is <code class="literal">delimited</code>, you can specify the column names in a list.
If this parameter is not specified, the structure finder uses the column names from the header row of the text.
If the text does not have a header role, columns are named "column1", "column2", "column3", for example.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delimiter</code> (Optional, string)</strong></span>: If you the format is <code class="literal">delimited</code>, you can specify the character used to delimit the values in each row.
Only a single character is supported; the delimiter cannot have multiple characters.
By default, the API considers the following possibilities: comma, tab, semi-colon, and pipe (<code class="literal">|</code>).
In this default scenario, all rows must have the same number of fields for the delimited format to be detected.
If you specify a delimiter, up to 10% of the rows can have a different number of columns than the first row.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ecs_compatibility</code> (Optional, Enum("disabled" | "v1"))</strong></span>: The mode of compatibility with ECS compliant Grok patterns.
Use this parameter to specify whether to use ECS Grok patterns instead of legacy ones when the structure finder creates a Grok pattern.
This setting primarily has an impact when a whole message Grok pattern such as <code class="literal">%{CATALINALOG}</code> matches the input.
If the structure finder identifies a common structure but has no idea of meaning then generic field names such as <code class="literal">path</code>, <code class="literal">ipaddress</code>, <code class="literal">field1</code>, and <code class="literal">field2</code> are used in the <code class="literal">grok_pattern</code> output, with the intention that a user who knows the meanings rename these fields before using it.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">explain</code> (Optional, boolean)</strong></span>: If this parameter is set to true, the response includes a field named <code class="literal">explanation</code>, which is an array of strings that indicate how the structure finder produced its result.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">format</code> (Optional, Enum("delimited" | "ndjson" | "semi_structured_text" | "xml"))</strong></span>: The high level structure of the text.
By default, the API chooses the format.
In this default scenario, all rows must have the same number of fields for a delimited format to be detected.
If the format is <code class="literal">delimited</code> and the delimiter is not set, however, the API tolerates up to 5% of rows that have a different number of columns than the first row.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">grok_pattern</code> (Optional, string)</strong></span>: If the format is <code class="literal">semi_structured_text</code>, you can specify a Grok pattern that is used to extract fields from every message in the text.
The name of the timestamp field in the Grok pattern must match what is specified in the <code class="literal">timestamp_field</code> parameter.
If that parameter is not specified, the name of the timestamp field in the Grok pattern must match "timestamp".
If <code class="literal">grok_pattern</code> is not specified, the structure finder creates a Grok pattern.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">quote</code> (Optional, string)</strong></span>: If the format is <code class="literal">delimited</code>, you can specify the character used to quote the values in each row if they contain newlines or the delimiter character.
Only a single character is supported.
If this parameter is not specified, the default value is a double quote (<code class="literal">"</code>).
If your delimited text format does not use quoting, a workaround is to set this argument to a character that does not appear anywhere in the sample.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">should_trim_fields</code> (Optional, boolean)</strong></span>: If the format is <code class="literal">delimited</code>, you can specify whether values between delimiters should have whitespace trimmed from them.
If this parameter is not specified and the delimiter is pipe (<code class="literal">|</code>), the default value is true.
Otherwise, the default value is <code class="literal">false</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The maximum amount of time that the structure analysis can take.
If the analysis is still running when the timeout expires, it will be stopped.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timestamp_field</code> (Optional, string)</strong></span>: The name of the field that contains the primary timestamp of each record in the text.
In particular, if the text was ingested into an index, this is the field that would be used to populate the <code class="literal">@timestamp</code> field.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>If the format is <code class="literal">semi_structured_text</code>, this field must match the name of the appropriate extraction in the <code class="literal">grok_pattern</code>.
Therefore, for semi-structured text, it is best not to specify this parameter unless <code class="literal">grok_pattern</code> is also specified.</p>
<p>For structured text, if you specify this parameter, the field must exist within the text.</p>
<p>If this parameter is not specified, the structure finder makes a decision about which field (if any) is the primary timestamp field.
For structured text, it is not compulsory to have a timestamp in the text.
<span class="strong strong"><strong>* *<code class="literal">timestamp_format</code> (Optional, string)</strong></span>: The Java time format of the timestamp field in the text.
Only a subset of Java time format letter groups are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">a</code>
</li>
<li class="listitem">
<code class="literal">d</code>
</li>
<li class="listitem">
<code class="literal">dd</code>
</li>
<li class="listitem">
<code class="literal">EEE</code>
</li>
<li class="listitem">
<code class="literal">EEEE</code>
</li>
<li class="listitem">
<code class="literal">H</code>
</li>
<li class="listitem">
<code class="literal">HH</code>
</li>
<li class="listitem">
<code class="literal">h</code>
</li>
<li class="listitem">
<code class="literal">M</code>
</li>
<li class="listitem">
<code class="literal">MM</code>
</li>
<li class="listitem">
<code class="literal">MMM</code>
</li>
<li class="listitem">
<code class="literal">MMMM</code>
</li>
<li class="listitem">
<code class="literal">mm</code>
</li>
<li class="listitem">
<code class="literal">ss</code>
</li>
<li class="listitem">
<code class="literal">XX</code>
</li>
<li class="listitem">
<code class="literal">XXX</code>
</li>
<li class="listitem">
<code class="literal">yy</code>
</li>
<li class="listitem">
<code class="literal">yyyy</code>
</li>
<li class="listitem">
<code class="literal">zzz</code>
</li>
</ul>
</div>
<p>Additionally <code class="literal">S</code> letter groups (fractional seconds) of length one to nine are supported providing they occur after <code class="literal">ss</code> and are separated from the <code class="literal">ss</code> by a period (<code class="literal">.</code>), comma (<code class="literal">,</code>), or colon (<code class="literal">:</code>).
Spacing and punctuation is also permitted with the exception a question mark (<code class="literal">?</code>), newline, and carriage return, together with literal text enclosed in single quotes.
For example, <code class="literal">MM/dd HH.mm.ss,SSSSSS 'in' yyyy</code> is a valid override format.</p>
<p>One valuable use case for this parameter is when the format is semi-structured text, there are multiple timestamp formats in the text, and you know which format corresponds to the primary timestamp, but you do not want to specify the full <code class="literal">grok_pattern</code>.
Another is when the timestamp format is one that the structure finder does not consider by default.</p>
<p>If this parameter is not specified, the structure finder chooses the best format from a built-in set.</p>
<p>If the special value <code class="literal">null</code> is specified, the structure finder will not look for a primary timestamp in the text.
When the format is semi-structured text, this will result in the structure finder treating the text as single-line messages.</p>
<div class="position-relative"><h4><a id="_find_structure"></a>find_structure</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Find the structure of a text file.
The text file must contain data that is suitable to be ingested into Elasticsearch.</p>
<p>This API provides a starting point for ingesting data into Elasticsearch in a format that is suitable for subsequent use with other Elastic Stack functionality.
Unlike other Elasticsearch endpoints, the data that is posted to this endpoint does not need to be UTF-8 encoded and in JSON format.
It must, however, be text; binary text formats are not currently supported.
The size is limited to the Elasticsearch HTTP receive buffer size, which defaults to 100 Mb.</p>
<p>The response from the API contains:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A couple of messages from the beginning of the text.
</li>
<li class="listitem">
Statistics that reveal the most common values for all fields detected within the text and basic numeric statistics for numeric fields.
</li>
<li class="listitem">
Information about the structure of the text, which is useful when you write ingest configurations to index it or similarly formatted text.
</li>
<li class="listitem">
Appropriate mappings for an Elasticsearch index, which you could use to ingest the text.
</li>
</ul>
</div>
<p>All this information can be calculated by the structure finder with no guidance.
However, you can optionally override some of the decisions about the text structure by specifying one or more query parameters.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/find-structure.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.textStructure.findStructure({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_481"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">text_files</code> (Optional, TJsonDocument[])</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">charset</code> (Optional, string)</strong></span>: The text&#8217;s character set.
It must be a character set that is supported by the JVM that Elasticsearch uses.
For example, <code class="literal">UTF-8</code>, <code class="literal">UTF-16LE</code>, <code class="literal">windows-1252</code>, or <code class="literal">EUC-JP</code>.
If this parameter is not specified, the structure finder chooses an appropriate character set.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">column_names</code> (Optional, string)</strong></span>: If you have set format to <code class="literal">delimited</code>, you can specify the column names in a list.
If this parameter is not specified, the structure finder uses the column names from the header row of the text.
If the text does not have a header role, columns are named "column1", "column2", "column3", for example.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delimiter</code> (Optional, string)</strong></span>: If you have set <code class="literal">format</code> to <code class="literal">delimited</code>, you can specify the character used to delimit the values in each row.
Only a single character is supported; the delimiter cannot have multiple characters.
By default, the API considers the following possibilities: comma, tab, semi-colon, and pipe (<code class="literal">|</code>).
In this default scenario, all rows must have the same number of fields for the delimited format to be detected.
If you specify a delimiter, up to 10% of the rows can have a different number of columns than the first row.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ecs_compatibility</code> (Optional, string)</strong></span>: The mode of compatibility with ECS compliant Grok patterns.
Use this parameter to specify whether to use ECS Grok patterns instead of legacy ones when the structure finder creates a Grok pattern.
Valid values are <code class="literal">disabled</code> and <code class="literal">v1</code>.
This setting primarily has an impact when a whole message Grok pattern such as <code class="literal">%{CATALINALOG}</code> matches the input.
If the structure finder identifies a common structure but has no idea of meaning then generic field names such as <code class="literal">path</code>, <code class="literal">ipaddress</code>, <code class="literal">field1</code>, and <code class="literal">field2</code> are used in the <code class="literal">grok_pattern</code> output, with the intention that a user who knows the meanings rename these fields before using it.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">explain</code> (Optional, boolean)</strong></span>: If this parameter is set to <code class="literal">true</code>, the response includes a field named explanation, which is an array of strings that indicate how the structure finder produced its result.
If the structure finder produces unexpected results for some text, use this query parameter to help you determine why the returned structure was chosen.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">format</code> (Optional, string)</strong></span>: The high level structure of the text.
Valid values are <code class="literal">ndjson</code>, <code class="literal">xml</code>, <code class="literal">delimited</code>, and <code class="literal">semi_structured_text</code>.
By default, the API chooses the format.
In this default scenario, all rows must have the same number of fields for a delimited format to be detected.
If the format is set to <code class="literal">delimited</code> and the delimiter is not set, however, the API tolerates up to 5% of rows that have a different number of columns than the first row.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">grok_pattern</code> (Optional, string)</strong></span>: If you have set <code class="literal">format</code> to <code class="literal">semi_structured_text</code>, you can specify a Grok pattern that is used to extract fields from every message in the text.
The name of the timestamp field in the Grok pattern must match what is specified in the <code class="literal">timestamp_field</code> parameter.
If that parameter is not specified, the name of the timestamp field in the Grok pattern must match "timestamp".
If <code class="literal">grok_pattern</code> is not specified, the structure finder creates a Grok pattern.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">has_header_row</code> (Optional, boolean)</strong></span>: If you have set <code class="literal">format</code> to <code class="literal">delimited</code>, you can use this parameter to indicate whether the column names are in the first row of the text.
If this parameter is not specified, the structure finder guesses based on the similarity of the first row of the text to other rows.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">line_merge_size_limit</code> (Optional, number)</strong></span>: The maximum number of characters in a message when lines are merged to form messages while analyzing semi-structured text.
If you have extremely long messages you may need to increase this, but be aware that this may lead to very long processing times if the way to group lines into messages is misdetected.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">lines_to_sample</code> (Optional, number)</strong></span>: The number of lines to include in the structural analysis, starting from the beginning of the text.
The minimum is 2.
If the value of this parameter is greater than the number of lines in the text, the analysis proceeds (as long as there are at least two lines in the text) for all of the lines.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The number of lines and the variation of the lines affects the speed of the analysis.
For example, if you upload text where the first 1000 lines are all variations on the same message, the analysis will find more commonality than would be seen with a bigger sample.
If possible, however, it is more efficient to upload sample text with more variety in the first 1000 lines than to request analysis of 100000 lines to achieve some variety.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">quote</code> (Optional, string)</strong></span>: If you have set <code class="literal">format</code> to <code class="literal">delimited</code>, you can specify the character used to quote the values in each row if they contain newlines or the delimiter character.
Only a single character is supported.
If this parameter is not specified, the default value is a double quote (<code class="literal">"</code>).
If your delimited text format does not use quoting, a workaround is to set this argument to a character that does not appear anywhere in the sample.
</strong></span> <span class="strong strong"><strong><code class="literal">should_trim_fields</code> (Optional, boolean)</strong></span>: If you have set <code class="literal">format</code> to <code class="literal">delimited</code>, you can specify whether values between delimiters should have whitespace trimmed from them.
If this parameter is not specified and the delimiter is pipe (<code class="literal">|</code>), the default value is <code class="literal">true</code>.
Otherwise, the default value is <code class="literal">false</code>.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The maximum amount of time that the structure analysis can take.
If the analysis is still running when the timeout expires then it will be stopped.
</strong></span> <span class="strong strong"><strong><code class="literal">timestamp_field</code> (Optional, string)</strong></span>: The name of the field that contains the primary timestamp of each record in the text.
In particular, if the text were ingested into an index, this is the field that would be used to populate the <code class="literal">@timestamp</code> field.</p>
</div>
</div>
<p>If the <code class="literal">format</code> is <code class="literal">semi_structured_text</code>, this field must match the name of the appropriate extraction in the <code class="literal">grok_pattern</code>.
Therefore, for semi-structured text, it is best not to specify this parameter unless <code class="literal">grok_pattern</code> is also specified.</p>
<p>For structured text, if you specify this parameter, the field must exist within the text.</p>
<p>If this parameter is not specified, the structure finder makes a decision about which field (if any) is the primary timestamp field.
For structured text, it is not compulsory to have a timestamp in the text.
<span class="strong strong"><strong>* *<code class="literal">timestamp_format</code> (Optional, string)</strong></span>: The Java time format of the timestamp field in the text.</p>
<p>Only a subset of Java time format letter groups are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">a</code>
</li>
<li class="listitem">
<code class="literal">d</code>
</li>
<li class="listitem">
<code class="literal">dd</code>
</li>
<li class="listitem">
<code class="literal">EEE</code>
</li>
<li class="listitem">
<code class="literal">EEEE</code>
</li>
<li class="listitem">
<code class="literal">H</code>
</li>
<li class="listitem">
<code class="literal">HH</code>
</li>
<li class="listitem">
<code class="literal">h</code>
</li>
<li class="listitem">
<code class="literal">M</code>
</li>
<li class="listitem">
<code class="literal">MM</code>
</li>
<li class="listitem">
<code class="literal">MMM</code>
</li>
<li class="listitem">
<code class="literal">MMMM</code>
</li>
<li class="listitem">
<code class="literal">mm</code>
</li>
<li class="listitem">
<code class="literal">ss</code>
</li>
<li class="listitem">
<code class="literal">XX</code>
</li>
<li class="listitem">
<code class="literal">XXX</code>
</li>
<li class="listitem">
<code class="literal">yy</code>
</li>
<li class="listitem">
<code class="literal">yyyy</code>
</li>
<li class="listitem">
<code class="literal">zzz</code>
</li>
</ul>
</div>
<p>Additionally <code class="literal">S</code> letter groups (fractional seconds) of length one to nine are supported providing they occur after <code class="literal">ss</code> and separated from the <code class="literal">ss</code> by a <code class="literal">.</code>, <code class="literal">,</code> or <code class="literal">:</code>.
Spacing and punctuation is also permitted with the exception of <code class="literal">?</code>, newline and carriage return, together with literal text enclosed in single quotes.
For example, <code class="literal">MM/dd HH.mm.ss,SSSSSS 'in' yyyy</code> is a valid override format.</p>
<p>One valuable use case for this parameter is when the format is semi-structured text, there are multiple timestamp formats in the text, and you know which format corresponds to the primary timestamp, but you do not want to specify the full <code class="literal">grok_pattern</code>.
Another is when the timestamp format is one that the structure finder does not consider by default.</p>
<p>If this parameter is not specified, the structure finder chooses the best format from a built-in set.</p>
<p>If the special value <code class="literal">null</code> is specified the structure finder will not look for a primary timestamp in the text.
When the format is semi-structured text this will result in the structure finder treating the text as single-line messages.</p>
<div class="position-relative"><h4><a id="_test_grok_pattern"></a>test_grok_pattern</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Test a Grok pattern.
Test a Grok pattern on one or more lines of text.
The API indicates whether the lines match the pattern together with the offsets and lengths of the matched substrings.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/test-grok-pattern.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.textStructure.testGrokPattern({ grok_pattern, text })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_482"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">grok_pattern</code> (string)</strong></span>: The Grok pattern to run on the text.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">text</code> (string[])</strong></span>: The lines of text to run the Grok pattern on.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ecs_compatibility</code> (Optional, string)</strong></span>: The mode of compatibility with ECS compliant Grok patterns.
Use this parameter to specify whether to use ECS Grok patterns instead of legacy ones when the structure finder creates a Grok pattern.
Valid values are <code class="literal">disabled</code> and <code class="literal">v1</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_transform"></a>transform</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_delete_transform"></a>delete_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a transform.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/delete-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.deleteTransform({ transform_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_483"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string)</strong></span>: Identifier for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: If this value is false, the transform must be stopped before it can be deleted. If true, the transform is
deleted regardless of its current state.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">delete_dest_index</code> (Optional, boolean)</strong></span>: If this value is true, the destination index is deleted together with the transform. If false, the destination
index will not be deleted
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_node_stats"></a>get_node_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Retrieves transform usage information for transform nodes.</p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.getNodeStats()</pre>
</div>
<div class="position-relative"><h4><a id="_get_transform"></a>get_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get transforms.
Get configuration information for transforms.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.getTransform({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_484"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (Optional, string | string[])</strong></span>: Identifier for the transform. It can be a transform identifier or a
wildcard expression. You can get information for all transforms by using
<code class="literal">_all</code>, by specifying <code class="literal">*</code> as the <code class="literal">&lt;transform_id&gt;</code>, or by omitting the
<code class="literal">&lt;transform_id&gt;</code>.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no transforms that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>If this parameter is false, the request returns a 404 status code when
there are no matches or only partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of transforms.
</strong></span> <span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of transforms to obtain.
<span class="strong strong"><strong>* *<code class="literal">exclude_generated</code> (Optional, boolean)</strong></span>: Excludes fields that were automatically added when creating the
transform. This allows the configuration to be in an acceptable format to
be retrieved and then added to another cluster.</p>
<div class="position-relative"><h4><a id="_get_transform_stats"></a>get_transform_stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get transform stats.</p>
<p>Get usage information for transforms.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/get-transform-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.getTransformStats({ transform_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_485"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string | string[])</strong></span>: Identifier for the transform. It can be a transform identifier or a
wildcard expression. You can get information for all transforms by using
<code class="literal">_all</code>, by specifying <code class="literal">*</code> as the <code class="literal">&lt;transform_id&gt;</code>, or by omitting the
<code class="literal">&lt;transform_id&gt;</code>.
</li>
<li class="listitem">
<p><span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Contains wildcard expressions and there are no transforms that match.
</li>
<li class="listitem">
Contains the _all string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>If this parameter is false, the request returns a 404 status code when
there are no matches or only partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: Skips the specified number of transforms.
</strong></span> <span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: Specifies the maximum number of transforms to obtain.
<span class="strong strong"><strong>* *<code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Controls the time to wait for the stats</p>
<div class="position-relative"><h4><a id="_preview_transform"></a>preview_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Preview a transform.
Generates a preview of the results that you will get when you create a transform with the same configuration.</p>
<p>It returns a maximum of 100 results. The calculations are based on all the current data in the source index. It also
generates a list of mappings and settings for the destination index. These values are determined based on the field
types of the source index and the transform aggregations.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/preview-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.previewTransform({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_486"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (Optional, string)</strong></span>: Identifier for the transform to preview. If you specify this path parameter, you cannot provide transform
configuration details in the request body.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dest</code> (Optional, { index, op_type, pipeline, routing, version_type })</strong></span>: The destination for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: Free text description of the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">frequency</code> (Optional, string | -1 | 0)</strong></span>: The interval between checks for changes in the source indices when the
transform is running continuously. Also determines the retry interval in
the event of transient failures while the transform is searching or
indexing. The minimum value is 1s and the maximum is 1h.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">pivot</code> (Optional, { aggregations, group_by })</strong></span>: The pivot method transforms the data by aggregating and grouping it.
These objects define the group by fields and the aggregation to reduce
the data.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">source</code> (Optional, { index, query, remote, size, slice, sort, _source, runtime_mappings })</strong></span>: The source of the data for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">settings</code> (Optional, { align_checkpoints, dates_as_epoch_millis, deduce_mappings, docs_per_second, max_page_search_size, unattended })</strong></span>: Defines optional transform settings.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sync</code> (Optional, { time })</strong></span>: Defines the properties transforms require to run continuously.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">retention_policy</code> (Optional, { time })</strong></span>: Defines a retention policy for the transform. Data that meets the defined
criteria is deleted from the destination index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">latest</code> (Optional, { sort, unique_key })</strong></span>: The latest method transforms the data by finding the latest document for
each unique key.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the
timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_transform"></a>put_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create a transform.
Creates a transform.</p>
<p>A transform copies data from source indices, transforms it, and persists it into an entity-centric destination index. You can also think of the destination index as a two-dimensional tabular data structure (known as
a data frame). The ID for each document in the data frame is generated from a hash of the entity, so there is a
unique row per entity.</p>
<p>You must choose either the latest or pivot method for your transform; you cannot use both in a single transform. If
you choose to use the pivot method for your transform, the entities are defined by the set of <code class="literal">group_by</code> fields in
the pivot object. If you choose to use the latest method, the entities are defined by the <code class="literal">unique_key</code> field values
in the latest object.</p>
<p>You must have <code class="literal">create_index</code>, <code class="literal">index</code>, and <code class="literal">read</code> privileges on the destination index and <code class="literal">read</code> and
<code class="literal">view_index_metadata</code> privileges on the source indices. When Elasticsearch security features are enabled, the
transform remembers which roles the user that created it had at the time of creation and uses those same roles. If
those roles do not have the required privileges on the source and destination indices, the transform fails when it
attempts unauthorized operations.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must use Kibana or this API to create a transform. Do not add a transform directly into any
<code class="literal">.transform-internal*</code> indices using the Elasticsearch index API. If Elasticsearch security features are enabled, do
not give users any privileges on <code class="literal">.transform-internal*</code> indices. If you used transforms prior to 7.5, also do not
give users any privileges on <code class="literal">.data-frame-internal*</code> indices.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/put-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.putTransform({ transform_id, dest, source })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_487"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string)</strong></span>: Identifier for the transform. This identifier can contain lowercase alphanumeric characters (a-z and 0-9),
hyphens, and underscores. It has a 64 character limit and must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dest</code> ({ index, op_type, pipeline, routing, version_type })</strong></span>: The destination for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">source</code> ({ index, query, remote, size, slice, sort, _source, runtime_mappings })</strong></span>: The source of the data for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: Free text description of the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">frequency</code> (Optional, string | -1 | 0)</strong></span>: The interval between checks for changes in the source indices when the transform is running continuously. Also
determines the retry interval in the event of transient failures while the transform is searching or indexing.
The minimum value is <code class="literal">1s</code> and the maximum is <code class="literal">1h</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">latest</code> (Optional, { sort, unique_key })</strong></span>: The latest method transforms the data by finding the latest document for each unique key.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">_meta</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Defines optional transform metadata.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">pivot</code> (Optional, { aggregations, group_by })</strong></span>: The pivot method transforms the data by aggregating and grouping it. These objects define the group by fields
and the aggregation to reduce the data.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">retention_policy</code> (Optional, { time })</strong></span>: Defines a retention policy for the transform. Data that meets the defined criteria is deleted from the
destination index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">settings</code> (Optional, { align_checkpoints, dates_as_epoch_millis, deduce_mappings, docs_per_second, max_page_search_size, unattended })</strong></span>: Defines optional transform settings.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sync</code> (Optional, { time })</strong></span>: Defines the properties transforms require to run continuously.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">defer_validation</code> (Optional, boolean)</strong></span>: When the transform is created, a series of validations occur to ensure its success. For example, there is a
check for the existence of the source indices and a check that the destination index is not part of the source
index pattern. You can use this parameter to skip the checks, for example when the source index does not exist
until after the transform is created. The validations are always run when you start the transform, however, with
the exception of privilege checks.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_reset_transform"></a>reset_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Reset a transform.</p>
<p>Before you can reset it, you must stop it; alternatively, use the <code class="literal">force</code> query parameter.
If the destination index was created by the transform, it is deleted.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/reset-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.resetTransform({ transform_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_488"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string)</strong></span>: Identifier for the transform. This identifier can contain lowercase alphanumeric characters (a-z and 0-9),
hyphens, and underscores. It has a 64 character limit and must start and end with alphanumeric characters.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: If this value is <code class="literal">true</code>, the transform is reset regardless of its current state. If it&#8217;s <code class="literal">false</code>, the transform
must be stopped before it can be reset.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_schedule_now_transform"></a>schedule_now_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Schedule a transform to start now.</p>
<p>Instantly run a transform to process data.
If you run this API, the transform will process the new data instantly,
without waiting for the configured frequency interval. After the API is called,
the transform will be processed again at <code class="literal">now + frequency</code> unless the API
is called again in the meantime.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/schedule-now-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.scheduleNowTransform({ transform_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_489"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string)</strong></span>: Identifier for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Controls the time to wait for the scheduling to take place
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_start_transform"></a>start_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start a transform.</p>
<p>When you start a transform, it creates the destination index if it does not already exist. The <code class="literal">number_of_shards</code> is
set to <code class="literal">1</code> and the <code class="literal">auto_expand_replicas</code> is set to <code class="literal">0-1</code>. If it is a pivot transform, it deduces the mapping
definitions for the destination index from the source indices and the transform aggregations. If fields in the
destination index are derived from scripts (as in the case of <code class="literal">scripted_metric</code> or <code class="literal">bucket_script</code> aggregations),
the transform uses dynamic mappings unless an index template exists. If it is a latest transform, it does not deduce
mapping definitions; it uses dynamic mappings. To use explicit mappings, create the destination index before you
start the transform. Alternatively, you can create an index template, though it does not affect the deduced mappings
in a pivot transform.</p>
<p>When the transform starts, a series of validations occur to ensure its success. If you deferred validation when you
created the transform, they occur when you start the transform—​with the exception of privilege checks. When
Elasticsearch security features are enabled, the transform remembers which roles the user that created it had at the
time of creation and uses those same roles. If those roles do not have the required privileges on the source and
destination indices, the transform fails when it attempts unauthorized operations.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/start-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.startTransform({ transform_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_490"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string)</strong></span>: Identifier for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, string)</strong></span>: Restricts the set of transformed entities to those changed after this time. Relative times like now-30d are supported. Only applicable for continuous transforms.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stop_transform"></a>stop_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Stop transforms.
Stops one or more transforms.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/stop-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.stopTransform({ transform_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_491"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string)</strong></span>: Identifier for the transform. To stop multiple transforms, use a list or a wildcard expression.
To stop all transforms, use <code class="literal">_all</code> or <code class="literal">*</code> as the identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">allow_no_match</code> (Optional, boolean)</strong></span>: Specifies what to do when the request: contains wildcard expressions and there are no transforms that match;
contains the <code class="literal">_all</code> string or no identifiers and there are no matches; contains wildcard expressions and there
are only partial matches.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>If it is true, the API returns a successful acknowledgement message when there are no matches. When there are
only partial matches, the API stops the appropriate transforms.</p>
<p>If it is false, the request returns a 404 status code when there are no matches or only partial matches.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">force</code> (Optional, boolean)</strong></span>: If it is true, the API forcefully stops the transforms.
</strong></span> <span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response when <code class="literal">wait_for_completion</code> is <code class="literal">true</code>. If no response is received before the
timeout expires, the request returns a timeout exception. However, the request continues processing and
eventually moves the transform to a STOPPED state.
<span class="strong strong"><strong> <span class="strong strong"><strong><code class="literal">wait_for_checkpoint</code> (Optional, boolean)</strong></span>: If it is true, the transform does not completely stop until the current checkpoint is completed. If it is false,
the transform stops as soon as possible.
</strong></span> <span class="strong strong"><strong><code class="literal">wait_for_completion</code> (Optional, boolean)</strong></span>: If it is true, the API blocks until the indexer state completely stops. If it is false, the API returns
immediately and the indexer is stopped asynchronously in the background.</p>
<div class="position-relative"><h4><a id="_update_transform"></a>update_transform</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update a transform.
Updates certain properties of a transform.</p>
<p>All updated properties except <code class="literal">description</code> do not take effect until after the transform starts the next checkpoint,
thus there is data consistency in each checkpoint. To use this API, you must have <code class="literal">read</code> and <code class="literal">view_index_metadata</code>
privileges for the source indices. You must also have <code class="literal">index</code> and <code class="literal">read</code> privileges for the destination index. When
Elasticsearch security features are enabled, the transform remembers which roles the user who updated it had at the
time of update and runs with those privileges.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/update-transform.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.updateTransform({ transform_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_492"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform_id</code> (string)</strong></span>: Identifier for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dest</code> (Optional, { index, op_type, pipeline, routing, version_type })</strong></span>: The destination for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">description</code> (Optional, string)</strong></span>: Free text description of the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">frequency</code> (Optional, string | -1 | 0)</strong></span>: The interval between checks for changes in the source indices when the
transform is running continuously. Also determines the retry interval in
the event of transient failures while the transform is searching or
indexing. The minimum value is 1s and the maximum is 1h.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">_meta</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Defines optional transform metadata.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">source</code> (Optional, { index, query, remote, size, slice, sort, _source, runtime_mappings })</strong></span>: The source of the data for the transform.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">settings</code> (Optional, { align_checkpoints, dates_as_epoch_millis, deduce_mappings, docs_per_second, max_page_search_size, unattended })</strong></span>: Defines optional transform settings.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sync</code> (Optional, { time })</strong></span>: Defines the properties transforms require to run continuously.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">retention_policy</code> (Optional, { time } | null)</strong></span>: Defines a retention policy for the transform. Data that meets the defined
criteria is deleted from the destination index.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">defer_validation</code> (Optional, boolean)</strong></span>: When true, deferrable validations are not run. This behavior may be
desired if the source index does not exist until after the transform is
created.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the
timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_upgrade_transforms"></a>upgrade_transforms</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Upgrade all transforms.</p>
<p>Transforms are compatible across minor versions and between supported major versions.
However, over time, the format of transform configuration information may change.
This API identifies transforms that have a legacy configuration format and upgrades them to the latest version.
It also cleans up the internal data structures that store the transform state and checkpoints.
The upgrade does not affect the source and destination indices.
The upgrade also does not affect the roles that transforms use when Elasticsearch security features are enabled; the role used to read source data and write to the destination index remains unchanged.</p>
<p>If a transform upgrade step fails, the upgrade stops and an error is returned about the underlying issue.
Resolve the issue then re-run the process again.
A summary is returned when the upgrade is finished.</p>
<p>To ensure continuous transforms remain running during a major version upgrade of the cluster – for example, from 7.16 to 8.0 – it is recommended to upgrade transforms before upgrading the cluster.
You may want to perform a recent cluster backup prior to the upgrade.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/upgrade-transforms.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.transform.upgradeTransforms({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_493"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">dry_run</code> (Optional, boolean)</strong></span>: When true, the request checks for updates but does not run them.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a response. If no response is received before the timeout expires, the request fails and
returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_watcher"></a>watcher</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_ack_watch"></a>ack_watch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Acknowledge a watch.
Acknowledging a watch enables you to manually throttle the execution of the watch&#8217;s actions.</p>
<p>The acknowledgement state of an action is stored in the <code class="literal">status.actions.&lt;id&gt;.ack.state</code> structure.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the specified watch is currently being executed, this API will return an error
The reason for this behavior is to prevent overwriting the watch status from a watch execution.</p>
</div>
</div>
<p>Acknowledging an action throttles further executions of that action until its <code class="literal">ack.state</code> is reset to <code class="literal">awaits_successful_execution</code>.
This happens when the condition of the watch is not met (the condition evaluates to false).</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-ack-watch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.ackWatch({ watch_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_494"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">watch_id</code> (string)</strong></span>: The watch identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">action_id</code> (Optional, string | string[])</strong></span>: A list of the action identifiers to acknowledge.
If you omit this parameter, all of the actions of the watch are acknowledged.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_activate_watch"></a>activate_watch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Activate a watch.
A watch can be either active or inactive.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-activate-watch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.activateWatch({ watch_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_495"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">watch_id</code> (string)</strong></span>: The watch identifier.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_deactivate_watch"></a>deactivate_watch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Deactivate a watch.
A watch can be either active or inactive.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-deactivate-watch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.deactivateWatch({ watch_id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_496"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">watch_id</code> (string)</strong></span>: The watch identifier.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_delete_watch"></a>delete_watch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Delete a watch.
When the watch is removed, the document representing the watch in the <code class="literal">.watches</code> index is gone and it will never be run again.</p>
<p>Deleting a watch does not delete any watch execution records related to this watch from the watch history.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deleting a watch must be done by using only this API.
Do not delete the watch directly from the <code class="literal">.watches</code> index using the Elasticsearch delete document API
When Elasticsearch security features are enabled, make sure no write privileges are granted to anyone for the <code class="literal">.watches</code> index.</p>
</div>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-delete-watch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.deleteWatch({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_497"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The watch identifier.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_execute_watch"></a>execute_watch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Run a watch.
This API can be used to force execution of the watch outside of its triggering logic or to simulate the watch execution for debugging purposes.</p>
<p>For testing and debugging purposes, you also have fine-grained control on how the watch runs.
You can run the watch without running all of its actions or alternatively by simulating them.
You can also force execution by ignoring the watch condition and control whether a watch record would be written to the watch history after it runs.</p>
<p>You can use the run watch API to run watches that are not yet registered by specifying the watch definition inline.
This serves as great tool for testing and debugging your watches prior to adding them to Watcher.</p>
<p>When Elasticsearch security features are enabled on your cluster, watches are run with the privileges of the user that stored the watches.
If your user is allowed to read index <code class="literal">a</code>, but not index <code class="literal">b</code>, then the exact same set of rules will apply during execution of a watch.</p>
<p>When using the run watch API, the authorization data of the user that called the API will be used as a base, instead of the information who stored the watch.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-execute-watch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.executeWatch({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_498"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (Optional, string)</strong></span>: The watch identifier.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">action_modes</code> (Optional, Record&lt;string, Enum("simulate" | "force_simulate" | "execute" | "force_execute" | "skip")&gt;)</strong></span>: Determines how to handle the watch actions as part of the watch execution.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">alternative_input</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: When present, the watch uses this object as a payload instead of executing its own input.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">ignore_condition</code> (Optional, boolean)</strong></span>: When set to <code class="literal">true</code>, the watch execution uses the always condition. This can also be specified as an HTTP parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">record_execution</code> (Optional, boolean)</strong></span>: When set to <code class="literal">true</code>, the watch record representing the watch execution result is persisted to the <code class="literal">.watcher-history</code> index for the current time.
In addition, the status of the watch is updated, possibly throttling subsequent runs.
This can also be specified as an HTTP parameter.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">simulated_actions</code> (Optional, { actions, all, use_all })</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">trigger_data</code> (Optional, { scheduled_time, triggered_time })</strong></span>: This structure is parsed as the data of the trigger event that will be used during the watch execution.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">watch</code> (Optional, { actions, condition, input, metadata, status, throttle_period, throttle_period_in_millis, transform, trigger })</strong></span>: When present, this watch is used instead of the one specified in the request.
This watch is not persisted to the index and <code class="literal">record_execution</code> cannot be set.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">debug</code> (Optional, boolean)</strong></span>: Defines whether the watch runs in debug mode.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_settings_4"></a>get_settings</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get Watcher index settings.
Get settings for the Watcher internal index (<code class="literal">.watches</code>).
Only a subset of settings are shown, for example <code class="literal">index.auto_expand_replicas</code> and <code class="literal">index.number_of_replicas</code>.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-get-settings.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.getSettings({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_499"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_get_watch"></a>get_watch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get a watch.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-get-watch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.getWatch({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_500"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The watch identifier.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_put_watch"></a>put_watch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Create or update a watch.
When a watch is registered, a new document that represents the watch is added to the <code class="literal">.watches</code> index and its trigger is immediately registered with the relevant trigger engine.
Typically for the <code class="literal">schedule</code> trigger, the scheduler is the trigger engine.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must use Kibana or this API to create a watch.
Do not add a watch directly to the <code class="literal">.watches</code> index by using the Elasticsearch index API.
If Elasticsearch security features are enabled, do not give users write privileges on the <code class="literal">.watches</code> index.</p>
</div>
</div>
<p>When you add a watch you can also define its initial active state by setting the <span class="strong strong"><strong>active</strong></span> parameter.</p>
<p>When Elasticsearch security features are enabled, your watch can index or search only on indices for which the user that stored the watch has privileges.
If the user is able to read index <code class="literal">a</code>, but not index <code class="literal">b</code>, the same will apply when the watch runs.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-put-watch.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.putWatch({ id })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_501"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">id</code> (string)</strong></span>: The identifier for the watch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">actions</code> (Optional, Record&lt;string, { add_backing_index, remove_backing_index }&gt;)</strong></span>: The list of actions that will be run if the condition matches.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">condition</code> (Optional, { always, array_compare, compare, never, script })</strong></span>: The condition that defines if the actions should be run.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">input</code> (Optional, { chain, http, search, simple })</strong></span>: The input that defines the input that loads the data for the watch.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metadata</code> (Optional, Record&lt;string, User-defined value&gt;)</strong></span>: Metadata JSON that will be copied into the history entries.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">throttle_period</code> (Optional, string | -1 | 0)</strong></span>: The minimum time between actions being run.
The default is 5 seconds.
This default can be changed in the config file with the setting <code class="literal">xpack.watcher.throttle.period.default_period</code>.
If both this value and the <code class="literal">throttle_period_in_millis</code> parameter are specified, Watcher uses the last parameter included in the request.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">throttle_period_in_millis</code> (Optional, Unit)</strong></span>: Minimum time in milliseconds between actions being run. Defaults to 5000. If both this value and the throttle_period parameter are specified, Watcher uses the last parameter included in the request.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">transform</code> (Optional, { chain, script, search })</strong></span>: The transform that processes the watch payload to prepare it for the watch actions.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">trigger</code> (Optional, { schedule })</strong></span>: The trigger that defines when the watch should run.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">active</code> (Optional, boolean)</strong></span>: The initial state of the watch.
The default value is <code class="literal">true</code>, which means the watch is active by default.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">if_primary_term</code> (Optional, number)</strong></span>: only update the watch if the last operation that has changed the watch has the specified primary term
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">if_seq_no</code> (Optional, number)</strong></span>: only update the watch if the last operation that has changed the watch has the specified sequence number
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">version</code> (Optional, number)</strong></span>: Explicit version number for concurrency control
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_query_watches"></a>query_watches</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Query watches.
Get all registered watches in a paginated manner and optionally filter watches by a query.</p>
<p>Note that only the <code class="literal">_id</code> and <code class="literal">metadata.*</code> fields are queryable or sortable.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-query-watches.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.queryWatches({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_502"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">from</code> (Optional, number)</strong></span>: The offset from the first result to fetch.
It must be non-negative.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">size</code> (Optional, number)</strong></span>: The number of hits to return.
It must be non-negative.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">query</code> (Optional, { bool, boosting, common, combined_fields, constant_score, dis_max, distance_feature, exists, function_score, fuzzy, geo_bounding_box, geo_distance, geo_grid, geo_polygon, geo_shape, has_child, has_parent, ids, intervals, knn, match, match_all, match_bool_prefix, match_none, match_phrase, match_phrase_prefix, more_like_this, multi_match, nested, parent_id, percolate, pinned, prefix, query_string, range, rank_feature, regexp, rule, script, script_score, semantic, shape, simple_query_string, span_containing, span_field_masking, span_first, span_multi, span_near, span_not, span_or, span_term, span_within, sparse_vector, term, terms, terms_set, text_expansion, weighted_tokens, wildcard, wrapper, type })</strong></span>: A query that filters the watches to be returned.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">sort</code> (Optional, string | { _score, _doc, _geo_distance, _script } | string | { _score, _doc, _geo_distance, _script }[])</strong></span>: One or more fields used to sort the search results.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">search_after</code> (Optional, number | number | string | boolean | null | User-defined value[])</strong></span>: Retrieve the next page of hits using a set of sort values from the previous page.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_start_3"></a>start</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Start the watch service.
Start the Watcher service if it is not already running.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-start.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.start({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_503"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: Period to wait for a connection to the master node.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stats_7"></a>stats</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get Watcher statistics.
This API always returns basic metrics.
You retrieve more metrics by using the metric parameter.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-stats.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.stats({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_504"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">metric</code> (Optional, Enum("_all" | "queued_watches" | "current_watches" | "pending_watches") | Enum("_all" | "queued_watches" | "current_watches" | "pending_watches")[])</strong></span>: Defines which additional metrics are included in the response.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">emit_stacktraces</code> (Optional, boolean)</strong></span>: Defines whether stack traces are generated for each watch that is running.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_stop_3"></a>stop</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Stop the watch service.
Stop the Watcher service if it is running.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-stop.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.stop({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_505"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for the master node.
If the master node is not available before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_update_settings_2"></a>update_settings</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Update Watcher index settings.
Update settings for the Watcher internal index (<code class="literal">.watches</code>).
Only a subset of settings can be modified.
This includes <code class="literal">index.auto_expand_replicas</code>, <code class="literal">index.number_of_replicas</code>, <code class="literal">index.routing.allocation.exclude.*</code>,
<code class="literal">index.routing.allocation.include.*</code> and <code class="literal">index.routing.allocation.require.*</code>.
Modification of <code class="literal">index.routing.allocation.include._tier_preference</code> is an exception and is not allowed as the
Watcher shards must always be in the <code class="literal">data_content</code> tier.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/watcher-api-update-settings.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.watcher.updateSettings({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_506"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index.auto_expand_replicas</code> (Optional, string)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">index.number_of_replicas</code> (Optional, number)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a response.
If no response is received before the timeout expires, the request fails and returns an error.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_xpack"></a>xpack</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_info_5"></a>info</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get information.
The information provided by the API includes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Build information including the build number and timestamp.
</li>
<li class="listitem">
License information about the currently installed license.
</li>
<li class="listitem">
Feature information for the features that are currently enabled and available under the current license.
</li>
</ul>
</div>
<p><a href="/guide/en/elasticsearch/reference/8.18/info-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.xpack.info({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_507"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">categories</code> (Optional, Enum("build" | "features" | "license")[])</strong></span>: A list of the information categories to include in the response.
For example, <code class="literal">build,license,features</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">accept_enterprise</code> (Optional, boolean)</strong></span>: If this param is used it must be set to true
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">human</code> (Optional, boolean)</strong></span>: Defines whether additional human-readable information is included in the response.
In particular, it adds descriptions and a tag line.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_usage_2"></a>usage</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<p>Get usage information.
Get information about the features that are currently enabled and available under the current license.
The API also provides some usage statistics.</p>
<p><a href="/guide/en/elasticsearch/reference/8.18/usage-api.html" class="ulink" target="_top">Endpoint documentation</a></p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">client.xpack.usage({ ... })</pre>
</div>
<div class="position-relative"><h4><a id="_arguments_508"></a>Arguments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.18/docs/reference.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Request (object):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><code class="literal">master_timeout</code> (Optional, string | -1 | 0)</strong></span>: The period to wait for a connection to the master node.
If no response is received before the timeout expires, the request fails and returns an error.
To indicate that the request should never timeout, set it to <code class="literal">-1</code>.
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="_advantages_of_using_this_endpoint_before_a_cross_cluster_search.html">« Advantages of using this endpoint before a cross-cluster search</a>
</span>
<span class="next">
<a href="examples.html">Examples »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
