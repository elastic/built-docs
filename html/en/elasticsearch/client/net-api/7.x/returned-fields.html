<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Selecting fields to return | Elasticsearch.Net and NEST: the .NET clients [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch.Net and NEST: the .NET clients [7.x]"/>
<link rel="up" href="search.html" title="Search"/>
<link rel="prev" href="bool-queries.html" title="Writing bool queries"/>
<link rel="next" href="scrolling-documents.html" title="Scrolling documents"/>
<meta name="DC.type" content="Learn/Docs/Clients/.Net/7.x"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="7.x"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch.Net and NEST:  the .NET clients [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="nest.html">NEST - High level client</a></span>
»
<span class="breadcrumb-link"><a href="search.html">Search</a></span>
»
<span class="breadcrumb-node">Selecting fields to return</span>
</div>
<div class="navheader">
<span class="prev">
<a href="bool-queries.html">« Writing bool queries</a>
</span>
<span class="next">
<a href="scrolling-documents.html">Scrolling documents »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="returned-fields"></a>Selecting fields to return<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/search/returned-fields.asciidoc">edit</a></h2>
</div></div></div>
<p>Sometimes you don&#8217;t need to return all of the fields of a document from a search query; for example, when showing
most recent posts on a blog, you may only need the title of the blog to be returned from the
query that finds the most recent posts.</p>
<p>There are two approaches that you can take to return only some of the fields from a document i.e. a <em>partial</em>
document (we use this term <em>loosely</em> here); using stored fields and source filtering. Both are quite different
in how they work.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="stored-fields"></a>Stored fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/search/returned-fields.asciidoc">edit</a></h3>
</div></div></div>
<p>When indexing a document, by default, Elasticsearch stores the originally sent JSON document in a special
field called <a href="/guide/en/elasticsearch/reference/7.x/mapping-source-field.html" class="ulink" target="_top">_source</a>. Documents returned from
a search query are materialized from the <code class="literal">_source</code> field returned from Elasticsearch for each hit.</p>
<p>It is also possible to store a field from the JSON document <em>separately</em> within Elasticsearch
by using <a href="/guide/en/elasticsearch/reference/7.x/mapping-store.html" class="ulink" target="_top">store</a> on the mapping. Why would you ever want to do this?
Well, you may disable <code class="literal">_source</code> so that the source is not stored and select to store only specific fields.
Another possibility is that the <code class="literal">_source</code> contains a field with large values, for example, the body of
a blog post, but typically only another field is needed, for example, the title of the blog post.
In this case, we don&#8217;t want to pay the cost of Elasticsearch deserializing the entire <code class="literal">_soure</code> just to
get a small field.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Opting to disable source for a type mapping means that the original JSON document sent to Elasticsearch
is <span class="strong strong"><strong>not</strong></span> stored and hence can never be retrieved. Whilst you may save disk space in doing so, certain
features are not going to work when source is disabled such as the Reindex API or on the fly
highlighting.</p>
<p>Seriously consider whether disabling source is what you really want to do for your use case.</p>
</div>
</div>
<p>When storing fields in this manner, the individual field values to return can be specified using
<code class="literal">.StoredFields</code> on the search request</p>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">var searchResponse = _client.Search&lt;Project&gt;(s =&gt; s
    .StoredFields(sf =&gt; sf
        .Fields(
            f =&gt; f.Name,
            f =&gt; f.StartedOn,
            f =&gt; f.Branches
        )
    )
    .Query(q =&gt; q
        .MatchAll()
    )
);</pre>
</div>
<p>And retrieving them is possible using <code class="literal">.Fields</code> on the response</p>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">foreach (var fieldValues in searchResponse.Fields)
{
    var document = new <a id="CO82-1"></a><i class="conum" data-value="1"></i>
    {
        Name = fieldValues.ValueOf&lt;Project, string&gt;(p =&gt; p.Name),
        StartedOn = fieldValues.Value&lt;DateTime&gt;(Infer.Field&lt;Project&gt;(p =&gt; p.StartedOn)),
        Branches = fieldValues.Values&lt;Project, string&gt;(p =&gt; p.Branches.First())
    };
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO82-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Construct a partial document as an anonymous type from the stored fields requested</p>
</td>
</tr>
</table>
</div>
<p>This works when storing fields separately. A much more common scenario however is to return
only a selection of fields from the <code class="literal">_source</code>; this is where source filtering comes in.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="source-filtering"></a>Source filtering<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/search/returned-fields.asciidoc">edit</a></h3>
</div></div></div>
<p>Only some of the fields of a document can be returned from a search query
using source filtering</p>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">var searchResponse = _client.Search&lt;Project&gt;(s =&gt; s
    .Source(sf =&gt; sf
        .Includes(i =&gt; i <a id="CO83-1"></a><i class="conum" data-value="1"></i>
            .Fields(
                f =&gt; f.Name,
                f =&gt; f.StartedOn,
                f =&gt; f.Branches
            )
        )
        .Excludes(e =&gt; e <a id="CO83-2"></a><i class="conum" data-value="2"></i>
            .Fields("num*") <a id="CO83-3"></a><i class="conum" data-value="3"></i>
        )
    )
    .Query(q =&gt; q
        .MatchAll()
    )
);</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO83-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Include</strong></span> the following fields</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO83-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Exclude</strong></span> the following fields</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO83-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Fields can be included or excluded through wildcard patterns</p>
</td>
</tr>
</table>
</div>
<p>With source filtering specified on the request, <code class="literal">.Documents</code> will
now contain <em>partial</em> documents, materialized from the source fields specified to include</p>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">var partialProjects = searchResponse.Documents;</pre>
</div>
<p>It&#8217;s possible to exclude <code class="literal">_source</code> from being returned altogether from a query with</p>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">searchResponse = _client.Search&lt;Project&gt;(s =&gt; s
    .Source(false)
    .Query(q =&gt; q
        .MatchAll()
    )
);</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="bool-queries.html">« Writing bool queries</a>
</span>
<span class="next">
<a href="scrolling-documents.html">Scrolling documents »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
