<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Shape Query Usage | Elasticsearch .NET Client [8.0] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch .NET Client [8.0]"/>
<link rel="up" href="specialized-queries.html" title="Specialized queries"/>
<link rel="prev" href="script-query-usage.html" title="Script Query Usage"/>
<link rel="next" href="span-queries.html" title="Span queries"/>
<meta name="DC.type" content="Learn/Docs/Clients/.Net/8.0"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="8.0"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch .NET Client [8.0]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="specialized-queries.html">Specialized queries</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="script-query-usage.html">« Script Query Usage</a>
</span>
<span class="next">
<a href="span-queries.html">Span queries »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="shape-query-usage"></a>Shape Query Usage<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
</div></div></div>
<p>Like geo_shape, Elasticsearch supports the ability to index arbitrary two dimension (non Geospatial) geometries making
it possible to map out virtual worlds, sporting venues, theme parks, and CAD diagrams. The shape field type
supports points, lines, polygons, multi-polygons, envelope, etc.</p>
<p>See the Elasticsearch documentation on <a href="/guide/en/elasticsearch/reference/master/query-dsl-shape-query.html" class="ulink" target="_top">shape queries</a> for more detail.</p>
<h2><a id="shape-query-point"></a>Querying with Point<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_97"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .Point(PointCoordinates)
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_97"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new PointGeoShape(PointCoordinates),
    Relation = ShapeRelation.Intersects
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "point",
        "coordinates": [
          38.897676,
          -77.03653
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-multipoint"></a>Querying with MultiPoint<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch 7.7.0+ required when MultiPoint is indexed using BKD trees (the default).</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_98"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .MultiPoint(MultiPointCoordinates)
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_98"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new MultiPointGeoShape(MultiPointCoordinates),
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "multipoint",
        "coordinates": [
          [
            38.897676,
            -77.03653
          ],
          [
            38.889939,
            -77.009051
          ]
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-linestring"></a>Querying with LineString<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_99"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .LineString(LineStringCoordinates)
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_99"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new LineStringGeoShape(LineStringCoordinates),
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "linestring",
        "coordinates": [
          [
            38.897676,
            -77.03653
          ],
          [
            38.889939,
            -77.009051
          ]
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-multilinestring"></a>Querying with MultiLineString<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_100"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .MultiLineString(MultiLineStringCoordinates)
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_100"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new MultiLineStringGeoShape(MultiLineStringCoordinates),
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "multilinestring",
        "coordinates": [
          [
            [
              2.0,
              12.0
            ],
            [
              2.0,
              13.0
            ],
            [
              3.0,
              13.0
            ],
            [
              3.0,
              12.0
            ]
          ],
          [
            [
              0.0,
              10.0
            ],
            [
              0.0,
              11.0
            ],
            [
              1.0,
              11.0
            ],
            [
              1.0,
              10.0
            ]
          ],
          [
            [
              0.2,
              10.2
            ],
            [
              0.2,
              10.8
            ],
            [
              0.8,
              10.8
            ],
            [
              0.8,
              12.0
            ]
          ]
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-polygon"></a>Querying with Polygon<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_101"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .Polygon(PolygonCoordinates)
    )
    .IgnoreUnmapped()
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_101"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new PolygonGeoShape(PolygonCoordinates),
    IgnoreUnmapped = true,
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "ignore_unmapped": true,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "polygon",
        "coordinates": [
          [
            [
              10.0,
              -17.0
            ],
            [
              15.0,
              16.0
            ],
            [
              0.0,
              12.0
            ],
            [
              -15.0,
              16.0
            ],
            [
              -10.0,
              -17.0
            ],
            [
              10.0,
              -17.0
            ]
          ],
          [
            [
              8.2,
              18.2
            ],
            [
              8.2,
              -18.8
            ],
            [
              -8.8,
              -10.8
            ],
            [
              8.8,
              18.2
            ]
          ]
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-multipolygon"></a>Querying with MultiPolygon<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_102"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .MultiPolygon(MultiPolygonCoordinates)
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_102"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new MultiPolygonGeoShape(MultiPolygonCoordinates),
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "multipolygon",
        "coordinates": [
          [
            [
              [
                10.0,
                -17.0
              ],
              [
                15.0,
                16.0
              ],
              [
                0.0,
                12.0
              ],
              [
                -15.0,
                16.0
              ],
              [
                -10.0,
                -17.0
              ],
              [
                10.0,
                -17.0
              ]
            ],
            [
              [
                8.2,
                18.2
              ],
              [
                8.2,
                -18.8
              ],
              [
                -8.8,
                -10.8
              ],
              [
                8.8,
                18.2
              ]
            ]
          ],
          [
            [
              [
                8.0,
                -15.0
              ],
              [
                15.0,
                16.0
              ],
              [
                0.0,
                12.0
              ],
              [
                -15.0,
                16.0
              ],
              [
                -10.0,
                -17.0
              ],
              [
                8.0,
                -15.0
              ]
            ]
          ]
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-geometrycollection"></a>Querying with GeometryCollection<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_103"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .GeometryCollection(
            new PointGeoShape(PointCoordinates),
            new MultiPointGeoShape(MultiPointCoordinates),
            new LineStringGeoShape(LineStringCoordinates),
            new MultiLineStringGeoShape(MultiLineStringCoordinates),
            new PolygonGeoShape(PolygonCoordinates),
            new MultiPolygonGeoShape(MultiPolygonCoordinates)
        )
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_103"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new GeometryCollection(new IGeoShape[]
    {
        new PointGeoShape(PointCoordinates),
        new MultiPointGeoShape(MultiPointCoordinates),
        new LineStringGeoShape(LineStringCoordinates),
        new MultiLineStringGeoShape(MultiLineStringCoordinates),
        new PolygonGeoShape(PolygonCoordinates),
        new MultiPolygonGeoShape(MultiPolygonCoordinates),
    }),
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "geometrycollection",
        "geometries": [
          {
            "type": "point",
            "coordinates": [
              38.897676,
              -77.03653
            ]
          },
          {
            "type": "multipoint",
            "coordinates": [
              [
                38.897676,
                -77.03653
              ],
              [
                38.889939,
                -77.009051
              ]
            ]
          },
          {
            "type": "linestring",
            "coordinates": [
              [
                38.897676,
                -77.03653
              ],
              [
                38.889939,
                -77.009051
              ]
            ]
          },
          {
            "type": "multilinestring",
            "coordinates": [
              [
                [
                  2.0,
                  12.0
                ],
                [
                  2.0,
                  13.0
                ],
                [
                  3.0,
                  13.0
                ],
                [
                  3.0,
                  12.0
                ]
              ],
              [
                [
                  0.0,
                  10.0
                ],
                [
                  0.0,
                  11.0
                ],
                [
                  1.0,
                  11.0
                ],
                [
                  1.0,
                  10.0
                ]
              ],
              [
                [
                  0.2,
                  10.2
                ],
                [
                  0.2,
                  10.8
                ],
                [
                  0.8,
                  10.8
                ],
                [
                  0.8,
                  12.0
                ]
              ]
            ]
          },
          {
            "type": "polygon",
            "coordinates": [
              [
                [
                  10.0,
                  -17.0
                ],
                [
                  15.0,
                  16.0
                ],
                [
                  0.0,
                  12.0
                ],
                [
                  -15.0,
                  16.0
                ],
                [
                  -10.0,
                  -17.0
                ],
                [
                  10.0,
                  -17.0
                ]
              ],
              [
                [
                  8.2,
                  18.2
                ],
                [
                  8.2,
                  -18.8
                ],
                [
                  -8.8,
                  -10.8
                ],
                [
                  8.8,
                  18.2
                ]
              ]
            ]
          },
          {
            "type": "multipolygon",
            "coordinates": [
              [
                [
                  [
                    10.0,
                    -17.0
                  ],
                  [
                    15.0,
                    16.0
                  ],
                  [
                    0.0,
                    12.0
                  ],
                  [
                    -15.0,
                    16.0
                  ],
                  [
                    -10.0,
                    -17.0
                  ],
                  [
                    10.0,
                    -17.0
                  ]
                ],
                [
                  [
                    8.2,
                    18.2
                  ],
                  [
                    8.2,
                    -18.8
                  ],
                  [
                    -8.8,
                    -10.8
                  ],
                  [
                    8.8,
                    18.2
                  ]
                ]
              ],
              [
                [
                  [
                    8.0,
                    -15.0
                  ],
                  [
                    15.0,
                    16.0
                  ],
                  [
                    0.0,
                    12.0
                  ],
                  [
                    -15.0,
                    16.0
                  ],
                  [
                    -10.0,
                    -17.0
                  ],
                  [
                    8.0,
                    -15.0
                  ]
                ]
              ]
            ]
          }
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-envelope"></a>Querying with Envelope<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_104"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .Envelope(EnvelopeCoordinates)
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_104"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new EnvelopeGeoShape(EnvelopeCoordinates),
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "envelope",
        "coordinates": [
          [
            -45.0,
            45.0
          ],
          [
            45.0,
            -45.0
          ]
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-circle"></a>Querying with Circle<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Available in Elasticsearch 7.7.0+</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_105"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .Shape(s =&gt; s
        .Circle(CircleCoordinates, "100m")
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_105"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    Shape = new CircleGeoShape(CircleCoordinates, "100m"),
    Relation = ShapeRelation.Intersects,
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "relation": "intersects",
      "shape": {
        "type": "circle",
        "radius": "100m",
        "coordinates": [
          45.0,
          -45.0
        ]
      }
    }
  }
}</pre>
</div>
<h2><a id="shape-query-indexedshape"></a>Querying with an indexed shape<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h2>
<p>The Query also supports using a shape which has already been indexed in another index. This is particularly useful for when you have
a pre-defined list of shapes which are useful to your application and you want to reference this using a logical name (for example New Zealand)
rather than having to provide their coordinates each time. In this situation it is only necessary to provide:</p>
<p>See the Elasticsearch documentation on <a href="/guide/en/elasticsearch/reference/master/query-dsl-shape-query.html" class="ulink" target="_top">https://www.elastic.co/guide/en/elasticsearch/reference/master/query-dsl-shape-query.html</a> for more detail.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_106"></a>Fluent DSL example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">q
.Shape(c =&gt; c
    .Name("named_query")
    .Boost(1.1)
    .Field(p =&gt; p.ArbitraryShape)
    .IndexedShape(p =&gt; p
        .Id(Project.Instance.Name)
        .Path(pp =&gt; pp.ArbitraryShape)
        .Routing(Project.Instance.Name)
    )
    .Relation(ShapeRelation.Intersects)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_106"></a>Object Initializer syntax example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-net/edit/8.0/docs/query-dsl/specialized/shape/shape-query-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new ShapeQuery
{
    Name = "named_query",
    Boost = 1.1,
    Field = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
    IndexedShape = new FieldLookup
    {
        Id = Project.Instance.Name,
        Index = Infer.Index&lt;Project&gt;(),
        Path = Infer.Field&lt;Project&gt;(p =&gt; p.ArbitraryShape),
        Routing = Project.Instance.Name
    },
    Relation = ShapeRelation.Intersects
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "shape": {
    "_name": "named_query",
    "boost": 1.1,
    "arbitraryShape": {
      "indexed_shape": {
        "id": "Durgan LLC",
        "index": "project",
        "path": "arbitraryShape",
        "routing": "Durgan LLC"
      },
      "relation": "intersects"
    }
  }
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="script-query-usage.html">« Script Query Usage</a>
</span>
<span class="next">
<a href="span-queries.html">Span queries »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
