<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="description" content="Reference documentation of elasticsearch-hadoop">
<title>Logging | Elasticsearch for Apache Hadoop [6.1] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch for Apache Hadoop [6.1]"/>
<link rel="up" href="reference.html" title="Elasticsearch for Apache Hadoop"/>
<link rel="prev" href="security.html" title="Security"/>
<link rel="next" href="mapreduce.html" title="Map/Reduce integration"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Apache Hadoop/6.1"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="6.1"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<p>
  <strong>WARNING</strong>: Version 6.1 has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch for Apache Hadoop [6.1]</a></span>
»
<span class="breadcrumb-link"><a href="reference.html">Elasticsearch for Apache Hadoop</a></span>
»
<span class="breadcrumb-node">Logging</span>
</div>
<div class="navheader">
<span class="prev">
<a href="security.html">« Security</a>
</span>
<span class="next">
<a href="mapreduce.html">Map/Reduce integration »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="logging"></a>Logging<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-hadoop/edit/6.1/docs/src/reference/asciidoc/core/configuration.adoc">edit</a></h2>
</div></div></div>
<p>elasticsearch-hadoop uses <a href="http://commons.apache.org/proper/commons-logging/" class="ulink" target="_top">commons-logging</a> library, same as Hadoop, for its logging infrastructure and thus it shares the same configuration means. Out of the box, no configuration is required - by default, elasticsearch-hadoop logs relevant information about the job progress at <code class="literal">INFO</code> level. Typically, whatever integration you are using (Map/Reduce, Cascading, Hive, Pig), each job will print in the console at least one message indicating the elasticsearch-hadoop version used:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">16:13:01,946  INFO main util.Version - Elasticsearch Hadoop v2.0.0.BUILD-SNAPSHOT [f2c5c3e280]</pre>
</div>
<p>Configuring logging for Hadoop (or Cascading, Hive and Pig) is outside the scope of this documentation, however in short, at runtime, Hadoop relies on <a href="http://logging.apache.org/log4j/1.2/" class="ulink" target="_top">log4j 1.2</a> as an actual logging implementation. In practice, this means adding the package name of interest and its level logging the <code class="literal">log4j.properties</code> file in the job classpath.
elasticsearch-hadoop provides the following important packages:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="center" valign="top">Package</th>
<th align="center" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.hadoop.cascading</code></p></td>
<td align="center" valign="top"><p>Cascading integration</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.hadoop.hive</code></p></td>
<td align="center" valign="top"><p>Apache Hive integration</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.hadoop.mr</code></p></td>
<td align="center" valign="top"><p>Map/Reduce functionality</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.hadoop.pig</code></p></td>
<td align="center" valign="top"><p>Apache Pig integration</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.hadoop.rest</code></p></td>
<td align="center" valign="top"><p>REST/transport infrastructure</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.hadoop.serialization</code></p></td>
<td align="center" valign="top"><p>Serialization package</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.spark</code></p></td>
<td align="center" valign="top"><p>Apache Spark package</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">org.elasticsearch.storm</code></p></td>
<td align="center" valign="top"><p>Apache Storm package</p></td>
</tr>
</tbody>
</table>
</div>
<p>The default logging level (<code class="literal">INFO</code>) is suitable for day-to-day use; if troubleshooting is needed, consider switching to <code class="literal">DEBUG</code> but be selective of the packages included. For low-level details, enable level <code class="literal">TRACE</code> however do remember that it will result in a <span class="strong strong"><strong>significant</strong></span> amount of logging data which <em>will</em> impact your job performance and environment.</p>
<p>To put everything together, if you want to enable <code class="literal">DEBUG</code> logging on the Map/Reduce package make changes to the <code class="literal">log4j.properties</code> (used by your environment):</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">log4j.category.org.elasticsearch.hadoop.mr=DEBUG</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>See the log4j <a href="https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html#doConfigure%28java.lang.String,%20org.apache.log4j.spi.LoggerRepository%29" class="ulink" target="_top">javadoc</a> for more information.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_configure_the_executing_jvm_logging_not_the_client"></a>Configure the <em>executing</em> JVM logging not the client<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-hadoop/edit/6.1/docs/src/reference/asciidoc/core/configuration.adoc">edit</a></h2>
</div></div></div>
<p>One thing to note is that in almost all cases, one needs to configure logging in the <em>executing</em> JVM, where the Map/Reduce tasks actually run and not on the client, where the job is assembled or monitored. Depending on your library, platform and version this can done through some dedicated settings.
In particular Map/Reduce-based libraries like Pig or Hive can be difficult to configure since at runtime, they create Map/Reduce tasks to actually perform the work. Thus, one needs to configure logging and pass the configuration to the Map/Reduce layer for logging to occur.
In both cases, this can be achieved through the <code class="literal">SET</code> command. In particular when using Hadoop 2.6, one can use <code class="literal">mapreduce.job.log4j-properties-file</code> along with an appropriate <a href="https://github.com/apache/hadoop/blob/release-2.6.0/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/resources/container-log4j.properties" class="ulink" target="_top"><code class="literal">container-log4j.properties</code></a> file.
It&#8217;s worth mentioning that Pig allows jobs to be executed locally and logging to be enabled through <code class="literal">pig -x local -4 myLoggingFile someScript.pig</code></p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="security.html">« Security</a>
</span>
<span class="next">
<a href="mapreduce.html">Map/Reduce integration »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
