<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Getting started with AWS | Elasticsearch Plugins and Integrations [5.5] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Plugins and Integrations [5.5]"/>
<link rel="up" href="discovery-ec2.html" title="EC2 Discovery Plugin"/>
<link rel="prev" href="discovery-ec2.html" title="EC2 Discovery Plugin"/>
<link rel="next" href="discovery-ec2-discovery.html" title="EC2 Discovery"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Plugins/5.5"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="5.5"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Plugins and Integrations [5.5]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="discovery.html">Discovery Plugins</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="discovery-ec2.html">EC2 Discovery Plugin</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="discovery-ec2.html">« EC2 Discovery Plugin</a>
</span>
<span class="next">
<a href="discovery-ec2-discovery.html">EC2 Discovery »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="discovery-ec2-usage"></a>Getting started with AWS<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.5/docs/plugins/discovery-ec2.asciidoc">edit</a></h3>
</div></div></div>
<p>The plugin will default to using
<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html" class="ulink" target="_top">IAM Role</a>
credentials for authentication. These can be overridden by, in increasing
order of precedence, system properties <code class="literal">aws.accessKeyId</code> and <code class="literal">aws.secretKey</code>,
environment variables <code class="literal">AWS_ACCESS_KEY_ID</code> and <code class="literal">AWS_SECRET_KEY</code>, or the
elasticsearch config using <code class="literal">cloud.aws.access_key</code> and <code class="literal">cloud.aws.secret_key</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cloud:
    aws:
        access_key: AKVAIQBF2RECL7FJWGJQ
        secret_key: vExyMThREXeRMm/b/LRzEB8jWwvzQeXgjqMX+6br</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="discovery-ec2-usage-security"></a>Transport security<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.5/docs/plugins/discovery-ec2.asciidoc">edit</a></h4>
</div></div></div>
<p>By default this plugin uses HTTPS for all API calls to AWS endpoints. If you wish to configure HTTP you can set
<code class="literal">cloud.aws.protocol</code> in the elasticsearch config. You can optionally override this setting per individual service
via: <code class="literal">cloud.aws.ec2.protocol</code> or <code class="literal">cloud.aws.s3.protocol</code>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cloud:
    aws:
        protocol: https
        ec2:
            protocol: https</pre>
</div>
<p>In addition, a proxy can be configured with the <code class="literal">proxy.host</code>, <code class="literal">proxy.port</code>, <code class="literal">proxy.username</code> and <code class="literal">proxy.password</code> settings
(note that protocol can be <code class="literal">http</code> or <code class="literal">https</code>):</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cloud:
    aws:
        protocol: https
        proxy:
            host: proxy1.company.com
            port: 8083
            username: myself
            password: theBestPasswordEver!</pre>
</div>
<p>You can also set different proxies for <code class="literal">ec2</code> and <code class="literal">s3</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cloud:
    aws:
        s3:
            proxy:
                host: proxy1.company.com
                port: 8083
                username: myself1
                password: theBestPasswordEver1!
        ec2:
            proxy:
                host: proxy2.company.com
                port: 8083
                username: myself2
                password: theBestPasswordEver2!</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="discovery-ec2-usage-region"></a>Region<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.5/docs/plugins/discovery-ec2.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">cloud.aws.region</code> can be set to a region and will automatically use the relevant settings for both <code class="literal">ec2</code> and <code class="literal">s3</code>.
The available values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">us-east</code> (<code class="literal">us-east-1</code>) for US East (N. Virginia)
</li>
<li class="listitem">
<code class="literal">us-east-2</code> for US East (Ohio)
</li>
<li class="listitem">
<code class="literal">us-west</code> (<code class="literal">us-west-1</code>) for US West (N. California)
</li>
<li class="listitem">
<code class="literal">us-west-2</code> for US West (Oregon)
</li>
<li class="listitem">
<code class="literal">ap-south</code> (<code class="literal">ap-south-1</code>) for Asia Pacific (Mumbai)
</li>
<li class="listitem">
<code class="literal">ap-southeast</code> (<code class="literal">ap-southeast-1</code>) for Asia Pacific (Singapore)
</li>
<li class="listitem">
<code class="literal">ap-southeast-2</code> for Asia Pacific (Sydney)
</li>
<li class="listitem">
<code class="literal">ap-northeast</code> (<code class="literal">ap-northeast-1</code>) for Asia Pacific (Tokyo)
</li>
<li class="listitem">
<code class="literal">ap-northeast-2</code> (<code class="literal">ap-northeast-2</code>) for Asia Pacific (Seoul)
</li>
<li class="listitem">
<code class="literal">eu-west</code> (<code class="literal">eu-west-1</code>) for EU (Ireland)
</li>
<li class="listitem">
<code class="literal">eu-west-2</code> (<code class="literal">eu-west-2</code>) for EU (London)
</li>
<li class="listitem">
<code class="literal">eu-central</code> (<code class="literal">eu-central-1</code>) for EU (Frankfurt)
</li>
<li class="listitem">
<code class="literal">sa-east</code> (<code class="literal">sa-east-1</code>) for South America (São Paulo)
</li>
<li class="listitem">
<code class="literal">cn-north</code> (<code class="literal">cn-north-1</code>) for China (Beijing)
</li>
<li class="listitem">
<code class="literal">ca-central</code> (<code class="literal">ca-central-1</code>) for Canada (Central)
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="discovery-ec2-usage-signer"></a>EC2 Signer API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.5/docs/plugins/discovery-ec2.asciidoc">edit</a></h4>
</div></div></div>
<p>If you are using a compatible EC2 service, they might be using an older API to sign the requests.
You can set your compatible signer API using <code class="literal">cloud.aws.signer</code> (or <code class="literal">cloud.aws.ec2.signer</code>)
with the right signer to use.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_read_timeout"></a>Read timeout<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.5/docs/plugins/discovery-ec2.asciidoc">edit</a></h4>
</div></div></div>
<p>Read timeout determines the amount of time to wait for data to be transferred over an established,
open connection before the connection is timed out. Defaults to AWS SDK default value (<code class="literal">50 s</code>).
It can be configured with <code class="literal">cloud.aws.read_timeout</code> (or <code class="literal">cloud.aws.ec2.read_timeout</code>) setting:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cloud.aws.read_timeout: 30s</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="discovery-ec2.html">« EC2 Discovery Plugin</a>
</span>
<span class="next">
<a href="discovery-ec2-discovery.html">EC2 Discovery »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
