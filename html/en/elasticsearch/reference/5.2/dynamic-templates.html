<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Dynamic templates | Elasticsearch Guide [5.2] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Guide [5.2]"/>
<link rel="up" href="dynamic-mapping.html" title="Dynamic Mapping"/>
<link rel="prev" href="dynamic-field-mapping.html" title="Dynamic field mapping"/>
<link rel="next" href="override-default-template.html" title="Override default template"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/5.2"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="5.2"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<p>
  <strong>WARNING</strong>: Version 5.2 of Elasticsearch has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [5.2]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="dynamic-mapping.html">Dynamic Mapping</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="dynamic-field-mapping.html">« Dynamic field mapping</a>
</span>
<span class="next">
<a href="override-default-template.html">Override default template »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="dynamic-templates"></a>Dynamic templates<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h2>
</div></div></div>
<p>Dynamic templates allow you to define custom mappings that can be applied to
dynamically added fields based on:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the <a class="xref" href="dynamic-mapping.html" title="Dynamic Mapping">datatype</a> detected by Elasticsearch, with <a class="xref" href="dynamic-templates.html#match-mapping-type" title="match_mapping_type"><code class="literal">match_mapping_type</code></a>.
</li>
<li class="listitem">
the name of the field, with <a class="xref" href="dynamic-templates.html#match-unmatch" title="match and unmatch"><code class="literal">match</code> and <code class="literal">unmatch</code></a> or <a class="xref" href="dynamic-templates.html#match-pattern" title="match_pattern"><code class="literal">match_pattern</code></a>.
</li>
<li class="listitem">
the full dotted path to the field, with <a class="xref" href="dynamic-templates.html#path-match-unmatch" title="path_match and path_unmatch"><code class="literal">path_match</code> and <code class="literal">path_unmatch</code></a>.
</li>
</ul>
</div>
<p>The original field name <code class="literal">{name}</code> and the detected datatype
<code class="literal">{dynamic_type</code>} <a class="xref" href="dynamic-templates.html#template-variables" title="{name} and {dynamic_type}">template variables</a> can be used in
the mapping specification as placeholders.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Dynamic field mappings are only added when a field contains a
concrete value&#8201;&#8212;&#8201;not <code class="literal">null</code> or an empty array. This means that if the
<code class="literal">null_value</code> option  is used in a <code class="literal">dynamic_template</code>, it will only be applied
after the first document  with a concrete value for the field has been
indexed.</p>
</div>
</div>
<p>Dynamic templates are specified as an array of named objects:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">  "dynamic_templates": [
    {
      "my_template_name": { <a id="CO238-1"></a><i class="conum" data-value="1"></i>
        ...  match conditions ... <a id="CO238-2"></a><i class="conum" data-value="2"></i>
        "mapping": { ... } <a id="CO238-3"></a><i class="conum" data-value="3"></i>
      }
    },
    ...
  ]</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO238-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The template name can be any string value.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO238-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The match conditions can include any of : <code class="literal">match_mapping_type</code>, <code class="literal">match</code>, <code class="literal">match_pattern</code>, <code class="literal">unmatch</code>, <code class="literal">path_match</code>, <code class="literal">path_unmatch</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO238-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The mapping that the matched field should use.</p>
</td>
</tr>
</table>
</div>
<p>Templates are processed in order&#8201;&#8212;&#8201;the first matching template wins. New
templates can be appended to the end of the list with the
<a class="xref" href="indices-put-mapping.html" title="Put Mapping">PUT mapping</a> API.  If a new template has the same
name as an existing template, it will replace the old version.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="match-mapping-type"></a><code class="literal">match_mapping_type</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">match_mapping_type</code> matches on the datatype detected by
<a class="xref" href="dynamic-field-mapping.html" title="Dynamic field mapping">dynamic field mapping</a>, in other words, the datatype
that Elasticsearch thinks the field should have.  Only the following datatypes
can be automatically detected: <code class="literal">boolean</code>, <code class="literal">date</code>, <code class="literal">double</code>, <code class="literal">long</code>, <code class="literal">object</code>,
<code class="literal">string</code>.  It also accepts <code class="literal">*</code> to match all datatypes.</p>
<p>For example, if we wanted to map all integer fields as <code class="literal">integer</code> instead of
<code class="literal">long</code>, and all <code class="literal">string</code> fields as both <code class="literal">text</code> and <code class="literal">keyword</code>, we
could use the following template:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "integers": {
            "match_mapping_type": "long",
            "mapping": {
              "type": "integer"
            }
          }
        },
        {
          "strings": {
            "match_mapping_type": "string",
            "mapping": {
              "type": "text",
              "fields": {
                "raw": {
                  "type":  "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      ]
    }
  }
}

PUT my_index/my_type/1
{
  "my_integer": 5, <a id="CO239-1"></a><i class="conum" data-value="1"></i>
  "my_string": "Some string" <a id="CO239-2"></a><i class="conum" data-value="2"></i>
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/682.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO239-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">my_integer</code> field is mapped as an <code class="literal">integer</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO239-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">my_string</code> field is mapped as a <code class="literal">text</code>, with a <code class="literal">keyword</code> <a class="xref" href="multi-fields.html" title="fields">multi field</a>.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="match-unmatch"></a><code class="literal">match</code> and <code class="literal">unmatch</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">match</code> parameter uses a pattern to match on the fieldname, while
<code class="literal">unmatch</code> uses a pattern to exclude fields matched by <code class="literal">match</code>.</p>
<p>The following example matches all <code class="literal">string</code> fields whose name starts with
<code class="literal">long_</code> (except for those which end with <code class="literal">_text</code>) and maps them as <code class="literal">long</code>
fields:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "longs_as_strings": {
            "match_mapping_type": "string",
            "match":   "long_*",
            "unmatch": "*_text",
            "mapping": {
              "type": "long"
            }
          }
        }
      ]
    }
  }
}

PUT my_index/my_type/1
{
  "long_num": "5", <a id="CO240-1"></a><i class="conum" data-value="1"></i>
  "long_text": "foo" <a id="CO240-2"></a><i class="conum" data-value="2"></i>
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/683.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">long_num</code> field is mapped as a <code class="literal">long</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">long_text</code> field uses the default <code class="literal">string</code> mapping.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="match-pattern"></a><code class="literal">match_pattern</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">match_pattern</code> parameter adjusts the behavior of the <code class="literal">match</code> parameter
such that it supports full Java regular expression matching on the field name
instead of simple wildcards, for instance:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">  "match_pattern": "regex",
  "match": "^profit_\d+$"</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="path-match-unmatch"></a><code class="literal">path_match</code> and <code class="literal">path_unmatch</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">path_match</code> and <code class="literal">path_unmatch</code> parameters work in the same way as <code class="literal">match</code>
and <code class="literal">unmatch</code>, but operate on the full dotted path to the field, not just the
final name, e.g. <code class="literal">some_object.*.some_field</code>.</p>
<p>This example copies the values of any fields in the <code class="literal">name</code> object to the
top-level <code class="literal">full_name</code> field, except for the <code class="literal">middle</code> field:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "full_name": {
            "path_match":   "name.*",
            "path_unmatch": "*.middle",
            "mapping": {
              "type":       "text",
              "copy_to":    "full_name"
            }
          }
        }
      ]
    }
  }
}

PUT my_index/my_type/1
{
  "name": {
    "first":  "Alice",
    "middle": "Mary",
    "last":   "White"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/684.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-variables"></a><code class="literal">{name}</code> and <code class="literal">{dynamic_type}</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">{name}</code> and <code class="literal">{dynamic_type}</code> placeholders are replaced in the <code class="literal">mapping</code>
with the field name and detected dynamic type.  The following example sets all
string fields to use an <a class="xref" href="analyzer.html" title="analyzer"><code class="literal">analyzer</code></a> with the same name as the
field, and disables <a class="xref" href="doc-values.html" title="doc_values"><code class="literal">doc_values</code></a> for all non-string fields:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "named_analyzers": {
            "match_mapping_type": "string",
            "match": "*",
            "mapping": {
              "type": "text",
              "analyzer": "{name}"
            }
          }
        },
        {
          "no_doc_values": {
            "match_mapping_type":"*",
            "mapping": {
              "type": "{dynamic_type}",
              "doc_values": false
            }
          }
        }
      ]
    }
  }
}

PUT my_index/my_type/1
{
  "english": "Some English text", <a id="CO241-1"></a><i class="conum" data-value="1"></i>
  "count":   5 <a id="CO241-2"></a><i class="conum" data-value="2"></i>
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/685.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO241-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">english</code> field is mapped as a <code class="literal">string</code> field with the <code class="literal">english</code> analyzer.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO241-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">count</code> field is mapped as a <code class="literal">long</code> field with <code class="literal">doc_values</code> disabled</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="template-examples"></a>Template examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h3>
</div></div></div>
<p>Here are some examples of potentially useful dynamic templates:</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_structured_search"></a>Structured search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h4>
</div></div></div>
<p>By default elasticsearch will map string fields as a <code class="literal">text</code> field with a sub
<code class="literal">keyword</code> field. However if you are only indexing structured content and not
interested in full text search, you can make elasticsearch map your fields
only as `keyword`s. Note that this means that in order to search those fields,
you will have to search on the exact same value that was indexed.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "strings_as_keywords": {
            "match_mapping_type": "string",
            "mapping": {
              "type": "keyword"
            }
          }
        }
      ]
    }
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="text-only-mappings-strings"></a><code class="literal">text</code>-only mappings for strings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h4>
</div></div></div>
<p>On the contrary to the previous example, if the only thing that you care about
on your string fields is full-text search, and if you don&#8217;t plan on running
aggregations, sorting or exact search on your string fields, you could tell
elasticsearch to map it only as a text field (which was the default behaviour
before 5.0):</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "strings_as_text": {
            "match_mapping_type": "string",
            "mapping": {
              "type": "text"
            }
          }
        }
      ]
    }
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_disabled_norms"></a>Disabled norms<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h4>
</div></div></div>
<p>Norms are index-time scoring factors. If you do not care about scoring, which
would be the case for instance if you never sort documents by score, you could
disable the storage of these scoring factors in the index and save some space.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "strings_as_keywords": {
            "match_mapping_type": "string",
            "mapping": {
              "type": "text",
              "norms": false,
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      ]
    }
  }
}</pre>
</div>
<p>The sub <code class="literal">keyword</code> field appears in this template to be consistent with the
default rules of dynamic mappings. Of course if you do not need them because
you don&#8217;t need to perform exact search or aggregate on this field, you could
remove it as described in the previous section.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_time_series"></a>Time-series<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.2/docs/reference/mapping/dynamic/templates.asciidoc">edit</a></h4>
</div></div></div>
<p>When doing time series analysis with elasticsearch, it is common to have many
numeric fields that you will often aggregate on but never filter on. In such a
case, you could disable indexing on those fields to save disk space and also
maybe gain some indexing speed:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">PUT my_index
{
  "mappings": {
    "my_type": {
      "dynamic_templates": [
        {
          "unindexed_longs": {
            "match_mapping_type": "long",
            "mapping": {
              "type": "long",
              "index": false
            }
          }
        },
        {
          "unindexed_doubles": {
            "match_mapping_type": "double",
            "mapping": {
              "type": "float", <a id="CO242-1"></a><i class="conum" data-value="1"></i>
              "index": false
            }
          }
        }
      ]
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Like the default dynamic mapping rules, doubles are mapped as floats, which
are usually accurate enough, yet require half the disk space.</p>
</td>
</tr>
</table>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="dynamic-field-mapping.html">« Dynamic field mapping</a>
</span>
<span class="next">
<a href="override-default-template.html">Override default template »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
