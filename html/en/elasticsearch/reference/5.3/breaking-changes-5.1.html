<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Breaking changes in 5.1 | Elasticsearch Guide [5.3] | Elastic</title>
<meta class="elastic" name="content" content="Breaking changes in 5.1 | Elasticsearch Guide [5.3]">

<link rel="home" href="index.html" title="Elasticsearch Guide [5.3]"/>
<link rel="up" href="breaking-changes.html" title="Breaking changes"/>
<link rel="prev" href="_shadow_replicas_are_deprecated.html" title="Shadow Replicas are deprecated"/>
<link rel="next" href="breaking-changes-5.0.html" title="Breaking changes in 5.0"/>
<meta class="elastic" name="product_version" content="5.3"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/5.3"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="5.3"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="_shadow_replicas_are_deprecated.html">« Shadow Replicas are deprecated</a>
</span>
<span class="next">
<a href="breaking-changes-5.0.html">Breaking changes in 5.0 »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [5.3]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Breaking changes in 5.1</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="breaking-changes-5.1"></a>Breaking changes in 5.1</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
</div></div></div>
<div class="position-relative"><h3><a id="breaking_51_index_api_changes"></a>Indices API changes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_alias_names_are_validated_against_most_of_the_rules_for_index_names"></a>Alias names are validated against (most of) the rules for index names</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<p>Alias names are now validated against almost the same set of rules that validate
index names. The only difference is that aliases are allowed to have uppercase
characters. That means that aliases may not:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Start with <code class="literal">_</code>, <code class="literal">-</code>, or <code class="literal">+</code>
</li>
<li class="listitem">
Contain <code class="literal">#</code>, <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` <code class="literal">, `,</code>
</li>
<li class="listitem">
Be longer than 100 UTF-8 encoded bytes
</li>
<li class="listitem">
Be exactly <code class="literal">.</code> or <code class="literal">..</code>
</li>
</ul>
</div>
<p>Aliases created in versions before 5.1.0 are still supported but no new aliases
can be added that violate those rules. Since modifying an alias in elasticsearch
is removing it and recreating it atomically using the <code class="literal">_aliases</code> API, modifying
aliases with invalid names is also no longer supported.</p>
<div class="position-relative"><h3><a id="breaking_51_java_api_changes"></a>Java API changes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_log4j_dependency_has_been_upgraded"></a>Log4j dependency has been upgraded</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<p>The Log4j dependency has been upgraded from version 2.6.2 to version 2.7. If you&#8217;re using the transport client in your
application, you should update your Log4j dependencies accordingly.</p>
<div class="position-relative"><h4><a id="_local_discovery_has_been_removed"></a>Local discovery has been removed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<p>Local discovery has been removed; this discovery implementation was used internally in the tribe service and for tests
that ran multiple nodes inside the same JVM. This means that setting <code class="literal">discovery.type</code> to <code class="literal">local</code> will fail on startup.</p>
<div class="position-relative"><h3><a id="breaking_51_plugin_api"></a>Plugin API changes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_unicasthostsprovider_now_pull_based"></a>UnicastHostsProvider now pull based</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<p>Plugging in a <code class="literal">UnicastHostsProvider</code> for zen discovery is now pull based. Implement a <code class="literal">DiscoveryPlugin</code> and override the <code class="literal">getZenHostsProviders</code> method. Selecting a hosts provider is also now done with a separate setting, <code class="literal">discovery.zen.hosts_provider</code>.</p>
<div class="position-relative"><h4><a id="_zenping_and_masterelectservice_pluggability_removed"></a>ZenPing and MasterElectService pluggability removed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<p>These classes are no longer pluggable. Either implement your own discovery, or extend from ZenDiscovery and customize as necessary.</p>
<div class="position-relative"><h4><a id="_onmodule_support_removed"></a>onModule support removed</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<p>Plugins could formerly implement methods of the name <code class="literal">onModule</code> which took a single
Guice module. All the uses of onModule for plugging in custom behavior have now been
converted to pull based plugins, and hooks for onModule have been removed.</p>
<div class="position-relative"><h3><a id="breaking_51_other_api_changes"></a>Other API changes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_indices_stats_and_node_stats_api_unrecognized_metrics"></a>Indices stats and node stats API unrecognized metrics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/reference/migration/migrate_5_1.asciidoc">edit</a></div>
<p>The indices stats and node stats APIs allow querying Elasticsearch for a variety of metrics. Previous versions of
Elasticsearch would silently accept unrecognized metrics (e.g., typos like "transprot"). In 5.1.0, this is no longer
the case; unrecognized metrics will cause the request to fail. There is one exception to this which is the percolate
metric which was removed in 5.0.0 but requests for these will only produce a warning in the 5.x series starting with
5.1.0 and will fail like any other unrecognized metric in 6.0.0.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="_shadow_replicas_are_deprecated.html">« Shadow Replicas are deprecated</a>
</span>
<span class="next">
<a href="breaking-changes-5.0.html">Breaking changes in 5.0 »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
