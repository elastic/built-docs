<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Breaking changes in 5.1
        | Elasticsearch Reference [5.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.4]" /><link rel="up" href="breaking-changes.html" title="Breaking changes" /><link rel="prev" href="_shadow_replicas_are_deprecated.html" title="Shadow Replicas are deprecated" /><link rel="next" href="breaking-changes-5.0.html" title="Breaking changes in 5.0" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/5.4" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="5.4" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.4]
    </a></span> » <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span> » <span class="breadcrumb-node">Breaking changes in 5.1</span></div><div class="navheader"><span class="prev"><a href="_shadow_replicas_are_deprecated.html">
              « 
              Shadow Replicas are deprecated</a>
           
        </span><span class="next">
           
          <a href="breaking-changes-5.0.html">Breaking changes in 5.0
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="breaking-changes-5.1"></a>Breaking changes in 5.1<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><h3><a id="breaking_51_index_api_changes"></a>Indices API changes<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="_alias_names_are_validated_against_most_of_the_rules_for_index_names"></a>Alias names are validated against (most of) the rules for index names<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Alias names are now validated against almost the same set of rules that validate
index names. The only difference is that aliases are allowed to have uppercase
characters. That means that aliases may not:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Start with <code class="literal">_</code>, <code class="literal">-</code>, or <code class="literal">+</code></li><li class="listitem">Contain <code class="literal">#</code>, <code class="literal">\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, ` <code class="literal">, `,</code></li><li class="listitem">Be longer than 100 UTF-8 encoded bytes</li><li class="listitem">Be exactly <code class="literal">.</code> or <code class="literal">..</code></li></ul></div><p>Aliases created in versions before 5.1.0 are still supported but no new aliases
can be added that violate those rules. Since modifying an alias in elasticsearch
is removing it and recreating it atomically using the <code class="literal">_aliases</code> API, modifying
aliases with invalid names is also no longer supported.</p><h3><a id="breaking_51_java_api_changes"></a>Java API changes<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="_log4j_dependency_has_been_upgraded"></a>Log4j dependency has been upgraded<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The Log4j dependency has been upgraded from version 2.6.2 to version 2.7. If you’re using the transport client in your
application, you should update your Log4j dependencies accordingly.</p><h4><a id="_local_discovery_has_been_removed"></a>Local discovery has been removed<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Local discovery has been removed; this discovery implementation was used internally in the tribe service and for tests
that ran multiple nodes inside the same JVM. This means that setting <code class="literal">discovery.type</code> to <code class="literal">local</code> will fail on startup.</p><h3><a id="breaking_51_plugin_api"></a>Plugin API changes<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="_unicasthostsprovider_now_pull_based"></a>UnicastHostsProvider now pull based<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Plugging in a <code class="literal">UnicastHostsProvider</code> for zen discovery is now pull based. Implement a <code class="literal">DiscoveryPlugin</code> and override the <code class="literal">getZenHostsProviders</code> method. Selecting a hosts provider is also now done with a separate setting, <code class="literal">discovery.zen.hosts_provider</code>.</p><h4><a id="_zenping_and_masterelectservice_pluggability_removed"></a>ZenPing and MasterElectService pluggability removed<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>These classes are no longer pluggable. Either implement your own discovery, or extend from ZenDiscovery and customize as necessary.</p><h4><a id="_onmodule_support_removed"></a>onModule support removed<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Plugins could formerly implement methods of the name <code class="literal">onModule</code> which took a single
Guice module. All the uses of onModule for plugging in custom behavior have now been
converted to pull based plugins, and hooks for onModule have been removed.</p><h3><a id="breaking_51_other_api_changes"></a>Other API changes<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="_indices_stats_and_node_stats_api_unrecognized_metrics"></a>Indices stats and node stats API unrecognized metrics<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_1.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The indices stats and node stats APIs allow querying Elasticsearch for a variety of metrics. Previous versions of
Elasticsearch would silently accept unrecognized metrics (e.g., typos like "transprot"). In 5.1.0, this is no longer
the case; unrecognized metrics will cause the request to fail. There is one exception to this which is the percolate
metric which was removed in 5.0.0 but requests for these will only produce a warning in the 5.x series starting with
5.1.0 and will fail like any other unrecognized metric in 6.0.0.</p></div><div class="navfooter"><span class="prev"><a href="_shadow_replicas_are_deprecated.html">
              « 
              Shadow Replicas are deprecated</a>
           
        </span><span class="next">
           
          <a href="breaking-changes-5.0.html">Breaking changes in 5.0
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>
      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>

<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
