<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SELECT
        | Elasticsearch Reference [6.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [6.4]" /><link rel="up" href="sql-commands.html" title="SQL Commands" /><link rel="prev" href="sql-syntax-describe-table.html" title="DESCRIBE TABLE" /><link rel="next" href="sql-syntax-show-columns.html" title="SHOW COLUMNS" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.4" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="6.4" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.4]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-sql.html">SQL Access</a></span> » <span class="breadcrumb-link"><a href="sql-commands.html">SQL Commands</a></span> » <span class="breadcrumb-node">SELECT</span></div><div class="navheader"><span class="prev"><a href="sql-syntax-describe-table.html">
              « 
              DESCRIBE TABLE</a>
           
        </span><span class="next">
           
          <a href="sql-syntax-show-columns.html">SHOW COLUMNS
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="sql-syntax-select"></a>SELECT<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p><strong>Synopsis. </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT select_expr [, ...]
[ FROM table_name ]
[ WHERE condition ]
[ GROUP BY grouping_element [, ...] ]
[ HAVING condition]
[ ORDER BY expression [ ASC | DESC ] [, ...] ]
[ LIMIT [ count ] ]</pre></div><p>
</p><p><strong>Description. </strong>Retrieves rows from zero or more tables.</p><p>The general execution of <code class="literal">SELECT</code> is as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">All elements in the <code class="literal">FROM</code> list are computed (each element can be base or alias table). Currently <code class="literal">FROM</code> supports exactly one table. Do note however that the table name can be a pattern (see <a class="link" href="sql-syntax-select.html#sql-syntax-from" title="FROM Clause">FROM Clause</a> below).</li><li class="listitem">If the <code class="literal">WHERE</code> clause is specified, all rows that do not satisfy the condition are eliminated from the output. (See <a class="link" href="sql-syntax-select.html#sql-syntax-where" title="WHERE Clause">WHERE Clause</a> below.)</li><li class="listitem">If the <code class="literal">GROUP BY</code> clause is specified, or if there are aggregate function calls, the output is combined into groups of rows that match on one or more values, and the results of aggregate functions are computed. If the <code class="literal">HAVING</code> clause is present, it eliminates groups that do not satisfy the given condition. (See <a class="link" href="sql-syntax-select.html#sql-syntax-group-by" title="GROUP BY">GROUP BY Clause</a> and <a class="link" href="sql-syntax-select.html#sql-syntax-having" title="HAVING">HAVING Clause</a> below.)</li><li class="listitem">The actual output rows are computed using the <code class="literal">SELECT</code> output expressions for each selected row or row group.</li><li class="listitem">If the <code class="literal">ORDER BY</code> clause is specified, the returned rows are sorted in the specified order. If <code class="literal">ORDER BY</code> is not given, the rows are returned in whatever order the system finds fastest to produce. (See <a class="link" href="sql-syntax-select.html#sql-syntax-order-by" title="ORDER BY">ORDER BY Clause</a> below.)</li><li class="listitem">If the <code class="literal">LIMIT</code> is specified, the <code class="literal">SELECT</code> statement only returns a subset of the result rows. (See <a class="link" href="sql-syntax-select.html#sql-syntax-limit" title="LIMIT">LIMIT Clause</a> below.)</li></ol></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sql-syntax-select-list"></a><code class="literal">SELECT</code> List<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><code class="literal">SELECT</code> list, namely the expressions between <code class="literal">SELECT</code> and <code class="literal">FROM</code>, represent the output rows of the <code class="literal">SELECT</code> statement.</p><p>As with a table, every output column of a <code class="literal">SELECT</code> has a name which can be either specified per column through the <code class="literal">AS</code> keyword :</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT 1 + 1 AS result

    result
---------------
2</pre></div><p>Note: <code class="literal">AS</code> is an optional keyword however it helps with the readability and in some case ambiguity of the query
which is why it is recommended to specify it.</p><p>assigned by Elasticsearch SQL if no name is given:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT 1 + 1;

    (1 + 1)
---------------
2</pre></div><p>or if it’s a simple column reference, use its name as the column name:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT emp_no FROM emp LIMIT 1;

    emp_no
---------------
10001</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sql-syntax-select-wildcard"></a>Wildcard<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>To select all the columns in the source, one can use <code class="literal">*</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT * FROM emp LIMIT 1;

     birth_date     |    emp_no     |  first_name   |    gender     |     hire_date      |   languages   |   last_name   |    salary
--------------------+---------------+---------------+---------------+--------------------+---------------+---------------+---------------
1953-09-02T00:00:00Z|10001          |Georgi         |M              |1986-06-26T00:00:00Z|2              |Facello        |57305</pre></div><p>which essentially returns all(top-level fields, sub-fields, such as multi-fields are ignored] columns found.</p><h4><a id="sql-syntax-from"></a>FROM Clause<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">FROM</code> clause specifies one table for the <code class="literal">SELECT</code> and has the following syntax:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">FROM table_name [ [ AS ] alias ]</pre></div><p>where:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">table_name</code></span></dt><dd>Represents the name (optionally qualified) of an existing table, either a concrete or base one (actual index) or alias.</dd></dl></div><p>If the table name contains special SQL characters (such as <code class="literal">.</code>,<code class="literal">-</code>,etc…​) use double quotes to escape them:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT * FROM "emp" LIMIT 1;

     birth_date     |    emp_no     |  first_name   |    gender     |     hire_date      |   languages   |   last_name   |    salary
--------------------+---------------+---------------+---------------+--------------------+---------------+---------------+---------------
1953-09-02T00:00:00Z|10001          |Georgi         |M              |1986-06-26T00:00:00Z|2              |Facello        |57305</pre></div><p>The name can be a <a class="link" href="multi-index.html" title="Multiple Indices">pattern</a> pointing to multiple indices (likely requiring quoting as mentioned above) with the restriction that <span class="strong strong"><strong>all</strong></span> resolved concrete tables have <span class="strong strong"><strong>exact mapping</strong></span>.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT emp_no FROM "e*p" LIMIT 1;

    emp_no
---------------
10001</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">alias</code></span></dt><dd>A substitute name for the <code class="literal">FROM</code> item containing the alias. An alias is used for brevity or to eliminate ambiguity. When an alias is provided, it completely hides the actual name of the table and must be used in its place.</dd></dl></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT e.emp_no FROM emp AS e LIMIT 1;

    emp_no
-------------
10001</pre></div><h4><a id="sql-syntax-where"></a>WHERE Clause<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The optional <code class="literal">WHERE</code> clause is used to filter rows from the query and has the following syntax:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">WHERE condition</pre></div><p>where:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">condition</code></span></dt><dd>Represents an expression that evaluates to a <code class="literal">boolean</code>. Only the rows that match the condition (to <code class="literal">true</code>) are returned.</dd></dl></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT last_name FROM emp WHERE emp_no = 10001;

   last_name
---------------
Facello</pre></div><h4><a id="sql-syntax-group-by"></a>GROUP BY<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">GROUP BY</code> clause is used to divide the results into groups of rows on matching values from the designated columns. It has the following syntax:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">GROUP BY grouping_element [, ...]</pre></div><p>where:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">grouping_element</code></span></dt><dd>Represents an expression on which rows are being grouped <span class="emphasis"><em>on</em></span>. It can be a column name, alias or ordinal number of a column or an arbitrary expression of column values.</dd></dl></div><p>A common, group by column name:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT gender AS g FROM emp GROUP BY gender;

       g
---------------
F
M</pre></div><p>Grouping by output ordinal:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT gender FROM emp GROUP BY 1;

    gender
---------------
F
M</pre></div><p>Grouping by alias:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT gender AS g FROM emp GROUP BY g;

       g
---------------
F
M</pre></div><p>And grouping by column expression (typically used along-side an alias):</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT languages + 1 AS l FROM emp GROUP BY l;

       l
---------------
2
3
4
5
6</pre></div><p>Or a mixture of the above:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT gender g, languages l, COUNT(*) c FROM "emp" GROUP BY g, l ORDER BY languages ASC, gender DESC;

       g       |       l       |       c
---------------+---------------+---------------
F              |2              |4
F              |3              |8
F              |4              |7
F              |5              |7
F              |6              |11
M              |2              |12
M              |3              |12
M              |4              |15
M              |5              |11
M              |6              |13</pre></div><p>When a <code class="literal">GROUP BY</code> clause is used in a <code class="literal">SELECT</code>, <span class="emphasis"><em>all</em></span> output expressions must be either aggregate functions or expressions used for grouping or derivatives of (otherwise there would be more than one possible value to return for each ungrouped column).</p><p>To wit:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT gender AS g, COUNT(*) AS c FROM emp GROUP BY gender;

       g       |       c
---------------+---------------
F              |37
M              |63</pre></div><p>Expressions over aggregates used in output:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT gender AS g, ROUND(MIN(salary) / 100) AS salary FROM emp GROUP BY gender;

       g       |    salary
---------------+---------------
F              |260
M              |253</pre></div><p>Multiple aggregates used:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT gender AS g, KURTOSIS(salary) AS k, SKEWNESS(salary) AS s FROM emp GROUP BY gender;

       g       |        k         |         s
---------------+------------------+-------------------
F              |1.8427808415250482|0.04517149340491813
M              |2.259327644285826 |0.40268950715550333</pre></div><h5><a id="sql-syntax-group-by-implicit"></a>Implicit Grouping<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>When an aggregation is used without an associated <code class="literal">GROUP BY</code>, an <span class="emphasis"><em>implicit grouping</em></span> is applied, meaning all selected rows are considered to form a single default, or implicit group.
As such, the query emits only a single row (as there is only a single group).</p><p>A common example is counting the number of records:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT COUNT(*) AS count FROM emp;

     count
---------------
100</pre></div><p>Of course, multiple aggregations can be applied:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, AVG(salary) AS avg, COUNT(*) AS count FROM emp;

      min      |      max      |      avg      |     count
---------------+---------------+---------------+---------------
25324          |74999          |48248          |100</pre></div><h4><a id="sql-syntax-having"></a>HAVING<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">HAVING</code> clause can be used <span class="emphasis"><em>only</em></span> along aggregate functions (and thus <code class="literal">GROUP BY</code>) to filter what groups are kept or not and has the following syntax:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">GROUP BY condition</pre></div><p>where:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">condition</code></span></dt><dd>Represents an expression that evaluates to a <code class="literal">boolean</code>. Only groups that match the condition (to <code class="literal">true</code>) are returned.</dd></dl></div><p>Both <code class="literal">WHERE</code> and <code class="literal">HAVING</code> are used for filtering however there are several significant differences between them:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="literal">WHERE</code> works on individual <span class="strong strong"><strong>rows</strong></span>, <code class="literal">HAVING</code> works on the <span class="strong strong"><strong>groups</strong></span> created by ``GROUP BY``</li><li class="listitem"><code class="literal">WHERE</code> is evaluated <span class="strong strong"><strong>before</strong></span> grouping, <code class="literal">HAVING</code> is evaluated <span class="strong strong"><strong>after</strong></span> grouping</li></ol></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT languages AS l, COUNT(*) AS c FROM emp GROUP BY l HAVING c BETWEEN 15 AND 20;

       l       |       c
---------------+---------------
1              |16
2              |20
4              |18</pre></div><p>Further more, one can use multiple aggregate expressions inside <code class="literal">HAVING</code> even ones that are not used in the output (<code class="literal">SELECT</code>):</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max, MAX(salary) - MIN(salary) AS diff FROM emp GROUP BY languages HAVING diff - max % min &gt; 0 AND AVG(salary) &gt; 30000;

      min      |      max      |     diff
---------------+---------------+---------------
25976          |73717          |47741
29175          |73578          |44403
26436          |74999          |48563
27215          |74572          |47357
25324          |73851          |48527</pre></div><h5><a id="sql-syntax-having-group-by-implicit"></a>Implicit Grouping<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>As indicated above, it is possible to have a <code class="literal">HAVING</code> clause without a ``GROUP BY``. In this case, the so-called <a class="link" href="sql-syntax-select.html#sql-syntax-group-by-implicit" title="Implicit Grouping"><span class="emphasis"><em>implicit grouping</em></span></a> is applied, meaning all selected rows are considered to form a single group and <code class="literal">HAVING</code> can be applied on any of the aggregate functions specified on this group. `
As such, the query emits only a single row (as there is only a single group) and <code class="literal">HAVING</code> condition returns either one row (the group) or zero if the condition fails.</p><p>In this example, <code class="literal">HAVING</code> matches:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT MIN(salary) AS min, MAX(salary) AS max FROM emp HAVING min &gt; 25000;

      min      |      max
---------------+---------------
25324          |74999</pre></div><h4><a id="sql-syntax-order-by"></a>ORDER BY<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">ORDER BY</code> clause is used to sort the results of <code class="literal">SELECT</code> by one or more expressions:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">ORDER BY expression [ ASC | DESC ] [, ...]</pre></div><p>where:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">expression</code></span></dt><dd>Represents an input column, an output column or an ordinal number of the position (starting from one) of an output column. Additionally, ordering can be done based on the results <span class="emphasis"><em>score</em></span> `
The direction, if not specified, is by default <code class="literal">ASC</code> (ascending). `
Regardless of the ordering specified, null values are ordered last (at the end).</dd></dl></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>When used along-side, <code class="literal">GROUP BY</code> expression can point <span class="emphasis"><em>only</em></span> to the columns used for grouping.</p></div></div><p>For example, the following query sorts by an arbitrary input field (<code class="literal">page_count</code>):</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT * FROM library ORDER BY page_count DESC LIMIT 5;

     author      |        name        |  page_count   |    release_date
-----------------+--------------------+---------------+--------------------
Peter F. Hamilton|Pandora's Star      |768            |2004-03-02T00:00:00Z
Vernor Vinge     |A Fire Upon the Deep|613            |1992-06-01T00:00:00Z
Frank Herbert    |Dune                |604            |1965-06-01T00:00:00Z
Alastair Reynolds|Revelation Space    |585            |2000-03-15T00:00:00Z
James S.A. Corey |Leviathan Wakes     |561            |2011-06-02T00:00:00Z</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sql-syntax-order-by-score"></a>Order By Score<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>When doing full-text queries in the <code class="literal">WHERE</code> clause, results can be returned based on their
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/relevance-intro.html" target="_top">score</a> or <span class="emphasis"><em>relevance</em></span> to the given query.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>When doing multiple text queries in the <code class="literal">WHERE</code> clause then, their scores will be
combined using the same rules as Elasticsearch’s
<a class="link" href="query-dsl-bool-query.html" title="Bool Query">bool query</a>.</p></div></div><p>To sort based on the <code class="literal">score</code>, use the special function <code class="literal">SCORE()</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT SCORE(), * FROM library WHERE match(name, 'dune') ORDER BY SCORE() DESC;

    SCORE()    |    author     |       name        |  page_count   |    release_date
---------------+---------------+-------------------+---------------+--------------------
2.288635       |Frank Herbert  |Dune               |604            |1965-06-01T00:00:00Z
1.8893257      |Frank Herbert  |Dune Messiah       |331            |1969-10-15T00:00:00Z
1.6086555      |Frank Herbert  |Children of Dune   |408            |1976-04-21T00:00:00Z
1.4005898      |Frank Herbert  |God Emperor of Dune|454            |1981-05-28T00:00:00Z</pre></div><p>Note that you can return <code class="literal">SCORE()</code> by using a full-text search predicate in the <code class="literal">WHERE</code> clause.
This is possible even if <code class="literal">SCORE()</code> is not used for sorting:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT SCORE(), * FROM library WHERE match(name, 'dune') ORDER BY page_count DESC;

    SCORE()    |    author     |       name        |  page_count   |    release_date
---------------+---------------+-------------------+---------------+--------------------
2.288635       |Frank Herbert  |Dune               |604            |1965-06-01T00:00:00Z
1.4005898      |Frank Herbert  |God Emperor of Dune|454            |1981-05-28T00:00:00Z
1.6086555      |Frank Herbert  |Children of Dune   |408            |1976-04-21T00:00:00Z
1.8893257      |Frank Herbert  |Dune Messiah       |331            |1969-10-15T00:00:00Z</pre></div><p>NOTE:
Trying to return <code class="literal">score</code> from a non full-text query will return the same value for all results, as
all are equally relevant.</p><h4><a id="sql-syntax-limit"></a>LIMIT<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/sql/language/syntax/select.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The <code class="literal">LIMIT</code> clause restricts (limits) the number of rows returns using the format:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">LIMIT ( count | ALL )</pre></div><p>where</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">count</span></dt><dd>is a positive integer or zero indicating the maximum <span class="strong strong"><strong>possible</strong></span> number of results being returned (as there might be less matches than the limit). If <code class="literal">0</code> is specified, no results are returned.</dd><dt><span class="term">ALL</span></dt><dd>indicates there is no limit and thus all results are being returned.</dd></dl></div><p>To return</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT first_name, last_name, emp_no FROM emp LIMIT 1;

  first_name   |   last_name   |    emp_no
---------------+---------------+---------------
Georgi         |Facello        |10001</pre></div></div></div><div class="navfooter"><span class="prev"><a href="sql-syntax-describe-table.html">
              « 
              DESCRIBE TABLE</a>
           
        </span><span class="next">
           
          <a href="sql-syntax-show-columns.html">SHOW COLUMNS
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>
