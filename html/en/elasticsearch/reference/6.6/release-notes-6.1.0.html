<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Elasticsearch version 6.1.0 | Elasticsearch Guide [6.6] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Guide [6.6]"/>
<link rel="up" href="es-release-notes.html" title="Release Notes"/>
<link rel="prev" href="release-notes-6.1.1.html" title="Elasticsearch version 6.1.1"/>
<link rel="next" href="release-notes-6.0.1.html" title="Elasticsearch version 6.0.1"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.6"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="6.6"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [6.6]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="es-release-notes.html">Release Notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-6.1.1.html">« Elasticsearch version 6.1.1</a>
</span>
<span class="next">
<a href="release-notes-6.0.1.html">Elasticsearch version 6.0.1 »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-6.1.0"></a>Elasticsearch version 6.1.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h2>
</div></div></div>
<h3><a id="breaking-6.1.0"></a>Breaking Changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Network
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow only a fixed-size receive predictor <a href="https://github.com/elastic/elasticsearch/pull/26165" class="ulink" target="_top">#26165</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23185" class="ulink" target="_top">#23185</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
REST
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Standardize underscore requirements in parameters <a href="https://github.com/elastic/elasticsearch/pull/27414" class="ulink" target="_top">#27414</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/26886" class="ulink" target="_top">#26886</a>, <a href="https://github.com/elastic/elasticsearch/issues/27040" class="ulink" target="_top">#27040</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Scroll
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fail queries with scroll that explicitely set request_cache <a href="https://github.com/elastic/elasticsearch/pull/27342" class="ulink" target="_top">#27342</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add a limit to from + size in top_hits and inner hits. <a href="https://github.com/elastic/elasticsearch/pull/26492" class="ulink" target="_top">#26492</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/11511" class="ulink" target="_top">#11511</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Security
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">certgen</code> command now returns validation errors when it encounters problems
reading from an input file (with the <code class="literal">-in</code> command option). Previously these
errors might have been ignored or caused the command to abort with unclear
messages. For more information, see <a class="xref" href="certgen.html" title="elasticsearch-certgen"><em>elasticsearch-certgen</em></a>.
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="_breaking_java_changes_2"></a>Breaking Java Changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Moves deferring code into its own subclass <a href="https://github.com/elastic/elasticsearch/pull/26421" class="ulink" target="_top">#26421</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Core
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Unify Settings xcontent reading and writing <a href="https://github.com/elastic/elasticsearch/pull/26739" class="ulink" target="_top">#26739</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Settings
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Return List instead of an array from settings <a href="https://github.com/elastic/elasticsearch/pull/26903" class="ulink" target="_top">#26903</a>
</li>
<li class="listitem">
Remove <code class="literal">Settings,put(Map&lt;String,String&gt;)</code> <a href="https://github.com/elastic/elasticsearch/pull/26785" class="ulink" target="_top">#26785</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="_deprecations_3"></a>Deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Deprecate global_ordinals_hash and global_ordinals_low_cardinality <a href="https://github.com/elastic/elasticsearch/pull/26173" class="ulink" target="_top">#26173</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26014" class="ulink" target="_top">#26014</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Allocation
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add deprecation warning for negative index.unassigned.node_left.delayed_timeout <a href="https://github.com/elastic/elasticsearch/pull/26832" class="ulink" target="_top">#26832</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26828" class="ulink" target="_top">#26828</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Analysis
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add limits for ngram and shingle settings <a href="https://github.com/elastic/elasticsearch/pull/27411" class="ulink" target="_top">#27411</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/25887" class="ulink" target="_top">#25887</a>, <a href="https://github.com/elastic/elasticsearch/issues/27211" class="ulink" target="_top">#27211</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Geo
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
[GEO] 6x Deprecate ShapeBuilders and decouple geojson parse logic <a href="https://github.com/elastic/elasticsearch/pull/27345" class="ulink" target="_top">#27345</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Mapping
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Deprecate the <code class="literal">index_options</code> parameter for numeric fields <a href="https://github.com/elastic/elasticsearch/pull/26672" class="ulink" target="_top">#26672</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/21475" class="ulink" target="_top">#21475</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Repository Azure
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Azure repository: Move to named configurations as we do for S3 repository and secure settings <a href="https://github.com/elastic/elasticsearch/pull/23405" class="ulink" target="_top">#23405</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/22762" class="ulink" target="_top">#22762</a>, <a href="https://github.com/elastic/elasticsearch/issues/22763" class="ulink" target="_top">#22763</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
doc: deprecate _primary and _replica shard option <a href="https://github.com/elastic/elasticsearch/pull/26792" class="ulink" target="_top">#26792</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26335" class="ulink" target="_top">#26335</a>)
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="_new_features_2"></a>New Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Aggregations: bucket_sort pipeline aggregation <a href="https://github.com/elastic/elasticsearch/pull/27152" class="ulink" target="_top">#27152</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/14928" class="ulink" target="_top">#14928</a>)
</li>
<li class="listitem">
Add composite aggregator <a href="https://github.com/elastic/elasticsearch/pull/26800" class="ulink" target="_top">#26800</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Analysis
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Added Bengali Analyzer to Elasticsearch with respect to the lucene update <a href="https://github.com/elastic/elasticsearch/pull/26527" class="ulink" target="_top">#26527</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
add URL-Decode Processor to Ingest <a href="https://github.com/elastic/elasticsearch/pull/26045" class="ulink" target="_top">#26045</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25837" class="ulink" target="_top">#25837</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Java High Level REST Client
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Added Delete Index support to high-level REST client <a href="https://github.com/elastic/elasticsearch/pull/27019" class="ulink" target="_top">#27019</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25847" class="ulink" target="_top">#25847</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Added the ability to create job forecasts. This feature enables you to use
historical behavior to predict the future behavior of your time series. You can
create forecasts in Kibana or by using the <a class="xref" href="ml-forecast.html" title="Forecast jobs API">forecast jobs</a> API.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot create forecasts for jobs that were created in previous
versions; this functionality is available only for jobs created in 6.1 or later.</p>
</div>
</div>
</li>
<li class="listitem">
Added overall buckets, which summarize bucket results for multiple jobs.
For more information, see the <a class="xref" href="ml-get-overall-buckets.html" title="Get overall buckets API">get overall buckets</a> API.
</li>
<li class="listitem">
Added job groups, which you can use to manage or retrieve information from
multiple jobs at once. Also updated many machine learning APIs to support groups and
wildcard expressions in the job identifier.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Nested Docs
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Multi-level Nested Sort with Filters <a href="https://github.com/elastic/elasticsearch/pull/26395" class="ulink" target="_top">#26395</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Query DSL
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add terms_set query <a href="https://github.com/elastic/elasticsearch/pull/27145" class="ulink" target="_top">#27145</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26915" class="ulink" target="_top">#26915</a>)
</li>
<li class="listitem">
Introduce sorted_after query for sorted index <a href="https://github.com/elastic/elasticsearch/pull/26377" class="ulink" target="_top">#26377</a>
</li>
<li class="listitem">
Add support for auto_generate_synonyms_phrase_query in match_query, multi_match_query, query_string and simple_query_string <a href="https://github.com/elastic/elasticsearch/pull/26097" class="ulink" target="_top">#26097</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Expose <code class="literal">fuzzy_transpositions</code> parameter in fuzzy queries <a href="https://github.com/elastic/elasticsearch/pull/26870" class="ulink" target="_top">#26870</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/18348" class="ulink" target="_top">#18348</a>)
</li>
<li class="listitem">
Add upper limit for scroll expiry <a href="https://github.com/elastic/elasticsearch/pull/26448" class="ulink" target="_top">#26448</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/11511" class="ulink" target="_top">#11511</a>, <a href="https://github.com/elastic/elasticsearch/issues/23268" class="ulink" target="_top">#23268</a>)
</li>
<li class="listitem">
Implement adaptive replica selection <a href="https://github.com/elastic/elasticsearch/pull/26128" class="ulink" target="_top">#26128</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24915" class="ulink" target="_top">#24915</a>)
</li>
<li class="listitem">
configure distance limit <a href="https://github.com/elastic/elasticsearch/pull/25731" class="ulink" target="_top">#25731</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25528" class="ulink" target="_top">#25528</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Similarities
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add a scripted similarity. <a href="https://github.com/elastic/elasticsearch/pull/25831" class="ulink" target="_top">#25831</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Suggesters
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Expose duplicate removal in the completion suggester <a href="https://github.com/elastic/elasticsearch/pull/26496" class="ulink" target="_top">#26496</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23364" class="ulink" target="_top">#23364</a>)
</li>
<li class="listitem">
Support must and should for context query in context suggester <a href="https://github.com/elastic/elasticsearch/pull/26407" class="ulink" target="_top">#26407</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/24421" class="ulink" target="_top">#24421</a>, <a href="https://github.com/elastic/elasticsearch/issues/24565" class="ulink" target="_top">#24565</a>)
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="_enhancements_7"></a>Enhancements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow aggregation sorting via nested aggregation <a href="https://github.com/elastic/elasticsearch/pull/26683" class="ulink" target="_top">#26683</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/16838" class="ulink" target="_top">#16838</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Allocation
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Tie-break shard path decision based on total number of shards on path <a href="https://github.com/elastic/elasticsearch/pull/27039" class="ulink" target="_top">#27039</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26654" class="ulink" target="_top">#26654</a>)
</li>
<li class="listitem">
Balance shards for an index more evenly across multiple data paths <a href="https://github.com/elastic/elasticsearch/pull/26654" class="ulink" target="_top">#26654</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/16763" class="ulink" target="_top">#16763</a>)
</li>
<li class="listitem">
Expand "NO" decision message in NodeVersionAllocationDecider <a href="https://github.com/elastic/elasticsearch/pull/26542" class="ulink" target="_top">#26542</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/10403" class="ulink" target="_top">#10403</a>)
</li>
<li class="listitem">
_reroute&#8217;s retry_failed flag should reset failure counter <a href="https://github.com/elastic/elasticsearch/pull/25888" class="ulink" target="_top">#25888</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25291" class="ulink" target="_top">#25291</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Analysis
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add configurable <code class="literal">max_token_length</code> parameter to whitespace tokenizer <a href="https://github.com/elastic/elasticsearch/pull/26749" class="ulink" target="_top">#26749</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26643" class="ulink" target="_top">#26643</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
CRUD
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add wait_for_active_shards parameter to index open command <a href="https://github.com/elastic/elasticsearch/pull/26682" class="ulink" target="_top">#26682</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/20937" class="ulink" target="_top">#20937</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Core
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix classes that can exit <a href="https://github.com/elastic/elasticsearch/pull/27518" class="ulink" target="_top">#27518</a>
</li>
<li class="listitem">
Replace empty index block checks with global block checks in template delete/put actions <a href="https://github.com/elastic/elasticsearch/pull/27050" class="ulink" target="_top">#27050</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/10530" class="ulink" target="_top">#10530</a>)
</li>
<li class="listitem">
Allow Uid#decodeId to decode from a byte array slice <a href="https://github.com/elastic/elasticsearch/pull/26987" class="ulink" target="_top">#26987</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26931" class="ulink" target="_top">#26931</a>)
</li>
<li class="listitem">
Use separate searchers for "search visibility" vs "move indexing buffer to disk <a href="https://github.com/elastic/elasticsearch/pull/26972" class="ulink" target="_top">#26972</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/15768" class="ulink" target="_top">#15768</a>, <a href="https://github.com/elastic/elasticsearch/issues/26802" class="ulink" target="_top">#26802</a>, <a href="https://github.com/elastic/elasticsearch/issues/26912" class="ulink" target="_top">#26912</a>, <a href="https://github.com/elastic/elasticsearch/issues/3593" class="ulink" target="_top">#3593</a>)
</li>
<li class="listitem">
Add ability to split shards <a href="https://github.com/elastic/elasticsearch/pull/26931" class="ulink" target="_top">#26931</a>
</li>
<li class="listitem">
Make circuit breaker mutations debuggable <a href="https://github.com/elastic/elasticsearch/pull/26067" class="ulink" target="_top">#26067</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25891" class="ulink" target="_top">#25891</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Dates
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
DateProcessor Locale <a href="https://github.com/elastic/elasticsearch/pull/26186" class="ulink" target="_top">#26186</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25513" class="ulink" target="_top">#25513</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Discovery
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Stop responding to ping requests before master abdication <a href="https://github.com/elastic/elasticsearch/pull/27329" class="ulink" target="_top">#27329</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27328" class="ulink" target="_top">#27328</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Engine
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Ensure external refreshes will also refresh internal searcher to minimize segment creation <a href="https://github.com/elastic/elasticsearch/pull/27253" class="ulink" target="_top">#27253</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26972" class="ulink" target="_top">#26972</a>)
</li>
<li class="listitem">
Move IndexShard#getWritingBytes() under InternalEngine <a href="https://github.com/elastic/elasticsearch/pull/27209" class="ulink" target="_top">#27209</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26972" class="ulink" target="_top">#26972</a>)
</li>
<li class="listitem">
Refactor internal engine <a href="https://github.com/elastic/elasticsearch/pull/27082" class="ulink" target="_top">#27082</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Geo
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add ignore_malformed to geo_shape fields <a href="https://github.com/elastic/elasticsearch/pull/24654" class="ulink" target="_top">#24654</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23747" class="ulink" target="_top">#23747</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
add json-processor support for non-map json types <a href="https://github.com/elastic/elasticsearch/pull/27335" class="ulink" target="_top">#27335</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25972" class="ulink" target="_top">#25972</a>)
</li>
<li class="listitem">
Introduce templating support to timezone/locale in DateProcessor <a href="https://github.com/elastic/elasticsearch/pull/27089" class="ulink" target="_top">#27089</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24024" class="ulink" target="_top">#24024</a>)
</li>
<li class="listitem">
Add support for parsing inline script (#23824) <a href="https://github.com/elastic/elasticsearch/pull/26846" class="ulink" target="_top">#26846</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23824" class="ulink" target="_top">#23824</a>)
</li>
<li class="listitem">
Consolidate locale parsing. <a href="https://github.com/elastic/elasticsearch/pull/26400" class="ulink" target="_top">#26400</a>
</li>
<li class="listitem">
Accept ingest simulate params as ints or strings <a href="https://github.com/elastic/elasticsearch/pull/23885" class="ulink" target="_top">#23885</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23823" class="ulink" target="_top">#23823</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Internal
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Avoid uid creation in ParsedDocument <a href="https://github.com/elastic/elasticsearch/pull/27241" class="ulink" target="_top">#27241</a>
</li>
<li class="listitem">
Upgrade to Lucene 7.1.0 snapshot version <a href="https://github.com/elastic/elasticsearch/pull/26864" class="ulink" target="_top">#26864</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26527" class="ulink" target="_top">#26527</a>)
</li>
<li class="listitem">
Remove <code class="literal">_index</code> fielddata hack if cluster alias is present <a href="https://github.com/elastic/elasticsearch/pull/26082" class="ulink" target="_top">#26082</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25885" class="ulink" target="_top">#25885</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Java High Level REST Client
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Adjust RestHighLevelClient method modifiers <a href="https://github.com/elastic/elasticsearch/pull/27238" class="ulink" target="_top">#27238</a>
</li>
<li class="listitem">
Decouple BulkProcessor from ThreadPool <a href="https://github.com/elastic/elasticsearch/pull/26727" class="ulink" target="_top">#26727</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26028" class="ulink" target="_top">#26028</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Logging
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add more information on <em>failed_to_convert</em> exception (#21946) <a href="https://github.com/elastic/elasticsearch/pull/27034" class="ulink" target="_top">#27034</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/21946" class="ulink" target="_top">#21946</a>)
</li>
<li class="listitem">
Improve shard-failed log messages. <a href="https://github.com/elastic/elasticsearch/pull/26866" class="ulink" target="_top">#26866</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Improved the way machine learning jobs are allocated to nodes, such that it is primarily
determined by the estimated memory requirement of the job. If there is insufficient
information about the job&#8217;s memory requirements, the allocation decision is based
on job counts per node.
</li>
<li class="listitem">
Increased the default value of the <code class="literal">xpack.ml.max_open_jobs</code> setting from <code class="literal">10</code>
to <code class="literal">20</code>. The allocation of jobs to nodes now considers memory usage as well as
job counts, so it&#8217;s reasonable to permit more small jobs on a single node. For
more information, see <a class="xref" href="ml-settings.html" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.
</li>
<li class="listitem">
Decreased the default <code class="literal">model_memory_limit</code> property value to 1 GB for new jobs.
If you want to create a job that analyzes high cardinality fields, you can
increase this property value. For more information, see <a class="xref" href="ml-job-resource.html#ml-apilimits" title="Analysis Limits">Analysis Limits</a>.
</li>
<li class="listitem">
Improved analytics related to decay rates when predictions are very accurate.
</li>
<li class="listitem">
Improved analytics related to detecting non-negative quantities and using this
information to constrain analysis, predictions, and confidence intervals.
</li>
<li class="listitem">
Improved periodic trough or spike detection.
</li>
<li class="listitem">
Improved the speed of the aggregation of machine learning results.
</li>
<li class="listitem">
Improved probability calculation performance.
</li>
<li class="listitem">
Expedited bucket processing time in very large populations by determining when
there are nearly duplicate values in a bucket and de-duplicating the samples that
are added to the model.
</li>
<li class="listitem">
Improved handling of periodically missing values.
</li>
<li class="listitem">
Improved analytics related to diurnal periodicity.
</li>
<li class="listitem">
Reduced memory usage during population analysis by releasing redundant memory
after the bucket results are written.
</li>
<li class="listitem">
Improved modeling of long periodic components, particularly when there is a
long bucket span.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Mapping
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow ip_range to accept CIDR notation <a href="https://github.com/elastic/elasticsearch/pull/27192" class="ulink" target="_top">#27192</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26260" class="ulink" target="_top">#26260</a>)
</li>
<li class="listitem">
Deduplicate <code class="literal">_field_names</code>. <a href="https://github.com/elastic/elasticsearch/pull/26550" class="ulink" target="_top">#26550</a>
</li>
<li class="listitem">
Throw a better error message for empty field names <a href="https://github.com/elastic/elasticsearch/pull/26543" class="ulink" target="_top">#26543</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23348" class="ulink" target="_top">#23348</a>)
</li>
<li class="listitem">
Stricter validation for min/max values for whole numbers <a href="https://github.com/elastic/elasticsearch/pull/26137" class="ulink" target="_top">#26137</a>
</li>
<li class="listitem">
Make FieldMapper.copyTo() always non-null. <a href="https://github.com/elastic/elasticsearch/pull/25994" class="ulink" target="_top">#25994</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Monitoring
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Added the new <code class="literal">interval_ms</code> field to monitoring documents. This field
indicates the current collection interval for Elasticsearch or external monitored systems.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Nested Docs
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the primary_term field to identify parent documents <a href="https://github.com/elastic/elasticsearch/pull/27469" class="ulink" target="_top">#27469</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24362" class="ulink" target="_top">#24362</a>)
</li>
<li class="listitem">
Prohibit using <code class="literal">nested_filter</code>, <code class="literal">nested_path</code> and new <code class="literal">nested</code> Option at the same time in FieldSortBuilder <a href="https://github.com/elastic/elasticsearch/pull/26490" class="ulink" target="_top">#26490</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/17286" class="ulink" target="_top">#17286</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Network
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Remove manual tracking of registered channels <a href="https://github.com/elastic/elasticsearch/pull/27445" class="ulink" target="_top">#27445</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27260" class="ulink" target="_top">#27260</a>)
</li>
<li class="listitem">
Remove tcp profile from low level nio channel <a href="https://github.com/elastic/elasticsearch/pull/27441" class="ulink" target="_top">#27441</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27260" class="ulink" target="_top">#27260</a>)
</li>
<li class="listitem">
Decouple <code class="literal">ChannelFactory</code> from Tcp classes <a href="https://github.com/elastic/elasticsearch/pull/27286" class="ulink" target="_top">#27286</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27260" class="ulink" target="_top">#27260</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Percolator
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use Lucene&#8217;s CoveringQuery to select percolate candidate matches <a href="https://github.com/elastic/elasticsearch/pull/27271" class="ulink" target="_top">#27271</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/26081" class="ulink" target="_top">#26081</a>, <a href="https://github.com/elastic/elasticsearch/issues/26307" class="ulink" target="_top">#26307</a>)
</li>
<li class="listitem">
Add support to percolate query to percolate multiple documents simultaneously <a href="https://github.com/elastic/elasticsearch/pull/26418" class="ulink" target="_top">#26418</a>
</li>
<li class="listitem">
Hint what clauses are important in a conjunction query based on fields <a href="https://github.com/elastic/elasticsearch/pull/26081" class="ulink" target="_top">#26081</a>
</li>
<li class="listitem">
Add support for selecting percolator query candidate matches containing range queries <a href="https://github.com/elastic/elasticsearch/pull/25647" class="ulink" target="_top">#25647</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/21040" class="ulink" target="_top">#21040</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Discovery EC2
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
update AWS SDK for ECS Task IAM support in discovery-ec2 <a href="https://github.com/elastic/elasticsearch/pull/26479" class="ulink" target="_top">#26479</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23039" class="ulink" target="_top">#23039</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Lang Painless
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Painless: Only allow Painless type names to be the same as the equivalent Java class. <a href="https://github.com/elastic/elasticsearch/pull/27264" class="ulink" target="_top">#27264</a>
</li>
<li class="listitem">
Allow for the Painless Definition to have multiple instances for white-listing <a href="https://github.com/elastic/elasticsearch/pull/27096" class="ulink" target="_top">#27096</a>
</li>
<li class="listitem">
Separate Painless Whitelist Loading from the Painless Definition <a href="https://github.com/elastic/elasticsearch/pull/26540" class="ulink" target="_top">#26540</a>
</li>
<li class="listitem">
Remove Sort enum from Painless Definition <a href="https://github.com/elastic/elasticsearch/pull/26179" class="ulink" target="_top">#26179</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Repository Azure
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add azure storage endpoint suffix #26432 <a href="https://github.com/elastic/elasticsearch/pull/26568" class="ulink" target="_top">#26568</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26432" class="ulink" target="_top">#26432</a>)
</li>
<li class="listitem">
Support for accessing Azure repositories through a proxy <a href="https://github.com/elastic/elasticsearch/pull/23518" class="ulink" target="_top">#23518</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/23506" class="ulink" target="_top">#23506</a>, <a href="https://github.com/elastic/elasticsearch/issues/23517" class="ulink" target="_top">#23517</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Repository S3
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Remove S3 output stream <a href="https://github.com/elastic/elasticsearch/pull/27280" class="ulink" target="_top">#27280</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27278" class="ulink" target="_top">#27278</a>)
</li>
<li class="listitem">
Update to AWS SDK 1.11.223 <a href="https://github.com/elastic/elasticsearch/pull/27278" class="ulink" target="_top">#27278</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugins
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Plugins: Add versionless alias to all security policy codebase properties <a href="https://github.com/elastic/elasticsearch/pull/26756" class="ulink" target="_top">#26756</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26521" class="ulink" target="_top">#26521</a>)
</li>
<li class="listitem">
Allow plugins to plug rescore implementations <a href="https://github.com/elastic/elasticsearch/pull/26368" class="ulink" target="_top">#26368</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26208" class="ulink" target="_top">#26208</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Query DSL
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add support for wildcard on <code class="literal">_index</code> <a href="https://github.com/elastic/elasticsearch/pull/27334" class="ulink" target="_top">#27334</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25722" class="ulink" target="_top">#25722</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Reindex API
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Update by Query is modified to accept short <code class="literal">script</code> parameter. <a href="https://github.com/elastic/elasticsearch/pull/26841" class="ulink" target="_top">#26841</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24898" class="ulink" target="_top">#24898</a>)
</li>
<li class="listitem">
reindex: automatically choose the number of slices <a href="https://github.com/elastic/elasticsearch/pull/26030" class="ulink" target="_top">#26030</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/24547" class="ulink" target="_top">#24547</a>, <a href="https://github.com/elastic/elasticsearch/issues/25582" class="ulink" target="_top">#25582</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Rollover
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add size-based condition to the index rollover API <a href="https://github.com/elastic/elasticsearch/pull/27160" class="ulink" target="_top">#27160</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27004" class="ulink" target="_top">#27004</a>)
</li>
<li class="listitem">
Add size-based condition to the index rollover API <a href="https://github.com/elastic/elasticsearch/pull/27115" class="ulink" target="_top">#27115</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27004" class="ulink" target="_top">#27004</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Scripting
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Script: Convert script query to a dedicated script context <a href="https://github.com/elastic/elasticsearch/pull/26003" class="ulink" target="_top">#26003</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make fields optional in multi_match query and rely on index.query.default_field by default <a href="https://github.com/elastic/elasticsearch/pull/27380" class="ulink" target="_top">#27380</a>
</li>
<li class="listitem">
fix unnecessary logger creation <a href="https://github.com/elastic/elasticsearch/pull/27349" class="ulink" target="_top">#27349</a>
</li>
<li class="listitem">
<code class="literal">ObjectParser</code> : replace <code class="literal">IllegalStateException</code> with <code class="literal">ParsingException</code> <a href="https://github.com/elastic/elasticsearch/pull/27302" class="ulink" target="_top">#27302</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27147" class="ulink" target="_top">#27147</a>)
</li>
<li class="listitem">
Uses norms for exists query if enabled <a href="https://github.com/elastic/elasticsearch/pull/27237" class="ulink" target="_top">#27237</a>
</li>
<li class="listitem">
Cross Cluster Search: make remote clusters optional <a href="https://github.com/elastic/elasticsearch/pull/27182" class="ulink" target="_top">#27182</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/26118" class="ulink" target="_top">#26118</a>, <a href="https://github.com/elastic/elasticsearch/issues/27161" class="ulink" target="_top">#27161</a>)
</li>
<li class="listitem">
Enhances exists queries to reduce need for <code class="literal">_field_names</code> <a href="https://github.com/elastic/elasticsearch/pull/26930" class="ulink" target="_top">#26930</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26770" class="ulink" target="_top">#26770</a>)
</li>
<li class="listitem">
Change ParentFieldSubFetchPhase to create doc values iterator once per segment <a href="https://github.com/elastic/elasticsearch/pull/26815" class="ulink" target="_top">#26815</a>
</li>
<li class="listitem">
Change VersionFetchSubPhase to create doc values iterator once per segment <a href="https://github.com/elastic/elasticsearch/pull/26809" class="ulink" target="_top">#26809</a>
</li>
<li class="listitem">
Change ScriptFieldsFetchSubPhase to create search scripts once per segment <a href="https://github.com/elastic/elasticsearch/pull/26808" class="ulink" target="_top">#26808</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26775" class="ulink" target="_top">#26775</a>)
</li>
<li class="listitem">
Make sure SortBuilders rewrite inner nested sorts <a href="https://github.com/elastic/elasticsearch/pull/26532" class="ulink" target="_top">#26532</a>
</li>
<li class="listitem">
Extend testing of build method in ScriptSortBuilder <a href="https://github.com/elastic/elasticsearch/pull/26520" class="ulink" target="_top">#26520</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/17286" class="ulink" target="_top">#17286</a>, <a href="https://github.com/elastic/elasticsearch/issues/26490" class="ulink" target="_top">#26490</a>)
</li>
<li class="listitem">
Accept an array of field names and boosts in the index.query.default_field setting <a href="https://github.com/elastic/elasticsearch/pull/26320" class="ulink" target="_top">#26320</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25946" class="ulink" target="_top">#25946</a>)
</li>
<li class="listitem">
Reject IPv6-mapped IPv4 addresses when using the CIDR notation. <a href="https://github.com/elastic/elasticsearch/pull/26254" class="ulink" target="_top">#26254</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26078" class="ulink" target="_top">#26078</a>)
</li>
<li class="listitem">
Rewrite range queries with open bounds to exists query <a href="https://github.com/elastic/elasticsearch/pull/26160" class="ulink" target="_top">#26160</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/22640" class="ulink" target="_top">#22640</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Security
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Added the <code class="literal">manage_index_templates</code> cluster privilege to the built-in role
<code class="literal">kibana_system</code>. For more information, see
<a href="/guide/en/elastic-stack-overview/6.6/security-privileges.html#privileges-list-cluster" class="ulink" target="_top">Cluster Privileges</a>
and <a href="/guide/en/elastic-stack-overview/6.6/built-in-roles.html" class="ulink" target="_top">Built-in Roles</a>.
</li>
<li class="listitem">
Newly created or updated watches execute with the privileges of the user that
last modified the watch.
</li>
<li class="listitem">
Added log messages when a PEM key is found when a PEM certificate was
expected (or vice versa) in the <code class="literal">xpack.ssl.key</code> or <code class="literal">xpack.ssl.certificate</code> settings.
</li>
<li class="listitem">
Added the new <code class="literal">certutil</code> command to simplify the creation of certificates for
use with the Elastic stack. For more information, see <a class="xref" href="certutil.html" title="elasticsearch-certutil"><em>elasticsearch-certutil</em></a>.
</li>
<li class="listitem">
Added automatic detection of support for AES 256 bit TLS ciphers and enabled
their use when the JVM supports them.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Sequence IDs
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Only fsync global checkpoint if needed <a href="https://github.com/elastic/elasticsearch/pull/27652" class="ulink" target="_top">#27652</a>
</li>
<li class="listitem">
Log primary-replica resync failures <a href="https://github.com/elastic/elasticsearch/pull/27421" class="ulink" target="_top">#27421</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/24841" class="ulink" target="_top">#24841</a>, <a href="https://github.com/elastic/elasticsearch/issues/27418" class="ulink" target="_top">#27418</a>)
</li>
<li class="listitem">
Lazy initialize checkpoint tracker bit sets <a href="https://github.com/elastic/elasticsearch/pull/27179" class="ulink" target="_top">#27179</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/10708" class="ulink" target="_top">#10708</a>)
</li>
<li class="listitem">
Returns the current primary_term for Get/MultiGet requests <a href="https://github.com/elastic/elasticsearch/pull/27177" class="ulink" target="_top">#27177</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26493" class="ulink" target="_top">#26493</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Settings
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow affix settings to specify dependencies <a href="https://github.com/elastic/elasticsearch/pull/27161" class="ulink" target="_top">#27161</a>
</li>
<li class="listitem">
Represent lists as actual lists inside Settings <a href="https://github.com/elastic/elasticsearch/pull/26878" class="ulink" target="_top">#26878</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26723" class="ulink" target="_top">#26723</a>)
</li>
<li class="listitem">
Remove Settings#getAsMap() <a href="https://github.com/elastic/elasticsearch/pull/26845" class="ulink" target="_top">#26845</a>
</li>
<li class="listitem">
Replace group map settings with affix setting <a href="https://github.com/elastic/elasticsearch/pull/26819" class="ulink" target="_top">#26819</a>
</li>
<li class="listitem">
Throw exception if setting isn&#8217;t recognized <a href="https://github.com/elastic/elasticsearch/pull/26569" class="ulink" target="_top">#26569</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25607" class="ulink" target="_top">#25607</a>)
</li>
<li class="listitem">
Settings: Move keystore creation to plugin installation <a href="https://github.com/elastic/elasticsearch/pull/26329" class="ulink" target="_top">#26329</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26309" class="ulink" target="_top">#26309</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Snapshot/Restore
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Remove XContentType auto detection in BlobStoreRepository <a href="https://github.com/elastic/elasticsearch/pull/27480" class="ulink" target="_top">#27480</a>
</li>
<li class="listitem">
Snapshot: Migrate TransportRequestHandler to TransportMasterNodeAction <a href="https://github.com/elastic/elasticsearch/pull/27165" class="ulink" target="_top">#27165</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27151" class="ulink" target="_top">#27151</a>)
</li>
<li class="listitem">
Fix toString of class SnapshotStatus (#26851) <a href="https://github.com/elastic/elasticsearch/pull/26852" class="ulink" target="_top">#26852</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26851" class="ulink" target="_top">#26851</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Stats
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Adds average document size to DocsStats <a href="https://github.com/elastic/elasticsearch/pull/27117" class="ulink" target="_top">#27117</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27004" class="ulink" target="_top">#27004</a>)
</li>
<li class="listitem">
Stats to record how often the ClusterState diff mechanism is used successfully <a href="https://github.com/elastic/elasticsearch/pull/27107" class="ulink" target="_top">#27107</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26973" class="ulink" target="_top">#26973</a>)
</li>
<li class="listitem">
Expose adaptive replica selection stats in /_nodes/stats API <a href="https://github.com/elastic/elasticsearch/pull/27090" class="ulink" target="_top">#27090</a>
</li>
<li class="listitem">
Add cgroup memory usage/limit to OS stats on Linux <a href="https://github.com/elastic/elasticsearch/pull/26166" class="ulink" target="_top">#26166</a>
</li>
<li class="listitem">
Add segment attributes to the <code class="literal">_segments</code> API. <a href="https://github.com/elastic/elasticsearch/pull/26157" class="ulink" target="_top">#26157</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26130" class="ulink" target="_top">#26130</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Suggesters
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Improve error message for parse failures of completion fields <a href="https://github.com/elastic/elasticsearch/pull/27297" class="ulink" target="_top">#27297</a>
</li>
<li class="listitem">
Support <em>AND</em> operation for context query in context suggester <a href="https://github.com/elastic/elasticsearch/pull/24565" class="ulink" target="_top">#24565</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24421" class="ulink" target="_top">#24421</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Watcher
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Improved error messages when there are no accounts configured for Watcher.
</li>
<li class="listitem">
Added thread pool rejection information to execution state, which makes it
easier to debug execution failures.
</li>
<li class="listitem">
Added execution state information to watch status details. It is stored in the
<code class="literal">status.execution_state</code> field.
</li>
<li class="listitem">
Enabled the account monitoring <code class="literal">url</code> field in the <code class="literal">xpack.notification.jira</code>
setting to support customized paths. For more information about configuring Jira
accounts for use with watches, see
<a href="/guide/en/elastic-stack-overview/6.6/actions-jira.html" class="ulink" target="_top">Jira Action</a>.
</li>
<li class="listitem">
Improved handling of exceptions in Watcher to make it easier to debug
problems.
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="_bug_fixes_11"></a>Bug Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Disable the "low cardinality" optimization of terms aggregations. <a href="https://github.com/elastic/elasticsearch/pull/27545" class="ulink" target="_top">#27545</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27543" class="ulink" target="_top">#27543</a>)
</li>
<li class="listitem">
scripted_metric _agg parameter disappears if params are provided <a href="https://github.com/elastic/elasticsearch/pull/27159" class="ulink" target="_top">#27159</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/19768" class="ulink" target="_top">#19768</a>, <a href="https://github.com/elastic/elasticsearch/issues/19863" class="ulink" target="_top">#19863</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Cluster
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Properly format IndexGraveyard deletion date as date <a href="https://github.com/elastic/elasticsearch/pull/27362" class="ulink" target="_top">#27362</a>
</li>
<li class="listitem">
Remove optimisations to reuse objects when applying a new <code class="literal">ClusterState</code> <a href="https://github.com/elastic/elasticsearch/pull/27317" class="ulink" target="_top">#27317</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Core
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Do not set data paths on no local storage required <a href="https://github.com/elastic/elasticsearch/pull/27587" class="ulink" target="_top">#27587</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27572" class="ulink" target="_top">#27572</a>)
</li>
<li class="listitem">
Ensure threadcontext is preserved when refresh listeners are invoked <a href="https://github.com/elastic/elasticsearch/pull/27565" class="ulink" target="_top">#27565</a>
</li>
<li class="listitem">
Ensure logging is configured for CLI commands <a href="https://github.com/elastic/elasticsearch/pull/27523" class="ulink" target="_top">#27523</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27521" class="ulink" target="_top">#27521</a>)
</li>
<li class="listitem">
Protect shard splitting from illegal target shards <a href="https://github.com/elastic/elasticsearch/pull/27468" class="ulink" target="_top">#27468</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26931" class="ulink" target="_top">#26931</a>)
</li>
<li class="listitem">
Avoid NPE when getting build information <a href="https://github.com/elastic/elasticsearch/pull/27442" class="ulink" target="_top">#27442</a>
</li>
<li class="listitem">
Fix <code class="literal">ShardSplittingQuery</code> to respect nested documents. <a href="https://github.com/elastic/elasticsearch/pull/27398" class="ulink" target="_top">#27398</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27378" class="ulink" target="_top">#27378</a>)
</li>
<li class="listitem">
When building Settings do not set SecureSettings if empty <a href="https://github.com/elastic/elasticsearch/pull/26988" class="ulink" target="_top">#26988</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/316" class="ulink" target="_top">#316</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Engine
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Reset LiveVersionMap on sync commit <a href="https://github.com/elastic/elasticsearch/pull/27534" class="ulink" target="_top">#27534</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27516" class="ulink" target="_top">#27516</a>)
</li>
<li class="listitem">
Carry over version map size to prevent excessive resizing <a href="https://github.com/elastic/elasticsearch/pull/27516" class="ulink" target="_top">#27516</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/20498" class="ulink" target="_top">#20498</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Geo
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Correct two equality checks on incomparable types <a href="https://github.com/elastic/elasticsearch/pull/27688" class="ulink" target="_top">#27688</a>
</li>
<li class="listitem">
[GEO] fix pointsOnly bug for MULTIPOINT <a href="https://github.com/elastic/elasticsearch/pull/27415" class="ulink" target="_top">#27415</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Index Templates
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Prevent constructing an index template without index patterns <a href="https://github.com/elastic/elasticsearch/pull/27662" class="ulink" target="_top">#27662</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add pipeline support for REST API bulk upsert <a href="https://github.com/elastic/elasticsearch/pull/27075" class="ulink" target="_top">#27075</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25601" class="ulink" target="_top">#25601</a>)
</li>
<li class="listitem">
Fixing Grok pattern for Apache 2.4 <a href="https://github.com/elastic/elasticsearch/pull/26635" class="ulink" target="_top">#26635</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Inner Hits
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Return an empty _source for nested inner hit when filtering on a field that doesn&#8217;t exist <a href="https://github.com/elastic/elasticsearch/pull/27531" class="ulink" target="_top">#27531</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Internal
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When checking if key exists in ThreadContextStruct:putHeaders() method，should put requestHeaders in map first <a href="https://github.com/elastic/elasticsearch/pull/26068" class="ulink" target="_top">#26068</a>
</li>
<li class="listitem">
Adding a refresh listener to a recovering shard should be a noop <a href="https://github.com/elastic/elasticsearch/pull/26055" class="ulink" target="_top">#26055</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Java High Level REST Client
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Register ip_range aggregation with the high level client <a href="https://github.com/elastic/elasticsearch/pull/26383" class="ulink" target="_top">#26383</a>
</li>
<li class="listitem">
add top hits as a parsed aggregation to the rest high level client <a href="https://github.com/elastic/elasticsearch/pull/26370" class="ulink" target="_top">#26370</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Improved handling of scenarios where there are insufficient values to
interpolate trend components.
</li>
<li class="listitem">
Improved calculation of confidence intervals.
</li>
<li class="listitem">
Fixed degrees of freedom calculation that could lead to excessive error logging.
</li>
<li class="listitem">
Improved trend modeling with long bucket spans.
</li>
<li class="listitem">
Fixed timing of when model size statistics are written. Previously, if there
were multiple partitions, there could be multiple model size stats docs written
within the same bucket.
</li>
<li class="listitem">
Updated the calculation of the model memory to include the memory used by
partition, over, by, or influencer fields.
</li>
<li class="listitem">
Fixed calculation of the <code class="literal">frequency</code> property value for datafeeds that use
aggregations. The value must be a multiple of the histogram interval. For more
information, see
<a href="/guide/en/elastic-stack-overview/6.6/ml-configuring-aggregation.html" class="ulink" target="_top">Aggregating Data for Faster Performance</a>.
</li>
<li class="listitem">
Removed unnecessary messages from logs when a job is forcefully closed.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Mapping
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix dynamic mapping update generation. <a href="https://github.com/elastic/elasticsearch/pull/27467" class="ulink" target="_top">#27467</a>
</li>
<li class="listitem">
Fix merging of _meta field <a href="https://github.com/elastic/elasticsearch/pull/27352" class="ulink" target="_top">#27352</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27323" class="ulink" target="_top">#27323</a>)
</li>
<li class="listitem">
Fixed rounding of bounds in scaled float comparison <a href="https://github.com/elastic/elasticsearch/pull/27207" class="ulink" target="_top">#27207</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27189" class="ulink" target="_top">#27189</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Nested Docs
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Ensure nested documents have consistent version and seq_ids <a href="https://github.com/elastic/elasticsearch/pull/27455" class="ulink" target="_top">#27455</a>
</li>
<li class="listitem">
Prevent duplicate fields when mixing parent and root nested includes <a href="https://github.com/elastic/elasticsearch/pull/27072" class="ulink" target="_top">#27072</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26990" class="ulink" target="_top">#26990</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Network
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Throw UOE from compressible bytes stream reset <a href="https://github.com/elastic/elasticsearch/pull/27564" class="ulink" target="_top">#27564</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24927" class="ulink" target="_top">#24927</a>)
</li>
<li class="listitem">
Bubble exceptions when closing compressible streams <a href="https://github.com/elastic/elasticsearch/pull/27542" class="ulink" target="_top">#27542</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27540" class="ulink" target="_top">#27540</a>)
</li>
<li class="listitem">
Do not set SO_LINGER on server channels <a href="https://github.com/elastic/elasticsearch/pull/26997" class="ulink" target="_top">#26997</a>
</li>
<li class="listitem">
Do not set SO_LINGER to 0 when not shutting down <a href="https://github.com/elastic/elasticsearch/pull/26871" class="ulink" target="_top">#26871</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26764" class="ulink" target="_top">#26764</a>)
</li>
<li class="listitem">
Close TcpTransport on RST in some Spots to Prevent Leaking TIME_WAIT Sockets <a href="https://github.com/elastic/elasticsearch/pull/26764" class="ulink" target="_top">#26764</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26701" class="ulink" target="_top">#26701</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Packaging
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removes minimum master nodes default number <a href="https://github.com/elastic/elasticsearch/pull/26803" class="ulink" target="_top">#26803</a>
</li>
<li class="listitem">
setgid on /etc/elasticearch on package install <a href="https://github.com/elastic/elasticsearch/pull/26412" class="ulink" target="_top">#26412</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26410" class="ulink" target="_top">#26410</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Percolator
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Avoid TooManyClauses exception if number of terms / ranges is exactly equal to 1024 <a href="https://github.com/elastic/elasticsearch/pull/27519" class="ulink" target="_top">#27519</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/1" class="ulink" target="_top">#1</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Analysis ICU
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Catch InvalidPathException in IcuCollationTokenFilterFactory <a href="https://github.com/elastic/elasticsearch/pull/27202" class="ulink" target="_top">#27202</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Lang Painless
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Painless: Fix variable scoping issue in lambdas <a href="https://github.com/elastic/elasticsearch/pull/27571" class="ulink" target="_top">#27571</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26760" class="ulink" target="_top">#26760</a>)
</li>
<li class="listitem">
Painless: Fix errors allowing void to be assigned to def. <a href="https://github.com/elastic/elasticsearch/pull/27460" class="ulink" target="_top">#27460</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27210" class="ulink" target="_top">#27210</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Repository GCS
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Create new handlers for every new request in GoogleCloudStorageService <a href="https://github.com/elastic/elasticsearch/pull/27339" class="ulink" target="_top">#27339</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27092" class="ulink" target="_top">#27092</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Recovery
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Flush old indices on primary promotion and relocation <a href="https://github.com/elastic/elasticsearch/pull/27580" class="ulink" target="_top">#27580</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27536" class="ulink" target="_top">#27536</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Reindex API
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Reindex: Fix headers in reindex action <a href="https://github.com/elastic/elasticsearch/pull/26937" class="ulink" target="_top">#26937</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/22976" class="ulink" target="_top">#22976</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Scroll
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix scroll query with a sort that is a prefix of the index sort <a href="https://github.com/elastic/elasticsearch/pull/27498" class="ulink" target="_top">#27498</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix profiling naming issues <a href="https://github.com/elastic/elasticsearch/pull/27133" class="ulink" target="_top">#27133</a>
</li>
<li class="listitem">
Fix max score tracking with field collapsing <a href="https://github.com/elastic/elasticsearch/pull/27122" class="ulink" target="_top">#27122</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/23840" class="ulink" target="_top">#23840</a>)
</li>
<li class="listitem">
Apply missing request options to the expand phase <a href="https://github.com/elastic/elasticsearch/pull/27118" class="ulink" target="_top">#27118</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/26649" class="ulink" target="_top">#26649</a>, <a href="https://github.com/elastic/elasticsearch/issues/27079" class="ulink" target="_top">#27079</a>)
</li>
<li class="listitem">
Calculate and cache result when advanceExact is called <a href="https://github.com/elastic/elasticsearch/pull/26920" class="ulink" target="_top">#26920</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26817" class="ulink" target="_top">#26817</a>)
</li>
<li class="listitem">
Filter unsupported relation for RangeQueryBuilder <a href="https://github.com/elastic/elasticsearch/pull/26620" class="ulink" target="_top">#26620</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26575" class="ulink" target="_top">#26575</a>)
</li>
<li class="listitem">
Handle leniency for phrase query on a field indexed without positions <a href="https://github.com/elastic/elasticsearch/pull/26388" class="ulink" target="_top">#26388</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Security
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fixed REST requests that required a body but did not validate it, resulting in
null pointer exceptions.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Sequence IDs
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Obey translog durability in global checkpoint sync <a href="https://github.com/elastic/elasticsearch/pull/27641" class="ulink" target="_top">#27641</a>
</li>
<li class="listitem">
Fix resync request serialization <a href="https://github.com/elastic/elasticsearch/pull/27418" class="ulink" target="_top">#27418</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24841" class="ulink" target="_top">#24841</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Settings
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow index settings to be reset by wildcards <a href="https://github.com/elastic/elasticsearch/pull/27671" class="ulink" target="_top">#27671</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27537" class="ulink" target="_top">#27537</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Snapshot/Restore
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Do not swallow exception in ChecksumBlobStoreFormat.writeAtomic() <a href="https://github.com/elastic/elasticsearch/pull/27597" class="ulink" target="_top">#27597</a>
</li>
<li class="listitem">
Delete shard store files before restoring a snapshot <a href="https://github.com/elastic/elasticsearch/pull/27476" class="ulink" target="_top">#27476</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/20220" class="ulink" target="_top">#20220</a>, <a href="https://github.com/elastic/elasticsearch/issues/26865" class="ulink" target="_top">#26865</a>)
</li>
<li class="listitem">
Fix snapshot getting stuck in INIT state <a href="https://github.com/elastic/elasticsearch/pull/27214" class="ulink" target="_top">#27214</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27180" class="ulink" target="_top">#27180</a>)
</li>
<li class="listitem">
Fix default value of ignore_unavailable for snapshot REST API (#25359) <a href="https://github.com/elastic/elasticsearch/pull/27056" class="ulink" target="_top">#27056</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/25359" class="ulink" target="_top">#25359</a>)
</li>
<li class="listitem">
Do not create directory on readonly repository (#21495) <a href="https://github.com/elastic/elasticsearch/pull/26909" class="ulink" target="_top">#26909</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/21495" class="ulink" target="_top">#21495</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Stats
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Include internal refreshes in refresh stats <a href="https://github.com/elastic/elasticsearch/pull/27615" class="ulink" target="_top">#27615</a>
</li>
<li class="listitem">
Make Segment statistics aware of segments hold by internal readers <a href="https://github.com/elastic/elasticsearch/pull/27558" class="ulink" target="_top">#27558</a>
</li>
<li class="listitem">
Ensure <code class="literal">doc_stats</code> are changing even if refresh is disabled <a href="https://github.com/elastic/elasticsearch/pull/27505" class="ulink" target="_top">#27505</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Watcher
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fixed handling of watcher templates. Missing watcher templates can be added by
any node if that node has a higher version than the master node.
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="_upgrades_3"></a>Upgrades<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/release-notes/6.1.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Core
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Upgrade to Jackson 2.8.10 <a href="https://github.com/elastic/elasticsearch/pull/27230" class="ulink" target="_top">#27230</a>
</li>
<li class="listitem">
Upgrade to Lucene 7.1 <a href="https://github.com/elastic/elasticsearch/pull/27225" class="ulink" target="_top">#27225</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Discovery EC2
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Upgrade AWS SDK Jackson Databind to 2.6.7.1 <a href="https://github.com/elastic/elasticsearch/pull/27361" class="ulink" target="_top">#27361</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/27278" class="ulink" target="_top">#27278</a>, <a href="https://github.com/elastic/elasticsearch/issues/27359" class="ulink" target="_top">#27359</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Discovery GCE
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Update Google SDK to version 1.23.0 <a href="https://github.com/elastic/elasticsearch/pull/27381" class="ulink" target="_top">#27381</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/26636" class="ulink" target="_top">#26636</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Plugin Lang Painless
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Upgrade Painless from ANTLR 4.5.1-1 to  ANTLR 4.5.3. <a href="https://github.com/elastic/elasticsearch/pull/27153" class="ulink" target="_top">#27153</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes-6.1.1.html">« Elasticsearch version 6.1.1</a>
</span>
<span class="next">
<a href="release-notes-6.0.1.html">Elasticsearch version 6.0.1 »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
