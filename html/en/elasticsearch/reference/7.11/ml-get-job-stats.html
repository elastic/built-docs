<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Get anomaly detection job statistics API | Elasticsearch Guide [7.11] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Guide [7.11]"/>
<link rel="up" href="ml-apis.html" title="Machine learning anomaly detection APIs"/>
<link rel="prev" href="ml-get-job.html" title="Get anomaly detection jobs API"/>
<link rel="next" href="get-ml-info.html" title="Get machine learning info API"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.11"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.11"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [7.11]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="ml-apis.html">Machine learning anomaly detection APIs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-get-job.html">« Get anomaly detection jobs API</a>
</span>
<span class="next">
<a href="get-ml-info.html">Get machine learning info API »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-get-job-stats"></a>Get anomaly detection job statistics API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h2>
</div></div></div>

<p>Retrieves usage information for anomaly detection jobs.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-request"></a>Request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET _ml/anomaly_detectors/&lt;job_id&gt;/_stats</code></p>
<p><code class="literal">GET _ml/anomaly_detectors/&lt;job_id&gt;,&lt;job_id&gt;/_stats</code><br></p>
<p><code class="literal">GET _ml/anomaly_detectors/_stats</code><br></p>
<p><code class="literal">GET _ml/anomaly_detectors/_all/_stats</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-prereqs"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have <code class="literal">monitor_ml</code>,
<code class="literal">monitor</code>, <code class="literal">manage_ml</code>, or <code class="literal">manage</code> cluster privileges to use this API. See
<a class="xref" href="security-privileges.html" title="Security privileges">Security privileges</a> and <a href="/guide/en/machine-learning/7.11/setup.html#setup-privileges" class="ulink" target="_top">Machine learning security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-desc"></a>Description<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<p>You can get statistics for multiple anomaly detection jobs in a single API request by
using a group name, a comma-separated list of jobs, or a wildcard expression.
You can get statistics for all anomaly detection jobs by using <code class="literal">_all</code>, by specifying <code class="literal">*</code>
as the <code class="literal">&lt;job_id&gt;</code>, or by omitting the <code class="literal">&lt;job_id&gt;</code>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API returns a maximum of 10,000 jobs.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-path-parms"></a>Path parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;job_id&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Identifier for the anomaly detection job. It can be a job identifier, a group name, or a
wildcard expression. If you do not specify one of these options, the API returns
information for all anomaly detection jobs.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-query-parms"></a>Query parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_jobs</code>
</span>
</dt>
<dd>
(Optional, Boolean) <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.10</span>]
<span class="Admonishment-detail">
Deprecated in 7.10. Use <code class="literal">allow_no_match</code> instead.
</span>
</span>
</dd>
<dt>
<span class="term">
<code class="literal">allow_no_match</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
Specifies what to do when the request:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Contains wildcard expressions and there are no jobs that match.
</li>
<li class="listitem">
Contains the <code class="literal">_all</code> string or no identifiers and there are no matches.
</li>
<li class="listitem">
Contains wildcard expressions and there are only partial matches.
</li>
</ul>
</div>
<p>The default value is <code class="literal">true</code>, which returns an empty <code class="literal">jobs</code> array
when there are no matches and the subset of results when there are partial
matches. If this parameter is <code class="literal">false</code>, the request returns a <code class="literal">404</code> status code
when there are no matches or only partial matches.</p>
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-results"></a>Response body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<p>The API returns the following information about the operational progress of a
job:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">assignment_explanation</code>
</span>
</dt>
<dd>
(string)
For open anomaly detection jobs only, contains messages relating to the selection
of a node to run the job.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a id="datacounts"></a><code class="literal">data_counts</code>
</span>
</dt>
<dd>
<p>
(object) An object that describes the quantity of input to the job and any
related error counts. The <code class="literal">data_count</code> values are cumulative for the lifetime of
a job. If a model snapshot is reverted or old results are deleted, the job
counts are not reset.
</p>
<details open>
<summary class="title">Properties of <code class="literal">data_counts</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">bucket_count</code>
</span>
</dt>
<dd>
(long)
The number of bucket results produced by the job.
</dd>
<dt>
<span class="term">
<code class="literal">earliest_record_timestamp</code>
</span>
</dt>
<dd>
(date)
The timestamp of the earliest chronologically input document.
</dd>
<dt>
<span class="term">
<code class="literal">empty_bucket_count</code>
</span>
</dt>
<dd>
(long)
The number of buckets which did not contain any data. If your data
contains many empty buckets, consider increasing your <code class="literal">bucket_span</code> or using
functions that are tolerant to gaps in data such as <code class="literal">mean</code>, <code class="literal">non_null_sum</code> or
<code class="literal">non_zero_count</code>.
</dd>
<dt>
<span class="term">
<code class="literal">input_bytes</code>
</span>
</dt>
<dd>
(long)
The number of bytes of input data posted to the anomaly detection job.
</dd>
<dt>
<span class="term">
<code class="literal">input_field_count</code>
</span>
</dt>
<dd>
(long)
The total number of fields in input documents posted to the anomaly detection job. This
count includes fields that are not used in the analysis. However, be aware that
if you are using a datafeed, it extracts only the required fields from the
documents it retrieves before posting them to the job.
</dd>
<dt>
<span class="term">
<code class="literal">input_record_count</code>
</span>
</dt>
<dd>
(long)
The number of input documents posted to the anomaly detection job.
</dd>
<dt>
<span class="term">
<code class="literal">invalid_date_count</code>
</span>
</dt>
<dd>
(long)
The number of input documents with either a missing date field or a date that
could not be parsed.
</dd>
<dt>
<span class="term">
<code class="literal">job_id</code>
</span>
</dt>
<dd>
(string)
Identifier for the anomaly detection job.
</dd>
<dt>
<span class="term">
<code class="literal">last_data_time</code>
</span>
</dt>
<dd>
(date)
The timestamp at which data was last analyzed, according to server time.
</dd>
<dt>
<span class="term">
<code class="literal">latest_empty_bucket_timestamp</code>
</span>
</dt>
<dd>
(date)
The timestamp of the last bucket that did not contain any data.
</dd>
<dt>
<span class="term">
<code class="literal">latest_record_timestamp</code>
</span>
</dt>
<dd>
(date)
The timestamp of the latest chronologically input document.
</dd>
<dt>
<span class="term">
<code class="literal">latest_sparse_bucket_timestamp</code>
</span>
</dt>
<dd>
(date)
The timestamp of the last bucket that was considered sparse.
</dd>
<dt>
<span class="term">
<code class="literal">log_time</code>
</span>
</dt>
<dd>
(date) The timestamp of the <code class="literal">data_counts</code> according to server time.
</dd>
<dt>
<span class="term">
<code class="literal">missing_field_count</code>
</span>
</dt>
<dd>
<p>
(long)
The number of input documents that are missing a field that the anomaly detection job is
configured to analyze. Input documents with missing fields are still processed
because it is possible that not all fields are missing.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using datafeeds or posting data to the job in JSON format, a
high <code class="literal">missing_field_count</code> is often not an indication of data issues. It is not
necessarily a cause for concern.</p>
</div>
</div>
<p>The value of <code class="literal">processed_record_count</code> includes this count.</p>
</dd>
<dt>
<span class="term">
<code class="literal">out_of_order_timestamp_count</code>
</span>
</dt>
<dd>
(long)
The number of input documents that are out of time sequence and outside
of the latency window. This information is applicable only when you provide data
to the anomaly detection job by using the <a class="xref" href="ml-post-data.html" title="Post data to jobs API">post data API</a>. These out of
order documents are  discarded, since jobs require time series data to be in
ascending chronological order.
</dd>
<dt>
<span class="term">
<code class="literal">processed_field_count</code>
</span>
</dt>
<dd>
The total number of fields in all the documents that have been processed by the
anomaly detection job. Only fields that are specified in the detector configuration
object contribute to this count. The timestamp is not included in this count.
</dd>
<dt>
<span class="term">
<code class="literal">processed_record_count</code>
</span>
</dt>
<dd>
(long)
The number of input documents that have been processed by the anomaly detection job.
This value includes documents with missing fields, since they are nonetheless
analyzed. If you use datafeeds and have aggregations in your search query, the
<code class="literal">processed_record_count</code> is the number of aggregation results processed, not the
number of Elasticsearch documents.
</dd>
<dt>
<span class="term">
<code class="literal">sparse_bucket_count</code>
</span>
</dt>
<dd>
(long)
The number of buckets that contained few data points compared to the expected
number of data points. If your data contains many sparse buckets, consider using
a longer <code class="literal">bucket_span</code>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">deleting</code>
</span>
</dt>
<dd>
(Boolean)
Indicates that the process of deleting the job is in progress but not yet
completed. It is only reported when <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a id="forecastsstats"></a><code class="literal">forecasts_stats</code>
</span>
</dt>
<dd>
<p>
(object) An object that provides statistical information about forecasts
belonging to this job. Some statistics are omitted if no forecasts have been
made.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Unless there is at least one forecast, <code class="literal">memory_bytes</code>, <code class="literal">records</code>,
<code class="literal">processing_time_ms</code> and <code class="literal">status</code> properties are omitted.</p>
</div>
</div>
<details open>
<summary class="title">Properties of <code class="literal">forecasts_stats</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">forecasted_jobs</code>
</span>
</dt>
<dd>
(long) A value of <code class="literal">0</code> indicates that forecasts do not exist for this job. A
value of <code class="literal">1</code> indicates that at least one forecast exists.
</dd>
<dt>
<span class="term">
<code class="literal">memory_bytes</code>
</span>
</dt>
<dd>
(object) The <code class="literal">avg</code>, <code class="literal">min</code>, <code class="literal">max</code> and <code class="literal">total</code> memory usage in bytes for forecasts
related to this job. If there are no forecasts, this property is omitted.
</dd>
<dt>
<span class="term">
<code class="literal">processing_time_ms</code>
</span>
</dt>
<dd>
(object) The <code class="literal">avg</code>, <code class="literal">min</code>, <code class="literal">max</code> and <code class="literal">total</code> runtime in milliseconds for
forecasts related to this job. If there are no forecasts, this property is
omitted.
</dd>
<dt>
<span class="term">
<code class="literal">records</code>
</span>
</dt>
<dd>
(object) The <code class="literal">avg</code>, <code class="literal">min</code>, <code class="literal">max</code> and <code class="literal">total</code> number of <code class="literal">model_forecast</code> documents
written for forecasts related to this job. If there are no forecasts, this
property is omitted.
</dd>
<dt>
<span class="term">
<code class="literal">status</code>
</span>
</dt>
<dd>
(object) The count of forecasts by their status. For example:
{"finished" : 2, "started" : 1}. If there are no forecasts, this property is
omitted.
</dd>
<dt>
<span class="term">
<code class="literal">total</code>
</span>
</dt>
<dd>
(long)
The number of individual forecasts currently available for the job. A value of
<code class="literal">1</code> or more indicates that forecasts exist.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">job_id</code>
</span>
</dt>
<dd>
(string)
Identifier for the anomaly detection job.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a id="modelsizestats"></a><code class="literal">model_size_stats</code>
</span>
</dt>
<dd>
<p>
(object) An object that provides information about the size and contents of the
model.
</p>
<details open>
<summary class="title">Properties of <code class="literal">model_size_stats</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">assignment_memory_basis</code>
</span>
</dt>
<dd>
<p>
(string)
Where should the memory requirement used for deciding which node the job
will run on come from? The possible values are:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">model_memory_limit</code>: The job&#8217;s memory requirement will be calculated on
the basis that its model memory will grow to the <code class="literal">model_memory_limit</code>
specified in the <code class="literal">analysis_limits</code> of its config.
</li>
<li class="listitem">
<code class="literal">current_model_bytes</code>: The job&#8217;s memory requirement will be calculated on
the basis that its current model memory size is a good reflection of what
it will be in the future.
</li>
<li class="listitem">
<code class="literal">peak_model_bytes</code>: The job&#8217;s memory requirement will be calculated on
the basis that its peak model memory size is a good reflection of what
the model size will be in the future.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">bucket_allocation_failures_count</code>
</span>
</dt>
<dd>
(long)
The number of buckets for which new entities in incoming data were not processed
due to insufficient model memory. This situation is also signified by a
<code class="literal">hard_limit: memory_status</code> property value.
</dd>
<dt>
<span class="term">
<code class="literal">categorized_doc_count</code>
</span>
</dt>
<dd>
(long)
The number of documents that have had a field categorized.
</dd>
<dt>
<span class="term">
<code class="literal">categorization_status</code>
</span>
</dt>
<dd>
<p>
(string)
The status of categorization for the job. Contains one of the following values:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ok</code>: Categorization is performing acceptably well (or not being used at all).
</li>
<li class="listitem">
<code class="literal">warn</code>: Categorization is detecting a distribution of categories that suggests
the input data is inappropriate for categorization. Problems could be that there
is only one category, more than 90% of categories are rare, the number of
categories is greater than 50% of the number of categorized documents, there are
no frequently matched categories, or more than 50% of categories are dead.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">dead_category_count</code>
</span>
</dt>
<dd>
(long)
The number of categories created by categorization that will never be assigned
again because another category&#8217;s definition makes it a superset of the dead
category. (Dead categories are a side effect of the way categorization has no
prior training.)
</dd>
<dt>
<span class="term">
<code class="literal">failed_category_count</code>
</span>
</dt>
<dd>
(long)
The number of times that categorization wanted to create a new category but
couldn&#8217;t because the job had hit its <code class="literal">model_memory_limit</code>. This count does not
track which specific categories failed to be created. Therefore you cannot use
this value to determine the number of unique categories that were missed.
</dd>
<dt>
<span class="term">
<code class="literal">frequent_category_count</code>
</span>
</dt>
<dd>
(long)
The number of categories that match more than 1% of categorized documents.
</dd>
<dt>
<span class="term">
<code class="literal">job_id</code>
</span>
</dt>
<dd>
(string)
Identifier for the anomaly detection job.
</dd>
<dt>
<span class="term">
<code class="literal">log_time</code>
</span>
</dt>
<dd>
(date) The timestamp of the <code class="literal">model_size_stats</code> according to server time.
</dd>
<dt>
<span class="term">
<code class="literal">memory_status</code>
</span>
</dt>
<dd>
<p>
(string)
The status of the mathematical models, which can have one of the following
values:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ok</code>: The models stayed below the configured value.
</li>
<li class="listitem">
<code class="literal">soft_limit</code>: The models used more than 60% of the configured memory limit
and older unused models will be pruned to free up space. Additionally, in
categorization jobs no further category examples will be stored.
</li>
<li class="listitem">
<code class="literal">hard_limit</code>: The models used more space than the configured memory limit.
As a result, not all incoming data was processed.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">model_bytes</code>
</span>
</dt>
<dd>
(long)
The number of bytes of memory used by the models. This is the maximum value
since the last time the model was persisted. If the job is closed, this value
indicates the latest size.
</dd>
<dt>
<span class="term">
<code class="literal">model_bytes_exceeded</code>
</span>
</dt>
<dd>
(long)
The number of bytes over the high limit for memory usage at the last allocation
failure.
</dd>
<dt>
<span class="term">
<code class="literal">model_bytes_memory_limit</code>
</span>
</dt>
<dd>
(long)
The upper limit for model memory usage, checked on increasing values.
</dd>
<dt>
<span class="term">
<code class="literal">peak_model_bytes</code>
</span>
</dt>
<dd>
(long)
The peak number of bytes of memory ever used by the models.
</dd>
<dt>
<span class="term">
<code class="literal">rare_category_count</code>
</span>
</dt>
<dd>
(long)
The number of categories that match just one categorized document.
</dd>
<dt>
<span class="term">
<code class="literal">result_type</code>
</span>
</dt>
<dd>
(string) For internal use. The type of result.
</dd>
<dt>
<span class="term">
<code class="literal">total_by_field_count</code>
</span>
</dt>
<dd>
(long)
The number of <code class="literal">by</code> field values that were analyzed by the models. This value is
cumulative for all detectors in the job.
</dd>
<dt>
<span class="term">
<code class="literal">total_category_count</code>
</span>
</dt>
<dd>
(long)
The number of categories created by categorization.
</dd>
<dt>
<span class="term">
<code class="literal">total_over_field_count</code>
</span>
</dt>
<dd>
(long)
The number of <code class="literal">over</code> field values that were analyzed by the models. This value
is cumulative for all detectors in the job.
</dd>
<dt>
<span class="term">
<code class="literal">total_partition_field_count</code>
</span>
</dt>
<dd>
(long)
The number of <code class="literal">partition</code> field values that were analyzed by the models. This
value is cumulative for all detectors in the job.
</dd>
<dt>
<span class="term">
<code class="literal">timestamp</code>
</span>
</dt>
<dd>
(date)
The timestamp of the last record when the model stats were gathered.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a id="stats-node"></a><code class="literal">node</code>
</span>
</dt>
<dd>
<p>
(object) Contains properties for the node that runs the job. This information is
available only for open jobs.
</p>
<details open>
<summary class="title">Properties of <code class="literal">node</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">attributes</code>
</span>
</dt>
<dd>
(object)
Lists node attributes such as <code class="literal">ml.machine_memory</code> or <code class="literal">ml.max_open_jobs</code> settings.
</dd>
<dt>
<span class="term">
<code class="literal">ephemeral_id</code>
</span>
</dt>
<dd>
(string)
The ephemeral ID of the node.
</dd>
<dt>
<span class="term">
<code class="literal">id</code>
</span>
</dt>
<dd>
(string)
The unique identifier of the node.
</dd>
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(string)
The node name.
</dd>
<dt>
<span class="term">
<code class="literal">transport_address</code>
</span>
</dt>
<dd>
(string)
The host and port where transport HTTP connections are accepted.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">open_time</code>
</span>
</dt>
<dd>
(string)
For open jobs only, the elapsed time for which the job has been open.
</dd>
<dt>
<span class="term">
<code class="literal">state</code>
</span>
</dt>
<dd>
<p>
(string)
The status of the anomaly detection job, which can be one of the following values:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">closed</code>: The job finished successfully with its model state persisted. The
job must be opened before it can accept further data.
</li>
<li class="listitem">
<code class="literal">closing</code>: The job close action is in progress and has not yet completed. A
closing job cannot accept further data.
</li>
<li class="listitem">
<code class="literal">failed</code>: The job did not finish successfully due to an error. This situation
can occur due to invalid input data, a fatal error occurring during the
analysis, or an external interaction such as the process being killed by the
Linux out of memory (OOM) killer. If the job had irrevocably failed, it must be
force closed and then deleted. If the datafeed can be corrected, the job can be
closed and then re-opened.
</li>
<li class="listitem">
<code class="literal">opened</code>: The job is available to receive and process data.
</li>
<li class="listitem">
<code class="literal">opening</code>: The job open action is in progress and has not yet completed.
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a id="timingstats"></a><code class="literal">timing_stats</code>
</span>
</dt>
<dd>
<p>
(object) An object that provides statistical information about timing aspect of
this job.
</p>
<details open>
<summary class="title">Properties of <code class="literal">timing_stats</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">average_bucket_processing_time_ms</code>
</span>
</dt>
<dd>
(double) Average of all bucket processing times in milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">bucket_count</code>
</span>
</dt>
<dd>
(long)
The number of buckets processed.
</dd>
<dt>
<span class="term">
<code class="literal">exponential_average_bucket_processing_time_ms</code>
</span>
</dt>
<dd>
(double)
Exponential moving average of all bucket processing times, in milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">exponential_average_bucket_processing_time_per_hour_ms</code>
</span>
</dt>
<dd>
(double)
Exponentially-weighted moving average of bucket processing times
calculated in a 1 hour time window, in milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">job_id</code>
</span>
</dt>
<dd>
(string)
Identifier for the anomaly detection job.
</dd>
<dt>
<span class="term">
<code class="literal">maximum_bucket_processing_time_ms</code>
</span>
</dt>
<dd>
(double)
Maximum among all bucket processing times, in milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">minimum_bucket_processing_time_ms</code>
</span>
</dt>
<dd>
(double)
Minimum among all bucket processing times, in milliseconds.
</dd>
<dt>
<span class="term">
<code class="literal">total_bucket_processing_time_ms</code>
</span>
</dt>
<dd>
(double)
Sum of all bucket processing times, in milliseconds.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-response-codes"></a>Response codes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">404</code> (Missing resources)
</span>
</dt>
<dd>
If <code class="literal">allow_no_match</code> is <code class="literal">false</code>, this code indicates that there are no
resources that match the request or only partial matches for the request.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-get-job-stats-example"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.11/docs/reference/ml/anomaly-detection/apis/get-job-stats.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET _ml/anomaly_detectors/low_request_rate/_stats</pre>
</div>
<div class="console_widget" data-snippet="snippets/2139.console"></div>
<p>The API returns the following results:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "count" : 1,
  "jobs" : [
    {
      "job_id" : "low_request_rate",
      "data_counts" : {
        "job_id" : "low_request_rate",
        "processed_record_count" : 1216,
        "processed_field_count" : 1216,
        "input_bytes" : 51678,
        "input_field_count" : 1216,
        "invalid_date_count" : 0,
        "missing_field_count" : 0,
        "out_of_order_timestamp_count" : 0,
        "empty_bucket_count" : 242,
        "sparse_bucket_count" : 0,
        "bucket_count" : 1457,
        "earliest_record_timestamp" : 1575172659612,
        "latest_record_timestamp" : 1580417369440,
        "last_data_time" : 1576017595046,
        "latest_empty_bucket_timestamp" : 1580356800000,
        "input_record_count" : 1216
      },
      "model_size_stats" : {
        "job_id" : "low_request_rate",
        "result_type" : "model_size_stats",
        "model_bytes" : 41480,
        "model_bytes_exceeded" : 0,
        "model_bytes_memory_limit" : 10485760,
        "total_by_field_count" : 3,
        "total_over_field_count" : 0,
        "total_partition_field_count" : 2,
        "bucket_allocation_failures_count" : 0,
        "memory_status" : "ok",
        "categorized_doc_count" : 0,
        "total_category_count" : 0,
        "frequent_category_count" : 0,
        "rare_category_count" : 0,
        "dead_category_count" : 0,
        "failed_category_count" : 0,
        "categorization_status" : "ok",
        "log_time" : 1576017596000,
        "timestamp" : 1580410800000
      },
      "forecasts_stats" : {
        "total" : 1,
        "forecasted_jobs" : 1,
        "memory_bytes" : {
          "total" : 9179.0,
          "min" : 9179.0,
          "avg" : 9179.0,
          "max" : 9179.0
        },
        "records" : {
          "total" : 168.0,
          "min" : 168.0,
          "avg" : 168.0,
          "max" : 168.0
        },
        "processing_time_ms" : {
          "total" : 40.0,
          "min" : 40.0,
          "avg" : 40.0,
          "max" : 40.0
        },
        "status" : {
          "finished" : 1
        }
      },
      "state" : "opened",
      "node" : {
        "id" : "7bmMXyWCRs-TuPfGJJ_yMw",
        "name" : "node-0",
        "ephemeral_id" : "hoXMLZB0RWKfR9UPPUCxXX",
        "transport_address" : "127.0.0.1:9300",
        "attributes" : {
          "ml.machine_memory" : "17179869184",
          "xpack.installed" : "true",
          "ml.max_open_jobs" : "20"
        }
      },
      "assignment_explanation" : "",
      "open_time" : "13s",
      "timing_stats" : {
        "job_id" : "low_request_rate",
        "bucket_count" : 1457,
        "total_bucket_processing_time_ms" : 1094.000000000001,
        "minimum_bucket_processing_time_ms" : 0.0,
        "maximum_bucket_processing_time_ms" : 48.0,
        "average_bucket_processing_time_ms" : 0.75085792724777,
        "exponential_average_bucket_processing_time_ms" : 0.5571716855800993,
        "exponential_average_bucket_processing_time_per_hour_ms" : 15.0
      }
    }
  ]
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="ml-get-job.html">« Get anomaly detection jobs API</a>
</span>
<span class="next">
<a href="get-ml-info.html">Get machine learning info API »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
