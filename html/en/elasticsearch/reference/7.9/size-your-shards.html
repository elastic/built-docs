<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>How to size your shards | Elasticsearch Guide [7.9] | Elastic</title>
<meta class="elastic" name="content" content="How to size your shards | Elasticsearch Guide [7.9]">

<link rel="home" href="index.html" title="Elasticsearch Guide [7.9]"/>
<link rel="up" href="how-to.html" title="How To"/>
<link rel="prev" href="tune-for-disk-usage.html" title="Tune for disk usage"/>
<link rel="next" href="glossary.html" title="Glossary of terms"/>
<meta class="elastic" name="product_version" content="7.9"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.9"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="tune-for-disk-usage.html">« Tune for disk usage</a>
</span>
<span class="next">
<a href="glossary.html">Glossary of terms »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [7.9]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="how-to.html">How To</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>How to size your shards</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/deploy-manage/production-guidance/optimize-performance/size-shards">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="size-your-shards"></a>How to size your shards</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
</div></div></div>

<p>To protect against hardware failure and increase capacity, Elasticsearch stores copies of
an index’s data across multiple shards on multiple nodes. The number and size of
these shards can have a significant impact on your cluster&#8217;s health. One common
problem is <em>oversharding</em>, a situation in which a cluster with a large number of
shards becomes unstable.</p>
<div class="position-relative"><h3><a id="create-a-sharding-strategy"></a>Create a sharding strategy</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>The best way to prevent oversharding and other shard-related issues
is to create a sharding strategy. A sharding strategy helps you determine and
maintain the optimal number of shards for your cluster while limiting the size
of those shards.</p>
<p>Unfortunately, there is no one-size-fits-all sharding strategy. A strategy that
works in one environment may not scale in another. A good sharding strategy must
account for your infrastructure, use case, and performance expectations.</p>
<p>The best way to create a sharding strategy is to benchmark your production data
on production hardware using the same queries and indexing loads you&#8217;d see in
production. For our recommended methodology, watch the
<a href="/elasticon/conf/2016/sf/quantitative-cluster-sizing" class="ulink" target="_top">quantitative
cluster sizing video</a>. As you test different shard configurations, use Kibana&#8217;s
<a href="/guide/en/kibana/7.9/elasticsearch-metrics.html" class="ulink" target="_top">Elasticsearch monitoring tools</a> to track your
cluster&#8217;s stability and performance.</p>
<p>The following sections provide some reminders and guidelines you should consider
when designing your sharding strategy. If your cluster has shard-related
problems, see <a class="xref" href="size-your-shards.html#fix-an-oversharded-cluster" title="Fix an oversharded cluster">Fix an oversharded cluster</a>.</p>
<div class="position-relative"><h3><a id="shard-sizing-considerations"></a>Sizing considerations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>Keep the following things in mind when building your sharding strategy.</p>
<div class="position-relative"><h4><a id="single-thread-per-shard"></a>Searches run on a single thread per shard</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>Most searches hit multiple shards. Each shard runs the search on a single
CPU thread. While a shard can run multiple concurrent searches, searches across a
large number of shards can deplete a node&#8217;s <a class="xref" href="modules-threadpool.html" title="Thread pools">search
thread pool</a>. This can result in low throughput and slow search speeds.</p>
<div class="position-relative"><h4><a id="each-shard-has-overhead"></a>Each shard has overhead</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>Every shard uses memory and CPU resources. In most cases, a small
set of large shards uses fewer resources than many small shards.</p>
<p>Segments play a big role in a shard&#8217;s resource usage. Most shards contain
several segments, which store its index data. Elasticsearch keeps segment metadata in
<a class="xref" href="heap-size.html" title="Setting the heap size">heap memory</a> so it can be quickly retrieved for searches. As a
shard grows, its segments are <a class="xref" href="index-modules-merge.html" title="Merge">merged</a> into fewer, larger
segments. This decreases the number of segments, which means less metadata is
kept in heap memory.</p>
<div class="position-relative"><h4><a id="shard-auto-balance"></a>Elasticsearch automatically balances shards across nodes</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>By default, Elasticsearch attempts to spread an index&#8217;s shards across as many nodes as
possible. When a node fails or you add a new node, Elasticsearch automatically rebalances
shards across the remaining nodes.</p>
<p>You can use <a class="xref" href="modules-cluster.html#shard-allocation-awareness" title="Shard allocation awareness">shard allocation awareness</a> to ensure
shards for particular indices only move to specified nodes. If you use Elasticsearch for
time series data, you can use shard allocation to decrease storage costs by
assigning shards for older indices to nodes with less expensive hardware.</p>
<div class="position-relative"><h3><a id="shard-size-best-practices"></a>Best practices</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>Where applicable, use the following best practices as starting points for your
sharding strategy.</p>
<div class="position-relative"><h4><a id="delete-indices-not-documents"></a>Delete indices, not documents</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>Deleted documents aren&#8217;t immediately removed from Elasticsearch&#8217;s file system.
Instead, Elasticsearch marks the document as deleted on each related shard. The marked
document will continue to use resources until it&#8217;s removed during a periodic
<a class="xref" href="index-modules-merge.html" title="Merge">segment merge</a>.</p>
<p>When possible, delete entire indices instead. Elasticsearch can immediately remove
deleted indices directly from the file system and free up resources.</p>
<div class="position-relative"><h4><a id="use-ds-ilm-for-time-series"></a>Use data streams and ILM for time series data</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p><a class="xref" href="data-streams.html" title="Data streams">Data streams</a> let you store time series data across multiple,
time-based backing indices. You can use <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management
(ILM)</a> to automatically manage these backing indices.</p>
<p class="screenshot"><span class="image"><img src="images/ilm/index-lifecycle-policies.png" alt="index lifecycle policies"></span></p>
<p>One advantage of this setup is
<a class="xref" href="getting-started-index-lifecycle-management.html" title="Tutorial: Automate rollover with ILM">automatic rollover</a>, which creates
a new write index when the current one meets a defined <code class="literal">max_age</code>, <code class="literal">max_docs</code>, or
<code class="literal">max_size</code> threshold. You can use these thresholds to create indices based on
your retention intervals. When an index is no longer needed, you can use
ILM to automatically delete it and free up resources.</p>
<p>ILM also makes it easy to change your sharding strategy over time:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Want to decrease the shard count for new indices?</strong></span><br>
Change the <a class="xref" href="index-modules.html#index-number-of-shards"><code class="literal">index.number_of_shards</code></a> setting in the
data stream&#8217;s <a class="xref" href="data-streams-change-mappings-and-settings.html" title="Change mappings and settings for a data stream">matching index
template</a>.
</li>
<li class="listitem">
<span class="strong strong"><strong>Want larger shards?</strong></span><br>
Increase your ILM policy&#8217;s <a class="xref" href="ilm-rollover.html" title="Rollover">rollover threshold</a>.
</li>
<li class="listitem">
<span class="strong strong"><strong>Need indices that span shorter intervals?</strong></span><br>
Offset the increased shard count by deleting older indices sooner. You can do
this by lowering the <code class="literal">min_age</code> threshold for your policy&#8217;s
<a class="xref" href="ilm-index-lifecycle.html" title="Index lifecycle">delete phase</a>.
</li>
</ul>
</div>
<p>Every new backing index is an opportunity to further tune your strategy.</p>
<div class="position-relative"><h4><a id="shard-size-recommendation"></a>Aim for shard sizes between 10GB and 50GB</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>Shards larger than 50GB may make a cluster less likely to recover from failure.
When a node fails, Elasticsearch rebalances the node&#8217;s shards across the cluster&#8217;s
remaining nodes. Shards larger than 50GB can be harder to move across a network
and may tax node resources.</p>
<div class="position-relative"><h4><a id="shard-count-recommendation"></a>Aim for 20 shards or fewer per GB of heap memory</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>The number of shards a node can hold is proportional to the node&#8217;s
<a class="xref" href="heap-size.html" title="Setting the heap size">heap memory</a>. For example, a node with 30GB of heap memory should
have at most 600 shards. The further below this limit you can keep your nodes,
the better. If you find your nodes exceeding more than 20 shards per GB,
consider adding another node. You can use the <a class="xref" href="cat-shards.html" title="cat shards API">cat shards API</a> to
check the number of shards per node.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET _cat/shards</pre>
</div>
<div class="console_widget" data-snippet="snippets/1509.console"></div>
<p>To use compressed pointers and save memory, we
recommend each node have a maximum heap size of 32GB or 50% of the node&#8217;s
available memory, whichever is lower. See <a class="xref" href="heap-size.html" title="Setting the heap size">Setting the heap size</a>.</p>
<div class="position-relative"><h4><a id="avoid-node-hotspots"></a>Avoid node hotspots</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>If too many shards are allocated to a specific node, the node can become a
hotspot. For example, if a single node contains too many shards for an index
with a high indexing volume, the node is likely to have issues.</p>
<p>To prevent hotspots, use the
<a class="xref" href="allocation-total-shards.html#total-shards-per-node"><code class="literal">index.routing.allocation.total_shards_per_node</code></a> index
setting to explicitly limit the number of shards on a single node. You can
configure <code class="literal">index.routing.allocation.total_shards_per_node</code> using the
<a class="xref" href="indices-update-settings.html" title="Update index settings API">update index settings API</a>.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_settings
{
  "index" : {
    "routing.allocation.total_shards_per_node" : 5
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1510.console"></div>
<div class="position-relative"><h3><a id="fix-an-oversharded-cluster"></a>Fix an oversharded cluster</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>If your cluster is experiencing stability issues due to oversharded indices,
you can use one or more of the following methods to fix them.</p>
<div class="position-relative"><h4><a id="reindex-indices-from-shorter-periods-into-longer-periods"></a>Create time-based indices that cover longer periods</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>For time series data, you can create indices that cover longer time intervals.
For example, instead of daily indices, you can create indices on a monthly or
yearly basis.</p>
<p>If you&#8217;re using ILM, you can do this by increasing the <code class="literal">max_age</code>
threshold for the <a class="xref" href="ilm-rollover.html" title="Rollover">rollover action</a>.</p>
<p>If your retention policy allows it, you can also create larger indices by
omitting a <code class="literal">max_age</code> threshold and using <code class="literal">max_docs</code> and/or <code class="literal">max_size</code>
thresholds instead.</p>
<div class="position-relative"><h4><a id="delete-empty-indices"></a>Delete empty or unneeded indices</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>If you&#8217;re using ILM and roll over indices based on a <code class="literal">max_age</code> threshold,
you can inadvertently create indices with no documents. These empty indices
provide no benefit but still consume resources.</p>
<p>You can find these empty indices using the <a class="xref" href="cat-count.html" title="cat count API">cat count API</a>.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET /_cat/count/my-index-000001?v</pre>
</div>
<div class="console_widget" data-snippet="snippets/1511.console"></div>
<p>Once you have a list of empty indices, you can delete them using the
<a class="xref" href="indices-delete-index.html" title="Delete index API">delete index API</a>. You can also delete any other
unneeded indices.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">DELETE /my-index-*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1512.console"></div>
<div class="position-relative"><h4><a id="force-merge-during-off-peak-hours"></a>Force merge during off-peak hours</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>If you no longer write to an index, you can use the <a class="xref" href="indices-forcemerge.html" title="Force merge API">force
merge API</a> to <a class="xref" href="index-modules-merge.html" title="Merge">merge</a> smaller segments into larger ones.
This can reduce shard overhead and improve search speeds. However, force merges
are resource-intensive. If possible, run the force merge during off-peak hours.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_forcemerge</pre>
</div>
<div class="console_widget" data-snippet="snippets/1513.console"></div>
<div class="position-relative"><h4><a id="shrink-existing-index-to-fewer-shards"></a>Shrink an existing index to fewer shards</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>If you no longer write to an index, you can use the
<a class="xref" href="indices-shrink-index.html" title="Shrink index API">shrink index API</a> to reduce its shard count.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /my-index-000001/_shrink/my-shrunken-index-000001</pre>
</div>
<div class="console_widget" data-snippet="snippets/1514.console"></div>
<p>ILM also has a <a class="xref" href="ilm-actions.html#ilm-shrink-action">shrink action</a> for indices in the
warm phase.</p>
<div class="position-relative"><h4><a id="combine-smaller-indices"></a>Combine smaller indices</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/how-to/size-your-shards.asciidoc">edit</a></div>
<p>You can also use the <a class="xref" href="docs-reindex.html" title="Reindex API">reindex API</a> to combine indices
with similar mappings into a single large index. For time series data, you could
reindex indices for short time periods into a new index covering a
longer period. For example, you could reindex daily indices from October with a
shared index pattern, such as <code class="literal">my-index-2099.10.11</code>, into a monthly
<code class="literal">my-index-2099.10</code> index. After the reindex, delete the smaller indices.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /_reindex
{
  "source": {
    "index": "my-index-2099.10.*"
  },
  "dest": {
    "index": "my-index-2099.10"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1515.console"></div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="tune-for-disk-usage.html">« Tune for disk usage</a>
</span>
<span class="next">
<a href="glossary.html">Glossary of terms »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
