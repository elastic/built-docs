<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Data streams | Elasticsearch Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="up" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="prev" href="simulate-multi-component-templates.html" title="Simulate multi-component templates"/>
<link rel="next" href="set-up-a-data-stream.html" title="Set up a data stream"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.x"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.x]</a></span>
»
<span class="breadcrumb-node">Data streams</span>
</div>
<div class="navheader">
<span class="prev">
<a href="simulate-multi-component-templates.html">« Simulate multi-component templates</a>
</span>
<span class="next">
<a href="set-up-a-data-stream.html">Set up a data stream »</a>
</span>
</div>
<div class="part xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="data-streams"></a>Data streams<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/data-streams/data-streams.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>
<div class="openblock partintro">
<div class="content">

<p>A <a href="/guide/en/elasticsearch/reference/7.x/data-streams.html" class="ulink" target="_top">data stream</a> lets you store  append-only time series
data across multiple indices while giving you a single named resource for
requests. Data streams are well-suited for logs, events, metrics, and other
continuously generated data.</p>
<p>You can submit indexing and search requests directly to a data stream. The
stream automatically routes the request to backing indices that store the
stream&#8217;s data. You can use <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management (ILM)</a> to
automate the management of these backing indices. For example, you can use
ILM to automatically move older backing indices to less expensive
hardware and delete unneeded indices. ILM can help you reduce costs and
overhead as your data grows.</p>
<h2><a id="backing-indices"></a>Backing indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>A data stream consists of one or more <a class="xref" href="index-modules.html#index-hidden">hidden</a>, auto-generated
backing indices.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/data-streams/data-streams-diagram.svg" alt="data streams diagram">
</div>
</div>
<p>To configure its backing indices, each data stream requires a matching
<a class="xref" href="indices-templates.html" title="Index templates">index template</a>. This template contains:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An index pattern matching the stream&#8217;s name.
</li>
<li class="listitem">
Mappings and settings for the stream&#8217;s backing indices.
</li>
</ul>
</div>
<p>Every document indexed to a data stream must contain a <code class="literal">@timestamp</code> field,
mapped as a <a class="xref" href="date.html" title="Date field type"><code class="literal">date</code></a> or <a class="xref" href="date_nanos.html" title="Date nanoseconds field type"><code class="literal">date_nanos</code></a> field type. If the
index template doesn&#8217;t specify a mapping for the <code class="literal">@timestamp</code> field, Elasticsearch maps
<code class="literal">@timestamp</code> as a <code class="literal">date</code> field  with default options.</p>
<p>The same index template can be used for multiple data streams. You cannot
delete an index template in use by a data stream.</p>
<h2><a id="data-stream-read-requests"></a>Read requests<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>When you submit a read request to a data stream, the stream routes the request
to all its backing indices.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/data-streams/data-streams-search-request.svg" alt="data streams search request">
</div>
</div>
<h2><a id="data-stream-write-index"></a>Write index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>The most recently created backing index is the data stream’s write index.
The stream adds new documents to this index only.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/data-streams/data-streams-index-request.svg" alt="data streams index request">
</div>
</div>
<p>You cannot add new documents to other backing indices, even by sending requests
directly to the index.</p>
<p>You also cannot perform operations on a write index that may hinder indexing,
such as:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices-clone-index.html" title="Clone index API">Clone</a>
</li>
<li class="listitem">
<a class="xref" href="indices-close.html" title="Close index API">Close</a>
</li>
<li class="listitem">
<a class="xref" href="indices-delete-index.html" title="Delete index API">Delete</a>
</li>
<li class="listitem">
<a class="xref" href="freeze-index-api.html" title="Freeze index API">Freeze</a>
</li>
<li class="listitem">
<a class="xref" href="indices-shrink-index.html" title="Shrink index API">Shrink</a>
</li>
<li class="listitem">
<a class="xref" href="indices-split-index.html" title="Split index API">Split</a>
</li>
</ul>
</div>
<h2><a id="data-streams-rollover"></a>Rollover<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>When you create a data stream, Elasticsearch automatically creates a backing index for
the stream. This index also acts as the stream&#8217;s first write index. A
<a class="xref" href="indices-rollover-index.html" title="Rollover index API">rollover</a> creates a new backing index that becomes the
stream&#8217;s new write index.</p>
<p>We recommend using <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">ILM</a> to automatically
roll over data streams when the write index reaches a specified age or size.
If needed, you can also <a class="xref" href="use-a-data-stream.html#manually-roll-over-a-data-stream" title="Manually roll over a data stream">manually roll over</a>
a data stream.</p>
<h2><a id="data-streams-generation"></a>Generation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>Each data stream tracks its generation: a six-digit, zero-padded integer that
acts as a cumulative count of the stream&#8217;s rollovers, starting at <code class="literal">000001</code>.</p>
<p>When a backing index is created, the index is named using the following
convention:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">.ds-&lt;data-stream&gt;-&lt;generation&gt;</pre>
</div>
<p>Backing indices with a higher generation contain more recent data. For example,
the <code class="literal">web-server-logs</code> data stream has a generation of <code class="literal">34</code>. The stream&#8217;s most
recent backing index is named <code class="literal">.ds-web-server-logs-000034</code>.</p>
<p>Some operations, such as a <a class="xref" href="indices-shrink-index.html" title="Shrink index API">shrink</a> or
<a class="xref" href="snapshots-restore-snapshot.html" title="Restore a snapshot">restore</a>, can change a backing index&#8217;s name.
These name changes do not remove a backing index from its data stream.</p>
<h2><a id="data-streams-append-only"></a>Append-only<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>Data streams are designed for use cases where existing data is rarely,
if ever, updated. You cannot send update or deletion requests for existing
documents directly to a data stream. Instead, use the
<a class="xref" href="use-a-data-stream.html#update-docs-in-a-data-stream-by-query" title="Update documents in a data stream by query">update by query</a> and
<a class="xref" href="use-a-data-stream.html#delete-docs-in-a-data-stream-by-query" title="Delete documents in a data stream by query">delete by query</a> APIs.</p>
<p>If needed, you can <a class="xref" href="use-a-data-stream.html#update-delete-docs-in-a-backing-index" title="Update or delete documents in a backing index">update or delete
documents</a> by submitting requests directly to the document&#8217;s backing index.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you frequently update or delete existing documents, use an
<a class="xref" href="indices-add-alias.html" title="Add index alias API">index alias</a> and <a class="xref" href="indices-templates.html" title="Index templates">index template</a>
instead of a data stream. You can still use
<a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">ILM</a> to manage indices for the alias.</p>
</div>
</div>
</div>
</div>



</div>
<div class="navfooter">
<span class="prev">
<a href="simulate-multi-component-templates.html">« Simulate multi-component templates</a>
</span>
<span class="next">
<a href="set-up-a-data-stream.html">Set up a data stream »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
