<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Migrating to 8.15 | Elasticsearch Guide [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Migrating to 8.15 | Elasticsearch Guide [8.15]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.15]"/>
<link rel="up" href="breaking-changes.html" title="Migration guide"/>
<link rel="prev" href="breaking-changes.html" title="Migration guide"/>
<link rel="next" href="migrating-8.14.html" title="Migrating to 8.14"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.15"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.15"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="breaking-changes.html">« Migration guide</a>
</span>
<span class="next">
<a href="migrating-8.14.html">Migrating to 8.14 »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="breaking-changes.html">Migration guide</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Migrating to 8.15</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="migrating-8.15"></a>Migrating to 8.15<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h2>
</div></div></div>

<p>This section discusses the changes that you need to be aware of when migrating
your application to Elasticsearch 8.15.</p>
<p>See also <a class="xref" href="release-highlights.html" title="What&#8217;s new in 8.15"><em>What&#8217;s new in 8.15</em></a> and <a class="xref" href="es-release-notes.html" title="Release notes">Release notes</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Coming in 8.15.0.</p>
</div>
</div>
<h3><a id="breaking-changes-8.15"></a>Breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h3>
<p>The following changes in Elasticsearch 8.15 might affect your applications
and prevent them from operating normally.
Before upgrading to 8.15, review these changes and take the described steps
to mitigate the impact.</p>
<h4><a id="breaking_815_cluster_and_node_setting_changes"></a>Cluster and node setting changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h4>
<details id="change_skip_unavailable_remote_cluster_setting_default_value_to_true">
<summary class="title">Change <code class="literal">skip_unavailable</code> remote cluster setting default value to true</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The default value of the <code class="literal">skip_unavailable</code> setting is now set to true. All existing and future remote clusters that do not define this setting will use the new default. This setting only affects cross-cluster searches using the _search or _async_search API.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Unavailable remote clusters in a cross-cluster search will no longer cause the search to fail unless skip_unavailable is configured to be <code class="literal">false</code> in elasticsearch.yml or via the <code class="literal">_cluster/settings</code> API. Unavailable clusters with <code class="literal">skip_unavailable</code>=<code class="literal">true</code> (either explicitly or by using the new default) are marked as SKIPPED in the search response metadata section and do not fail the entire search. If users want to ensure that a search returns a failure when a particular remote cluster is not available, <code class="literal">skip_unavailable</code> must be now be set explicitly.</p>
</div>
</details>
<h4><a id="breaking_815_rollup_changes"></a>Rollup changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h4>
<details id="disallow_new_rollup_jobs_in_clusters_with_no_rollup_usage">
<summary class="title">Disallow new rollup jobs in clusters with no rollup usage</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The put rollup API will fail with an error when a rollup job is created in a cluster with no rollup usage</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Clusters with no rollup usage (either no rollup job or index) can not create new rollup jobs</p>
</div>
</details>
<h4><a id="breaking_815_rest_api_changes"></a>REST API changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h4>
<details id="interpret_timeout_1_as_infinite_ack_timeout">
<summary class="title">Interpret <code class="literal">?timeout=-1</code> as infinite ack timeout</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Today Elasticsearch accepts the parameter <code class="literal">?timeout=-1</code> in many APIs, but interprets
this to mean the same as <code class="literal">?timeout=0</code>. From 8.15 onwards <code class="literal">?timeout=-1</code> will
mean to wait indefinitely, aligning the behaviour of this parameter with
other similar parameters such as <code class="literal">?master_timeout</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use <code class="literal">?timeout=0</code> to force relevant operations to time out immediately
instead of <code class="literal">?timeout=-1</code></p>
</div>
</details>
<h3><a id="deprecated-8.15"></a>Deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h3>
<p>The following functionality has been deprecated in Elasticsearch 8.15
and will be removed in a future version.
While this won&#8217;t have an immediate impact on your applications,
we strongly encourage you to take the described steps to update your code
after upgrading to 8.15.</p>
<p>To find out if you are using any deprecated functionality,
enable <a class="xref" href="logging.html#deprecation-logging" title="Deprecation logging">deprecation logging</a>.</p>
<h4><a id="deprecations_815_cluster_and_node_setting"></a>Cluster and node setting deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h4>
<details id="deprecate_absolute_size_values_for_indices_breaker_total_limit_setting">
<summary class="title">Deprecate absolute size values for <code class="literal">indices.breaker.total.limit</code> setting</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, the value of <code class="literal">indices.breaker.total.limit</code> could be specified as an absolute size in bytes. This setting controls the overal amount of memory the server is allowed to use before taking remedial actions. Setting this to a specific number of bytes led to strange behaviour when the node maximum heap size changed because the circut breaker limit would remain unchanged. This would either leave the value too low, causing part of the heap to remain unused; or it would leave the value too high, causing the circuit breaker to be ineffective at preventing OOM errors.  The only reasonable behaviour for this setting is that it scales with the size of the heap, and so absolute byte limits are now deprecated.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Users must change their configuration to specify a percentage instead of an absolute number of bytes for <code class="literal">indices.breaker.total.limit</code>, or else accept the default, which is already specified as a percentage.</p>
</div>
</details>
<h4><a id="deprecations_815_rest_api"></a>REST API deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/migration/migrate_8_15.asciidoc">edit</a></h4>
<details id="deprecate_text_expansion_weighted_tokens_queries">
<summary class="title">Deprecate <code class="literal">text_expansion</code> and <code class="literal">weighted_tokens</code> queries</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">text_expansion</code> and <code class="literal">weighted_tokens</code> queries have been replaced by <code class="literal">sparse_vector</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Please update your existing <code class="literal">text_expansion</code> and <code class="literal">weighted_tokens</code> queries to use <code class="literal">sparse_vector.</code></p>
</div>
</details>
<details id="deprecate_using_slm_privileges_to_access_ilm">
<summary class="title">Deprecate using slm privileges to access ilm</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">read_slm</code> privilege can get the ILM status, and the <code class="literal">manage_slm</code> privilege can start and stop ILM. Access to these APIs should be granted using the <code class="literal">read_ilm</code> and <code class="literal">manage_ilm</code> privileges instead. Access to ILM APIs will be removed from SLM privileges in a future major release, and is now deprecated.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Users that need access to the ILM status API should now use the <code class="literal">read_ilm</code> privilege. Users that need to start and stop ILM, should use the <code class="literal">manage_ilm</code> privilege.</p>
</div>
</details>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="breaking-changes.html">« Migration guide</a>
</span>
<span class="next">
<a href="migrating-8.14.html">Migrating to 8.14 »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"python":{"hasAny":true},"ruby":{"hasAny":true},"go":{"hasAny":true},"js":{"hasAny":true}}}}</script>
  </body>
</html>
