<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Tutorial: Search and filter with ES|QL | Elasticsearch Guide [8.x] | Elastic</title>
<meta class="elastic" name="content" content="Tutorial: Search and filter with ES|QL | Elasticsearch Guide [8.x]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.x]"/>
<link rel="up" href="quickstart.html" title="Quick starts"/>
<link rel="prev" href="full-text-filter-tutorial.html" title="Basic full-text search and filtering in Elasticsearch"/>
<link rel="next" href="aggregations-tutorial.html" title="Analyze eCommerce data with aggregations using Query DSL"/>
<meta class="elastic" name="product_version" content="8.x"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.x"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="full-text-filter-tutorial.html">« Basic full-text search and filtering in Elasticsearch</a>
</span>
<span class="next">
<a href="aggregations-tutorial.html">Analyze eCommerce data with aggregations using Query DSL »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.x]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="quickstart.html">Quick starts</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Tutorial: Search and filter with ES|QL</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="esql-search-tutorial"></a>Tutorial: Search and filter with ES|QL</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
</div></div></div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>This tutorial presents examples in ES|QL syntax. Refer to <a class="xref" href="full-text-filter-tutorial.html" title="Basic full-text search and filtering in Elasticsearch">the Query DSL version</a> for the equivalent examples in Query DSL syntax.</p>
</div>
</div>
<p>This is a hands-on introduction to the basics of full-text search and semantic search, using <a class="xref" href="esql.html" title="ES|QL">ES|QL</a>.</p>
<p>For an overview of all the search capabilities in ES|QL, refer to <a class="xref" href="esql-for-search.html" title="Using ES|QL for search">Using ES|QL for search</a>.</p>
<p>In this scenario, we&#8217;re implementing search for a cooking blog. The blog contains recipes with various attributes including textual content, categorical data, and numerical ratings.</p>
<div class="position-relative"><h3><a id="esql-search-tutorial-requirements"></a>Requirements</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>You&#8217;ll need a running Elasticsearch cluster, together with Kibana to use the Dev Tools API Console. Refer to <a class="xref" href="elasticsearch-intro-deploy.html" title="Run Elasticsearch">choose your deployment type</a> for deployment options.</p>
<p>Want to get started quickly? Run the following command in your terminal to set up a <a class="xref" href="run-elasticsearch-locally.html" title="Run Elasticsearch locally">single-node local cluster in Docker</a>:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -fsSL https://elastic.co/start-local | sh</pre>
</div>
<div class="position-relative"><h3><a id="esql-search-tutorial-running-esql-queries"></a>Running ES|QL queries</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>In this tutorial, you&#8217;ll see ES|QL examples in the following format:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE description:"fluffy pancakes"
| LIMIT 1000</pre>
</div>
<p>If you want to run these queries in the <a class="xref" href="esql-rest.html#esql-kibana-console" title="Kibana Console">Dev Tools Console</a>, you&#8217;ll need to use the following syntax:</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">POST /_query?format=txt
{
  "query": """
    FROM cooking_blog
    | WHERE description:"fluffy pancakes"
    | LIMIT 1000
  """
}</pre>
</div>
<p>If you&#8217;d prefer to use your favorite programming language, refer to <a class="xref" href="http-clients.html" title="HTTP/REST clients and security">Client libraries</a> for a list of official and community-supported clients.</p>
<div class="position-relative"><h3><a id="esql-search-tutorial-step-1-create-an-index"></a>Step 1: Create an index</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Create the <code class="literal">cooking_blog</code> index to get started:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="cooking_blog",
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "cooking_blog",
});
console.log(response);</pre>
</div>
<a id="f8f960550104c33e00dc78bc8723ccef"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">PUT /cooking_blog</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/22.console"></div>
<p>Now define the mappings for the index:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.put_mapping(
    index="cooking_blog",
    properties={
        "title": {
            "type": "text",
            "analyzer": "standard",
            "fields": {
                "keyword": {
                    "type": "keyword",
                    "ignore_above": 256
                }
            }
        },
        "description": {
            "type": "text",
            "fields": {
                "keyword": {
                    "type": "keyword"
                }
            }
        },
        "author": {
            "type": "text",
            "fields": {
                "keyword": {
                    "type": "keyword"
                }
            }
        },
        "date": {
            "type": "date",
            "format": "yyyy-MM-dd"
        },
        "category": {
            "type": "text",
            "fields": {
                "keyword": {
                    "type": "keyword"
                }
            }
        },
        "tags": {
            "type": "text",
            "fields": {
                "keyword": {
                    "type": "keyword"
                }
            }
        },
        "rating": {
            "type": "float"
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.putMapping({
  index: "cooking_blog",
  properties: {
    title: {
      type: "text",
      analyzer: "standard",
      fields: {
        keyword: {
          type: "keyword",
          ignore_above: 256,
        },
      },
    },
    description: {
      type: "text",
      fields: {
        keyword: {
          type: "keyword",
        },
      },
    },
    author: {
      type: "text",
      fields: {
        keyword: {
          type: "keyword",
        },
      },
    },
    date: {
      type: "date",
      format: "yyyy-MM-dd",
    },
    category: {
      type: "text",
      fields: {
        keyword: {
          type: "keyword",
        },
      },
    },
    tags: {
      type: "text",
      fields: {
        keyword: {
          type: "keyword",
        },
      },
    },
    rating: {
      type: "float",
    },
  },
});
console.log(response);</pre>
</div>
<a id="8d05862be1f9e7edaba162b1888b5677"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">PUT /cooking_blog/_mapping
{
  "properties": {
    "title": {
      "type": "text",
      "analyzer": "standard", <a id="CO16-1"></a><i class="conum" data-value="1"></i>
      "fields": { <a id="CO16-2"></a><i class="conum" data-value="2"></i>
        "keyword": {
          "type": "keyword",
          "ignore_above": 256 <a id="CO16-3"></a><i class="conum" data-value="3"></i>
        }
      }
    },
    "description": {
      "type": "text",
      "fields": {
        "keyword": {
          "type": "keyword"
        }
      }
    },
    "author": {
      "type": "text",
      "fields": {
        "keyword": {
          "type": "keyword"
        }
      }
    },
    "date": {
      "type": "date",
      "format": "yyyy-MM-dd"
    },
    "category": {
      "type": "text",
      "fields": {
        "keyword": {
          "type": "keyword"
        }
      }
    },
    "tags": {
      "type": "text",
      "fields": {
        "keyword": {
          "type": "keyword"
        }
      }
    },
    "rating": {
      "type": "float"
    }
  }
}</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/23.console"></div>
<div class="calloutlist default has-python has-js lang-console">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO16-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">standard</code> analyzer is used by default for <code class="literal">text</code> fields if an <code class="literal">analyzer</code> isn&#8217;t specified. It&#8217;s included here for demonstration purposes.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO16-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><a class="xref" href="multi-fields.html" title="fields">Multi-fields</a> are used here to index <code class="literal">text</code> fields as both <code class="literal">text</code> and <code class="literal">keyword</code> <a class="xref" href="mapping-types.html" title="Field data types">data types</a>. This enables both full-text search and exact matching/filtering on the same field. Note that if you used <a class="xref" href="dynamic-field-mapping.html" title="Dynamic field mapping">dynamic mapping</a>, these multi-fields would be created automatically.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO16-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <a class="xref" href="ignore-above.html" title="ignore_above"><code class="literal">ignore_above</code> parameter</a> prevents indexing values longer than 256 characters in the <code class="literal">keyword</code> field. Again this is the default value, but it&#8217;s included here for demonstration purposes. It helps to save disk space and avoid potential issues with Lucene&#8217;s term byte-length limit.</p>
</td>
</tr>
</table>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Full-text search is powered by <a class="xref" href="analysis.html" title="Text analysis">text analysis</a>. Text analysis normalizes and standardizes text data so it can be efficiently stored in an inverted index and searched in near real-time. Analysis happens at both <a class="xref" href="analysis-index-search-time.html" title="Index and search analysis">index and search time</a>. This tutorial won&#8217;t cover analysis in detail, but it&#8217;s important to understand how text is processed to create effective search queries.</p>
</div>
</div>
<div class="position-relative"><h3><a id="esql-search-tutorial-index-data"></a>Step 2: Add sample blog posts to your index</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Now you&#8217;ll need to index some example blog posts using the <a href="/docs/api/doc/elasticsearch/v8/operation/operation-indices-get-mapping" class="ulink" target="_top">Bulk API</a>. Note that <code class="literal">text</code> fields are analyzed and multi-fields are generated at index time.</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.bulk(
    index="cooking_blog",
    refresh="wait_for",
    operations=[
        {
            "index": {
                "_id": "1"
            }
        },
        {
            "title": "Perfect Pancakes: A Fluffy Breakfast Delight",
            "description": "Learn the secrets to making the fluffiest pancakes, so amazing you won't believe your tastebuds. This recipe uses buttermilk and a special folding technique to create light, airy pancakes that are perfect for lazy Sunday mornings.",
            "author": "Maria Rodriguez",
            "date": "2023-05-01",
            "category": "Breakfast",
            "tags": [
                "pancakes",
                "breakfast",
                "easy recipes"
            ],
            "rating": 4.8
        },
        {
            "index": {
                "_id": "2"
            }
        },
        {
            "title": "Spicy Thai Green Curry: A Vegetarian Adventure",
            "description": "Dive into the flavors of Thailand with this vibrant green curry. Packed with vegetables and aromatic herbs, this dish is both healthy and satisfying. Don't worry about the heat - you can easily adjust the spice level to your liking.",
            "author": "Liam Chen",
            "date": "2023-05-05",
            "category": "Main Course",
            "tags": [
                "thai",
                "vegetarian",
                "curry",
                "spicy"
            ],
            "rating": 4.6
        },
        {
            "index": {
                "_id": "3"
            }
        },
        {
            "title": "Classic Beef Stroganoff: A Creamy Comfort Food",
            "description": "Indulge in this rich and creamy beef stroganoff. Tender strips of beef in a savory mushroom sauce, served over a bed of egg noodles. It's the ultimate comfort food for chilly evenings.",
            "author": "Emma Watson",
            "date": "2023-05-10",
            "category": "Main Course",
            "tags": [
                "beef",
                "pasta",
                "comfort food"
            ],
            "rating": 4.7
        },
        {
            "index": {
                "_id": "4"
            }
        },
        {
            "title": "Vegan Chocolate Avocado Mousse",
            "description": "Discover the magic of avocado in this rich, vegan chocolate mousse. Creamy, indulgent, and secretly healthy, it's the perfect guilt-free dessert for chocolate lovers.",
            "author": "Alex Green",
            "date": "2023-05-15",
            "category": "Dessert",
            "tags": [
                "vegan",
                "chocolate",
                "avocado",
                "healthy dessert"
            ],
            "rating": 4.5
        },
        {
            "index": {
                "_id": "5"
            }
        },
        {
            "title": "Crispy Oven-Fried Chicken",
            "description": "Get that perfect crunch without the deep fryer! This oven-fried chicken recipe delivers crispy, juicy results every time. A healthier take on the classic comfort food.",
            "author": "Maria Rodriguez",
            "date": "2023-05-20",
            "category": "Main Course",
            "tags": [
                "chicken",
                "oven-fried",
                "healthy"
            ],
            "rating": 4.9
        }
    ],
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.bulk({
  index: "cooking_blog",
  refresh: "wait_for",
  operations: [
    {
      index: {
        _id: "1",
      },
    },
    {
      title: "Perfect Pancakes: A Fluffy Breakfast Delight",
      description:
        "Learn the secrets to making the fluffiest pancakes, so amazing you won't believe your tastebuds. This recipe uses buttermilk and a special folding technique to create light, airy pancakes that are perfect for lazy Sunday mornings.",
      author: "Maria Rodriguez",
      date: "2023-05-01",
      category: "Breakfast",
      tags: ["pancakes", "breakfast", "easy recipes"],
      rating: 4.8,
    },
    {
      index: {
        _id: "2",
      },
    },
    {
      title: "Spicy Thai Green Curry: A Vegetarian Adventure",
      description:
        "Dive into the flavors of Thailand with this vibrant green curry. Packed with vegetables and aromatic herbs, this dish is both healthy and satisfying. Don't worry about the heat - you can easily adjust the spice level to your liking.",
      author: "Liam Chen",
      date: "2023-05-05",
      category: "Main Course",
      tags: ["thai", "vegetarian", "curry", "spicy"],
      rating: 4.6,
    },
    {
      index: {
        _id: "3",
      },
    },
    {
      title: "Classic Beef Stroganoff: A Creamy Comfort Food",
      description:
        "Indulge in this rich and creamy beef stroganoff. Tender strips of beef in a savory mushroom sauce, served over a bed of egg noodles. It's the ultimate comfort food for chilly evenings.",
      author: "Emma Watson",
      date: "2023-05-10",
      category: "Main Course",
      tags: ["beef", "pasta", "comfort food"],
      rating: 4.7,
    },
    {
      index: {
        _id: "4",
      },
    },
    {
      title: "Vegan Chocolate Avocado Mousse",
      description:
        "Discover the magic of avocado in this rich, vegan chocolate mousse. Creamy, indulgent, and secretly healthy, it's the perfect guilt-free dessert for chocolate lovers.",
      author: "Alex Green",
      date: "2023-05-15",
      category: "Dessert",
      tags: ["vegan", "chocolate", "avocado", "healthy dessert"],
      rating: 4.5,
    },
    {
      index: {
        _id: "5",
      },
    },
    {
      title: "Crispy Oven-Fried Chicken",
      description:
        "Get that perfect crunch without the deep fryer! This oven-fried chicken recipe delivers crispy, juicy results every time. A healthier take on the classic comfort food.",
      author: "Maria Rodriguez",
      date: "2023-05-20",
      category: "Main Course",
      tags: ["chicken", "oven-fried", "healthy"],
      rating: 4.9,
    },
  ],
});
console.log(response);</pre>
</div>
<a id="bb5a67e3d2d9cd3016e487e627769fe8"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">POST /cooking_blog/_bulk?refresh=wait_for
{"index":{"_id":"1"}}
{"title":"Perfect Pancakes: A Fluffy Breakfast Delight","description":"Learn the secrets to making the fluffiest pancakes, so amazing you won't believe your tastebuds. This recipe uses buttermilk and a special folding technique to create light, airy pancakes that are perfect for lazy Sunday mornings.","author":"Maria Rodriguez","date":"2023-05-01","category":"Breakfast","tags":["pancakes","breakfast","easy recipes"],"rating":4.8}
{"index":{"_id":"2"}}
{"title":"Spicy Thai Green Curry: A Vegetarian Adventure","description":"Dive into the flavors of Thailand with this vibrant green curry. Packed with vegetables and aromatic herbs, this dish is both healthy and satisfying. Don't worry about the heat - you can easily adjust the spice level to your liking.","author":"Liam Chen","date":"2023-05-05","category":"Main Course","tags":["thai","vegetarian","curry","spicy"],"rating":4.6}
{"index":{"_id":"3"}}
{"title":"Classic Beef Stroganoff: A Creamy Comfort Food","description":"Indulge in this rich and creamy beef stroganoff. Tender strips of beef in a savory mushroom sauce, served over a bed of egg noodles. It's the ultimate comfort food for chilly evenings.","author":"Emma Watson","date":"2023-05-10","category":"Main Course","tags":["beef","pasta","comfort food"],"rating":4.7}
{"index":{"_id":"4"}}
{"title":"Vegan Chocolate Avocado Mousse","description":"Discover the magic of avocado in this rich, vegan chocolate mousse. Creamy, indulgent, and secretly healthy, it's the perfect guilt-free dessert for chocolate lovers.","author":"Alex Green","date":"2023-05-15","category":"Dessert","tags":["vegan","chocolate","avocado","healthy dessert"],"rating":4.5}
{"index":{"_id":"5"}}
{"title":"Crispy Oven-Fried Chicken","description":"Get that perfect crunch without the deep fryer! This oven-fried chicken recipe delivers crispy, juicy results every time. A healthier take on the classic comfort food.","author":"Maria Rodriguez","date":"2023-05-20","category":"Main Course","tags":["chicken","oven-fried","healthy"],"rating":4.9}</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/24.console"></div>
<div class="position-relative"><h3><a id="step-3-perform-basic-full-text-searches"></a>Step 3: Perform basic full-text searches</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Full-text search involves executing text-based queries across one or more document fields. These queries calculate a relevance score for each matching document, based on how closely the document&#8217;s content aligns with the search terms. Elasticsearch offers various query types, each with its own method for matching text and relevance scoring.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>ES|QL provides two ways to perform full-text searches:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Full <a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH">match function</a> syntax: <code class="literal">match(field, "search terms")</code>
</li>
<li class="listitem">
Compact syntax using the <a class="xref" href="esql-functions-operators.html#esql-search-operators" title="Search operators">match operator <code class="literal">:</code></a>: <code class="literal">field:"search terms"</code>
</li>
</ol>
</div>
<p>Both are equivalent and can be used interchangeably. The compact syntax is more concise, while the function syntax allows for more configuration options. We&#8217;ll use the compact syntax in most examples for brevity.</p>
<p>Refer to the <a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH">match function</a> reference docs for advanced parameters available with the function syntax.</p>
</div>
</div>
<div class="position-relative"><h4><a id="esql-search-tutorial-basic-full-text-query"></a>Basic full-text query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Here&#8217;s how to search the <code class="literal">description</code> field for "fluffy pancakes":</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog <a id="CO17-1"></a><i class="conum" data-value="1"></i>
| WHERE description:"fluffy pancakes" <a id="CO17-2"></a><i class="conum" data-value="2"></i>
| LIMIT 1000 <a id="CO17-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify the index to search</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Full-text search with OR logic by default</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Return up to 1000 results</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The results ordering isn&#8217;t by relevance, as we haven&#8217;t requested the <code class="literal">_score</code> metadata field. We&#8217;ll cover relevance scoring in the next section.</p>
</div>
</div>
<p>By default, like the Query DSL <code class="literal">match</code> query, ES|QL uses <code class="literal">OR</code> logic between terms. This means it will match documents that contain either "fluffy" or "pancakes", or both, in the description field.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can control which fields to include in the response using the <code class="literal">KEEP</code> command:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE description:"fluffy pancakes"
| KEEP title, description, rating <a id="CO18-1"></a><i class="conum" data-value="1"></i>
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO18-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Select only specific fields to include in response</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="position-relative"><h4><a id="esql-search-tutorial-require-all-terms"></a>Require all terms in a match query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Sometimes you need to require that all search terms appear in the matching documents. Here&#8217;s how to do that using the function syntax with the <code class="literal">operator</code> parameter:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE match(description, "fluffy pancakes", {"operator": "AND"}) <a id="CO19-1"></a><i class="conum" data-value="1"></i>
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO19-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Require ALL terms to match</p>
</td>
</tr>
</table>
</div>
<p>This stricter search returns <span class="strong strong"><strong>zero hits</strong></span> on our sample data, as no document contains both "fluffy" and "pancakes" in the description.</p>
<div class="position-relative"><h4><a id="esql-search-tutorial-minimum-terms"></a>Specify a minimum number of terms to match</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Sometimes requiring all terms is too strict, but the default OR behavior is too lenient. You can specify a minimum number of terms that must match:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE match(title, "fluffy pancakes breakfast", {"minimum_should_match": 2})
| LIMIT 1000</pre>
</div>
<p>This query searches the title field to match at least 2 of the 3 terms: "fluffy", "pancakes", or "breakfast".</p>
<div class="position-relative"><h3><a id="esql-search-tutorial-semantic-search"></a>Step 4: Semantic search and hybrid search</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="esql-search-tutorial-index-semantic-content"></a>Index semantic content</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Elasticsearch allows you to semantically search for documents based on the meaning of the text, rather than just the presence of specific keywords. This is useful when you want to find documents that are conceptually similar to a given query, even if they don&#8217;t contain the exact search terms.</p>
<p>ES|QL supports semantic search when your mappings include fields of the <a class="xref" href="semantic-text.html" title="Semantic text field type"><code class="literal">semantic_text</code></a> type. This example mapping update adds a new field called <code class="literal">semantic_description</code> with the type <code class="literal">semantic_text</code>:</p>
<a id="80d2ccb7e2056d66bcf95096ae61af4b"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT /cooking_blog/_mapping
{
  "properties": {
    "semantic_description": {
      "type": "semantic_text"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/25.console"></div>
<p>Next, index a document with content into the new field:</p>
<a id="f6d6d1f5c84cf4f6ccd71a84d193e483"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /cooking_blog/_doc
{
  "title": "Mediterranean Quinoa Bowl",
  "semantic_description": "A protein-rich bowl with quinoa, chickpeas, fresh vegetables, and herbs. This nutritious Mediterranean-inspired dish is easy to prepare and perfect for a quick, healthy dinner.",
  "author": "Jamie Oliver",
  "date": "2023-06-01",
  "category": "Main Course",
  "tags": ["vegetarian", "healthy", "mediterranean", "quinoa"],
  "rating": 4.7
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/26.console"></div>
<div class="position-relative"><h4><a id="esql-search-tutorial-perform-semantic-search"></a>Perform semantic search</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Once the document has been processed by the underlying model running on the inference endpoint, you can perform semantic searches. Here&#8217;s an example natural language query against the <code class="literal">semantic_description</code> field:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE semantic_description:"What are some easy to prepare but nutritious plant-based meals?"
| LIMIT 5</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Follow this <a class="xref" href="semantic-search-semantic-text.html" title="Tutorial: semantic search with semantic_text">tutorial</a> if you&#8217;d like to test out the semantic search workflow against a large dataset.</p>
</div>
</div>
<div class="position-relative"><h4><a id="esql-search-tutorial-perform-hybrid-search"></a>Perform hybrid search</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>You can combine full-text and semantic queries. In this example we combine full-text and semantic search with custom weights:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog METADATA _score
| WHERE match(semantic_description, "easy to prepare vegetarian meals", { "boost": 0.75 })
    OR match(tags, "vegetarian", { "boost": 0.25 })
| SORT _score DESC
| LIMIT 5</pre>
</div>
<div class="position-relative"><h3><a id="esql-search-tutorial-search-across-fields"></a>Step 5: Search across multiple fields at once</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>When users enter a search query, they often don&#8217;t know (or care) whether their search terms appear in a specific field. ES|QL provides ways to search across multiple fields simultaneously:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE title:"vegetarian curry" OR description:"vegetarian curry" OR tags:"vegetarian curry"
| LIMIT 1000</pre>
</div>
<p>This query searches for "vegetarian curry" across the title, description, and tags fields. Each field is treated with equal importance.</p>
<p>However, in many cases, matches in certain fields (like the title) might be more relevant than others. We can adjust the importance of each field using scoring:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog METADATA _score <a id="CO20-1"></a><i class="conum" data-value="1"></i>
| WHERE match(title, "vegetarian curry", {"boost": 2.0}) <a id="CO20-2"></a><i class="conum" data-value="2"></i>
    OR match(description, "vegetarian curry")
    OR match(tags, "vegetarian curry")
| KEEP title, description, tags, _score <a id="CO20-3"></a><i class="conum" data-value="3"></i>
| SORT _score DESC <a id="CO20-4"></a><i class="conum" data-value="4"></i>
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Request _score metadata for relevance-based results</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Title matches are twice as important</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Include relevance score in results</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>You must explicitly sort by <code class="literal">_score</code> to see relevance-based results</p>
</td>
</tr>
</table>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>When working with relevance scoring in ES|QL, it&#8217;s important to understand <code class="literal">_score</code>. If you don&#8217;t include <code class="literal">METADATA _score</code> in your query, you won&#8217;t see relevance scores in your results. This means you won&#8217;t be able to sort by relevance or filter based on relevance scores.</p>
<p>When you include <code class="literal">METADATA _score</code>, search functions included in WHERE conditions contribute to the relevance score. Filtering operations (like range conditions and exact matches) don&#8217;t affect the score.</p>
<p>If you want the most relevant results first, you must sort by <code class="literal">_score</code>, by explicitly using <code class="literal">SORT _score DESC</code> or <code class="literal">SORT _score ASC</code>.</p>
</div>
</div>
<div class="position-relative"><h3><a id="esql-search-tutorial-filter-exact-matches"></a>Step 6: Filter and find exact matches</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Filtering allows you to narrow down your search results based on exact criteria. Unlike full-text searches, filters are binary (yes/no) and do not affect the relevance score. Filters execute faster than queries because excluded results don&#8217;t need to be scored.</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE category.keyword == "Breakfast" <a id="CO21-1"></a><i class="conum" data-value="1"></i>
| KEEP title, author, rating, tags
| SORT rating DESC
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO21-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Exact match using keyword field (case-sensitive)</p>
</td>
</tr>
</table>
</div>
<p>Note the use of <code class="literal">category.keyword</code> here. This refers to the <a class="xref" href="keyword.html" title="Keyword type family"><code class="literal">keyword</code></a> multi-field of the <code class="literal">category</code> field, ensuring an exact, case-sensitive match.</p>
<div class="position-relative"><h4><a id="esql-search-tutorial-date-range"></a>Search for posts within a date range</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Often users want to find content published within a specific time frame:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE date &gt;= "2023-05-01" AND date &lt;= "2023-05-31" <a id="CO22-1"></a><i class="conum" data-value="1"></i>
| KEEP title, author, date, rating
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Inclusive date range filter</p>
</td>
</tr>
</table>
</div>
<div class="position-relative"><h4><a id="esql-search-tutorial-exact-matches"></a>Find exact matches</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Sometimes users want to search for exact terms to eliminate ambiguity in their search results:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog
| WHERE author.keyword == "Maria Rodriguez" <a id="CO23-1"></a><i class="conum" data-value="1"></i>
| KEEP title, author, rating, tags
| SORT rating DESC
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Exact match on author</p>
</td>
</tr>
</table>
</div>
<p>Like the <code class="literal">term</code> query in Query DSL, this has zero flexibility and is case-sensitive.</p>
<div class="position-relative"><h3><a id="esql-search-tutorial-combine-criteria"></a>Step 7: Combine multiple search criteria</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>Complex searches often require combining multiple search criteria:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog METADATA _score
| WHERE rating &gt;= 4.5 <a id="CO24-1"></a><i class="conum" data-value="1"></i>
    AND NOT category.keyword == "Dessert" <a id="CO24-2"></a><i class="conum" data-value="2"></i>
    AND (title:"curry spicy" OR description:"curry spicy") <a id="CO24-3"></a><i class="conum" data-value="3"></i>
| SORT _score DESC
| KEEP title, author, rating, tags, description
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Numerical filter</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Exclusion filter</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Full-text search in multiple fields</p>
</td>
</tr>
</table>
</div>
<div class="position-relative"><h4><a id="esql-search-tutorial-relevance-scoring"></a>Combine relevance scoring with custom criteria</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>For more complex relevance scoring with combined criteria, you can use the <code class="literal">EVAL</code> command to calculate custom scores:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM cooking_blog METADATA _score
| WHERE NOT category.keyword == "Dessert"
| EVAL tags_concat = MV_CONCAT(tags.keyword, ",") <a id="CO25-1"></a><i class="conum" data-value="1"></i>
| WHERE tags_concat LIKE "*vegetarian*" AND rating &gt;= 4.5 <a id="CO25-2"></a><i class="conum" data-value="2"></i>
| WHERE match(title, "curry spicy", {"boost": 2.0}) OR match(description, "curry spicy") <a id="CO25-3"></a><i class="conum" data-value="3"></i>
| EVAL category_boost = CASE(category.keyword == "Main Course", 1.0, 0.0) <a id="CO25-4"></a><i class="conum" data-value="4"></i>
| EVAL date_boost = CASE(DATE_DIFF("month", date, NOW()) &lt;= 1, 0.5, 0.0) <a id="CO25-5"></a><i class="conum" data-value="5"></i>
| EVAL custom_score = _score + category_boost + date_boost <a id="CO25-6"></a><i class="conum" data-value="6"></i>
| WHERE custom_score &gt; 0 <a id="CO25-7"></a><i class="conum" data-value="7"></i>
| SORT custom_score DESC
| LIMIT 1000</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Convert multi-value field to string</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Wildcard pattern matching</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Uses full text functions, will update _score metadata field</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Conditional boost</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>Boost recent content</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>Combine scores</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-7"><i class="conum" data-value="7"></i></a></p>
</td>
<td align="left" valign="top">
<p>Filter based on custom score</p>
</td>
</tr>
</table>
</div>
<div class="position-relative"><h3><a id="esql-search-tutorial-learn-more"></a>Learn more</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="esql-search-tutorial-documentation"></a>Documentation</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<p>This tutorial introduced the basics of search and filtering in ES|QL. Building a real-world search experience requires understanding many more advanced concepts and techniques. Here are some resources once you&#8217;re ready to dive deeper:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-for-search.html" title="Using ES|QL for search">Search with ES|QL</a>: Learn about all your options for search use cases with ES|QL.
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-search-functions" title="ES|QL Full-text search functions">ES|QL search functions</a>: Explore the full list of search functions available in ES|QL.
</li>
<li class="listitem">
<a class="xref" href="semantic-search.html" title="Semantic search">Semantic search</a>: Understand your various options for semantic search in Elasticsearch.
</li>
<li class="listitem">
<a class="xref" href="semantic-search-semantic-text.html" title="Tutorial: semantic search with semantic_text">The <code class="literal">semantic_text</code> workflow</a>: Learn how to use the <code class="literal">semantic_text</code> field type for semantic search. This is the recommended approach for most users looking to perform semantic search in Elasticsearch, because it abstracts away the complexity of setting up inference endpoints and models.
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="esql-search-tutorial-blog-posts"></a>Related blog posts</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/quickstart/esql-search-tutorial.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/search-labs/blog/filtering-in-esql-full-text-search-match-qstr" class="ulink" target="_top">Introducing full text filtering in ES|QL</a>
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="full-text-filter-tutorial.html">« Basic full-text search and filtering in Elasticsearch</a>
</span>
<span class="next">
<a href="aggregations-tutorial.html">Analyze eCommerce data with aggregations using Query DSL »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"python":{"hasAny":true},"ruby":{"hasAny":true},"go":{"hasAny":true},"js":{"hasAny":true}}}}</script>
  </body>
</html>
