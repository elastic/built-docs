<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Semantic text field type | Elasticsearch Guide [8.x] | Elastic</title>
<meta class="elastic" name="content" content="Semantic text field type | Elasticsearch Guide [8.x]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.x]"/>
<link rel="up" href="mapping-types.html" title="Field data types"/>
<link rel="prev" href="search-as-you-type.html" title="Search-as-you-type field type"/>
<link rel="next" href="shape.html" title="Shape field type"/>
<meta class="elastic" name="product_version" content="8.x"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.x"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="search-as-you-type.html">« Search-as-you-type field type</a>
</span>
<span class="next">
<a href="shape.html">Shape field type »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.x]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="mapping-types.html">Field data types</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Semantic text field type</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="semantic-text"></a>Semantic text field type</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>The <code class="literal">semantic_text</code> field type automatically generates embeddings for text content using an inference endpoint.
Long passages are <a class="xref" href="semantic-text.html#auto-text-chunking" title="Text chunking">automatically chunked</a> to smaller sections to enable the processing of larger corpuses of text.</p>
<p>The <code class="literal">semantic_text</code> field type specifies an inference endpoint identifier that will be used to generate embeddings.
You can create the inference endpoint by using the <a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>.
This field type and the <a class="xref" href="query-dsl-semantic-query.html" title="Semantic query"><code class="literal">semantic</code> query</a> type make it simpler to perform semantic search on your data.
The <code class="literal">semantic_text</code> field type may also be queried with <a class="xref" href="query-dsl-match-query.html" title="Match query">match</a>, <a class="xref" href="query-dsl-sparse-vector-query.html" title="Sparse vector query">sparse_vector</a> or <a class="xref" href="query-dsl-knn-query.html" title="Knn query">knn</a> queries.</p>
<p>If you don’t specify an inference endpoint, the <code class="literal">inference_id</code> field defaults to <code class="literal">.elser-2-elasticsearch</code>, a preconfigured endpoint for the elasticsearch service.</p>
<p>Using <code class="literal">semantic_text</code>, you won&#8217;t need to specify how to generate embeddings for your data, or how to index it.
The inference endpoint automatically determines the embedding generation, indexing, and query to use.</p>
<p>If you use the preconfigured <code class="literal">.elser-2-elasticsearch</code> endpoint, you can set up <code class="literal">semantic_text</code> with the following API request:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="my-index-000001",
    mappings={
        "properties": {
            "inference_field": {
                "type": "semantic_text"
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "my-index-000001",
  mappings: {
    properties: {
      inference_field: {
        type: "semantic_text",
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="5f16358ebb5d14b86f57612d5f92d923"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "inference_field": {
        "type": "semantic_text"
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/324.console"></div>
<p>To use a custom inference endpoint instead of the default <code class="literal">.elser-2-elasticsearch</code>, you must <a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a> and specify its <code class="literal">inference_id</code> when setting up the <code class="literal">semantic_text</code> field type.</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="my-index-000002",
    mappings={
        "properties": {
            "inference_field": {
                "type": "semantic_text",
                "inference_id": "my-openai-endpoint"
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "my-index-000002",
  mappings: {
    properties: {
      inference_field: {
        type: "semantic_text",
        inference_id: "my-openai-endpoint",
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="96e88611f99e6834bd64b58dc8a282c1"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">PUT my-index-000002
{
  "mappings": {
    "properties": {
      "inference_field": {
        "type": "semantic_text",
        "inference_id": "my-openai-endpoint" <a id="CO117-1"></a><i class="conum" data-value="1"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/325.console"></div>
<div class="calloutlist default has-python has-js lang-console">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO117-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">inference_id</code> of the inference endpoint to use to generate embeddings.</p>
</td>
</tr>
</table>
</div>
<p>The recommended way to use <code class="literal">semantic_text</code> is by having dedicated inference endpoints for ingestion and search.
This ensures that search speed remains unaffected by ingestion workloads, and vice versa.
After creating dedicated inference endpoints for both, you can reference them using the <code class="literal">inference_id</code> and <code class="literal">search_inference_id</code> parameters when setting up the index mapping for an index that uses the <code class="literal">semantic_text</code> field.</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="my-index-000003",
    mappings={
        "properties": {
            "inference_field": {
                "type": "semantic_text",
                "inference_id": "my-elser-endpoint-for-ingest",
                "search_inference_id": "my-elser-endpoint-for-search"
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "my-index-000003",
  mappings: {
    properties: {
      inference_field: {
        type: "semantic_text",
        inference_id: "my-elser-endpoint-for-ingest",
        search_inference_id: "my-elser-endpoint-for-search",
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="7a2fdfd7b0553d63440af7598f9ad867"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">PUT my-index-000003
{
  "mappings": {
    "properties": {
      "inference_field": {
        "type": "semantic_text",
        "inference_id": "my-elser-endpoint-for-ingest",
        "search_inference_id": "my-elser-endpoint-for-search"
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/326.console"></div>
<div class="position-relative"><h4><a id="semantic-text-params"></a>Parameters for <code class="literal">semantic_text</code> fields</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">inference_id</code>
</span>
</dt>
<dd>
(Required, string)
Inference endpoint that will be used to generate embeddings for the field.
By default, <code class="literal">.elser-2-elasticsearch</code> is used.
This parameter cannot be updated.
Use the <a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a> to create the endpoint.
If <code class="literal">search_inference_id</code> is specified, the inference endpoint will only be used at index time.
</dd>
<dt>
<span class="term">
<code class="literal">search_inference_id</code>
</span>
</dt>
<dd>
(Optional, string)
Inference endpoint that will be used to generate embeddings at query time.
You can update this parameter by using the <a class="xref" href="indices-put-mapping.html" title="Update mapping API">Update mapping API</a>.
Use the <a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a> to create the endpoint.
If not specified, the inference endpoint defined by <code class="literal">inference_id</code> will be used at both index and query time.
</dd>
</dl>
</div>
<div class="position-relative"><h4><a id="infer-endpoint-validation"></a>Inference endpoint validation</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<p>The <code class="literal">inference_id</code> will not be validated when the mapping is created, but when documents are ingested into the index.
When the first document is indexed, the <code class="literal">inference_id</code> will be used to generate underlying indexing structures for the field.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Removing an inference endpoint will cause ingestion of documents and semantic queries to fail on indices that define <code class="literal">semantic_text</code> fields with that inference endpoint as their <code class="literal">inference_id</code>.
Trying to <a class="xref" href="delete-inference-api.html" title="Delete inference API">delete an inference endpoint</a> that is used on a <code class="literal">semantic_text</code> field will result in an error.</p>
</div>
</div>
<div class="position-relative"><h4><a id="auto-text-chunking"></a>Text chunking</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<p>Inference endpoints have a limit on the amount of text they can process.
To allow for large amounts of text to be used in semantic search, <code class="literal">semantic_text</code> automatically generates smaller passages if needed, called <em>chunks</em>.</p>
<p>Each chunk refers to a passage of the text and the corresponding embedding generated from it.
When querying, the individual passages will be automatically searched for each document, and the most relevant passage will be used to compute a score.</p>
<p>For more details on chunking and how to configure chunking settings, see <a class="xref" href="inference-apis.html#infer-chunking-config" title="Configuring chunking">Configuring chunking</a> in the Inference API documentation.</p>
<p>Refer to <a class="xref" href="semantic-search-semantic-text.html" title="Tutorial: semantic search with semantic_text">this tutorial</a> to learn more about
semantic search using <code class="literal">semantic_text</code> and the <code class="literal">semantic</code> query.</p>
<div class="position-relative"><h4><a id="semantic-text-highlighting"></a>Extracting Relevant Fragments from Semantic Text</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<p>You can extract the most relevant fragments from a semantic text field by using the <a class="xref" href="highlighting.html" title="Highlighting">highlight parameter</a> in the <a class="xref" href="search-search.html#search-search-api-request-body" title="Request body">Search API</a>.</p>
<a id="6baf72c04d48cb04c2f8be609ff3b3b5"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST test-index/_search
{
    "query": {
        "match": {
            "my_semantic_field": "Which country is Paris in?"
        }
    },
    "highlight": {
        "fields": {
            "my_semantic_field": {
                "number_of_fragments": 2,  <a id="CO118-1"></a><i class="conum" data-value="1"></i>
                "order": "score"           <a id="CO118-2"></a><i class="conum" data-value="2"></i>
            }
        }
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/327.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO118-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies the maximum number of fragments to return.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO118-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Sorts highlighted fragments by score when set to <code class="literal">score</code>. By default, fragments will be output in the order they appear in the field (order: none).</p>
</td>
</tr>
</table>
</div>
<p>Highlighting is supported on fields other than semantic_text.
However, if you want to restrict highlighting to the semantic highlighter and return no fragments when the field is not of type semantic_text,
you can explicitly enforce the <code class="literal">semantic</code> highlighter in the query:</p>
<a id="2afd49985950cbcccf727fa858d00067"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT test-index
{
    "query": {
        "match": {
            "my_field": "Which country is Paris in?"
        }
    },
    "highlight": {
        "fields": {
            "my_field": {
                "type": "semantic",         <a id="CO119-1"></a><i class="conum" data-value="1"></i>
                "number_of_fragments": 2,
                "order": "score"
            }
        }
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/328.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO119-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Ensures that highlighting is applied exclusively to semantic_text fields.</p>
</td>
</tr>
</table>
</div>
<div class="position-relative"><h4><a id="custom-indexing"></a>Customizing <code class="literal">semantic_text</code> indexing</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<p><code class="literal">semantic_text</code> uses defaults for indexing data based on the inference endpoint
specified. It enables you to quickstart your semantic search by providing
automatic inference and a dedicated query so you don&#8217;t need to provide further
details.</p>
<p>In case you want to customize data indexing, use the
<a class="xref" href="sparse-vector.html" title="Sparse vector field type"><code class="literal">sparse_vector</code></a> or <a class="xref" href="dense-vector.html" title="Dense vector field type"><code class="literal">dense_vector</code></a> field
types and create an ingest pipeline with an
<a class="xref" href="inference-processor.html" title="Inference processor">inference processor</a> to generate the embeddings.
<a class="xref" href="semantic-search-inference.html" title="Tutorial: semantic search with the inference API">This tutorial</a> walks you through the process. In
these cases - when you use <code class="literal">sparse_vector</code> or <code class="literal">dense_vector</code> field types instead
of the <code class="literal">semantic_text</code> field type to customize indexing - using the
<a class="xref" href="query-dsl-semantic-query.html" title="Semantic query"><code class="literal">semantic_query</code></a> is not supported for querying the
field data.</p>
<div class="position-relative"><h4><a id="update-script"></a>Updates to <code class="literal">semantic_text</code> fields</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<p>Updates that use scripts are not supported for an index contains a <code class="literal">semantic_text</code> field.
Even if the script targets non-<code class="literal">semantic_text</code> fields, the update will fail when the index contains a <code class="literal">semantic_text</code> field.</p>
<div class="position-relative"><h4><a id="copy-to-support"></a><code class="literal">copy_to</code> and multi-fields support</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<p>The semantic_text field type can serve as the target of <a class="xref" href="copy-to.html" title="copy_to">copy_to fields</a>,
be part of a <a class="xref" href="multi-fields.html" title="fields">multi-field</a> structure, or contain <a class="xref" href="multi-fields.html" title="fields">multi-fields</a> internally.
This means you can use a single field to collect the values of other fields for semantic search.</p>
<p>For example, the following mapping:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="test-index",
    mappings={
        "properties": {
            "source_field": {
                "type": "text",
                "copy_to": "infer_field"
            },
            "infer_field": {
                "type": "semantic_text",
                "inference_id": ".elser-2-elasticsearch"
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "test-index",
  mappings: {
    properties: {
      source_field: {
        type: "text",
        copy_to: "infer_field",
      },
      infer_field: {
        type: "semantic_text",
        inference_id: ".elser-2-elasticsearch",
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="7bdc283b96c7a965fae23013647b8578"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">PUT test-index
{
    "mappings": {
        "properties": {
            "source_field": {
                "type": "text",
                "copy_to": "infer_field"
            },
            "infer_field": {
                "type": "semantic_text",
                "inference_id": ".elser-2-elasticsearch"
            }
        }
    }
}</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/329.console"></div>
<p>can also be declared as multi-fields:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="test-index",
    mappings={
        "properties": {
            "source_field": {
                "type": "text",
                "fields": {
                    "infer_field": {
                        "type": "semantic_text",
                        "inference_id": ".elser-2-elasticsearch"
                    }
                }
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "test-index",
  mappings: {
    properties: {
      source_field: {
        type: "text",
        fields: {
          infer_field: {
            type: "semantic_text",
            inference_id: ".elser-2-elasticsearch",
          },
        },
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="2f72a63c73dd672ac2dc3997ad15dd41"></a>
<div class="pre_wrapper lang-console default has-python has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-js">PUT test-index
{
    "mappings": {
        "properties": {
            "source_field": {
                "type": "text",
                "fields": {
                    "infer_field": {
                        "type": "semantic_text",
                        "inference_id": ".elser-2-elasticsearch"
                    }
                }
            }
        }
    }
}</pre>
</div>
<div class="console_widget has-python has-js" data-snippet="snippets/330.console"></div>
<div class="position-relative"><h4><a id="limitations"></a>Limitations</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
<p><code class="literal">semantic_text</code> field types have the following limitations:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">semantic_text</code> fields are not currently supported as elements of <a class="xref" href="nested.html" title="Nested field type">nested fields</a>.
</li>
<li class="listitem">
<code class="literal">semantic_text</code> fields can&#8217;t currently be set as part of <a class="xref" href="dynamic-templates.html" title="Dynamic templates">Dynamic templates</a>.
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="search-as-you-type.html">« Search-as-you-type field type</a>
</span>
<span class="next">
<a href="shape.html">Shape field type »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"python":{"hasAny":true},"ruby":{"hasAny":true},"go":{"hasAny":true},"js":{"hasAny":true}}}}</script>
  </body>
</html>
