<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Retrieval augmented generation | Elasticsearch Guide [8.19] | Elastic</title>
<meta class="elastic" name="content" content="Retrieval augmented generation | Elasticsearch Guide [8.19]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.19]"/>
<link rel="up" href="search-with-elasticsearch.html" title="Search your data"/>
<link rel="prev" href="bring-your-own-vectors.html" title="Bring your own dense vector embeddings to Elasticsearch"/>
<link rel="next" href="modules-cross-cluster-search.html" title="Search across clusters"/>
<meta class="elastic" name="product_version" content="8.19"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.19"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.19"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="icon" href="/favicon.ico" sizes="32x32"/>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml"/>
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/>
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--¬© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="bring-your-own-vectors.html">¬´ Bring your own dense vector embeddings to Elasticsearch</a>
</span>
<span class="next">
<a href="modules-cross-cluster-search.html">Search across clusters ¬ª</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">‚Ä∫</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.19]</a></span>
<span class="chevron-right">‚Ä∫</span><span class="breadcrumb-link"><a href="search-with-elasticsearch.html">Search your data</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Retrieval augmented generation</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/search/search-your-data/retrieval-augmented-generation.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/solutions/search/rag">latest documentation</a>.
</div>
<div class="rag-elasticsearch">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="_retrieval_augmented_generation"></a>Retrieval augmented generation</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/search/search-your-data/retrieval-augmented-generation.asciidoc">edit</a></div>
</div></div></div>
<div class="sidebar">
<div class="titlepage"><div><div>
<p class="title"><strong>üçø Prefer a video introduction?</strong></p>
</div></div></div>
<p>Check out <a href="https://www.youtube.com/watch?v=OS4ZefUPAks" class="ulink" target="_top">this short video</a> from the Elastic Snackable Series.</p>
</div>
<p>Retrieval Augmented Generation (RAG) is a technique for improving language model responses by grounding the model with additional, verifiable sources of information. It works by first retrieving relevant context from an external datastore, which is then added to the model&#8217;s context window.</p>
<p>RAG is a form of <a href="https://arxiv.org/abs/2301.00234" class="ulink" target="_top">in-context learning</a>, where the model learns from information provided at inference time.
Compared to fine-tuning or continuous pre-training, RAG can be implemented more quickly and cheaply, and offers several advantages.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/search/rag-venn-diagram.svg" alt="RAG sits at the intersection of information retrieval and generative AI" width="500">
</div>
</div>
<p>RAG sits at the intersection of <a href="/what-is/information-retrieval" class="ulink" target="_top">information retrieval</a> and generative AI.
Elasticsearch is an excellent tool for implementing RAG, because it offers various retrieval capabilities, such as full-text search, vector search, and hybrid search, as well as other tools like filtering, aggregations, and security features.</p>
<div class="position-relative"><h3><a id="rag-elasticsearch-advantages"></a>Advantages of RAG</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/search/search-your-data/retrieval-augmented-generation.asciidoc">edit</a></div>
<p>Implementing RAG with Elasticsearch has several advantages:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Improved context:</strong></span> Enables grounding the language model with additional, up-to-date, and/or private data.
</li>
<li class="listitem">
<span class="strong strong"><strong>Reduced hallucination:</strong></span> Helps minimize factual errors by enabling models to cite authoritative sources.
</li>
<li class="listitem">
<span class="strong strong"><strong>Cost efficiency:</strong></span> Requires less maintenance compared to fine-tuning or continuously pre-training models.
</li>
<li class="listitem">
<span class="strong strong"><strong>Built-in security:</strong></span> Controls data access by leveraging Elasticsearch&#8217;s <a class="xref" href="authorization.html" title="User authorization">user authorization</a> features, such as role-based access control and field/document-level security.
</li>
<li class="listitem">
<span class="strong strong"><strong>Simplified response parsing:</strong></span> Eliminates the need for custom parsing logic by letting the language model handle parsing Elasticsearch responses and formatting the retrieved context.
</li>
<li class="listitem">
<span class="strong strong"><strong>Flexible implementation:</strong></span> Works with basic <a class="xref" href="full-text-search.html" title="Full-text search">full-text search</a>, and can be gradually updated to add more advanced and computationally intensive <a class="xref" href="semantic-search.html" title="Semantic search">semantic search</a> capabilities.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="rag-elasticsearch-components"></a>RAG system overview</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/search/search-your-data/retrieval-augmented-generation.asciidoc">edit</a></div>
<p>The following diagram illustrates a simple RAG system using Elasticsearch.</p>
<div class="imageblock text-center stretch">
<div class="content">
<img src="images/search/rag-schema.svg" alt="Components of a simple RAG system using Elasticsearch">
</div>
</div>
<p>The workflow is as follows:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
The user submits a query.
</li>
<li class="listitem">
Elasticsearch retrieves relevant documents using full-text search, vector search, or hybrid search.
</li>
<li class="listitem">
The language model processes the context and generates a response, using custom instructions. Examples of custom instructions include "Cite a source" or "Provide a concise summary of the <code class="literal">content</code> field in markdown format."
</li>
<li class="listitem">
The model returns the final response to the user.
</li>
</ol>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>A more advanced setup might include query rewriting between steps 1 and 2. This intermediate step could use one or more additional language models with different instructions to reformulate queries for more specific and detailed responses.</p>
</div>
</div>
<div class="position-relative"><h3><a id="rag-elasticsearch-getting-started"></a>Getting started</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/search/search-your-data/retrieval-augmented-generation.asciidoc">edit</a></div>
<p>Start building RAG applications quickly with Playground, which seamlessly integrates Elasticsearch with language model providers.
The Playground UI enables you to build, test, and deploy RAG interfaces on top of your Elasticsearch indices.</p>
<p>Playground automatically selects the best retrieval methods for your data, while providing full control over the final Elasticsearch queries and language model instructions.
You can also download the underlying Python code to integrate with your existing applications.</p>
<p>Learn more in the <a href="/guide/en/kibana/8.19/playground.html" class="ulink" target="_top">Playground documentation</a> and
try the <a href="/demo-gallery/ai-playground" class="ulink" target="_top">interactive lab</a> for hands-on experience.</p>
<div class="position-relative"><h3><a id="rag-elasticsearch-learn-more"></a>Learn more</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/search/search-your-data/retrieval-augmented-generation.asciidoc">edit</a></div>
<p>Learn more about building RAG systems using Elasticsearch in these blog posts:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/blog/beyond-rag-basics" class="ulink" target="_top">Beyond RAG Basics: Advanced strategies for AI applications</a>
</li>
<li class="listitem">
<a href="/search-labs/blog/building-a-rag-system-with-gemma-hugging-face-elasticsearch" class="ulink" target="_top">Building a RAG system with Gemma, Hugging Face, and Elasticsearch</a>
</li>
<li class="listitem">
<a href="/search-labs/blog/rag-agent-tool-elasticsearch-langchain" class="ulink" target="_top">Building an agentic RAG tool with Elasticsearch and Langchain</a>
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="bring-your-own-vectors.html">¬´ Bring your own dense vector embeddings to Elasticsearch</a>
</span>
<span class="next">
<a href="modules-cross-cluster-search.html">Search across clusters ¬ª</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"python":{"hasAny":true},"ruby":{"hasAny":true},"go":{"hasAny":true},"js":{"hasAny":true}}}}</script>
  </body>
</html>
