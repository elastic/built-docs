<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Forget follower API
        | Elasticsearch Reference [7.3]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [7.3]" /><link rel="up" href="ccr-apis.html" title="Cross-cluster replication APIs" /><link rel="prev" href="ccr-post-unfollow.html" title="Unfollow API" /><link rel="next" href="ccr-get-follow-stats.html" title="Get follower stats API" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.3" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="7.3" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.3]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-link"><a href="ccr-apis.html">Cross-cluster replication APIs</a></span> » <span class="breadcrumb-node">Forget follower API</span></div><div class="navheader"><span class="prev"><a href="ccr-post-unfollow.html">
              « 
              Unfollow API</a>
           
        </span><span class="next">
           
          <a href="ccr-get-follow-stats.html">Get follower stats API
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="ccr-post-forget-follower"></a>Forget follower API<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Removes the follower retention leases from the leader.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-request"></a>Request<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">POST /&lt;leader_index&gt;/_ccr/forget_follower
{
  "follower_cluster" : "&lt;follower_cluster&gt;",
  "follower_index" : "&lt;follower_index&gt;",
  "follower_index_uuid" : "&lt;follower_index_uuid&gt;",
  "leader_remote_cluster" : "&lt;leader_remote_cluster&gt;"
}</pre></div><div class="console_widget" data-snippet="snippets/1130.console"></div><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0,
    "failures" : [ ]
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-prereqs"></a>Prerequisites<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">If the Elasticsearch security features are enabled, you must have <code class="literal">manage_leader_index</code>
index privileges for the leader index. For more information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.3/security-privileges.html" target="_top">Security privileges</a>.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-desc"></a>Description<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A following index takes out retention leases on its leader index. These
retention leases are used to increase the likelihood that the shards of the
leader index retain the history of operations that the shards of the following
index need to execute replication. When a follower index is converted to a
regular index via the <a class="link" href="ccr-post-unfollow.html" title="Unfollow API">unfollow API</a> (either via explicit
execution of this API, or implicitly via index lifecycle management), these retention leases are
removed. However, removing these retention leases can fail (e.g., if the remote
cluster containing the leader index is unavailable). While these retention
leases will eventually expire on their own, their extended existence can cause
the leader index to hold more history than necessary, and prevent index lifecycle management from
performing some operations on the leader index. This API exists to enable
manually removing these retention leases when the unfollow API was unable to do
so.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>This API does not stop replication by a following index. If you use this
API targeting a follower index that is still actively following, the following
index will add back retention leases on the leader. The only purpose of this API
is to handle the case of failure to remove the following retention leases after
the <a class="link" href="ccr-post-unfollow.html" title="Unfollow API">unfollow API</a> is invoked.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-path-parms"></a>Path parameters<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">&lt;leader_index&gt;</code></span></dt><dd>(Required, string) The name of the leader index.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-request-body"></a>Request body<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">follower_cluster</code></span></dt><dd>(Required, string) The name of the cluster containing the follower index.</dd><dt><span class="term"><code class="literal">follower_index</code></span></dt><dd>(Required, string) The name of the follower index.</dd><dt><span class="term"><code class="literal">follower_index_uuid</code></span></dt><dd>(Required, string) The UUID of the follower index.</dd><dt><span class="term"><code class="literal">leader_remote_cluster</code></span></dt><dd>(Required, string) The alias (from the perspective of the cluster containing
the follower index) of the <a class="link" href="modules-remote-clusters.html" title="Remote clusters">remote cluster</a>
containing the leader index.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-examples"></a>Examples<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>This example removes the follower retention leases for <code class="literal">follower_index</code> from
<code class="literal">leader_index</code>.</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">POST /leader_index/_ccr/forget_follower
{
  "follower_cluster" : "follower_cluster",
  "follower_index" : "follower_index",
  "follower_index_uuid" : "vYpnaWPRQB6mNspmoCeYyA",
  "leader_remote_cluster" : "leader_cluster"
}</pre></div><div class="console_widget" data-snippet="snippets/1131.console"></div><p>The API returns the following result:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0,
    "failures" : [ ]
  }
}</pre></div></div></div><div class="navfooter"><span class="prev"><a href="ccr-post-unfollow.html">
              « 
              Unfollow API</a>
           
        </span><span class="next">
           
          <a href="ccr-get-follow-stats.html">Get follower stats API
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
