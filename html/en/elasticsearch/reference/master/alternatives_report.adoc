== Alternatives Report

=== getting-started.asciidoc: line 153: f8cc4b331a19ff4df8e4a490f906ee69.adoc
[source,console]
----
GET /_cat/health?v
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 199: 311c4b632a29b9ead63b02d01f10096b.adoc
[source,console]
----
PUT /customer/_doc/1
{
  "name": "John Doe"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== getting-started.asciidoc: line 240: 3f3b3e207f79303ce6f86e03e928e062.adoc
[source,console]
----
GET /customer/_doc/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== getting-started.asciidoc: line 277: 7d32a32357b5ea8819b72608fcc6fd07.adoc
[source,console]
----
POST /customer/_bulk?pretty
{"index":{"_id":"1"}}
{"name": "John Doe" }
{"index":{"_id":"2"}}
{"name": "Jane Doe" }
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 289: 0a9389d9a11a56a96bb2292df2ccb80d.adoc
[source,console]
----
POST /customer/_bulk
{"update":{"_id":"1"}}
{"doc": { "name": "John Doe becomes Jane Doe" } }
{"delete":{"_id":"2"}}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== getting-started.asciidoc: line 368: c181969ef91c3b4a2513c1885be98e26.adoc
[source,console]
----
GET /bank/_search?q=*&sort=account_number:asc&pretty
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 441: 506844befdc5691d835771bcbb1c1a60.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match_all": {} },
  "sort": [
    { "account_number": "asc" }
  ]
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 511: 345ea7e9cb5af9e052ce0cf6f1f52c23.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match_all": {} }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 527: 3d7527bb7ac3b0e1f97b22bdfeb99070.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match_all": {} },
  "size": 1
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 542: 3c31f9eb032861bff64abd8b14758991.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match_all": {} },
  "from": 10,
  "size": 10
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 558: e8035a7476601ad4b136edb250f92d53.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match_all": {} },
  "sort": { "balance": { "order": "desc" } }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 573: b8459547da50aebddbcdd1aaaac02b5f.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match_all": {} },
  "_source": ["account_number", "balance"]
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 592: 2e6bfd38c9bcb728227f0d4dd11c09a2.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match": { "account_number": 20 } }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 604: b8eab60f6441edf314306d8194c7cd56.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match": { "address": "mill" } }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 616: cd247f267968aa0927bfdad56852f8f5.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match": { "address": "mill lane" } }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 628: 231aa0bb39c35fe199d28fe0e4a62b2e.adoc
[source,console]
----
GET /bank/_search
{
  "query": { "match_phrase": { "address": "mill lane" } }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 642: 2de2349b7010652ca6104fb60f531a80.adoc
[source,console]
----
GET /bank/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "address": "mill" } },
        { "match": { "address": "lane" } }
      ]
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 663: 171d3a3af2d0f46cae5896c5bd3da4b5.adoc
[source,console]
----
GET /bank/_search
{
  "query": {
    "bool": {
      "should": [
        { "match": { "address": "mill" } },
        { "match": { "address": "lane" } }
      ]
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 684: 5d38d4da86157b897e4876674bd169ef.adoc
[source,console]
----
GET /bank/_search
{
  "query": {
    "bool": {
      "must_not": [
        { "match": { "address": "mill" } },
        { "match": { "address": "lane" } }
      ]
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 707: 47bb632c6091ad0cd94bc660bdd309a5.adoc
[source,console]
----
GET /bank/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "age": "40" } }
      ],
      "must_not": [
        { "match": { "state": "ID" } }
      ]
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 738: 251ea12c1248385ab409906ac64d9ee9.adoc
[source,console]
----
GET /bank/_search
{
  "query": {
    "bool": {
      "must": { "match_all": {} },
      "filter": {
        "range": {
          "balance": {
            "gte": 20000,
            "lte": 30000
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 771: feefeb68144002fd1fff57b77b95b85e.adoc
[source,console]
----
GET /bank/_search
{
  "size": 0,
  "aggs": {
    "group_by_state": {
      "terms": {
        "field": "state.keyword"
      }
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 864: cfbaea6f0df045c5d940bbb6a9c69cd8.adoc
[source,console]
----
GET /bank/_search
{
  "size": 0,
  "aggs": {
    "group_by_state": {
      "terms": {
        "field": "state.keyword"
      },
      "aggs": {
        "average_balance": {
          "avg": {
            "field": "balance"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 892: 645796e8047967ca4a7635a22a876f4c.adoc
[source,console]
----
GET /bank/_search
{
  "size": 0,
  "aggs": {
    "group_by_state": {
      "terms": {
        "field": "state.keyword",
        "order": {
          "average_balance": "desc"
        }
      },
      "aggs": {
        "average_balance": {
          "avg": {
            "field": "balance"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== getting-started.asciidoc: line 921: c84b5f9c6528f84a08c5318b3385d55c.adoc
[source,console]
----
GET /bank/_search
{
  "size": 0,
  "aggs": {
    "group_by_age": {
      "range": {
        "field": "age",
        "ranges": [
          {
            "from": 20,
            "to": 30
          },
          {
            "from": 30,
            "to": 40
          },
          {
            "from": 40,
            "to": 50
          }
        ]
      },
      "aggs": {
        "group_by_gender": {
          "terms": {
            "field": "gender.keyword"
          },
          "aggs": {
            "average_balance": {
              "avg": {
                "field": "balance"
              }
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== setup/install/check-running.asciidoc: line 7: 3d1ff6097e2359f927c88c2ccdb36252.adoc
[source,console]
----
GET /
----
|===
| php | csharp

| &check; | &check;
|===
=== setup/install/check-running.asciidoc: line 7: 3d1ff6097e2359f927c88c2ccdb36252.adoc
[source,console]
----
GET /
----
|===
| php | csharp

| &check; | &check;
|===
=== setup/install/check-running.asciidoc: line 7: 3d1ff6097e2359f927c88c2ccdb36252.adoc
[source,console]
----
GET /
----
|===
| php | csharp

| &check; | &check;
|===
=== setup/install/check-running.asciidoc: line 7: 3d1ff6097e2359f927c88c2ccdb36252.adoc
[source,console]
----
GET /
----
|===
| php | csharp

| &check; | &check;
|===
=== setup/install/check-running.asciidoc: line 7: 3d1ff6097e2359f927c88c2ccdb36252.adoc
[source,console]
----
GET /
----
|===
| php | csharp

| &check; | &check;
|===
=== setup/secure-settings.asciidoc: line 108: 6e87271a5a10dbb8d27b25c7dbfa868a.adoc
[source,console]
----
POST _nodes/reload_secure_settings
----
|===
| php | csharp

| &cross; | &cross;
|===
=== setup/logging-config.asciidoc: line 155: 8e6bfb4441ffa15c86d5dc20fa083571.adoc
[source,console]
----
PUT /_cluster/settings
{
  "transient": {
    "logger.org.elasticsearch.transport": "trace"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== setup/sysconfig/swap.asciidoc: line 71: ed250b74bc77c15bb794f55a12d762c3.adoc
[source,console]
----
GET _nodes?filter_path=**.mlockall
----
|===
| php | csharp

| &cross; | &cross;
|===
=== setup/sysconfig/file-descriptors.asciidoc: line 29: c5bc577ff92f889225b0d2617adcb48c.adoc
[source,console]
----
GET _nodes/stats/process?filter_path=**.max_file_descriptors
----
|===
| php | csharp

| &cross; | &cross;
|===
=== monitoring/collecting-monitoring-data.asciidoc: line 57: fb2b8d642e16132eebcff4f8b6d592d1.adoc
[source,console]
----
GET _cluster/settings

PUT _cluster/settings
{
  "persistent": {
    "xpack.monitoring.collection.enabled": true
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== monitoring/configuring-metricbeat.asciidoc: line 32: fb2b8d642e16132eebcff4f8b6d592d1.adoc
[source,console]
----
GET _cluster/settings

PUT _cluster/settings
{
  "persistent": {
    "xpack.monitoring.collection.enabled": true
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== monitoring/configuring-metricbeat.asciidoc: line 198: 519603821dc5b883fc2cf50e3d164084.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "xpack.monitoring.elasticsearch.collection.enabled": false
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== monitoring/configuring-filebeat.asciidoc: line 39: fb2b8d642e16132eebcff4f8b6d592d1.adoc
[source,console]
----
GET _cluster/settings

PUT _cluster/settings
{
  "persistent": {
    "xpack.monitoring.collection.enabled": true
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== monitoring/indices.asciidoc: line 12: 83dfd0852101eca3ba8174c9c38b4e73.adoc
[source,console]
----
GET /_template/.monitoring-*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== monitoring/indices.asciidoc: line 30: a63906c63a8681c72d53ee0fcf2ffd35.adoc
[source,console]
----
PUT /_template/custom_monitoring
{
    "index_patterns": ".monitoring-*",
    "order": 1,
    "settings": {
        "number_of_shards": 5,
        "number_of_replicas": 2
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/security/authentication/configuring-active-directory-realm.asciidoc: line 188: 21e95d29bc37deb5689a654aa323b4ba.adoc
[source,console]
----
PUT /_security/role_mapping/admins
{
  "roles" : [ "monitoring" , "user" ],
  "rules" : { "field" : {
    "groups" : "cn=admins,dc=example,dc=com" \<1>
  } },
  "enabled": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/security/authentication/configuring-active-directory-realm.asciidoc: line 202: bd0d30a7683037e1ebadd163514765d4.adoc
[source,console]
----
PUT /_security/role_mapping/basic_users
{
  "roles" : [ "user" ],
  "rules" : { "any": [
    { "field" : {
      "groups" : "cn=users,dc=example,dc=com" \<1>
    } },
    { "field" : {
      "dn" : "cn=John Doe,cn=contractors,dc=example,dc=com" \<2>
    } }
  ] },
  "enabled": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/security/authentication/configuring-ldap-realm.asciidoc: line 149: 21e95d29bc37deb5689a654aa323b4ba.adoc
[source,console]
----
PUT /_security/role_mapping/admins
{
  "roles" : [ "monitoring" , "user" ],
  "rules" : { "field" : {
    "groups" : "cn=admins,dc=example,dc=com" \<1>
  } },
  "enabled": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/security/authentication/configuring-ldap-realm.asciidoc: line 163: 38ffa96674b5fd4042589af0ebb0437b.adoc
[source,console]
----
PUT /_security/role_mapping/basic_users
{
  "roles" : [ "user" ],
  "rules" : { "field" : {
    "groups" : "cn=users,dc=example,dc=com" \<1>
  } },
  "enabled": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/security/authentication/configuring-pki-realm.asciidoc: line 140: 70bbe14bc4d5a5d58e81ab2b02408817.adoc
[source,console]
----
PUT /_security/role_mapping/users
{
  "roles" : [ "user" ],
  "rules" : { "field" : {
    "dn" : "cn=John Doe,ou=example,o=com" \<1>
  } },
  "enabled": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/security/authentication/configuring-kerberos-realm.asciidoc: line 155: 9584b042223982e0bfde8d12d42c9705.adoc
[source,console]
----
POST /_security/role_mapping/kerbrolemapping
{
  "roles" : [ "monitoring_user" ],
  "enabled": true,
  "rules" : {
    "field" : { "username" : "user@REALM" }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 35: 1cd3b9d65576a9212eef898eb3105758.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.enable": "primaries"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 37: 31b4eec9ac4c2c3fdfbaeee8d2f83513.adoc
[source,console]
----
POST _flush/synced
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 70: a21a7bf052b41f5b996dc58f7b69770f.adoc
[source,console]
----
POST _ml/set_upgrade_mode?enabled=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 77: 7e49705769c42895fb7b1e2ca028ff47.adoc
[source,console]
----
GET _cat/nodes
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 91: 45ef5156dbd2d3fd4fd22b8d99f7aad4.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.enable": null
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 110: 5c53944aec2ce3e55854e315f0482029.adoc
[source,console]
----
GET _cat/health?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 141: 6b74ff6df5d7583add837b34a6c80a43.adoc
[source,console]
----
GET _cat/recovery
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/rolling_upgrade.asciidoc: line 168: 3c5d5a5c34a62724942329658c688f5e.adoc
[source,console]
----
POST _ml/set_upgrade_mode?enabled=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/cluster_restart.asciidoc: line 27: 1cd3b9d65576a9212eef898eb3105758.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.enable": "primaries"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/cluster_restart.asciidoc: line 28: 31b4eec9ac4c2c3fdfbaeee8d2f83513.adoc
[source,console]
----
POST _flush/synced
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/cluster_restart.asciidoc: line 60: a21a7bf052b41f5b996dc58f7b69770f.adoc
[source,console]
----
POST _ml/set_upgrade_mode?enabled=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/cluster_restart.asciidoc: line 83: c0a4b0c1c6eff14da8b152ceb19c1c31.adoc
[source,console]
----
GET _cat/health

GET _cat/nodes
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/cluster_restart.asciidoc: line 117: 45ef5156dbd2d3fd4fd22b8d99f7aad4.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster.routing.allocation.enable": null
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/cluster_restart.asciidoc: line 137: 2d9b30acd6b5683f39d53494c0dd779c.adoc
[source,console]
----
GET _cat/health

GET _cat/recovery
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/cluster_restart.asciidoc: line 154: 3c5d5a5c34a62724942329658c688f5e.adoc
[source,console]
----
POST _ml/set_upgrade_mode?enabled=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== upgrade/reindex_upgrade.asciidoc: line 160: acd65c045139fef38ef5cd20c8c1cfc1.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "remote": {
      "host": "http://oldhost:9200",
      "username": "user",
      "password": "pass"
    },
    "index": "source",
    "query": {
      "match": {
        "test": "data"
      }
    }
  },
  "dest": {
    "index": "dest"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/avg-aggregation.asciidoc: line 10: d9d28e9e9d7021a72c983f8e79aa8c6c.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "avg_grade" : { "avg" : { "field" : "grade" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/avg-aggregation.asciidoc: line 43: d05bbafb8c88850879b5990119a96f5e.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "avg_grade" : {
            "avg" : {
                "script" : {
                    "source" : "doc.grade.value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/avg-aggregation.asciidoc: line 63: c04f4a48d0cb550a879fdc93454852de.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "avg_grade" : {
            "avg" : {
                "script" : {
                    "id": "my_script",
                    "params": {
                        "field": "grade"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/avg-aggregation.asciidoc: line 88: 91994d98e766230911b3e659b3e51f17.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "avg_corrected_grade" : {
            "avg" : {
                "field" : "grade",
                "script" : {
                    "lang": "painless",
                    "source": "_value * params.correction",
                    "params" : {
                        "correction" : 1.2
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/avg-aggregation.asciidoc: line 117: 2ec33e09d6080723ee2013bad694f35a.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "grade_avg" : {
            "avg" : {
                "field" : "grade",
                "missing": 10 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/weighted-avg-aggregation.asciidoc: line 55: c15dead46d351f62cfc066f1ca1a24eb.adoc
[source,console]
----
POST /exams/_search
{
    "size": 0,
    "aggs" : {
        "weighted_grade": {
            "weighted_avg": {
                "value": {
                    "field": "grade"
                },
                "weight": {
                    "field": "weight"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/weighted-avg-aggregation.asciidoc: line 102: 4c15a4b054c7d0aaaa17deaff853bb28.adoc
[source,console]
----
POST /exams/_doc?refresh
{
    "grade": [1, 2, 3],
    "weight": 2
}

POST /exams/_search
{
    "size": 0,
    "aggs" : {
        "weighted_grade": {
            "weighted_avg": {
                "value": {
                    "field": "grade"
                },
                "weight": {
                    "field": "weight"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/weighted-avg-aggregation.asciidoc: line 153: e88e8c78ed50936c8b7436c90b988ddf.adoc
[source,console]
----
POST /exams/_search
{
    "size": 0,
    "aggs" : {
        "weighted_grade": {
            "weighted_avg": {
                "value": {
                    "script": "doc.grade.value + 1"
                },
                "weight": {
                    "script": "doc.weight.value + 1"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/weighted-avg-aggregation.asciidoc: line 186: cebfe0fed62091eb38b6348c89643f89.adoc
[source,console]
----
POST /exams/_search
{
    "size": 0,
    "aggs" : {
        "weighted_grade": {
            "weighted_avg": {
                "value": {
                    "field": "grade",
                    "missing": 2
                },
                "weight": {
                    "field": "weight",
                    "missing": 3
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/cardinality-aggregation.asciidoc: line 11: 826140cdd3d5fe9a728239605c6dc71a.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "type_count" : {
            "cardinality" : {
                "field" : "type"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/cardinality-aggregation.asciidoc: line 46: edbd54e71e56f3a5617aa012b100aa0f.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "type_count" : {
            "cardinality" : {
                "field" : "type",
                "precision_threshold": 100 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/cardinality-aggregation.asciidoc: line 187: ef3a3e292e9e74d42703555178ed5fb6.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "type_promoted_count" : {
            "cardinality" : {
                "script": {
                    "lang": "painless",
                    "source": "doc['type'].value + ' ' + doc['promoted'].value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/cardinality-aggregation.asciidoc: line 208: 6969b29883eefa552475ae1837dc5f96.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "type_promoted_count" : {
            "cardinality" : {
                "script" : {
                    "id": "my_script",
                    "params": {
                        "type_field": "type",
                        "promoted_field": "promoted"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/cardinality-aggregation.asciidoc: line 236: 7d86ff090cbd87f144edb72e949470b3.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "tag_cardinality" : {
            "cardinality" : {
                "field" : "tag",
                "missing": "N/A" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/extendedstats-aggregation.asciidoc: line 11: b1c3e5c4a1a22ac329bbdec4d0de1082.adoc
[source,console]
----
GET /exams/_search
{
    "size": 0,
    "aggs" : {
        "grades_stats" : { "extended_stats" : { "field" : "grade" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/extendedstats-aggregation.asciidoc: line 59: eb8df98231df40c61f5feef4946b1a92.adoc
[source,console]
----
GET /exams/_search
{
    "size": 0,
    "aggs" : {
        "grades_stats" : {
            "extended_stats" : {
                "field" : "grade",
                "sigma" : 3 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/extendedstats-aggregation.asciidoc: line 93: 83476d04b393850da0697e1bfae58b4a.adoc
[source,console]
----
GET /exams/_search
{
    "size": 0,
    "aggs" : {
        "grades_stats" : {
            "extended_stats" : {
                "script" : {
                    "source" : "doc['grade'].value",
                    "lang" : "painless"
                 }
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/extendedstats-aggregation.asciidoc: line 115: 2cf036d054901b5d7b4a84780c320f2d.adoc
[source,console]
----
GET /exams/_search
{
    "size": 0,
    "aggs" : {
        "grades_stats" : {
            "extended_stats" : {
                "script" : {
                    "id": "my_script",
                    "params": {
                        "field": "grade"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/extendedstats-aggregation.asciidoc: line 141: 533b447e1ca8c575e38ecd9b1917c17c.adoc
[source,console]
----
GET /exams/_search
{
    "size": 0,
    "aggs" : {
        "grades_stats" : {
            "extended_stats" : {
                "field" : "grade",
                "script" : {
                    "lang" : "painless",
                    "source": "_value * params.correction",
                    "params" : {
                        "correction" : 1.2
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/extendedstats-aggregation.asciidoc: line 171: 44a7cf8482bdc3d1c11f4b3b35683b99.adoc
[source,console]
----
GET /exams/_search
{
    "size": 0,
    "aggs" : {
        "grades_stats" : {
            "extended_stats" : {
                "field" : "grade",
                "missing": 0 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/geobounds-aggregation.asciidoc: line 10: 34cabdecfe9c2cb8dd929853882564eb.adoc
[source,console]
----
PUT /museums
{
    "mappings": {
        "properties": {
            "location": {
                "type": "geo_point"
            }
        }
    }
}

POST /museums/_bulk?refresh
{"index":{"_id":1}}
{"location": "52.374081,4.912350", "name": "NEMO Science Museum"}
{"index":{"_id":2}}
{"location": "52.369219,4.901618", "name": "Museum Het Rembrandthuis"}
{"index":{"_id":3}}
{"location": "52.371667,4.914722", "name": "Nederlands Scheepvaartmuseum"}
{"index":{"_id":4}}
{"location": "51.222900,4.405200", "name": "Letterenhuis"}
{"index":{"_id":5}}
{"location": "48.861111,2.336389", "name": "Musée du Louvre"}
{"index":{"_id":6}}
{"location": "48.860000,2.327000", "name": "Musée d'Orsay"}

POST /museums/_search?size=0
{
    "query" : {
        "match" : { "name" : "musée" }
    },
    "aggs" : {
        "viewport" : {
            "geo_bounds" : {
                "field" : "location", \<1>
                "wrap_longitude" : true \<2>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/geocentroid-aggregation.asciidoc: line 9: d0cf6057bc87042819a7ac961d1b2273.adoc
[source,console]
----
PUT /museums
{
    "mappings": {
        "properties": {
            "location": {
                "type": "geo_point"
            }
        }
    }
}

POST /museums/_bulk?refresh
{"index":{"_id":1}}
{"location": "52.374081,4.912350", "city": "Amsterdam", "name": "NEMO Science Museum"}
{"index":{"_id":2}}
{"location": "52.369219,4.901618", "city": "Amsterdam", "name": "Museum Het Rembrandthuis"}
{"index":{"_id":3}}
{"location": "52.371667,4.914722", "city": "Amsterdam", "name": "Nederlands Scheepvaartmuseum"}
{"index":{"_id":4}}
{"location": "51.222900,4.405200", "city": "Antwerp", "name": "Letterenhuis"}
{"index":{"_id":5}}
{"location": "48.861111,2.336389", "city": "Paris", "name": "Musée du Louvre"}
{"index":{"_id":6}}
{"location": "48.860000,2.327000", "city": "Paris", "name": "Musée d'Orsay"}

POST /museums/_search?size=0
{
    "aggs" : {
        "centroid" : {
            "geo_centroid" : {
                "field" : "location" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/geocentroid-aggregation.asciidoc: line 76: 6dec421bf327ecaf189109d9aaa35919.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggs" : {
        "cities" : {
            "terms" : { "field" : "city.keyword" },
            "aggs" : {
                "centroid" : {
                    "geo_centroid" : { "field" : "location" }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/max-aggregation.asciidoc: line 16: 9498a707be49e14dad801db6b6824e34.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "max_price" : { "max" : { "field" : "price" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/max-aggregation.asciidoc: line 52: 736fc5448b66962ceef1e6d5948ef691.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "max_price" : {
            "max" : {
                "script" : {
                    "source" : "doc.price.value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/max-aggregation.asciidoc: line 73: b5e782e309a2a10db272414e8483d8dc.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "max_price" : {
            "max" : {
                "script" : {
                    "id": "my_script",
                    "params": {
                        "field": "price"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/max-aggregation.asciidoc: line 101: 23fdba37454d6d7abf6bfbb4fd01692f.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "max_price_in_euros" : {
            "max" : {
                "field" : "price",
                "script" : {
                    "source" : "_value * params.conversion_rate",
                    "params" : {
                        "conversion_rate" : 1.2
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/max-aggregation.asciidoc: line 129: 41518c094db4a5b03cca3b21497f79cf.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "grade_max" : {
            "max" : {
                "field" : "grade",
                "missing": 10 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/min-aggregation.asciidoc: line 16: bbd52c02b078e650f1a871f7fe7ff343.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "min_price" : { "min" : { "field" : "price" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/min-aggregation.asciidoc: line 53: 27cf2556b606f91d1fe3db3d7b6fd21a.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "min_price" : {
            "min" : {
                "script" : {
                    "source" : "doc.price.value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/min-aggregation.asciidoc: line 74: f76eb7821cb7855339ffcaab3460d934.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "min_price" : {
            "min" : {
                "script" : {
                    "id": "my_script",
                    "params": {
                        "field": "price"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/min-aggregation.asciidoc: line 102: 57ec3af2f4b3ce90722de51efc9d2cf1.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "min_price_in_euros" : {
            "min" : {
                "field" : "price",
                "script" : {
                    "source" : "_value * params.conversion_rate",
                    "params" : {
                        "conversion_rate" : 1.2
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/min-aggregation.asciidoc: line 130: 05161bf816a98dd2a57b8cd2a3d39db4.adoc
[source,console]
----
POST /sales/_search
{
    "aggs" : {
        "grade_min" : {
            "min" : {
                "field" : "grade",
                "missing": 10 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 28: 9baaa0c37e787738507aceee7626c88b.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "field" : "load_time" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 80: 4273ecf0448faf65b16952ada3d48a30.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "field" : "load_time",
                "percents" : [95, 99, 99.9] \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 103: e6f49e5325fe0e9b816a837bd3e65a7c.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs": {
        "load_time_outlier": {
            "percentiles": {
                "field": "load_time",
                "keyed": false
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 172: 823b97820ce96abcc3a9292d14292849.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "script" : {
                    "lang": "painless",
                    "source": "doc['load_time'].value / params.timeUnit", \<1>
                    "params" : {
                        "timeUnit" : 1000   \<2>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 201: dae483a5a412dcf4c20161fea25a87ba.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "script" : {
                    "id": "my_script",
                    "params": {
                        "field": "load_time"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 266: 829d345e5e15e371aeb820f4d62a1b2a.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "field" : "load_time",
                "tdigest": {
                  "compression" : 200 \<1>
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 317: db17a10cf64c84bd2fc4ebb073e59cec.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "field" : "load_time",
                "percents" : [95, 99, 99.9],
                "hdr": { \<1>
                  "number_of_significant_value_digits" : 3 \<2>
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-aggregation.asciidoc: line 350: e557ce02e192939944ebc6bae87e98a6.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "grade_percentiles" : {
            "percentiles" : {
                "field" : "grade",
                "missing": 10 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-rank-aggregation.asciidoc: line 26: daaa9e0df859d764ca0a4a4ebcfbdb26.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_ranks" : {
            "percentile_ranks" : {
                "field" : "load_time", \<1>
                "values" : [500, 600]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-rank-aggregation.asciidoc: line 71: 156dd311073c8c825e608becf63ae7fe.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs": {
        "load_time_ranks": {
            "percentile_ranks": {
                "field": "load_time",
                "values": [500, 600],
                "keyed": false
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-rank-aggregation.asciidoc: line 122: c9ea558335446fc64006724cb72684e1.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_ranks" : {
            "percentile_ranks" : {
                "values" : [500, 600],
                "script" : {
                    "lang": "painless",
                    "source": "doc['load_time'].value / params.timeUnit", \<1>
                    "params" : {
                        "timeUnit" : 1000   \<2>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-rank-aggregation.asciidoc: line 151: 59bcc5d1ed0aac1aa949f84d80a4fa1d.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_ranks" : {
            "percentile_ranks" : {
                "values" : [500, 600],
                "script" : {
                    "id": "my_script",
                    "params": {
                        "field": "load_time"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-rank-aggregation.asciidoc: line 187: 214d704d18485ab75ef53aa9c0524590.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_ranks" : {
            "percentile_ranks" : {
                "field" : "load_time",
                "values" : [500, 600],
                "hdr": { \<1>
                  "number_of_significant_value_digits" : 3 \<2>
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/percentile-rank-aggregation.asciidoc: line 219: 77f575b0cc37dd7a2415cbf6417d3148.adoc
[source,console]
----
GET latency/_search
{
    "size": 0,
    "aggs" : {
        "load_time_ranks" : {
            "percentile_ranks" : {
                "field" : "load_time",
                "values" : [500, 600],
                "missing": 10 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/scripted-metric-aggregation.asciidoc: line 9: 20600097aa51aa3386536bdc681e92b6.adoc
[source,console]
----
POST ledger/_search?size=0
{
    "query" : {
        "match_all" : {}
    },
    "aggs": {
        "profit": {
            "scripted_metric": {
                "init_script" : "state.transactions = []", \<1>
                "map_script" : "state.transactions.add(doc.type.value == 'sale' ? doc.amount.value : -1 * doc.amount.value)",
                "combine_script" : "double profit = 0; for (t in state.transactions) { profit += t } return profit",
                "reduce_script" : "double profit = 0; for (a in states) { profit += a } return profit"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/scripted-metric-aggregation.asciidoc: line 54: 129ce418d8dd1f71087678725a0df19f.adoc
[source,console]
----
POST ledger/_search?size=0
{
    "aggs": {
        "profit": {
            "scripted_metric": {
                "init_script" : {
                    "id": "my_init_script"
                },
                "map_script" : {
                    "id": "my_map_script"
                },
                "combine_script" : {
                    "id": "my_combine_script"
                },
                "params": {
                    "field": "amount" \<1>
                },
                "reduce_script" : {
                    "id": "my_reduce_script"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/scripted-metric-aggregation.asciidoc: line 149: 75e360d03fb416f0a65ca37c662c2e9c.adoc
[source,console]
----
PUT /transactions/_bulk?refresh
{"index":{"_id":1}}
{"type": "sale","amount": 80}
{"index":{"_id":2}}
{"type": "cost","amount": 10}
{"index":{"_id":3}}
{"type": "cost","amount": 30}
{"index":{"_id":4}}
{"type": "sale","amount": 130}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/stats-aggregation.asciidoc: line 11: 6f04f3c1afe94e03d26ff5966fd4b98d.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "grades_stats" : { "stats" : { "field" : "grade" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/stats-aggregation.asciidoc: line 50: 9ed80262680e67c629a08f6754a7c5c9.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "grades_stats" : {
             "stats" : {
                 "script" : {
                     "lang": "painless",
                     "source": "doc['grade'].value"
                 }
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/stats-aggregation.asciidoc: line 71: 2ba8575100b37b85d0052d46a00ce4cd.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "grades_stats" : {
            "stats" : {
                "script" : {
                    "id": "my_script",
                    "params" : {
                        "field" : "grade"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/stats-aggregation.asciidoc: line 96: 1341888a2677cf6e1db11e6cab2dd8ce.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "grades_stats" : {
            "stats" : {
                "field" : "grade",
                "script" : {
                    "lang": "painless",
                    "source": "_value * params.correction",
                    "params" : {
                        "correction" : 1.2
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/stats-aggregation.asciidoc: line 125: 7371dcfe4adb43996f4c26684318302b.adoc
[source,console]
----
POST /exams/_search?size=0
{
    "aggs" : {
        "grades_stats" : {
            "stats" : {
                "field" : "grade",
                "missing": 0 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/sum-aggregation.asciidoc: line 10: 43159621ffaa30dbfd60459a5e7b8e54.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "query" : {
        "constant_score" : {
            "filter" : {
                "match" : { "type" : "hat" }
            }
        }
    },
    "aggs" : {
        "hat_prices" : { "sum" : { "field" : "price" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/sum-aggregation.asciidoc: line 50: 4b5f2bd0db1a94614f4d2e46a5159bd2.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "query" : {
        "constant_score" : {
            "filter" : {
                "match" : { "type" : "hat" }
            }
        }
    },
    "aggs" : {
        "hat_prices" : {
            "sum" : {
                "script" : {
                   "source": "doc.price.value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/sum-aggregation.asciidoc: line 77: 49a4032ac0cbc413b47660bcf998ef5f.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "query" : {
        "constant_score" : {
            "filter" : {
                "match" : { "type" : "hat" }
            }
        }
    },
    "aggs" : {
        "hat_prices" : {
            "sum" : {
                "script" : {
                    "id": "my_script",
                    "params" : {
                        "field" : "price"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/sum-aggregation.asciidoc: line 110: 82a2031f77972b713f75ed05c4bd9815.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "query" : {
        "constant_score" : {
            "filter" : {
                "match" : { "type" : "hat" }
            }
        }
    },
    "aggs" : {
        "square_hats" : {
            "sum" : {
                "field" : "price",
                "script" : {
                    "source": "_value * _value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/sum-aggregation.asciidoc: line 143: a78c3f4389502fe2dbd1cd10a017d1ed.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "query" : {
        "constant_score" : {
            "filter" : {
                "match" : { "type" : "hat" }
            }
        }
    },
    "aggs" : {
        "hat_prices" : {
            "sum" : {
                "field" : "price",
                "missing": 100 \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/tophits-aggregation.asciidoc: line 36: 12b4b34f9958ed157ac2d812d612cda6.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs": {
        "top_tags": {
            "terms": {
                "field": "type",
                "size": 3
            },
            "aggs": {
                "top_sales_hits": {
                    "top_hits": {
                        "sort": [
                            {
                                "date": {
                                    "order": "desc"
                                }
                            }
                        ],
                        "_source": {
                            "includes": [ "date", "price" ]
                        },
                        "size" : 1
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/tophits-aggregation.asciidoc: line 189: 30db2702dd0071c72a090b8311d0db09.adoc
[source,console]
----
POST /sales/_search
{
  "query": {
    "match": {
      "body": "elections"
    }
  },
  "aggs": {
    "top_sites": {
      "terms": {
        "field": "domain",
        "order": {
          "top_hit": "desc"
        }
      },
      "aggs": {
        "top_tags_hits": {
          "top_hits": {}
        },
        "top_hit" : {
          "max": {
            "script": {
              "source": "_score"
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/tophits-aggregation.asciidoc: line 243: 2720c5e463876c415419c426697d15e4.adoc
[source,console]
----
PUT /sales
{
    "mappings": {
        "properties" : {
            "tags" : { "type" : "keyword" },
            "comments" : { \<1>
                "type" : "nested",
                "properties" : {
                    "username" : { "type" : "keyword" },
                    "comment" : { "type" : "text" }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/tophits-aggregation.asciidoc: line 266: 6ac67f7e30219d85fcc68b99459a39a4.adoc
[source,console]
----
PUT /sales/_doc/1?refresh
{
    "tags": ["car", "auto"],
    "comments": [
        {"username": "baddriver007", "comment": "This car could have better brakes"},
        {"username": "dr_who", "comment": "Where's the autopilot? Can't find it"},
        {"username": "ilovemotorbikes", "comment": "This car has two extra wheels"}
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/tophits-aggregation.asciidoc: line 283: f1b8612151a660264fb62dc6c74b19be.adoc
[source,console]
----
POST /sales/_search
{
    "query": {
        "term": { "tags": "car" }
    },
    "aggs": {
        "by_sale": {
            "nested" : {
                "path" : "comments"
            },
            "aggs": {
                "by_user": {
                    "terms": {
                        "field": "comments.username",
                        "size": 1
                    },
                    "aggs": {
                        "by_nested": {
                            "top_hits":{}
                        }
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/valuecount-aggregation.asciidoc: line 10: 5dd695679b5141d9142d3d30ba8d300a.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "types_count" : { "value_count" : { "field" : "type" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/valuecount-aggregation.asciidoc: line 44: 3722cb3705b6bc7f486969deace3dd83.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "type_count" : {
            "value_count" : {
                "script" : {
                    "source" : "doc['type'].value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/valuecount-aggregation.asciidoc: line 64: 213ab768f1b6a895e09403a0880e259a.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "types_count" : {
            "value_count" : {
                "script" : {
                    "id": "my_script",
                    "params" : {
                        "field" : "type"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/median-absolute-deviation-aggregation.asciidoc: line 28: 25ed47fcb890fcf8d8518ae067362d18.adoc
[source,console]
----
GET reviews/_search
{
  "size": 0,
  "aggs": {
    "review_average": {
      "avg": {
        "field": "rating"
      }
    },
    "review_variability": {
      "median_absolute_deviation": {
        "field": "rating" \<1>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/median-absolute-deviation-aggregation.asciidoc: line 88: 9d662fc9f943c287b7144f5e4e2ae358.adoc
[source,console]
----
GET reviews/_search
{
  "size": 0,
  "aggs": {
    "review_variability": {
      "median_absolute_deviation": {
        "field": "rating",
        "compression": 100
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/median-absolute-deviation-aggregation.asciidoc: line 118: bb964122f7d31b2f17c299d47ab3bdf3.adoc
[source,console]
----
GET reviews/_search
{
  "size": 0,
  "aggs": {
    "review_variability": {
      "median_absolute_deviation": {
        "script": {
          "lang": "painless",
          "source": "doc['rating'].value * params.scaleFactor",
          "params": {
            "scaleFactor": 2
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/median-absolute-deviation-aggregation.asciidoc: line 143: 920362adc347f4268b29751d638b2e87.adoc
[source,console]
----
GET reviews/_search
{
  "size": 0,
  "aggs": {
    "review_variability": {
      "median_absolute_deviation": {
        "script": {
          "id": "my_script",
          "params": {
            "field": "rating"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/metrics/median-absolute-deviation-aggregation.asciidoc: line 174: 87f854393d715aabf4d45e90a8eb74ce.adoc
[source,console]
----
GET reviews/_search
{
  "size": 0,
  "aggs": {
    "review_variability": {
      "median_absolute_deviation": {
        "field": "rating",
        "missing": 5
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/adjacency-matrix-aggregation.asciidoc: line 32: f88cdb3a962bb6f305f4a7ccc07bc0b0.adoc
[source,console]
----
PUT /emails/_bulk?refresh
{ "index" : { "_id" : 1 } }
{ "accounts" : ["hillary", "sidney"]}
{ "index" : { "_id" : 2 } }
{ "accounts" : ["hillary", "donald"]}
{ "index" : { "_id" : 3 } }
{ "accounts" : ["vladimir", "donald"]}

GET emails/_search
{
  "size": 0,
  "aggs" : {
    "interactions" : {
      "adjacency_matrix" : {
        "filters" : {
          "grpA" : { "terms" : { "accounts" : ["hillary", "sidney"] }},
          "grpB" : { "terms" : { "accounts" : ["donald", "mitt"] }},
          "grpC" : { "terms" : { "accounts" : ["vladimir", "nigel"] }}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/autodatehistogram-aggregation.asciidoc: line 14: 9f9123f67baff22429bca73f7cf48622.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "auto_date_histogram" : {
                "field" : "date",
                "buckets" : 10
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/autodatehistogram-aggregation.asciidoc: line 41: 941466b290eaa9a2685bbe32c73e887a.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "auto_date_histogram" : {
                "field" : "date",
                "buckets" : 5,
                "format" : "yyyy-MM-dd" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/autodatehistogram-aggregation.asciidoc: line 123: 64b6ca54baf9dba659887051de87440b.adoc
[source,console]
----
PUT my_index/log/1?refresh
{
  "date": "2015-10-01T00:30:00Z"
}

PUT my_index/log/2?refresh
{
  "date": "2015-10-01T01:30:00Z"
}

PUT my_index/log/3?refresh
{
  "date": "2015-10-01T02:30:00Z"
}

GET my_index/_search?size=0
{
  "aggs": {
    "by_day": {
      "auto_date_histogram": {
        "field":     "date",
        "buckets" : 3
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/autodatehistogram-aggregation.asciidoc: line 190: e16449c0f4eadb394761e9c2aff50fe6.adoc
[source,console]
----
GET my_index/_search?size=0
{
  "aggs": {
    "by_day": {
      "auto_date_histogram": {
        "field":     "date",
        "buckets" : 3,
        "time_zone": "-01:00"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/autodatehistogram-aggregation.asciidoc: line 277: 00abcf63bffec42e5d2c15011e989b37.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sale_date" : {
             "auto_date_histogram" : {
                 "field" : "date",
                 "buckets": 10,
                 "minimum_interval": "minute"
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/autodatehistogram-aggregation.asciidoc: line 301: 89fe7b404791770a2075f2870fd65c3e.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sale_date" : {
             "auto_date_histogram" : {
                 "field" : "date",
                 "buckets": 10,
                 "missing": "2000/01/01" \<1>
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/children-aggregation.asciidoc: line 13: 9399cbbd133ec2b7aad2820fa617ae3a.adoc
[source,console]
----
PUT child_example
{
  "mappings": {
    "properties": {
      "join": {
        "type": "join",
        "relations": {
          "question": "answer"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/children-aggregation.asciidoc: line 37: dfdf82b8d99436582f150117695190b3.adoc
[source,console]
----
PUT child_example/_doc/1
{
  "join": {
    "name": "question"
  },
  "body": "\<p>I have Windows 2003 server and i bought a new Windows 2008 server...",
  "title": "Whats the best way to file transfer my site from server to a newer one?",
  "tags": [
    "windows-server-2003",
    "windows-server-2008",
    "file-transfer"
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/children-aggregation.asciidoc: line 58: e9fe3b53b5b6e1ff9566b5237c0fa513.adoc
[source,console]
----
PUT child_example/_doc/2?routing=1
{
  "join": {
    "name": "answer",
    "parent": "1"
  },
  "owner": {
    "location": "Norfolk, United Kingdom",
    "display_name": "Sam",
    "id": 48
  },
  "body": "\<p>Unfortunately you're pretty much limited to FTP...",
  "creation_date": "2009-05-04T13:45:37.030"
}

PUT child_example/_doc/3?routing=1&refresh
{
  "join": {
    "name": "answer",
    "parent": "1"
  },
  "owner": {
    "location": "Norfolk, United Kingdom",
    "display_name": "Troll",
    "id": 49
  },
  "body": "\<p>Use Linux...",
  "creation_date": "2009-05-05T13:45:37.030"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/children-aggregation.asciidoc: line 95: d5132d34ae922fa8e898889b627a1405.adoc
[source,console]
----
POST child_example/_search?size=0
{
  "aggs": {
    "top-tags": {
      "terms": {
        "field": "tags.keyword",
        "size": 10
      },
      "aggs": {
        "to-answers": {
          "children": {
            "type" : "answer" \<1>
          },
          "aggs": {
            "top-names": {
              "terms": {
                "field": "owner.display_name.keyword",
                "size": 10
              }
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 116: 118c81b8561fd9a9ead388d7971fccd9.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    { "product": { "terms" : { "field": "product" } } }
                ]
            }
        }
     }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 135: d4d4cb1e761f72aa7cd408655dbcbeac.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    {
                        "product": {
                            "terms" : {
                                "script" : {
                                    "source": "doc['product'].value",
                                    "lang": "painless"
                                }
                            }
                        }
                    }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 170: 59d377892d4d912b216defa48e7befce.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    { "histo": { "histogram" : { "field": "price", "interval": 5 } } }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 189: a7ad889b26defd508889b288e076f05f.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    {
                        "histo": {
                            "histogram" : {
                                "interval": 5,
                                "script" : {
                                    "source": "doc['price'].value",
                                    "lang": "painless"
                                }
                            }
                        }
                    }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 222: 9361db99de15d1f18233a555777c2e1f.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    { "date": { "date_histogram" : { "field": "timestamp", "calendar_interval": "1d" } } }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 252: 2fb60a596d3d996c1329fb4c50955b89.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    {
                        "date": {
                            "date_histogram" : {
                                "field": "timestamp",
                                "calendar_interval": "1d",
                                "format": "yyyy-MM-dd" \<1>
                            }
                        }
                    }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 295: 5d9aef8cd8d324049e34bf96e38814ee.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    { "date": { "date_histogram": { "field": "timestamp", "calendar_interval": "1d" } } },
                    { "product": { "terms": {"field": "product" } } }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 318: ce182c31ce9ffb336dd26ee9899da3e7.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    { "shop": { "terms": {"field": "shop" } } },
                    { "product": { "terms": { "field": "product" } } },
                    { "date": { "date_histogram": { "field": "timestamp", "calendar_interval": "1d" } } }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 348: 9837cab0afe4bae8d11e42411cb812ad.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    { "date": { "date_histogram": { "field": "timestamp", "calendar_interval": "1d", "order": "desc" } } },
                    { "product": { "terms": {"field": "product", "order": "asc" } } }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 375: af056fa2f099bbf339d07b6d11a46210.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "sources" : [
                    { "product_name": { "terms" : { "field": "product", "missing_bucket": true } } }
                ]
            }
        }
     }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 415: b29c0503d688299dd1eb87ff0fe69415.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "size": 2,
                "sources" : [
                    { "date": { "date_histogram": { "field": "timestamp", "calendar_interval": "1d" } } },
                    { "product": { "terms": {"field": "product" } } }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 481: b6dc7bb2713d7fe2eb6e480dee2e458d.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                "size": 2,
                 "sources" : [
                    { "date": { "date_histogram": { "field": "timestamp", "calendar_interval": "1d", "order": "desc" } } },
                    { "product": { "terms": {"field": "product", "order": "asc" } } }
                ],
                "after": { "date": 1494288000000, "product": "mad max" } \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/composite-aggregation.asciidoc: line 511: e4979ca30ac53864edb4871a23ad73b3.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "my_buckets": {
            "composite" : {
                 "sources" : [
                    { "date": { "date_histogram": { "field": "timestamp", "calendar_interval": "1d", "order": "desc" } } },
                    { "product": { "terms": {"field": "product" } } }
                ]
            },
            "aggregations": {
                "the_avg": {
                    "avg": { "field": "price" }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 107: b789292f9cf63ce912e058c46d90ce20.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 127: 73e5c88ad1488b213fb278ee1cb42289.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "2d"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 203: 09ecba5814d71e4c44468575eada9878.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "fixed_interval" : "30d"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 222: 2bb2339ac055337abf753bddb7771659.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "fixed_interval" : "2w"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 294: 8a355eb25d2a01ba62dc1a22dd46f46f.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "1M",
                "format" : "yyyy-MM-dd" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 357: 70f0aa5853697e265ef3b1df72940951.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "date": "2015-10-01T00:30:00Z"
}

PUT my_index/_doc/2?refresh
{
  "date": "2015-10-01T01:30:00Z"
}

GET my_index/_search?size=0
{
  "aggs": {
    "by_day": {
      "date_histogram": {
        "field":     "date",
        "calendar_interval":  "day"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 409: 8de3206f80e18185a5ad6481f4c2ee07.adoc
[source,console]
----
GET my_index/_search?size=0
{
  "aggs": {
    "by_day": {
      "date_histogram": {
        "field":     "date",
        "calendar_interval":  "day",
        "time_zone": "-01:00"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 478: aa6bfe54e2436eb668091fe31c2fbf4d.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "date": "2015-10-01T05:30:00Z"
}

PUT my_index/_doc/2?refresh
{
  "date": "2015-10-01T06:30:00Z"
}

GET my_index/_search?size=0
{
  "aggs": {
    "by_day": {
      "date_histogram": {
        "field":     "date",
        "calendar_interval":  "day",
        "offset":    "+6h"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 540: 9524a9b7373fa4eb2905183b0e806962.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sales_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "1M",
                "format" : "yyyy-MM-dd",
                "keyed": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 610: 39a6a038c4b551022afe83de0523634e.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "sale_date" : {
             "date_histogram" : {
                 "field" : "date",
                 "calendar_interval": "year",
                 "missing": "2000/01/01" \<1>
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/datehistogram-aggregation.asciidoc: line 644: 6faf10a73f7d5fffbcb037bdb2cbaff8.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs": {
        "dayOfWeek": {
            "terms": {
                "script": {
                    "lang": "painless",
                    "source": "doc['date'].value.dayOfWeekEnum.value"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/daterange-aggregation.asciidoc: line 16: a27c42ae4897ee6d2f6be3ddf80a8b3e.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs": {
        "range": {
            "date_range": {
                "field": "date",
                "format": "MM-yyyy",
                "ranges": [
                    { "to": "now-10M/M" }, \<1>
                    { "from": "now-10M/M" } \<2>
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/daterange-aggregation.asciidoc: line 79: a6ef8cd8c8218d547727ffc5485bfbd7.adoc
[source,console]
----
POST /sales/_search?size=0
{
   "aggs": {
       "range": {
           "date_range": {
               "field": "date",
               "missing": "1976/11/30",
               "ranges": [
                  {
                    "key": "Older",
                    "to": "2016/02/01"
                  }, \<1>
                  {
                    "key": "Newer",
                    "from": "2016/02/01",
                    "to" : "now/d"
                  }
              ]
          }
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/daterange-aggregation.asciidoc: line 271: 901d66919e584515717bf78ab5ca2cbb.adoc
[source,console]
----
POST /sales/_search?size=0
{
   "aggs": {
       "range": {
           "date_range": {
               "field": "date",
               "time_zone": "CET",
               "ranges": [
                  { "to": "2016/02/01" }, \<1>
                  { "from": "2016/02/01", "to" : "now/d" }, \<2>
                  { "from": "now/d" }
              ]
          }
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/daterange-aggregation.asciidoc: line 301: 83721157085b4e5a8a5ed3ede88b3690.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs": {
        "range": {
            "date_range": {
                "field": "date",
                "format": "MM-yyy",
                "ranges": [
                    { "to": "now-10M/M" },
                    { "from": "now-10M/M" }
                ],
                "keyed": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/daterange-aggregation.asciidoc: line 351: 2d1c675b3cb93119219a13db93262c1e.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs": {
        "range": {
            "date_range": {
                "field": "date",
                "format": "MM-yyy",
                "ranges": [
                    { "from": "01-2015",  "to": "03-2015", "key": "quarter_01" },
                    { "from": "03-2015", "to": "06-2015", "key": "quarter_02" }
                ],
                "keyed": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/diversified-sampler-aggregation.asciidoc: line 30: 3344c3478f1e8bbbef683757638a34f4.adoc
[source,console]
----
POST /stackoverflow/_search?size=0
{
    "query": {
        "query_string": {
            "query": "tags:elasticsearch"
        }
    },
    "aggs": {
        "my_unbiased_sample": {
            "diversified_sampler": {
                "shard_size": 200,
                "field" : "author"
            },
            "aggs": {
                "keywords": {
                    "significant_terms": {
                        "field": "tags",
                        "exclude": ["elasticsearch"]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/diversified-sampler-aggregation.asciidoc: line 96: 07afce825c09de17a3d73a02b17a0a97.adoc
[source,console]
----
POST /stackoverflow/_search?size=0
{
    "query": {
        "query_string": {
            "query": "tags:kibana"
        }
    },
    "aggs": {
        "my_unbiased_sample": {
            "diversified_sampler": {
                "shard_size": 200,
                "max_docs_per_value" : 3,
                "script" : {
                    "lang": "painless",
                    "source": "doc['tags'].hashCode()"
                }
            },
            "aggs": {
                "keywords": {
                    "significant_terms": {
                        "field": "tags",
                        "exclude": ["kibana"]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/filter-aggregation.asciidoc: line 9: b93ed4ef309819734f0eeea82e8b0f1f.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "t_shirts" : {
            "filter" : { "term": { "type": "t-shirt" } },
            "aggs" : {
                "avg_price" : { "avg" : { "field" : "price" } }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/filters-aggregation.asciidoc: line 11: 188e6208cccb13027a5c1c95440841ee.adoc
[source,console]
----
PUT /logs/_bulk?refresh
{ "index" : { "_id" : 1 } }
{ "body" : "warning: page could not be rendered" }
{ "index" : { "_id" : 2 } }
{ "body" : "authentication error" }
{ "index" : { "_id" : 3 } }
{ "body" : "warning: connection timed out" }

GET logs/_search
{
  "size": 0,
  "aggs" : {
    "messages" : {
      "filters" : {
        "filters" : {
          "errors" :   { "match" : { "body" : "error"   }},
          "warnings" : { "match" : { "body" : "warning" }}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/filters-aggregation.asciidoc: line 74: 3cd2f7f9096a8e8180f27b6c30e71840.adoc
[source,console]
----
GET logs/_search
{
  "size": 0,
  "aggs" : {
    "messages" : {
      "filters" : {
        "filters" : [
          { "match" : { "body" : "error"   }},
          { "match" : { "body" : "warning" }}
        ]
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/filters-aggregation.asciidoc: line 137: 21bb03ca9123de3237c1c76934f9f172.adoc
[source,console]
----
PUT logs/_doc/4?refresh
{
  "body": "info: user Bob logged out"
}

GET logs/_search
{
  "size": 0,
  "aggs" : {
    "messages" : {
      "filters" : {
        "other_bucket_key": "other_messages",
        "filters" : {
          "errors" :   { "match" : { "body" : "error"   }},
          "warnings" : { "match" : { "body" : "warning" }}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geodistance-aggregation.asciidoc: line 7: 9bf956f9d3f27bb7b4e5a03af84d5da5.adoc
[source,console]
----
PUT /museums
{
    "mappings": {
        "properties": {
            "location": {
                "type": "geo_point"
            }
        }
    }
}

POST /museums/_bulk?refresh
{"index":{"_id":1}}
{"location": "52.374081,4.912350", "name": "NEMO Science Museum"}
{"index":{"_id":2}}
{"location": "52.369219,4.901618", "name": "Museum Het Rembrandthuis"}
{"index":{"_id":3}}
{"location": "52.371667,4.914722", "name": "Nederlands Scheepvaartmuseum"}
{"index":{"_id":4}}
{"location": "51.222900,4.405200", "name": "Letterenhuis"}
{"index":{"_id":5}}
{"location": "48.861111,2.336389", "name": "Musée du Louvre"}
{"index":{"_id":6}}
{"location": "48.860000,2.327000", "name": "Musée d'Orsay"}

POST /museums/_search?size=0
{
    "aggs" : {
        "rings_around_amsterdam" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "ranges" : [
                    { "to" : 100000 },
                    { "from" : 100000, "to" : 300000 },
                    { "from" : 300000 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geodistance-aggregation.asciidoc: line 94: c78b80d080a58090583228421ac1553d.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggs" : {
        "rings" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "unit" : "km", \<1>
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 300 },
                    { "from" : 300 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geodistance-aggregation.asciidoc: line 121: a5736ad3638c238e3b15c9fdaa1f29f7.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggs" : {
        "rings" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "unit" : "km",
                "distance_type" : "plane",
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 300 },
                    { "from" : 300 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geodistance-aggregation.asciidoc: line 149: 6b31f435607617d96b1dff3bf10c9d8c.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggs" : {
        "rings_around_amsterdam" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "ranges" : [
                    { "to" : 100000 },
                    { "from" : 100000, "to" : 300000 },
                    { "from" : 300000 }
                ],
                "keyed": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geodistance-aggregation.asciidoc: line 204: c5afc3d716fdf8c0eefa4732e8a4b3ee.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggs" : {
        "rings_around_amsterdam" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "ranges" : [
                    { "to" : 100000, "key": "first_ring" },
                    { "from" : 100000, "to" : 300000, "key": "second_ring" },
                    { "from" : 300000, "key": "third_ring" }
                ],
                "keyed": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geohashgrid-aggregation.asciidoc: line 21: 71af0fec59d37477c850d47730d3f286.adoc
[source,console]
----
PUT /museums
{
    "mappings": {
          "properties": {
              "location": {
                  "type": "geo_point"
              }
          }
    }
}

POST /museums/_bulk?refresh
{"index":{"_id":1}}
{"location": "52.374081,4.912350", "name": "NEMO Science Museum"}
{"index":{"_id":2}}
{"location": "52.369219,4.901618", "name": "Museum Het Rembrandthuis"}
{"index":{"_id":3}}
{"location": "52.371667,4.914722", "name": "Nederlands Scheepvaartmuseum"}
{"index":{"_id":4}}
{"location": "51.222900,4.405200", "name": "Letterenhuis"}
{"index":{"_id":5}}
{"location": "48.861111,2.336389", "name": "Musée du Louvre"}
{"index":{"_id":6}}
{"location": "48.860000,2.327000", "name": "Musée d'Orsay"}

POST /museums/_search?size=0
{
    "aggregations" : {
        "large-grid" : {
            "geohash_grid" : {
                "field" : "location",
                "precision" : 3
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geohashgrid-aggregation.asciidoc: line 94: 9f0c6a8c6381bb0cb81a3070dd2bf2f2.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggregations" : {
        "zoomed-in" : {
            "filter" : {
                "geo_bounding_box" : {
                    "location" : {
                        "top_left" : "52.4, 4.9",
                        "bottom_right" : "52.3, 5.0"
                    }
                }
            },
            "aggregations":{
                "zoom1":{
                    "geohash_grid" : {
                        "field": "location",
                        "precision": 8
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geohashgrid-aggregation.asciidoc: line 126: 36f61e038014f92466cd83d7b007e16b.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggregations" : {
        "zoomed-in" : {
            "filter" : {
                "geo_bounding_box" : {
                    "location" : {
                        "top_left" : "u17",
                        "bottom_right" : "u17"
                    }
                }
            },
            "aggregations":{
                "zoom1":{
                    "geohash_grid" : {
                        "field": "location",
                        "precision": 8
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geotilegrid-aggregation.asciidoc: line 34: 86f1e66bc101b3f22dc84d2aa172fd75.adoc
[source,console]
----
PUT /museums
{
    "mappings": {
          "properties": {
              "location": {
                  "type": "geo_point"
              }
          }
    }
}

POST /museums/_bulk?refresh
{"index":{"_id":1}}
{"location": "52.374081,4.912350", "name": "NEMO Science Museum"}
{"index":{"_id":2}}
{"location": "52.369219,4.901618", "name": "Museum Het Rembrandthuis"}
{"index":{"_id":3}}
{"location": "52.371667,4.914722", "name": "Nederlands Scheepvaartmuseum"}
{"index":{"_id":4}}
{"location": "51.222900,4.405200", "name": "Letterenhuis"}
{"index":{"_id":5}}
{"location": "48.861111,2.336389", "name": "Musée du Louvre"}
{"index":{"_id":6}}
{"location": "48.860000,2.327000", "name": "Musée d'Orsay"}

POST /museums/_search?size=0
{
    "aggregations" : {
        "large-grid" : {
            "geotile_grid" : {
                "field" : "location",
                "precision" : 8
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/geotilegrid-aggregation.asciidoc: line 110: 57705815ad6bd50d91e58153ae75d3ca.adoc
[source,console]
----
POST /museums/_search?size=0
{
    "aggregations" : {
        "zoomed-in" : {
            "filter" : {
                "geo_bounding_box" : {
                    "location" : {
                        "top_left" : "52.4, 4.9",
                        "bottom_right" : "52.3, 5.0"
                    }
                }
            },
            "aggregations":{
                "zoom1":{
                    "geotile_grid" : {
                        "field": "location",
                        "precision": 22
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/global-aggregation.asciidoc: line 15: d209f2447584a37e7f1480912b40a52d.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "query" : {
        "match" : { "type" : "t-shirt" }
    },
    "aggs" : {
        "all_products" : {
            "global" : {}, \<1>
            "aggs" : { \<2>
                "avg_price" : { "avg" : { "field" : "price" } }
            }
        },
        "t_shirts": { "avg" : { "field" : "price" } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/histogram-aggregation.asciidoc: line 23: 322e1a8842fc5924b972a9a32c29c17a.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/histogram-aggregation.asciidoc: line 82: 0003e4064d004a341c193ddd5d82a07f.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "min_doc_count" : 1
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/histogram-aggregation.asciidoc: line 158: c72bd866a7e21907fa71f1067371db55.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "query" : {
        "constant_score" : { "filter": { "range" : { "price" : { "to" : "500" } } } }
    },
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "extended_bounds" : {
                    "min" : 0,
                    "max" : 500
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/histogram-aggregation.asciidoc: line 201: e0bba0f00a589933499493390a9a0517.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "keyed" : true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/histogram-aggregation.asciidoc: line 261: 271c55d9a421dbc794caa0ebaead95e3.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "quantity" : {
             "histogram" : {
                 "field" : "quantity",
                 "interval": 10,
                 "missing": 0 \<1>
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/iprange-aggregation.asciidoc: line 9: 01cc705f6074ab637cfbb9f92cf44e44.adoc
[source,console]
----
GET /ip_addresses/_search
{
    "size": 10,
    "aggs" : {
        "ip_ranges" : {
            "ip_range" : {
                "field" : "ip",
                "ranges" : [
                    { "to" : "10.0.0.5" },
                    { "from" : "10.0.0.5" }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/iprange-aggregation.asciidoc: line 59: 9f4ba6565d80e0964e177eaac9fb0614.adoc
[source,console]
----
GET /ip_addresses/_search
{
    "size": 0,
    "aggs" : {
        "ip_ranges" : {
            "ip_range" : {
                "field" : "ip",
                "ranges" : [
                    { "mask" : "10.0.0.0/25" },
                    { "mask" : "10.0.0.127/25" }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/iprange-aggregation.asciidoc: line 113: c4db73a276175d57c6a9a0387e728028.adoc
[source,console]
----
GET /ip_addresses/_search
{
    "size": 0,
    "aggs": {
        "ip_ranges": {
            "ip_range": {
                "field": "ip",
                "ranges": [
                    { "to" : "10.0.0.5" },
                    { "from" : "10.0.0.5" }
                ],
                "keyed": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/iprange-aggregation.asciidoc: line 162: fa8ee2094af36e7ec02233a4c7b008bc.adoc
[source,console]
----
GET /ip_addresses/_search
{
    "size": 0,
    "aggs": {
        "ip_ranges": {
            "ip_range": {
                "field": "ip",
                "ranges": [
                    { "key": "infinity", "to" : "10.0.0.5" },
                    { "key": "and-beyond", "from" : "10.0.0.5" }
                ],
                "keyed": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/missing-aggregation.asciidoc: line 9: 09dd80a4b937315d4a1aa629b22f9332.adoc
[source,console]
----
POST /sales/_search?size=0
{
    "aggs" : {
        "products_without_a_price" : {
            "missing" : { "field" : "price" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/nested-aggregation.asciidoc: line 10: 53e6007f451ddf30074b3e26a4afdaad.adoc
[source,console]
----
PUT /index
{
    "mappings": {
        "properties" : {
            "resellers" : { \<1>
                "type" : "nested",
                "properties" : {
                    "name" : { "type" : "text" },
                    "price" : { "type" : "double" }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/nested-aggregation.asciidoc: line 33: e3d2300ad78b2d20c3a501a73db6bcac.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match" : { "name" : "led tv" }
    },
    "aggs" : {
        "resellers" : {
            "nested" : {
                "path" : "resellers"
            },
            "aggs" : {
                "min_price" : { "min" : { "field" : "resellers.price" } }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/parent-aggregation.asciidoc: line 13: 1db086021e83205b6eab3b7765911cc2.adoc
[source,console]
----
PUT parent_example
{
  "mappings": {
     "properties": {
       "join": {
         "type": "join",
         "relations": {
           "question": "answer"
         }
       }
     }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/parent-aggregation.asciidoc: line 37: c9afa715021f2e6450e72ac73271960c.adoc
[source,console]
----
PUT parent_example/_doc/1
{
  "join": {
    "name": "question"
  },
  "body": "\<p>I have Windows 2003 server and i bought a new Windows 2008 server...",
  "title": "Whats the best way to file transfer my site from server to a newer one?",
  "tags": [
    "windows-server-2003",
    "windows-server-2008",
    "file-transfer"
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/parent-aggregation.asciidoc: line 58: d8310e5606c61e7a6e64a90838b1a830.adoc
[source,console]
----
PUT parent_example/_doc/2?routing=1
{
  "join": {
    "name": "answer",
    "parent": "1"
  },
  "owner": {
    "location": "Norfolk, United Kingdom",
    "display_name": "Sam",
    "id": 48
  },
  "body": "\<p>Unfortunately you're pretty much limited to FTP...",
  "creation_date": "2009-05-04T13:45:37.030"
}

PUT parent_example/_doc/3?routing=1&refresh
{
  "join": {
    "name": "answer",
    "parent": "1"
  },
  "owner": {
    "location": "Norfolk, United Kingdom",
    "display_name": "Troll",
    "id": 49
  },
  "body": "\<p>Use Linux...",
  "creation_date": "2009-05-05T13:45:37.030"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/parent-aggregation.asciidoc: line 95: 686bc640b877de845c46bef372a9866c.adoc
[source,console]
----
POST parent_example/_search?size=0
{
  "aggs": {
    "top-names": {
      "terms": {
        "field": "owner.display_name.keyword",
        "size": 10
      },
      "aggs": {
        "to-questions": {
          "parent": {
            "type" : "answer" \<1>
          },
          "aggs": {
            "top-tags": {
              "terms": {
                "field": "tags.keyword",
                "size": 10
              }
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 10: e84a496049274a0fed24e319da7a864c.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "ranges" : [
                    { "to" : 100.0 },
                    { "from" : 100.0, "to" : 200.0 },
                    { "from" : 200.0 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 68: d637c754aec195a1df39cafca49cbe7e.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "keyed" : true,
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 200 },
                    { "from" : 200 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 122: 4d147b4a4dabef9b0a8a13cbe8174e09.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "keyed" : true,
                "ranges" : [
                    { "key" : "cheap", "to" : 100 },
                    { "key" : "average", "from" : 100, "to" : 200 },
                    { "key" : "expensive", "from" : 200 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 181: bdf31f63d0941a4183ceae1cc2342c39.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "script" : {
                    "lang": "painless",
                    "source": "doc['price'].value"
                },
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 200 },
                    { "from" : 200 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 206: 4c9c453c92431a05b413bfc0163104b4.adoc
[source,console]
----
POST /_scripts/convert_currency
{
  "script": {
    "lang": "painless",
    "source": "doc[params.field].value * params.conversion_rate"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 221: 7a6d758654eecbc3a1a76744b4de0a23.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "script" : {
                    "id": "convert_currency", \<1>
                    "params": { \<2>
                        "field": "price",
                        "conversion_rate": 0.835526591
                    }
                },
                "ranges" : [
                    { "from" : 0, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 282: 022956b81fa70e72b56c66be16d0e982.adoc
[source,console]
----
GET /sales/_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "script" : {
                    "source": "_value * params.conversion_rate",
                    "params" : {
                        "conversion_rate" : 0.8
                    }
                },
                "ranges" : [
                    { "to" : 35 },
                    { "from" : 35, "to" : 70 },
                    { "from" : 70 }
                ]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 313: 3b52f4f7ea4abfa6db6bf54199b15f53.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 200 },
                    { "from" : 200 }
                ]
            },
            "aggs" : {
                "price_stats" : {
                    "stats" : { "field" : "price" }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/range-aggregation.asciidoc: line 395: 4547c455375eeda5ad9f74b40d4fa61b.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 200 },
                    { "from" : 200 }
                ]
            },
            "aggs" : {
                "price_stats" : {
                    "stats" : {} \<1>
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/rare-terms-aggregation.asciidoc: line 89: 91bbb85bc6add315fc9a044d8bcfec8a.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "rare_terms" : {
                "field" : "genre"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/rare-terms-aggregation.asciidoc: line 128: 0fa84243cd275a885298602aa8b4415f.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "rare_terms" : {
                "field" : "genre",
                "max_doc_count": 2
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/rare-terms-aggregation.asciidoc: line 279: b7207f557d5481db52d5df1aa0dae982.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "rare_terms" : {
                "field" : "genre",
                "include" : "swi*",
                "exclude" : "electro*"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/rare-terms-aggregation.asciidoc: line 308: dea7ef16acd6d148a20876630a010522.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
             "rare_terms" : {
                 "field" : "genre",
                 "include" : ["swing", "rock"],
                 "exclude" : ["jazz"]
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/rare-terms-aggregation.asciidoc: line 332: 2eea6157a9fbc54a8987e5c1a4f14bbe.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
             "rare_terms" : {
                 "field" : "genre",
                 "missing": "N/A" \<1>
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/reverse-nested-aggregation.asciidoc: line 19: 817891bd13da04e5981a797247601145.adoc
[source,console]
----
PUT /issues
{
    "mappings": {
         "properties" : {
             "tags" : { "type" : "keyword" },
             "comments" : { \<1>
                 "type" : "nested",
                 "properties" : {
                     "username" : { "type" : "keyword" },
                     "comment" : { "type" : "text" }
                 }
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/reverse-nested-aggregation.asciidoc: line 55: aee26dd62fbb6d614a0798f3344c0598.adoc
[source,console]
----
GET /issues/_search
{
  "query": {
    "match_all": {}
  },
  "aggs": {
    "comments": {
      "nested": {
        "path": "comments"
      },
      "aggs": {
        "top_usernames": {
          "terms": {
            "field": "comments.username"
          },
          "aggs": {
            "comment_to_issue": {
              "reverse_nested": {}, \<1>
              "aggs": {
                "top_tags_per_comment": {
                  "terms": {
                    "field": "tags"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/sampler-aggregation.asciidoc: line 19: 28035a0e2a874f1b6739badf82a0ecc6.adoc
[source,console]
----
POST /stackoverflow/_search?size=0
{
    "query": {
        "query_string": {
            "query": "tags:kibana OR tags:javascript"
        }
    },
    "aggs": {
        "sample": {
            "sampler": {
                "shard_size": 200
            },
            "aggs": {
                "keywords": {
                    "significant_terms": {
                        "field": "tags",
                        "exclude": ["kibana", "javascript"]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/sampler-aggregation.asciidoc: line 89: 279f7af39b62c7d278f9f10b1f107dc0.adoc
[source,console]
----
POST /stackoverflow/_search?size=0
{
    "query": {
        "query_string": {
            "query": "tags:kibana OR tags:javascript"
        }
    },
    "aggs": {
             "low_quality_keywords": {
                "significant_terms": {
                    "field": "tags",
                    "size": 3,
                    "exclude":["kibana", "javascript"]
                }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significantterms-aggregation.asciidoc: line 68: 290b845e59368e8aa8d1a56d7379afd0.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "terms" : {"force" : [ "British Transport Police" ]}
    },
    "aggregations" : {
        "significant_crime_types" : {
            "significant_terms" : { "field" : "crime_type" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significantterms-aggregation.asciidoc: line 129: b2af9784f8530a363ac6e9f95b39677d.adoc
[source,console]
----
GET /_search
{
    "aggregations": {
        "forces": {
            "terms": {"field": "force"},
            "aggregations": {
                "significant_crime_types": {
                    "significant_terms": {"field": "crime_type"}
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significantterms-aggregation.asciidoc: line 207: 0868d8ac2fb5351e633184f897ee6866.adoc
[source,console]
----
GET /_search
{
    "aggs": {
        "hotspots": {
            "geohash_grid": {
                "field": "location",
                "precision": 5
            },
            "aggs": {
                "significant_crime_types": {
                    "significant_terms": {"field": "crime_type"}
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significantterms-aggregation.asciidoc: line 468: 09d4a753140ee5a9ab9f4fc09047b588.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "tags" : {
            "significant_terms" : {
                "field" : "tag",
                "min_doc_count": 10
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significantterms-aggregation.asciidoc: line 511: 3fdaac87eb741a79f747633b5065323a.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match" : {
            "city" : "madrid"
        }
    },
    "aggs" : {
        "tags" : {
            "significant_terms" : {
                "field" : "tag",
                "background_filter": {
                	"term" : { "text" : "spain"}
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significantterms-aggregation.asciidoc: line 570: 11a21cd0b9d31da7eda77c9384a29208.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "tags" : {
             "significant_terms" : {
                 "field" : "tags",
                 "execution_hint": "map" \<1>
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significanttext-aggregation.asciidoc: line 36: 68f0c7c77b65bfdded348bbd397831b7.adoc
[source,console]
----
GET news/_search
{
    "query" : {
        "match" : {"content" : "Bird flu"}
    },
    "aggregations" : {
        "my_sample" : {
            "sampler" : {
                "shard_size" : 100
            },
            "aggregations": {
                "keywords" : {
                    "significant_text" : { "field" : "content" }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significanttext-aggregation.asciidoc: line 151: d44ecc69090c0b2bc08a6cbc2e3467c5.adoc
[source,console]
----
GET news/_search
{
  "query": {
    "simple_query_string": {
      "query": "+elasticsearch  +pozmantier"
    }
  },
  "_source": [
    "title",
    "source"
  ],
  "highlight": {
    "fields": {
      "content": {}
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significanttext-aggregation.asciidoc: line 219: 805f5550b90e75aa5cc82b90d8c6c242.adoc
[source,console]
----
GET news/_search
{
  "query": {
    "match": {
      "content": "elasticsearch"
    }
  },
  "aggs": {
    "sample": {
      "sampler": {
        "shard_size": 100
      },
      "aggs": {
        "keywords": {
          "significant_text": {
            "field": "content",
            "filter_duplicate_text": true
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significanttext-aggregation.asciidoc: line 422: 5f4cab20671ebac9233812f9e35d9c8b.adoc
[source,console]
----
GET news/_search
{
    "query" : {
        "match" : {
            "content" : "madrid"
        }
    },
    "aggs" : {
        "tags" : {
            "significant_text" : {
                "field" : "content",
                "background_filter": {
                    "term" : { "content" : "spain"}
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/significanttext-aggregation.asciidoc: line 461: b3e6d6f7f6d65d1efb60ca7503a20b16.adoc
[source,console]
----
GET news/_search
{
    "query" : {
        "match" : {
            "custom_all" : "elasticsearch"
        }
    },
    "aggs" : {
        "tags" : {
            "significant_text" : {
                "field" : "custom_all",
                "source_fields": ["content" , "title"]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 57: 9a8995fd31351045d99c78e40444c8ea.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : { "field" : "genre" } \<1>
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 134: d50a3835bf5795ac73e58906a3413544.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "products" : {
            "terms" : {
                "field" : "product",
                "size" : 5
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 264: 35e8da9410b8432cf4095f2541ad7b1d.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "products" : {
            "terms" : {
                "field" : "product",
                "size" : 5,
                "show_term_doc_count_error": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 342: 6a4679531e64c492fce16dc12de6dcb0.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : {
                "field" : "genre",
                "order" : { "_count" : "asc" }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 360: 93f1bdd72e79827dcf9a34efa02fd977.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : {
                "field" : "genre",
                "order" : { "_key" : "asc" }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 380: 71b5b2ba9557d0f296ff2de91727d2f6.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : {
                "field" : "genre",
                "order" : { "max_play_count" : "desc" }
            },
            "aggs" : {
                "max_play_count" : { "max" : { "field" : "play_count" } }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 401: 34efeade38445b2834749ced59782e25.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : {
                "field" : "genre",
                "order" : { "playback_stats.max" : "desc" }
            },
            "aggs" : {
                "playback_stats" : { "stats" : { "field" : "play_count" } }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 448: dc15e2373e5ecbe09b4ea0858eb63d47.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "countries" : {
            "terms" : {
                "field" : "artist.country",
                "order" : { "rock>playback_stats.avg" : "desc" }
            },
            "aggs" : {
                "rock" : {
                    "filter" : { "term" : { "genre" :  "rock" }},
                    "aggs" : {
                        "playback_stats" : { "stats" : { "field" : "play_count" }}
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 476: 028f6d6ac2594e20b78b8a8f8cbad49d.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "countries" : {
            "terms" : {
                "field" : "artist.country",
                "order" : [ { "rock>playback_stats.avg" : "desc" }, { "_count" : "desc" } ]
            },
            "aggs" : {
                "rock" : {
                    "filter" : { "term" : { "genre" : "rock" }},
                    "aggs" : {
                        "playback_stats" : { "stats" : { "field" : "play_count" }}
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 510: 527324766814561b75aaee853ede49a7.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "tags" : {
            "terms" : {
                "field" : "tags",
                "min_doc_count": 10
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 552: 033778305d52746f5ce0a2a922c8e521.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : {
                "script" : {
                    "source": "doc['genre'].value",
                    "lang": "painless"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 588: 4646764bf09911fee7d58630c72d3137.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : {
                "script" : {
                    "id": "my_script",
                    "params": {
                        "field": "genre"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 611: a49169b4622918992411fab4ec48191b.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "genres" : {
            "terms" : {
                "field" : "genre",
                "script" : {
                    "source" : "'Genre: ' +_value",
                    "lang" : "painless"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 638: 0afaf1cad692e6201aa574c8feb6e622.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "tags" : {
            "terms" : {
                "field" : "tags",
                "include" : ".*sport.*",
                "exclude" : "water_.*"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 667: 98b121bf47cebd85671a2cb519688d28.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "JapaneseCars" : {
             "terms" : {
                 "field" : "make",
                 "include" : ["mazda", "honda"]
             }
         },
        "ActiveCarManufacturers" : {
             "terms" : {
                 "field" : "make",
                 "exclude" : ["rover", "jensen"]
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 697: 5d9d7b84e2fec7ecd832145cbb951cf1.adoc
[source,console]
----
GET /_search
{
   "size": 0,
   "aggs": {
      "expired_sessions": {
         "terms": {
            "field": "account_id",
            "include": {
               "partition": 0,
               "num_partitions": 20
            },
            "size": 10000,
            "order": {
               "last_access": "asc"
            }
         },
         "aggs": {
            "last_access": {
               "max": {
                  "field": "access_date"
               }
            }
         }
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 790: 7f28f8ae8fcdbd807dadde0b5b007a6d.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "actors" : {
             "terms" : {
                 "field" : "actors",
                 "size" : 10
             },
            "aggs" : {
                "costars" : {
                     "terms" : {
                         "field" : "actors",
                         "size" : 5
                     }
                 }
            }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 822: cd5bc5bf7cd58d7b1492c9c298b345f6.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "actors" : {
             "terms" : {
                 "field" : "actors",
                 "size" : 10,
                 "collect_mode" : "breadth_first" \<1>
             },
            "aggs" : {
                "costars" : {
                     "terms" : {
                         "field" : "actors",
                         "size" : 5
                     }
                 }
            }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 874: 774d715155cd13713e6e327adf6ce328.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "tags" : {
             "terms" : {
                 "field" : "tags",
                 "execution_hint": "map" \<1>
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/bucket/terms-aggregation.asciidoc: line 900: f085fb032dae56a3b104ab874eaea2ad.adoc
[source,console]
----
GET /_search
{
    "aggs" : {
        "tags" : {
             "terms" : {
                 "field" : "tags",
                 "missing": "N/A" \<1>
             }
         }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline.asciidoc: line 54: ec20b1c236955a545476eeeea747d9de.adoc
[source,console]
----
POST /_search
{
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"timestamp",
                "calendar_interval":"day"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "lemmings" } \<1>
                },
                "the_deriv":{
                    "derivative":{ "buckets_path": "the_sum" } \<2>
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline.asciidoc: line 84: 11be7655fdafcf4c1454a0e9ad8ddf63.adoc
[source,console]
----
POST /_search
{
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                }
            }
        },
        "max_monthly_sales": {
            "max_bucket": {
                "buckets_path": "sales_per_month>sales" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline.asciidoc: line 119: 88a6b6f721b91f0919127a34ee2fbe0e.adoc
[source,console]
----
POST /_search
{
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sale_type": {
                    "terms": {
                        "field": "type"
                    },
                    "aggs": {
                        "sales": {
                            "sum": {
                                "field": "price"
                            }
                        }
                    }
                },
                "hat_vs_bag_ratio": {
                    "bucket_script": {
                        "buckets_path": {
                            "hats": "sale_type['hat']>sales", \<1>
                            "bags": "sale_type['bag']>sales"  \<1>
                        },
                        "script": "params.hats / params.bags"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline.asciidoc: line 168: f3dd309ab027e86048b476b54f0d4ca1.adoc
[source,console]
----
POST /_search
{
    "aggs": {
        "my_date_histo": {
            "date_histogram": {
                "field":"timestamp",
                "calendar_interval":"day"
            },
            "aggs": {
                "the_deriv": {
                    "derivative": { "buckets_path": "_count" } \<1>
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline.asciidoc: line 194: 2afc1231679898bd864d06679d9e951b.adoc
[source,console]
----
POST /sales/_search
{
  "size": 0,
  "aggs": {
    "histo": {
      "date_histogram": {
        "field": "date",
        "calendar_interval": "day"
      },
      "aggs": {
        "categories": {
          "terms": {
            "field": "category"
          }
        },
        "min_bucket_selector": {
          "bucket_selector": {
            "buckets_path": {
              "count": "categories._bucket_count" \<1>
            },
            "script": {
              "source": "params.count != 0"
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/avg-bucket-aggregation.asciidoc: line 37: b3e8697874ed65ed6cb62f2568bcc55e.adoc
[source,console]
----
POST /_search
{
  "size": 0,
  "aggs": {
    "sales_per_month": {
      "date_histogram": {
        "field": "date",
        "calendar_interval": "month"
      },
      "aggs": {
        "sales": {
          "sum": {
            "field": "price"
          }
        }
      }
    },
    "avg_monthly_sales": {
      "avg_bucket": {
        "buckets_path": "sales_per_month>sales" \<1>
      }
    }
  }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/derivative-aggregation.asciidoc: line 38: 469bc2e7b9e65b3b1e38a547f63bd2f9.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                },
                "sales_deriv": {
                    "derivative": {
                        "buckets_path": "sales" \<1>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/derivative-aggregation.asciidoc: line 132: d683ed8c4a72f82200bbad0c3921e427.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                },
                "sales_deriv": {
                    "derivative": {
                        "buckets_path": "sales"
                    }
                },
                "sales_2nd_deriv": {
                    "derivative": {
                        "buckets_path": "sales_deriv" \<1>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/derivative-aggregation.asciidoc: line 232: 8553b0c396e9de7d841fcc6373e017e2.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                },
                "sales_deriv": {
                    "derivative": {
                        "buckets_path": "sales",
                        "unit": "day" \<1>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/max-bucket-aggregation.asciidoc: line 37: ce5d556d90d0fb077ab078e055005f3a.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                }
            }
        },
        "max_monthly_sales": {
            "max_bucket": {
                "buckets_path": "sales_per_month>sales" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/min-bucket-aggregation.asciidoc: line 37: e668549ff72fd0b9568667d1a817fc6e.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                }
            }
        },
        "min_monthly_sales": {
            "min_bucket": {
                "buckets_path": "sales_per_month>sales" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/sum-bucket-aggregation.asciidoc: line 36: 612a9f6a05186fc89ed1a75139d3a8b7.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                }
            }
        },
        "sum_monthly_sales": {
            "sum_bucket": {
                "buckets_path": "sales_per_month>sales" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/stats-bucket-aggregation.asciidoc: line 36: 8a187c87964774530ef99f8962d83da5.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                }
            }
        },
        "stats_monthly_sales": {
            "stats_bucket": {
                "buckets_path": "sales_per_month>sales" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/extended-stats-bucket-aggregation.asciidoc: line 39: b8f960415d10545f583d2eac94e07629.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                }
            }
        },
        "stats_monthly_sales": {
            "extended_stats_bucket": {
                "buckets_path": "sales_per_month>sales" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/percentiles-bucket-aggregation.asciidoc: line 38: cff65c0f9fbc53c26c60abe9fb7e4044.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                }
            }
        },
        "percentiles_monthly_sales": {
            "percentiles_bucket": {
                "buckets_path": "sales_per_month>sales", \<1>
                "percents": [ 25.0, 50.0, 75.0 ] \<2>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 42: 5903a75a28cec4b60c54662457c6d405.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{                \<1>
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" } \<2>
                },
                "the_movfn": {
                    "moving_fn": {
                        "buckets_path": "the_sum", \<3>
                        "window": 10,
                        "script": "MovingFunctions.unweightedAvg(values)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 144: 93c9711ee6c0554cd775c013c3837f13.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "return values.length > 0 ? values[0] : Double.NaN"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 215: 13fd394e3e9a3398cac21ac1064fc154.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_max": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.max(values)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 258: c8bebf3c45fc9e75e161bf4e516a957a.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_min": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.min(values)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 301: d0897840a5702b4ec0616e6c90acfe1e.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_sum": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.sum(values)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 346: 46c4d95fc06cd0eb0401caa1e0bdc8f0.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_sum": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.stdDev(values, MovingFunctions.unweightedAvg(values))"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 398: beea9d59a7cbe53d5d4c4ec2a49487b2.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.unweightedAvg(values)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 444: bbbbe980b6dcd2a77ff16cc8a081e472.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.linearWeightedAvg(values)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 496: d84ea140bbe8abfb156a72c1c963ea00.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.ewma(values, 0.3)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 554: 76fc9f5a879772ffcc4ec0c99bf74277.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.holt(values, 0.3, 0.1)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/movfn-aggregation.asciidoc: line 620: af25b173c8bcc73a3bfbfddacb218478.adoc
[source,console]
----
POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "if (values.length > 5*2) {MovingFunctions.holtWinters(values, 0.3, 0.1, 0.1, 5, false)}"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/cumulative-sum-aggregation.asciidoc: line 35: 1ae73d3fcc39bef9ddc654bb82d5d239.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "sales": {
                    "sum": {
                        "field": "price"
                    }
                },
                "cumulative_sales": {
                    "cumulative_sum": {
                        "buckets_path": "sales" \<1>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/bucket-script-aggregation.asciidoc: line 45: c2d90e1c88ff5b1857ed4a5b169c9689.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "total_sales": {
                    "sum": {
                        "field": "price"
                    }
                },
                "t-shirts": {
                  "filter": {
                    "term": {
                      "type": "t-shirt"
                    }
                  },
                  "aggs": {
                    "sales": {
                      "sum": {
                        "field": "price"
                      }
                    }
                  }
                },
                "t-shirt-percentage": {
                    "bucket_script": {
                        "buckets_path": {
                          "tShirtSales": "t-shirts>sales",
                          "totalSales": "total_sales"
                        },
                        "script": "params.tShirtSales / params.totalSales * 100"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/bucket-selector-aggregation.asciidoc: line 48: 7851d52ed462f0a1bdfd4f676e4a4363.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "total_sales": {
                    "sum": {
                        "field": "price"
                    }
                },
                "sales_bucket_filter": {
                    "bucket_selector": {
                        "buckets_path": {
                          "totalSales": "total_sales"
                        },
                        "script": "params.totalSales > 200"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/bucket-sort-aggregation.asciidoc: line 51: 7881659b181997486731d92712fbdca9.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "total_sales": {
                    "sum": {
                        "field": "price"
                    }
                },
                "sales_bucket_sort": {
                    "bucket_sort": {
                        "sort": [
                          {"total_sales": {"order": "desc"}}\<1>
                        ],
                        "size": 3\<2>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/bucket-sort-aggregation.asciidoc: line 139: 541c4f4fb5959cf88423196e51c7e0ef.adoc
[source,console]
----
POST /sales/_search
{
    "size": 0,
    "aggs" : {
        "sales_per_month" : {
            "date_histogram" : {
                "field" : "date",
                "calendar_interval" : "month"
            },
            "aggs": {
                "bucket_truncate": {
                    "bucket_sort": {
                        "from": 1,
                        "size": 1
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/pipeline/serial-diff-aggregation.asciidoc: line 64: b4da132cb934c33d61e2b60988c6d4a3.adoc
[source,console]
----
POST /_search
{
   "size": 0,
   "aggs": {
      "my_date_histo": {                  \<1>
         "date_histogram": {
            "field": "timestamp",
            "calendar_interval": "day"
         },
         "aggs": {
            "the_sum": {
               "sum": {
                  "field": "lemmings"     \<2>
               }
            },
            "thirtieth_difference": {
               "serial_diff": {                \<3>
                  "buckets_path": "the_sum",
                  "lag" : 30
               }
            }
         }
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/matrix/stats-aggregation.asciidoc: line 39: 8ab89e635fcbc485d1728c13dfeeb1ae.adoc
[source,console]
----
GET /_search
{
    "aggs": {
        "statistics": {
            "matrix_stats": {
                "fields": ["poverty", "income"]
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/matrix/stats-aggregation.asciidoc: line 123: 7ee2877f8f031b9a4e56a40b371421fb.adoc
[source,console]
----
GET /_search
{
    "aggs": {
        "matrixstats": {
            "matrix_stats": {
                "fields": ["poverty", "income"],
                "missing": {"income" : 50000} \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/misc.asciidoc: line 19: 0827fcf75228b6d0206a1ffe6bf7d263.adoc
[source,console]
----
GET /twitter/_search
{
  "size": 0,
  "aggregations": {
    "my_agg": {
      "terms": {
        "field": "text"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/misc.asciidoc: line 46: 2d39331333f64fcc31fa298ac59b161f.adoc
[source,console]
----
GET /twitter/_search
{
  "size": 0,
  "aggs": {
    "titles": {
      "terms": {
        "field": "title"
      },
      "meta": {
        "color": "blue"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== aggregations/misc.asciidoc: line 98: ea447f43ebd5f72c65de699904474d0d.adoc
[source,console]
----
GET /twitter/_search?typed_keys
{
  "aggregations": {
    "tweets_over_time": {
      "date_histogram": {
        "field": "date",
        "calendar_interval": "year"
      },
      "aggregations": {
        "top_users": {
            "top_hits": {
                "size": 1
            }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/query_filter_context.asciidoc: line 62: f29a28fffa7ec604a33a838f48f7ea79.adoc
[source,console]
----
GET /_search
{
  "query": { \<1>
    "bool": { \<2>
      "must": [
        { "match": { "title":   "Search"        }},
        { "match": { "content": "Elasticsearch" }}
      ],
      "filter": [ \<3>
        { "term":  { "status": "published" }},
        { "range": { "publish_date": { "gte": "2015-01-01" }}}
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/bool-query.asciidoc: line 36: 06afce2955f9094d96d27067ebca32e8.adoc
[source,console]
----
POST _search
{
  "query": {
    "bool" : {
      "must" : {
        "term" : { "user" : "kimchy" }
      },
      "filter": {
        "term" : { "tag" : "tech" }
      },
      "must_not" : {
        "range" : {
          "age" : { "gte" : 10, "lte" : 20 }
        }
      },
      "should" : [
        { "term" : { "tag" : "wow" } },
        { "term" : { "tag" : "elasticsearch" } }
      ],
      "minimum_should_match" : 1,
      "boost" : 1.0
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/bool-query.asciidoc: line 76: f70a54cd9a9f4811bf962e469f2ca2ea.adoc
[source,console]
----
GET _search
{
  "query": {
    "bool": {
      "filter": {
        "term": {
          "status": "active"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/bool-query.asciidoc: line 96: fa88f6f5a7d728ec4f1d05244228cb09.adoc
[source,console]
----
GET _search
{
  "query": {
    "bool": {
      "must": {
        "match_all": {}
      },
      "filter": {
        "term": {
          "status": "active"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/bool-query.asciidoc: line 120: 162b5b693b713f0bfab1209d59443c46.adoc
[source,console]
----
GET _search
{
  "query": {
    "constant_score": {
      "filter": {
        "term": {
          "status": "active"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/boosting-query.asciidoc: line 18: 292e4c6567378fc7b70033b53b04ce12.adoc
[source,console]
----
GET /_search
{
    "query": {
        "boosting" : {
            "positive" : {
                "term" : {
                    "text" : "apple"
                }
            },
            "negative" : {
                 "term" : {
                     "text" : "pie tart fruit crumble tree"
                }
            },
            "negative_boost" : 0.5
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/constant-score-query.asciidoc: line 12: d59a084640acf2f5c51d3068d38b5fc0.adoc
[source,console]
----
GET /_search
{
    "query": {
        "constant_score" : {
            "filter" : {
                "term" : { "user" : "kimchy"}
            },
            "boost" : 1.2
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/dis-max-query.asciidoc: line 21: fcf5a593cfe8809d98a5239ad9c82038.adoc
[source,console]
----
GET /_search
{
    "query": {
        "dis_max" : {
            "queries" : [
                { "term" : { "title" : "Quick pets" }},
                { "term" : { "body" : "Quick pets" }}
            ],
            "tie_breaker" : 0.7
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 19: a42f33e15b0995bb4b6058659bfdea85.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
            "query": { "match_all": {} },
            "boost": "5",
            "random_score": {}, \<1>
            "boost_mode":"multiply"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 42: b4a0d0ed512dffc10ee53bca2feca49b.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
          "query": { "match_all": {} },
          "boost": "5", \<1>
          "functions": [
              {
                  "filter": { "match": { "test": "bar" } },
                  "random_score": {}, \<2>
                  "weight": 23
              },
              {
                  "filter": { "match": { "test": "cat" } },
                  "weight": 42
              }
          ],
          "max_boost": 42,
          "score_mode": "max",
          "boost_mode": "multiply",
          "min_score" : 42
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 139: ec473de07fe89bcbac1f8e278617fe46.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
            "query": {
                "match": { "message": "elasticsearch" }
            },
            "script_score" : {
                "script" : {
                  "source": "Math.log(2 + doc['likes'].value)"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 171: b68c85fe1b0d2f264dc0d1cbf530f319.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
            "query": {
                "match": { "message": "elasticsearch" }
            },
            "script_score" : {
                "script" : {
                    "params": {
                        "a": 5,
                        "b": 1.2
                    },
                    "source": "params.a / Math.pow(params.b, doc['likes'].value)"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 238: 645c4c6e209719d3a4d25b1a629cb23b.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
            "random_score": {
                "seed": 10,
                "field": "_seq_no"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 267: 8eaf4d5dd4ab1335deefa7749fdbbcc3.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
            "field_value_factor": {
                "field": "likes",
                "factor": 1.2,
                "modifier": "sqrt",
                "missing": 1
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 379: ec27afee074001b0e4e393611010842b.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
            "gauss": {
                "date": {
                      "origin": "2013-09-17", \<1>
                      "scale": "10d",
                      "offset": "5d", \<2>
                      "decay" : 0.5 \<2>
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/function-score-query.asciidoc: line 577: df17f920b0deab3529b98df88b781f55.adoc
[source,console]
----
GET /_search
{
    "query": {
        "function_score": {
          "functions": [
            {
              "gauss": {
                "price": {
                  "origin": "0",
                  "scale": "20"
                }
              }
            },
            {
              "gauss": {
                "location": {
                  "origin": "11, 12",
                  "scale": "2km"
                }
              }
            }
          ],
          "query": {
            "match": {
              "properties": "balcony"
            }
          },
          "score_mode": "multiply"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/intervals-query.asciidoc: line 28: 807c0c9763f8c1114b3c8278c2a0cb56.adoc
[source,console]
----
POST _search
{
  "query": {
    "intervals" : {
      "my_text" : {
        "all_of" : {
          "ordered" : true,
          "intervals" : [
            {
              "match" : {
                "query" : "my favorite food",
                "max_gaps" : 0,
                "ordered" : true
              }
            },
            {
              "any_of" : {
                "intervals" : [
                  { "match" : { "query" : "hot water" } },
                  { "match" : { "query" : "cold porridge" } }
                ]
              }
            }
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/intervals-query.asciidoc: line 277: 7471e97aaaf21c3a200abdd89f15c3cc.adoc
[source,console]
----
POST _search
{
  "query": {
    "intervals" : {
      "my_text" : {
        "match" : {
          "query" : "hot porridge",
          "max_gaps" : 10,
          "filter" : {
            "not_containing" : {
              "match" : {
                "query" : "salty"
              }
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/intervals-query.asciidoc: line 309: 2de6885bacb8769b8f22dce253c96b0c.adoc
[source,console]
----
POST _search
{
  "query": {
    "intervals" : {
      "my_text" : {
        "match" : {
          "query" : "hot porridge",
          "filter" : {
            "script" : {
              "source" : "interval.start > 10 && interval.end < 20 && interval.gaps == 0"
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/intervals-query.asciidoc: line 341: e2a22c6fd58cc0becf4c383134a08f8b.adoc
[source,console]
----
POST _search
{
  "query": {
    "intervals" : {
      "my_text" : {
        "match" : {
          "query" : "salty",
          "filter" : {
            "contained_by" : {
              "match" : {
                "query" : "hot porridge"
              }
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/intervals-query.asciidoc: line 377: 5f79c42b0f74fdf71359cef82843fad3.adoc
[source,console]
----
POST _search
{
  "query": {
    "intervals" : {
      "my_text" : {
        "all_of" : {
          "intervals" : [
            { "match" : { "query" : "the" } },
            { "any_of" : {
                "intervals" : [
                    { "match" : { "query" : "big" } },
                    { "match" : { "query" : "big bad" } }
                ] } },
            { "match" : { "query" : "wolf" } }
          ],
          "max_gaps" : 0,
          "ordered" : true
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/intervals-query.asciidoc: line 411: e7811867397b305efbbe8925d8a01c1a.adoc
[source,console]
----
POST _search
{
  "query": {
    "intervals" : {
      "my_text" : {
        "any_of" : {
          "intervals" : [
            { "match" : {
                "query" : "the big bad wolf",
                "ordered" : true,
                "max_gaps" : 0 } },
            { "match" : {
                "query" : "the big wolf",
                "ordered" : true,
                "max_gaps" : 0 } }
           ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-query.asciidoc: line 12: fa2fe60f570bd930d2891778c6efbfe6.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match" : {
            "message" : "this is a test"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-query.asciidoc: line 42: 6138d6919f3cbaaf61e1092f817d295c.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match" : {
            "message" : {
                "query" : "this is a test",
                "operator" : "and"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-query.asciidoc: line 87: 5043b83a89091fa00edb341ddf7ba370.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match" : {
            "message" : {
                "query" : "this is a testt",
                "fuzziness": "AUTO"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-query.asciidoc: line 110: 0ac9916f47a2483b89c1416684af322a.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match" : {
            "message" : {
                "query" : "to be or not to be",
                "operator" : "and",
                "zero_terms_query": "all"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-query.asciidoc: line 138: 7f56755fb6c42f7e6203339a6d0cb6e6.adoc
[source,console]
----
GET /_search
{
   "query": {
       "match" : {
           "message": {
               "query" : "ny city",
               "auto_generate_synonyms_phrase_query" : false
           }
       }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-bool-prefix-query.asciidoc: line 13: 79c7e8a98c47fad3e96c654d34aa049a.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_bool_prefix" : {
            "message" : "quick brown f"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-bool-prefix-query.asciidoc: line 29: effc6b4784aca12691de5d5782c0384b.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "should": [
                { "term": { "message": "quick" }},
                { "term": { "message": "brown" }},
                { "prefix": { "message": "f"}}
            ]
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-bool-prefix-query.asciidoc: line 61: 953aab6cbd12a4f034cf02bf34d62a72.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_bool_prefix" : {
            "message": {
                "query": "quick brown f",
                "analyzer": "keyword"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-phrase-query.asciidoc: line 11: 83f95657beca9bf5d8264c80c7fb463f.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_phrase" : {
            "message" : "this is a test"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-phrase-query.asciidoc: line 31: 72231b7debac60c95b9869a97dafda3a.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_phrase" : {
            "message" : {
                "query" : "this is a test",
                "analyzer" : "my_analyzer"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-phrase-prefix-query.asciidoc: line 22: ca0da81281347e33116710efd36697c8.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_phrase_prefix" : {
            "message" : {
                "query" : "quick brown f"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 11: 53b908c3432118c5a6e460f74d32006b.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":    "this is a test", \<1>
      "fields": [ "subject", "message" ] \<2>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 33: 6a1702dd50690cae833572e48a0ddf25.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":    "Will Smith",
      "fields": [ "title", "*_name" ] \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 50: e30ea6e3823a139d7693d8cce1920a06.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query" : "this is a test",
      "fields" : [ "subject^3", "message" ] \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 114: 5da6efd5b038ada64c9e853c88c1ec47.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":      "brown fox",
      "type":       "best_fields",
      "fields":     [ "subject", "message" ],
      "tie_breaker": 0.3
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 132: b0eaf67e5cce24ef8889bf20951ccec1.adoc
[source,console]
----
GET /_search
{
  "query": {
    "dis_max": {
      "queries": [
        { "match": { "subject": "brown fox" }},
        { "match": { "message": "brown fox" }}
      ],
      "tie_breaker": 0.3
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 173: e270f3f721a5712cd11a5ca03554f5b0.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":      "Will Smith",
      "type":       "best_fields",
      "fields":     [ "first_name", "last_name" ],
      "operator":   "and" \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 216: 7b908b1189f076942de8cd497ff1fa59.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":      "quick brown fox",
      "type":       "most_fields",
      "fields":     [ "title", "title.original", "title.shingles" ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 233: 6bbc613bd4f9aec1bbdbabf5db021d28.adoc
[source,console]
----
GET /_search
{
  "query": {
    "bool": {
      "should": [
        { "match": { "title":          "quick brown fox" }},
        { "match": { "title.original": "quick brown fox" }},
        { "match": { "title.shingles": "quick brown fox" }}
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 264: 0e118857b815b62118a30c042f079db1.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":      "quick brown f",
      "type":       "phrase_prefix",
      "fields":     [ "subject", "message" ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 281: 33f148e3d8676de6cc52f58749898a13.adoc
[source,console]
----
GET /_search
{
  "query": {
    "dis_max": {
      "queries": [
        { "match_phrase_prefix": { "subject": "quick brown f" }},
        { "match_phrase_prefix": { "message": "quick brown f" }}
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 348: 047266b0d20fdb62ebc72d51952c8f6d.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":      "Will Smith",
      "type":       "cross_fields",
      "fields":     [ "first_name", "last_name" ],
      "operator":   "and"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 408: ad0dcbc7fc619e952c8825b8f307b7b2.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":      "Jon",
      "type":       "cross_fields",
      "fields":     [
        "first", "first.edge",
        "last",  "last.edge"
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 447: 3cd50a789b8e1f0ebbbc53a8d7ecf656.adoc
[source,console]
----
GET /_search
{
  "query": {
    "bool": {
      "should": [
        {
          "multi_match" : {
            "query":      "Will Smith",
            "type":       "cross_fields",
            "fields":     [ "first", "last" ],
            "minimum_should_match": "50%" \<1>
          }
        },
        {
          "multi_match" : {
            "query":      "Will Smith",
            "type":       "cross_fields",
            "fields":     [ "*.edge" ]
          }
        }
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 482: 179f0a3e84ff4bbac18787a018eabf89.adoc
[source,console]
----
GET /_search
{
  "query": {
   "multi_match" : {
      "query":      "Jon",
      "type":       "cross_fields",
      "analyzer":   "standard", \<1>
      "fields":     [ "first", "last", "*.edge" ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/multi-match-query.asciidoc: line 535: 68721288dc9ad8aa1b55099b4d303051.adoc
[source,console]
----
GET /_search
{
  "query": {
    "multi_match" : {
      "query":      "quick brown f",
      "type":       "bool_prefix",
      "fields":     [ "subject", "message" ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/query-string-query.asciidoc: line 42: ad6ea0c1e46712aa1fd6d3bfa0ec979e.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string" : {
            "query" : "(new york city) OR (big apple)",
            "default_field" : "content"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/query-string-query.asciidoc: line 256: f2d68493abd3ca430bd03a7f7f8d18f9.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string" : {
            "fields" : ["content", "name"],
            "query" : "this AND that"
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 273: e17e8852ec3f31781e1364f4dffeb6d0.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "query": "(content:this OR name:this) AND (content:that OR name:that)"
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 290: a2a25aad1fea9a541b52ac613c78fb64.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string" : {
            "fields" : ["content", "name^5"],
            "query" : "this AND that OR thus",
            "tie_breaker" : 0
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 310: 28aad2c5942bfb221c2bf1bbdc01658e.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string" : {
            "fields" : ["city.*"],
            "query" : "this AND that OR thus"
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 328: db6cba451ba562abe953d09ad80cc15c.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string" : {
            "query" : "city.\\*:(this AND that OR thus)"
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 348: 58b5003c0a53a39bf509aa3797aad471.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string" : {
            "fields" : ["content", "name.*^5"],
            "query" : "this AND that OR thus"
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 415: f32f0c19b42de3b87dd764fe4ca17e7c.adoc
[source,console]
----
GET /_search
{
   "query": {
       "query_string" : {
           "default_field": "title",
           "query" : "ny city",
           "auto_generate_synonyms_phrase_query" : false
       }
   }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 444: 60ee33f3acfdd0fe6f288ac77312c780.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "fields": [
                "title"
            ],
            "query": "this that thus",
            "minimum_should_match": 2
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 471: be1bd47393646ac6bbee177d1cdb7738.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "fields": [
                "title",
                "content"
            ],
            "query": "this that thus",
            "minimum_should_match": 2
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 496: fdd38f0d248385a444c777e7acd97846.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "fields": [
                "title",
                "content"
            ],
            "query": "this OR that OR thus",
            "minimum_should_match": 2
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/query-string-query.asciidoc: line 529: 6f21a878fee3b43c5332b81aaddbeac7.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "fields": [
                "title",
                "content"
            ],
            "query": "this OR that OR thus",
            "type": "cross_fields",
            "minimum_should_match": 2
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== query-dsl/simple-query-string-query.asciidoc: line 24: 0d49474511b236bc89e768c8ee91adf1.adoc
[source,console]
----
GET /_search
{
  "query": {
    "simple_query_string" : {
        "query": "\"fried eggs\" +(eggplant | potato) -frittata",
        "fields": ["title^5", "body"],
        "default_operator": "and"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/simple-query-string-query.asciidoc: line 157: 521aa59ae56681fd59ac5840cba6b6c5.adoc
[source,console]
----
GET /_search
{
    "query": {
        "simple_query_string" : {
            "fields" : ["content"],
            "query" : "foo bar -baz"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/simple-query-string-query.asciidoc: line 186: f686f52decb1d57356d42920f46d4d85.adoc
[source,console]
----
GET /_search
{
    "query": {
        "simple_query_string" : {
            "query" : "foo | bar + baz*",
            "flags" : "OR|AND|PREFIX"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/simple-query-string-query.asciidoc: line 251: e8ea65153d7775f25b08dfdfe6954498.adoc
[source,console]
----
GET /_search
{
  "query": {
    "simple_query_string" : {
      "query":    "Will Smith",
      "fields": [ "title", "*_name" ] \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/simple-query-string-query.asciidoc: line 268: da8db0769dff7305f178c12b1111bc99.adoc
[source,console]
----
GET /_search
{
  "query": {
    "simple_query_string" : {
      "query" : "this is a test",
      "fields" : [ "subject^3", "message" ] \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/simple-query-string-query.asciidoc: line 295: 2e602d7fbad46132358f921dff7d1a26.adoc
[source,console]
----
GET /_search
{
   "query": {
       "simple_query_string" : {
           "query" : "ny city",
           "auto_generate_synonyms_phrase_query" : false
       }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 11: b4ef55e48f137e8f67f82b42a047c8f6.adoc
[source,console]
----
PUT /my_locations
{
    "mappings": {
        "properties": {
            "pin": {
                "properties": {
                    "location": {
                        "type": "geo_point"
                    }
                }
            }
        }
    }
}

PUT /my_locations/_doc/1
{
    "pin" : {
        "location" : {
            "lat" : 40.12,
            "lon" : -71.34
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 44: 49abe3273ac51f14cd4b5f1aaa7f6833.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "top_left" : {
                            "lat" : 40.73,
                            "lon" : -74.1
                        },
                        "bottom_right" : {
                            "lat" : 40.01,
                            "lon" : -71.12
                        }
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 99: 49abe3273ac51f14cd4b5f1aaa7f6833.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "top_left" : {
                            "lat" : 40.73,
                            "lon" : -74.1
                        },
                        "bottom_right" : {
                            "lat" : 40.01,
                            "lon" : -71.12
                        }
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 134: 2cbaaab829728c46359d2f68b71c446e.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "top_left" : [-74.1, 40.73],
                        "bottom_right" : [-71.12, 40.01]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 162: bbf04a7f7a8858e911d6a53fe88127b0.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "top_left" : "40.73, -74.1",
                        "bottom_right" : "40.01, -71.12"
                    }
                }
            }
    }
}
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 188: 417dcb29f5547d4de9d75d8b6a7a53c8.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "wkt" : "BBOX (-74.1, -71.12, 40.73, 40.01)"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 213: d84695e3db2c92cd3faebf729e482bf0.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "top_left" : "dr5r9ydj2y73",
                        "bottom_right" : "drj7teegpus6"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 248: 32ffcae9e1d13df0b7295c349d9145ec.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "geo_bounding_box" : {
            "pin.location" : {
                "top_left" : "dr",
                "bottom_right" : "dr"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 278: 370750b2f51bd097f4578e5b105babdf.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "top" : 40.73,
                        "left" : -74.1,
                        "bottom" : 40.01,
                        "right" : -71.12
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-bounding-box-query.asciidoc: line 328: 15eee00f09d2290e0f350d420029906e.adoc
[source,console]
----
GET my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_bounding_box" : {
                    "pin.location" : {
                        "top_left" : {
                            "lat" : 40.73,
                            "lon" : -74.1
                        },
                        "bottom_right" : {
                            "lat" : 40.10,
                            "lon" : -71.12
                        }
                    },
                    "type" : "indexed"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-distance-query.asciidoc: line 12: b4ef55e48f137e8f67f82b42a047c8f6.adoc
[source,console]
----
PUT /my_locations
{
    "mappings": {
        "properties": {
            "pin": {
                "properties": {
                    "location": {
                        "type": "geo_point"
                    }
                }
            }
        }
    }
}

PUT /my_locations/_doc/1
{
    "pin" : {
        "location" : {
            "lat" : 40.12,
            "lon" : -71.34
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-distance-query.asciidoc: line 46: 4639a1bbd12710d5f01f1aaadce09a3e.adoc
[source,console]
----
GET /my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_distance" : {
                    "distance" : "200km",
                    "pin.location" : {
                        "lat" : 40,
                        "lon" : -70
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-distance-query.asciidoc: line 79: 6fc37ccf570ff7e35b7b0bd4bacb8abd.adoc
[source,console]
----
GET /my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_distance" : {
                    "distance" : "12km",
                    "pin.location" : {
                        "lat" : 40,
                        "lon" : -70
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-distance-query.asciidoc: line 109: 926fff8330fc3008f62b9de34f385a57.adoc
[source,console]
----
GET /my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_distance" : {
                    "distance" : "12km",
                    "pin.location" : [-70, 40]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-distance-query.asciidoc: line 136: f878546633c6bcc30edcdcf520a20eba.adoc
[source,console]
----
GET /my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_distance" : {
                    "distance" : "12km",
                    "pin.location" : "40,-70"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-distance-query.asciidoc: line 160: 48a40f20b752a8120cf020bda041adca.adoc
[source,console]
----
GET /my_locations/_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_distance" : {
                    "distance" : "12km",
                    "pin.location" : "drm3btev3e86"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-polygon-query.asciidoc: line 11: 383c5a0771484086dcfd8d990830eeb7.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_polygon" : {
                    "person.location" : {
                        "points" : [
                            {"lat" : 40, "lon" : -70},
                            {"lat" : 30, "lon" : -80},
                            {"lat" : 20, "lon" : -90}
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-polygon-query.asciidoc: line 61: ecf966a20c54eb4e60a2670f51a99bdc.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_polygon" : {
                    "person.location" : {
                        "points" : [
                            [-70, 40],
                            [-80, 30],
                            [-90, 20]
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-polygon-query.asciidoc: line 92: e532955a897ac1844e7c5727916bf32c.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
               "geo_polygon" : {
                    "person.location" : {
                        "points" : [
                            "40, -70",
                            "30, -80",
                            "20, -90"
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-polygon-query.asciidoc: line 121: 5b809a128ee33be706e2097dde6e7719.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "must" : {
                "match_all" : {}
            },
            "filter" : {
               "geo_polygon" : {
                    "person.location" : {
                        "points" : [
                            "drn5x1g8cu2y",
                            "30, -80",
                            "20, -90"
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-shape-query.asciidoc: line 29: 183be708fc91109008109b5ed44c8b08.adoc
[source,console]
----
PUT /example
{
    "mappings": {
        "properties": {
            "location": {
                "type": "geo_shape"
            }
        }
    }
}

POST /example/_doc?refresh
{
    "name": "Wind & Wetter, Berlin, Germany",
    "location": {
        "type": "point",
        "coordinates": [13.400544, 52.530286]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-shape-query.asciidoc: line 57: 129975da094b6b93cc8fcc4042d47913.adoc
[source,console]
----
GET /example/_search
{
    "query":{
        "bool": {
            "must": {
                "match_all": {}
            },
            "filter": {
                "geo_shape": {
                    "location": {
                        "shape": {
                            "type": "envelope",
                            "coordinates" : [[13.0, 53.0], [14.0, 52.0]]
                        },
                        "relation": "within"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/geo-shape-query.asciidoc: line 102: 0e941a8309c3743972b8f5a8d9d9ada6.adoc
[source,console]
----
PUT /shapes
{
    "mappings": {
        "properties": {
            "location": {
                "type": "geo_shape"
            }
        }
    }
}

PUT /shapes/_doc/deu
{
    "location": {
        "type": "envelope",
        "coordinates" : [[13.0, 53.0], [14.0, 52.0]]
    }
}

GET /example/_search
{
    "query": {
        "bool": {
            "filter": {
                "geo_shape": {
                    "location": {
                        "indexed_shape": {
                            "index": "shapes",
                            "id": "deu",
                            "path": "location"
                        }
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/shape-query.asciidoc: line 28: 32afa78603025e0917a2bdd7e2e39ac8.adoc
[source,console]
----
PUT /example
{
    "mappings": {
        "properties": {
            "geometry": {
                "type": "shape"
            }
        }
    }
}

POST /example/_doc?refresh
{
    "name": "Lucky Landing",
    "location": {
        "type": "point",
        "coordinates": [1355.400544, 5255.530286]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/shape-query.asciidoc: line 56: f7bbcd762afef5a562768a46fe192b56.adoc
[source,console]
----
GET /example/_search
{
    "query":{
        "shape": {
            "geometry": {
                "shape": {
                    "type": "envelope",
                    "coordinates" : [[1355.0, 5355.0], [1400.0, 5200.0]]
                },
                "relation": "within"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/shape-query.asciidoc: line 94: 86388922e307dd94c0f5f93890f13832.adoc
[source,console]
----
PUT /shapes
{
    "mappings": {
        "properties": {
            "geometry": {
                "type": "shape"
            }
        }
    }
}

PUT /shapes/_doc/footprint
{
    "geometry": {
        "type": "envelope",
        "coordinates" : [[1355.0, 5355.0], [1400.0, 5200.0]]
    }
}

GET /example/_search
{
    "query": {
        "shape": {
            "geometry": {
                "indexed_shape": {
                    "index": "shapes",
                    "id": "footprint",
                    "path": "geometry"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/nested-query.asciidoc: line 23: ae57d3aa9075aaab34bda7655cdafabb.adoc
[source,console]
----
PUT /my_index
{
    "mappings": {
        "properties" : {
            "obj1" : {
                "type" : "nested"
            }
        }
    }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/nested-query.asciidoc: line 43: f9abf6c518e9ec793218c3696f5f2f8f.adoc
[source,console]
----
GET /my_index/_search
{
    "query": {
        "nested" : {
            "path" : "obj1",
            "query" : {
                "bool" : {
                    "must" : [
                    { "match" : {"obj1.name" : "blue"} },
                    { "range" : {"obj1.count" : {"gt" : 5}} }
                    ]
                }
            },
            "score_mode" : "avg"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/has-child-query.asciidoc: line 31: 10239a59784c3069e0d9399d3f9a7008.adoc
[source,console]
----
PUT /my_index
{
    "mappings": {
        "properties" : {
            "my-join-field" : {
                "type" : "join",
                "relations": {
                    "parent": "child"
                }
            }
        }
    }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/has-child-query.asciidoc: line 54: a204ff3396082b32175371c7ed8b9394.adoc
[source,console]
----
GET /_search
{
    "query": {
        "has_child" : {
            "type" : "child",
            "query" : {
                "match_all" : {}
            },
            "max_children": 10,
            "min_children": 2,
            "score_mode" : "min"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/has-child-query.asciidoc: line 143: d7b459941dc32d790ade80a0f5712560.adoc
[source,console]
----
GET /_search
{
    "query": {
        "has_child" : {
            "type" : "child",
            "query" : {
                "function_score" : {
                    "script_score": {
                        "script": "_score * doc['click_count'].value"
                    }
                }
            },
            "score_mode" : "max"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/has-parent-query.asciidoc: line 27: 6515e74b150bbdae570e0fd3ef5ac2e5.adoc
[source,console]
----
PUT /my-index
{
    "mappings": {
        "properties" : {
            "my-join-field" : {
                "type" : "join",
                "relations": {
                    "parent": "child"
                }
            },
            "tag" : {
                "type" : "keyword"
            }
        }
    }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/has-parent-query.asciidoc: line 53: e539bfb5c73771c73acdf22fe77dde04.adoc
[source,console]
----
GET /my-index/_search
{
    "query": {
        "has_parent" : {
            "parent_type" : "parent",
            "query" : {
                "term" : {
                    "tag" : {
                        "value" : "Elasticsearch"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/has-parent-query.asciidoc: line 124: 85d88b08243afbef45d4dcea72c9a41c.adoc
[source,console]
----
GET /_search
{
    "query": {
        "has_parent" : {
            "parent_type" : "parent",
            "score" : true,
            "query" : {
                "function_score" : {
                    "script_score": {
                        "script": "_score * doc['view_count'].value"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/parent-id-query.asciidoc: line 24: 0377c031f840e23dcf607a08e5549bac.adoc
[source,console]
----
PUT /my-index
{
    "mappings": {
        "properties" : {
            "my-join-field" : {
                "type" : "join",
                "relations": {
                    "my-parent": "my-child"
                }
            }
        }
    }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/parent-id-query.asciidoc: line 48: 6528a67cc20e5a422f11cbc0ffb6f673.adoc
[source,console]
----
PUT /my-index/_doc/1?refresh
{
  "text": "This is a parent document.",
  "my-join-field": "my-parent"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/parent-id-query.asciidoc: line 62: a4d0e6ff5bb904cbd686aecafa917aa2.adoc
[source,console]
----
PUT /my-index/_doc/2?routing=1&refresh
{
  "text": "This is a child document.",
  "my_join_field": {
    "name": "my-child",
    "parent": "1"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/parent-id-query.asciidoc: line 82: 0dd8ee4a383f84f8454c262262630f41.adoc
[source,console]
----
GET /my-index/_search
{
  "query": {
      "parent_id": {
          "type": "my-child",
          "id": "1"
      }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-all-query.asciidoc: line 11: 09d617863a103c82fb4101e6165ea7fe.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_all": {}
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-all-query.asciidoc: line 24: 75330ec1305d2beb0e2f34d2195464e2.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_all": { "boost" : 1.2 }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/match-all-query.asciidoc: line 41: 81c9aa2678d6166a9662ddf2c011a6a5.adoc
[source,console]
----
GET /_search
{
    "query": {
        "match_none": {}
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-containing-query.asciidoc: line 11: 73094e82ce3850cbb6f9d071cc8a2d14.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_containing" : {
            "little" : {
                "span_term" : { "field1" : "foo" }
            },
            "big" : {
                "span_near" : {
                    "clauses" : [
                        { "span_term" : { "field1" : "bar" } },
                        { "span_term" : { "field1" : "baz" } }
                    ],
                    "slop" : 5,
                    "in_order" : true
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-field-masking-query.asciidoc: line 16: b59861ad84352fee3e78bc869ccbe8b0.adoc
[source,console]
----
GET /_search
{
  "query": {
    "span_near": {
      "clauses": [
        {
          "span_term": {
            "text": "quick brown"
          }
        },
        {
          "field_masking_span": {
            "query": {
              "span_term": {
                "text.stems": "fox"
              }
            },
            "field": "text"
          }
        }
      ],
      "slop": 5,
      "in_order": false
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-first-query.asciidoc: line 11: 020655381882d0721472a1581e06384a.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_first" : {
            "match" : {
                "span_term" : { "user" : "kimchy" }
            },
            "end" : 3
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-multi-term-query.asciidoc: line 12: a22f79d01a4a625840072024feb60b46.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_multi":{
            "match":{
                "prefix" : { "user" :  { "value" : "ki" } }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-multi-term-query.asciidoc: line 29: 87ffa93d8de41fd0c3ea2f52378dab9c.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_multi":{
            "match":{
                "prefix" : { "user" :  { "value" : "ki", "boost" : 1.08 } }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-near-query.asciidoc: line 13: 35ee06bbcc1291446187f1eeaf7eed90.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_near" : {
            "clauses" : [
                { "span_term" : { "field" : "value1" } },
                { "span_term" : { "field" : "value2" } },
                { "span_term" : { "field" : "value3" } }
            ],
            "slop" : 12,
            "in_order" : false
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-not-query.asciidoc: line 13: 4a3b37cdf27279800355ccdef0e13128.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_not" : {
            "include" : {
                "span_term" : { "field1" : "hoya" }
            },
            "exclude" : {
                "span_near" : {
                    "clauses" : [
                        { "span_term" : { "field1" : "la" } },
                        { "span_term" : { "field1" : "hoya" } }
                    ],
                    "slop" : 0,
                    "in_order" : true
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-or-query.asciidoc: line 11: b8b1c96897001708b2cfad92ac36a21f.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_or" : {
            "clauses" : [
                { "span_term" : { "field" : "value1" } },
                { "span_term" : { "field" : "value2" } },
                { "span_term" : { "field" : "value3" } }
            ]
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-term-query.asciidoc: line 11: 086b2bbc4c3bfc2310c22d10db42cb82.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-term-query.asciidoc: line 24: 5add42087c83b7e498f8f43e91f343d4.adoc
[source,console]
----
GET /_search
{
    "query": {
       "span_term" : { "user" : { "value" : "kimchy", "boost" : 2.0 } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-term-query.asciidoc: line 37: 2a07d189553602066fefdb6b7cbdf542.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_term" : { "user" : { "term" : "kimchy", "boost" : 2.0 } }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/span-within-query.asciidoc: line 11: 9429e565d0b56289a10b81220660163c.adoc
[source,console]
----
GET /_search
{
    "query": {
        "span_within" : {
            "little" : {
                "span_term" : { "field1" : "foo" }
            },
            "big" : {
                "span_near" : {
                    "clauses" : [
                        { "span_term" : { "field1" : "bar" } },
                        { "span_term" : { "field1" : "baz" } }
                    ],
                    "slop" : 5,
                    "in_order" : true
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/distance-feature-query.asciidoc: line 37: b81a7b5f5ef19553f9cd49196f31018c.adoc
[source,console]
----
PUT /items
{
  "mappings": {
    "properties": {
      "name": {
        "type": "keyword"
      },
      "production_date": {
        "type": "date"
      },
      "location": {
        "type": "geo_point"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/distance-feature-query.asciidoc: line 63: b0d3f839237fabf8cdc2221734c668ad.adoc
[source,console]
----
PUT /items/_doc/1?refresh
{
  "name" : "chocolate",
  "production_date": "2018-02-01",
  "location": [-71.34, 41.12]
}

PUT /items/_doc/2?refresh
{
  "name" : "chocolate",
  "production_date": "2018-01-01",
  "location": [-71.3, 41.15]
}


PUT /items/_doc/3?refresh
{
  "name" : "chocolate",
  "production_date": "2017-12-01",
  "location": [-71.3, 41.12]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/distance-feature-query.asciidoc: line 100: 1e2c5cef7a3f254c71a33865eb4d7569.adoc
[source,console]
----
GET /items/_search
{
  "query": {
    "bool": {
      "must": {
        "match": {
          "name": "chocolate"
        }
      },
      "should": {
        "distance_feature": {
          "field": "production_date",
          "pivot": "7d",
          "origin": "now"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/distance-feature-query.asciidoc: line 130: 57a3e8d2ca64e37e90d658c4cd935399.adoc
[source,console]
----
GET /items/_search
{
  "query": {
    "bool": {
      "must": {
        "match": {
          "name": "chocolate"
        }
      },
      "should": {
        "distance_feature": {
          "field": "location",
          "pivot": "1000m",
          "origin": [-71.3, 41.15]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/mlt-query.asciidoc: line 19: 32db70e5e08349aa254788ab4a2c4a51.adoc
[source,console]
----
GET /_search
{
    "query": {
        "more_like_this" : {
            "fields" : ["title", "description"],
            "like" : "Once upon a time",
            "min_term_freq" : 1,
            "max_query_terms" : 12
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/mlt-query.asciidoc: line 39: cba099b82792fa5ba7741d00483c2b47.adoc
[source,console]
----
GET /_search
{
    "query": {
        "more_like_this" : {
            "fields" : ["title", "description"],
            "like" : [
            {
                "_index" : "imdb",
                "_id" : "1"
            },
            {
                "_index" : "imdb",
                "_id" : "2"
            },
            "and potentially some more text here as well"
            ],
            "min_term_freq" : 1,
            "max_query_terms" : 12
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/mlt-query.asciidoc: line 69: 33f77a3b80f33323faa091538220de2a.adoc
[source,console]
----
GET /_search
{
    "query": {
        "more_like_this" : {
            "fields" : ["name.first", "name.last"],
            "like" : [
            {
                "_index" : "marvel",
                "doc" : {
                    "name": {
                        "first": "Ben",
                        "last": "Grimm"
                    },
                    "_doc": "You got no idea what I'd... what I'd give to be invisible."
                  }
            },
            {
                "_index" : "marvel",
                "_id" : "2"
            }
            ],
            "min_term_freq" : 1,
            "max_query_terms" : 12
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/mlt-query.asciidoc: line 124: 084b3e3ff6f22c1c9a56b79760f50b36.adoc
[source,console]
----
PUT /imdb
{
    "mappings": {
        "properties": {
            "title": {
                "type": "text",
                "term_vector": "yes"
            },
            "description": {
                "type": "text"
            },
            "tags": {
                "type": "text",
                "fields" : {
                    "raw": {
                        "type" : "text",
                        "analyzer": "keyword",
                        "term_vector" : "yes"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 18: e79bff3fe9fe9d8732e0b034f17a03c5.adoc
[source,console]
----
PUT /my-index
{
    "mappings": {
        "properties": {
             "message": {
                 "type": "text"
             },
             "query": {
                 "type": "percolator"
             }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 47: 25843127c07257bf09154920779d3055.adoc
[source,console]
----
PUT /my-index/_doc/1?refresh
{
    "query" : {
        "match" : {
            "message" : "bonsai tree"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 63: 4ef2837148b6b23e2eb0a11d14ccae80.adoc
[source,console]
----
GET /my-index/_search
{
    "query" : {
        "percolate" : {
            "field" : "query",
            "document" : {
                "message" : "A new bonsai tree in the office"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 162: 4e4e6a2e173cc20c00cca1a06166a687.adoc
[source,console]
----
GET /my-index/_search
{
    "query" : {
        "constant_score": {
            "filter": {
                "percolate" : {
                    "field" : "query",
                    "document" : {
                        "message" : "A new bonsai tree in the office"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 203: 2d417d4eea299b45f384af7303252611.adoc
[source,console]
----
GET /my-index/_search
{
    "query" : {
        "percolate" : {
            "field" : "query",
            "documents" : [ \<1>
                {
                    "message" : "bonsai tree"
                },
                {
                    "message" : "new tree"
                },
                {
                    "message" : "the office"
                },
                {
                    "message" : "office tree"
                }
            ]
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 290: fe0b180951e143d4c624d9fbf677b884.adoc
[source,console]
----
PUT /my-index/_doc/2
{
  "message" : "A new bonsai tree in the office"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 322: 6736f6e4e04379918a21e7c223c08cf9.adoc
[source,console]
----
GET /my-index/_search
{
    "query" : {
        "percolate" : {
            "field": "query",
            "index" : "my-index",
            "id" : "2",
            "version" : 1 \<1>
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 359: f33cfd0350f5f474362aa6f2e03f734f.adoc
[source,console]
----
PUT /my-index/_doc/3?refresh
{
    "query" : {
        "match" : {
            "message" : "brown fox"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 375: 1ae1587dfc299b9f3f57d3da0dbc9a3b.adoc
[source,console]
----
PUT /my-index/_doc/4?refresh
{
    "query" : {
        "match" : {
            "message" : "lazy dog"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 391: a8852f083978b748b93b87ff7fa7b15b.adoc
[source,console]
----
GET /my-index/_search
{
    "query" : {
        "percolate" : {
            "field": "query",
            "document" : {
                "message" : "The quick brown fox jumps over the lazy dog"
            }
        }
    },
    "highlight": {
      "fields": {
        "message": {}
      }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 488: 3bbf150f4ae5c8e53beb6d6ae6f07775.adoc
[source,console]
----
GET /my-index/_search
{
    "query" : {
        "percolate" : {
            "field": "query",
            "documents" : [
                {
                    "message" : "bonsai tree"
                },
                {
                    "message" : "new tree"
                },
                {
                    "message" : "the office"
                },
                {
                    "message" : "office tree"
                }
            ]
        }
    },
    "highlight": {
      "fields": {
        "message": {}
      }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 582: 6163e92fa93136a1907f820e8d57db45.adoc
[source,console]
----
GET /my-index/_search
{
    "query" : {
        "bool" : {
            "should" : [
                {
                    "percolate" : {
                        "field" : "query",
                        "document" : {
                            "message" : "bonsai tree"
                        },
                        "name": "query1" \<1>
                    }
                },
                {
                    "percolate" : {
                        "field" : "query",
                        "document" : {
                            "message" : "tulip flower"
                        },
                        "name": "query2" \<1>
                    }
                }
            ]
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/percolate-query.asciidoc: line 688: 9501e6c8e95c21838653ea15b9b7ed5f.adoc
[source,console]
----
GET /_search
{
  "query": {
    "term" : {
      "query.extraction_result" : "failed"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/rank-feature-query.asciidoc: line 57: e2750d69bcb6d4c7e16e704cd0fb3530.adoc
[source,console]
----
PUT /test
{
  "mappings": {
    "properties": {
      "pagerank": {
        "type": "rank_feature"
      },
      "url_length": {
        "type": "rank_feature",
        "positive_score_impact": false
      },
      "topics": {
        "type": "rank_features"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/rank-feature-query.asciidoc: line 83: c786505cf972dd41bd0cbb6ebcf939e9.adoc
[source,console]
----
PUT /test/_doc/1?refresh
{
  "url": "http://en.wikipedia.org/wiki/2016_Summer_Olympics",
  "content": "Rio 2016",
  "pagerank": 50.3,
  "url_length": 42,
  "topics": {
    "sports": 50,
    "brazil": 30
  }
}

PUT /test/_doc/2?refresh
{
  "url": "http://en.wikipedia.org/wiki/2016_Brazilian_Grand_Prix",
  "content": "Formula One motor race held on 13 November 2016",
  "pagerank": 50.3,
  "url_length": 47,
  "topics": {
    "sports": 35,
    "formula one": 65,
    "brazil": 20
  }
}

PUT /test/_doc/3?refresh
{
  "url": "http://en.wikipedia.org/wiki/Deadpool_(film)",
  "content": "Deadpool is a 2016 American superhero film",
  "pagerank": 50.3,
  "url_length": 37,
  "topics": {
    "movies": 60,
    "super hero": 65
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/rank-feature-query.asciidoc: line 130: fd0cd8ecd03468726b59a605eea06d75.adoc
[source,console]
----
GET /test/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "content": "2016"
          }
        }
      ],
      "should": [
        {
          "rank_feature": {
            "field": "pagerank"
          }
        },
        {
          "rank_feature": {
            "field": "url_length",
            "boost": 0.1
          }
        },
        {
          "rank_feature": {
            "field": "topics.sports",
            "boost": 0.4
          }
        }
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/rank-feature-query.asciidoc: line 236: 309f0721145b5c656338a02459c3ff1e.adoc
[source,console]
----
GET /test/_search
{
  "query": {
    "rank_feature": {
      "field": "pagerank",
      "saturation": {
        "pivot": 8
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/rank-feature-query.asciidoc: line 257: 0c05c66cfe3a2169b1ec1aba77e26db2.adoc
[source,console]
----
GET /test/_search
{
  "query": {
    "rank_feature": {
      "field": "pagerank",
      "saturation": {}
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/rank-feature-query.asciidoc: line 279: e89bf0d893b7bf43c2d9b44db6cfe21b.adoc
[source,console]
----
GET /test/_search
{
  "query": {
    "rank_feature": {
      "field": "pagerank",
      "log": {
        "scaling_factor": 4
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/rank-feature-query.asciidoc: line 306: 9e3c28d5820c38ea117eb2e9a5061089.adoc
[source,console]
----
GET /test/_search
{
  "query": {
    "rank_feature": {
      "field": "pagerank",
      "sigmoid": {
        "pivot": 7,
        "exponent": 0.6
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/script-query.asciidoc: line 15: b3aa46565d98f8a6750c571bb1c1bb8c.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "filter" : {
                "script" : {
                    "script" : {
                        "source": "doc['num1'].value > 1",
                        "lang": "painless"
                     }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/script-query.asciidoc: line 53: c4459f98de5decb37b8c403885f4b226.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "filter" : {
                "script" : {
                    "script" : {
                        "source" : "doc['num1'].value > params.param1",
                        "lang"   : "painless",
                        "params" : {
                            "param1" : 5
                        }
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/script-score-query.asciidoc: line 18: eb35bef392e0957d609f1a26481e048d.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "script_score" : {
            "query" : {
                "match": { "message": "elasticsearch" }
            },
            "script" : {
                "source" : "doc['likes'].value / 10 "
            }
        }
     }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 21: 0f621a396f26e1a8d1a724329260af07.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_dense_vector": {
        "type": "dense_vector",
        "dims": 3
      },
      "my_sparse_vector" : {
        "type" : "sparse_vector"
      },
      "status" : {
        "type" : "keyword"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "my_dense_vector": [0.5, 10, 6],
  "my_sparse_vector": {"2": 1.5, "15" : 2, "50": -1.1, "4545": 1.1},
  "status" : "published"
}

PUT my_index/_doc/2
{
  "my_dense_vector": [-0.5, 10, 10],
  "my_sparse_vector": {"2": 2.5, "10" : 1.3, "55": -2.3, "113": 1.6},
  "status" : "published"
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 62: e077e86607f272568cff9cd950c21bb6.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published" \<1>
            }
          }
        }
      },
      "script": {
        "source": "cosineSimilarity(params.query_vector, doc['my_dense_vector']) + 1.0", \<2>
        "params": {
          "query_vector": [4, 3.4, -0.2]  \<3>
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 98: d6b15235dd3238e8b94caa42d0c0c32e.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published"
            }
          }
        }
      },
      "script": {
        "source": "cosineSimilaritySparse(params.query_vector, doc['my_sparse_vector']) + 1.0",
        "params": {
          "query_vector": {"2": 0.5, "10" : 111.3, "50": -1.3, "113": 14.8, "4545": 156.0}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 128: 3ab88f9b42d28940835c6a6cd91f50fd.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published"
            }
          }
        }
      },
      "script": {
        "source": """
          double value = dotProduct(params.query_vector, doc['my_dense_vector']);
          return sigmoid(1, Math.E, -value); \<1>
        """,
        "params": {
          "query_vector": [4, 3.4, -0.2]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 163: a7ac82b206e859c187678c62681ba380.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published"
            }
          }
        }
      },
      "script": {
        "source": """
          double value = dotProductSparse(params.query_vector, doc['my_sparse_vector']);
          return sigmoid(1, Math.E, -value);
        """,
         "params": {
          "query_vector": {"2": 0.5, "10" : 111.3, "50": -1.3, "113": 14.8, "4545": 156.0}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 197: 36fc6170ce7ff17b719f988ae03a50c9.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published"
            }
          }
        }
      },
      "script": {
        "source": "1 / (1 + l1norm(params.queryVector, doc['my_dense_vector']))", \<1>
        "params": {
          "queryVector": [4, 3.4, -0.2]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 236: ab123056145692c7e7e0d7a95aa7ea72.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published"
            }
          }
        }
      },
      "script": {
        "source": "1 / (1 + l1normSparse(params.queryVector, doc['my_sparse_vector']))",
        "params": {
          "queryVector": {"2": 0.5, "10" : 111.3, "50": -1.3, "113": 14.8, "4545": 156.0}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 267: b0e60ffce9edecba49a8b0cce869a85d.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published"
            }
          }
        }
      },
      "script": {
        "source": "1 / (1 + l2norm(params.queryVector, doc['my_dense_vector']))",
        "params": {
          "queryVector": [4, 3.4, -0.2]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== vectors/vector-functions.asciidoc: line 297: 20a6db9d4b71d551d6864e95d5b93c4f.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "script_score": {
      "query" : {
        "bool" : {
          "filter" : {
            "term" : {
              "status" : "published"
            }
          }
        }
      },
      "script": {
        "source": "1 / (1 + l2normSparse(params.queryVector, doc['my_sparse_vector']))",
        "params": {
          "queryVector": {"2": 0.5, "10" : 111.3, "50": -1.3, "113": 14.8, "4545": 156.0}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/wrapper-query.asciidoc: line 10: 6159a7d56e93e14a31fc06644c803a38.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "wrapper": {
            "query" : "eyJ0ZXJtIiA6IHsgInVzZXIiIDogIktpbWNoeSIgfX0=" \<1>
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/exists-query.asciidoc: line 20: 3342c69b2c2303247217532956fcce85.adoc
[source,console]
----
GET /_search
{
    "query": {
        "exists": {
            "field": "user"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/exists-query.asciidoc: line 57: 43af86de5e49aa06070092fffc138208.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool": {
            "must_not": {
                "exists": {
                    "field": "user"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/fuzzy-query.asciidoc: line 29: 10dd8b5da64f1f6af031706dd50bc9b5.adoc
[source,console]
----
GET /_search
{
    "query": {
        "fuzzy": {
            "user": {
                "value": "ki"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/fuzzy-query.asciidoc: line 47: 8baebb670ca5624d7920ccac4afdff06.adoc
[source,console]
----
GET /_search
{
    "query": {
        "fuzzy": {
            "user": {
                "value": "ki",
                "fuzziness": "AUTO",
                "max_expansions": 50,
                "prefix_length": 0,
                "transpositions": true,
                "rewrite": "constant_score"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/ids-query.asciidoc: line 13: 84cdb6a7a5464af7ef95b3d546883870.adoc
[source,console]
----
GET /_search
{
    "query": {
        "ids" : {
            "values" : ["1", "4", "100"]
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/prefix-query.asciidoc: line 16: 81514791349e0e79ac565160e42889c0.adoc
[source,console]
----
GET /_search
{
    "query": {
        "prefix": {
            "user": {
                "value": "ki"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/prefix-query.asciidoc: line 54: 32ea547cefa2976c8c3c2eb45a2a4ff4.adoc
[source,console]
----
GET /_search
{
    "query": {
        "prefix" : { "user" : "ki" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/range-query.asciidoc: line 16: 97bcd92ef148312d41e69f0d18284327.adoc
[source,console]
----
GET _search
{
    "query": {
        "range" : {
            "age" : {
                "gte" : 10,
                "lte" : 20,
                "boost" : 2.0
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/range-query.asciidoc: line 153: 4466d410e06712c63328de4db249e6da.adoc
[source,console]
----
GET _search
{
    "query": {
        "range" : {
            "timestamp" : {
                "gte" : "now-1d/d",
                "lt" :  "now/d"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/range-query.asciidoc: line 216: 5d13a71fa7fda73b15111803b1c7cfd3.adoc
[source,console]
----
GET _search
{
    "query": {
        "range" : {
            "timestamp" : {
                "time_zone": "+01:00", \<1>
                "gte": "2015-01-01 00:00:00", \<2>
                "lte": "now" \<3>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/regexp-query.asciidoc: line 23: 618d5f3d35921d8cb7e9ccfbe9a4c3e3.adoc
[source,console]
----
GET /_search
{
    "query": {
        "regexp": {
            "user": {
                "value": "k.*y",
                "flags" : "ALL",
                "max_determinized_states": 10000,
                "rewrite": "constant_score"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/term-query.asciidoc: line 28: d0a8a938a2fa913b6fdbc871079a59dd.adoc
[source,console]
----
GET /_search
{
    "query": {
        "term": {
            "user": {
                "value": "Kimchy",
                "boost": 1.0
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/term-query.asciidoc: line 95: 2a1de18774f9c68cafa169847832b2bc.adoc
[source,console]
----
PUT my_index
{
    "mappings" : {
        "properties" : {
            "full_text" : { "type" : "text" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/term-query.asciidoc: line 115: d4b4cefba4318caeba7480187faf2b13.adoc
[source,console]
----
PUT my_index/_doc/1
{
  "full_text":   "Quick Brown Foxes!"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/term-query.asciidoc: line 135: cdedd5f33f7e5f7acde561e97bff61de.adoc
[source,console]
----
GET my_index/_search?pretty
{
  "query": {
    "term": {
      "full_text": "Quick Brown Foxes!"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/term-query.asciidoc: line 170: a80f5db4357bb25b8704d374c18318ed.adoc
[source,console]
----
GET my_index/_search?pretty
{
  "query": {
    "match": {
      "full_text": "Quick Brown Foxes!"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-query.asciidoc: line 19: 0c4ad860a485fe53d8140ad3ccd11dcf.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "terms" : {
            "user" : ["kimchy", "elasticsearch"],
            "boost" : 1.0
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-query.asciidoc: line 128: 9e56d79ad9a02b642c361f0b85dd95d7.adoc
[source,console]
----
PUT my_index
{
    "mappings" : {
        "properties" : {
            "color" : { "type" : "keyword" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-query.asciidoc: line 147: d3088d5fa59b3ab110f64fb4f9b0065c.adoc
[source,console]
----
PUT my_index/_doc/1
{
  "color":   ["blue", "green"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-query.asciidoc: line 163: 8c5977410335d58217e0626618ce6641.adoc
[source,console]
----
PUT my_index/_doc/2
{
  "color":   "blue"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-query.asciidoc: line 191: d1bcf2eb63a462bfdcf01a68e68d5b4a.adoc
[source,console]
----
GET my_index/_search?pretty
{
  "query": {
    "terms": {
        "color" : {
            "index" : "my_index",
            "id" : "2",
            "path" : "color"
        }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-set-query.asciidoc: line 49: f29bc8beaa219c21be3204e010f5a509.adoc
[source,console]
----
PUT /job-candidates
{
    "mappings": {
        "properties": {
            "name": {
                "type": "keyword"
            },
            "programming_languages": {
                "type": "keyword"
            },
            "required_matches": {
                "type": "long"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-set-query.asciidoc: line 86: 6866beb749ef6dee19d2cb56edc0a9ab.adoc
[source,console]
----
PUT /job-candidates/_doc/1?refresh
{
    "name": "Jane Smith",
    "programming_languages": ["c++", "java"],
    "required_matches": 2
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-set-query.asciidoc: line 109: f7bccd5a51a4000215767e9a6454327f.adoc
[source,console]
----
PUT /job-candidates/_doc/2?refresh
{
    "name": "Jason Response",
    "programming_languages": ["java", "php"],
    "required_matches": 2
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-set-query.asciidoc: line 139: c5040ac6dc2922f191113e7a5fd5a699.adoc
[source,console]
----
GET /job-candidates/_search
{
    "query": {
        "terms_set": {
            "programming_languages": {
                "terms": ["c++", "java", "php"],
                "minimum_should_match_field": "required_matches"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/terms-set-query.asciidoc: line 218: cf2e6e604c67175398f6c217b9e86127.adoc
[source,console]
----
GET /job-candidates/_search
{
    "query": {
        "terms_set": {
            "programming_languages": {
                "terms": ["c++", "java", "php"],
                "minimum_should_match_script": {
                   "source": "Math.min(params.num_terms, doc['required_matches'].value)"
                },
                "boost": 1.0
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== query-dsl/wildcard-query.asciidoc: line 21: d31062ff8c015387889fed4ad86fd914.adoc
[source,console]
----
GET /_search
{
    "query": {
        "wildcard": {
            "user": {
                "value": "ki*y",
                "boost": 1.0,
                "rewrite": "constant_score"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/using.asciidoc: line 24: e62cf588bfc891504bbf933af86eed7c.adoc
[source,console]
----
PUT my_index/_doc/1
{
  "my_field": 5
}

GET my_index/_search
{
  "script_fields": {
    "my_doubled_field": {
      "script": {
        "lang":   "expression",
        "source": "doc['my_field'] * multiplier",
        "params": {
          "multiplier": 2
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/using.asciidoc: line 148: 40a2bbc35a887d6c7dda3cca1fe7aa58.adoc
[source,console]
----
POST _scripts/calculate-score
{
  "script": {
    "lang": "painless",
    "source": "Math.log(_score * 2) + params.my_modifier"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/using.asciidoc: line 162: 08e08feb514b24006e13f258d617d873.adoc
[source,console]
----
GET _scripts/calculate-score
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/using.asciidoc: line 171: 4484218a06e3bae623250cdaccac5dcb.adoc
[source,console]
----
GET _search
{
  "query": {
    "script": {
      "script": {
        "id": "calculate-score",
        "params": {
          "my_modifier": 2
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/using.asciidoc: line 192: 4061fd5ba7221ca85805ed14d59a6bc5.adoc
[source,console]
----
DELETE _scripts/calculate-score
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/fields.asciidoc: line 46: 729f4abc0b4edaf6b58bd9e7b3fd5a8b.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "text": "quick brown fox",
  "popularity": 1
}

PUT my_index/_doc/2?refresh
{
  "text": "quick fox",
  "popularity": 5
}

GET my_index/_search
{
  "query": {
    "function_score": {
      "query": {
        "match": {
          "text": "quick brown fox"
        }
      },
      "script_score": {
        "script": {
          "lang": "expression",
          "source": "_score * doc['popularity']"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/fields.asciidoc: line 91: 0dfe9d6724c7bd11094bb4a0796e7ac7.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "cost_price": 100
}

GET my_index/_search
{
  "script_fields": {
    "sales_price": {
      "script": {
        "lang":   "expression",
        "source": "doc['cost_price'] * markup",
        "params": {
          "markup": 0.2
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/fields.asciidoc: line 174: 2a9c29afe23e30a68dd6e30ea22f5d42.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "title": { \<1>
        "type": "text"
      },
      "first_name": {
        "type": "text",
        "store": true
      },
      "last_name": {
        "type": "text",
        "store": true
      }
    }
  }
}

PUT my_index/_doc/1?refresh
{
  "title": "Mr",
  "first_name": "Barry",
  "last_name": "White"
}

GET my_index/_search
{
  "script_fields": {
    "source": {
      "script": {
        "lang": "painless",
        "source": "params._source.title + ' ' + params._source.first_name + ' ' + params._source.last_name" \<2>
      }
    },
    "stored_fields": {
      "script": {
        "lang": "painless",
        "source": "params._fields['first_name'].value + ' ' + params._fields['last_name'].value"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== scripting/engine.asciidoc: line 28: d9de409a4a197ce7cbe3714e07155d34.adoc
[source,console]
----
POST /_search
{
  "query": {
    "function_score": {
      "query": {
        "match": {
          "body": "foo"
        }
      },
      "functions": [
        {
          "script_score": {
            "script": {
                "source": "pure_df",
                "lang" : "expert_scripts",
                "params": {
                    "field": "body",
                    "term": "foo"
                }
            }
          }
        }
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping.asciidoc: line 141: b311b42b7dcc69821df1f77bfaf2d50d.adoc
[source,console]
----
PUT my_index \<1>
{
  "mappings": {
    "properties": { \<2>
      "title":    { "type": "text"  }, \<3>
      "name":     { "type": "text"  }, \<4>
      "age":      { "type": "integer" },  \<5>
      "created":  {
        "type":   "date", \<6>
        "format": "strict_date_optional_time||epoch_millis"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/removal_of_types.asciidoc: line 458: 9ee37bb017ab2f08dc870d9b2f937819.adoc
[source,console]
----
PUT index?include_type_name=false
{
  "mappings": {
    "properties": { \<1>
      "foo": {
        "type": "keyword"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 474: 21aedb3425f773979be01722661b6a89.adoc
[source,console]
----
PUT index/_mappings?include_type_name=false
{
  "properties": { \<1>
    "bar": {
      "type": "text"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 489: c81959a312a5715c52cacfe01cb0576e.adoc
[source,console]
----
GET index/_mappings?include_type_name=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 524: ab1b1bdda7528003a08d6d5911081483.adoc
[source,console]
----
PUT index/_doc/1
{
  "foo": "baz"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 554: de8d7db07c3008039c7691955a553e4c.adoc
[source,console]
----
GET index/_doc/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 568: f85d1cf4a5b9145632f585cd8c99e49d.adoc
[source,console]
----
POST index/_update/1
{
    "doc" : {
        "foo" : "qux"
    }
}

GET /index/_source/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 586: 6dce46ae7f4da2467ea1e68cc9b67b31.adoc
[source,console]
----
POST _bulk
{ "index" : { "_index" : "index", "_id" : "3" } }
{ "foo" : "baz" }
{ "index" : { "_index" : "index", "_id" : "4" } }
{ "foo" : "qux" }
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 617: b479466cd446f8112f491ce8810de43a.adoc
[source,console]
----
PUT index/my_type/1
{
  "foo": "baz"
}

GET index/_doc/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/removal_of_types.asciidoc: line 661: c6f5467904b8182d9203d98414a1bb76.adoc
[source,console]
----
PUT _template/template1
{
  "index_patterns":[ "index-1-*" ],
  "mappings": {
    "properties": {
      "foo": {
        "type": "keyword"
      }
    }
  }
}

PUT _template/template2?include_type_name=true
{
  "index_patterns":[ "index-2-*" ],
  "mappings": {
    "type": {
      "properties": {
        "foo": {
          "type": "keyword"
        }
      }
    }
  }
}

PUT index-1-01?include_type_name=true
{
  "mappings": {
    "type": {
      "properties": {
        "bar": {
          "type": "long"
        }
      }
    }
  }
}

PUT index-2-01
{
  "mappings": {
    "properties": {
      "bar": {
        "type": "long"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/alias.asciidoc: line 12: 2716453454dbf9c6dde2ea6850a62214.adoc
[source,console]
----
PUT trips
{
  "mappings": {
    "properties": {
      "distance": {
        "type": "long"
      },
      "route_length_miles": {
        "type": "alias",
        "path": "distance" \<1>
      },
      "transit_mode": {
        "type": "keyword"
      }
    }
  }
}

GET _search
{
  "query": {
    "range" : {
      "route_length_miles" : {
        "gte" : 39
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/alias.asciidoc: line 56: a2dabdcbb661e7690166ae6d0de27e46.adoc
[source,console]
----
GET trips/_field_caps?fields=route_*,transit_mode
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/alias.asciidoc: line 88: f6c9d72fa26cbedd0c3f9fa64a88c38a.adoc
[source,console]
----
GET /_search
{
  "query" : {
    "match_all": {}
  },
  "_source": "route_length_miles"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/array.asciidoc: line 42: 4d6997c70a1851f9151443c0d38b532e.adoc
[source,console]
----
PUT my_index/_doc/1
{
  "message": "some arrays in this document...",
  "tags":  [ "elasticsearch", "wow" ], \<1>
  "lists": [ \<2>
    {
      "name": "prog_list",
      "description": "programming list"
    },
    {
      "name": "cool_list",
      "description": "cool stuff list"
    }
  ]
}

PUT my_index/_doc/2 \<3>
{
  "message": "no arrays in this document...",
  "tags":  "elasticsearch",
  "lists": {
    "name": "prog_list",
    "description": "programming list"
  }
}

GET my_index/_search
{
  "query": {
    "match": {
      "tags": "elasticsearch" \<4>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/binary.asciidoc: line 12: 9296dd085f411739f5b0ec80eb9b9e27.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "name": {
        "type": "text"
      },
      "blob": {
        "type": "binary"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "name": "Some binary blob",
  "blob": "U29tZSBiaW5hcnkgYmxvYg==" \<1>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/boolean.asciidoc: line 22: 1c1be1df747c9f8ecc9f82e980387d8f.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "is_published": {
        "type": "boolean"
      }
    }
  }
}

POST my_index/_doc/1
{
  "is_published": "true" \<1>
}

GET my_index/_search
{
  "query": {
    "term": {
      "is_published": true \<2>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/boolean.asciidoc: line 58: 636ec3c018ac15ec11caf6f3d835a08c.adoc
[source,console]
----
POST my_index/_doc/1
{
  "is_published": true
}

POST my_index/_doc/2
{
  "is_published": false
}

GET my_index/_search
{
  "aggs": {
    "publish_state": {
      "terms": {
        "field": "is_published"
      }
    }
  },
  "script_fields": {
    "is_published": {
      "script": {
        "lang": "painless",
        "source": "doc['is_published'].value"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/date.asciidoc: line 35: 645136747d37368a14ab34de8bd046c6.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "date": {
        "type": "date" \<1>
      }
    }
  }
}

PUT my_index/_doc/1
{ "date": "2015-01-01" } \<2>

PUT my_index/_doc/2
{ "date": "2015-01-01T12:10:30Z" } \<3>

PUT my_index/_doc/3
{ "date": 1420070400001 } \<4>

GET my_index/_search
{
  "sort": { "date": "asc"} \<5>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/date.asciidoc: line 77: e2a042c629429855c3bcaefffb26b7fa.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "date": {
        "type":   "date",
        "format": "yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/date_nanos.asciidoc: line 32: 14dc06a4c28ffdc1f9dde97dc6838c1e.adoc
[source,console]
----
PUT my_index?include_type_name=true
{
  "mappings": {
    "_doc": {
      "properties": {
        "date": {
          "type": "date_nanos" \<1>
        }
      }
    }
  }
}

PUT my_index/_doc/1
{ "date": "2015-01-01" } \<2>

PUT my_index/_doc/2
{ "date": "2015-01-01T12:10:30.123456789Z" } \<3>

PUT my_index/_doc/3
{ "date": 1420070400 } \<4>

GET my_index/_search
{
  "sort": { "date": "asc"} \<5>
}

GET my_index/_search
{
  "script_fields" : {
    "my_field" : {
      "script" : {
        "lang" : "painless",
        "source" : "doc['date'].date.nanos" \<6>
      }
    }
  }
}

GET my_index/_search
{
  "docvalue_fields" : [
    {
      "field" : "my_ip_field",
      "format": "strict_date_time" \<7>
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/dense-vector.asciidoc: line 22: 7c7b74084cc9f18b085c25a208bd1306.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_vector": {
        "type": "dense_vector",
        "dims": 3  \<1>
      },
      "my_text" : {
        "type" : "keyword"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "my_text" : "text1",
  "my_vector" : [0.5, 10, 6]
}

PUT my_index/_doc/2
{
  "my_text" : "text2",
  "my_vector" : [-0.5, 10, 10]
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/flattened.asciidoc: line 37: 8aa74aee3dcf4b34028e4c5e1c1ed27b.adoc
[source,console]
----
PUT bug_reports
{
  "mappings": {
    "properties": {
      "title": {
        "type": "text"
      },
      "labels": {
        "type": "flattened"
      }
    }
  }
}

POST bug_reports/_doc/1
{
  "title": "Results are not sorted correctly.",
  "labels": {
    "priority": "urgent",
    "release": ["v1.2.5", "v1.3.0"],
    "timestamp": {
      "created": 1541458026,
      "closed": 1541457010
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/flattened.asciidoc: line 76: 169b39bb889ecd47541bed3e48725488.adoc
[source,console]
----
POST bug_reports/_search
{
  "query": {
    "term": {"labels": "urgent"}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/flattened.asciidoc: line 88: 2f4a55dfeba8851b306ef9c1b216ef54.adoc
[source,console]
----
POST bug_reports/_search
{
  "query": {
    "term": {"labels.release": "v1.3.0"}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-point.asciidoc: line 20: f1b512400f2f7ca0b0f2e4bb45a8b2fe.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "location": {
        "type": "geo_point"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "text": "Geo-point as an object",
  "location": { \<1>
    "lat": 41.12,
    "lon": -71.34
  }
}

PUT my_index/_doc/2
{
  "text": "Geo-point as a string",
  "location": "41.12,-71.34" \<2>
}

PUT my_index/_doc/3
{
  "text": "Geo-point as a geohash",
  "location": "drm3btev3e86" \<3>
}

PUT my_index/_doc/4
{
  "text": "Geo-point as an array",
  "location": [ -71.34, 41.12 ] \<4>
}

PUT my_index/_doc/5
{
  "text": "Geo-point as a WKT POINT primitive",
  "location" : "POINT (-71.34 41.12)" \<5>
}

GET my_index/_search
{
  "query": {
    "geo_bounding_box": { \<6>
      "location": {
        "top_left": {
          "lat": 42,
          "lon": -72
        },
        "bottom_right": {
          "lat": 40,
          "lon": -74
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 219: 3fef996cf6795e881918ffedc273c642.adoc
[source,console]
----
PUT /example
{
    "mappings": {
        "properties": {
            "location": {
                "type": "geo_shape"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 308: f851d1be5d5e5fe5455ba81344d01133.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "point",
        "coordinates" : [-77.03653, 38.897676]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 322: d673a2c008015ac6f754661ae336131c.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "POINT (-77.03653 38.897676)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 340: 21a9348800406e09b8bdaab192245096.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "linestring",
        "coordinates" : [[-77.03653, 38.897676], [-77.009051, 38.889939]]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 354: 48625e23b05d33977451cde7b98b634a.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "LINESTRING (-77.03653 38.897676, -77.009051 38.889939)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 374: 1d6ee162260a21f6e4597eadbea88650.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 390: 18c34a2c5820e330a125dfddf2624c69.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "POLYGON ((100.0 0.0, 101.0 0.0, 101.0 1.0, 100.0 1.0, 100.0 0.0))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 403: f83e3ea198f6e87046aab2c5dea60d61.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ],
            [ [100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 420: 00eb71b03b73e605da6368041a64a8ad.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "POLYGON ((100.0 0.0, 101.0 0.0, 101.0 1.0, 100.0 1.0, 100.0 0.0), (100.2 0.2, 100.8 0.2, 100.8 0.8, 100.2 0.8, 100.2 0.2))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 448: 4c42c8835876a2271e7ba63d6bd3149f.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [-177.0, 10.0], [176.0, 15.0], [172.0, 0.0], [176.0, -15.0], [-177.0, -10.0], [-177.0, 10.0] ],
            [ [178.2, 8.2], [-178.8, 8.2], [-180.8, -8.8], [178.2, 8.8] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 468: 60294ea29c96c432047d4fffcb3cc8b4.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "polygon",
        "orientation" : "clockwise",
        "coordinates" : [
            [ [100.0, 0.0], [100.0, 1.0], [101.0, 1.0], [101.0, 0.0], [100.0, 0.0] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 489: 2eca42af76c6ddc657fca3948f3865bd.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "multipoint",
        "coordinates" : [
            [102.0, 2.0], [103.0, 2.0]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 505: f1e1f4f37194a899e7056d0782804790.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "MULTIPOINT (102.0 2.0, 103.0 2.0)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 520: c4ba19b62e87ed837dc6f1f9fe184244.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "multilinestring",
        "coordinates" : [
            [ [102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0] ],
            [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0] ],
            [ [100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 538: 117096e1830e7acedf38bd6a92a9c8b4.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "MULTILINESTRING ((102.0 2.0, 103.0 2.0, 103.0 3.0, 102.0 3.0), (100.0 0.0, 101.0 0.0, 101.0 1.0, 100.0 1.0), (100.2 0.2, 100.8 0.2, 100.8 0.8, 100.2 0.8))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 553: 4be91bb5ac3a1b83b767a060c58e0b12.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "multipolygon",
        "coordinates" : [
            [ [[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0], [102.0, 2.0]] ],
            [ [[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0]],
              [[100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2]] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 571: 9290410340f0e66e67fa96aacc83bbdc.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "MULTIPOLYGON (((102.0 2.0, 103.0 2.0, 103.0 3.0, 102.0 3.0, 102.0 2.0)), ((100.0 0.0, 101.0 0.0, 101.0 1.0, 100.0 1.0, 100.0 0.0), (100.2 0.2, 100.8 0.2, 100.8 0.8, 100.2 0.8, 100.2 0.2)))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 586: a99750fb5d296fa8df97ee71a34c698c.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type": "geometrycollection",
        "geometries": [
            {
                "type": "point",
                "coordinates": [100.0, 0.0]
            },
            {
                "type": "linestring",
                "coordinates": [ [101.0, 0.0], [102.0, 1.0] ]
            }
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 609: 71bb89f56d847b636a050c553c0cd0a7.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "GEOMETRYCOLLECTION (POINT (100.0 0.0), LINESTRING (101.0 0.0, 102.0 1.0))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 626: f893fffd649507119d0a9afd98a0cf87.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "envelope",
        "coordinates" : [ [100.0, 1.0], [101.0, 0.0] ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 642: 65208190e9640cb4ca67271f1694814d.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "BBOX (100.0, 102.0, 2.0, 0.0)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/geo-shape.asciidoc: line 660: 76039c2fd422a6bb6340848cc0a78bbd.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "circle",
        "coordinates" : [101.0, 1.0],
        "radius" : "100m"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/ip.asciidoc: line 11: ef38d941f9d914c095e729046a2e2d95.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "ip_addr": {
        "type": "ip"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "ip_addr": "192.168.1.1"
}

GET my_index/_search
{
  "query": {
    "term": {
      "ip_addr": "192.168.0.0/16"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/ip.asciidoc: line 83: 96d3e3ee5d410507ca6ffb64a7e3d88e.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "term": {
      "ip_addr": "192.168.0.0/16"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/ip.asciidoc: line 98: f880cf334c8d355edc3abf196d9a8b67.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "term": {
      "ip_addr": "2001:db8::/48"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/ip.asciidoc: line 116: db5fe7de772a7607b8d104cc35a6bc6c.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "query_string" : {
      "query": "ip_addr:\"2001:db8::/48\""
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 14: 59a6a91a43e92b9f7035eadae9e1b8b9.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_join_field": { \<1>
        "type": "join",
        "relations": {
          "question": "answer" \<2>
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 39: 3a9297c0898dfe7b38da82635b7dc1ff.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "text": "This is a question",
  "my_join_field": {
    "name": "question" \<1>
  }
}

PUT my_index/_doc/2?refresh
{
  "text": "This is another question",
  "my_join_field": {
    "name": "question"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 65: fcfe9592f9c8a59fe2b2110246b9a462.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "text": "This is a question",
  "my_join_field": "question" \<1>
}

PUT my_index/_doc/2?refresh
{
  "text": "This is another question",
  "my_join_field": "question"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 92: 1d13c92896ed8a8bd273773481c90a3c.adoc
[source,console]
----
PUT my_index/_doc/3?routing=1&refresh \<1>
{
  "text": "This is an answer",
  "my_join_field": {
    "name": "answer", \<2>
    "parent": "1" \<3>
  }
}

PUT my_index/_doc/4?routing=1&refresh
{
  "text": "This is another answer",
  "my_join_field": {
    "name": "answer",
    "parent": "1"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 160: a5e3a4c6dbda1f1cd7f22720ef362de2.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "match_all": {}
  },
  "sort": ["_id"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 268: 26fe7b3c9aeab972725b6d708cc6df22.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "parent_id": { \<1>
      "type": "answer",
      "id": "1"
    }
  },
  "aggs": {
    "parents": {
      "terms": {
        "field": "my_join_field#question", \<2>
        "size": 10
      }
    }
  },
  "script_fields": {
    "parent": {
      "script": {
         "source": "doc['my_join_field#question']" \<3>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 322: e0b414b45460d424ab838b5136492fa1.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_join_field": {
        "type": "join",
        "relations": {
           "question": "answer"
        },
        "eager_global_ordinals": false
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 344: 2c090fe7ec7b66b3f5c178d71c46323b.adoc
[source,console]
----
# Per-index
GET _stats/fielddata?human&fields=my_join_field#question

# Per-node per-index
GET _nodes/stats/indices/fielddata?human&fields=my_join_field#question
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 359: bc358cfd219faf9353cb65820981a0df.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_join_field": {
        "type": "join",
        "relations": {
          "question": ["answer", "comment"]  \<1>
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 387: 1cc03b9715d9a3f876f7b7bb7fe66394.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_join_field": {
        "type": "join",
        "relations": {
          "question": ["answer", "comment"],  \<1>
          "answer": "vote" \<2>
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/parent-join.asciidoc: line 423: 6eecf0fbf95d132beb0f49b3181da419.adoc
[source,console]
----
PUT my_index/_doc/3?routing=1&refresh \<1>
{
  "text": "This is a vote",
  "my_join_field": {
    "name": "vote",
    "parent": "2" \<2>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/keyword.asciidoc: line 20: 46c4b0dfb674825f9579203d41e7f404.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "tags": {
        "type":  "keyword"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/nested.asciidoc: line 19: 8baccd8688a6bad1749b8935f9601ea4.adoc
[source,console]
----
PUT my_index/_doc/1
{
  "group" : "fans",
  "user" : [ \<1>
    {
      "first" : "John",
      "last" :  "Smith"
    },
    {
      "first" : "Alice",
      "last" :  "White"
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/nested.asciidoc: line 55: b214942b938e47f2c486e523546cb574.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "user.first": "Alice" }},
        { "match": { "user.last":  "Smith" }}
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/nested.asciidoc: line 81: b919f88e6f47a40d5793479440a90ba6.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "user": {
        "type": "nested" \<1>
      }
    }
  }
}

PUT my_index/_doc/1
{
  "group" : "fans",
  "user" : [
    {
      "first" : "John",
      "last" :  "Smith"
    },
    {
      "first" : "Alice",
      "last" :  "White"
    }
  ]
}

GET my_index/_search
{
  "query": {
    "nested": {
      "path": "user",
      "query": {
        "bool": {
          "must": [
            { "match": { "user.first": "Alice" }},
            { "match": { "user.last":  "Smith" }} \<2>
          ]
        }
      }
    }
  }
}

GET my_index/_search
{
  "query": {
    "nested": {
      "path": "user",
      "query": {
        "bool": {
          "must": [
            { "match": { "user.first": "Alice" }},
            { "match": { "user.last":  "White" }} \<3>
          ]
        }
      },
      "inner_hits": { \<4>
        "highlight": {
          "fields": {
            "user.first": {}
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/numeric.asciidoc: line 22: a71c438cc4df1cafe3109ccff475afdb.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "number_of_bytes": {
        "type": "integer"
      },
      "time_in_seconds": {
        "type": "float"
      },
      "price": {
        "type": "scaled_float",
        "scaling_factor": 100
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/object.asciidoc: line 11: 9bb2dc0500011e0774f4bdfebf57a7a0.adoc
[source,console]
----
PUT my_index/_doc/1
{ \<1>
  "region": "US",
  "manager": { \<2>
    "age":     30,
    "name": { \<3>
      "first": "John",
      "last":  "Smith"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/object.asciidoc: line 46: 8e907d7533581efadf7831b05dd9f794.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": { \<1>
      "region": {
        "type": "keyword"
      },
      "manager": { \<2>
        "properties": {
          "age":  { "type": "integer" },
          "name": { \<3>
            "properties": {
              "first": { "type": "text" },
              "last":  { "type": "text" }
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 20: 05c14dd0bda732cfa36f7fb88138d98e.adoc
[source,console]
----
PUT my_index
{
    "mappings": {
        "properties": {
            "query": {
                "type": "percolator"
            },
            "field": {
                "type": "text"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 41: dc1f917924b43416a9ec7f8c9505f885.adoc
[source,console]
----
PUT my_index/_doc/match_value
{
    "query" : {
        "match" : {
            "field" : "value"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 72: 3eb4cdd4a799a117ac1ff5f02b18a512.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "properties": {
      "query" : {
        "type" : "percolator"
      },
      "body" : {
        "type": "text"
      }
    }
  }
}

POST _aliases
{
  "actions": [
    {
      "add": {
        "index": "index",
        "alias": "queries" \<1>
      }
    }
  ]
}

PUT queries/_doc/1?refresh
{
  "query" : {
    "match" : {
      "body" : "quick brown fox"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 118: f09817fd13ff3dce52eb79d0722409c3.adoc
[source,console]
----
PUT new_index
{
  "mappings": {
    "properties": {
      "query" : {
        "type" : "percolator"
      },
      "body" : {
        "type": "text"
      }
    }
  }
}

POST /_reindex?refresh
{
  "source": {
    "index": "index"
  },
  "dest": {
    "index": "new_index"
  }
}

POST _aliases
{
  "actions": [ \<1>
    {
      "remove": {
        "index" : "index",
        "alias": "queries"
      }
    },
    {
      "add": {
        "index": "new_index",
        "alias": "queries"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 169: 60cab62af1540db2ad3b696b0ee1d7a8.adoc
[source,console]
----
GET /queries/_search
{
  "query": {
    "percolate" : {
      "field" : "query",
      "document" : {
        "body" : "fox jumps over the lazy dog"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 268: 360c4f373e72ba861584ee85bd218124.adoc
[source,console]
----
PUT /test_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer" : {
          "tokenizer": "standard",
          "filter" : ["lowercase", "porter_stem"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "query" : {
        "type": "percolator"
      },
      "body" : {
        "type": "text",
        "analyzer": "my_analyzer" \<1>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 302: 3e13c8a81f40a537eddc0b57633b45f8.adoc
[source,console]
----
POST /test_index/_analyze
{
  "analyzer" : "my_analyzer",
  "text" : "missing bicycles"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 340: 7a2b9a7b2b6553a48bd4db60a939c0fc.adoc
[source,console]
----
PUT /test_index/_doc/1?refresh
{
  "query" : {
    "match" : {
      "body" : {
        "query" : "miss bicycl",
        "analyzer" : "whitespace" \<1>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 365: 45813d971bfa890ffa2f51f3f480cce5.adoc
[source,console]
----
GET /test_index/_search
{
  "query": {
    "percolate" : {
      "field" : "query",
      "document" : {
        "body" : "Bycicles are missing"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 439: a04a8d90f8245ff5f30a9983909faa1d.adoc
[source,console]
----
PUT my_queries1
{
  "settings": {
    "analysis": {
      "analyzer": {
        "wildcard_prefix": { \<1>
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "wildcard_edge_ngram"
          ]
        }
      },
      "filter": {
        "wildcard_edge_ngram": { \<2>
          "type": "edge_ngram",
          "min_gram": 1,
          "max_gram": 32
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "query": {
        "type": "percolator"
      },
      "my_field": {
        "type": "text",
        "fields": {
          "prefix": { \<3>
            "type": "text",
            "analyzer": "wildcard_prefix",
            "search_analyzer": "standard"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 508: ed688d86eeaa4d7969acb0f574eb917f.adoc
[source,console]
----
PUT /my_queries1/_doc/1?refresh
{
  "query": {
    "term": {
      "my_field.prefix": "abc"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 527: d2f6040c058a9555dfa62bb42d896a8f.adoc
[source,console]
----
GET /my_queries1/_search
{
  "query": {
    "percolate": {
      "field": "query",
      "document": {
        "my_field": "abcd"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 590: 343dd09a8c76987e586858be3bdc51eb.adoc
[source,console]
----
PUT my_queries2
{
  "settings": {
    "analysis": {
      "analyzer": {
        "wildcard_suffix": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "reverse",
            "wildcard_edge_ngram"
          ]
        },
        "wildcard_suffix_search_time": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "reverse"
          ]
        }
      },
      "filter": {
        "wildcard_edge_ngram": {
          "type": "edge_ngram",
          "min_gram": 1,
          "max_gram": 32
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "query": {
        "type": "percolator"
      },
      "my_field": {
        "type": "text",
        "fields": {
          "suffix": {
            "type": "text",
            "analyzer": "wildcard_suffix",
            "search_analyzer": "wildcard_suffix_search_time" \<1>
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 666: bd7330af2609bdd8aa10958f5e640b93.adoc
[source,console]
----
PUT /my_queries2/_doc/2?refresh
{
  "query": {
    "match": { \<1>
      "my_field.suffix": "xyz"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/percolator.asciidoc: line 686: 4aa81a694266fb634904224d14cd9a87.adoc
[source,console]
----
GET /my_queries2/_search
{
  "query": {
    "percolate": {
      "field": "query",
      "document": {
        "my_field": "wxyz"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/range.asciidoc: line 21: 2b371fbf0654d76436d49f5703d6c137.adoc
[source,console]
----
PUT range_index
{
  "settings": {
    "number_of_shards": 2
  },
  "mappings": {
    "properties": {
      "expected_attendees": {
        "type": "integer_range"
      },
      "time_frame": {
        "type": "date_range", \<1>
        "format": "yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis"
      }
    }
  }
}

PUT range_index/_doc/1?refresh
{
  "expected_attendees" : { \<2>
    "gte" : 10,
    "lte" : 20
  },
  "time_frame" : { \<3>
    "gte" : "2015-10-31 12:00:00", \<4>
    "lte" : "2015-11-01"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/range.asciidoc: line 63: 84edb44c5b74426f448b2baa101092d6.adoc
[source,console]
----
GET range_index/_search
{
  "query" : {
    "term" : {
      "expected_attendees" : {
        "value": 12
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/range.asciidoc: line 120: 1572696b97822d3332be51700e09672f.adoc
[source,console]
----
GET range_index/_search
{
  "query" : {
    "range" : {
      "time_frame" : { \<1>
        "gte" : "2015-10-31",
        "lte" : "2015-11-01",
        "relation" : "within" \<2>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/range.asciidoc: line 187: f894f680943a8af8328aab4741e6ab93.adoc
[source,console]
----
PUT range_index/_mapping
{
  "properties": {
    "ip_whitelist": {
      "type": "ip_range"
    }
  }
}

PUT range_index/_doc/2
{
  "ip_whitelist" : "192.168.0.0/16"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/rank-feature.asciidoc: line 11: 1e088f892b20697fd6e537a3ecf624ee.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "pagerank": {
        "type": "rank_feature" \<1>
      },
      "url_length": {
        "type": "rank_feature",
        "positive_score_impact": false \<2>
      }
    }
  }
}

PUT my_index/_doc/1
{
  "pagerank": 8,
  "url_length": 22
}

GET my_index/_search
{
  "query": {
    "rank_feature": {
      "field": "pagerank"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/rank-features.asciidoc: line 16: 17867d05695ddeaee5d5aea2263ac589.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "topics": {
        "type": "rank_features" \<1>
      }
    }
  }
}

PUT my_index/_doc/1
{
  "topics": { \<2>
    "politics": 20,
    "economics": 50.8
  }
}

PUT my_index/_doc/2
{
  "topics": {
    "politics": 5.2,
    "sports": 80.1
  }
}

GET my_index/_search
{
  "query": {
    "rank_feature": {
      "field": "topics.politics"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/search-as-you-type.asciidoc: line 18: 6f31f9cfe0dd741ccad4af62ba8f815e.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_field": {
        "type": "search_as_you_type"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/search-as-you-type.asciidoc: line 72: 867e5fad9c57055712fe2b69fa69a97c.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "my_field": "quick brown fox jump lazy dog"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/search-as-you-type.asciidoc: line 89: 9bd25962f177e86dbc5a8030a420cc31.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "multi_match": {
      "query": "brown f",
      "type": "bool_prefix",
      "fields": [
        "my_field",
        "my_field._2gram",
        "my_field._3gram"
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/search-as-you-type.asciidoc: line 151: 0ced86822f8c0a479af5e1fe28dfc2ec.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "match_phrase_prefix": {
      "my_field": "brown f"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/sparse-vector.asciidoc: line 27: 9e9bd85e9135533e7fb8b079a6d4ae21.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_vector": {
        "type": "sparse_vector"
      },
      "my_text" : {
        "type" : "keyword"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "my_text" : "text1",
  "my_vector" : {"1": 0.5, "5": -0.5,  "100": 1}
}

PUT my_index/_doc/2
{
  "my_text" : "text2",
  "my_vector" : {"103": 0.5, "4": -0.5,  "5": 1, "11" : 1.2}
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/text.asciidoc: line 22: 24ea1c6cdf10165228951e562b7ec0ef.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "full_name": {
        "type":  "text"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/token-count.asciidoc: line 14: 98c3d643f71c1fd71238ebb748e846e7.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "name": { \<1>
        "type": "text",
        "fields": {
          "length": { \<2>
            "type":     "token_count",
            "analyzer": "standard"
          }
        }
      }
    }
  }
}

PUT my_index/_doc/1
{ "name": "John Smith" }

PUT my_index/_doc/2
{ "name": "Rachel Alice Williams" }

GET my_index/_search
{
  "query": {
    "term": {
      "name.length": 3 \<3>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 84: 04409304cd13f4cfa8efbed87aea9b15.adoc
[source,console]
----
PUT /example
{
    "mappings": {
        "properties": {
            "geometry": {
                "type": "shape"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 149: a55bdc75b139d947d64b32dc9824e558.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "point",
        "coordinates" : [-377.03653, 389.897676]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 163: 8fb11f30a609b13c1373ce4a26124159.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "POINT (-377.03653 389.897676)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 181: bff745b32238691bae88de22530643cb.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "linestring",
        "coordinates" : [[-377.03653, 389.897676], [-377.009051, 389.889939]]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 195: c4f62c66f967c6e0da3616957efbeccf.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "LINESTRING (-377.03653 389.897676, -377.009051 389.889939)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 212: 567829f263dd472bf76500db05d2200a.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [1000.0, -1001.0], [1001.0, -1001.0], [1001.0, -1000.0], [1000.0, -1000.0], [1000.0, -1001.0] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 228: ae5f9956a525e976bfc37dcb4e7414ae.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "POLYGON ((1000.0 -1001.0, 1001.0 -1001.0, 1001.0 -1000.0, 1000.0 -1000.0, 1000.0 -1001.0))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 241: 4f869e56eb25586ac402ccfb00aa0359.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [1000.0, -1001.0], [1001.0, -1001.0], [1001.0, -1000.0], [1000.0, -1000.0], [1000.0, -1001.0] ],
            [ [1000.2, -1001.2], [1000.8, -1001.2], [1000.8, -1001.8], [1000.2, -1001.8], [1000.2, -1001.2] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 258: a5816a58c1fa769c23c6211ab449e6f3.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "POLYGON ((1000.0 1000.0, 1001.0 1000.0, 1001.0 1001.0, 1000.0 1001.0, 1000.0 1000.0), (1000.2 1000.2, 1000.8 1000.2, 1000.8 1000.8, 1000.2 1000.8, 1000.2 1000.2))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 281: 1f1ccd9af526b2251bf960a85288fc97.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "polygon",
        "orientation" : "clockwise",
        "coordinates" : [
            [ [1000.0, 1000.0], [1000.0, 1001.0], [1001.0, 1001.0], [1001.0, 1000.0], [1000.0, 1000.0] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 302: 02da8c5d098d9e7cc263efac344a96de.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "multipoint",
        "coordinates" : [
            [1002.0, 1002.0], [1003.0, 2000.0]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 318: 577b09f45256ff855252d29e1d1cd433.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "MULTIPOINT (1002.0 2000.0, 1003.0 2000.0)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 333: 76c551d13c3d907ad6dc56b85bec76de.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "multilinestring",
        "coordinates" : [
            [ [1002.0, 200.0], [1003.0, 200.0], [1003.0, 300.0], [1002.0, 300.0] ],
            [ [1000.0, 100.0], [1001.0, 100.0], [1001.0, 100.0], [1000.0, 100.0] ],
            [ [1000.2, 100.2], [1000.8, 100.2], [1000.8, 100.8], [1000.2, 100.8] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 351: 9aeca1d56bb2ff0701587b269163311e.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "MULTILINESTRING ((1002.0 200.0, 1003.0 200.0, 1003.0 300.0, 1002.0 300.0), (1000.0 100.0, 1001.0 100.0, 1001.0 100.0, 1000.0 100.0), (1000.2 0.2, 1000.8 100.2, 1000.8 100.8, 1000.2 100.8))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 366: 9d2464f0dce99d47f2699d953ee55b37.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "multipolygon",
        "coordinates" : [
            [ [[1002.0, 200.0], [1003.0, 200.0], [1003.0, 300.0], [1002.0, 300.0], [1002.0, 200.0]] ],
            [ [[1000.0, 200.0], [1001.0, 100.0], [1001.0, 100.0], [1000.0, 100.0], [1000.0, 100.0]],
              [[1000.2, 200.2], [1000.8, 100.2], [1000.8, 100.8], [1000.2, 100.8], [1000.2, 100.2]] ]
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 384: e7f366d76e3e53b4c0c30f7b0c21fbc0.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "MULTIPOLYGON (((1002.0 200.0, 1003.0 200.0, 1003.0 300.0, 1002.0 300.0, 102.0 200.0)), ((1000.0 100.0, 1001.0 100.0, 1001.0 100.0, 1000.0 100.0, 1000.0 100.0), (1000.2 100.2, 1000.8 100.2, 1000.8 100.8, 1000.2 100.8, 1000.2 100.2)))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 399: 4b3ef0f1d3cb9598a3fb94c03948e9e2.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type": "geometrycollection",
        "geometries": [
            {
                "type": "point",
                "coordinates": [1000.0, 100.0]
            },
            {
                "type": "linestring",
                "coordinates": [ [1001.0, 100.0], [1002.0, 100.0] ]
            }
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 422: 72ef8c634b3594963f203d2b3631c12e.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "GEOMETRYCOLLECTION (POINT (1000.0 100.0), LINESTRING (1001.0 100.0, 1002.0 100.0))"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 438: 6dd3c5a716302fdd39fcf5c150b826bc.adoc
[source,console]
----
POST /example/_doc
{
    "location" : {
        "type" : "envelope",
        "coordinates" : [ [1000.0, 100.0], [1001.0, 100.0] ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/types/shape.asciidoc: line 454: 70932f56df27fb502d2095fefcaa83d6.adoc
[source,console]
----
POST /example/_doc
{
    "location" : "BBOX (1000.0, 1002.0, 2000.0, 1000.0)"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/field-names-field.asciidoc: line 24: e4fc720e1f7f2f9a7edf48184fd4a0dd.adoc
[source,console]
----
PUT tweets
{
  "mappings": {
    "_field_names": {
      "enabled": false
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/ignored-field.asciidoc: line 18: 3fe0fb38f75d2a34fb1e6ac9bedbcdbc.adoc
[source,console]
----
GET _search
{
  "query": {
    "exists": {
      "field": "_ignored"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/ignored-field.asciidoc: line 34: cf47cd4a39cd62a3ecad919e54a67bca.adoc
[source,console]
----
GET _search
{
  "query": {
    "term": {
      "_ignored": "@timestamp"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/id-field.asciidoc: line 12: 3abdbdc99e203e87332d387cfbdeafaa.adoc
[source,console]
----
# Example documents
PUT my_index/_doc/1
{
  "text": "Document with ID 1"
}

PUT my_index/_doc/2&refresh=true
{
  "text": "Document with ID 2"
}

GET my_index/_search
{
  "query": {
    "terms": {
      "_id": [ "1", "2" ] \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/index-field.asciidoc: line 17: e8146b1dda248705f7fb1fb6306d9d86.adoc
[source,console]
----
# Example documents
PUT index_1/_doc/1
{
  "text": "Document in index 1"
}

PUT index_2/_doc/2?refresh=true
{
  "text": "Document in index 2"
}

GET index_1,index_2/_search
{
  "query": {
    "terms": {
      "_index": ["index_1", "index_2"] \<1>
    }
  },
  "aggs": {
    "indices": {
      "terms": {
        "field": "_index", \<2>
        "size": 10
      }
    }
  },
  "sort": [
    {
      "_index": { \<3>
        "order": "asc"
      }
    }
  ],
  "script_fields": {
    "index_name": {
      "script": {
        "lang": "painless",
        "source": "doc['_index']" \<4>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/meta-field.asciidoc: line 9: e10d7f411744eb1d5ddaa2f70a368490.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "_meta": { \<1>
      "class": "MyApp::User",
      "version": {
        "min": "1.0",
        "max": "1.3"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/meta-field.asciidoc: line 31: 019eab381444c3d77ad3bb4e39edfac6.adoc
[source,console]
----
PUT my_index/_mapping
{
  "_meta": {
    "class": "MyApp2::User3",
    "version": {
      "min": "1.3",
      "max": "1.5"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/routing-field.asciidoc: line 15: b684073ea8d34359c290c663d2a5e798.adoc
[source,console]
----
PUT my_index/_doc/1?routing=user1&refresh=true \<1>
{
  "title": "This is a document"
}

GET my_index/_doc/1?routing=user1 \<2>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/routing-field.asciidoc: line 34: 6817609dd2fcb73b9920327c5cf5ec77.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "terms": {
      "_routing": [ "user1" ] \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/routing-field.asciidoc: line 55: 134bdbfb50c81dd3c487514faabc81d3.adoc
[source,console]
----
GET my_index/_search?routing=user1,user2 \<1>
{
  "query": {
    "match": {
      "title": "document"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/routing-field.asciidoc: line 81: 4f3089b403945e391f03280ae2f360a4.adoc
[source,console]
----
PUT my_index2
{
  "mappings": {
    "_routing": {
      "required": true \<1>
    }
  }
}

PUT my_index2/_doc/1 \<2>
{
  "text": "No routing value provided"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/source-field.asciidoc: line 16: 50246e04b49dab320409b95526e6e34c.adoc
[source,console]
----
PUT tweets
{
  "mappings": {
    "_source": {
      "enabled": false
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/source-field.asciidoc: line 86: b557f114e21dbc6f531d4e7621a08e8f.adoc
[source,console]
----
PUT logs
{
  "mappings": {
    "_source": {
      "includes": [
        "*.count",
        "meta.*"
      ],
      "excludes": [
        "meta.description",
        "meta.other.*"
      ]
    }
  }
}

PUT logs/_doc/1
{
  "requests": {
    "count": 10,
    "foo": "bar" \<1>
  },
  "meta": {
    "name": "Some metric",
    "description": "Some metric description", \<1>
    "other": {
      "foo": "one", \<1>
      "baz": "two" \<1>
    }
  }
}

GET logs/_search
{
  "query": {
    "match": {
      "meta.other.foo": "one" \<2>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/fields/type-field.asciidoc: line 14: 1e867a2d4e10e70350d458a473544022.adoc
[source,console]
----
# Example documents

PUT my_index/_doc/1?refresh=true
{
  "text": "Document with type 'doc'"
}

GET my_index/_search
{
  "query": {
    "term": {
      "_type": "_doc"  \<1>
    }
  },
  "aggs": {
    "types": {
      "terms": {
        "field": "_type", \<2>
        "size": 10
      }
    }
  },
  "sort": [
    {
      "_type": { \<3>
        "order": "desc"
      }
    }
  ],
  "script_fields": {
    "type": {
      "script": {
        "lang": "painless",
        "source": "doc['_type']" \<4>
      }
    }
  }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/analyzer.asciidoc: line 43: 0ae23713026515ec5047c7bbcf9842f7.adoc
[source,console]
----
PUT /my_index
{
  "mappings": {
    "properties": {
      "text": { \<1>
        "type": "text",
        "fields": {
          "english": { \<2>
            "type":     "text",
            "analyzer": "english"
          }
        }
      }
    }
  }
}

GET my_index/_analyze \<3>
{
  "field": "text",
  "text": "The quick Brown Foxes."
}

GET my_index/_analyze \<4>
{
  "field": "text.english",
  "text": "The quick Brown Foxes."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/analyzer.asciidoc: line 93: 5bf1e4194dce1e15eb7f48fd72b1fc6b.adoc
[source,console]
----
PUT my_index
{
   "settings":{
      "analysis":{
         "analyzer":{
            "my_analyzer":{ \<1>
               "type":"custom",
               "tokenizer":"standard",
               "filter":[
                  "lowercase"
               ]
            },
            "my_stop_analyzer":{ \<2>
               "type":"custom",
               "tokenizer":"standard",
               "filter":[
                  "lowercase",
                  "english_stop"
               ]
            }
         },
         "filter":{
            "english_stop":{
               "type":"stop",
               "stopwords":"_english_"
            }
         }
      }
   },
   "mappings":{
       "properties":{
          "title": {
             "type":"text",
             "analyzer":"my_analyzer", \<3>
             "search_analyzer":"my_stop_analyzer", \<4>
             "search_quote_analyzer":"my_analyzer" \<5>
         }
      }
   }
}

PUT my_index/_doc/1
{
   "title":"The Quick Brown Fox"
}

PUT my_index/_doc/2
{
   "title":"A Quick Brown Fox"
}

GET my_index/_search
{
   "query":{
      "query_string":{
         "query":"\"the quick brown fox\"" \<6>
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/normalizer.asciidoc: line 14: 4cd40113e0fc90c37976f28d7e4a2327.adoc
[source,console]
----
PUT index
{
  "settings": {
    "analysis": {
      "normalizer": {
        "my_normalizer": {
          "type": "custom",
          "char_filter": [],
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "foo": {
        "type": "keyword",
        "normalizer": "my_normalizer"
      }
    }
  }
}

PUT index/_doc/1
{
  "foo": "BÀR"
}

PUT index/_doc/2
{
  "foo": "bar"
}

PUT index/_doc/3
{
  "foo": "baz"
}

POST index/_refresh

GET index/_search
{
  "query": {
    "term": {
      "foo": "BAR"
    }
  }
}

GET index/_search
{
  "query": {
    "match": {
      "foo": "BAR"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/normalizer.asciidoc: line 124: 6f842819c50e8490080dd085e0c6aca3.adoc
[source,console]
----
GET index/_search
{
  "size": 0,
  "aggs": {
    "foo_terms": {
      "terms": {
        "field": "foo"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/boost.asciidoc: line 8: dcef5a46104e2602a0b9f5d968f66f4d.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "boost": 2 \<1>
      },
      "content": {
        "type": "text"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/boost.asciidoc: line 34: df827f97ecf543a1722003edbf277c01.adoc
[source,console]
----
POST _search
{
    "query": {
        "match" : {
            "title": {
                "query": "quick brown fox"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/boost.asciidoc: line 51: 36a07d7014cdd3d6cd9d97651e66e7ef.adoc
[source,console]
----
POST _search
{
    "query": {
        "match" : {
            "title": {
                "query": "quick brown fox",
                "boost": 2
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/coerce.asciidoc: line 19: 5c734d4a7252cc155f8dc90c4785f491.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "number_one": {
        "type": "integer"
      },
      "number_two": {
        "type": "integer",
        "coerce": false
      }
    }
  }
}

PUT my_index/_doc/1
{
  "number_one": "10" \<1>
}

PUT my_index/_doc/2
{
  "number_two": "10" \<2>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/coerce.asciidoc: line 60: dad2db81c728827a782a3fefd3399849.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "index.mapping.coerce": false
  },
  "mappings": {
    "properties": {
      "number_one": {
        "type": "integer",
        "coerce": true
      },
      "number_two": {
        "type": "integer"
      }
    }
  }
}

PUT my_index/_doc/1
{ "number_one": "10" } \<1>

PUT my_index/_doc/2
{ "number_two": "10" } \<2>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/copy-to.asciidoc: line 10: 363d200a378f8c3acc6d8a77df42eba7.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "first_name": {
        "type": "text",
        "copy_to": "full_name" \<1>
      },
      "last_name": {
        "type": "text",
        "copy_to": "full_name" \<1>
      },
      "full_name": {
        "type": "text"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "first_name": "John",
  "last_name": "Smith"
}

GET my_index/_search
{
  "query": {
    "match": {
      "full_name": { \<2>
        "query": "John Smith",
        "operator": "and"
      }
    }
  }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/doc-values.asciidoc: line 25: 4e75503583efc222045e0be4430a2863.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "status_code": { \<1>
        "type":       "keyword"
      },
      "session_id": { \<2>
        "type":       "keyword",
        "doc_values": false
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/dynamic.asciidoc: line 9: e65e9805b8b17f72616f099e11a5c337.adoc
[source,console]
----
PUT my_index/_doc/1 \<1>
{
  "username": "johnsmith",
  "name": {
    "first": "John",
    "last": "Smith"
  }
}

GET my_index/_mapping \<2>

PUT my_index/_doc/2 \<3>
{
  "username": "marywhite",
  "email": "mary@white.com",
  "name": {
    "first": "Mary",
    "middle": "Alice",
    "last": "White"
  }
}

GET my_index/_mapping \<4>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/dynamic.asciidoc: line 60: 4b478d9b1231513362d2fa8c766cd0a5.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic": false, \<1>
    "properties": {
      "user": { \<2>
        "properties": {
          "name": {
            "type": "text"
          },
          "social_networks": { \<3>
            "dynamic": true,
            "properties": {}
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/enabled.asciidoc: line 17: b0b00ab5b673d747d36deabbc4359859.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "user_id": {
        "type":  "keyword"
      },
      "last_updated": {
        "type": "date"
      },
      "session_data": { \<1>
        "type": "object",
        "enabled": false
      }
    }
  }
}

PUT my_index/_doc/session_1
{
  "user_id": "kimchy",
  "session_data": { \<2>
    "arbitrary_object": {
      "some_array": [ "foo", "bar", { "baz": 2 } ]
    }
  },
  "last_updated": "2015-12-06T18:20:22"
}

PUT my_index/_doc/session_2
{
  "user_id": "jpountz",
  "session_data": "none", \<3>
  "last_updated": "2015-12-06T18:22:13"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/enabled.asciidoc: line 64: d31274ad53af4baa23ec3e5000783cbd.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "enabled": false \<1>
  }
}

PUT my_index/_doc/session_1
{
  "user_id": "kimchy",
  "session_data": {
    "arbitrary_object": {
      "some_array": [ "foo", "bar", { "baz": 2 } ]
    }
  },
  "last_updated": "2015-12-06T18:20:22"
}

GET my_index/_doc/session_1 \<2>

GET my_index/_mapping \<3>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/enabled.asciidoc: line 98: e93514654ea0c7c9f15cda0eed61a292.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "session_data": {
        "type": "object",
        "enabled": false
      }
    }
  }
}

PUT my_index/_doc/session_1
{
  "session_data": "foo bar" \<1>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/eager-global-ordinals.asciidoc: line 38: f7682345a4e36a4c6e553902039a9410.adoc
[source,console]
----
PUT my_index/_mapping
{
  "properties": {
    "tags": {
      "type": "keyword",
      "eager_global_ordinals": true
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/eager-global-ordinals.asciidoc: line 77: 9c9221059c06dd26041a95b93ec9b6df.adoc
[source,console]
----
PUT my_index/_mapping
{
  "properties": {
    "tags": {
      "type": "keyword",
      "eager_global_ordinals": false
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/fielddata.asciidoc: line 58: ef9111c1648d7820925f12e07d1346c5.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "my_field": { \<1>
        "type": "text",
        "fields": {
          "keyword": { \<2>
            "type": "keyword"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/fielddata.asciidoc: line 86: a7c15fe6b5779c84ce9a34bf4b2a7ab7.adoc
[source,console]
----
PUT my_index/_mapping
{
  "properties": {
    "my_field": { \<1>
      "type":     "text",
      "fielddata": true
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/fielddata.asciidoc: line 120: 6a81d00f0d73bc5985e76b3cadab645e.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "tag": {
        "type": "text",
        "fielddata": true,
        "fielddata_frequency_filter": {
          "min": 0.001,
          "max": 0.1,
          "min_segment_size": 500
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/format.asciidoc: line 13: 7f465b7e8ed42df6c42251b4481e699e.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "date": {
        "type":   "date",
        "format": "yyyy-MM-dd"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/ignore-above.asciidoc: line 10: 17a77b9c39526c865d7bd6b72cf4a79f.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "message": {
        "type": "keyword",
        "ignore_above": 20 \<1>
      }
    }
  }
}

PUT my_index/_doc/1 \<2>
{
  "message": "Syntax error"
}

PUT my_index/_doc/2 \<3>
{
  "message": "Syntax error with some long stacktrace"
}

GET my_index/_search \<4>
{
  "aggs": {
    "messages": {
      "terms": {
        "field": "message"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/ignore-malformed.asciidoc: line 16: 56af112ba65955f3ca5ef61a199c0daa.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "number_one": {
        "type": "integer",
        "ignore_malformed": true
      },
      "number_two": {
        "type": "integer"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "text":       "Some text value",
  "number_one": "foo" \<1>
}

PUT my_index/_doc/2
{
  "text":       "Some text value",
  "number_two": "foo" \<2>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/ignore-malformed.asciidoc: line 60: 835faff0d2e8874b7b9693376fa7fc57.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "index.mapping.ignore_malformed": true \<1>
  },
  "mappings": {
    "properties": {
      "number_one": { \<1>
        "type": "byte"
      },
      "number_two": {
        "type": "integer",
        "ignore_malformed": false \<2>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/index-options.asciidoc: line 37: 3a24ebb542f657420fcd8fdf3f757ce6.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "index_options": "offsets"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "text": "Quick brown fox"
}

GET my_index/_search
{
  "query": {
    "match": {
      "text": "brown fox"
    }
  },
  "highlight": {
    "fields": {
      "text": {} \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/index-prefixes.asciidoc: line 21: ff5d15a265855b1c11cb20ceef6a1b58.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "body_text": {
        "type": "text",
        "index_prefixes": { }    \<1>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/index-prefixes.asciidoc: line 42: b19ec4a20c19082e5c40e3b1f28bfbcb.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "full_name": {
        "type": "text",
        "index_prefixes": {
          "min_chars" : 1,
          "max_chars" : 10
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/multi-fields.asciidoc: line 10: 5271f4ff29bb48838396e5a674664ee0.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "city": {
        "type": "text",
        "fields": {
          "raw": { \<1>
            "type":  "keyword"
          }
        }
      }
    }
  }
}

PUT my_index/_doc/1
{
  "city": "New York"
}

PUT my_index/_doc/2
{
  "city": "York"
}

GET my_index/_search
{
  "query": {
    "match": {
      "city": "york" \<2>
    }
  },
  "sort": {
    "city.raw": "asc" \<3>
  },
  "aggs": {
    "Cities": {
      "terms": {
        "field": "city.raw" \<3>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/multi-fields.asciidoc: line 75: fc8097bdfb6f3a4017bf4186ccca8a84.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "text": { \<1>
        "type": "text",
        "fields": {
          "english": { \<2>
            "type":     "text",
            "analyzer": "english"
          }
        }
      }
    }
  }
}

PUT my_index/_doc/1
{ "text": "quick brown fox" } \<3>

PUT my_index/_doc/2
{ "text": "quick brown foxes" } \<3>

GET my_index/_search
{
  "query": {
    "multi_match": {
      "query": "quick brown foxes",
      "fields": [ \<4>
        "text",
        "text.english"
      ],
      "type": "most_fields" \<4>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/norms.asciidoc: line 21: f9d15004aba50331c595837c4546aeef.adoc
[source,console]
----
PUT my_index/_mapping
{
  "properties": {
    "title": {
      "type": "text",
      "norms": false
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/null-value.asciidoc: line 12: 463e64093c0dfba910eb5b248085584f.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "status_code": {
        "type":       "keyword",
        "null_value": "NULL" \<1>
      }
    }
  }
}

PUT my_index/_doc/1
{
  "status_code": null
}

PUT my_index/_doc/2
{
  "status_code": [] \<2>
}

GET my_index/_search
{
  "query": {
    "term": {
      "status_code": "NULL" \<3>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/position-increment-gap.asciidoc: line 15: 5e17abef396d757d65edf81dff5701b6.adoc
[source,console]
----
PUT my_index/_doc/1
{
    "names": [ "John Abraham", "Lincoln Smith"]
}

GET my_index/_search
{
    "query": {
        "match_phrase": {
            "names": {
                "query": "Abraham Lincoln" \<1>
            }
        }
    }
}

GET my_index/_search
{
    "query": {
        "match_phrase": {
            "names": {
                "query": "Abraham Lincoln",
                "slop": 101 \<2>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/position-increment-gap.asciidoc: line 53: a37ed1648f68b69e2ea467b38ce21ffc.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "names": {
        "type": "text",
        "position_increment_gap": 0 \<1>
      }
    }
  }
}

PUT my_index/_doc/1
{
    "names": [ "John Abraham", "Lincoln Smith"]
}

GET my_index/_search
{
    "query": {
        "match_phrase": {
            "names": "Abraham Lincoln" \<2>
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/properties.asciidoc: line 17: 241df3bb0c16b4bd53ee569a45539184.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": { \<1>
      "manager": {
        "properties": { \<2>
          "age":  { "type": "integer" },
          "name": { "type": "text"  }
        }
      },
      "employees": {
        "type": "nested",
        "properties": { \<3>
          "age":  { "type": "integer" },
          "name": { "type": "text"  }
        }
      }
    }
  }
}

PUT my_index/_doc/1 \<4>
{
  "region": "US",
  "manager": {
    "name": "Alice White",
    "age": 30
  },
  "employees": [
    {
      "name": "John Smith",
      "age": 34
    },
    {
      "name": "Peter Brown",
      "age": 26
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/properties.asciidoc: line 74: 7f21b09b9306a03491ddcf0355f33860.adoc
[source,console]
----
GET my_index/_search
{
  "query": {
    "match": {
      "manager.name": "Alice White"
    }
  },
  "aggs": {
    "Employees": {
      "nested": {
        "path": "employees"
      },
      "aggs": {
        "Employee Ages": {
          "histogram": {
            "field": "employees.age",
            "interval": 5
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/search-analyzer.asciidoc: line 16: 60677e5144fed659e8417b7fa9964285.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "filter": {
        "autocomplete_filter": {
          "type": "edge_ngram",
          "min_gram": 1,
          "max_gram": 20
        }
      },
      "analyzer": {
        "autocomplete": { \<1>
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "autocomplete_filter"
          ]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "analyzer": "autocomplete", \<2>
        "search_analyzer": "standard" \<2>
      }
    }
  }
}

PUT my_index/_doc/1
{
  "text": "Quick Brown Fox" \<3>
}

GET my_index/_search
{
  "query": {
    "match": {
      "text": {
        "query": "Quick Br", \<4>
        "operator": "and"
      }
    }
  }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/similarity.asciidoc: line 38: e6e31dcdd1ca214c17e375c54069d513.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "default_field": { \<1>
        "type": "text"
      },
      "boolean_sim_field": {
        "type": "text",
        "similarity": "boolean" \<2>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/store.asciidoc: line 20: ff26214b3981f7418688e4c8905d5068.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "store": true \<1>
      },
      "date": {
        "type": "date",
        "store": true \<1>
      },
      "content": {
        "type": "text"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "title":   "Some short title",
  "date":    "2015-01-01",
  "content": "A very long content field..."
}

GET my_index/_search
{
  "stored_fields": [ "title", "date" ] \<2>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/params/term-vector.asciidoc: line 35: 325ce39f81c442a5447ce0ede550c44a.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "text": {
        "type":        "text",
        "term_vector": "with_positions_offsets"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "text": "Quick brown fox"
}

GET my_index/_search
{
  "query": {
    "match": {
      "text": "brown fox"
    }
  },
  "highlight": {
    "fields": {
      "text": {} \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/dynamic-mapping.asciidoc: line 11: 61c49cee90c6aa0eafbdd5cc03936e7d.adoc
[source,console]
----
PUT data/_doc/1 \<1>
{ "count": 5 }
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/dynamic/field-mapping.asciidoc: line 50: 4909bf2f9e86b4bdd6af1d0b13c0015d.adoc
[source,console]
----
PUT my_index/_doc/1
{
  "create_date": "2015/09/02"
}

GET my_index/_mapping \<1>
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/field-mapping.asciidoc: line 68: 95fa846e5d0a75210f9ad1fa1acfa8f3.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "date_detection": false
  }
}

PUT my_index/_doc/1 \<1>
{
  "create": "2015/09/02"
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/field-mapping.asciidoc: line 91: 4eae628c9aaa259f80711c6e9cc6fd25.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_date_formats": ["MM/dd/yyyy"]
  }
}

PUT my_index/_doc/1
{
  "create_date": "09/25/2015"
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/field-mapping.asciidoc: line 117: fa3cd4ffaec8273656a328ae29f32c65.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "numeric_detection": true
  }
}

PUT my_index/_doc/1
{
  "my_float":   "1.0", \<1>
  "my_integer": "1" \<2>
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/templates.asciidoc: line 71: bb33e638fdeded7d721d9bbac2305fda.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "integers": {
          "match_mapping_type": "long",
          "mapping": {
            "type": "integer"
          }
        }
      },
      {
        "strings": {
          "match_mapping_type": "string",
          "mapping": {
            "type": "text",
            "fields": {
              "raw": {
                "type":  "keyword",
                "ignore_above": 256
              }
            }
          }
        }
      }
    ]
  }
}

PUT my_index/_doc/1
{
  "my_integer": 5, \<1>
  "my_string": "Some string" \<2>
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/templates.asciidoc: line 125: 4f54b88e05c7a62901062e9e0ed13e5a.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "longs_as_strings": {
          "match_mapping_type": "string",
          "match":   "long_*",
          "unmatch": "*_text",
          "mapping": {
            "type": "long"
          }
        }
      }
    ]
  }
}

PUT my_index/_doc/1
{
  "long_num": "5", \<1>
  "long_text": "foo" \<2>
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/templates.asciidoc: line 179: 0b91c082258ce623cc716b679aace653.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "full_name": {
          "path_match":   "name.*",
          "path_unmatch": "*.middle",
          "mapping": {
            "type":       "text",
            "copy_to":    "full_name"
          }
        }
      }
    ]
  }
}

PUT my_index/_doc/1
{
  "name": {
    "first":  "John",
    "middle": "Winston",
    "last":   "Lennon"
  }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/templates.asciidoc: line 215: be51ed37c8425d281a8153abe56b04cb.adoc
[source,console]
----
PUT my_index/_doc/2
{
  "name": {
    "first":  "Paul",
    "last":   "McCartney",
    "title": {
      "value": "Sir",
      "category": "order of chivalry"
    }
  }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== mapping/dynamic/templates.asciidoc: line 241: 6873971eb4e4577d76d0a5bd7cd15ef9.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "named_analyzers": {
          "match_mapping_type": "string",
          "match": "*",
          "mapping": {
            "type": "text",
            "analyzer": "{name}"
          }
        }
      },
      {
        "no_doc_values": {
          "match_mapping_type":"*",
          "mapping": {
            "type": "{dynamic_type}",
            "doc_values": false
          }
        }
      }
    ]
  }
}

PUT my_index/_doc/1
{
  "english": "Some English text", \<1>
  "count":   5 \<2>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/dynamic/templates.asciidoc: line 293: 87f85bb49d18f73d0eed0b704e05eb90.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "strings_as_keywords": {
          "match_mapping_type": "string",
          "mapping": {
            "type": "keyword"
          }
        }
      }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/dynamic/templates.asciidoc: line 322: 1a59fa2708ccb3a24c71e8306b81f17f.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "strings_as_text": {
          "match_mapping_type": "string",
          "mapping": {
            "type": "text"
          }
        }
      }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/dynamic/templates.asciidoc: line 348: 3e60c0b29bd3931927e6f2ee7d2ed0ef.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "strings_as_keywords": {
          "match_mapping_type": "string",
          "mapping": {
            "type": "text",
            "norms": false,
            "fields": {
              "keyword": {
                "type": "keyword",
                "ignore_above": 256
              }
            }
          }
        }
      }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== mapping/dynamic/templates.asciidoc: line 387: 9a91f7d0bf52d6c582c62daef5c9d040.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "dynamic_templates": [
      {
        "unindexed_longs": {
          "match_mapping_type": "long",
          "mapping": {
            "type": "long",
            "index": false
          }
        }
      },
      {
        "unindexed_doubles": {
          "match_mapping_type": "double",
          "mapping": {
            "type": "float", \<1>
            "index": false
          }
        }
      }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis.asciidoc: line 42: 7ffee3c2a5581994fc0ea59dd106d39f.adoc
[source,console]
----
PUT my_index
{
  "mappings": {
    "properties": {
      "title": {
        "type":     "text",
        "analyzer": "standard"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== analysis/testing.asciidoc: line 9: f0d3b58abf6f2b499a38237a0e6d3498.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "whitespace",
  "text":     "The quick brown fox."
}

POST _analyze
{
  "tokenizer": "standard",
  "filter":  [ "lowercase", "asciifolding" ],
  "text":      "Is this déja vu?"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/testing.asciidoc: line 43: acebf0b821acfbd6089f71e0359a56d3.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "std_folded": { \<1>
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "asciifolding"
          ]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "my_text": {
        "type": "text",
        "analyzer": "std_folded" \<2>
      }
    }
  }
}

GET my_index/_analyze \<3>
{
  "analyzer": "std_folded", \<4>
  "text":     "Is this déjà vu?"
}

GET my_index/_analyze \<3>
{
  "field": "my_text", \<5>
  "text":  "Is this déjà vu?"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/configuring.asciidoc: line 10: 98fa08f638178692476abcae1ac8ce5a.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "std_english": { \<1>
          "type":      "standard",
          "stopwords": "_english_"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "my_text": {
        "type":     "text",
        "analyzer": "standard", \<2>
        "fields": {
          "english": {
            "type":     "text",
            "analyzer": "std_english" \<3>
          }
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "field": "my_text", \<2>
  "text": "The old brown cow"
}

POST my_index/_analyze
{
  "field": "my_text.english", \<3>
  "text": "The old brown cow"
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/standard-analyzer.asciidoc: line 14: 6884454f57c3a41059037ea762f48d77.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "standard",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/standard-analyzer.asciidoc: line 153: 5af5d2999833b6b1fdcd84404751a7e3.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english_analyzer": {
          "type": "standard",
          "max_token_length": 5,
          "stopwords": "_english_"
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_english_analyzer",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/standard-analyzer.asciidoc: line 285: ccf84c1e5e5602a9e841cb8f7e3bb29f.adoc
[source,console]
----
PUT /standard_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "rebuilt_standard": {
          "tokenizer": "standard",
          "filter": [
            "lowercase"       \<1>
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/simple-analyzer.asciidoc: line 11: 1ea24f67fbbb6293d53caf2fe0c4b984.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "simple",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/simple-analyzer.asciidoc: line 137: 432ab6ff7cfe06988dda436907218cc5.adoc
[source,console]
----
PUT /simple_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "rebuilt_simple": {
          "tokenizer": "lowercase",
          "filter": [         \<1>
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/whitespace-analyzer.asciidoc: line 11: 262a778d754add491fbc9c721ac25bf0.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "whitespace",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/whitespace-analyzer.asciidoc: line 130: 31aed390c30bd4f42a5c56253695e53f.adoc
[source,console]
----
PUT /whitespace_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "rebuilt_whitespace": {
          "tokenizer": "whitespace",
          "filter": [         \<1>
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/stop-analyzer.asciidoc: line 12: 42d02087f1c8ab0452ef373079a76843.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "stop",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/stop-analyzer.asciidoc: line 132: 5a676e5f09ba584408ce6ecacda13d1d.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_stop_analyzer": {
          "type": "stop",
          "stopwords": ["the", "over"]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_stop_analyzer",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/stop-analyzer.asciidoc: line 250: 42deb4fe32afbe0f94185e256a79c447.adoc
[source,console]
----
PUT /stop_example
{
  "settings": {
    "analysis": {
      "filter": {
        "english_stop": {
          "type":       "stop",
          "stopwords":  "_english_" \<1>
        }
      },
      "analyzer": {
        "rebuilt_stop": {
          "tokenizer": "lowercase",
          "filter": [
            "english_stop"          \<2>
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/keyword-analyzer.asciidoc: line 11: 19ee488226d357d1576e7d3ae7a4693f.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "keyword",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/keyword-analyzer.asciidoc: line 70: c1efc5cfcb3c29711bfe118f1baa28b0.adoc
[source,console]
----
PUT /keyword_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "rebuilt_keyword": {
          "tokenizer": "keyword",
          "filter": [         \<1>
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/pattern-analyzer.asciidoc: line 26: 467833bd44b35a89a7fe0d7df5f253f1.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "pattern",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/pattern-analyzer.asciidoc: line 179: 314851d590d195015a76866b92cf6b32.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_email_analyzer": {
          "type":      "pattern",
          "pattern":   "\\W|_", \<1>
          "lowercase": true
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_email_analyzer",
  "text": "John_Smith@foo-bar.com"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/pattern-analyzer.asciidoc: line 268: 9e2f7b134ac7c5e7c0119866b7a96700.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "camel": {
          "type": "pattern",
          "pattern": "([^\\p{L}\\d]+)|(?<=\\D)(?=\\d)|(?<=\\d)(?=\\D)|(?<=[\\p{L}&&[^\\p{Lu}]])(?=\\p{Lu})|(?<=\\p{Lu})(?=\\p{Lu}[\\p{L}&&[^\\p{Lu}]])"
        }
      }
    }
  }
}

GET my_index/_analyze
{
  "analyzer": "camel",
  "text": "MooseX::FTPClass2_beta"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/pattern-analyzer.asciidoc: line 388: f453e14bcf30853e57618bf12f83e148.adoc
[source,console]
----
PUT /pattern_example
{
  "settings": {
    "analysis": {
      "tokenizer": {
        "split_on_non_word": {
          "type":       "pattern",
          "pattern":    "\\W+" \<1>
        }
      },
      "analyzer": {
        "rebuilt_pattern": {
          "tokenizer": "split_on_non_word",
          "filter": [
            "lowercase"       \<2>
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 80: 137c62a4443bdd7d5b95a15022a9dc30.adoc
[source,console]
----
PUT /arabic_example
{
  "settings": {
    "analysis": {
      "filter": {
        "arabic_stop": {
          "type":       "stop",
          "stopwords":  "_arabic_" \<1>
        },
        "arabic_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["مثال"] \<2>
        },
        "arabic_stemmer": {
          "type":       "stemmer",
          "language":   "arabic"
        }
      },
      "analyzer": {
        "rebuilt_arabic": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "decimal_digit",
            "arabic_stop",
            "arabic_normalization",
            "arabic_keywords",
            "arabic_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 130: f7dc2fed08e57abda2c3e8a14f8eb098.adoc
[source,console]
----
PUT /armenian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "armenian_stop": {
          "type":       "stop",
          "stopwords":  "_armenian_" \<1>
        },
        "armenian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["օրինակ"] \<2>
        },
        "armenian_stemmer": {
          "type":       "stemmer",
          "language":   "armenian"
        }
      },
      "analyzer": {
        "rebuilt_armenian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "armenian_stop",
            "armenian_keywords",
            "armenian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 178: 01f50acf7998b24969f451e922d145eb.adoc
[source,console]
----
PUT /basque_example
{
  "settings": {
    "analysis": {
      "filter": {
        "basque_stop": {
          "type":       "stop",
          "stopwords":  "_basque_" \<1>
        },
        "basque_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["Adibidez"] \<2>
        },
        "basque_stemmer": {
          "type":       "stemmer",
          "language":   "basque"
        }
      },
      "analyzer": {
        "rebuilt_basque": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "basque_stop",
            "basque_keywords",
            "basque_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 226: 496d35c89dc991a1509f7e8fb93ade45.adoc
[source,console]
----
PUT /bengali_example
{
  "settings": {
    "analysis": {
      "filter": {
        "bengali_stop": {
          "type":       "stop",
          "stopwords":  "_bengali_" \<1>
        },
        "bengali_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["উদাহরণ"] \<2>
        },
        "bengali_stemmer": {
          "type":       "stemmer",
          "language":   "bengali"
        }
      },
      "analyzer": {
        "rebuilt_bengali": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "decimal_digit",
            "bengali_keywords",
            "indic_normalization",
            "bengali_normalization",
            "bengali_stop",
            "bengali_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 277: 13670d1534125831c2059eebd86d840c.adoc
[source,console]
----
PUT /brazilian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "brazilian_stop": {
          "type":       "stop",
          "stopwords":  "_brazilian_" \<1>
        },
        "brazilian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["exemplo"] \<2>
        },
        "brazilian_stemmer": {
          "type":       "stemmer",
          "language":   "brazilian"
        }
      },
      "analyzer": {
        "rebuilt_brazilian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "brazilian_stop",
            "brazilian_keywords",
            "brazilian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 325: d0378fe5e3aad05a2fd2e6e81213374f.adoc
[source,console]
----
PUT /bulgarian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "bulgarian_stop": {
          "type":       "stop",
          "stopwords":  "_bulgarian_" \<1>
        },
        "bulgarian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["пример"] \<2>
        },
        "bulgarian_stemmer": {
          "type":       "stemmer",
          "language":   "bulgarian"
        }
      },
      "analyzer": {
        "rebuilt_bulgarian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "bulgarian_stop",
            "bulgarian_keywords",
            "bulgarian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 373: d5f3be3b9edf0119fa19e5693cfac05a.adoc
[source,console]
----
PUT /catalan_example
{
  "settings": {
    "analysis": {
      "filter": {
        "catalan_elision": {
          "type":       "elision",
          "articles":   [ "d", "l", "m", "n", "s", "t"],
          "articles_case": true
        },
        "catalan_stop": {
          "type":       "stop",
          "stopwords":  "_catalan_" \<1>
        },
        "catalan_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["exemple"] \<2>
        },
        "catalan_stemmer": {
          "type":       "stemmer",
          "language":   "catalan"
        }
      },
      "analyzer": {
        "rebuilt_catalan": {
          "tokenizer":  "standard",
          "filter": [
            "catalan_elision",
            "lowercase",
            "catalan_stop",
            "catalan_keywords",
            "catalan_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 430: d305110a8cabfbebd1e38d85559d1023.adoc
[source,console]
----
PUT /cjk_example
{
  "settings": {
    "analysis": {
      "filter": {
        "english_stop": {
          "type":       "stop",
          "stopwords":  [ \<1>
            "a", "and", "are", "as", "at", "be", "but", "by", "for",
            "if", "in", "into", "is", "it", "no", "not", "of", "on",
            "or", "s", "such", "t", "that", "the", "their", "then",
            "there", "these", "they", "this", "to", "was", "will",
            "with", "www"
          ]
        }
      },
      "analyzer": {
        "rebuilt_cjk": {
          "tokenizer":  "standard",
          "filter": [
            "cjk_width",
            "lowercase",
            "cjk_bigram",
            "english_stop"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 476: a28111cdd9b5aaea96c779cbfbf38780.adoc
[source,console]
----
PUT /czech_example
{
  "settings": {
    "analysis": {
      "filter": {
        "czech_stop": {
          "type":       "stop",
          "stopwords":  "_czech_" \<1>
        },
        "czech_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["příklad"] \<2>
        },
        "czech_stemmer": {
          "type":       "stemmer",
          "language":   "czech"
        }
      },
      "analyzer": {
        "rebuilt_czech": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "czech_stop",
            "czech_keywords",
            "czech_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 524: ed85ed833bec7286a0dfbe64077c5715.adoc
[source,console]
----
PUT /danish_example
{
  "settings": {
    "analysis": {
      "filter": {
        "danish_stop": {
          "type":       "stop",
          "stopwords":  "_danish_" \<1>
        },
        "danish_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["eksempel"] \<2>
        },
        "danish_stemmer": {
          "type":       "stemmer",
          "language":   "danish"
        }
      },
      "analyzer": {
        "rebuilt_danish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "danish_stop",
            "danish_keywords",
            "danish_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 572: 10d8b17e73d31dcd907de67327ed78a2.adoc
[source,console]
----
PUT /dutch_example
{
  "settings": {
    "analysis": {
      "filter": {
        "dutch_stop": {
          "type":       "stop",
          "stopwords":  "_dutch_" \<1>
        },
        "dutch_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["voorbeeld"] \<2>
        },
        "dutch_stemmer": {
          "type":       "stemmer",
          "language":   "dutch"
        },
        "dutch_override": {
          "type":       "stemmer_override",
          "rules": [
            "fiets=>fiets",
            "bromfiets=>bromfiets",
            "ei=>eier",
            "kind=>kinder"
          ]
        }
      },
      "analyzer": {
        "rebuilt_dutch": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "dutch_stop",
            "dutch_keywords",
            "dutch_override",
            "dutch_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 630: 81c7a392efd505b686eed978fb7d9d17.adoc
[source,console]
----
PUT /english_example
{
  "settings": {
    "analysis": {
      "filter": {
        "english_stop": {
          "type":       "stop",
          "stopwords":  "_english_" \<1>
        },
        "english_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["example"] \<2>
        },
        "english_stemmer": {
          "type":       "stemmer",
          "language":   "english"
        },
        "english_possessive_stemmer": {
          "type":       "stemmer",
          "language":   "possessive_english"
        }
      },
      "analyzer": {
        "rebuilt_english": {
          "tokenizer":  "standard",
          "filter": [
            "english_possessive_stemmer",
            "lowercase",
            "english_stop",
            "english_keywords",
            "english_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 683: 85f0e5e8ab91ceab63c21dbedd9f4037.adoc
[source,console]
----
PUT /finnish_example
{
  "settings": {
    "analysis": {
      "filter": {
        "finnish_stop": {
          "type":       "stop",
          "stopwords":  "_finnish_" \<1>
        },
        "finnish_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["esimerkki"] \<2>
        },
        "finnish_stemmer": {
          "type":       "stemmer",
          "language":   "finnish"
        }
      },
      "analyzer": {
        "rebuilt_finnish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "finnish_stop",
            "finnish_keywords",
            "finnish_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 731: e5498c139ce9053805c8931334ee324e.adoc
[source,console]
----
PUT /french_example
{
  "settings": {
    "analysis": {
      "filter": {
        "french_elision": {
          "type":         "elision",
          "articles_case": true,
          "articles": [
              "l", "m", "t", "qu", "n", "s",
              "j", "d", "c", "jusqu", "quoiqu",
              "lorsqu", "puisqu"
            ]
        },
        "french_stop": {
          "type":       "stop",
          "stopwords":  "_french_" \<1>
        },
        "french_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["Exemple"] \<2>
        },
        "french_stemmer": {
          "type":       "stemmer",
          "language":   "light_french"
        }
      },
      "analyzer": {
        "rebuilt_french": {
          "tokenizer":  "standard",
          "filter": [
            "french_elision",
            "lowercase",
            "french_stop",
            "french_keywords",
            "french_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 789: 9606c271921cb800d5ea395b16d6ceaf.adoc
[source,console]
----
PUT /galician_example
{
  "settings": {
    "analysis": {
      "filter": {
        "galician_stop": {
          "type":       "stop",
          "stopwords":  "_galician_" \<1>
        },
        "galician_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["exemplo"] \<2>
        },
        "galician_stemmer": {
          "type":       "stemmer",
          "language":   "galician"
        }
      },
      "analyzer": {
        "rebuilt_galician": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "galician_stop",
            "galician_keywords",
            "galician_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 837: 187e8786e0a90f1f6278cf89b670de0a.adoc
[source,console]
----
PUT /german_example
{
  "settings": {
    "analysis": {
      "filter": {
        "german_stop": {
          "type":       "stop",
          "stopwords":  "_german_" \<1>
        },
        "german_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["Beispiel"] \<2>
        },
        "german_stemmer": {
          "type":       "stemmer",
          "language":   "light_german"
        }
      },
      "analyzer": {
        "rebuilt_german": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "german_stop",
            "german_keywords",
            "german_normalization",
            "german_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 886: 1f00e73c144603e97f6c14ab15fa1913.adoc
[source,console]
----
PUT /greek_example
{
  "settings": {
    "analysis": {
      "filter": {
        "greek_stop": {
          "type":       "stop",
          "stopwords":  "_greek_" \<1>
        },
        "greek_lowercase": {
          "type":       "lowercase",
          "language":   "greek"
        },
        "greek_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["παράδειγμα"] \<2>
        },
        "greek_stemmer": {
          "type":       "stemmer",
          "language":   "greek"
        }
      },
      "analyzer": {
        "rebuilt_greek": {
          "tokenizer":  "standard",
          "filter": [
            "greek_lowercase",
            "greek_stop",
            "greek_keywords",
            "greek_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 938: af00a58d9171d32f6efe52d94e51e526.adoc
[source,console]
----
PUT /hindi_example
{
  "settings": {
    "analysis": {
      "filter": {
        "hindi_stop": {
          "type":       "stop",
          "stopwords":  "_hindi_" \<1>
        },
        "hindi_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["उदाहरण"] \<2>
        },
        "hindi_stemmer": {
          "type":       "stemmer",
          "language":   "hindi"
        }
      },
      "analyzer": {
        "rebuilt_hindi": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "decimal_digit",
            "hindi_keywords",
            "indic_normalization",
            "hindi_normalization",
            "hindi_stop",
            "hindi_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 989: 84108653e9e03b4edacd878ec870df77.adoc
[source,console]
----
PUT /hungarian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "hungarian_stop": {
          "type":       "stop",
          "stopwords":  "_hungarian_" \<1>
        },
        "hungarian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["példa"] \<2>
        },
        "hungarian_stemmer": {
          "type":       "stemmer",
          "language":   "hungarian"
        }
      },
      "analyzer": {
        "rebuilt_hungarian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "hungarian_stop",
            "hungarian_keywords",
            "hungarian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1038: eb5987b58dae90c3a8a1609410be0570.adoc
[source,console]
----
PUT /indonesian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "indonesian_stop": {
          "type":       "stop",
          "stopwords":  "_indonesian_" \<1>
        },
        "indonesian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["contoh"] \<2>
        },
        "indonesian_stemmer": {
          "type":       "stemmer",
          "language":   "indonesian"
        }
      },
      "analyzer": {
        "rebuilt_indonesian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "indonesian_stop",
            "indonesian_keywords",
            "indonesian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1086: 160f39a50847bad0be4be1529a95e4ce.adoc
[source,console]
----
PUT /irish_example
{
  "settings": {
    "analysis": {
      "filter": {
        "irish_hyphenation": {
          "type":       "stop",
          "stopwords":  [ "h", "n", "t" ],
          "ignore_case": true
        },
        "irish_elision": {
          "type":       "elision",
          "articles":   [ "d", "m", "b" ],
          "articles_case": true
        },
        "irish_stop": {
          "type":       "stop",
          "stopwords":  "_irish_" \<1>
        },
        "irish_lowercase": {
          "type":       "lowercase",
          "language":   "irish"
        },
        "irish_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["sampla"] \<2>
        },
        "irish_stemmer": {
          "type":       "stemmer",
          "language":   "irish"
        }
      },
      "analyzer": {
        "rebuilt_irish": {
          "tokenizer":  "standard",
          "filter": [
            "irish_hyphenation",
            "irish_elision",
            "irish_lowercase",
            "irish_stop",
            "irish_keywords",
            "irish_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1150: 00e0c964c79fcc1876ab957da2ffce82.adoc
[source,console]
----
PUT /italian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "italian_elision": {
          "type": "elision",
          "articles": [
                "c", "l", "all", "dall", "dell",
                "nell", "sull", "coll", "pell",
                "gl", "agl", "dagl", "degl", "negl",
                "sugl", "un", "m", "t", "s", "v", "d"
          ],
          "articles_case": true
        },
        "italian_stop": {
          "type":       "stop",
          "stopwords":  "_italian_" \<1>
        },
        "italian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["esempio"] \<2>
        },
        "italian_stemmer": {
          "type":       "stemmer",
          "language":   "light_italian"
        }
      },
      "analyzer": {
        "rebuilt_italian": {
          "tokenizer":  "standard",
          "filter": [
            "italian_elision",
            "lowercase",
            "italian_stop",
            "italian_keywords",
            "italian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1209: d983c1ea730eeabac9e914656d7c9be2.adoc
[source,console]
----
PUT /latvian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "latvian_stop": {
          "type":       "stop",
          "stopwords":  "_latvian_" \<1>
        },
        "latvian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["piemērs"] \<2>
        },
        "latvian_stemmer": {
          "type":       "stemmer",
          "language":   "latvian"
        }
      },
      "analyzer": {
        "rebuilt_latvian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "latvian_stop",
            "latvian_keywords",
            "latvian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1257: bb067c049331cc850a77b18bdfff81b5.adoc
[source,console]
----
PUT /lithuanian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "lithuanian_stop": {
          "type":       "stop",
          "stopwords":  "_lithuanian_" \<1>
        },
        "lithuanian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["pavyzdys"] \<2>
        },
        "lithuanian_stemmer": {
          "type":       "stemmer",
          "language":   "lithuanian"
        }
      },
      "analyzer": {
        "rebuilt_lithuanian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "lithuanian_stop",
            "lithuanian_keywords",
            "lithuanian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1305: 2731a8577ad734a732d784c5dcb1225d.adoc
[source,console]
----
PUT /norwegian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "norwegian_stop": {
          "type":       "stop",
          "stopwords":  "_norwegian_" \<1>
        },
        "norwegian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["eksempel"] \<2>
        },
        "norwegian_stemmer": {
          "type":       "stemmer",
          "language":   "norwegian"
        }
      },
      "analyzer": {
        "rebuilt_norwegian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "norwegian_stop",
            "norwegian_keywords",
            "norwegian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1353: d1a285aa244ec461d68f13e7078a33c0.adoc
[source,console]
----
PUT /persian_example
{
  "settings": {
    "analysis": {
      "char_filter": {
        "zero_width_spaces": {
            "type":       "mapping",
            "mappings": [ "\\u200C=>\\u0020"] \<1>
        }
      },
      "filter": {
        "persian_stop": {
          "type":       "stop",
          "stopwords":  "_persian_" \<2>
        }
      },
      "analyzer": {
        "rebuilt_persian": {
          "tokenizer":     "standard",
          "char_filter": [ "zero_width_spaces" ],
          "filter": [
            "lowercase",
            "decimal_digit",
            "arabic_normalization",
            "persian_normalization",
            "persian_stop"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1399: 584f502cf840134f2db5f39e2483ced1.adoc
[source,console]
----
PUT /portuguese_example
{
  "settings": {
    "analysis": {
      "filter": {
        "portuguese_stop": {
          "type":       "stop",
          "stopwords":  "_portuguese_" \<1>
        },
        "portuguese_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["exemplo"] \<2>
        },
        "portuguese_stemmer": {
          "type":       "stemmer",
          "language":   "light_portuguese"
        }
      },
      "analyzer": {
        "rebuilt_portuguese": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "portuguese_stop",
            "portuguese_keywords",
            "portuguese_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1447: 1ba7afe23a26fe9ac7856d8c5bc1059d.adoc
[source,console]
----
PUT /romanian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "romanian_stop": {
          "type":       "stop",
          "stopwords":  "_romanian_" \<1>
        },
        "romanian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["exemplu"] \<2>
        },
        "romanian_stemmer": {
          "type":       "stemmer",
          "language":   "romanian"
        }
      },
      "analyzer": {
        "rebuilt_romanian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "romanian_stop",
            "romanian_keywords",
            "romanian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1496: d260225cf97e068ead2a8a6bb5aefd90.adoc
[source,console]
----
PUT /russian_example
{
  "settings": {
    "analysis": {
      "filter": {
        "russian_stop": {
          "type":       "stop",
          "stopwords":  "_russian_" \<1>
        },
        "russian_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["пример"] \<2>
        },
        "russian_stemmer": {
          "type":       "stemmer",
          "language":   "russian"
        }
      },
      "analyzer": {
        "rebuilt_russian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "russian_stop",
            "russian_keywords",
            "russian_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1544: 320645d771e952af2a67bb7445c3688d.adoc
[source,console]
----
PUT /sorani_example
{
  "settings": {
    "analysis": {
      "filter": {
        "sorani_stop": {
          "type":       "stop",
          "stopwords":  "_sorani_" \<1>
        },
        "sorani_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["mînak"] \<2>
        },
        "sorani_stemmer": {
          "type":       "stemmer",
          "language":   "sorani"
        }
      },
      "analyzer": {
        "rebuilt_sorani": {
          "tokenizer":  "standard",
          "filter": [
            "sorani_normalization",
            "lowercase",
            "decimal_digit",
            "sorani_stop",
            "sorani_keywords",
            "sorani_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1594: 327466380bcd55361973b4a96c6dccb2.adoc
[source,console]
----
PUT /spanish_example
{
  "settings": {
    "analysis": {
      "filter": {
        "spanish_stop": {
          "type":       "stop",
          "stopwords":  "_spanish_" \<1>
        },
        "spanish_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["ejemplo"] \<2>
        },
        "spanish_stemmer": {
          "type":       "stemmer",
          "language":   "light_spanish"
        }
      },
      "analyzer": {
        "rebuilt_spanish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "spanish_stop",
            "spanish_keywords",
            "spanish_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1642: f097c02541056f3c0fc855e7bbeef8a8.adoc
[source,console]
----
PUT /swedish_example
{
  "settings": {
    "analysis": {
      "filter": {
        "swedish_stop": {
          "type":       "stop",
          "stopwords":  "_swedish_" \<1>
        },
        "swedish_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["exempel"] \<2>
        },
        "swedish_stemmer": {
          "type":       "stemmer",
          "language":   "swedish"
        }
      },
      "analyzer": {
        "rebuilt_swedish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "swedish_stop",
            "swedish_keywords",
            "swedish_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1690: 103296e16b4233926ad1f07360385606.adoc
[source,console]
----
PUT /turkish_example
{
  "settings": {
    "analysis": {
      "filter": {
        "turkish_stop": {
          "type":       "stop",
          "stopwords":  "_turkish_" \<1>
        },
        "turkish_lowercase": {
          "type":       "lowercase",
          "language":   "turkish"
        },
        "turkish_keywords": {
          "type":       "keyword_marker",
          "keywords":   ["örnek"] \<2>
        },
        "turkish_stemmer": {
          "type":       "stemmer",
          "language":   "turkish"
        }
      },
      "analyzer": {
        "rebuilt_turkish": {
          "tokenizer":  "standard",
          "filter": [
            "apostrophe",
            "turkish_lowercase",
            "turkish_stop",
            "turkish_keywords",
            "turkish_stemmer"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/lang-analyzer.asciidoc: line 1743: 346f28d82acb5427c304aa574fea0008.adoc
[source,console]
----
PUT /thai_example
{
  "settings": {
    "analysis": {
      "filter": {
        "thai_stop": {
          "type":       "stop",
          "stopwords":  "_thai_" \<1>
        }
      },
      "analyzer": {
        "rebuilt_thai": {
          "tokenizer":  "thai",
          "filter": [
            "lowercase",
            "decimal_digit",
            "thai_stop"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/fingerprint-analyzer.asciidoc: line 16: 6490d89a4e43cac5e6b9bc19840d5478.adoc
[source,console]
----
POST _analyze
{
  "analyzer": "fingerprint",
  "text": "Yes yes, Gödel said this sentence is consistent and."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/fingerprint-analyzer.asciidoc: line 88: 2659ccd414867f3a5ee262c9b7cd3f1d.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_fingerprint_analyzer": {
          "type": "fingerprint",
          "stopwords": "_english_"
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_fingerprint_analyzer",
  "text": "Yes yes, Gödel said this sentence is consistent and."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/fingerprint-analyzer.asciidoc: line 160: ce725697f93b3eebb3a266314568565a.adoc
[source,console]
----
PUT /fingerprint_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "rebuilt_fingerprint": {
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "asciifolding",
            "fingerprint"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/custom-analyzer.asciidoc: line 55: ef2ea91fb3fa26c740bca994af85e150.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_custom_analyzer": {
          "type":      "custom", \<1>
          "tokenizer": "standard",
          "char_filter": [
            "html_strip"
          ],
          "filter": [
            "lowercase",
            "asciifolding"
          ]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_custom_analyzer",
  "text": "Is this \<b>déjà vu</b>?"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/analyzers/custom-analyzer.asciidoc: line 159: c729a5ef7a671154bb82e308d915cf9f.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_custom_analyzer": {
          "type": "custom",
          "char_filter": [
            "emoticons" \<1>
          ],
          "tokenizer": "punctuation", \<1>
          "filter": [
            "lowercase",
            "english_stop" \<1>
          ]
        }
      },
      "tokenizer": {
        "punctuation": { \<1>
          "type": "pattern",
          "pattern": "[ .,!?]"
        }
      },
      "char_filter": {
        "emoticons": { \<1>
          "type": "mapping",
          "mappings": [
            ":) => _happy_",
            ":( => _sad_"
          ]
        }
      },
      "filter": {
        "english_stop": { \<1>
          "type": "stop",
          "stopwords": "_english_"
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_custom_analyzer",
  "text":     "I'm a :) person, and you?"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/normalizers.asciidoc: line 25: 966ff3a4c5b61ed1a36d44c17ce06157.adoc
[source,console]
----
PUT index
{
  "settings": {
    "analysis": {
      "char_filter": {
        "quote": {
          "type": "mapping",
          "mappings": [
            "« => \"",
            "» => \""
          ]
        }
      },
      "normalizer": {
        "my_normalizer": {
          "type": "custom",
          "char_filter": ["quote"],
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "foo": {
        "type": "keyword",
        "normalizer": "my_normalizer"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/standard-tokenizer.asciidoc: line 13: 88a08d0b15ef41324f5c23db533d47d1.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "standard",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/standard-tokenizer.asciidoc: line 138: 7375d4fe72c848ee3b0a799fda8bb0f0.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "standard",
          "max_token_length": 5
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/letter-tokenizer.asciidoc: line 13: 76448aaaaa2c352bb6e09d2f83a3fbb3.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "letter",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/lowercase-tokenizer.asciidoc: line 18: a99bc141066ef673e35f306157750ec9.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "lowercase",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/whitespace-tokenizer.asciidoc: line 11: 7b9dfe5857bde1bd8483ea3241656714.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "whitespace",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/uaxurlemail-tokenizer.asciidoc: line 11: d12df43ffcdcd937bae9b26fb475e239.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "uax_url_email",
  "text": "Email me at john.smith@global-international.com"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/uaxurlemail-tokenizer.asciidoc: line 94: 1125986e8e55028ff4c10b5e6c7bbebb.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "uax_url_email",
          "max_token_length": 5
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "john.smith@global-international.com"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/classic-tokenizer.asciidoc: line 22: c6d39d22188dc7bbfdad811a94cbcc2b.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "classic",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/classic-tokenizer.asciidoc: line 147: 326f5bc3013c80c2ee005c676a877ecf.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "classic",
          "max_token_length": 5
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "The 2 QUICK Brown-Foxes jumped over the lazy dog's bone."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/thai-tokenizer.asciidoc: line 17: a1e5f3956f9a697e79478fc9a6e30e1f.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "thai",
  "text": "การที่ได้ต้องแสดงว่างานดี"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/ngram-tokenizer.asciidoc: line 21: 39963032d423e2f20f53c4621b6ca3c6.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "ngram",
  "text": "Quick Fox"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/ngram-tokenizer.asciidoc: line 211: 9efcafd1f28490fd658d88df7d93c66c.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "ngram",
          "min_gram": 3,
          "max_gram": 3,
          "token_chars": [
            "letter",
            "digit"
          ]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "2 Quick Foxes."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/edgengram-tokenizer.asciidoc: line 25: a512e4dd8880ce0395937db1bab1d205.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "edge_ngram",
  "text": "Quick Fox"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/edgengram-tokenizer.asciidoc: line 106: a61389da4033bd7b73a63ff2ee258125.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "edge_ngram",
          "min_gram": 2,
          "max_gram": 10,
          "token_chars": [
            "letter",
            "digit"
          ]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "2 Quick Foxes."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/edgengram-tokenizer.asciidoc: line 224: b8893e8f2b1aea4b093e0c4f037cfff7.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "autocomplete": {
          "tokenizer": "autocomplete",
          "filter": [
            "lowercase"
          ]
        },
        "autocomplete_search": {
          "tokenizer": "lowercase"
        }
      },
      "tokenizer": {
        "autocomplete": {
          "type": "edge_ngram",
          "min_gram": 2,
          "max_gram": 10,
          "token_chars": [
            "letter"
          ]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "analyzer": "autocomplete",
        "search_analyzer": "autocomplete_search"
      }
    }
  }
}

PUT my_index/_doc/1
{
  "title": "Quick Foxes" \<1>
}

POST my_index/_refresh

GET my_index/_search
{
  "query": {
    "match": {
      "title": {
        "query": "Quick Fo", \<2>
        "operator": "and"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/keyword-tokenizer.asciidoc: line 12: 09a44b619a99f6bf3f01bd5e258fd22d.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "keyword",
  "text": "New York"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pattern-tokenizer.asciidoc: line 29: 1a6dbe5df488c4a16e2f1101ba8a25d9.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "pattern",
  "text": "The foo_bar_size's default is 5."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pattern-tokenizer.asciidoc: line 127: 448339a39d847c4cac57a325e23c2a5a.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "pattern",
          "pattern": ","
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "comma,separated,values"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pattern-tokenizer.asciidoc: line 217: fa8d64d622b4d7fe3234924b4de4f0bf.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "pattern",
          "pattern": "\"((?:\\\\\"|[^\"]|\\\\\")+)\"",
          "group": 1
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "\"value\", \"value with embedded \\\" quote\""
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/chargroup-tokenizer.asciidoc: line 26: f8cafb1a08bc9b2dd5239f99d4e93f4c.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": {
    "type": "char_group",
    "tokenize_on_chars": [
      "whitespace",
      "-",
      "\n"
    ]
  },
  "text": "The QUICK brown-fox"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/simplepattern-tokenizer.asciidoc: line 38: 9ffc049d5c5a570b90d913e92f910ee4.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "simple_pattern",
          "pattern": "[0123456789]{3}"
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "fd-786-335-514-x"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/simplepatternsplit-tokenizer.asciidoc: line 39: 5c28bb67716ed2bbe03c1d5d3733cb42.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "simple_pattern_split",
          "pattern": "_"
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "an_underscored_phrase"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer.asciidoc: line 12: dc4dcfeae8a5f248639335c2c9809549.adoc
[source,console]
----
POST _analyze
{
  "tokenizer": "path_hierarchy",
  "text": "/one/two/three"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer.asciidoc: line 95: fcc35d56dff0291bcf3663830ce99254.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "path_hierarchy",
          "delimiter": "-",
          "replacement": "/",
          "skip": 2
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "one-two-three-four-five"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer-examples.asciidoc: line 18: 840b6c5c3d9c56aed854cfab8da04486.adoc
[source,console]
----
PUT file-path-test
{
  "settings": {
    "analysis": {
      "analyzer": {
        "custom_path_tree": {
          "tokenizer": "custom_hierarchy"
        },
        "custom_path_tree_reversed": {
          "tokenizer": "custom_hierarchy_reversed"
        }
      },
      "tokenizer": {
        "custom_hierarchy": {
          "type": "path_hierarchy",
          "delimiter": "/"
        },
        "custom_hierarchy_reversed": {
          "type": "path_hierarchy",
          "delimiter": "/",
          "reverse": "true"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "file_path": {
        "type": "text",
        "fields": {
          "tree": {
            "type": "text",
            "analyzer": "custom_path_tree"
          },
          "tree_reversed": {
            "type": "text",
            "analyzer": "custom_path_tree_reversed"
          }
        }
      }
    }
  }
}

POST file-path-test/_doc/1
{
  "file_path": "/User/alice/photos/2017/05/16/my_photo1.jpg"
}

POST file-path-test/_doc/2
{
  "file_path": "/User/alice/photos/2017/05/16/my_photo2.jpg"
}

POST file-path-test/_doc/3
{
  "file_path": "/User/alice/photos/2017/05/16/my_photo3.jpg"
}

POST file-path-test/_doc/4
{
  "file_path": "/User/alice/photos/2017/05/15/my_photo1.jpg"
}

POST file-path-test/_doc/5
{
  "file_path": "/User/bob/photos/2017/05/16/my_photo1.jpg"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer-examples.asciidoc: line 98: bd767ea03171fe71c73f58f16d5da92f.adoc
[source,console]
----
GET file-path-test/_search
{
  "query": {
    "match": {
      "file_path": "/User/bob/photos/2017/05"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer-examples.asciidoc: line 115: b724f547c5d67e95bbc0a9920e47033c.adoc
[source,console]
----
GET file-path-test/_search
{
  "query": {
    "term": {
      "file_path.tree": "/User/alice/photos/2017/05/16"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer-examples.asciidoc: line 135: f1dc6f69453867ffafe86e998dd464d9.adoc
[source,console]
----
GET file-path-test/_search
{
  "query": {
    "term": {
      "file_path.tree_reversed": {
        "value": "my_photo1.jpg"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer-examples.asciidoc: line 155: acc52da725a996ae696b00d9f818dfde.adoc
[source,console]
----
POST file-path-test/_analyze
{
  "analyzer": "custom_path_tree",
  "text": "/User/alice/photos/2017/05/16/my_photo1.jpg"
}

POST file-path-test/_analyze
{
  "analyzer": "custom_path_tree_reversed",
  "text": "/User/alice/photos/2017/05/16/my_photo1.jpg"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenizers/pathhierarchy-tokenizer-examples.asciidoc: line 176: 4bba59cf745ac7b996bf90308bc26957.adoc
[source,console]
----
GET file-path-test/_search
{
  "query": {
    "bool" : {
      "must" : {
        "match" : { "file_path" : "16" }
      },
      "filter": {
        "term" : { "file_path.tree" : "/User/alice" }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/asciifolding-tokenfilter.asciidoc: line 10: 0d4cb64eca426ac03110fdfd01367ee9.adoc
[source,console]
----
PUT /asciifold_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "default" : {
                    "tokenizer" : "standard",
                    "filter" : ["asciifolding"]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/asciifolding-tokenfilter.asciidoc: line 32: f0609100be8e9eb4af6cbc75d0c40ebe.adoc
[source,console]
----
PUT /asciifold_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "default" : {
                    "tokenizer" : "standard",
                    "filter" : ["my_ascii_folding"]
                }
            },
            "filter" : {
                "my_ascii_folding" : {
                    "type" : "asciifolding",
                    "preserve_original" : true
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/lowercase-tokenfilter.asciidoc: line 12: 5be6349f5da1a7a5658df1d7fdf542db.adoc
[source,console]
----
PUT /lowercase_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "standard_lowercase_example": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase"]
        },
        "greek_lowercase_example": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["greek_lowercase"]
        }
      },
      "filter": {
        "greek_lowercase": {
          "type": "lowercase",
          "language": "greek"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/stop-tokenfilter.asciidoc: line 35: a4575521493d8d1fbdd450821035f821.adoc
[source,console]
----
PUT /my_index
{
    "settings": {
        "analysis": {
            "filter": {
                "my_stop": {
                    "type":       "stop",
                    "stopwords": ["and", "is", "the"]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/stop-tokenfilter.asciidoc: line 55: ded95888c2d68c48426b013284eb896a.adoc
[source,console]
----
PUT /my_index
{
    "settings": {
        "analysis": {
            "filter": {
                "my_stop": {
                    "type":       "stop",
                    "stopwords":  "_english_"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/multiplexer-tokenfilter.asciidoc: line 33: c306212babadc14fa124b88fd8c43a6b.adoc
[source,console]
----
PUT /multiplexer_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : [ "my_multiplexer" ]
                }
            },
            "filter" : {
                "my_multiplexer" : {
                    "type" : "multiplexer",
                    "filters" : [ "lowercase", "lowercase, porter_stem" ]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/multiplexer-tokenfilter.asciidoc: line 59: fa9a3ef94470f3d9bd6500b65bf993d1.adoc
[source,console]
----
POST /multiplexer_example/_analyze
{
  "analyzer" : "my_analyzer",
  "text" : "Going HOME"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/condition-tokenfilter.asciidoc: line 22: 59fd7082698a6b12d028105456016a66.adoc
[source,console]
----
PUT /condition_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : [ "my_condition" ]
                }
            },
            "filter" : {
                "my_condition" : {
                    "type" : "condition",
                    "filter" : [ "lowercase" ],
                    "script" : {
                        "source" : "token.getTerm().length() < 5"  \<1>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/condition-tokenfilter.asciidoc: line 54: e20493a20d3992a97238b87c6930f08d.adoc
[source,console]
----
POST /condition_example/_analyze
{
  "analyzer" : "my_analyzer",
  "text" : "What Flapdoodle"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/predicate-tokenfilter.asciidoc: line 19: 10338787b66a7f93270c3b88dd6197f8.adoc
[source,console]
----
PUT /condition_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : [ "my_script_filter" ]
                }
            },
            "filter" : {
                "my_script_filter" : {
                    "type" : "predicate_token_filter",
                    "script" : {
                        "source" : "token.getTerm().length() > 5"  \<1>
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/predicate-tokenfilter.asciidoc: line 49: e20493a20d3992a97238b87c6930f08d.adoc
[source,console]
----
POST /condition_example/_analyze
{
  "analyzer" : "my_analyzer",
  "text" : "What Flapdoodle"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/stemmer-tokenfilter.asciidoc: line 14: 1ca618e7d72ec73c1064fa6eae3086d1.adoc
[source,console]
----
PUT /my_index
{
    "settings": {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "my_stemmer"]
                }
            },
            "filter" : {
                "my_stemmer" : {
                    "type" : "stemmer",
                    "name" : "light_german"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/stemmer-override-tokenfilter.asciidoc: line 22: 8995e7cf49c4d870aea334645b70ed13.adoc
[source,console]
----
PUT /my_index
{
    "settings": {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "custom_stems", "porter_stem"]
                }
            },
            "filter" : {
                "custom_stems" : {
                    "type" : "stemmer_override",
                    "rules_path" : "analysis/stemmer_override.txt"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/stemmer-override-tokenfilter.asciidoc: line 55: 35e24a98b35cadd0b1b370ada79249e1.adoc
[source,console]
----
PUT /my_index
{
    "settings": {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "custom_stems", "porter_stem"]
                }
            },
            "filter" : {
                "custom_stems" : {
                    "type" : "stemmer_override",
                    "rules" : [
                        "running => run",
                        "stemmer => stemmer"
                    ]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keyword-marker-tokenfilter.asciidoc: line 25: 863c221b28ae5e58d39bd8f138291949.adoc
[source,console]
----
PUT /keyword_marker_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "protect_cats": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "protect_cats", "porter_stem"]
        },
        "normal": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "porter_stem"]
        }
      },
      "filter": {
        "protect_cats": {
          "type": "keyword_marker",
          "keywords": ["cats"]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keyword-marker-tokenfilter.asciidoc: line 57: abcbf3c246c0d88831b875a601686e35.adoc
[source,console]
----
POST /keyword_marker_example/_analyze
{
  "analyzer" : "protect_cats",
  "text" : "I like cats"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keyword-marker-tokenfilter.asciidoc: line 102: 4ab8f55a8a45d53fb1676112379c212e.adoc
[source,console]
----
POST /keyword_marker_example/_analyze
{
  "analyzer" : "normal",
  "text" : "I like cats"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keyword-repeat-tokenfilter.asciidoc: line 16: 9da83c9a2149bfc6fe215a612ae0a9aa.adoc
[source,console]
----
PUT /keyword_repeat_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "stemmed_and_unstemmed": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "keyword_repeat", "porter_stem", "unique_stem"]
        }
      },
      "filter": {
        "unique_stem": {
          "type": "unique",
          "only_on_same_position": true
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keyword-repeat-tokenfilter.asciidoc: line 43: 757622a424b8445fee49746862a11b02.adoc
[source,console]
----
POST /keyword_repeat_example/_analyze
{
  "analyzer" : "stemmed_and_unstemmed",
  "text" : "I like cats"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/snowball-tokenfilter.asciidoc: line 14: e776311ef67c972f322b669dc4ab9926.adoc
[source,console]
----
PUT /my_index
{
    "settings": {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "my_snow"]
                }
            },
            "filter" : {
                "my_snow" : {
                    "type" : "snowball",
                    "language" : "Lovins"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-tokenfilter.asciidoc: line 9: 09f74df1d07d84ee133ce90f7832e712.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "analyzer" : {
                    "synonym" : {
                        "tokenizer" : "whitespace",
                        "filter" : ["synonym"]
                    }
                },
                "filter" : {
                    "synonym" : {
                        "type" : "synonym",
                        "synonyms_path" : "analysis/synonym.txt"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-tokenfilter.asciidoc: line 50: bcc57126b24c408b5d944928b6f08c94.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "analyzer" : {
                    "synonym" : {
                        "tokenizer" : "standard",
                        "filter" : ["my_stop", "synonym"]
                    }
                },
                "filter" : {
                    "my_stop": {
                        "type" : "stop",
                        "stopwords": ["bar"]
                    },
                    "synonym" : {
                        "type" : "synonym",
                        "lenient": true,
                        "synonyms" : ["foo, bar => baz"]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-tokenfilter.asciidoc: line 111: 9fb5e28535f396ab2eb8bc710eebc1e6.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "filter" : {
                    "synonym" : {
                        "type" : "synonym",
                        "synonyms" : [
                            "i-pod, i pod => ipod",
                            "universe, cosmos"
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-tokenfilter.asciidoc: line 143: 0c0f37e409459dcd40d29ea684db4706.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "filter" : {
                    "synonym" : {
                        "type" : "synonym",
                        "format" : "wordnet",
                        "synonyms" : [
                            "s(100000001,1,'abstain',v,1,0).",
                            "s(100000001,2,'refrain',v,1,0).",
                            "s(100000001,3,'desist',v,1,0)."
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-graph-tokenfilter.asciidoc: line 23: 2f071d36aa4aff5a2fafb3dadaa38b82.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "analyzer" : {
                    "search_synonyms" : {
                        "tokenizer" : "whitespace",
                        "filter" : ["graph_synonyms"]
                    }
                },
                "filter" : {
                    "graph_synonyms" : {
                        "type" : "synonym_graph",
                        "synonyms_path" : "analysis/synonym.txt"
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-graph-tokenfilter.asciidoc: line 59: 3d253e5a0029bc96cce484302319b772.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "analyzer" : {
                    "synonym" : {
                        "tokenizer" : "standard",
                        "filter" : ["my_stop", "synonym_graph"]
                    }
                },
                "filter" : {
                    "my_stop": {
                        "type" : "stop",
                        "stopwords": ["bar"]
                    },
                    "synonym_graph" : {
                        "type" : "synonym_graph",
                        "lenient": true,
                        "synonyms" : ["foo, bar => baz"]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-graph-tokenfilter.asciidoc: line 119: 1a14fd905941ecbdbc943b05875afc6f.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "filter" : {
                    "synonym" : {
                        "type" : "synonym_graph",
                        "synonyms" : [
                            "lol, laughing out loud",
                            "universe, cosmos"
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/synonym-graph-tokenfilter.asciidoc: line 151: f0d7d6d5c878211704d4a5f1b2f6a247.adoc
[source,console]
----
PUT /test_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "filter" : {
                    "synonym" : {
                        "type" : "synonym_graph",
                        "format" : "wordnet",
                        "synonyms" : [
                            "s(100000001,1,'abstain',v,1,0).",
                            "s(100000001,2,'refrain',v,1,0).",
                            "s(100000001,3,'desist',v,1,0)."
                        ]
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/compound-word-tokenfilter.asciidoc: line 86: 349e77cfe54f857ccfdde0e47c2d7cd5.adoc
[source,console]
----
PUT /compound_word_example
{
    "settings": {
        "index": {
            "analysis": {
                "analyzer": {
                    "my_analyzer": {
                        "type": "custom",
                        "tokenizer": "standard",
                        "filter": ["dictionary_decompounder", "hyphenation_decompounder"]
                    }
                },
                "filter": {
                    "dictionary_decompounder": {
                        "type": "dictionary_decompounder",
                        "word_list": ["one", "two", "three"]
                    },
                    "hyphenation_decompounder": {
                        "type" : "hyphenation_decompounder",
                        "word_list_path": "analysis/example_word_list.txt",
                        "hyphenation_patterns_path": "analysis/hyphenation_patterns.xml",
                        "max_subword_size": 22
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/elision-tokenfilter.asciidoc: line 15: c0fa4f18231d7495c39b62bb4e56fe50.adoc
[source,console]
----
PUT /elision_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "default" : {
                    "tokenizer" : "standard",
                    "filter" : ["elision"]
                }
            },
            "filter" : {
                "elision" : {
                    "type" : "elision",
                    "articles_case": true,
                    "articles" : ["l", "m", "t", "qu", "n", "s", "j"]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/pattern-capture-tokenfilter.asciidoc: line 48: f733b25cd4c448b226bb76862974eef2.adoc
[source,console]
----
PUT test
{
   "settings" : {
      "analysis" : {
         "filter" : {
            "code" : {
               "type" : "pattern_capture",
               "preserve_original" : true,
               "patterns" : [
                  "(\\p{Ll}+|\\p{Lu}\\p{Ll}+|\\p{Lu}+)",
                  "(\\d+)"
               ]
            }
         },
         "analyzer" : {
            "code" : {
               "tokenizer" : "pattern",
               "filter" : [ "code", "lowercase" ]
            }
         }
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/pattern-capture-tokenfilter.asciidoc: line 89: 080c34d8151d02b760571e3a2899fa97.adoc
[source,console]
----
PUT test
{
   "settings" : {
      "analysis" : {
         "filter" : {
            "email" : {
               "type" : "pattern_capture",
               "preserve_original" : true,
               "patterns" : [
                  "([^@]+)",
                  "(\\p{L}+)",
                  "(\\d+)",
                  "@(.+)"
               ]
            }
         },
         "analyzer" : {
            "email" : {
               "tokenizer" : "uax_url_email",
               "filter" : [ "email", "lowercase",  "unique" ]
            }
         }
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/limit-token-count-tokenfilter.asciidoc: line 20: fdd46bdb2b0b0b5f8e7e502291496db8.adoc
[source,console]
----
PUT /limit_example
{
  "settings": {
    "analysis": {
      "analyzer": {
        "limit_example": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "five_token_limit"]
        }
      },
      "filter": {
        "five_token_limit": {
          "type": "limit",
          "max_token_count": 5
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/hunspell-tokenfilter.asciidoc: line 44: 0af002734dd884f9385da6c3a4ca87a1.adoc
[source,console]
----
PUT /hunspell_example
{
    "settings": {
        "analysis" : {
            "analyzer" : {
                "en" : {
                    "tokenizer" : "standard",
                    "filter" : [ "lowercase", "en_US" ]
                }
            },
            "filter" : {
                "en_US" : {
                    "type" : "hunspell",
                    "locale" : "en_US",
                    "dedup" : true
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/common-grams-tokenfilter.asciidoc: line 43: dc0d7dd6fb47db03df4cb11bdb00b125.adoc
[source,console]
----
PUT /common_grams_example
{
    "settings": {
        "analysis": {
            "analyzer": {
                "index_grams": {
                    "tokenizer": "whitespace",
                    "filter": ["common_grams"]
                },
                "search_grams": {
                    "tokenizer": "whitespace",
                    "filter": ["common_grams_query"]
                }
            },
            "filter": {
                "common_grams": {
                    "type": "common_grams",
                    "common_words": ["the", "is", "a"]
                },
                "common_grams_query": {
                    "type": "common_grams",
                    "query_mode": true,
                    "common_words": ["the", "is", "a"]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/common-grams-tokenfilter.asciidoc: line 78: 817be849e2c568a21766d6ce2ffafadd.adoc
[source,console]
----
POST /common_grams_example/_analyze
{
  "analyzer" : "index_grams",
  "text" : "the quick brown is a fox"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/cjk-bigram-tokenfilter.asciidoc: line 18: 4a40ccf6b1a0090da8d8033b435b5b7d.adoc
[source,console]
----
PUT /cjk_bigram_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "han_bigrams" : {
                    "tokenizer" : "standard",
                    "filter" : ["han_bigrams_filter"]
                }
            },
            "filter" : {
                "han_bigrams_filter" : {
                    "type" : "cjk_bigram",
                    "ignored_scripts": [
                        "hiragana",
                        "katakana",
                        "hangul"
                    ],
                    "output_unigrams" : true
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keep-words-tokenfilter.asciidoc: line 22: 44cb20732770bb9a5f114a7517db774f.adoc
[source,console]
----
PUT /keep_words_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "example_1" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "words_till_three"]
                },
                "example_2" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "words_in_file"]
                }
            },
            "filter" : {
                "words_till_three" : {
                    "type" : "keep",
                    "keep_words" : [ "one", "two", "three"]
                },
                "words_in_file" : {
                    "type" : "keep",
                    "keep_words_path" : "analysis/example_word_list.txt"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keep-types-tokenfilter.asciidoc: line 21: 928923befcb84cdcace229b027fd281f.adoc
[source,console]
----
PUT /keep_types_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "extract_numbers"]
                }
            },
            "filter" : {
                "extract_numbers" : {
                    "type" : "keep_types",
                    "types" : [ "<NUM>" ]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keep-types-tokenfilter.asciidoc: line 47: b425b2194294437ac21df0b5606fb3d2.adoc
[source,console]
----
POST /keep_types_example/_analyze
{
  "analyzer" : "my_analyzer",
  "text" : "this is just 1 a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keep-types-tokenfilter.asciidoc: line 82: 1658d704f26a06e8f37c6430361c3f26.adoc
[source,console]
----
PUT /keep_types_exclude_example
{
    "settings" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["lowercase", "remove_numbers"]
                }
            },
            "filter" : {
                "remove_numbers" : {
                    "type" : "keep_types",
                    "mode" : "exclude",
                    "types" : [ "<NUM>" ]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/tokenfilters/keep-types-tokenfilter.asciidoc: line 109: 4d5ded2eede9a987df094dc4a91893d7.adoc
[source,console]
----
POST /keep_types_exclude_example/_analyze
{
  "analyzer" : "my_analyzer",
  "text" : "hello 101 world"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/charfilters/htmlstrip-charfilter.asciidoc: line 12: d6de3491f5787f739d5cd8c2ff3dddfa.adoc
[source,console]
----
POST _analyze
{
  "tokenizer":      "keyword", \<1>
  "char_filter":  [ "html_strip" ],
  "text": "\<p>I&apos;m so \<b>happy</b>!</p>"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/charfilters/htmlstrip-charfilter.asciidoc: line 75: 426f95b13a5b6042b5273d74ad8ee708.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "keyword",
          "char_filter": ["my_char_filter"]
        }
      },
      "char_filter": {
        "my_char_filter": {
          "type": "html_strip",
          "escaped_tags": ["b"]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "\<p>I&apos;m so \<b>happy</b>!</p>"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/charfilters/mapping-charfilter.asciidoc: line 35: f9518803f0368e326ce2f46bd213bde9.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "keyword",
          "char_filter": [
            "my_char_filter"
          ]
        }
      },
      "char_filter": {
        "my_char_filter": {
          "type": "mapping",
          "mappings": [
            "٠ => 0",
            "١ => 1",
            "٢ => 2",
            "٣ => 3",
            "٤ => 4",
            "٥ => 5",
            "٦ => 6",
            "٧ => 7",
            "٨ => 8",
            "٩ => 9"
          ]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "My license plate is ٢٥٠١٥"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/charfilters/mapping-charfilter.asciidoc: line 109: 8d5c32d86f00cf27d3f52a5fc493ea30.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "standard",
          "char_filter": [
            "my_char_filter"
          ]
        }
      },
      "char_filter": {
        "my_char_filter": {
          "type": "mapping",
          "mappings": [
            ":) => _happy_",
            ":( => _sad_"
          ]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "I'm delighted about it :("
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/charfilters/pattern-replace-charfilter.asciidoc: line 51: 2b8ba109999fc87712433cea92c99ebe.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "standard",
          "char_filter": [
            "my_char_filter"
          ]
        }
      },
      "char_filter": {
        "my_char_filter": {
          "type": "pattern_replace",
          "pattern": "(\\d+)-(?=\\d)",
          "replacement": "$1_"
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "My credit card is 123-456-789"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/charfilters/pattern-replace-charfilter.asciidoc: line 102: 1e1f0d83b1ca672396341af5dcfd2603.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "standard",
          "char_filter": [
            "my_char_filter"
          ],
          "filter": [
            "lowercase"
          ]
        }
      },
      "char_filter": {
        "my_char_filter": {
          "type": "pattern_replace",
          "pattern": "(?<=\\p{Lower})(?=\\p{Upper})",
          "replacement": " "
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "analyzer": "my_analyzer"
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "The fooBarBaz method"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== analysis/charfilters/pattern-replace-charfilter.asciidoc: line 205: 32afaee3f1326785b4009ff48576d42f.adoc
[source,console]
----
PUT my_index/_doc/1?refresh
{
  "text": "The fooBarBaz method"
}

GET my_index/_search
{
  "query": {
    "match": {
      "text": "bar"
    }
  },
  "highlight": {
    "fields": {
      "text": {}
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/discovery/voting.asciidoc: line 31: 1605be45a5711d1929d6ad2d1ae0f797.adoc
[source,console]
----
GET /_cluster/state?filter_path=metadata.cluster_coordination.last_committed_config
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/discovery/adding-removing-nodes.asciidoc: line 64: abcc9f98c6bbaf70aa0b1abf8011d2a4.adoc
[source,console]
----
# Add node to voting configuration exclusions list and wait for the system
# to auto-reconfigure the node out of the voting configuration up to the
# default timeout of 30 seconds
POST /_cluster/voting_config_exclusions/node_name

# Add node to voting configuration exclusions list and wait for
# auto-reconfiguration up to one minute
POST /_cluster/voting_config_exclusions/node_name?timeout=1m
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/discovery/adding-removing-nodes.asciidoc: line 108: 92f073762634a4b2274f71002494192e.adoc
[source,console]
----
GET /_cluster/state?filter_path=metadata.cluster_coordination.voting_config_exclusions
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/discovery/adding-removing-nodes.asciidoc: line 127: ead4d875877d618594d0cdbdd9b7998b.adoc
[source,console]
----
# Wait for all the nodes with voting configuration exclusions to be removed from
# the cluster and then remove all the exclusions, allowing any node to return to
# the voting configuration in the future.
DELETE /_cluster/voting_config_exclusions

# Immediately remove all the voting configuration exclusions, allowing any node
# to return to the voting configuration in the future.
DELETE /_cluster/voting_config_exclusions?wait_for_removal=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cluster/disk_allocator.asciidoc: line 56: aaaa9a186db96077879ddfcfbd625fdb.adoc
[source,console]
----
PUT /twitter/_settings
{
  "index.blocks.read_only_allow_delete": null
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cluster/disk_allocator.asciidoc: line 92: 4fe5a9e99dc9400d67a5a2f6f6752c07.adoc
[source,console]
----
PUT _cluster/settings
{
  "transient": {
    "cluster.routing.allocation.disk.watermark.low": "100gb",
    "cluster.routing.allocation.disk.watermark.high": "50gb",
    "cluster.routing.allocation.disk.watermark.flood_stage": "10gb",
    "cluster.info.update.interval": "1m"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cluster/allocation_filtering.asciidoc: line 22: 281ae12918af10b6377ec760eaa844ce.adoc
[source,console]
----
PUT _cluster/settings
{
  "transient" : {
    "cluster.routing.allocation.exclude._ip" : "10.0.0.1"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cluster/allocation_filtering.asciidoc: line 61: 07474768b8f9d532b524c15e512736f4.adoc
[source,console]
----
PUT _cluster/settings
{
  "transient": {
    "cluster.routing.allocation.exclude._ip": "192.168.2.*"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cluster/misc.asciidoc: line 79: 4207219a892339e8f3abe0df8723dd27.adoc
[source,console]
----
PUT /_cluster/settings
{
  "persistent": {
    "cluster.metadata.administrator": "sysadmin@example.com"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cluster/misc.asciidoc: line 120: c3fa14da3d0b0f93fb59bb5386b7e776.adoc
[source,console]
----
PUT /_cluster/settings
{
  "transient": {
    "logger.org.elasticsearch.indices.recovery": "DEBUG"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/indices/request_cache.asciidoc: line 44: 00629ea43db6ee1704183170df085495.adoc
[source,console]
----
POST /kimchy,elasticsearch/_cache/clear?request=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/indices/request_cache.asciidoc: line 57: adebfecf7485326e9f7fae9de9169abc.adoc
[source,console]
----
PUT /my_index
{
  "settings": {
    "index.requests.cache.enable": false
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/indices/request_cache.asciidoc: line 71: f22e069bc0c6f9dae57e084c662a86fd.adoc
[source,console]
----
PUT /my_index/_settings
{ "index.requests.cache.enable": true }
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/indices/request_cache.asciidoc: line 86: 13e9c7cdd43161f1336c94fd70a0db0c.adoc
[source,console]
----
GET /my_index/_search?request_cache=true
{
  "size": 0,
  "aggs": {
    "popular_colors": {
      "terms": {
        "field": "colors"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/indices/request_cache.asciidoc: line 144: 36da9668fef56910370f16bfb772cc40.adoc
[source,console]
----
GET /_stats/request_cache?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/indices/request_cache.asciidoc: line 152: 90631797c7fbda43902abf2cc0ea8304.adoc
[source,console]
----
GET /_nodes/stats/indices/request_cache?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 95: 92b3749a473cf2e7ff4055316662a4fe.adoc
[source,console]
----
PUT /_snapshot/my_backup
{
  "type": "fs",
  "settings": {
    "location": "my_backup_location"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 110: ff930e6409b6a923ef1c9e7fc99f24cc.adoc
[source,console]
----
GET /_snapshot/my_backup
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 137: b9e4f7a80d21c85f88f578219df8e192.adoc
[source,console]
----
GET /_snapshot/repo*,*backup*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 146: 0d754b0d8d13c6d39ea353978dfe5992.adoc
[source,console]
----
GET /_snapshot
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 154: 37432cda12eb63ce59d186b55233c6e1.adoc
[source,console]
----
GET /_snapshot/_all
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 187: 44b410249d477c640c127bfc7320e365.adoc
[source,console]
----
PUT /_snapshot/my_fs_backup
{
    "type": "fs",
    "settings": {
        "location": "/mount/backups/my_fs_backup_location",
        "compress": true
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 204: 8988215f3a4fc4b7a7ef4a9c5be3391e.adoc
[source,console]
----
PUT /_snapshot/my_fs_backup
{
    "type": "fs",
    "settings": {
        "location": "my_fs_backup_location",
        "compress": true
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 282: 98ee9bfa32b64ca22e4338544b36c370.adoc
[source,console]
----
PUT _snapshot/my_src_only_repository
{
  "type": "source",
  "settings": {
    "delegate_type": "fs",
    "location": "my_backup_location"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 312: f1a7cf532da3a8f9a52a401a90e3a998.adoc
[source,console]
----
PUT /_snapshot/my_unverified_backup?verify=false
{
  "type": "fs",
  "settings": {
    "location": "my_unverified_backup_location"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 327: 337cd2c3f9e11665f00786705037f86c.adoc
[source,console]
----
POST /_snapshot/my_unverified_backup/_verify
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 344: 2ab78817eacb5030a447e7fac6b91591.adoc
[source,console]
----
PUT /_snapshot/my_backup/snapshot_1?wait_for_completion=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 359: 4a0353692bb14c5fccdc97903af0aa13.adoc
[source,console]
----
PUT /_snapshot/my_backup/snapshot_2?wait_for_completion=true
{
  "indices": "index_1,index_2",
  "ignore_unavailable": true,
  "include_global_state": false,
  "metadata": {
    "taken_by": "kimchy",
    "taken_because": "backup before upgrading"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 391: 7eb0303e39243fbb9bf51a99270cd022.adoc
[source,console]
----
# PUT /_snapshot/my_backup/<snapshot-{now/d}>
PUT /_snapshot/my_backup/%3Csnapshot-%7Bnow%2Fd%7D%3E
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 422: 020c56e520ff6556ebfaf98efaef56aa.adoc
[source,console]
----
GET /_snapshot/my_backup/snapshot_1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 460: 0b77ebfb06c63ccbad857b39bb4ff851.adoc
[source,console]
----
GET /_snapshot/my_backup/snapshot_*,some_other_snapshot
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 469: fb224f0ae2a03567b6d9b165e7dd24b6.adoc
[source,console]
----
GET /_snapshot/my_backup/_all
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 489: 677fdf84ac97bb107207b6966143144b.adoc
[source,console]
----
GET /_snapshot/_all
GET /_snapshot/my_backup,my_fs_backup
GET /_snapshot/my*/snap*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 500: 155c438e215890cdcb4879eaaadf4046.adoc
[source,console]
----
GET /_snapshot/my_backup/_current
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 509: 0784fbe88299be4f02eaa86368e93203.adoc
[source,console]
----
DELETE /_snapshot/my_backup/snapshot_2
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 524: 2b8d2065be3002b0be26598d6ad803a6.adoc
[source,console]
----
DELETE /_snapshot/my_backup
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 540: 853ca73db9b596cc4ddda66b3ec8faa2.adoc
[source,console]
----
POST /_snapshot/my_backup/snapshot_1/_restore
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 559: 47dcf95e3d398b9bdcb0a483f705bb4b.adoc
[source,console]
----
POST /_snapshot/my_backup/snapshot_1/_restore
{
  "indices": "index_1,index_2",
  "ignore_unavailable": true,
  "include_global_state": true,
  "rename_pattern": "index_(.+)",
  "rename_replacement": "restored_index_$1"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 598: 79ecb7594b3e55df3e28149beff222f6.adoc
[source,console]
----
POST /_snapshot/my_backup/snapshot_1/_restore
{
  "indices": "index_1",
  "index_settings": {
    "index.number_of_replicas": 0
  },
  "ignore_index_settings": [
    "index.refresh_interval"
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 643: 1ae301364751c376b3d26581a36d8975.adoc
[source,console]
----
GET /_snapshot/_status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 653: db1913b97109b86cfc5efc7cfcd65d93.adoc
[source,console]
----
GET /_snapshot/my_backup/_status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 663: e566ca0098be82a2847c17069711a822.adoc
[source,console]
----
GET /_snapshot/my_backup/snapshot_1/_status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 720: 2432f86346177533cabdabbd4eb41b30.adoc
[source,console]
----
GET /_snapshot/my_backup/snapshot_1,snapshot_2/_status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 737: 020c56e520ff6556ebfaf98efaef56aa.adoc
[source,console]
----
GET /_snapshot/my_backup/snapshot_1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 750: e566ca0098be82a2847c17069711a822.adoc
[source,console]
----
GET /_snapshot/my_backup/snapshot_1/_status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/snapshots.asciidoc: line 780: 86c723fc6212d34166661e7dac223491.adoc
[source,console]
----
DELETE /_snapshot/my_backup/snapshot_1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/transport.asciidoc: line 157: 939e79dee613238f9512fb9cbf0be816.adoc
[source,console]
----
PUT _cluster/settings
{
   "transient" : {
      "logger.org.elasticsearch.transport.TransportService.tracer" : "TRACE"
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/transport.asciidoc: line 171: cecbbd7b4ec1bf82fd84ae96099febcc.adoc
[source,console]
----
PUT _cluster/settings
{
   "transient" : {
      "transport.tracer.include" : "*",
      "transport.tracer.exclude" : "internal:coordination/fault_detection/*"
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/remote-clusters.asciidoc: line 103: d4ce5a9672f85094e6d833d08debc018.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_one": {
          "seeds": [
            "127.0.0.1:9300"
          ],
          "transport.ping_schedule": "30s"
        },
        "cluster_two": {
          "seeds": [
            "127.0.0.1:9301"
          ],
          "transport.compress": true,
          "skip_unavailable": true
        },
        "cluster_three": {
          "seeds": [
            "127.0.0.1:9302"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/remote-clusters.asciidoc: line 140: 328b7b4d0de6fac3a91205251de6e9b5.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_one": {
          "seeds": [
            "127.0.0.1:9300"
          ],
          "transport.ping_schedule": "60s"
        },
        "cluster_two": {
          "seeds": [
            "127.0.0.1:9301"
          ],
          "transport.compress": false
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/remote-clusters.asciidoc: line 173: 2a0d451f9e13aca39467883b16270cc2.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_two": { \<1>
          "seeds": null,
          "skip_unavailable": null,
          "transport": {
            "compress": null
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cross-cluster-search.asciidoc: line 16: a8d39396d741e768083808bb11443e9b.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_one": {
          "seeds": [
            "127.0.0.1:9300"
          ]
        },
        "cluster_two": {
          "seeds": [
            "127.0.0.1:9301"
          ]
        },
        "cluster_three": {
          "seeds": [
            "127.0.0.1:9302"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cross-cluster-search.asciidoc: line 51: 972c0c1b6c0b8327fadd77cc1c71b532.adoc
[source,console]
----
GET /cluster_one:twitter/_search
{
  "query": {
    "match": {
      "user": "kimchy"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cross-cluster-search.asciidoc: line 112: 475943160dca26fd77e750eb586f72bb.adoc
[source,console]
----
GET /cluster_one:twitter,twitter/_search
{
  "query": {
    "match": {
      "user": "kimchy"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cross-cluster-search.asciidoc: line 197: 530326f2f610142a4a314c49c216045b.adoc
[source,console]
----
PUT _cluster/settings
{
  "persistent": {
    "cluster.remote.cluster_two.skip_unavailable": true \<1>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== modules/cross-cluster-search.asciidoc: line 210: 89a950acef646a65bb947c862743ac61.adoc
[source,console]
----
GET /cluster_one:twitter,cluster_two:twitter,twitter/_search \<1>
{
  "query": {
    "match": {
      "user": "kimchy"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/filtering.asciidoc: line 54: dad2d4add751fde5c39475ca709cc14b.adoc
[source,console]
----
PUT test/_settings
{
  "index.routing.allocation.include.size": "big,medium"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/filtering.asciidoc: line 68: b8b198ede3d08f315348e2a857e47773.adoc
[source,console]
----
PUT test/_settings
{
  "index.routing.allocation.include.size": "big",
  "index.routing.allocation.include.rack": "rack1"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/filtering.asciidoc: line 110: 28ac880057135e46b3b00c7f3976538c.adoc
[source,console]
----
PUT test/_settings
{
  "index.routing.allocation.include._ip": "192.168.2.*"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/delayed.asciidoc: line 40: 17e6f3fac556f08a78f7a876e71acb89.adoc
[source,console]
----
PUT _all/_settings
{
  "settings": {
    "index.unassigned.node_left.delayed_timeout": "5m"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/delayed.asciidoc: line 83: a38f29375eabd0103f8d7c00b17bb0ab.adoc
[source,console]
----
GET _cluster/health \<1>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/delayed.asciidoc: line 96: 25d40d3049e57e2bb70c2c5b88bd7b87.adoc
[source,console]
----
PUT _all/_settings
{
  "settings": {
    "index.unassigned.node_left.delayed_timeout": "0"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/prioritization.asciidoc: line 17: 8703f3b1b3895543abc36e2a7a0013d3.adoc
[source,console]
----
PUT index_1

PUT index_2

PUT index_3
{
  "settings": {
    "index.priority": 10
  }
}

PUT index_4
{
  "settings": {
    "index.priority": 5
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/allocation/prioritization.asciidoc: line 49: a425fcab60f603504becee7d001f0a4b.adoc
[source,console]
----
PUT index_4/_settings
{
  "index.priority": 1
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/similarity.asciidoc: line 22: ce12fedff96537d4a5169724225f4287.adoc
[source,console]
----
PUT /index
{
    "settings" : {
        "index" : {
            "similarity" : {
              "my_similarity" : {
                "type" : "DFR",
                "basic_model" : "g",
                "after_effect" : "l",
                "normalization" : "h2",
                "normalization.h2.c" : "3.0"
              }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/similarity.asciidoc: line 46: 528e5f1c345c3769248cc6889e8cf552.adoc
[source,console]
----
PUT /index/_mapping
{
  "properties" : {
    "title" : { "type" : "text", "similarity" : "my_similarity" }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/similarity.asciidoc: line 194: dfa16b7300d225e013f23625f44c087b.adoc
[source,console]
----
PUT /index
{
  "settings": {
    "number_of_shards": 1,
    "similarity": {
      "scripted_tfidf": {
        "type": "scripted",
        "script": {
          "source": "double tf = Math.sqrt(doc.freq); double idf = Math.log((field.docCount+1.0)/(term.docFreq+1.0)) + 1.0; double norm = 1/Math.sqrt(doc.length); return query.boost * tf * idf * norm;"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "field": {
        "type": "text",
        "similarity": "scripted_tfidf"
      }
    }
  }
}

PUT /index/_doc/1
{
  "field": "foo bar foo"
}

PUT /index/_doc/2
{
  "field": "bar baz"
}

POST /index/_refresh

GET /index/_search?explain=true
{
  "query": {
    "query_string": {
      "query": "foo^1.7",
      "default_field": "field"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/similarity.asciidoc: line 361: 5f8fb5513d4f725434db2f517ad4298f.adoc
[source,console]
----
PUT /index
{
  "settings": {
    "number_of_shards": 1,
    "similarity": {
      "scripted_tfidf": {
        "type": "scripted",
        "weight_script": {
          "source": "double idf = Math.log((field.docCount+1.0)/(term.docFreq+1.0)) + 1.0; return query.boost * idf;"
        },
        "script": {
          "source": "double tf = Math.sqrt(doc.freq); double norm = 1/Math.sqrt(doc.length); return weight * tf * norm;"
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "field": {
        "type": "text",
        "similarity": "scripted_tfidf"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/similarity.asciidoc: line 527: 553d79817bb1333970e99507c37a159a.adoc
[source,console]
----
PUT /index
{
  "settings": {
    "index": {
      "similarity": {
        "default": {
          "type": "boolean"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/similarity.asciidoc: line 548: 48de51de87a8ad9fd8b8db1ca25b85c1.adoc
[source,console]
----
POST /index/_close

PUT /index/_settings
{
  "index": {
    "similarity": {
      "default": {
        "type": "boolean"
      }
    }
  }
}

POST /index/_open
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/slowlog.asciidoc: line 33: fa0b341d790a4da480b47bf501835359.adoc
[source,console]
----
PUT /twitter/_settings
{
    "index.search.slowlog.threshold.query.warn": "10s",
    "index.search.slowlog.threshold.query.info": "5s",
    "index.search.slowlog.threshold.query.debug": "2s",
    "index.search.slowlog.threshold.query.trace": "500ms",
    "index.search.slowlog.threshold.fetch.warn": "1s",
    "index.search.slowlog.threshold.fetch.info": "800ms",
    "index.search.slowlog.threshold.fetch.debug": "500ms",
    "index.search.slowlog.threshold.fetch.trace": "200ms",
    "index.search.slowlog.level": "info"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/slowlog.asciidoc: line 109: 44a16db65121edaf099d944819356e2c.adoc
[source,console]
----
PUT /twitter/_settings
{
    "index.indexing.slowlog.threshold.index.warn": "10s",
    "index.indexing.slowlog.threshold.index.info": "5s",
    "index.indexing.slowlog.threshold.index.debug": "2s",
    "index.indexing.slowlog.threshold.index.trace": "500ms",
    "index.indexing.slowlog.level": "info",
    "index.indexing.slowlog.source": "1000"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/store.asciidoc: line 26: 509322c2cfd2bcb2f4cbfd14666e1f43.adoc
[source,console]
----
PUT /my_index
{
  "settings": {
    "index.store.type": "niofs"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/store.asciidoc: line 116: 9ba2e779fe3e9d12ed5fca1ba3f8be97.adoc
[source,console]
----
PUT /my_index
{
  "settings": {
    "index.store.preload": ["nvd", "dvd"]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/index-sorting.asciidoc: line 16: fea339c85b60ccefa6a163a70b86ca82.adoc
[source,console]
----
PUT twitter
{
    "settings" : {
        "index" : {
            "sort.field" : "date", \<1>
            "sort.order" : "desc" \<2>
        }
    },
    "mappings": {
        "properties": {
            "date": {
                "type": "date"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/index-sorting.asciidoc: line 42: a69f1a67cdc141e8dde5abb437c76959.adoc
[source,console]
----
PUT twitter
{
    "settings" : {
        "index" : {
            "sort.field" : ["username", "date"], \<1>
            "sort.order" : ["asc", "desc"] \<2>
        }
    },
    "mappings": {
        "properties": {
            "username": {
                "type": "keyword",
                "doc_values": true
            },
            "date": {
                "type": "date"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/index-sorting.asciidoc: line 116: e01a82a0a809a4770ddc84c2cfc1ec85.adoc
[source,console]
----
PUT events
{
    "settings" : {
        "index" : {
            "sort.field" : "timestamp",
            "sort.order" : "desc" \<1>
        }
    },
    "mappings": {
        "properties": {
            "timestamp": {
                "type": "date"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/index-sorting.asciidoc: line 141: 46a3694ee4a7bbd4973565e5886782bb.adoc
[source,console]
----
GET /events/_search
{
    "size": 10,
    "sort": [
        { "timestamp": "desc" }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== index-modules/index-sorting.asciidoc: line 163: 2e8ba1e0b2a18dd276bbbe64f2b86338.adoc
[source,console]
----
GET /events/_search
{
    "size": 10,
    "sort": [ \<1>
        { "timestamp": "desc" }
    ],
    "track_total_hits": false
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest.asciidoc: line 32: 55704b69b03239fe13293fc7622d27da.adoc
[source,console]
----
PUT _ingest/pipeline/my_pipeline_id
{
  "description" : "describe pipeline",
  "processors" : [
    {
      "set" : {
        "field": "foo",
        "value": "new"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest.asciidoc: line 52: 6f3a4b4a01b6fae193897f00cb4855d0.adoc
[source,console]
----
PUT my-index/_doc/my-id?pipeline=my_pipeline_id
{
  "foo": "bar"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/put-pipeline.asciidoc: line 7: e7e28812b86c5257bf48931d131409f0.adoc
[source,console]
----
PUT _ingest/pipeline/my-pipeline-id
{
  "description" : "describe pipeline",
  "processors" : [
    {
      "set" : {
        "field": "foo",
        "value": "bar"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/get-pipeline.asciidoc: line 28: 375bd91eeb64a865c49352ef0c745a0a.adoc
[source,console]
----
GET _ingest/pipeline/my-pipeline-id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/get-pipeline.asciidoc: line 69: 8fc926f8c03c4a03afee543370d92f66.adoc
[source,console]
----
PUT _ingest/pipeline/my-pipeline-id
{
  "description" : "describe pipeline",
  "version" : 123,
  "processors" : [
    {
      "set" : {
        "field": "foo",
        "value": "bar"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/get-pipeline.asciidoc: line 91: 9f549bb400b6cc1523b00d60bc8fd8e1.adoc
[source,console]
----
GET /_ingest/pipeline/my-pipeline-id?filter_path=*.version
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/delete-pipeline.asciidoc: line 29: a05925031c1bfbb10c4ef6e5b678e20a.adoc
[source,console]
----
DELETE _ingest/pipeline/my-pipeline-id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/delete-pipeline.asciidoc: line 64: 6ae6a398b979af8231cf6753a9a73f99.adoc
[source,console]
----
DELETE _ingest/pipeline/*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/simulate-pipeline.asciidoc: line 50: 68168bb8190037f0c1ea1254f5f5e5a0.adoc
[source,console]
----
POST _ingest/pipeline/_simulate
{
  "pipeline" :
  {
    "description": "_description",
    "processors": [
      {
        "set" : {
          "field" : "field2",
          "value" : "_value"
        }
      }
    ]
  },
  "docs": [
    {
      "_index": "index",
      "_id": "id",
      "_source": {
        "foo": "bar"
      }
    },
    {
      "_index": "index",
      "_id": "id",
      "_source": {
        "foo": "rab"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/apis/simulate-pipeline.asciidoc: line 135: 6ee061e58bf07bd6a678d210811e2000.adoc
[source,console]
----
POST _ingest/pipeline/_simulate?verbose
{
  "pipeline" :
  {
    "description": "_description",
    "processors": [
      {
        "set" : {
          "field" : "field2",
          "value" : "_value2"
        }
      },
      {
        "set" : {
          "field" : "field3",
          "value" : "_value3"
        }
      }
    ]
  },
  "docs": [
    {
      "_index": "index",
      "_id": "id",
      "_source": {
        "foo": "bar"
      }
    },
    {
      "_index": "index",
      "_id": "id",
      "_source": {
        "foo": "rab"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 186: 841306ff1ac69cceb5bf1c28e2f26dd3.adoc
[source,console]
----
PUT _ingest/pipeline/drop_guests_network
{
  "processors": [
    {
      "drop": {
        "if": "ctx.network_name == 'Guest'"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 203: 027ee5302d967b530123886906c42a90.adoc
[source,console]
----
POST test/_doc/1?pipeline=drop_guests_network
{
  "network_name" : "Guest"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 246: 9a5f1f590791012d32d29605daf82135.adoc
[source,console]
----
PUT _ingest/pipeline/drop_guests_network
{
  "processors": [
    {
      "drop": {
        "if": "ctx.network?.name == 'Guest'"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 263: f8a8b78caaf69d44c71c476ea2a178aa.adoc
[source,console]
----
POST test/_doc/1?pipeline=drop_guests_network
{
  "network": {
    "name": "Guest"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 279: 3eb75cee4c802d99bb526386349ee36b.adoc
[source,console]
----
POST test/_doc/2?pipeline=drop_guests_network
{
  "foo" : "bar"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 342: 089ca88d7fd064a474e156d773211bc5.adoc
[source,console]
----
PUT _ingest/pipeline/drop_guests_network
{
  "processors": [
    {
      "dot_expander": {
        "field": "network.name"
      }
    },
    {
      "drop": {
        "if": "ctx.network?.name == 'Guest'"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 364: 8f6cec77f890027ad2e01f06e1290e25.adoc
[source,console]
----
POST test/_doc/3?pipeline=drop_guests_network
{
  "network.name": "Guest"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 412: 3b54be0a1a020edb8943f063f05b5cd7.adoc
[source,console]
----
PUT _ingest/pipeline/not_prod_dropper
{
  "processors": [
    {
      "drop": {
        "if": "Collection tags = ctx.tags;if(tags != null){for (String tag : tags) {if (tag.toLowerCase().contains('prod')) { return false;}}} return true;"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 458: da19607976c3740945300c18e692bc49.adoc
[source,console]
----
POST test/_doc/1?pipeline=not_prod_dropper
{
  "tags": ["application:myapp", "env:Stage"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 474: 784dcf96b4970ce6c90d999cdfc2ef0b.adoc
[source,console]
----
POST test/_doc/2?pipeline=not_prod_dropper
{
  "tags": ["application:myapp", "env:Production"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 529: 462b3cfb75b60b2df9e0567520aa9bf9.adoc
[source,console]
----
PUT _ingest/pipeline/logs_pipeline
{
  "description": "A pipeline of pipelines for log files",
  "version": 1,
  "processors": [
    {
      "pipeline": {
        "if": "ctx.service?.name == 'apache_httpd'",
        "name": "httpd_pipeline"
      }
    },
    {
      "pipeline": {
        "if": "ctx.service?.name == 'syslog'",
        "name": "syslog_pipeline"
      }
    },
    {
      "fail": {
        "message": "This pipeline requires service.name to be either `syslog` or `apache_httpd`"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 575: fe2d94eba550076cc27ee21a711fdb5c.adoc
[source,console]
----
PUT _ingest/pipeline/check_url
{
  "processors": [
    {
      "set": {
        "if": "ctx.href?.url =~ /^http[^s]/",
        "field": "href.insecure",
        "value": true
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 592: bfc92c930234ada7a3f394263b0deb1e.adoc
[source,console]
----
POST test/_doc/1?pipeline=check_url
{
  "href": {
    "url": "http://www.elastic.co/"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/ingest-node.asciidoc: line 643: 2ad6189aef1ecbb52bf0ddbd4e7a80cb.adoc
[source,console]
----
PUT _ingest/pipeline/check_url
{
  "processors": [
    {
      "set": {
        "if": "ctx.href?.url != null && ctx.href.url.startsWith('http://')",
        "field": "href.insecure",
        "value": true
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/date-index-name.asciidoc: line 20: 83c8cce0372677857609a2e80e8eb1c4.adoc
[source,console]
----
PUT _ingest/pipeline/monthlyindex
{
  "description": "monthly date-time index naming",
  "processors" : [
    {
      "date_index_name" : {
        "field" : "date1",
        "index_name_prefix" : "myindex-",
        "date_rounding" : "M"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/date-index-name.asciidoc: line 41: 9f3f1b6bd431f6fa40fc17ce9a5a89b8.adoc
[source,console]
----
PUT /myindex/_doc/1?pipeline=monthlyindex
{
  "date1" : "2016-04-25T12:02:01.789Z"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/date-index-name.asciidoc: line 78: 44f672df54c28327070b4ca09999718c.adoc
[source,console]
----
POST _ingest/pipeline/_simulate
{
  "pipeline" :
  {
    "description": "monthly date-time index naming",
    "processors" : [
      {
        "date_index_name" : {
          "field" : "date1",
          "index_name_prefix" : "myindex-",
          "date_rounding" : "M"
        }
      }
    ]
  },
  "docs": [
    {
      "_source": {
        "date1": "2016-04-25T12:02:01.789Z"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/geoip.asciidoc: line 45: 0b6aa8f2d6916951959d6186b25d2b54.adoc
[source,console]
----
PUT _ingest/pipeline/geoip
{
  "description" : "Add geoip info",
  "processors" : [
    {
      "geoip" : {
        "field" : "ip"
      }
    }
  ]
}
PUT my_index/_doc/my_id?pipeline=geoip
{
  "ip": "8.8.8.8"
}
GET my_index/_doc/my_id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/geoip.asciidoc: line 94: 573a466d7a3a8e31194666e2ecc1d92a.adoc
[source,console]
----
PUT _ingest/pipeline/geoip
{
  "description" : "Add geoip info",
  "processors" : [
    {
      "geoip" : {
        "field" : "ip",
        "target_field" : "geo",
        "database_file" : "GeoLite2-Country.mmdb"
      }
    }
  ]
}
PUT my_index/_doc/my_id?pipeline=geoip
{
  "ip": "8.8.8.8"
}
GET my_index/_doc/my_id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/geoip.asciidoc: line 147: c5681f52305e065ef13c3e0ad5393263.adoc
[source,console]
----
PUT _ingest/pipeline/geoip
{
  "description" : "Add geoip info",
  "processors" : [
    {
      "geoip" : {
        "field" : "ip"
      }
    }
  ]
}

PUT my_index/_doc/my_id?pipeline=geoip
{
  "ip": "80.231.5.0"
}

GET my_index/_doc/my_id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/geoip.asciidoc: line 198: 0737ebaea33631f001fb3f4226948492.adoc
[source,console]
----
PUT my_ip_locations
{
  "mappings": {
    "properties": {
      "geoip": {
        "properties": {
          "location": { "type": "geo_point" }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/grok.asciidoc: line 159: 77828fcaecc3f058c48b955928198ff6.adoc
[source,console]
----
POST _ingest/pipeline/_simulate
{
  "pipeline": {
  "description" : "parse multiple patterns",
  "processors": [
    {
      "grok": {
        "field": "message",
        "patterns": ["%{FAVORITE_DOG:pet}", "%{FAVORITE_CAT:pet}"],
        "pattern_definitions" : {
          "FAVORITE_DOG" : "beagle",
          "FAVORITE_CAT" : "burmese"
        }
      }
    }
  ]
},
"docs":[
  {
    "_source": {
      "message": "I love burmese cats!"
    }
  }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/grok.asciidoc: line 287: 98574a419b6be603a0af8f7f22a92d23.adoc
[source,console]
----
GET _ingest/processor/grok
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/pipeline.asciidoc: line 29: 8494d09c39e109a012094eb9d6ec52ac.adoc
[source,console]
----
PUT _ingest/pipeline/pipelineA
{
  "description" : "inner pipeline",
  "processors" : [
    {
      "set" : {
        "field": "inner_pipeline_set",
        "value": "inner"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/pipeline.asciidoc: line 48: 02c48d461536709c3fc8a0e8147c3787.adoc
[source,console]
----
PUT _ingest/pipeline/pipelineB
{
  "description" : "outer pipeline",
  "processors" : [
    {
      "pipeline" : {
        "name": "pipelineA"
      }
    },
    {
      "set" : {
        "field": "outer_pipeline_set",
        "value": "outer"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/pipeline.asciidoc: line 74: 88647e818ffcbe39e5cf627f5b9a676c.adoc
[source,console]
----
PUT /myindex/_doc/1?pipeline=pipelineB
{
  "field": "value"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/script.asciidoc: line 50: c0c7926f235e6ccc7e9a827dcc85e602.adoc
[source,console]
----
PUT _ingest/pipeline/my_index
{
    "description": "use index:my_index and type:_doc",
    "processors": [
      {
        "script": {
          "source": """
            ctx._index = 'my_index';
            ctx._type = '_doc';
          """
        }
      }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/script.asciidoc: line 71: cdc55ad88de55999fe2d79fd4781918b.adoc
[source,console]
----
PUT any_index/_doc/1?pipeline=my_index
{
  "message": "text"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/set.asciidoc: line 32: 366b29ef910f12c7fbced35f39000953.adoc
[source,console]
----
PUT _ingest/pipeline/set_os
{
  "description": "sets the value of host.os.name from the field os",
  "processors": [
    {
      "set": {
        "field": "host.os.name",
        "value": "{{os}}"
      }
    }
  ]
}

POST _ingest/pipeline/set_os/_simulate
{
  "docs": [
    {
      "_source": {
        "os": "Ubuntu"
      }
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ingest/processors/user-agent.asciidoc: line 27: 9c504b5c486d9df689a22b11412e61a3.adoc
[source,console]
----
PUT _ingest/pipeline/user_agent
{
  "description" : "Add user agent information",
  "processors" : [
    {
      "user_agent" : {
        "field" : "agent"
      }
    }
  ]
}
PUT my_index/_doc/my_id?pipeline=user_agent
{
  "agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36"
}
GET my_index/_doc/my_id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-ilm.asciidoc: line 29: 993a81c69d26d94810172bee4043f0fd.adoc
[source,console]
----
PUT _ilm/policy/datastream_policy   \<1>
{
  "policy": {                       \<2>
    "phases": {
      "hot": {                      \<3>
        "actions": {
          "rollover": {             \<4>
            "max_size": "50GB",
            "max_age": "30d"
          }
        }
      },
      "delete": {
        "min_age": "90d",           \<5>
        "actions": {
          "delete": {}              \<6>
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-ilm.asciidoc: line 80: e3d7b19f993382750719cdfaad2fdd90.adoc
[source,console]
----
PUT _template/datastream_template
{
  "index_patterns": ["datastream-*"],                 \<1>
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
    "index.lifecycle.name": "datastream_policy",      \<2>
    "index.lifecycle.rollover_alias": "datastream"    \<3>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-ilm.asciidoc: line 113: 55ee835d7c28e933ad8fcb9e45af2bf2.adoc
[source,console]
----
PUT datastream-000001
{
  "aliases": {
    "datastream": {
      "is_write_index": true
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-ilm.asciidoc: line 157: a1dbaff15cf8166f74c443ca58258d7e.adoc
[source,console]
----
GET datastream-*/_ilm/explain
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-ilm.asciidoc: line 168: c0f09a2304109757010e08c8af1f4a5a.adoc
[source,console]
----
{
  "indices": {
    "datastream-000001": {
      "index": "datastream-000001",
      "managed": true,                           \<1>
      "policy": "datastream_policy",             \<2>
      "lifecycle_date_millis": 1538475653281,
      "age": "30s",                              \<3>
      "phase": "hot",                            \<4>
      "phase_time_millis": 1538475653317,
      "action": "rollover",                      \<5>
      "action_time_millis": 1538475653317,
      "step": "attempt-rollover",                \<6>
      "step_time_millis": 1538475653317,
      "phase_execution": {
        "policy": "datastream_policy",
        "phase_definition": {                    \<7>
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_size": "50gb",
              "max_age": "30d"
            }
          }
        },
        "version": 1,                            \<8>
        "modified_date_in_millis": 1539609701576
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 34: b53e3314eb39b667a9ba87fb3a286e6b.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "min_age": "1d",
        "actions": {
          "allocate": {
            "number_of_replicas": 1
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 152: 1116c769f39f0c7fe86ec2a4871efcd5.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "actions": {
          "allocate" : {
            "number_of_replicas" : 2
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 175: 0518c673094fb18ecb491a3b78af4695.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "actions": {
          "allocate" : {
            "include" : {
              "box_type": "hot,warm"
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 201: 9d461ae140ddc018efd2650559800cd1.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "actions": {
          "allocate" : {
            "number_of_replicas": 1,
            "require" : {
              "box_type": "cold"
            }
        }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 232: 053497b6960f80fd7b005b7c6d54358f.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "delete": {
        "actions": {
          "delete" : { }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 271: eb5486d2fe4283475bf9e0e09280be16.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "actions": {
          "forcemerge" : {
            "max_num_segments": 1
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 298: 0345fbd95c4516a89ac5ad261a16be8f.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "cold": {
        "actions": {
          "freeze" : { }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 333: fc9a1b1173690a911725cff3912e9755.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "actions": {
          "readonly" : { }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 372: 5b83cb589ac2afd5e1f7aba091823974.adoc
[source,console]
----
PUT my_index
{
  "settings": {
    "index.lifecycle.name": "my_policy",
    "index.lifecycle.rollover_alias": "my_data"
  },
  "aliases": {
    "my_data": {
      "is_write_index": true
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 417: 19211ccf772f1dee7b500c21f4a9a805.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover" : {
            "max_size": "100GB"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 441: cfd4b34f35e531a20739a3b308d57134.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover" : {
            "max_docs": 100000000
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 465: d4a41fb74b41b41a0ee114a2311f2815.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover" : {
            "max_age": "7d"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 490: 8940f2b911220acc9afef6360b6c13c4.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover" : {
            "max_age": "7d",
            "max_size": "100GB"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 517: f6c79fa1c01bb4539d0cba0bd62c1ce0.adoc
[source,console]
----
PUT /_ilm/policy/rollover_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "50G"
          }
        }
      },
      "delete": {
        "min_age": "1d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 569: 149a0eea54cdf6ea3052af6dba2d2a63.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "actions": {
          "set_priority" : {
            "priority": 50
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 622: f3b4ddce8ff21fc1a76a7c0d9c36650e.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "actions": {
          "shrink" : {
            "number_of_shards": 1
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 678: a5a58e8ad66afe831bc295500e3e8739.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "unfollow" : {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/policy-definitions.asciidoc: line 704: d14a2a6c2a8b084495b8a64708226650.adoc
[source,console]
----
PUT _ilm/policy/full_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "7d",
            "max_size": "50G"
          }
        }
      },
      "warm": {
        "min_age": "30d",
        "actions": {
          "forcemerge": {
            "max_num_segments": 1
          },
          "shrink": {
            "number_of_shards": 1
          },
          "allocate": {
            "number_of_replicas": 2
          }
        }
      },
      "cold": {
        "min_age": "60d",
        "actions": {
          "allocate": {
            "require": {
              "type": "cold"
            }
          }
        }
      },
      "delete": {
        "min_age": "90d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/set-up-lifecycle-policy.asciidoc: line 12: 7ecf197610e30c20f7206513ce393822.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "25GB" \<1>
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {} \<2>
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/set-up-lifecycle-policy.asciidoc: line 54: 3c9d99215a7020ab478bdf5c8287a14f.adoc
[source,console]
----
PUT _template/my_template
{
  "index_patterns": ["test-*"], \<1>
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
    "index.lifecycle.name": "my_policy", \<2>
    "index.lifecycle.rollover_alias": "test-alias"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/set-up-lifecycle-policy.asciidoc: line 75: 25737fd456fd317cc4cc2db76b6cf28e.adoc
[source,console]
----
PUT test-000001
{
  "aliases": {
    "test-alias":{
      "is_write_index": true \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/set-up-lifecycle-policy.asciidoc: line 98: 160d259243d0800900b065c4b9d2b187.adoc
[source,console]
----
PUT test-index
{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
    "index.lifecycle.name": "my_policy"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/using-policies-rollover.asciidoc: line 59: aed01ec7b6368fa2c8f86434e176c907.adoc
[source,console]
----
PUT /_ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "25GB"
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/using-policies-rollover.asciidoc: line 88: f29c02d259065033bd557519d1b21481.adoc
[source,console]
----
PUT _template/my_template
{
  "index_patterns": ["test-*"], \<1>
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
    "index.lifecycle.name": "my_policy", \<2>
    "index.lifecycle.rollover_alias": "test-alias" \<3>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/using-policies-rollover.asciidoc: line 109: 454e0e11e2bbb4718109a53662f8c45d.adoc
[source,console]
----
PUT test-000001 \<1>
{
  "aliases": {
    "test-alias":{
      "is_write_index": true \<2>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 29: 0c44088f251488432966131135f1bd1c.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "25GB"
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 61: 2c37ed0b33658d73a712e7942ea7433a.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "25GB"
          }
        }
      },
      "delete": {
        "min_age": "10d", \<1>
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 100: 7251639b2c1267d7c76ab397bbe43bbd.adoc
[source,console]
----
{
  "my_policy": {
    "version": 2, \<1>
    "modified_date": 82392349, \<2>
    "policy": {
      "phases": {
        "hot": {
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_size": "25gb"
            }
          }
        },
        "delete": {
          "min_age": "10d",
          "actions": {
            "delete": {}
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 144: fc541f5741c1fe052439ededa84ffe8a.adoc
[source,console]
----
PUT _ilm/policy/my_executing_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_docs": 1
          }
        }
      },
      "delete": {
        "min_age": "10d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 186: 0f6fa3a706a7c17858d3dbe329839ea6.adoc
[source,console]
----
GET my_index/_ilm/explain
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 193: d5e55676f5242766ebb035b87ce660e2.adoc
[source,console]
----
{
  "indices": {
    "my_index": {
      "index": "my_index",
      "managed": true,
      "policy": "my_executing_policy",
      "lifecycle_date_millis": 1538475653281,
      "age": "30s",
      "phase": "hot",
      "phase_time_millis": 1538475653317,
      "action": "rollover",
      "action_time_millis": 1538475653317,
      "step": "check-rollover-ready",
      "step_time_millis": 1538475653317,
      "phase_execution": {
        "policy": "my_executing_policy",
        "modified_date_in_millis": 1538475653317,
        "version": 1,
        "phase_definition": {
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_docs": 1
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 231: f94601bc9cd640adb939af67116a40c8.adoc
[source,console]
----
PUT _ilm/policy/my_executing_policy
{
  "policy": {
    "phases": {
      "hot": {
        "min_age": "1d", \<1>
        "actions": {
          "rollover": {
            "max_docs": 1
          }
        }
      },
      "delete": {
        "min_age": "10d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 271: aada9dd17e7b08f3c5a279920c84333e.adoc
[source,console]
----
{
  "indices": {
    "my_index": {
      "index": "my_index",
      "managed": true,
      "policy": "my_executing_policy",
      "lifecycle_date_millis": 1538475653281,
      "age": "30s",
      "phase": "hot",
      "phase_time_millis": 1538475653317,
      "action": "rollover",
      "action_time_millis": 1538475653317,
      "step": "check-rollover-ready",
      "step_time_millis": 1538475653317,
      "phase_execution": {
        "policy": "my_executing_policy",
        "modified_date_in_millis": 1538475653317,
        "version": 1, \<1>
        "phase_definition": {
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_docs": 1
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 311: 416c65c55a53d0161426cc09ae999c72.adoc
[source,console]
----
PUT _ilm/policy/my_executing_policy
{
  "policy": {
    "phases": {
      "warm": {
        "min_age": "1d",
        "actions": {
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "delete": {
        "min_age": "10d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 351: aada9dd17e7b08f3c5a279920c84333e.adoc
[source,console]
----
{
  "indices": {
    "my_index": {
      "index": "my_index",
      "managed": true,
      "policy": "my_executing_policy",
      "lifecycle_date_millis": 1538475653281,
      "age": "30s",
      "phase": "hot",
      "phase_time_millis": 1538475653317,
      "action": "rollover",
      "action_time_millis": 1538475653317,
      "step": "check-rollover-ready",
      "step_time_millis": 1538475653317,
      "phase_execution": {
        "policy": "my_executing_policy",
        "modified_date_in_millis": 1538475653317,
        "version": 1, \<1>
        "phase_definition": {
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_docs": 1
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 406: 84935bf612d1aa402a7e16dae1ab99f5.adoc
[source,console]
----
{
  "indices": {
    "my_index": {
      "index": "my_index",
      "managed": true,
      "policy": "my_executing_policy",
      "lifecycle_date_millis": 1538475653281,
      "age": "30s",
      "phase": "warm",
      "phase_time_millis": 1538475653317,
      "action": "forcemerge",
      "action_time_millis": 1538475653317,
      "step": "forcemerge",
      "step_time_millis": 1538475653317,
      "phase_execution": {
        "policy": "my_executing_policy",
        "modified_date_in_millis": 1538475653317,
        "version": 3, \<1>
        "phase_definition": {
          "min_age": "1d",
          "actions": {
            "forcemerge": {
              "max_num_segments": 1
            }
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/update-lifecycle-policy.asciidoc: line 505: 552b6761ef052efa1e83f8a3c30d6f78.adoc
[source,console]
----
PUT my_index/_settings
{
  "lifecycle.name": "my_other_policy"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/error-handling.asciidoc: line 16: 9d211c6226d0b4434f01cceb76ab6ffa.adoc
[source,console]
----
PUT _ilm/policy/shrink-the-index
{
  "policy": {
    "phases": {
      "warm": {
        "min_age": "5d",
        "actions": {
          "shrink": {
            "number_of_shards": 4
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/error-handling.asciidoc: line 43: 3d0b9acdacc7ecec380c57e814256472.adoc
[source,console]
----
PUT /myindex
{
  "settings": {
    "index.number_of_shards": 2,
    "index.lifecycle.name": "shrink-the-index"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/error-handling.asciidoc: line 62: 943f92e1d3fa566ef23659be2d96f222.adoc
[source,console]
----
GET /myindex/_ilm/explain
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/error-handling.asciidoc: line 71: e29f69a4bcfe27332cb2bb994a2cb5bf.adoc
[source,console]
----
{
  "indices" : {
    "myindex" : {
      "index" : "myindex",
      "managed" : true,                         \<1>
      "policy" : "shrink-the-index",            \<2>
      "lifecycle_date_millis" : 1541717265865,
      "age": "5.1d",                            \<3>
      "phase" : "warm",                         \<4>
      "phase_time_millis" : 1541717272601,
      "action" : "shrink",                      \<5>
      "action_time_millis" : 1541717272601,
      "step" : "ERROR",                         \<6>
      "step_time_millis" : 1541717272688,
      "failed_step" : "shrink",                 \<7>
      "step_info" : {
        "type" : "illegal_argument_exception",   \<8>
        "reason" : "the number of target shards [4] must be less that the number of source shards [2]" \<9>
      },
      "phase_execution" : {
        "policy" : "shrink-the-index",
        "phase_definition" : {                   <10>
          "min_age" : "5d",
          "actions" : {
            "shrink" : {
              "number_of_shards" : 4
            }
          }
        },
        "version" : 1,
        "modified_date_in_millis" : 1541717264230
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/error-handling.asciidoc: line 127: 7bee02e8962e355a23559b6eaa6678f2.adoc
[source,console]
----
PUT _ilm/policy/shrink-the-index
{
  "policy": {
    "phases": {
      "warm": {
        "min_age": "5d",
        "actions": {
          "shrink": {
            "number_of_shards": 1
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/error-handling.asciidoc: line 155: 235513edcb5ce3fe2e38a781eeefa6a0.adoc
[source,console]
----
POST /myindex/_ilm/retry
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/start-stop-ilm.asciidoc: line 57: 182df084f028479ecbe8d7648ddad892.adoc
[source,console]
----
GET _ilm/status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/start-stop-ilm.asciidoc: line 65: 99e0bec31e49636bc0053ac66bc29352.adoc
[source,console]
----
{
  "operation_mode": "RUNNING"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/start-stop-ilm.asciidoc: line 92: 585a34ad79aee16678b37da785933ac8.adoc
[source,console]
----
POST _ilm/stop
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/start-stop-ilm.asciidoc: line 111: 8de1c258461189d65cba97dbc94600cd.adoc
[source,console]
----
{
  "operation_mode": "STOPPING"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/start-stop-ilm.asciidoc: line 135: db8563ab7fe37081a9bb66c91d65d673.adoc
[source,console]
----
{
  "operation_mode": "STOPPED"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/start-stop-ilm.asciidoc: line 150: 72ae3851160fcf02b8e2cdfd4e57d238.adoc
[source,console]
----
POST _ilm/start
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/start-stop-ilm.asciidoc: line 169: 99e0bec31e49636bc0053ac66bc29352.adoc
[source,console]
----
{
  "operation_mode": "RUNNING"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 23: 4e2027438393cf93b9c9402b8511eab5.adoc
[source,console]
----
PUT _template/mylogs_template
{
  "index_patterns": [
    "mylogs-*"
  ],
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1
  },
  "mappings": {
    "properties": {
      "message": {
        "type": "text"
      },
      "@timestamp": {
        "type": "date"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 51: 8502a9281f5393a7160e4e46988da672.adoc
[source,console]
----
POST mylogs-pre-ilm-2019.06.24/_doc
{
  "@timestamp": "2019-06-24T10:34:00",
  "message": "this is one log message"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 62: 7d51f0436e87dec4274133856866b07d.adoc
[source,console]
----
POST mylogs-pre-ilm-2019.06.25/_doc
{
  "@timestamp": "2019-06-25T17:42:00",
  "message": "this is another log message"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 121: 75097f73665235b20df09739c820ad35.adoc
[source,console]
----
PUT _ilm/policy/mylogs_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "25GB"
          }
        }
      },
      "warm": {
        "min_age": "1d",
        "actions": {
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "cold": {
        "min_age": "7d",
        "actions": {
          "freeze": {}
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 165: 3feab5c602192b8dc58435654b17d3fe.adoc
[source,console]
----
PUT _ilm/policy/mylogs_policy_existing
{
  "policy": {
    "phases": {
      "warm": {
        "min_age": "1d",
        "actions": {
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "cold": {
        "min_age": "7d",
        "actions": {
          "freeze": {}
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 208: ec195297eb804cba1cb19c9926773059.adoc
[source,console]
----
PUT mylogs-pre-ilm*/_settings \<1>
{
  "index": {
    "lifecycle": {
      "name": "mylogs_policy_existing"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 251: 39bbb602c95c606725eefea252437514.adoc
[source,console]
----
PUT _ilm/policy/sample_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "7d",
            "max_size": "50G"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 275: bce0d86353e212cee466ccbc90bdc6e7.adoc
[source,console]
----
PUT _template/mylogs_template
{
  "index_patterns": [
    "ilm-mylogs-*" \<1>
  ],
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
    "index": {
      "lifecycle": {
        "name": "mylogs_condensed_policy", \<2>
        "rollover_alias": "mylogs" \<3>
      }
    }
  },
  "mappings": {
    "properties": {
      "message": {
        "type": "text"
      },
      "@timestamp": {
        "type": "date"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 314: 89115f8d40d9a13b0b01dc7c33ffd1cc.adoc
[source,console]
----
PUT ilm-mylogs-000001
{
  "aliases": {
    "mylogs": {
      "is_write_index": true
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 344: 5df1ed33b5fcf3b9d85c20d100780d43.adoc
[source,console]
----
PUT _cluster/settings
{
  "transient": {
    "indices.lifecycle.poll_interval": "1m" \<1>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 371: 41f211cc838f1bee7eac264784f905e2.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "mylogs-*", \<1>
    "sort": { "@timestamp": "desc" }
  },
  "dest": {
    "index": "mylogs", \<2>
    "op_type": "create" \<3>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/ilm-with-existing-indices.asciidoc: line 401: 227e19aecb349f31e74898384322ae01.adoc
[source,console]
----
PUT _cluster/settings
{
  "transient": {
    "indices.lifecycle.poll_interval": null
  }
}

----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-slm.asciidoc: line 23: 718c2afdece55a7de338e668438eac2d.adoc
[source,console]
----
POST /_security/role/slm-admin
{
  "cluster": ["manage_slm", "create_snapshot"],
  "indices": [
    {
      "names": [".slm-history-*"],
      "privileges": ["all"]
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-slm.asciidoc: line 42: ef76d0e4cdc2881c161a5557a98a3446.adoc
[source,console]
----
POST /_security/role/slm-read-only
{
  "cluster": ["read_slm"],
  "indices": [
    {
      "names": [".slm-history-*"],
      "privileges": ["read"]
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-slm.asciidoc: line 68: 89b72dd7f747f6297c2b089e8bc807be.adoc
[source,console]
----
PUT /_snapshot/my_repository
{
  "type": "fs",
  "settings": {
    "location": "my_backup_location"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-slm.asciidoc: line 90: a5bc83a268ea9c8b4368beb6522b5336.adoc
[source,console]
----
PUT /_slm/policy/nightly-snapshots
{
  "schedule": "0 30 1 * * ?", \<1>
  "name": "<nightly-snap-{now/d}>", \<2>
  "repository": "my_repository", \<3>
  "config": { \<4>
    "indices": ["*"] \<5>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-slm.asciidoc: line 138: 5bf4b2d603221fb1df4adb34829e1164.adoc
[source,console]
----
PUT /_slm/policy/nightly-snapshots/_execute
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/getting-started-slm.asciidoc: line 151: f1b545d3c3eeedf8ae09c56070c26053.adoc
[source,console]
----
GET /_slm/policy/nightly-snapshots?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/getting-started.asciidoc: line 10: 15f293688537c82d2bdebda916769fa4.adoc
[source,console]
----
PUT /library/book/_bulk?refresh
{"index":{"_id": "Leviathan Wakes"}}
{"name": "Leviathan Wakes", "author": "James S.A. Corey", "release_date": "2011-06-02", "page_count": 561}
{"index":{"_id": "Hyperion"}}
{"name": "Hyperion", "author": "Dan Simmons", "release_date": "1989-05-26", "page_count": 482}
{"index":{"_id": "Dune"}}
{"name": "Dune", "author": "Frank Herbert", "release_date": "1965-06-01", "page_count": 604}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/getting-started.asciidoc: line 24: 53b14d640c4c48a5e7ea86ddc26bee64.adoc
[source,console]
----
POST /_sql?format=txt
{
    "query": "SELECT * FROM library WHERE release_date < '2000-01-01'"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 21: 4870ece3455f2b5c34eccaa9492f3894.adoc
[source,console]
----
POST /_sql?format=txt
{
    "query": "SELECT * FROM library ORDER BY page_count DESC LIMIT 5"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 111: b649c4dc7d187a27d2112f59e62cecea.adoc
[source,console]
----
POST /_sql?format=csv
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "fetch_size": 5
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 137: 8b8c48b5fcfaaec794875537d3be2e62.adoc
[source,console]
----
POST /_sql?format=json
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "fetch_size": 5
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 173: 92d82b9d1bda5a8ae1117d03413f4e67.adoc
[source,console]
----
POST /_sql?format=tsv
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "fetch_size": 5
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 200: a972c38ee41dc899708825790a113cb8.adoc
[source,console]
----
POST /_sql?format=txt
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "fetch_size": 5
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 228: d38b8ef18ca89eafb1e175ec9a393259.adoc
[source,console]
----
POST /_sql?format=yaml
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "fetch_size": 5
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 283: 212042898296f208dbf957f33c07e3b2.adoc
[source,console]
----
POST /_sql?format=json
{
    "cursor": "sDXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAAEWYUpOYklQMHhRUEtld3RsNnFtYU1hQQ==:BAFmBGRhdGUBZgVsaWtlcwFzB21lc3NhZ2UBZgR1c2Vy9f///w8="
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 321: cc5dfc9aa125e3fd03f523fc2c356f63.adoc
[source,console]
----
POST /_sql/close
{
    "cursor": "sDXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAAEWYUpOYklQMHhRUEtld3RsNnFtYU1hQQ==:BAFmBGRhdGUBZgVsaWtlcwFzB21lc3NhZ2UBZgR1c2Vy9f///w8="
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 351: 683da0a8624bc03c79a3db8ffab43f0b.adoc
[source,console]
----
POST /_sql?format=txt
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "filter": {
        "range": {
            "page_count": {
                "gte" : 100,
                "lte" : 200
            }
        }
    },
    "fetch_size": 5
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 390: c11dc94839b861235b4943f046e15997.adoc
[source,console]
----
POST /_sql?format=json
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "fetch_size": 5,
    "columnar": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/rest.asciidoc: line 427: 15089efd5a5a72234fdb91c111adb3c1.adoc
[source,console]
----
POST /_sql?format=json
{
    "cursor": "sDXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAAEWWWdrRlVfSS1TbDYtcW9lc1FJNmlYdw==:BAFmBmF1dGhvcgFmBG5hbWUBZgpwYWdlX2NvdW50AWYMcmVsZWFzZV9kYXRl+v///w8=",
    "columnar": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== sql/endpoints/translate.asciidoc: line 10: 8097472be12fcbe8652f03e398e49972.adoc
[source,console]
----
POST /_sql/translate
{
    "query": "SELECT * FROM library ORDER BY page_count DESC",
    "fetch_size": 10
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/rollup-getting-started.asciidoc: line 32: 3acad8c67832b281b9f15349492b8328.adoc
[source,console]
----
PUT _rollup/job/sensor
{
    "index_pattern": "sensor-*",
    "rollup_index": "sensor_rollup",
    "cron": "*/30 * * * * ?",
    "page_size" :1000,
    "groups" : {
      "date_histogram": {
        "field": "timestamp",
        "fixed_interval": "60m"
      },
      "terms": {
        "fields": ["node"]
      }
    },
    "metrics": [
        {
            "field": "temperature",
            "metrics": ["min", "max", "sum"]
        },
        {
            "field": "voltage",
            "metrics": ["avg"]
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/rollup-getting-started.asciidoc: line 116: 618c9d42284c067891fb57034a4fd834.adoc
[source,console]
----
POST _rollup/job/sensor/_start
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/rollup-getting-started.asciidoc: line 131: 4e63a0fd56cc5d59595baa0b0721f971.adoc
[source,console]
----
GET /sensor_rollup/_rollup_search
{
    "size": 0,
    "aggregations": {
        "max_temperature": {
            "max": {
                "field": "temperature"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/rollup-getting-started.asciidoc: line 189: e0f8ecc665f547d5365699ab8773e298.adoc
[source,console]
----
GET /sensor_rollup/_rollup_search
{
    "size": 0,
    "aggregations": {
        "timeline": {
            "date_histogram": {
                "field": "timestamp",
                "fixed_interval": "7d"
            },
            "aggs": {
                "nodes": {
                    "terms": {
                        "field": "node"
                    },
                    "aggs": {
                        "max_temperature": {
                            "max": {
                                "field": "temperature"
                            }
                        },
                        "avg_voltage": {
                            "avg": {
                                "field": "voltage"
                            }
                        }
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/rollup-search-limitations.asciidoc: line 45: 3d1cea1ad861d1ee62e5f34b84371943.adoc
[source,console]
----
GET sensor_rollup/_rollup_search
{
    "size": 0,
    "aggregations": {
        "avg_temperature": {
            "avg": {
                "field": "temperature"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== frozen-indices.asciidoc: line 66: f9018c483fb6b810d8a921668addfc71.adoc
[source,console]
----
POST /twitter/_forcemerge?max_num_segments=1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== frozen-indices.asciidoc: line 84: 0652fc9f77639fce67a87dc2e33cef51.adoc
[source,console]
----
GET /twitter/_search?q=user:kimchy&ignore_throttled=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== frozen-indices.asciidoc: line 108: 9ff10591660890ba9d00eb14168c3b67.adoc
[source,console]
----
GET /_cat/indices/twitter?v&h=i,sth
----
|===
| php | csharp

| &cross; | &cross;
|===
=== administering/backup-cluster-config.asciidoc: line 41: ee79edafcbc80dfda496e3a26506dcbc.adoc
[source,console]
----
GET _cluster/settings?pretty&flat_settings&filter_path=persistent
----
|===
| php | csharp

| &cross; | &cross;
|===
=== administering/backup-and-restore-security-config.asciidoc: line 79: 92b3749a473cf2e7ff4055316662a4fe.adoc
[source,console]
----
PUT /_snapshot/my_backup
{
  "type": "fs",
  "settings": {
    "location": "my_backup_location"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== administering/backup-and-restore-security-config.asciidoc: line 103: 43a7b43711eab81ad093e67ecc221327.adoc
[source,console]
----
POST /_security/user/snapshot_user
{
  "password" : "secret",
  "roles" : [ "snapshot_user" ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== administering/backup-and-restore-security-config.asciidoc: line 122: 7acf1099282366553cb8b093ed4fcd00.adoc
[source,console]
----
PUT /_snapshot/my_backup/snapshot_1
{
  "indices": ".security",
  "include_global_state": true \<1>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== administering/backup-and-restore-security-config.asciidoc: line 193: ff930e6409b6a923ef1c9e7fc99f24cc.adoc
[source,console]
----
GET /_snapshot/my_backup
----
|===
| php | csharp

| &cross; | &cross;
|===
=== administering/backup-and-restore-security-config.asciidoc: line 200: 020c56e520ff6556ebfaf98efaef56aa.adoc
[source,console]
----
GET /_snapshot/my_backup/snapshot_1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/recipes/stemming.asciidoc: line 11: 397bdb40d0146102f1f4c6a35675e16a.adoc
[source,console]
----
PUT index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "english_exact": {
          "tokenizer": "standard",
          "filter": [
            "lowercase"
          ]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "body": {
        "type": "text",
        "analyzer": "english",
        "fields": {
          "exact": {
            "type": "text",
            "analyzer": "english_exact"
          }
        }
      }
    }
  }
}

PUT index/_doc/1
{
  "body": "Ski resort"
}

PUT index/_doc/2
{
  "body": "A pair of skis"
}

POST index/_refresh
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/recipes/stemming.asciidoc: line 59: bf2e6ea2bae621b9b2fee7003e891f86.adoc
[source,console]
----
GET index/_search
{
  "query": {
    "simple_query_string": {
      "fields": [ "body" ],
      "query": "ski"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/recipes/stemming.asciidoc: line 120: 3f94ed945ae6416a0eb372c2db14d7e0.adoc
[source,console]
----
GET index/_search
{
  "query": {
    "simple_query_string": {
      "fields": [ "body.exact" ],
      "query": "ski"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/recipes/stemming.asciidoc: line 179: 26abfc49c238c2b5d259983ac38dbcee.adoc
[source,console]
----
GET index/_search
{
  "query": {
    "simple_query_string": {
      "fields": [ "body" ],
      "quote_field_suffix": ".exact",
      "query": "\"ski\""
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/recipes/scoring.asciidoc: line 125: a0f15dd7fcb07bc8543fe04c2907d4b9.adoc
[source,console]
----
GET index/_search
{
    "query" : {
        "script_score" : {
            "query" : {
                "match": { "body": "elasticsearch" }
            },
            "script" : {
                "source" : "_score * saturation(doc['pagerank'].value, 10)" \<1>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/recipes/scoring.asciidoc: line 171: 0dfa66a019712e413652c5eddd057ba8.adoc
[source,console]
----
GET _search
{
    "query" : {
        "bool" : {
            "must": {
                "match": { "body": "elasticsearch" }
            },
            "should": {
                "rank_feature": {
                    "field": "pagerank", \<1>
                    "saturation": {
                        "pivot": 10
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 52: 12facf3617a41551ce2f0c4d005cb1c7.adoc
[source,console]
----
PUT movies
{
  "mappings": {
    "properties": {
      "name_and_plot": {
        "type": "text"
      },
      "name": {
        "type": "text",
        "copy_to": "name_and_plot"
      },
      "plot": {
        "type": "text",
        "copy_to": "name_and_plot"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 87: a008f42379930edc354b4074e0a33344.adoc
[source,console]
----
PUT index/_doc/1
{
  "designation": "spoon",
  "price": 13
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 99: a0a7557bb7e2aff7918557cd648f41af.adoc
[source,console]
----
GET index/_search
{
  "aggs": {
    "price_ranges": {
      "range": {
        "field": "price",
        "ranges": [
          { "to": 10 },
          { "from": 10, "to": 100 },
          { "from": 100 }
        ]
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 123: a4bae4d956bc0a663f42cfec36bf8e0b.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "properties": {
      "price_range": {
        "type": "keyword"
      }
    }
  }
}

PUT index/_doc/1
{
  "designation": "spoon",
  "price": 13,
  "price_range": "10-100"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 148: 7dedb148ff74912de81b8f8275f0d7f3.adoc
[source,console]
----
GET index/_search
{
  "aggs": {
    "price_ranges": {
      "terms": {
        "field": "price_range"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 192: 102c7de25d13c87cf28839ada9f63c95.adoc
[source,console]
----
PUT index/_doc/1
{
  "my_date": "2016-05-11T16:30:55.328Z"
}

GET index/_search
{
  "query": {
    "constant_score": {
      "filter": {
        "range": {
          "my_date": {
            "gte": "now-1h",
            "lte": "now"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 219: 17dd67a66c49f7eb618dd17430e48dfa.adoc
[source,console]
----
GET index/_search
{
  "query": {
    "constant_score": {
      "filter": {
        "range": {
          "my_date": {
            "gte": "now-1h/m",
            "lte": "now/m"
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 253: abc7a670a47516b58b6b07d7497b140c.adoc
[source,console]
----
GET index/_search
{
  "query": {
    "constant_score": {
      "filter": {
        "bool": {
          "should": [
            {
              "range": {
                "my_date": {
                  "gte": "now-1h",
                  "lte": "now-1h/m"
                }
              }
            },
            {
              "range": {
                "my_date": {
                  "gt": "now-1h/m",
                  "lt": "now/m"
                }
              }
            },
            {
              "range": {
                "my_date": {
                  "gte": "now/m",
                  "lte": "now"
                }
              }
            }
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/search-speed.asciidoc: line 326: 971c7a36ee79f2b3aa82c64ea338de70.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "properties": {
      "foo": {
        "type": "keyword",
        "eager_global_ordinals": true
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/disk-usage.asciidoc: line 14: e273060a675c959fd5f3cde27c8aff07.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "properties": {
      "foo": {
        "type": "integer",
        "index": false
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/disk-usage.asciidoc: line 35: c8568f4f02f75db9afd669880db98a16.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "properties": {
      "foo": {
        "type": "text",
        "norms": false
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/disk-usage.asciidoc: line 56: 1a5cd30017368fe4888454a13c6e8561.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "properties": {
      "foo": {
        "type": "text",
        "index_options": "freqs"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/disk-usage.asciidoc: line 77: ae3ae58724c413734b67a90a6ddb319f.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "properties": {
      "foo": {
        "type": "text",
        "norms": false,
        "index_options": "freqs"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== how-to/disk-usage.asciidoc: line 110: 597d456edfcb3d410954a3e9b5babf9a.adoc
[source,console]
----
PUT index
{
  "mappings": {
    "dynamic_templates": [
      {
        "strings": {
          "match_mapping_type": "string",
          "mapping": {
            "type": "keyword"
          }
        }
      }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 96: 978088f989d45dd09339582e9cbc60e0.adoc
[source,console]
----
# GET /<logstash-{now/d}>/_search
GET /%3Clogstash-%7Bnow%2Fd%7D%3E/_search
{
  "query" : {
    "match": {
      "test": "data"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 151: a34d70d7022eb4ba48909d440c80390f.adoc
[source,console]
----
# GET /<logstash-{now/d-2d}>,<logstash-{now/d-1d}>,<logstash-{now/d}>/_search
GET /%3Clogstash-%7Bnow%2Fd-2d%7D%3E%2C%3Clogstash-%7Bnow%2Fd-1d%7D%3E%2C%3Clogstash-%7Bnow%2Fd%7D%3E/_search
{
  "query" : {
    "match": {
      "test": "data"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 239: 09dbd90c5e22ea4a17b4cf9aa72e08ae.adoc
[source,console]
----
GET /_search?q=elasticsearch&filter_path=took,hits.hits._id,hits.hits._score
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 268: 1dbb8cf17fbc45c87c7d2f75f15f9778.adoc
[source,console]
----
GET /_cluster/state?filter_path=metadata.indices.*.stat*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 293: 1252fa45847edba5ec2b2f33da70ec5b.adoc
[source,console]
----
GET /_cluster/state?filter_path=routing_table.indices.**.state
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 320: 621665fdbd7fc103c09bfeed28b67b1a.adoc
[source,console]
----
GET /_count?filter_path=-_shards
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 341: 1e18a67caf8f06ff2710ec4a8b30f625.adoc
[source,console]
----
GET /_cluster/state?filter_path=metadata.indices.*.state,-metadata.indices.logstash-*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 370: f2adeb0e060827e257551ea69c7d28bd.adoc
[source,console]
----
POST /library/book?refresh
{"title": "Book #1", "rating": 200.1}
POST /library/book?refresh
{"title": "Book #2", "rating": 1.7}
POST /library/book?refresh
{"title": "Book #3", "rating": 0.1}
GET /_search?filter_path=hits.hits._source&_source=title&sort=rating:desc
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 405: b9a153725b28fdd0a5aabd7f17a8c2d7.adoc
[source,console]
----
GET twitter/_settings?flat_settings=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 436: 5925c23a173a63bdb30b458248d1df76.adoc
[source,console]
----
GET twitter/_settings?flat_settings=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 601: a6f8636b03cc5f677b7d89e750328612.adoc
[source,console]
----
POST /twitter/_search?size=surprise_me
----
|===
| php | csharp

| &cross; | &cross;
|===
=== api-conventions.asciidoc: line 635: 6d1e75312a28a5ba23837abf768f2510.adoc
[source,console]
----
POST /twitter/_search?size=surprise_me&error_trace=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat.asciidoc: line 28: 45bde49f35ffae3f3dabc77a592241b4.adoc
[source,console]
----
GET /_cat/master?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat.asciidoc: line 50: 179dabbc531ede7a1813d1a11ce5b5fd.adoc
[source,console]
----
GET /_cat/master?help
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat.asciidoc: line 79: d940059e16675a40e3d278073331eeed.adoc
[source,console]
----
GET /_cat/nodes?h=ip,port,heapPercent,name
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat.asciidoc: line 195: 794fa23d07c42900b5e97fb9bf323941.adoc
[source,console]
----
GET _cat/templates?v&s=order:desc,index_patterns
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/alias.asciidoc: line 72: a003467caeafcb2a935522efb83080cb.adoc
[source,console]
----
GET /_cat/aliases?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/allocation.asciidoc: line 45: 5c7ece1f30267adabdb832424871900a.adoc
[source,console]
----
GET /_cat/allocation?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/count.asciidoc: line 54: e7553d4bb4fd82d8f80a4d7af2624afb.adoc
[source,console]
----
GET /_cat/count/twitter?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/count.asciidoc: line 77: 0a1f8ad54b1d8c9feeaceaeed16c8490.adoc
[source,console]
----
GET /_cat/count?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/fielddata.asciidoc: line 92: 973f2d7fbff9f310b21108b31d7ad413.adoc
[source,console]
----
GET /_cat/fielddata?v&fields=body
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/fielddata.asciidoc: line 117: 62daf8e41b9e984d18d6cc51f247c7ad.adoc
[source,console]
----
GET /_cat/fielddata/body,soul?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/fielddata.asciidoc: line 144: b26ff669b3c88fb0872fa0a923972f54.adoc
[source,console]
----
GET /_cat/fielddata?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/health.asciidoc: line 71: f8cc4b331a19ff4df8e4a490f906ee69.adoc
[source,console]
----
GET /_cat/health?v
----
|===
| php | csharp

| &check; | &check;
|===
=== cat/health.asciidoc: line 92: ccd9e2cf7181de67cf9ab0df1a02c575.adoc
[source,console]
----
GET /_cat/health?v&ts=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/indices.asciidoc: line 88: 073539a7e38be3cdf13008330b6a536a.adoc
[source,console]
----
GET /_cat/indices/twi*?v&s=index
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/master.asciidoc: line 39: 45bde49f35ffae3f3dabc77a592241b4.adoc
[source,console]
----
GET /_cat/master?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/nodeattrs.asciidoc: line 69: e20e2e6f949ac660a77840a9263fadef.adoc
[source,console]
----
GET /_cat/nodeattrs?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/nodeattrs.asciidoc: line 101: 0c69c638073cc8518187b678dd33443c.adoc
[source,console]
----
GET /_cat/nodeattrs?v&h=name,pid,attr,value
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/nodes.asciidoc: line 300: db20adb70a8e8d0709d15ba0daf18d23.adoc
[source,console]
----
GET /_cat/nodes?v
----
|===
| php | csharp

| &check; | &check;
|===
=== cat/nodes.asciidoc: line 329: 21d3e98d911642ab3bda2657f7a06f80.adoc
[source,console]
----
GET /_cat/nodes?v&h=id,ip,port,v,m
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/pending_tasks.asciidoc: line 37: dc2e9e499c7037eb9327cc84a942c5e9.adoc
[source,console]
----
GET /_cat/pending_tasks?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/plugins.asciidoc: line 38: 3796d69e8339bab58e70fdde9f9c09ad.adoc
[source,console]
----
GET /_cat/plugins?v&s=component&h=name,component,version,description
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/recovery.asciidoc: line 64: 0497361415e63295f2151b34818ad1ab.adoc
[source,console]
----
GET _cat/recovery?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/recovery.asciidoc: line 94: be9390dd19d724364b72bf081b3593d7.adoc
[source,console]
----
GET _cat/recovery?v&h=i,s,t,ty,st,shost,thost,f,fp,b,bp
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/recovery.asciidoc: line 125: a213728fa704ca23c5983809332d3fb3.adoc
[source,console]
----
GET _cat/recovery?v&h=i,s,t,ty,st,rep,snap,f,fp,b,bp
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/repositories.asciidoc: line 38: 6fa570aac5033e3b25d3071a6c9ea3dc.adoc
[source,console]
----
GET /_cat/repositories?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/thread_pool.asciidoc: line 122: ad88e46bb06739991498dee248850223.adoc
[source,console]
----
GET /_cat/thread_pool
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/thread_pool.asciidoc: line 159: ab5e724a4baa0cc44df33f7d62583e7f.adoc
[source,console]
----
GET /_cat/thread_pool/generic?v&h=id,name,active,rejected,completed
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/shards.asciidoc: line 282: 7e126e2751311db60cfcbb22c9c41caa.adoc
[source,console]
----
GET _cat/shards
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/shards.asciidoc: line 309: e42e92050dd1c20262ce9e38f4b42ba0.adoc
[source,console]
----
GET _cat/shards/twitt*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/shards.asciidoc: line 331: 7e126e2751311db60cfcbb22c9c41caa.adoc
[source,console]
----
GET _cat/shards
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/shards.asciidoc: line 355: 7e126e2751311db60cfcbb22c9c41caa.adoc
[source,console]
----
GET _cat/shards
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/shards.asciidoc: line 377: 25c0e66a433a0cd596e0641b752ff6d7.adoc
[source,console]
----
GET _cat/shards?h=index,shard,prirep,state,unassigned.reason
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/segments.asciidoc: line 112: 6f507269ad5b31d2bb0885c1b18aac1a.adoc
[source,console]
----
GET /_cat/segments?v
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/snapshots.asciidoc: line 113: 706fc4b9e4df1f6ee3fe34194492c20e.adoc
[source,console]
----
GET /_cat/snapshots/repo1?v&s=id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cat/templates.asciidoc: line 48: 289e6033c96f931844770114113cad6a.adoc
[source,console]
----
GET /_cat/templates?v&s=name
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster.asciidoc: line 56: 2c602b4ee8f22cda2cdf19bad31da0af.adoc
[source,console]
----
# If no filters are given, the default is to select all nodes
GET /_nodes
# Explicitly select all nodes
GET /_nodes/_all
# Select just the local node
GET /_nodes/_local
# Select the elected master node
GET /_nodes/_master
# Select nodes by name, which can include wildcards
GET /_nodes/node_name_goes_here
GET /_nodes/node_name_goes_*
# Select nodes by address, which can include wildcards
GET /_nodes/10.0.0.3,10.0.0.4
GET /_nodes/10.0.0.*
# Select nodes by role
GET /_nodes/_all,master:false
GET /_nodes/data:true,ingest:true
GET /_nodes/coordinating_only:true
GET /_nodes/master:true,voting_only:false
# Select nodes by custom attribute (e.g. with something like `node.attr.rack: 2` in the configuration file)
GET /_nodes/rack:2
GET /_nodes/ra*:2
GET /_nodes/ra*:2*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/health.asciidoc: line 32: 04f5dd677c777bcb15d7d5fa63275fc8.adoc
[source,console]
----
GET /_cluster/health?wait_for_status=yellow&timeout=50s
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/health.asciidoc: line 141: b02e4907c9936c1adc16ccce9d49900d.adoc
[source,console]
----
GET _cluster/health
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/health.asciidoc: line 178: c48264ec5d9b9679fddd72e5c44425b9.adoc
[source,console]
----
GET /_cluster/health/twitter?level=shards
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/state.asciidoc: line 128: b66be1daf6c220eb66d94e708b2fae39.adoc
[source,console]
----
GET /_cluster/state/metadata,routing_table/foo,bar
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/state.asciidoc: line 136: 0fa220ee3fb267020382f74aa70eb1e9.adoc
[source,console]
----
GET /_cluster/state/_all/foo,bar
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/state.asciidoc: line 144: a3cfd350c73a104b99a998c6be931408.adoc
[source,console]
----
GET /_cluster/state/blocks
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/stats.asciidoc: line 43: 861f5f61409dc87f3671293b87839ff7.adoc
[source,console]
----
GET /_cluster/stats?human&pretty
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/stats.asciidoc: line 267: 71c629c44bf3c542a0daacbfc253c4b0.adoc
[source,console]
----
GET /_cluster/stats/nodes/node1,node*,master:false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/reroute.asciidoc: line 177: c5488b3888749d3d5b9808ab28d384eb.adoc
[source,console]
----
POST /_cluster/reroute
{
    "commands" : [
        {
            "move" : {
                "index" : "test", "shard" : 0,
                "from_node" : "node1", "to_node" : "node2"
            }
        },
        {
          "allocate_replica" : {
                "index" : "test", "shard" : 1,
                "node" : "node3"
          }
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/update-settings.asciidoc: line 62: 37f4bd6dd220db648998fc340b3dfa69.adoc
[source,console]
----
PUT /_cluster/settings
{
    "persistent" : {
        "indices.recovery.max_bytes_per_sec" : "50mb"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/update-settings.asciidoc: line 76: 8c05281b724106e703c05df661188c4f.adoc
[source,console]
----
PUT /_cluster/settings?flat_settings=true
{
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : "20mb"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/update-settings.asciidoc: line 106: 1f25c9ef11f574f1ba0ad974bf653cd4.adoc
[source,console]
----
PUT /_cluster/settings
{
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : null
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/update-settings.asciidoc: line 134: 32496570a397852bece96f4da5d17a7e.adoc
[source,console]
----
PUT /_cluster/settings
{
    "transient" : {
        "indices.recovery.*" : null
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-stats.asciidoc: line 406: 5457c94f0039c6b95c7f9f305d0c6b58.adoc
[source,console]
----
# return just indices
GET /_nodes/stats/indices

# return just os and process
GET /_nodes/stats/os,process

# return just process for node with IP address 10.0.0.1
GET /_nodes/10.0.0.1/stats/process
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-stats.asciidoc: line 425: 150b5fee5678bf8cdf0932da73eada80.adoc
[source,console]
----
# Fielddata summarized by node
GET /_nodes/stats/indices/fielddata?fields=field1,field2

# Fielddata summarized by node and index
GET /_nodes/stats/indices/fielddata?level=indices&fields=field1,field2

# Fielddata summarized by node, index, and shard
GET /_nodes/stats/indices/fielddata?level=shards&fields=field1,field2

# You can use wildcards for field names
GET /_nodes/stats/indices/fielddata?fields=field*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-stats.asciidoc: line 444: bd68666ca2e0be12f7624016317a62bc.adoc
[source,console]
----
# All groups with all stats
GET /_nodes/stats?groups=_all

# Some groups from just the indices stats
GET /_nodes/stats/indices?groups=foo,bar
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-info.asciidoc: line 162: 3c4d7ef8422d2db423a8f23effcddaa1.adoc
[source,console]
----
# return just process
GET /_nodes/process

# same as above
GET /_nodes/_all/process

# return just jvm and process of only nodeId1 and nodeId2
GET /_nodes/nodeId1,nodeId2/jvm,process

# same as above
GET /_nodes/nodeId1,nodeId2/info/jvm,process

# return all the information of only nodeId1 and nodeId2
GET /_nodes/nodeId1,nodeId2/_all
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-info.asciidoc: line 190: 68b64313bf89ec3f2c645da61999dbb4.adoc
[source,console]
----
GET /_nodes/plugins
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-info.asciidoc: line 262: 0c464965126cc09e6812716a145991d4.adoc
[source,console]
----
GET /_nodes/ingest
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-usage.asciidoc: line 58: 3d6a56dd3d93ece0e3da3fb66b4696d3.adoc
[source,console]
----
GET _nodes/usage
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 13: 166bcfc6d5d39defec7ad6aa44d0914b.adoc
[source,console]
----
GET _tasks \<1>
GET _tasks?nodes=nodeId1,nodeId2 \<2>
GET _tasks?nodes=nodeId1,nodeId2&actions=cluster:* \<3>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 67: 33610800d9de3c3e6d6b3c611ace7330.adoc
[source,console]
----
GET _tasks/oTUltX4IQMOUUVeiohTt8A:124
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 78: 29824032d7d64512d17458fdd687b1f6.adoc
[source,console]
----
GET _tasks?parent_task_id=oTUltX4IQMOUUVeiohTt8A:123
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 91: 8f4a7f68f2ca3698abdf20026a2d8c5f.adoc
[source,console]
----
GET _tasks?actions=*search&detailed
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 153: 93fb59d3204f37af952198b331fb6bb7.adoc
[source,console]
----
GET _tasks/oTUltX4IQMOUUVeiohTt8A:12345?wait_for_completion=true&timeout=10s
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 163: 77447e2966708e92f5e219d43ac3f00d.adoc
[source,console]
----
GET _tasks?actions=*reindex&wait_for_completion=true&timeout=10s
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 172: 927fc3b86302afb2fc41785261771663.adoc
[source,console]
----
GET _cat/tasks
GET _cat/tasks?detailed
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 186: d89d36741d906a71eca6c144e8d83889.adoc
[source,console]
----
POST _tasks/oTUltX4IQMOUUVeiohTt8A:12345/_cancel
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 196: 612c2e975f833de9815651135735eae5.adoc
[source,console]
----
POST _tasks/_cancel?nodes=nodeId1,nodeId2&actions=*reindex
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 208: bd3d710ec50a151453e141691163af72.adoc
[source,console]
----
GET _tasks?group_by=parents
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/tasks.asciidoc: line 216: a3ce0cfe2176f3d8a36959a5916995f0.adoc
[source,console]
----
GET _tasks?group_by=none
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/nodes-hot-threads.asciidoc: line 9: 77c099c97ea6911e2dd6e996da7dcca0.adoc
[source,console]
----
GET /_nodes/hot_threads
GET /_nodes/nodeId1,nodeId2/hot_threads
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/allocation-explain.asciidoc: line 19: e4cd381f35dcaa151dd93cf259e50ae6.adoc
[source,console]
----
PUT /myindex
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/allocation-explain.asciidoc: line 28: 2663038cfc46b106edaef607d553c99c.adoc
[source,console]
----
GET /_cluster/allocation/explain
{
  "index": "myindex",
  "shard": 0,
  "primary": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/allocation-explain.asciidoc: line 48: 75fb2de2b47c564833ab14049c295384.adoc
[source,console]
----
GET /_cluster/allocation/explain
{
  "index": "myindex",
  "shard": 0,
  "primary": false,
  "current_node": "nodeA"                         \<1>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/allocation-explain.asciidoc: line 65: 45803e6cb9fee2b430dcf63d50fb7a2b.adoc
[source,console]
----
GET /_cluster/allocation/explain
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/allocation-explain.asciidoc: line 145: fb99aaf2e89e70c96c2c79c2ce7a36f1.adoc
[source,console]
----
GET /_cluster/allocation/explain?include_disk_info=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/allocation-explain.asciidoc: line 154: 681419ddc44c9f7914f88be834ae2b44.adoc
[source,console]
----
GET /_cluster/allocation/explain?include_yes_decisions=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/voting-exclusions.asciidoc: line 65: 59681840e544bb5b3bd858c194972f23.adoc
[source,console]
----
POST /_cluster/voting_config_exclusions/nodeId1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== cluster/voting-exclusions.asciidoc: line 73: 25cb9e1da00dfd971065ce182467434d.adoc
[source,console]
----
DELETE /_cluster/voting_config_exclusions
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/get-ccr-stats.asciidoc: line 39: 9b30a69fec54cf01f7af1b04a6e15239.adoc
[source,console]
----
GET /_ccr/stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/get-ccr-stats.asciidoc: line 97: 9b30a69fec54cf01f7af1b04a6e15239.adoc
[source,console]
----
GET /_ccr/stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/put-follow.asciidoc: line 26: 73646c12ad33a813ab2280f1dc83500e.adoc
[source,console]
----
PUT /<follower_index>/_ccr/follow?wait_for_active_shards=1
{
  "remote_cluster" : "<remote_cluster>",
  "leader_index" : "<leader_index>"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/put-follow.asciidoc: line 91: c1f565c68d7bfce4a4251c7919444977.adoc
[source,console]
----
PUT /follower_index/_ccr/follow?wait_for_active_shards=1
{
  "remote_cluster" : "remote_cluster",
  "leader_index" : "leader_index",
  "max_read_request_operation_count" : 1024,
  "max_outstanding_read_requests" : 16,
  "max_read_request_size" : "1024k",
  "max_write_request_operation_count" : 32768,
  "max_write_request_size" : "16k",
  "max_outstanding_write_requests" : 8,
  "max_write_buffer_count" : 512,
  "max_write_buffer_size" : "512k",
  "max_retry_delay" : "10s",
  "read_poll_timeout" : "30s"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-pause-follow.asciidoc: line 31: 483d669ec0768bc4e275a568c6164704.adoc
[source,console]
----
POST /<follower_index>/_ccr/pause_follow
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-pause-follow.asciidoc: line 65: d3263afc69b6f969b9bbd8738cd07b97.adoc
[source,console]
----
POST /follower_index/_ccr/pause_follow
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-resume-follow.asciidoc: line 40: 109db8ff7b715aca98de8ef1ab7e44ab.adoc
[source,console]
----
POST /<follower_index>/_ccr/resume_follow
{
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-resume-follow.asciidoc: line 83: 824fded1f9db28906ae7e85ae8de9bd0.adoc
[source,console]
----
POST /follower_index/_ccr/resume_follow
{
  "max_read_request_operation_count" : 1024,
  "max_outstanding_read_requests" : 16,
  "max_read_request_size" : "1024k",
  "max_write_request_operation_count" : 32768,
  "max_write_request_size" : "16k",
  "max_outstanding_write_requests" : 8,
  "max_write_buffer_count" : 512,
  "max_write_buffer_size" : "512k",
  "max_retry_delay" : "10s",
  "read_poll_timeout" : "30s"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-unfollow.asciidoc: line 35: f6d493650b4344f17297b568016fb445.adoc
[source,console]
----
POST /<follower_index>/_ccr/unfollow
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-unfollow.asciidoc: line 72: 6a350a17701e8c8158407191f2718b66.adoc
[source,console]
----
POST /follower_index/_ccr/unfollow
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-forget-follower.asciidoc: line 38: f4fdfe52ecba65eec6beb30d8deb8bbf.adoc
[source,console]
----
POST /<leader_index>/_ccr/forget_follower
{
  "follower_cluster" : "<follower_cluster>",
  "follower_index" : "<follower_index>",
  "follower_index_uuid" : "<follower_index_uuid>",
  "leader_remote_cluster" : "<leader_remote_cluster>"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/post-forget-follower.asciidoc: line 131: 07c07f6d497b1a3012aa4320f830e09e.adoc
[source,console]
----
POST /leader_index/_ccr/forget_follower
{
  "follower_cluster" : "follower_cluster",
  "follower_index" : "follower_index",
  "follower_index_uuid" : "vYpnaWPRQB6mNspmoCeYyA",
  "leader_remote_cluster" : "leader_cluster"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/get-follow-stats.asciidoc: line 38: 020c95db88ef356093f03be84893ddf9.adoc
[source,console]
----
GET /<index>/_ccr/stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/get-follow-stats.asciidoc: line 209: 8e43bb5b7946143e69d397bb81d87df0.adoc
[source,console]
----
GET /follower_index/_ccr/stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/get-follow-info.asciidoc: line 38: b2440b492149b705ef107137fdccb0c2.adoc
[source,console]
----
GET /<index>/_ccr/info
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/follow/get-follow-info.asciidoc: line 142: a520168c1c8b454a8f102d6a13027c73.adoc
[source,console]
----
GET /follower_index/_ccr/info
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/auto-follow/put-auto-follow-pattern.asciidoc: line 15: 6323012afc5d0421840d67cb8a0c4cb9.adoc
[source,console]
----
PUT /_ccr/auto_follow/<auto_follow_pattern_name>
{
  "remote_cluster" : "<remote_cluster>",
  "leader_index_patterns" :
  [
    "<leader_index_pattern>"
  ],
  "follow_index_pattern" : "<follow_index_pattern>"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/auto-follow/put-auto-follow-pattern.asciidoc: line 91: 754a082212929e02a9f71d5404d3301d.adoc
[source,console]
----
PUT /_ccr/auto_follow/my_auto_follow_pattern
{
  "remote_cluster" : "remote_cluster",
  "leader_index_patterns" :
  [
    "leader_index*"
  ],
  "follow_index_pattern" : "{{leader_index}}-follower",
  "max_read_request_operation_count" : 1024,
  "max_outstanding_read_requests" : 16,
  "max_read_request_size" : "1024k",
  "max_write_request_operation_count" : 32768,
  "max_write_request_size" : "16k",
  "max_outstanding_write_requests" : 8,
  "max_write_buffer_count" : 512,
  "max_write_buffer_size" : "512k",
  "max_retry_delay" : "10s",
  "read_poll_timeout" : "30s"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/auto-follow/delete-auto-follow-pattern.asciidoc: line 35: 2f2580ea420e1836d922fe48fa8ada97.adoc
[source,console]
----
DELETE /_ccr/auto_follow/<auto_follow_pattern_name>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/auto-follow/delete-auto-follow-pattern.asciidoc: line 68: d4ef6ac034c4d42cb75d830ec69146e6.adoc
[source,console]
----
DELETE /_ccr/auto_follow/my_auto_follow_pattern
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/auto-follow/get-auto-follow-pattern.asciidoc: line 43: 5e124875d97c27362ae858160ae1c6d5.adoc
[source,console]
----
GET /_ccr/auto_follow/
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/auto-follow/get-auto-follow-pattern.asciidoc: line 49: d56a9d89282df56adbbc34b91390ac17.adoc
[source,console]
----
GET /_ccr/auto_follow/<auto_follow_pattern_name>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ccr/apis/auto-follow/get-auto-follow-pattern.asciidoc: line 83: 79f33e05b203eb46eef7958fbc95ef77.adoc
[source,console]
----
GET /_ccr/auto_follow/my_auto_follow_pattern
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/put-transform.asciidoc: line 143: 6e2c969573581cc1c4ae83f59ef8d2f0.adoc
[source,console]
----
PUT _data_frame/transforms/ecommerce_transform
{
  "source": {
    "index": "kibana_sample_data_ecommerce",
    "query": {
      "term": {
        "geoip.continent_name": {
          "value": "Asia"
        }
      }
    }
  },
  "pivot": {
    "group_by": {
      "customer_id": {
        "terms": {
          "field": "customer_id"
        }
      }
    },
    "aggregations": {
      "max_price": {
        "max": {
          "field": "taxful_total_price"
        }
      }
    }
  },
  "description": "Maximum priced ecommerce data by customer_id in Asia",
  "dest": {
    "index": "kibana_sample_data_ecommerce_transform",
    "pipeline": "add_timestamp_pipeline"
  },
  "frequency": "5m",
  "sync": {
    "time": {
      "field": "order_date",
      "delay": "60s"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/update-transform.asciidoc: line 125: f61fdfcbebde925d253f455e23f4bf25.adoc
[source,console]
----
POST _data_frame/transforms/simple-kibana-ecomm-pivot/_update
{
  "source": {
    "index": "kibana_sample_data_ecommerce",
    "query": {
      "term": {
        "geoip.continent_name": {
          "value": "Asia"
        }
      }
    }
  },
  "description": "Maximum priced ecommerce data by customer_id in Asia",
  "dest": {
    "index": "kibana_sample_data_ecommerce_transform_v2",
    "pipeline": "add_timestamp_pipeline"
  },
  "frequency": "15m",
  "sync": {
    "time": {
      "field": "order_date",
      "delay": "120s"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/delete-transform.asciidoc: line 49: c0632f2983704d482200d4900e722534.adoc
[source,console]
----
DELETE _data_frame/transforms/ecommerce_transform
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/get-transform.asciidoc: line 99: 59b3dc4f4c270e136435c62d30e78982.adoc
[source,console]
----
GET _data_frame/transforms?size=10
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/get-transform.asciidoc: line 109: 432f71eed8e670a14195f22c1a557bf7.adoc
[source,console]
----
GET _data_frame/transforms/ecommerce_transform
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/get-transform-stats.asciidoc: line 105: 148bef7f7b2a9c1c2011e4d018c4ae50.adoc
[source,console]
----
GET _data_frame/transforms/_stats?from=5&size=10
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/get-transform-stats.asciidoc: line 115: d4a2862678b5ef99ec596de1927c3944.adoc
[source,console]
----
GET _data_frame/transforms/ecommerce_transform/_stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/preview-transform.asciidoc: line 71: 681a67458b6ee3b0ec96ca017c363770.adoc
[source,console]
----
POST _data_frame/transforms/_preview
{
  "source": {
    "index": "kibana_sample_data_ecommerce"
  },
  "pivot": {
    "group_by": {
      "customer_id": {
        "terms": {
          "field": "customer_id"
        }
      }
    },
    "aggregations": {
      "max_price": {
        "max": {
          "field": "taxful_total_price"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/start-transform.asciidoc: line 65: 811a0ff3a0e65bbb869c5654a47892cd.adoc
[source,console]
----
POST _data_frame/transforms/ecommerce_transform/_start
----
|===
| php | csharp

| &cross; | &cross;
|===
=== data-frames/apis/stop-transform.asciidoc: line 95: a54a3affc99756ba9cc8b4860fd5206e.adoc
[source,console]
----
POST _data_frame/transforms/ecommerce_transform/_stop
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/index_.asciidoc: line 144: 804a97ff4d0613e6568e4efb19c52021.adoc
[source,console]
----
PUT _cluster/settings
{
    "persistent": {
        "action.auto_create_index": "twitter,index10,-index1*,+ind*" \<1>
    }
}

PUT _cluster/settings
{
    "persistent": {
        "action.auto_create_index": "false" \<2>
    }
}

PUT _cluster/settings
{
    "persistent": {
        "action.auto_create_index": "true" \<3>
    }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/index_.asciidoc: line 194: 36818c6d9f434d387819c30bd9addb14.adoc
[source,console]
----
POST twitter/_doc/
{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/index_.asciidoc: line 245: 625dc94df1f9affb49a082fd99d41620.adoc
[source,console]
----
POST twitter/_doc?routing=kimchy
{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/index_.asciidoc: line 368: b918d6b798da673a33e49b94f61dcdc0.adoc
[source,console]
----
PUT twitter/_doc/1?timeout=5m
{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/index_.asciidoc: line 398: 1f336ecc62480c1d56351cc2f82d0d08.adoc
[source,console]
----
PUT twitter/_doc/1?version=2&version_type=external
{
    "message" : "elasticsearch now has versioning support, double cool!"
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/index_.asciidoc: line 456: bb143628fd04070683eeeadc9406d9cc.adoc
[source,console]
----
PUT twitter/_doc/1
{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/index_.asciidoc: line 491: 048d8abd42d094bbdcf4452a58ccb35b.adoc
[source,console]
----
PUT twitter/_create/1
{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/index_.asciidoc: line 505: d718b63cf1b6591a1d59a0cf4fd995eb.adoc
[source,console]
----
PUT twitter/_doc/1?op_type=create
{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 47: 138ccd89f72aa7502dd9578403dcc589.adoc
[source,console]
----
GET twitter/_doc/0?_source=false
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 60: 8fdf2344c4fb3de6902ad7c5735270df.adoc
[source,console]
----
GET twitter/_doc/0?_source_includes=*.id&_source_excludes=entities
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 69: 745f9b8cdb8e91073f6e520e1d9f8c05.adoc
[source,console]
----
GET twitter/_doc/0?_source=*.id,retweeted
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 83: 1d65cb6d055c46a1bde809687d835b71.adoc
[source,console]
----
GET twitter/_doc/2?routing=user1
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 235: fbcf5078a6a9e09790553804054c36b3.adoc
[source,console]
----
GET twitter/_doc/0
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 266: 98234499cfec70487cec5d013e976a84.adoc
[source,console]
----
HEAD twitter/_doc/0
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 283: 89a8ac1509936acc272fc2d72907bc45.adoc
[source,console]
----
GET twitter/_source/1
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 293: d222c6a6ec7a3beca6c97011b0874512.adoc
[source,console]
----
GET twitter/_source/1/?_source_includes=*.id&_source_excludes=entities
----
|===
| php | csharp

| &cross; | &check;
|===
=== docs/get.asciidoc: line 304: 2468ab381257d759d8a88af1141f6f9c.adoc
[source,console]
----
HEAD twitter/_source/1
----
|===
| php | csharp

| &cross; | &check;
|===
=== docs/get.asciidoc: line 319: 913770050ebbf3b9b549a899bc11060a.adoc
[source,console]
----
PUT twitter
{
   "mappings": {
       "properties": {
          "counter": {
             "type": "integer",
             "store": false
          },
          "tags": {
             "type": "keyword",
             "store": true
          }
       }
   }
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 341: 5eabcdbf61bfcb484dc694f25c2bba36.adoc
[source,console]
----
PUT twitter/_doc/1
{
    "counter" : 1,
    "tags" : ["red"]
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 354: 710c7871f20f176d51209b1574b0d61b.adoc
[source,console]
----
GET twitter/_doc/1?stored_fields=tags,counter
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 387: 0ba0b2db24852abccb7c0fc1098d566e.adoc
[source,console]
----
PUT twitter/_doc/2?routing=user1
{
    "counter" : 1,
    "tags" : ["white"]
}
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/get.asciidoc: line 398: 69a7be47f85138b10437113ab2f0d72d.adoc
[source,console]
----
GET twitter/_doc/2?routing=user1&stored_fields=tags,counter
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/delete.asciidoc: line 72: 47b5ff897f26e9c943cee5c06034181d.adoc
[source,console]
----
DELETE /twitter/_doc/1?routing=kimchy
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/delete.asciidoc: line 129: d90a84a24a407731dfc1929ac8327746.adoc
[source,console]
----
DELETE /twitter/_doc/1?timeout=5m
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/delete.asciidoc: line 171: c5e5873783246c7b1c01d8464fed72c4.adoc
[source,console]
----
DELETE /twitter/_doc/1
----
|===
| php | csharp

| &check; | &check;
|===
=== docs/delete-by-query.asciidoc: line 8: c1de6df850c4111c68ec57a6f9c2ec6d.adoc
[source,console]
----
POST twitter/_delete_by_query
{
  "query": { \<1>
    "match": {
      "message": "some message"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 77: e21e1c26dc8687e7bf7bd2bf019a6698.adoc
[source,console]
----
POST twitter/_delete_by_query?conflicts=proceed
{
  "query": {
    "match_all": {}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 92: 099e1dbe296568756df5a9816efcae45.adoc
[source,console]
----
POST twitter,blog/_delete_by_query
{
  "query": {
    "match_all": {}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 107: c32a3f8071d87f0a3f5a78e07fe7a669.adoc
[source,console]
----
POST twitter/_delete_by_query?routing=1
{
  "query": {
    "range" : {
        "age" : {
           "gte" : 10
        }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 126: dfb1fe96d806a644214d06f9b4b87878.adoc
[source,console]
----
POST twitter/_delete_by_query?scroll_size=5000
{
  "query": {
    "term": {
      "user": "kimchy"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 303: 216848930c2d344fe0bed0daa70c35b9.adoc
[source,console]
----
GET _tasks?detailed=true&actions=*/delete/byquery
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 358: be3a6431d01846950dc1a39a7a6a1faa.adoc
[source,console]
----
GET /_tasks/r1A2WoRbTwKZ516z6NEs5A:36619
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 379: 18ddb7e7a4bcafd449df956e828ed7a8.adoc
[source,console]
----
POST _tasks/r1A2WoRbTwKZ516z6NEs5A:36619/_cancel
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 399: 52c7e4172a446c394210a07c464c57d2.adoc
[source,console]
----
POST _delete_by_query/r1A2WoRbTwKZ516z6NEs5A:36619/_rethrottle?requests_per_second=-1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 429: 1e49eba5b9042c1900a608fe5105ba43.adoc
[source,console]
----
POST twitter/_delete_by_query
{
  "slice": {
    "id": 0,
    "max": 2
  },
  "query": {
    "range": {
      "likes": {
        "lt": 10
      }
    }
  }
}
POST twitter/_delete_by_query
{
  "slice": {
    "id": 1,
    "max": 2
  },
  "query": {
    "range": {
      "likes": {
        "lt": 10
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 465: 3e573bfabe00f8bfb8bb69aa5820768e.adoc
[source,console]
----
GET _refresh
POST twitter/_search?size=0&filter_path=hits.total
{
  "query": {
    "range": {
      "likes": {
        "lt": 10
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 505: a5a7050fb9dcb9574e081957ade28617.adoc
[source,console]
----
POST twitter/_delete_by_query?refresh&slices=5
{
  "query": {
    "range": {
      "likes": {
        "lt": 10
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/delete-by-query.asciidoc: line 523: 14701dcc0cca9665fce2aace0cb62af7.adoc
[source,console]
----
POST twitter/_search?size=0&filter_path=hits.total
{
  "query": {
    "range": {
      "likes": {
        "lt": 10
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 86: 381fced1882ca8337143e6bb180a5715.adoc
[source,console]
----
PUT test/_doc/1
{
    "counter" : 1,
    "tags" : ["red"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 99: 96de5703ba0bd43fd4ac239ec5408542.adoc
[source,console]
----
POST test/_update/1
{
    "script" : {
        "source": "ctx._source.counter += params.count",
        "lang": "painless",
        "params" : {
            "count" : 4
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 118: 4cd246e5c4c035a2cd4081ae9a3d54e5.adoc
[source,console]
----
POST test/_update/1
{
    "script" : {
        "source": "ctx._source.tags.add(params.tag)",
        "lang": "painless",
        "params" : {
            "tag" : "blue"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 140: ac544eb247a29ca42aab13826ca88561.adoc
[source,console]
----
POST test/_update/1
{
    "script" : {
        "source": "if (ctx._source.tags.contains(params.tag)) { ctx._source.tags.remove(ctx._source.tags.indexOf(params.tag)) }",
        "lang": "painless",
        "params" : {
            "tag" : "blue"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 159: eb30ba547e4a7b8f54f33ab259aca523.adoc
[source,console]
----
POST test/_update/1
{
    "script" : "ctx._source.new_field = 'value_of_new_field'"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 171: 58df61acbfb15b8ef0aaa18b81ae98a6.adoc
[source,console]
----
POST test/_update/1
{
    "script" : "ctx._source.remove('new_field')"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 185: 98aeb275f829b5f7b8eb2147701565ff.adoc
[source,console]
----
POST test/_update/1
{
    "script" : {
        "source": "if (ctx._source.tags.contains(params.tag)) { ctx.op = 'delete' } else { ctx.op = 'none' }",
        "lang": "painless",
        "params" : {
            "tag" : "green"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 207: 38c1d0f6668e9563c0827f839f9fa505.adoc
[source,console]
----
POST test/_update/1
{
    "doc" : {
        "name" : "new_name"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 228: 38c1d0f6668e9563c0827f839f9fa505.adoc
[source,console]
----
POST test/_update/1
{
    "doc" : {
        "name" : "new_name"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 264: 015294a400986295039e52ebc62033be.adoc
[source,console]
----
POST test/_update/1
{
    "doc" : {
        "name" : "new_name"
    },
    "detect_noop": false
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 285: 0a958e486ede3f519d48431ab689eded.adoc
[source,console]
----
POST test/_update/1
{
    "script" : {
        "source": "ctx._source.counter += params.count",
        "lang": "painless",
        "params" : {
            "count" : 4
        }
    },
    "upsert" : {
        "counter" : 1
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 311: f9636d7ef1a45be4f36418c875cf6bef.adoc
[source,console]
----
POST sessions/_update/dh3sgudg8gsrgl
{
    "scripted_upsert":true,
    "script" : {
        "id": "my_web_session_summariser",
        "params" : {
            "pageViewEvent" : {
                "url":"foo.com/bar",
                "response":404,
                "time":"2014-01-01 12:32"
            }
        }
    },
    "upsert" : {}
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update.asciidoc: line 341: 7cac05cb589f1614fd5b8589153bef06.adoc
[source,console]
----
POST test/_update/1
{
    "doc" : {
        "name" : "new_name"
    },
    "doc_as_upsert" : true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 10: a4a396cd07657b3977713fb3a742c41b.adoc
[source,console]
----
POST twitter/_update_by_query?conflicts=proceed
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 69: a4a396cd07657b3977713fb3a742c41b.adoc
[source,console]
----
POST twitter/_update_by_query?conflicts=proceed
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 80: 52a87b81e4e0b6b11e23e85db1602a63.adoc
[source,console]
----
POST twitter/_update_by_query?conflicts=proceed
{
  "query": { \<1>
    "term": {
      "user": "kimchy"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 104: 2fd69fb0538e4f36ac69a8b8f8bf5ae8.adoc
[source,console]
----
POST twitter/_update_by_query
{
  "script": {
    "source": "ctx._source.likes++",
    "lang": "painless"
  },
  "query": {
    "term": {
      "user": "kimchy"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 152: cde4dddae5c06e7f1d38c9d933dbc7ac.adoc
[source,console]
----
POST twitter,blog/_update_by_query
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 162: d8b115341da772a628a024e7d1644e73.adoc
[source,console]
----
POST twitter/_update_by_query?routing=1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 172: 54a770f053f3225ea0d1e34334232411.adoc
[source,console]
----
POST twitter/_update_by_query?scroll_size=100
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 182: c4b278ba293abd0d02a0b5ad1a99f84a.adoc
[source,console]
----
PUT _ingest/pipeline/set-foo
{
  "description" : "sets foo",
  "processors" : [ {
      "set" : {
        "field": "foo",
        "value": "bar"
      }
  } ]
}
POST twitter/_update_by_query?pipeline=set-foo
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 360: 7df191cc7f814e410a4ac7261065e6ef.adoc
[source,console]
----
GET _tasks?detailed=true&actions=*byquery
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 420: be3a6431d01846950dc1a39a7a6a1faa.adoc
[source,console]
----
GET /_tasks/r1A2WoRbTwKZ516z6NEs5A:36619
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 441: 18ddb7e7a4bcafd449df956e828ed7a8.adoc
[source,console]
----
POST _tasks/r1A2WoRbTwKZ516z6NEs5A:36619/_cancel
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 461: bdb30dd52d32f50994008f4f9c0da5f0.adoc
[source,console]
----
POST _update_by_query/r1A2WoRbTwKZ516z6NEs5A:36619/_rethrottle?requests_per_second=-1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 490: 0d664883151008b1051ef2c9ab2d0373.adoc
[source,console]
----
POST twitter/_update_by_query
{
  "slice": {
    "id": 0,
    "max": 2
  },
  "script": {
    "source": "ctx._source['extra'] = 'test'"
  }
}
POST twitter/_update_by_query
{
  "slice": {
    "id": 1,
    "max": 2
  },
  "script": {
    "source": "ctx._source['extra'] = 'test'"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 518: 4acf902c2598b2558f34f20c1744c433.adoc
[source,console]
----
GET _refresh
POST twitter/_search?size=0&q=extra:test&filter_path=hits.total
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 549: ea02de2dbe05091fcb0dac72c8ba5f83.adoc
[source,console]
----
POST twitter/_update_by_query?refresh&slices=5
{
  "script": {
    "source": "ctx._source['extra'] = 'test'"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 563: 025b54db0edc50c24ea48a2bd94366ad.adoc
[source,console]
----
POST twitter/_search?size=0&q=extra:test&filter_path=hits.total
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 641: 2fe28d9a91b3081a9ec4601af8fb7b1c.adoc
[source,console]
----
PUT test
{
  "mappings": {
    "dynamic": false,   \<1>
    "properties": {
      "text": {"type": "text"}
    }
  }
}

POST test/_doc?refresh
{
  "text": "words words",
  "flag": "bar"
}
POST test/_doc?refresh
{
  "text": "words words",
  "flag": "foo"
}
PUT test/_mapping   \<2>
{
  "properties": {
    "text": {"type": "text"},
    "flag": {"type": "text", "analyzer": "keyword"}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 680: abd4fc3ce7784413a56fe2dcfe2809b5.adoc
[source,console]
----
POST test/_search?filter_path=hits.total
{
  "query": {
    "match": {
      "flag": "foo"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/update-by-query.asciidoc: line 709: 97babc8d19ef0866774576716eb6d19e.adoc
[source,console]
----
POST test/_update_by_query?refresh&conflicts=proceed
POST test/_search?filter_path=hits.total
{
  "query": {
    "match": {
      "flag": "foo"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 15: b02ea386a43df53f5b925ae64ff4bf96.adoc
[source,console]
----
GET /_mget
{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "1"
        },
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "2"
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 38: 60be49d20e42e165467817dcce53fcf7.adoc
[source,console]
----
GET /test/_mget
{
    "docs" : [
        {
            "_type" : "_doc",
            "_id" : "1"
        },
        {
            "_type" : "_doc",
            "_id" : "2"
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 58: 80229b2c753cfce1d1554e03cbdbfa29.adoc
[source,console]
----
GET /test/_doc/_mget
{
    "docs" : [
        {
            "_id" : "1"
        },
        {
            "_id" : "2"
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 77: 104404dad47a4b52637fb88df6160a08.adoc
[source,console]
----
GET /test/_doc/_mget
{
    "ids" : ["1", "2"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 98: 562535f3e70cc1a85ee6eb03588f96a6.adoc
[source,console]
----
GET /_mget
{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "1",
            "_source" : false
        },
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "2",
            "_source" : ["field3", "field4"]
        },
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "3",
            "_source" : {
                "include": ["user"],
                "exclude": ["user.location"]
            }
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 137: 1b1e75613163308e4d40073a6c0918ce.adoc
[source,console]
----
GET /_mget
{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "1",
            "stored_fields" : ["field1", "field2"]
        },
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "2",
            "stored_fields" : ["field3", "field4"]
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 162: 8c7bf48aeb7d0919a1b0fd8685a1e480.adoc
[source,console]
----
GET /test/_doc/_mget?stored_fields=field1,field2
{
    "docs" : [
        {
            "_id" : "1" \<1>
        },
        {
            "_id" : "2",
            "stored_fields" : ["field3", "field4"] \<2>
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-get.asciidoc: line 187: 1a6750042ee402bc92d644824f5cdc1f.adoc
[source,console]
----
GET /_mget?routing=key1
{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "1",
            "routing" : "key2"
        },
        {
            "_index" : "test",
            "_type" : "_doc",
            "_id" : "2"
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/bulk.asciidoc: line 73: ae9ccfaa146731ab9176df90670db1c2.adoc
[source,console]
----
POST _bulk
{ "index" : { "_index" : "test", "_id" : "1" } }
{ "field1" : "value1" }
{ "delete" : { "_index" : "test", "_id" : "2" } }
{ "create" : { "_index" : "test", "_id" : "3" } }
{ "field1" : "value3" }
{ "update" : {"_id" : "1", "_index" : "test"} }
{ "doc" : {"field2" : "value2"} }
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/bulk.asciidoc: line 265: 8cd00a3aba7c3c158277bc032aac2830.adoc
[source,console]
----
POST _bulk
{ "update" : {"_id" : "1", "_index" : "index1", "retry_on_conflict" : 3} }
{ "doc" : {"field" : "value"} }
{ "update" : { "_id" : "0", "_index" : "index1", "retry_on_conflict" : 3} }
{ "script" : { "source": "ctx._source.counter += params.param1", "lang" : "painless", "params" : {"param1" : 1}}, "upsert" : {"counter" : 1}}
{ "update" : {"_id" : "2", "_index" : "index1", "retry_on_conflict" : 3} }
{ "doc" : {"field" : "value"}, "doc_as_upsert" : true }
{ "update" : {"_id" : "3", "_index" : "index1", "_source" : true} }
{ "doc" : {"field" : "value"} }
{ "update" : {"_id" : "4", "_index" : "index1"} }
{ "doc" : {"field" : "value"}, "_source": true}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 16: 0cc991e3f7f8511a34730e154b3c5edc.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 65: 9ebee1ff26ac0f91321d1d7596c05643.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter",
    "version_type": "internal"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 86: 65adbf941edfe6efcfaec4754230ff47.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter",
    "version_type": "external"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 106: 8a104f3787e778cdde057d5e2f4eb919.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter",
    "op_type": "create"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 128: dfa9ebfd5216280a42312ea09f73d74d.adoc
[source,console]
----
POST _reindex
{
  "conflicts": "proceed",
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter",
    "op_type": "create"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 148: 764f9884b370cbdc82a1c5c42ed40ff3.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter",
    "query": {
      "term": {
        "user": "kimchy"
      }
    }
  },
  "dest": {
    "index": "new_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 172: 6f097c298a7abf4c032c4314920c49c8.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": ["twitter", "blog"]
  },
  "dest": {
    "index": "all_together"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 197: 52b2bfbdd78f8283b6f4891c48013237.adoc
[source,console]
----
POST _reindex
{
  "max_docs": 1,
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 218: 96064cf450ccd198ac03cd0c33d3be3d.adoc
[source,console]
----
POST _reindex
{
  "max_docs": 10000,
  "source": {
    "index": "twitter",
    "sort": { "date": "desc" }
  },
  "dest": {
    "index": "new_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 240: e9c2e15b36372d5281c879d336322b6c.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter",
    "_source": ["user", "_doc"]
  },
  "dest": {
    "index": "new_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 261: 8871b8fcb6de4f0c7dff22798fb10fb7.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter",
    "version_type": "external"
  },
  "script": {
    "source": "if (ctx._source.foo == 'bar') {ctx._version++; ctx._source.remove('foo')}",
    "lang": "painless"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 334: 78c96113ae4ed0054e581b17542528a7.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "source",
    "query": {
      "match": {
        "company": "cat"
      }
    }
  },
  "dest": {
    "index": "dest",
    "routing": "=cat"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 358: 400e89eb46ead8e9c9e40f123fd5e590.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "source",
    "size": 100
  },
  "dest": {
    "index": "dest",
    "routing": "=cat"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 378: b1efa1c51a34dd5ab5511b71a399f5b1.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "source"
  },
  "dest": {
    "index": "dest",
    "pipeline": "some_ingest_pipeline"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 400: 36b2778f23d0955255f52c075c4d213d.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "remote": {
      "host": "http://otherhost:9200",
      "username": "user",
      "password": "pass"
    },
    "index": "source",
    "query": {
      "match": {
        "test": "data"
      }
    }
  },
  "dest": {
    "index": "dest"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 468: 64b9baa6d7556b960b29698f3383aa31.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "remote": {
      "host": "http://otherhost:9200"
    },
    "index": "source",
    "size": 10,
    "query": {
      "match": {
        "test": "data"
      }
    }
  },
  "dest": {
    "index": "dest"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 500: 7f697eb436dfa3c30dfe610d8c32d132.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "remote": {
      "host": "http://otherhost:9200",
      "socket_timeout": "1m",
      "connect_timeout": "10s"
    },
    "index": "source",
    "query": {
      "match": {
        "test": "data"
      }
    }
  },
  "dest": {
    "index": "dest"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 790: 973ff58c444e48580971b7203d304502.adoc
[source,console]
----
GET _tasks?detailed=true&actions=*reindex
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 855: be3a6431d01846950dc1a39a7a6a1faa.adoc
[source,console]
----
GET /_tasks/r1A2WoRbTwKZ516z6NEs5A:36619
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 877: 18ddb7e7a4bcafd449df956e828ed7a8.adoc
[source,console]
----
POST _tasks/r1A2WoRbTwKZ516z6NEs5A:36619/_cancel
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 896: 68738b4fd0dda177022be45be95b4c84.adoc
[source,console]
----
POST _reindex/r1A2WoRbTwKZ516z6NEs5A:36619/_rethrottle?requests_per_second=-1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 918: 1577e6e806b3283c9e99f1596d310754.adoc
[source,console]
----
POST test/_doc/1?refresh
{
  "text": "words words",
  "flag": "foo"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 931: 1216f8f7367df3aa823012cef310c08a.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "test"
  },
  "dest": {
    "index": "test2"
  },
  "script": {
    "source": "ctx._source.tag = ctx._source.remove(\"flag\")"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 951: cfc37446bd892d1ac42a3c8e8b204e6c.adoc
[source,console]
----
GET test2/_doc/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 996: 1b8655e6ba99fe39933c6eafe78728b7.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "twitter",
    "slice": {
      "id": 0,
      "max": 2
    }
  },
  "dest": {
    "index": "new_twitter"
  }
}
POST _reindex
{
  "source": {
    "index": "twitter",
    "slice": {
      "id": 1,
      "max": 2
    }
  },
  "dest": {
    "index": "new_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 1030: 3ae03ba3b56e5e287953094050766738.adoc
[source,console]
----
GET _refresh
POST new_twitter/_search?size=0&filter_path=hits.total
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 1060: cb01106bf524df5e0501d4c655c1aa7b.adoc
[source,console]
----
POST _reindex?slices=5&refresh
{
  "source": {
    "index": "twitter"
  },
  "dest": {
    "index": "new_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 1077: e567e6dbf86300142573c73789c8fce4.adoc
[source,console]
----
POST new_twitter/_search?size=0&filter_path=hits.total
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 1182: 9a4d5e41c52c20635d1fd9c6e13f6c7a.adoc
[source,console]
----
PUT metricbeat-2016.05.30/_doc/1?refresh
{"system.cpu.idle.pct": 0.908}
PUT metricbeat-2016.05.31/_doc/1?refresh
{"system.cpu.idle.pct": 0.105}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 1199: 973a3ff47fc4ce036ecd9bd363fef9f7.adoc
[source,console]
----
POST _reindex
{
  "source": {
    "index": "metricbeat-*"
  },
  "dest": {
    "index": "metricbeat"
  },
  "script": {
    "lang": "painless",
    "source": "ctx._index = 'metricbeat-' + (ctx._index.substring('metricbeat-'.length(), ctx._index.length())) + '-1'"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 1220: 3b04cc894e6a47d57983484010feac0c.adoc
[source,console]
----
GET metricbeat-2016.05.30-1/_doc/1
GET metricbeat-2016.05.31-1/_doc/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/reindex.asciidoc: line 1236: 8b33c9257041fabad8cea43fa049f98f.adoc
[source,console]
----
POST _reindex
{
  "max_docs": 10,
  "source": {
    "index": "twitter",
    "query": {
      "function_score" : {
        "query" : { "match_all": {} },
        "random_score" : {}
      }
    },
    "sort": "_score"    \<1>
  },
  "dest": {
    "index": "random_twitter"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 10: 4c9b1db368186091c1a660bcd52890b8.adoc
[source,console]
----
GET /twitter/_termvectors/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 20: a15ca7faa8ba282679396de3c7b90485.adoc
[source,console]
----
GET /twitter/_termvectors/1?fields=message
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 127: 587dd0c1aebbc1d93190bf117959cb73.adoc
[source,console]
----
PUT /twitter
{ "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "term_vector": "with_positions_offsets_payloads",
        "store" : true,
        "analyzer" : "fulltext_analyzer"
       },
       "fullname": {
        "type": "text",
        "term_vector": "with_positions_offsets_payloads",
        "analyzer" : "fulltext_analyzer"
      }
    }
  },
  "settings" : {
    "index" : {
      "number_of_shards" : 1,
      "number_of_replicas" : 0
    },
    "analysis": {
      "analyzer": {
        "fulltext_analyzer": {
          "type": "custom",
          "tokenizer": "whitespace",
          "filter": [
            "lowercase",
            "type_as_payload"
          ]
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 169: 3dbccd70f0a20ff7a8a2a4ee7ec406ed.adoc
[source,console]
----
PUT /twitter/_doc/1
{
  "fullname" : "John Doe",
  "text" : "twitter test test test "
}

PUT /twitter/_doc/2
{
  "fullname" : "Jane Doe",
  "text" : "Another twitter test ..."
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 189: 8dfecbb38a81fb5b42f63d6fe9bf9278.adoc
[source,console]
----
GET /twitter/_termvectors/1
{
  "fields" : ["text"],
  "offsets" : true,
  "payloads" : true,
  "positions" : true,
  "term_statistics" : true,
  "field_statistics" : true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 276: 487d12bb3e3036c4493dcbe43191b6f0.adoc
[source,console]
----
GET /twitter/_termvectors/1
{
  "fields" : ["text", "some_field_without_term_vectors"],
  "offsets" : true,
  "positions" : true,
  "term_statistics" : true,
  "field_statistics" : true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 301: 1f580df38ae517800d0c62d9648ebcb9.adoc
[source,console]
----
GET /twitter/_termvectors
{
  "doc" : {
    "fullname" : "John Doe",
    "text" : "twitter test test test"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 324: 8304a9c1ae8d0329b66ba57fb8263485.adoc
[source,console]
----
GET /twitter/_termvectors
{
  "doc" : {
    "fullname" : "John Doe",
    "text" : "twitter test test test"
  },
  "fields": ["fullname"],
  "per_field_analyzer" : {
    "fullname": "keyword"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/termvectors.asciidoc: line 390: ef3b210782fe58df252d0e805b8ef644.adoc
[source,console]
----
GET /imdb/_termvectors
{
    "doc": {
      "plot": "When wealthy industrialist Tony Stark is forced to build an armored suit after a life-threatening incident, he ultimately decides to use its technology to fight against evil."
    },
    "term_statistics" : true,
    "field_statistics" : true,
    "positions": false,
    "offsets": false,
    "filter" : {
      "max_num_terms" : 3,
      "min_term_freq" : 1,
      "min_doc_freq" : 1
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-termvectors.asciidoc: line 14: c6d18f08822463356b297f238c6650d9.adoc
[source,console]
----
POST /_mtermvectors
{
   "docs": [
      {
         "_index": "twitter",
         "_id": "2",
         "term_statistics": true
      },
      {
         "_index": "twitter",
         "_id": "1",
         "fields": [
            "message"
         ]
      }
   ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-termvectors.asciidoc: line 42: 2c8638acc208bd0a47403c1f054fde21.adoc
[source,console]
----
POST /twitter/_mtermvectors
{
   "docs": [
      {
         "_id": "2",
         "fields": [
            "message"
         ],
         "term_statistics": true
      },
      {
         "_id": "1"
      }
   ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-termvectors.asciidoc: line 65: f31eea58baf0dbd39823ff9100c9ce28.adoc
[source,console]
----
POST /twitter/_mtermvectors
{
    "ids" : ["1", "2"],
    "parameters": {
    	"fields": [
         	"message"
      	],
      	"term_statistics": true
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/multi-termvectors.asciidoc: line 85: 29840a67fdc13cd329ca2c69a2303e83.adoc
[source,console]
----
POST /_mtermvectors
{
   "docs": [
      {
         "_index": "twitter",
         "doc" : {
            "user" : "John Doe",
            "message" : "twitter test test test"
         }
      },
      {
         "_index": "twitter",
         "doc" : {
           "user" : "Jane Doe",
           "message" : "Another twitter test ..."
         }
      }
   ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/refresh.asciidoc: line 87: 92d343eb755971c44a939d0660bf5ac2.adoc
[source,console]
----
PUT /test/_doc/1?refresh
{"test": "test"}
PUT /test/_doc/2?refresh=true
{"test": "test"}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/refresh.asciidoc: line 99: 1070e59ba144cdf309fd9b2591612b95.adoc
[source,console]
----
PUT /test/_doc/3
{"test": "test"}
PUT /test/_doc/4?refresh=false
{"test": "test"}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/refresh.asciidoc: line 110: e4b2b5e0aaedf3cbbcde3d61eb1f13fc.adoc
[source,console]
----
PUT /test/_doc/4?refresh=wait_for
{"test": "test"}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/concurrency-control.asciidoc: line 24: cffc8b207f354beb6d76c8d334cab677.adoc
[source,console]
----
PUT products/_doc/1567
{
    "product" : "r2d2",
    "details" : "A resourceful astromech droid"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/concurrency-control.asciidoc: line 62: 278d5bfa1a01f91d5c84679ef1bca390.adoc
[source,console]
----
GET products/_doc/1567
----
|===
| php | csharp

| &cross; | &cross;
|===
=== docs/concurrency-control.asciidoc: line 103: ac24941027452bdafe82b4bd7edf9000.adoc
[source,console]
----
PUT products/_doc/1567?if_seq_no=362&if_primary_term=2
{
    "product" : "r2d2",
    "details" : "A resourceful astromech droid",
    "tags": ["droid"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== graph/explore.asciidoc: line 185: 8bf5ac11eb42e652023a685af4a45ae2.adoc
[source,console]
----
POST clicklogs/_graph/explore
{
    "query": { \<1>
        "match": {
            "query.raw": "midi"
        }
    },
    "vertices": [ \<2>
        {
            "field": "product"
        }
    ],
    "connections": {  \<3>
        "vertices": [
            {
                "field": "query.raw"
            }
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== graph/explore.asciidoc: line 290: 6a1a238984d74771420d150dec47fd91.adoc
[source,console]
----
POST clicklogs/_graph/explore
{
    "query": {
        "match": {
            "query.raw": "midi"
        }
    },
   "controls": {
      "use_significance": false,\<1>
      "sample_size": 2000,\<2>
      "timeout": 2000,\<3>
      "sample_diversity": {\<4>
         "field": "category.raw",
         "max_docs_per_value": 500
      }
   },
   "vertices": [
      {
         "field": "product",
         "size": 5,\<5>
         "min_doc_count": 10,\<6>
         "shard_min_doc_count": 3\<7>
      }
   ],
   "connections": {
      "query": {\<8>
         "bool": {
            "filter": [
               {
                  "range": {
                     "query_time": {
                        "gte": "2015-10-01 00:00:00"
                     }
                  }
               }
            ]
         }
      },
      "vertices": [
         {
            "field": "query.raw",
            "size": 5,
            "min_doc_count": 10,
            "shard_min_doc_count": 3
         }
      ]
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== graph/explore.asciidoc: line 377: fa82d86a046d67366cfe9ce65535e433.adoc
[source,console]
----
POST clicklogs/_graph/explore
{
   "vertices": [
      {
         "field": "product",
         "include": [ "1854873" ] \<1>
      }
   ],
   "connections": {
      "vertices": [
         {
            "field": "query.raw",
            "exclude": [ \<2>
               "midi keyboard",
               "midi",
               "synth"
            ]
         }
      ]
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/create-index.asciidoc: line 10: a9f021477e6c3d78a7907fbd96e16b5f.adoc
[source,console]
----
PUT twitter
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/create-index.asciidoc: line 39: be844338bc330b6d3939bac6ee57bbba.adoc
[source,console]
----
PUT twitter
{
    "settings" : {
        "index" : {
            "number_of_shards" : 3, \<1>
            "number_of_replicas" : 2 \<2>
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/create-index.asciidoc: line 57: 15377f76164fd88309f58097c7125ff2.adoc
[source,console]
----
PUT twitter
{
    "settings" : {
        "number_of_shards" : 3,
        "number_of_replicas" : 2
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/create-index.asciidoc: line 84: eaa809dc19ac4e9a4166ed46c6450c36.adoc
[source,console]
----
PUT test
{
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "properties" : {
            "field1" : { "type" : "text" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/create-index.asciidoc: line 110: ab8a4d5bd020a6923446a9bd9e402d16.adoc
[source,console]
----
PUT test
{
    "aliases" : {
        "alias_1" : {},
        "alias_2" : {
            "filter" : {
                "term" : {"user" : "kimchy" }
            },
            "routing" : "kimchy"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/create-index.asciidoc: line 160: f887b972ee522e0497f4b5289d33f764.adoc
[source,console]
----
PUT test
{
    "settings": {
        "index.write.wait_for_active_shards": "2"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/create-index.asciidoc: line 174: ef3fb50903876e4497249165ec493bb5.adoc
[source,console]
----
PUT test?wait_for_active_shards=2
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/delete-index.asciidoc: line 7: 98f14fddddea54a7d6149ab7b92e099d.adoc
[source,console]
----
DELETE /twitter
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-index.asciidoc: line 7: be8f28f31207b173de61be032fcf239c.adoc
[source,console]
----
GET /twitter
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/indices-exists.asciidoc: line 7: 2609ef78d52856aece101d28fc1e0701.adoc
[source,console]
----
HEAD twitter
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/open-close.asciidoc: line 26: 3a6b9143f3de6258d44ff7e0eb38d953.adoc
[source,console]
----
POST /my_index/_close
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/open-close.asciidoc: line 51: 37e6177bf8803971d30a4252498c07a4.adoc
[source,console]
----
POST /my_index/_open
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/shrink-index.asciidoc: line 38: 5e93f806cfd459149222b443b7992a51.adoc
[source,console]
----
PUT /my_source_index/_settings
{
  "settings": {
    "index.routing.allocation.require._name": "shrink_node_name", \<1>
    "index.blocks.write": true \<2>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/shrink-index.asciidoc: line 67: 0c44dc55c06e882de2947b5e9fa78acc.adoc
[source,console]
----
POST my_source_index/_shrink/my_target_index
{
  "settings": {
    "index.routing.allocation.require._name": null, \<1>
    "index.blocks.write": null \<2>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/shrink-index.asciidoc: line 111: 324a946abc2c86b5a71dd5cec6c765b3.adoc
[source,console]
----
POST my_source_index/_shrink/my_target_index
{
  "settings": {
    "index.number_of_replicas": 1,
    "index.number_of_shards": 1, \<1>
    "index.codec": "best_compression" \<2>
  },
  "aliases": {
    "my_search_indices": {}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/split-index.asciidoc: line 89: 76bcb71590ce6acebc8427c4ebcf9521.adoc
[source,console]
----
PUT my_source_index
{
  "settings": {
    "index.number_of_shards" : 1
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/split-index.asciidoc: line 105: 01c0e302f4fd5118faf5e34f4a010ebf.adoc
[source,console]
----
PUT /my_source_index/_settings
{
  "settings": {
    "index.blocks.write": true \<1>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/split-index.asciidoc: line 126: 290a366536875db313d1cbbed61cb9b6.adoc
[source,console]
----
POST my_source_index/_split/my_target_index
{
  "settings": {
    "index.number_of_shards": 2
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/split-index.asciidoc: line 161: d1a84808a9bca68c9bd7ede0a55a5a9f.adoc
[source,console]
----
POST my_source_index/_split/my_target_index
{
  "settings": {
    "index.number_of_shards": 5 \<1>
  },
  "aliases": {
    "my_search_indices": {}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clone-index.asciidoc: line 29: f95b3b415480b2fb4d90e5e576f74c90.adoc
[source,console]
----
PUT my_source_index
{
  "settings": {
    "index.number_of_shards" : 5
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clone-index.asciidoc: line 45: 01c0e302f4fd5118faf5e34f4a010ebf.adoc
[source,console]
----
PUT /my_source_index/_settings
{
  "settings": {
    "index.blocks.write": true \<1>
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clone-index.asciidoc: line 66: f17b925eace96b699996ad20ae7dd3e2.adoc
[source,console]
----
POST my_source_index/_clone/my_target_index
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clone-index.asciidoc: line 93: e405fe0c10af890c997d6be8d51aa940.adoc
[source,console]
----
POST my_source_index/_clone/my_target_index
{
  "settings": {
    "index.number_of_shards": 5 \<1>
  },
  "aliases": {
    "my_search_indices": {}
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/rollover-index.asciidoc: line 40: 593c11e8a9f88ec2629f2eb33cded9b7.adoc
[source,console]
----
PUT /logs-000001 \<1>
{
  "aliases": {
    "logs_write": {}
  }
}

# Add > 1000 documents to logs-000001

POST /logs_write/_rollover \<2>
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size":  "5gb"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/rollover-index.asciidoc: line 102: 659247d91f61ceb17cbcc60801fd3456.adoc
[source,console]
----
POST /my_alias/_rollover/my_new_index_name
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size": "5gb"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/rollover-index.asciidoc: line 126: 8f6ef669c09e0c8bfc2731f422471770.adoc
[source,console]
----
# PUT /<logs-{now/d}-1> with URI encoding:
PUT /%3Clogs-%7Bnow%2Fd%7D-1%3E \<1>
{
  "aliases": {
    "logs_write": {}
  }
}

PUT logs_write/_doc/1
{
  "message": "a dummy log"
}

POST logs_write/_refresh

# Wait for a day to pass

POST /logs_write/_rollover \<2>
{
  "conditions": {
    "max_docs":   "1"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/rollover-index.asciidoc: line 187: 03584e88046614ec7727db506d866f48.adoc
[source,console]
----
# GET /<logs-{now/d}-*>,<logs-{now/d-1d}-*>,<logs-{now/d-2d}-*>/_search
GET /%3Clogs-%7Bnow%2Fd%7D-*%3E%2C%3Clogs-%7Bnow%2Fd-1d%7D-*%3E%2C%3Clogs-%7Bnow%2Fd-2d%7D-*%3E/_search
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/rollover-index.asciidoc: line 206: 75f887596c4972bc679929ca996698f2.adoc
[source,console]
----
PUT /logs-000001
{
  "aliases": {
    "logs_write": {}
  }
}

POST /logs_write/_rollover
{
  "conditions" : {
    "max_age": "7d",
    "max_docs": 1000,
    "max_size": "5gb"
  },
  "settings": {
    "index.number_of_shards": 2
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/rollover-index.asciidoc: line 235: 9c5c59e10bb60f2fd8958d63de91826f.adoc
[source,console]
----
PUT /logs-000001
{
  "aliases": {
    "logs_write": {}
  }
}

POST /logs_write/_rollover?dry_run
{
  "conditions" : {
    "max_age": "7d",
    "max_docs": 1000,
    "max_size": "5gb"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/rollover-index.asciidoc: line 277: 9e9a3ad495e6305563a88dd4c74a5fda.adoc
[source,console]
----
PUT my_logs_index-000001
{
  "aliases": {
    "logs": { "is_write_index": true } \<1>
  }
}

PUT logs/_doc/1
{
  "message": "a dummy log"
}

POST logs/_refresh

POST /logs/_rollover
{
  "conditions": {
    "max_docs":   "1"
  }
}

PUT logs/_doc/2 \<2>
{
  "message": "a newer log"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/apis/freeze.asciidoc: line 43: ffea06f77c9df5720412aa06be964118.adoc
[source,console]
----
POST /my_index/_freeze
POST /my_index/_unfreeze
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/apis/unfreeze.asciidoc: line 42: ffea06f77c9df5720412aa06be964118.adoc
[source,console]
----
POST /my_index/_freeze
POST /my_index/_unfreeze
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/put-mapping.asciidoc: line 7: bf6e261ee84680c69d46faa9ee5b2f56.adoc
[source,console]
----
PUT twitter \<1>
{}

PUT twitter/_mapping \<2>
{
  "properties": {
    "email": {
      "type": "keyword"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/put-mapping.asciidoc: line 37: 88b2e29e3251e48bfb720fa83e9eb6a3.adoc
[source,console]
----
# Create the two indices
PUT twitter-1
PUT twitter-2

# Update both mappings
PUT /twitter-1,twitter-2/_mapping \<1>
{
  "properties": {
    "user_name": {
      "type": "text"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/put-mapping.asciidoc: line 70: 9943d52ba0f75fa0eb61e944ed7cbcd9.adoc
[source,console]
----
PUT my_index \<1>
{
  "mappings": {
    "properties": {
      "name": {
        "properties": {
          "first": {
            "type": "text"
          }
        }
      },
      "user_id": {
        "type": "keyword"
      }
    }
  }
}

PUT my_index/_mapping
{
  "properties": {
    "name": {
      "properties": {
        "last": { \<2>
          "type": "text"
        }
      }
    },
    "user_id": {
      "type": "keyword",
      "ignore_above": 100 \<3>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-mapping.asciidoc: line 8: a8fba09a46b2c3524428aa3259b7124f.adoc
[source,console]
----
GET /twitter/_mapping
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-mapping.asciidoc: line 28: cf02e3d8b371bd59f0224967c36330da.adoc
[source,console]
----
GET /twitter,kimchy/_mapping
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-mapping.asciidoc: line 39: 09cdd5ae8114c49886026fef8d00a19c.adoc
[source,console]
----
GET /_all/_mapping

GET /_mapping
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-field-mapping.asciidoc: line 11: ba3a852ba26b650bc23be38ecebda5e4.adoc
[source,console]
----
PUT publications
{
    "mappings": {
        "properties": {
            "id": { "type": "text" },
            "title":  { "type": "text"},
            "abstract": { "type": "text"},
            "author": {
                "properties": {
                    "id": { "type": "text" },
                    "name": { "type": "text" }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-field-mapping.asciidoc: line 35: 299900fb08da80fe455cf3f1bb7d62ee.adoc
[source,console]
----
GET publications/_mapping/field/title
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-field-mapping.asciidoc: line 72: 9af393bb38bf098d65d00e7637824f44.adoc
[source,console]
----
GET /twitter,kimchy/_mapping/field/message

GET /_all/_mapping/field/message,user.id

GET /_all/_mapping/field/*.id
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-field-mapping.asciidoc: line 91: ed3bdf4d6799b43526851e92b6a60c55.adoc
[source,console]
----
GET publications/_mapping/field/author.id,abstract,name
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-field-mapping.asciidoc: line 128: b61afb7ca29a11243232ffcc8b5a43cf.adoc
[source,console]
----
GET publications/_mapping/field/a*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/types-exists.asciidoc: line 9: 7ee31b1237a714c49760a1cc499cbd87.adoc
[source,console]
----
HEAD twitter/_mapping/tweet
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 16: b4392116f2cc57ce8064ccbad30318d5.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        { "add" : { "index" : "test1", "alias" : "alias1" } }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 30: 3653567181f43a5f64c74f934aa821c2.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        { "remove" : { "index" : "test1", "alias" : "alias1" } }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 46: 5a51ead3c0398ecb12bdb5456fd70ab9.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        { "remove" : { "index" : "test1", "alias" : "alias1" } },
        { "add" : { "index" : "test2", "alias" : "alias1" } }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 62: f0e21e03a07c8fa0209b0aafdb3791e6.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        { "add" : { "index" : "test1", "alias" : "alias1" } },
        { "add" : { "index" : "test2", "alias" : "alias1" } }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 77: 5f210f74725ea0c9265190346edfa246.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        { "add" : { "indices" : ["test1", "test2"], "alias" : "alias1" } }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 95: 6799d132c1c7ca3970763acde2337ef9.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        { "add" : { "index" : "test*", "alias" : "all_test_indices" } }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 115: de176bc4788ea286fff9e92418a43ea8.adoc
[source,console]
----
PUT test     \<1>
PUT test_2   \<2>
POST /_aliases
{
    "actions" : [
        { "add":  { "index": "test_2", "alias": "test" } },
        { "remove_index": { "index": "test" } }  \<3>
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 144: 23ab0f1023b1b2cd5cdf2a8f9ccfd57b.adoc
[source,console]
----
PUT /test1
{
  "mappings": {
    "properties": {
      "user" : {
        "type": "keyword"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 161: 7cf71671859be7c1ecf673396db377cd.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        {
            "add" : {
                 "index" : "test1",
                 "alias" : "alias2",
                 "filter" : { "term" : { "user" : "kimchy" } }
            }
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 191: bc1ad5cc6d3eab98e3ce01f209ba7094.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias1",
                 "routing" : "1"
            }
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 212: fa0f4485cd48f986b7ae8cbb24e331c4.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias2",
                 "search_routing" : "1,2",
                 "index_routing" : "2"
            }
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 239: 427f6b5c5376cbf0f71f242a60ca3d9e.adoc
[source,console]
----
GET /alias2/_search?q=user:kimchy&routing=2,3
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 262: f6d6889667f56b8f49d2858070571a6b.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias1",
                 "is_write_index" : true
            }
        },
        {
            "add" : {
                 "index" : "test2",
                 "alias" : "alias1"
            }
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 289: b0ec418bf416c62bed602b0a32a6d5f5.adoc
[source,console]
----
PUT /alias1/_doc/1
{
    "foo": "bar"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 302: 67bba546d835bca8f31df13e3587c348.adoc
[source,console]
----
GET /test/_doc/1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 312: ad79228630684d950fe9792a768d24c5.adoc
[source,console]
----
POST /_aliases
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias1",
                 "is_write_index" : false
            }
        }, {
            "add" : {
                 "index" : "test2",
                 "alias" : "alias1",
                 "is_write_index" : true
            }
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 369: 591adf1aaf016b9c382990923e37d099.adoc
[source,console]
----
PUT /logs_201305/_alias/2013
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 382: 890f659cfc10ff8171420809bdcf7c67.adoc
[source,console]
----
PUT /users
{
    "mappings" : {
        "properties" : {
            "user_id" : {"type" : "integer"}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 397: 83b2785e63357ab3ade51d8ec0c11917.adoc
[source,console]
----
PUT /users/_alias/user_12
{
    "routing" : "12",
    "filter" : {
        "term" : {
            "user_id" : 12
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 420: e47c3557fe8ccfc4286155c4b72e7c76.adoc
[source,console]
----
PUT /logs_20162801
{
    "mappings" : {
        "properties" : {
            "year" : {"type" : "integer"}
        }
    },
    "aliases" : {
        "current_day" : {},
        "2016" : {
            "filter" : {
                "term" : {"year" : 2016 }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 456: 72501997d053c29aa0b66a6bb6fb4105.adoc
[source,console]
----
DELETE /logs_20162801/_alias/current_day
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 495: 4c0ac18976e4d95d23b6890ea9129a7e.adoc
[source,console]
----
GET /logs_20162801/_alias/*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 524: 0e98b8cb47ce75336068c6d914b86495.adoc
[source,console]
----
GET /_alias/2016
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 553: 56aa1bff647d1db49dabf175c1e56919.adoc
[source,console]
----
GET /_alias/20*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/aliases.asciidoc: line 584: d8aa6ff25f7bb56e32d02df455103e53.adoc
[source,console]
----
HEAD /_alias/2016
HEAD /_alias/20*
HEAD /logs_20162801/_alias/*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/update-settings.asciidoc: line 11: 8653e76676de5d327201b77512afa3a0.adoc
[source,console]
----
PUT /twitter/_settings
{
    "index" : {
        "number_of_replicas" : 2
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/update-settings.asciidoc: line 25: 42744a175125df5be0ef77413bf8f608.adoc
[source,console]
----
PUT /twitter/_settings
{
    "index" : {
        "refresh_interval" : null
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/update-settings.asciidoc: line 51: dfac8d098b50aa0181161bcd17b38ef4.adoc
[source,console]
----
PUT /twitter/_settings
{
    "index" : {
        "refresh_interval" : "-1"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/update-settings.asciidoc: line 69: 0be2c28ee65384774b1e479b47dc3d92.adoc
[source,console]
----
PUT /twitter/_settings
{
    "index" : {
        "refresh_interval" : "1s"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/update-settings.asciidoc: line 83: fe5763d32955e8b65eb3048e97b1580c.adoc
[source,console]
----
POST /twitter/_forcemerge?max_num_segments=5
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/update-settings.asciidoc: line 101: ba0b4081c98f3387f76b77847c52ee9a.adoc
[source,console]
----
POST /twitter/_close

PUT /twitter/_settings
{
  "analysis" : {
    "analyzer":{
      "content":{
        "type":"custom",
        "tokenizer":"whitespace"
      }
    }
  }
}

POST /twitter/_open
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-settings.asciidoc: line 7: 20bdfd960e8d76c4329269e237792eb7.adoc
[source,console]
----
GET /twitter/_settings
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-settings.asciidoc: line 24: c538fc182f433e7141aee9d75c3e42d2.adoc
[source,console]
----
GET /twitter,kimchy/_settings

GET /_all/_settings

GET /log_2013_*/_settings
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/get-settings.asciidoc: line 42: 9748682dcfb24b7d4893f534f7040370.adoc
[source,console]
----
GET /log_2013_-*/_settings/index.number_*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 11: 06b4f0789d42d85d9af0780388feca83.adoc
[source,console]
----
GET _analyze
{
  "analyzer" : "standard",
  "text" : "this is a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 23: a158d87b517d0f7a3d14d8f4eb1c4036.adoc
[source,console]
----
GET _analyze
{
  "analyzer" : "standard",
  "text" : ["this is a test", "the second text"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 37: 373dd9448e2cba5dd8dbf3a1aded9025.adoc
[source,console]
----
GET _analyze
{
  "tokenizer" : "keyword",
  "filter" : ["lowercase"],
  "text" : "this is a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 48: 61354fd8aad2ad07230c39339a2cd318.adoc
[source,console]
----
GET _analyze
{
  "tokenizer" : "keyword",
  "filter" : ["lowercase"],
  "char_filter" : ["html_strip"],
  "text" : "this is a \<b>test</b>"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 64: 37b2f5dca993d15ed1711f3532a0f98d.adoc
[source,console]
----
GET _analyze
{
  "tokenizer" : "whitespace",
  "filter" : ["lowercase", {"type": "stop", "stopwords": ["a", "is", "this"]}],
  "text" : "this is a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 77: 9f67f5e5cd0355cebea6fb28d28a8b5f.adoc
[source,console]
----
GET analyze_sample/_analyze
{
  "text" : "this is a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 91: 5c448f76daf65093e1893705e705ab3b.adoc
[source,console]
----
GET analyze_sample/_analyze
{
  "analyzer" : "whitespace",
  "text" : "this is a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 104: ebc29a29598d16f3156cbbd0d1b0954a.adoc
[source,console]
----
GET analyze_sample/_analyze
{
  "field" : "obj1.field1",
  "text" : "this is a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 120: 441ba0438c9ab8e7ce3579277d98b9a7.adoc
[source,console]
----
GET analyze_sample/_analyze
{
  "normalizer" : "my_normalizer",
  "text" : "BaR"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 133: da69ca2ea849335e3a3ab9e15aa0e5f9.adoc
[source,console]
----
GET _analyze
{
  "filter" : ["lowercase"],
  "text" : "BaR"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 151: 98a28410e6c58919d7a700631138e775.adoc
[source,console]
----
GET _analyze
{
  "tokenizer" : "standard",
  "filter" : ["snowball"],
  "text" : "detailed output",
  "explain" : true,
  "attributes" : ["keyword"] \<1>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 227: cdc5155ae26dbaa25110a6a6a7e995fe.adoc
[source,console]
----
PUT analyze_sample
{
  "settings" : {
    "index.analyze.max_token_count" : 20000
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/analyze.asciidoc: line 239: 9f67f5e5cd0355cebea6fb28d28a8b5f.adoc
[source,console]
----
GET analyze_sample/_analyze
{
  "text" : "this is a test"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 18: e5f50b31f165462d883ecbff45f74985.adoc
[source,console]
----
PUT _template/template_1
{
  "index_patterns": ["te*", "bar*"],
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "_source": {
      "enabled": false
    },
    "properties": {
      "host_name": {
        "type": "keyword"
      },
      "created_at": {
        "type": "date",
        "format": "EEE MMM dd HH:mm:ss Z yyyy"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 54: 1b8caf0a6741126c6d0ad83b56fce290.adoc
[source,console]
----
PUT _template/template_1
{
    "index_patterns" : ["te*"],
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user" : "kimchy" }
            },
            "routing" : "kimchy"
        },
        "{index}-alias" : {} \<1>
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 87: 0f0fba0061d26602cd5f401ca4a19be3.adoc
[source,console]
----
DELETE /_template/template_1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 100: 02f65c6bab8f40bf3ce18160623d1870.adoc
[source,console]
----
GET /_template/template_1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 108: f1a1ce2bbd82b7b2a8df2796cd2f0c98.adoc
[source,console]
----
GET /_template/temp*
GET /_template/template_1,template_2
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 117: fd2d289e6b725fcc3cbe8fe7ffe02ea0.adoc
[source,console]
----
GET /_template
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 129: aea94bf2da993bfde1c73bd552eee2ae.adoc
[source,console]
----
HEAD _template/template_1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 153: b5f95bc097a201b29c7200fc8d3d31c1.adoc
[source,console]
----
PUT /_template/template_1
{
    "index_patterns" : ["*"],
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "_source" : { "enabled" : false }
    }
}

PUT /_template/template_2
{
    "index_patterns" : ["te*"],
    "order" : 1,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "_source" : { "enabled" : true }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 201: 9166cf38427d5cde5d2ec12a2012b669.adoc
[source,console]
----
PUT /_template/template_1
{
    "index_patterns" : ["*"],
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "version": 123
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/templates.asciidoc: line 219: 46658f00edc4865dfe472a392374cd0f.adoc
[source,console]
----
GET /_template/template_1?filter_path=*.version
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/stats.asciidoc: line 12: 78c4035e4fbf6851140660f6ed2a1fa5.adoc
[source,console]
----
GET /_stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/stats.asciidoc: line 20: e0b2f56c34e33ff52f8f9658be2f7ca1.adoc
[source,console]
----
GET /index1,index2/_stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/stats.asciidoc: line 78: 45c55ce8b2df147cd68b8f151a36a8d8.adoc
[source,console]
----
# Get back stats for merge and refresh only for all indices
GET /_stats/merge,refresh
# Get back stats for type1 and type2 documents for the my_index index
GET /my_index/_stats/indexing?types=type1,type2
# Get back just search stats for group1 and group2
GET /_stats/search?groups=group1,group2
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/segments.asciidoc: line 12: 940e8c2c7ff92d71f489bdb7183c1ce6.adoc
[source,console]
----
GET /test/_segments
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/segments.asciidoc: line 22: 975b4b92464d52068516aa2f0f955cc1.adoc
[source,console]
----
GET /test1,test2/_segments
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/segments.asciidoc: line 31: 6414b9276ba1c63898c3ff5cbe03c54e.adoc
[source,console]
----
GET /_segments
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/segments.asciidoc: line 129: 1b21d886f6e9619c73079d14581ccbe4.adoc
[source,console]
----
GET /test/_segments?verbose=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/recovery.asciidoc: line 10: 13ebcb01ebf1b5d2b5c52739db47e30c.adoc
[source,console]
----
GET index1,index2/_recovery?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/recovery.asciidoc: line 67: 5dfb23f6e36ef484f1d3271bae76a8d1.adoc
[source,console]
----
GET /_recovery?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/recovery.asciidoc: line 159: 5619103306878d58a058bce87c5bd82b.adoc
[source,console]
----
GET _recovery?human&detailed=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/shard-stores.asciidoc: line 19: 897f7ceaa110aa68e1f13ef7791810c5.adoc
[source,console]
----
# return information of only index test
GET /test/_shard_stores

# return information of only test1 and test2 indices
GET /test1,test2/_shard_stores

# return information of all indices
GET /_shard_stores
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/shard-stores.asciidoc: line 39: 3545261682af72f4bee57f2bac0a9590.adoc
[source,console]
----
GET /_shard_stores?status=green
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clearcache.asciidoc: line 8: 486eee2c8e75520f825fec08c1fbd67e.adoc
[source,console]
----
POST /twitter/_cache/clear
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clearcache.asciidoc: line 18: e4a86070ec20da0a7f604e17a12f482e.adoc
[source,console]
----
POST /twitter/_cache/clear?query=true      \<1>
POST /twitter/_cache/clear?request=true    \<2>
POST /twitter/_cache/clear?fielddata=true   \<3>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clearcache.asciidoc: line 35: 62069c4118d79daf9612b29659b16627.adoc
[source,console]
----
POST /twitter/_cache/clear?fields=foo,bar   \<1>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/clearcache.asciidoc: line 49: 389d962b8aa57186c7f94b83aea16c4b.adoc
[source,console]
----
POST /kimchy,elasticsearch/_cache/clear

POST /_cache/clear
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/flush.asciidoc: line 13: 7ef5a1dfd0c9db876c0dd03d8f0fe3a7.adoc
[source,console]
----
POST twitter/_flush
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/flush.asciidoc: line 42: 191c0396ef10ca408b41bbb4c7645ee7.adoc
[source,console]
----
POST kimchy,elasticsearch/_flush

POST _flush
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/flush.asciidoc: line 75: 94819e06e05de52c23b285346205ddaf.adoc
[source,console]
----
GET twitter/_stats?filter_path=**.commit&level=shards \<1>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/flush.asciidoc: line 143: da2658cc33e1a75c4b0fe96eb62740a7.adoc
[source,console]
----
POST twitter/_flush/synced
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/flush.asciidoc: line 239: fc079cd6d867c5d65b7a28de197292a4.adoc
[source,console]
----
POST kimchy,elasticsearch/_flush/synced

POST _flush/synced
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/refresh.asciidoc: line 11: c2ac42934e4b76197032b2fc429e317d.adoc
[source,console]
----
POST /twitter/_refresh
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/refresh.asciidoc: line 24: 104c5a6faa3052d18567c1ae57278638.adoc
[source,console]
----
POST /kimchy,elasticsearch/_refresh

POST /_refresh
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/forcemerge.asciidoc: line 24: ca16c1f060ca653ea8fbca445359f78f.adoc
[source,console]
----
POST /twitter/_forcemerge
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/forcemerge.asciidoc: line 36: 64d97cda667be166f3df49e87e713560.adoc
[source,console]
----
POST /logs-000001/_forcemerge?max_num_segments=1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/forcemerge.asciidoc: line 68: e5ee4be6e45c99c270b2c3fdf1a061ab.adoc
[source,console]
----
POST /kimchy/_forcemerge?only_expunge_deletes=false&max_num_segments=100&flush=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/forcemerge.asciidoc: line 86: 9e6b6b784ba8931563dd04a5922098ba.adoc
[source,console]
----
POST /kimchy,elasticsearch/_forcemerge

POST /_forcemerge
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/put-lifecycle.asciidoc: line 46: daa2d4811bec05ac4546b66bd5a615c7.adoc
[source,console]
----
PUT _ilm/policy/my_policy
{
  "policy": {
    "phases": {
      "warm": {
        "min_age": "10d",
        "actions": {
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/put-lifecycle.asciidoc: line 74: bc5fcc40c29087a0df7b5405bb70de5c.adoc
[source,console]
----
{
  "acknowledged": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/get-lifecycle.asciidoc: line 71: 2e7f4b9be999422a12abb680572b13c8.adoc
[source,console]
----
GET _ilm/policy/my_policy
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/get-lifecycle.asciidoc: line 81: c4c3838c118e037f476ff6eca050fddd.adoc
[source,console]
----
{
  "my_policy": {
    "version": 1, \<1>
    "modified_date": 82392349, \<2>
    "policy": {
      "phases": {
        "warm": {
          "min_age": "10d",
          "actions": {
            "forcemerge": {
              "max_num_segments": 1
            }
          }
        },
        "delete": {
          "min_age": "30d",
          "actions": {
            "delete": {}
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/delete-lifecycle.asciidoc: line 71: af517b6936fa41d124d68b107b2efdc3.adoc
[source,console]
----
DELETE _ilm/policy/my_policy
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/delete-lifecycle.asciidoc: line 80: bc5fcc40c29087a0df7b5405bb70de5c.adoc
[source,console]
----
{
  "acknowledged": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/move-to-step.asciidoc: line 88: e3c5f93b3c85e8519f801defc20b0ce0.adoc
[source,console]
----
POST _ilm/move/my_index
{
  "current_step": { \<1>
    "phase": "new",
    "action": "complete",
    "name": "complete"
  },
  "next_step": { \<2>
    "phase": "warm",
    "action": "forcemerge",
    "name": "forcemerge"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/move-to-step.asciidoc: line 111: bc5fcc40c29087a0df7b5405bb70de5c.adoc
[source,console]
----
{
  "acknowledged": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/remove-policy-from-index.asciidoc: line 78: 8bec5a437f4aea6f3f897c9df2ce2442.adoc
[source,console]
----
POST my_index/_ilm/remove
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/remove-policy-from-index.asciidoc: line 87: 7464040de4facd0800a50d9488d41808.adoc
[source,console]
----
{
  "has_failures" : false,
  "failed_indexes" : []
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/get-status.asciidoc: line 38: 182df084f028479ecbe8d7648ddad892.adoc
[source,console]
----
GET _ilm/status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/get-status.asciidoc: line 46: 99e0bec31e49636bc0053ac66bc29352.adoc
[source,console]
----
{
  "operation_mode": "RUNNING"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/explain.asciidoc: line 92: 0f6fa3a706a7c17858d3dbe329839ea6.adoc
[source,console]
----
GET my_index/_ilm/explain
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/explain.asciidoc: line 102: bc42b1c517ff1fc6ad4371bae23d1c57.adoc
[source,console]
----
{
  "indices": {
    "my_index": {
      "index": "my_index",
      "managed": true, \<1>
      "policy": "my_policy", \<2>
      "lifecycle_date_millis": 1538475653281, \<3>
      "age": "15s", \<4>
      "phase": "new",
      "phase_time_millis": 1538475653317, \<5>
      "action": "complete",
      "action_time_millis": 1538475653317, \<6>
      "step": "complete",
      "step_time_millis": 1538475653317 \<7>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/explain.asciidoc: line 138: 9cf677738535149f0cdb1796ddafbc8a.adoc
[source,console]
----
{
  "indices": {
    "test-000069": {
      "index": "test-000069",
      "managed": true,
      "policy": "my_lifecycle3",
      "lifecycle_date_millis": 1538475653281,
      "lifecycle_date": "2018-10-15T13:45:21.981Z",
      "age": "25.14s",
      "phase": "hot",
      "phase_time_millis": 1538475653317,
      "phase_time": "2018-10-15T13:45:22.577Z",
      "action": "rollover",
      "action_time_millis": 1538475653317,
      "action_time": "2018-10-15T13:45:22.577Z",
      "step": "attempt-rollover",
      "step_time_millis": 1538475653317,
      "step_time": "2018-10-15T13:45:22.577Z",
      "phase_execution": {
        "policy": "my_lifecycle3",
        "phase_definition": { \<1>
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_age": "30s"
            }
          }
        },
        "version": 3, \<2>
        "modified_date": "2018-10-15T13:21:41.576Z", \<3>
        "modified_date_in_millis": 1539609701576 \<4>
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/explain.asciidoc: line 187: 0a6dcb918e7d6354c4709505f22a786f.adoc
[source,console]
----
{
  "indices": {
    "test-000020": {
      "index": "test-000020",
      "managed": true,
      "policy": "my_lifecycle3",
      "lifecycle_date_millis": 1538475653281,
      "lifecycle_date": "2018-10-15T13:45:21.981Z",
      "age": "4.12m",
      "phase": "warm",
      "phase_time_millis": 1538475653317,
      "phase_time": "2018-10-15T13:45:22.577Z",
      "action": "allocate",
      "action_time_millis": 1538475653317,
      "action_time": "2018-10-15T13:45:22.577Z",
      "step": "check-allocation",
      "step_time_millis": 1538475653317,
      "step_time": "2018-10-15T13:45:22.577Z",
      "step_info": { \<1>
        "message": "Waiting for all shard copies to be active",
        "shards_left_to_allocate": -1,
        "all_shards_active": false,
        "actual_replicas": 2
      },
      "phase_execution": {
        "policy": "my_lifecycle3",
        "phase_definition": {
          "min_age": "0ms",
          "actions": {
            "allocate": {
              "number_of_replicas": 2,
              "include": {
                "box_type": "warm"
              },
              "exclude": {},
              "require": {}
            },
            "forcemerge": {
              "max_num_segments": 1
            }
          }
        },
        "version": 2,
        "modified_date": "2018-10-15T13:20:02.489Z",
        "modified_date_in_millis": 1539609602489
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/explain.asciidoc: line 248: f5fc9eb5e7300853a3b93236c72e70e3.adoc
[source,console]
----
{
  "indices": {
    "test-000056": {
      "index": "test-000056",
      "managed": true,
      "policy": "my_lifecycle3",
      "lifecycle_date_millis": 1538475653281,
      "lifecycle_date": "2018-10-15T13:45:21.981Z",
      "age": "50.1d",
      "phase": "hot",
      "phase_time_millis": 1538475653317,
      "phase_time": "2018-10-15T13:45:22.577Z",
      "action": "rollover",
      "action_time_millis": 1538475653317,
      "action_time": "2018-10-15T13:45:22.577Z",
      "step": "ERROR",
      "step_time_millis": 1538475653317,
      "step_time": "2018-10-15T13:45:22.577Z",
      "failed_step": "attempt-rollover", \<1>
      "step_info": { \<2>
        "type": "resource_already_exists_exception",
        "reason": "index [test-000057/H7lF9n36Rzqa-KfKcnGQMg] already exists",
        "index_uuid": "H7lF9n36Rzqa-KfKcnGQMg",
        "index": "test-000057"
      },
      "phase_execution": {
        "policy": "my_lifecycle3",
        "phase_definition": {
          "min_age": "0ms",
          "actions": {
            "rollover": {
              "max_age": "30s"
            }
          }
        },
        "version": 3,
        "modified_date": "2018-10-15T13:21:41.576Z",
        "modified_date_in_millis": 1539609701576
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/start.asciidoc: line 72: 72ae3851160fcf02b8e2cdfd4e57d238.adoc
[source,console]
----
POST _ilm/start
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/start.asciidoc: line 81: bc5fcc40c29087a0df7b5405bb70de5c.adoc
[source,console]
----
{
  "acknowledged": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/stop.asciidoc: line 75: 585a34ad79aee16678b37da785933ac8.adoc
[source,console]
----
POST _ilm/stop
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/stop.asciidoc: line 84: bc5fcc40c29087a0df7b5405bb70de5c.adoc
[source,console]
----
{
  "acknowledged": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rest-api/info.asciidoc: line 45: 9054187cbab5c9e1c4ca2a4dba6a5db0.adoc
[source,console]
----
GET /_xpack
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rest-api/info.asciidoc: line 145: b11a0675e49df0709be693297ca73a2c.adoc
[source,console]
----
GET /_xpack?categories=build,features
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rest-api/info.asciidoc: line 153: 4ed946065faa92f9950f04e402676a97.adoc
[source,console]
----
GET /_xpack?human=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/delete-license.asciidoc: line 35: 4f8a4ad49e2bca6784c88ede18a1a709.adoc
[source,console]
----
DELETE /_license
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/get-license.asciidoc: line 48: 11c395d1649733bcab853fe31ec393b2.adoc
[source,console]
----
GET /_license
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/get-trial-status.asciidoc: line 43: 88cf60d3310a56d8ae12704abc05b565.adoc
[source,console]
----
GET /_license/trial_status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/start-trial.asciidoc: line 47: 37f1f2e75ed95308ae436bbbb8d5645e.adoc
[source,console]
----
POST /_license/start_trial?acknowledge=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/get-basic-status.asciidoc: line 37: f92d2f5018a8843ffbb56ade15f84406.adoc
[source,console]
----
GET /_license/basic_status
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/start-basic.asciidoc: line 43: 8699d35269a47ba867fa8cc766287413.adoc
[source,console]
----
POST /_license/start_basic
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/start-basic.asciidoc: line 64: f58fd031597e2c3df78bf0efd07206e3.adoc
[source,console]
----
POST /_license/start_basic?acknowledge=true
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/update-license.asciidoc: line 59: 4fb399ee372ae8837cbb9aa66be30f62.adoc
[source,console]
----
POST /_license
{
  "licenses": [
    {
      "uid":"893361dc-9749-4997-93cb-802e3d7fa4xx",
      "type":"basic",
      "issue_date_in_millis":1411948800000,
      "expiry_date_in_millis":1914278399999,
      "max_nodes":1,
      "issued_to":"issuedTo",
      "issuer":"issuer",
      "signature":"xx"
    }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== licensing/update-license.asciidoc: line 136: efe30c2a1611afdc85ae522e4f5a457b.adoc
[source,console]
----
POST /_license?acknowledge=true
{
  "licenses": [
    {
      "uid":"893361dc-9749-4997-93cb-802e3d7fa4xx",
      "type":"basic",
      "issue_date_in_millis":1411948800000,
      "expiry_date_in_millis":1914278399999,
      "max_nodes":1,
      "issued_to":"issuedTo",
      "issuer":"issuer",
      "signature":"xx"
    }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/post-calendar-event.asciidoc: line 64: c067182d385f59ce5952fb9a716fbf05.adoc
[source,console]
----
POST _ml/calendars/planned-outages/events
{
  "events" : [
    {"description": "event 1", "start_time": 1513641600000, "end_time": 1513728000000},
    {"description": "event 2", "start_time": 1513814400000, "end_time": 1513900800000},
    {"description": "event 3", "start_time": 1514160000000, "end_time": 1514246400000}
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/put-calendar-job.asciidoc: line 37: 1b2ab75d3c8064fac6ecc63104396c02.adoc
[source,console]
----
PUT _ml/calendars/planned-outages/jobs/total-requests
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/close-job.asciidoc: line 102: cf6e928ae9efc2b9f59aa1ccb4605bee.adoc
[source,console]
----
POST _ml/anomaly_detectors/total-requests/_close
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/put-job.asciidoc: line 100: 9c11e238772d67dbc9d273776de9916c.adoc
[source,console]
----
PUT _ml/anomaly_detectors/total-requests
{
  "description" : "Total sum of requests",
  "analysis_config" : {
    "bucket_span":"10m",
    "detectors": [
      {
        "detector_description": "Sum of total",
        "function": "sum",
        "field_name": "total"
      }
    ]
  },
  "data_description" : {
    "time_field":"timestamp",
    "time_format": "epoch_ms"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/put-calendar.asciidoc: line 45: e61b5abe85000cc954a42e2cd74f3a26.adoc
[source,console]
----
PUT _ml/calendars/planned-outages
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/put-datafeed.asciidoc: line 113: 23067c5e8da958fa4d914f3b5c9bf607.adoc
[source,console]
----
PUT _ml/datafeeds/datafeed-total-requests
{
  "job_id": "total-requests",
  "indices": ["server-metrics"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/put-filter.asciidoc: line 53: b4aec2a1d353852507c091bdb629b765.adoc
[source,console]
----
PUT _ml/filters/safe_domains
{
  "description": "A list of safe domains",
  "items": ["*.google.com", "wikipedia.org"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-calendar.asciidoc: line 41: 63893e7e9479a9b60db71dcddcc79aaf.adoc
[source,console]
----
DELETE _ml/calendars/planned-outages
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-datafeed.asciidoc: line 46: 8a12cd824404d74f098d854716a26899.adoc
[source,console]
----
DELETE _ml/datafeeds/datafeed-total-requests
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-calendar-event.asciidoc: line 47: f6982ff80b9a64cd5fcac5b20908c906.adoc
[source,console]
----
DELETE _ml/calendars/planned-outages/events/LS8LJGEBMTCMA-qz49st
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-filter.asciidoc: line 42: 8c5d48252cd6d1ee26a2bb817f89c78e.adoc
[source,console]
----
DELETE _ml/filters/safe_domains
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-forecast.asciidoc: line 71: eb4e43b47867b54214a8630172dd0e21.adoc
[source,console]
----
DELETE _ml/anomaly_detectors/total-requests/_forecast/_all
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-job.asciidoc: line 63: 3ac8b5234e9d53859245cf8ab0094ca5.adoc
[source,console]
----
DELETE _ml/anomaly_detectors/total-requests
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-job.asciidoc: line 81: ccec66fb20d5ede6c691e0890cfe402a.adoc
[source,console]
----
DELETE _ml/anomaly_detectors/total-requests?wait_for_completion=false
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-calendar-job.asciidoc: line 40: 1b0b29e5cd7550c648d0892378e93804.adoc
[source,console]
----
DELETE _ml/calendars/planned-outages/jobs/total-requests
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-snapshot.asciidoc: line 45: 1e08e054c761353f99211cd18e8ca47b.adoc
[source,console]
----
DELETE _ml/anomaly_detectors/farequote/model_snapshots/1491948163
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/delete-expired-data.asciidoc: line 36: f2f09bc4723805c7aaabdc83c55100fa.adoc
[source,console]
----
DELETE _ml/_delete_expired_data
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/find-file-structure.asciidoc: line 226: 7a145f2c4ad1c3c9fea24afeadb847ef.adoc
[source,console]
----
POST _ml/find_file_structure
{"name": "Leviathan Wakes", "author": "James S.A. Corey", "release_date": "2011-06-02", "page_count": 561}
{"name": "Hyperion", "author": "Dan Simmons", "release_date": "1989-05-26", "page_count": 482}
{"name": "Dune", "author": "Frank Herbert", "release_date": "1965-06-01", "page_count": 604}
{"name": "Dune Messiah", "author": "Frank Herbert", "release_date": "1969-10-15", "page_count": 331}
{"name": "Children of Dune", "author": "Frank Herbert", "release_date": "1976-04-21", "page_count": 408}
{"name": "God Emperor of Dune", "author": "Frank Herbert", "release_date": "1981-05-28", "page_count": 454}
{"name": "Consider Phlebas", "author": "Iain M. Banks", "release_date": "1987-04-23", "page_count": 471}
{"name": "Pandora's Star", "author": "Peter F. Hamilton", "release_date": "2004-03-02", "page_count": 768}
{"name": "Revelation Space", "author": "Alastair Reynolds", "release_date": "2000-03-15", "page_count": 585}
{"name": "A Fire Upon the Deep", "author": "Vernor Vinge", "release_date": "1992-06-01", "page_count": 613}
{"name": "Ender's Game", "author": "Orson Scott Card", "release_date": "1985-06-01", "page_count": 324}
{"name": "1984", "author": "George Orwell", "release_date": "1985-06-01", "page_count": 328}
{"name": "Fahrenheit 451", "author": "Ray Bradbury", "release_date": "1953-10-15", "page_count": 227}
{"name": "Brave New World", "author": "Aldous Huxley", "release_date": "1932-06-01", "page_count": 268}
{"name": "Foundation", "author": "Isaac Asimov", "release_date": "1951-06-01", "page_count": 224}
{"name": "The Giver", "author": "Lois Lowry", "release_date": "1993-04-26", "page_count": 208}
{"name": "Slaughterhouse-Five", "author": "Kurt Vonnegut", "release_date": "1969-06-01", "page_count": 275}
{"name": "The Hitchhiker's Guide to the Galaxy", "author": "Douglas Adams", "release_date": "1979-10-12", "page_count": 180}
{"name": "Snow Crash", "author": "Neal Stephenson", "release_date": "1992-06-01", "page_count": 470}
{"name": "Neuromancer", "author": "William Gibson", "release_date": "1984-07-01", "page_count": 271}
{"name": "The Handmaid's Tale", "author": "Margaret Atwood", "release_date": "1985-06-01", "page_count": 311}
{"name": "Starship Troopers", "author": "Robert A. Heinlein", "release_date": "1959-12-01", "page_count": 335}
{"name": "The Left Hand of Darkness", "author": "Ursula K. Le Guin", "release_date": "1969-06-01", "page_count": 304}
{"name": "The Moon is a Harsh Mistress", "author": "Robert A. Heinlein", "release_date": "1966-04-01", "page_count": 288}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/flush-job.asciidoc: line 72: 6a9931992ce1b0c2c2c82635d32f32cd.adoc
[source,console]
----
POST _ml/anomaly_detectors/total-requests/_flush
{
  "calc_interim": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/flush-job.asciidoc: line 99: 3033133e8675524fd8f969db0625b62e.adoc
[source,console]
----
POST _ml/anomaly_detectors/total-requests/_flush
{
  "advance_time": "1514804400"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/forecast.asciidoc: line 62: 5bed6929ccc86ef27f9468cf844169c8.adoc
[source,console]
----
POST _ml/anomaly_detectors/total-requests/_forecast
{
  "duration": "10d"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-bucket.asciidoc: line 93: 2c7fce4025e8e429e1ae8d50f5eb4b88.adoc
[source,console]
----
GET _ml/anomaly_detectors/it-ops-kpi/results/buckets
{
  "anomaly_score": 80,
  "start": "1454530200001"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-calendar.asciidoc: line 72: 5fca6671bc8eaddc44ac488d1c3c6909.adoc
[source,console]
----
GET _ml/calendars/planned-outages
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-category.asciidoc: line 70: e8f1c9ee003d115ec8f55e57990df6e4.adoc
[source,console]
----
GET _ml/anomaly_detectors/esxi_log/results/categories
{
  "page":{
    "size": 1
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-datafeed.asciidoc: line 89: d7b3862eb61595fc02d64d5f6ed60c88.adoc
[source,console]
----
GET _ml/datafeeds/datafeed-total-requests
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-datafeed-stats.asciidoc: line 93: 62ef8873988dc63f37ed93114072e4a8.adoc
[source,console]
----
GET _ml/datafeeds/datafeed-total-requests/_stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-influencer.asciidoc: line 77: c644b2026414830b6265f7a14dd37ce9.adoc
[source,console]
----
GET _ml/anomaly_detectors/it_ops_new_kpi/results/influencers
{
  "sort": "influencer_score",
  "desc": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-job.asciidoc: line 86: 29278b6d24dd544da186019301dd4f40.adoc
[source,console]
----
GET _ml/anomaly_detectors/total-requests
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-job-stats.asciidoc: line 86: e3d706e32f9bd1496072beb46e4c488e.adoc
[source,console]
----
GET _ml/anomaly_detectors/farequote/_stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-ml-info.asciidoc: line 41: 4d7c0b52d3c0a084157428624c543c90.adoc
[source,console]
----
GET _ml/info
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-snapshot.asciidoc: line 70: 51393160fedca39ea733488044d06f8e.adoc
[source,console]
----
GET _ml/anomaly_detectors/farequote/model_snapshots
{
  "start": "1491852977000"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-overall-buckets.asciidoc: line 111: e48e7da65c2b32d724fd7e3bfa175c6f.adoc
[source,console]
----
GET _ml/anomaly_detectors/job-*/results/overall_buckets
{
  "overall_score": 80,
  "start": "1403532000000"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-overall-buckets.asciidoc: line 157: 405db6f3a01eceacfaa8b0ed3e4b3ac2.adoc
[source,console]
----
GET _ml/anomaly_detectors/job-*/results/overall_buckets
{
  "top_n": 2,
  "overall_score": 50.0,
  "start": "1403532000000"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-calendar-event.asciidoc: line 90: 39d6f575c9458d9c941364dfd0493fa0.adoc
[source,console]
----
GET _ml/calendars/planned-outages/events
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-filter.asciidoc: line 70: 800861c15bb33ca01a46fb97dde7537a.adoc
[source,console]
----
GET _ml/filters/safe_domains
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/get-record.asciidoc: line 77: 16337a7169486ffea5bfe185b6426b9c.adoc
[source,console]
----
GET _ml/anomaly_detectors/it-ops-kpi/results/records
{
  "sort": "record_score",
  "desc": true,
  "start": "1454944100000"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/open-job.asciidoc: line 56: 72cb058a415b56a8964c05195114b5c0.adoc
[source,console]
----
POST _ml/anomaly_detectors/total-requests/_open
{
  "timeout": "35m"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/preview-datafeed.asciidoc: line 52: 27b20b345329fc72d8a0c7d440596ea1.adoc
[source,console]
----
GET _ml/datafeeds/datafeed-farequote/_preview
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/revert-snapshot.asciidoc: line 63: f28c58902bdefd9e2b36001e8d682d35.adoc
[source,console]
----
POST
_ml/anomaly_detectors/it_ops_new_kpi/model_snapshots/1491856080/_revert
{
  "delete_intervening_results": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/set-upgrade-mode.asciidoc: line 78: ae4aa368617637a390074535df86e64b.adoc
[source,console]
----
POST _ml/set_upgrade_mode?enabled=true&timeout=10m
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/set-upgrade-mode.asciidoc: line 103: 8e9e7dc5fad2b2b8e74ab4dc225d9c53.adoc
[source,console]
----
POST _ml/set_upgrade_mode?enabled=false&timeout=10m
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/start-datafeed.asciidoc: line 100: c85f09d9a0622d32788bd56b0a008592.adoc
[source,console]
----
POST _ml/datafeeds/datafeed-total-requests/_start
{
  "start": "2017-04-07T18:22:16Z"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/stop-datafeed.asciidoc: line 86: 9b1e808ac4cca788990b497fb59ba455.adoc
[source,console]
----
POST _ml/datafeeds/datafeed-total-requests/_stop
{
  "timeout": "30s"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/update-datafeed.asciidoc: line 106: df6d5b5f8e1c8785503269ccb7b34763.adoc
[source,console]
----
POST _ml/datafeeds/datafeed-total-requests/_update
{
  "query": {
    "term": {
      "level": "error"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/update-filter.asciidoc: line 48: 4d21725453955582ff12b4a1104aa7b6.adoc
[source,console]
----
POST _ml/filters/safe_domains/_update
{
  "description": "Updated list of domains",
  "add_items": ["*.myorg.com"],
  "remove_items": ["wikipedia.org"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/update-job.asciidoc: line 105: d51232b6f1be5730519ca7733b3232df.adoc
[source,console]
----
POST _ml/anomaly_detectors/total-requests/_update
{
  "description":"An updated job",
  "groups": ["group1","group2"],
  "model_plot_config": {
    "enabled": true
  },
  "analysis_limits": {
    "model_memory_limit": "1024mb"
  },
  "renormalization_window_days": 30,
  "background_persist_interval": "2h",
  "model_snapshot_retention_days": 7,
  "results_retention_days": 60,
  "custom_settings": {
    "custom_urls" : [{
      "url_name" : "Lookup IP",
      "url_value" : "http://geoiplookup.net/ip/$clientip$"
    }]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/update-snapshot.asciidoc: line 54: 3b9c54604535d97e8368d47148aecc6f.adoc
[source,console]
----
POST
_ml/anomaly_detectors/it_ops_new_logs/model_snapshots/1491852978/_update
{
  "description": "Snapshot 1",
  "retain": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/put-dfanalytics.asciidoc: line 94: 80877b0ab3babd4f623becbe73c447fb.adoc
[source,console]
----
PUT _ml/data_frame/analytics/loganalytics
{
  "source": {
    "index": "logdata"
  },
  "dest": {
    "index": "logdata_out"
  },
  "analysis": {
    "outlier_detection": {
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/delete-dfanalytics.asciidoc: line 38: 1c8b6768c4eefc76fcb38708152f561b.adoc
[source,console]
----
DELETE _ml/data_frame/analytics/loganalytics
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/evaluate-dfanalytics.asciidoc: line 72: eae68412d998bc0f65b09711f007a4b7.adoc
[source,console]
----
POST _ml/data_frame/_evaluate
{
  "index": "my_analytics_dest_index",
  "evaluation": {
    "binary_soft_classification": {
      "actual_field": "is_outlier",
      "predicted_probability_field": "ml.outlier_score"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/estimate-memory-usage-dfanalytics.asciidoc: line 58: 2749068ab33cac0ec113d479bc282368.adoc
[source,console]
----
POST _ml/data_frame/analytics/_estimate_memory_usage
{
  "data_frame_analytics_config": {
    "source": {
      "index": "logdata"
    },
    "analysis": {
      "outlier_detection": {}
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/get-dfanalytics.asciidoc: line 94: 5ccfd9f4698dcd7cdfbc6bad60081aab.adoc
[source,console]
----
GET _ml/data_frame/analytics/loganalytics
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/get-dfanalytics-stats.asciidoc: line 87: cfc52956b005d57111c49dfe1735634e.adoc
[source,console]
----
GET _ml/data_frame/analytics/loganalytics/_stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/start-dfanalytics.asciidoc: line 50: 1a3a4b8a4bfee4ab84ddd13d8835f560.adoc
[source,console]
----
POST _ml/data_frame/analytics/loganalytics/_start
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/stop-dfanalytics.asciidoc: line 72: db19cc7a26ca80106d86d688f4be67a8.adoc
[source,console]
----
POST _ml/data_frame/analytics/loganalytics/_stop
----
|===
| php | csharp

| &cross; | &cross;
|===
=== migration/apis/deprecation.asciidoc: line 40: 135819da3a4bde684357c57a49ad8e85.adoc
[source,console]
----
GET /_migration/deprecations
----
|===
| php | csharp

| &cross; | &cross;
|===
=== migration/apis/deprecation.asciidoc: line 119: 69f8b0f2a9ba47e11f363d788cee9d6d.adoc
[source,console]
----
GET /logstash-*/_migration/deprecations
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/apis/reload-analyzers.asciidoc: line 15: fd25ae98c5c8be66fdd5e6ef32815ff5.adoc
[source,console]
----
PUT /my_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "analyzer" : {
                    "my_synonyms" : {
                        "tokenizer" : "whitespace",
                        "filter" : ["synonym"]
                    }
                },
                "filter" : {
                    "synonym" : {
                        "type" : "synonym",
                        "synonyms_path" : "analysis/synonym.txt",
                        "updateable" : true \<1>
                    }
                }
            }
        }
    },
    "mappings": {
        "properties": {
            "text": {
                "type": "text",
                "analyzer" : "standard",
                "search_analyzer": "my_synonyms" \<2>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== indices/apis/reload-analyzers.asciidoc: line 68: 7554da505cc27f6bd0d028b66e85f4a5.adoc
[source,console]
----
POST /my_index/_reload_search_analyzers
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/put-job.asciidoc: line 74: 2d20c42e9664febeccaff61581605cbe.adoc
[source,console]
----
PUT _rollup/job/sensor
{
    "index_pattern": "sensor-*",
    "rollup_index": "sensor_rollup",
    "cron": "*/30 * * * * ?",
    "page_size" :1000,
    "groups" : {
      "date_histogram": {
        "field": "timestamp",
        "fixed_interval": "1h",
        "delay": "7d"
      },
      "terms": {
        "fields": ["node"]
      }
    },
    "metrics": [
        {
            "field": "temperature",
            "metrics": ["min", "max", "sum"]
        },
        {
            "field": "voltage",
            "metrics": ["avg"]
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/delete-job.asciidoc: line 80: 94246f45025ed394cd6415ed8d7a0588.adoc
[source,console]
----
DELETE _rollup/job/sensor
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/get-job.asciidoc: line 83: d095b422d9803c02b62c01adffc85376.adoc
[source,console]
----
GET _rollup/job/sensor
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/get-job.asciidoc: line 158: 6d13e0721a7aac00adcdc5fe77198300.adoc
[source,console]
----
PUT _rollup/job/sensor2 \<1>
{
    "index_pattern": "sensor-*",
    "rollup_index": "sensor_rollup",
    "cron": "*/30 * * * * ?",
    "page_size" :1000,
    "groups" : {
      "date_histogram": {
        "field": "timestamp",
        "fixed_interval": "1h",
        "delay": "7d"
      },
      "terms": {
        "fields": ["node"]
      }
    },
    "metrics": [
        {
            "field": "temperature",
            "metrics": ["min", "max", "sum"]
        },
        {
            "field": "voltage",
            "metrics": ["avg"]
        }
    ]
}

GET _rollup/job/_all \<2>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-caps.asciidoc: line 55: 2d20c42e9664febeccaff61581605cbe.adoc
[source,console]
----
PUT _rollup/job/sensor
{
    "index_pattern": "sensor-*",
    "rollup_index": "sensor_rollup",
    "cron": "*/30 * * * * ?",
    "page_size" :1000,
    "groups" : {
      "date_histogram": {
        "field": "timestamp",
        "fixed_interval": "1h",
        "delay": "7d"
      },
      "terms": {
        "fields": ["node"]
      }
    },
    "metrics": [
        {
            "field": "temperature",
            "metrics": ["min", "max", "sum"]
        },
        {
            "field": "voltage",
            "metrics": ["avg"]
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-caps.asciidoc: line 90: a00311843b5f8f3e9f7d511334a828b1.adoc
[source,console]
----
GET _rollup/data/sensor-*
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-caps.asciidoc: line 160: 944806221eb89f5af2298ccdf2902277.adoc
[source,console]
----
GET _rollup/data/_all
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-caps.asciidoc: line 169: f8cb1a04c2e487ff006b5ae0e1a7afbd.adoc
[source,console]
----
GET _rollup/data/sensor-1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-index-caps.asciidoc: line 46: 2d20c42e9664febeccaff61581605cbe.adoc
[source,console]
----
PUT _rollup/job/sensor
{
    "index_pattern": "sensor-*",
    "rollup_index": "sensor_rollup",
    "cron": "*/30 * * * * ?",
    "page_size" :1000,
    "groups" : {
      "date_histogram": {
        "field": "timestamp",
        "fixed_interval": "1h",
        "delay": "7d"
      },
      "terms": {
        "fields": ["node"]
      }
    },
    "metrics": [
        {
            "field": "temperature",
            "metrics": ["min", "max", "sum"]
        },
        {
            "field": "voltage",
            "metrics": ["avg"]
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-index-caps.asciidoc: line 82: 73d1a6c5ef90b7e35d43a0bfdc1e158d.adoc
[source,console]
----
GET /sensor_rollup/_rollup/data
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-index-caps.asciidoc: line 155: 642161d70dacf7d153767d37d3726838.adoc
[source,console]
----
GET /*_rollup/_rollup/data
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-search.asciidoc: line 55: 2d20c42e9664febeccaff61581605cbe.adoc
[source,console]
----
PUT _rollup/job/sensor
{
    "index_pattern": "sensor-*",
    "rollup_index": "sensor_rollup",
    "cron": "*/30 * * * * ?",
    "page_size" :1000,
    "groups" : {
      "date_histogram": {
        "field": "timestamp",
        "fixed_interval": "1h",
        "delay": "7d"
      },
      "terms": {
        "fields": ["node"]
      }
    },
    "metrics": [
        {
            "field": "temperature",
            "metrics": ["min", "max", "sum"]
        },
        {
            "field": "voltage",
            "metrics": ["avg"]
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-search.asciidoc: line 92: 4e63a0fd56cc5d59595baa0b0721f971.adoc
[source,console]
----
GET /sensor_rollup/_rollup_search
{
    "size": 0,
    "aggregations": {
        "max_temperature": {
            "max": {
                "field": "temperature"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-search.asciidoc: line 145: 3d1cea1ad861d1ee62e5f34b84371943.adoc
[source,console]
----
GET sensor_rollup/_rollup_search
{
    "size": 0,
    "aggregations": {
        "avg_temperature": {
            "avg": {
                "field": "temperature"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-search.asciidoc: line 189: adcd760ef029f744ab59460818d2342e.adoc
[source,console]
----
GET sensor-1,sensor_rollup/_rollup_search \<1>
{
    "size": 0,
    "aggregations": {
        "max_temperature": {
            "max": {
                "field": "temperature"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/rollup-job-config.asciidoc: line 17: 1cf5e58ea0f2ca39abfee4361207b939.adoc
[source,console]
----
PUT _rollup/job/sensor
{
    "index_pattern": "sensor-*",
    "rollup_index": "sensor_rollup",
    "cron": "*/30 * * * * ?",
    "page_size" :1000,
    "groups" : {
      "date_histogram": {
        "field": "timestamp",
        "fixed_interval": "60m",
        "delay": "7d"
      },
      "terms": {
        "fields": ["hostname", "datacenter"]
      },
      "histogram": {
        "fields": ["load", "net_in", "net_out"],
        "interval": 5
      }
    },
    "metrics": [
        {
            "field": "temperature",
            "metrics": ["min", "max", "sum"]
        },
        {
            "field": "voltage",
            "metrics": ["avg"]
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/start-job.asciidoc: line 51: 618c9d42284c067891fb57034a4fd834.adoc
[source,console]
----
POST _rollup/job/sensor/_start
----
|===
| php | csharp

| &cross; | &cross;
|===
=== rollup/apis/stop-job.asciidoc: line 76: 07a5fdeb7805cec1d28ba288b28f5ff5.adoc
[source,console]
----
POST _rollup/job/sensor/_stop?wait_for_completion=true&timeout=10s
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search.asciidoc: line 18: 321afb79fc4ee54676a89e0cd24946c1.adoc
[source,console]
----
POST /twitter/_doc?routing=kimchy
{
    "user" : "kimchy",
    "postDate" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search.asciidoc: line 33: 8acc1d67b152e7027e0f0e1a8b4b2431.adoc
[source,console]
----
POST /twitter/_search?routing=kimchy
{
    "query": {
        "bool" : {
            "must" : {
                "query_string" : {
                    "query" : "some query string here"
                }
            },
            "filter" : {
                "term" : { "user" : "kimchy" }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== search.asciidoc: line 74: 014b788c879e4aaa1020672e45e25473.adoc
[source,console]
----
PUT /_cluster/settings
{
    "transient": {
        "cluster.routing.use_adaptive_replica_selection": false
    }
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== search.asciidoc: line 99: 189a921df2f5b1fe580937210ce9c1c2.adoc
[source,console]
----
POST /_search
{
    "query" : {
        "match_all" : {}
    },
    "stats" : ["group1", "group2"]
}
----
|===
| php | csharp

| &cross; | &check;
|===
=== search/search.asciidoc: line 17: be49260e1b3496c4feac38c56ebb0669.adoc
[source,console]
----
GET /twitter/_search?q=user:kimchy
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search.asciidoc: line 27: 269071bbf812125f0b250676251c5936.adoc
[source,console]
----
GET /kimchy,elasticsearch/_search?q=tag:wow
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search.asciidoc: line 36: 4b2b9e7600f9d1eecf82de070a1bf2f4.adoc
[source,console]
----
GET /_all/_search?q=tag:wow
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/uri-request.asciidoc: line 10: 68188db64fc50a9b35e5646493b00d2c.adoc
[source,console]
----
GET twitter/_search?q=user:kimchy
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request-body.asciidoc: line 9: 0ce3606f1dba490eef83c4317b315b62.adoc
[source,console]
----
GET /twitter/_search
{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request-body.asciidoc: line 148: bfcd65ab85d684d36a8550080032958d.adoc
[source,console]
----
GET /_search?q=message:number&size=0&terminate_after=1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/docvalue-fields.asciidoc: line 8: 097a6bc1d76c3fc92fb299001d27896e.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match_all": {}
    },
    "docvalue_fields" : [
        "my_ip_field", \<1>
        {
            "field": "my_keyword_field" \<2>
        },
        {
            "field": "my_date_field",
            "format": "epoch_millis" \<3>
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/docvalue-fields.asciidoc: line 36: 1518ad2c540fd55f9df84bbe75c81606.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match_all": {}
    },
    "docvalue_fields" : [
        {
            "field": "*_date_field", \<1>
            "format": "epoch_millis" \<2>
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/explain.asciidoc: line 7: e405e90fe3207157d3c0f9c76c6778e8.adoc
[source,console]
----
GET /_search
{
    "explain": true,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/collapse.asciidoc: line 9: 032f67ced3e7d106f8722432ebbd94d3.adoc
[source,console]
----
GET /twitter/_search
{
    "query": {
        "match": {
            "message": "elasticsearch"
        }
    },
    "collapse" : {
        "field" : "user" \<1>
    },
    "sort": ["likes"], \<2>
    "from": 10 \<3>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/collapse.asciidoc: line 43: 63d36a10d9475be2e2fa73d2415e20e6.adoc
[source,console]
----
GET /twitter/_search
{
    "query": {
        "match": {
            "message": "elasticsearch"
        }
    },
    "collapse" : {
        "field" : "user", \<1>
        "inner_hits": {
            "name": "last_tweets", \<2>
            "size": 5, \<3>
            "sort": [{ "date": "asc" }] \<4>
        },
        "max_concurrent_group_searches": 4 \<5>
    },
    "sort": ["likes"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/collapse.asciidoc: line 77: 4f20ca49fbaac83620d4cb23fd355f3b.adoc
[source,console]
----
GET /twitter/_search
{
    "query": {
        "match": {
            "message": "elasticsearch"
        }
    },
    "collapse" : {
        "field" : "user", \<1>
        "inner_hits": [
            {
                "name": "most_liked",  \<2>
                "size": 3,
                "sort": ["likes"]
            },
            {
                "name": "most_recent", \<3>
                "size": 3,
                "sort": [{ "date": "asc" }]
            }
        ]
    },
    "sort": ["likes"]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/from-size.asciidoc: line 14: 9a26759ccbd338224ecaacf7c49ab08e.adoc
[source,console]
----
GET /_search
{
    "from" : 0, "size" : 10,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 24: 05e1088d2c04391203cc8eb3ab287b71.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "content": "kimchy" }
    },
    "highlight" : {
        "fields" : {
            "content" : {}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 280: 3cc4e8b1e2aecac644ba52d34ca29422.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "number_of_fragments" : 3,
        "fragment_size" : 150,
        "fields" : {
            "body" : { "pre_tags" : ["<em>"], "post_tags" : ["</em>"] },
            "blog.title" : { "number_of_fragments" : 0 },
            "blog.author" : { "number_of_fragments" : 0 },
            "blog.comment" : { "number_of_fragments" : 5, "order" : "score" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 311: 129cddb56fafef5cc454917a374eae1a.adoc
[source,console]
----
GET /_search
{
    "stored_fields": [ "_id" ],
    "query" : {
        "match": {
            "comment": {
                "query": "foo bar"
            }
        }
    },
    "rescore": {
        "window_size": 50,
        "query": {
            "rescore_query" : {
                "match_phrase": {
                    "comment": {
                        "query": "foo bar",
                        "slop": 1
                    }
                }
            },
            "rescore_query_weight" : 10
        }
    },
    "highlight" : {
        "order" : "score",
        "fields" : {
            "comment" : {
                "fragment_size" : 150,
                "number_of_fragments" : 3,
                "highlight_query": {
                    "bool": {
                        "must": {
                            "match": {
                                "comment": {
                                    "query": "foo bar"
                                }
                            }
                        },
                        "should": {
                            "match_phrase": {
                                "comment": {
                                    "query": "foo bar",
                                    "slop": 1,
                                    "boost": 10.0
                                }
                            }
                        },
                        "minimum_should_match": 0
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 380: 9e502038aa4ebb9cb4df230c0c4a854e.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "fields" : {
            "comment" : {"type" : "plain"}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 405: ee079a3f9eb529aac33f09be16747aa9.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "pre_tags" : ["<tag1>"],
        "post_tags" : ["</tag1>"],
        "fields" : {
            "body" : {}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 427: a225bb439c204b20ed52a28e1dcd663b.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "pre_tags" : ["<tag1>", "<tag2>"],
        "post_tags" : ["</tag1>", "</tag2>"],
        "fields" : {
            "body" : {}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 448: 05ce63b83a89fddb63fd60c923811582.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "tags_schema" : "styled",
        "fields" : {
            "comment" : {}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 473: 87b697eb7340e9e52ca790922eca0066.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "fields" : {
            "comment" : {"force_source" : true}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 498: 1e8b687c757981af3a9f005cfd2b4946.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "require_field_match": false,
        "fields": {
                "body" : { "pre_tags" : ["<em>"], "post_tags" : ["</em>"] }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 532: a182c91923ad1e47cf502ea890c53015.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "query": "comment.plain:running scissors",
            "fields": ["comment"]
        }
    },
    "highlight": {
        "order": "score",
        "fields": {
            "comment": {
                "matched_fields": ["comment", "comment.plain"],
                "type" : "fvh"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 562: 974bb1452f614f9a378a695fa9addd4e.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "query": "running scissors",
            "fields": ["comment", "comment.plain^10"]
        }
    },
    "highlight": {
        "order": "score",
        "fields": {
            "comment": {
                "matched_fields": ["comment", "comment.plain"],
                "type" : "fvh"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 590: 4971d093f19f85e3c622f1e0257ff60f.adoc
[source,console]
----
GET /_search
{
    "query": {
        "query_string": {
            "query": "running scissors",
            "fields": ["comment", "comment.plain^10"]
        }
    },
    "highlight": {
        "order": "score",
        "fields": {
            "comment": {
                "matched_fields": ["comment.plain"],
                "type" : "fvh"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 660: 2859fb1a8139777dca087862a5b1c205.adoc
[source,console]
----
GET /_search
{
    "highlight": {
        "fields": [
            { "title": {} },
            { "text": {} }
        ]
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 690: e8446172481fb6298c04b4bdc3340f3f.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "fields" : {
            "comment" : {"fragment_size" : 150, "number_of_fragments" : 3}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 710: 4ae1e4f88af2f9be50696e5a59466bb6.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "order" : "score",
        "fields" : {
            "comment" : {"fragment_size" : 150, "number_of_fragments" : 3}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 734: 62b15eac8c6d294da9114541fdfc527f.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "fields" : {
            "body" : {},
            "blog.title" : {"number_of_fragments" : 0}
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 761: 3d10eba5cac0069486bc3c2854d15689.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match": { "user": "kimchy" }
    },
    "highlight" : {
        "fields" : {
            "comment" : {
                "fragment_size" : 150,
                "number_of_fragments" : 3,
                "no_match_size": 150
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 789: 5ea9da129ca70a5fe534f27a82d80b29.adoc
[source,console]
----
PUT /example
{
  "mappings": {
    "properties": {
      "comment" : {
        "type": "text",
        "index_options" : "offsets"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 808: 17a1e308761afd3282f13d44d7be008a.adoc
[source,console]
----
PUT /example
{
  "mappings": {
    "properties": {
      "comment" : {
        "type": "text",
        "term_vector" : "with_positions_offsets"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 831: 146bfeeaa2ac4fc1352bf8d41097baa0.adoc
[source,console]
----
GET twitter/_search
{
    "query" : {
        "match_phrase": { "message": "number 1" }
    },
    "highlight" : {
        "fields" : {
            "message" : {
                "type": "plain",
                "fragment_size" : 15,
                "number_of_fragments" : 3,
                "fragmenter": "simple"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/highlighting.asciidoc: line 890: bc9bd39420f810edae72b9fb33a154fd.adoc
[source,console]
----
GET twitter/_search
{
    "query" : {
        "match_phrase": { "message": "number 1" }
    },
    "highlight" : {
        "fields" : {
            "message" : {
                "type": "plain",
                "fragment_size" : 15,
                "number_of_fragments" : 3,
                "fragmenter": "span"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/index-boost.asciidoc: line 11: 393c6b7a2e8c3381530c41ff2f7c4991.adoc
[source,console]
----
GET /_search
{
    "indices_boost" : {
        "index1" : 1.4,
        "index2" : 1.3
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/index-boost.asciidoc: line 26: fb8a4322825d26c4e7b41bd763b3d392.adoc
[source,console]
----
GET /_search
{
    "indices_boost" : [
        { "alias1" : 1.4 },
        { "index*" : 1.3 }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/inner-hits.asciidoc: line 87: 2a91e1fb8ad93a188fa9d77ec01bc431.adoc
[source,console]
----
PUT test
{
  "mappings": {
    "properties": {
      "comments": {
        "type": "nested"
      }
    }
  }
}

PUT test/_doc/1?refresh
{
  "title": "Test title",
  "comments": [
    {
      "author": "kimchy",
      "number": 1
    },
    {
      "author": "nik9000",
      "number": 2
    }
  ]
}

POST test/_search
{
  "query": {
    "nested": {
      "path": "comments",
      "query": {
        "match": {"comments.number" : 2}
      },
      "inner_hits": {} \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/inner-hits.asciidoc: line 211: 983fbb78e57e8fe98db38cf2d217e943.adoc
[source,console]
----
PUT test
{
  "mappings": {
    "properties": {
      "comments": {
        "type": "nested"
      }
    }
  }
}

PUT test/_doc/1?refresh
{
  "title": "Test title",
  "comments": [
    {
      "author": "kimchy",
      "text": "comment text"
    },
    {
      "author": "nik9000",
      "text": "words words words"
    }
  ]
}

POST test/_search
{
  "query": {
    "nested": {
      "path": "comments",
      "query": {
        "match": {"comments.text" : "words"}
      },
      "inner_hits": {
        "_source" : false,
        "docvalue_fields" : [
          "comments.text.keyword"
        ]
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/inner-hits.asciidoc: line 325: 79feb4a0c0a21b7015a52f9736cd4683.adoc
[source,console]
----
PUT test
{
  "mappings": {
    "properties": {
      "comments": {
        "type": "nested",
        "properties": {
          "votes": {
            "type": "nested"
          }
        }
      }
    }
  }
}

PUT test/_doc/1?refresh
{
  "title": "Test title",
  "comments": [
    {
      "author": "kimchy",
      "text": "comment text",
      "votes": []
    },
    {
      "author": "nik9000",
      "text": "words words words",
      "votes": [
        {"value": 1 , "voter": "kimchy"},
        {"value": -1, "voter": "other"}
      ]
    }
  ]
}

POST test/_search
{
  "query": {
    "nested": {
      "path": "comments.votes",
        "query": {
          "match": {
            "comments.votes.voter": "kimchy"
          }
        },
        "inner_hits" : {}
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/inner-hits.asciidoc: line 445: 3f5b5bee692e7d4b0992dc0a64e95a60.adoc
[source,console]
----
PUT test
{
  "mappings": {
    "properties": {
      "my_join_field": {
        "type": "join",
        "relations": {
          "my_parent": "my_child"
        }
      }
    }
  }
}

PUT test/_doc/1?refresh
{
  "number": 1,
  "my_join_field": "my_parent"
}

PUT test/_doc/2?routing=1&refresh
{
  "number": 1,
  "my_join_field": {
    "name": "my_child",
    "parent": "1"
  }
}

POST test/_search
{
  "query": {
    "has_child": {
      "type": "my_child",
      "query": {
        "match": {
          "number": 1
        }
      },
      "inner_hits": {}    \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/min-score.asciidoc: line 8: 8e8ceac8fc99348f885f85ff714557fd.adoc
[source,console]
----
GET /_search
{
    "min_score": 0.5,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/named-queries-and-filters.asciidoc: line 7: 0aad4321e968effc6e6ef2b98c6c71a5.adoc
[source,console]
----
GET /_search
{
    "query": {
        "bool" : {
            "should" : [
                {"match" : { "name.first" : {"query" : "shay", "_name" : "first"} }},
                {"match" : { "name.last" : {"query" : "banon", "_name" : "last"} }}
            ],
            "filter" : {
                "terms" : {
                    "name.last" : ["banon", "kimchy"],
                    "_name" : "test"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/post-filter.asciidoc: line 11: 35390274db3acad03eb77b2376c57e40.adoc
[source,console]
----
PUT /shirts
{
    "mappings": {
        "properties": {
            "brand": { "type": "keyword"},
            "color": { "type": "keyword"},
            "model": { "type": "keyword"}
        }
    }
}

PUT /shirts/_doc/1?refresh
{
    "brand": "gucci",
    "color": "red",
    "model": "slim"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/post-filter.asciidoc: line 41: f83eb6605c7c56e297a494b318400ef0.adoc
[source,console]
----
GET /shirts/_search
{
  "query": {
    "bool": {
      "filter": [
        { "term": { "color": "red"   }},
        { "term": { "brand": "gucci" }}
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/post-filter.asciidoc: line 65: 81f1b1e1d5c81683b6bf471c469e6046.adoc
[source,console]
----
GET /shirts/_search
{
  "query": {
    "bool": {
      "filter": [
        { "term": { "color": "red"   }},
        { "term": { "brand": "gucci" }}
      ]
    }
  },
  "aggs": {
    "models": {
      "terms": { "field": "model" } \<1>
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/post-filter.asciidoc: line 96: 48313f620c2871b6f4019b66be730109.adoc
[source,console]
----
GET /shirts/_search
{
  "query": {
    "bool": {
      "filter": {
        "term": { "brand": "gucci" } \<1>
      }
    }
  },
  "aggs": {
    "colors": {
      "terms": { "field": "color" } \<2>
    },
    "color_red": {
      "filter": {
        "term": { "color": "red" } \<3>
      },
      "aggs": {
        "models": {
          "terms": { "field": "model" } \<3>
        }
      }
    }
  },
  "post_filter": { \<4>
    "term": { "color": "red" }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/preference.asciidoc: line 59: 9405de6fd841c32ac510eb0a7eeed989.adoc
[source,console]
----
GET /_search?preference=xyzabc123
{
    "query": {
        "match": {
            "title": "elasticsearch"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/query.asciidoc: line 8: a8e19886f6b4792def0381c3f8cf2b5c.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/rescore.asciidoc: line 43: 829a40d484c778a8c58340c7bf09e1d8.adoc
[source,console]
----
POST /_search
{
   "query" : {
      "match" : {
         "message" : {
            "operator" : "or",
            "query" : "the quick brown"
         }
      }
   },
   "rescore" : {
      "window_size" : 50,
      "query" : {
         "rescore_query" : {
            "match_phrase" : {
               "message" : {
                  "query" : "the quick brown",
                  "slop" : 2
               }
            }
         },
         "query_weight" : 0.7,
         "rescore_query_weight" : 1.2
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/rescore.asciidoc: line 91: 7d7855afd9882a665bbabda810f94f61.adoc
[source,console]
----
POST /_search
{
   "query" : {
      "match" : {
         "message" : {
            "operator" : "or",
            "query" : "the quick brown"
         }
      }
   },
   "rescore" : [ {
      "window_size" : 100,
      "query" : {
         "rescore_query" : {
            "match_phrase" : {
               "message" : {
                  "query" : "the quick brown",
                  "slop" : 2
               }
            }
         },
         "query_weight" : 0.7,
         "rescore_query_weight" : 1.2
      }
   }, {
      "window_size" : 10,
      "query" : {
         "score_mode": "multiply",
         "rescore_query" : {
            "function_score" : {
               "script_score": {
                  "script": {
                    "source": "Math.log10(doc.likes.value + 2)"
                  }
               }
            }
         }
      }
   } ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/script-fields.asciidoc: line 8: 68358f94e77b5dce7eb01679516bae69.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "match_all": {}
    },
    "script_fields" : {
        "test1" : {
            "script" : {
                "lang": "painless",
                "source": "doc['price'].value * 2"
            }
        },
        "test2" : {
            "script" : {
                "lang": "painless",
                "source": "doc['price'].value * params.factor",
                "params" : {
                    "factor"  : 2.0
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/script-fields.asciidoc: line 45: 34dd16c077e81b3744963b19a3dc9e49.adoc
[source,console]
----
GET /_search
    {
        "query" : {
            "match_all": {}
        },
        "script_fields" : {
            "test1" : {
                "script" : "params['_source']['message']"
            }
        }
    }
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 40: 7e52bec09624cf6c0de5d13f2bfad5a5.adoc
[source,console]
----
POST /twitter/_search?scroll=1m
{
    "size": 100,
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 59: b41dce56b0e640d32b1cf452f87cec17.adoc
[source,console]
----
POST /_search/scroll \<1>
{
    "scroll" : "1m", \<2>
    "scroll_id" : "DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAD4WYm9laVYtZndUQlNsdDcwakFMNjU1QQ==" \<3>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 92: d5dcddc6398b473b6ad9bce5c6adf986.adoc
[source,console]
----
GET /_search?scroll=1m
{
  "sort": [
    "_doc"
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 146: 72beebe779a258c225dee7b023e60c52.adoc
[source,console]
----
GET /_nodes/stats/indices/search
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 160: b0d64d0a554549e5b2808002a0725493.adoc
[source,console]
----
DELETE /_search/scroll
{
    "scroll_id" : "DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAD4WYm9laVYtZndUQlNsdDcwakFMNjU1QQ=="
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 172: 3a700f836d8d5da1b656a876554028aa.adoc
[source,console]
----
DELETE /_search/scroll
{
    "scroll_id" : [
      "DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAD4WYm9laVYtZndUQlNsdDcwakFMNjU1QQ==",
      "DnF1ZXJ5VGhlbkZldGNoBQAAAAAAAAABFmtSWWRRWUJrU2o2ZExpSGJCVmQxYUEAAAAAAAAAAxZrUllkUVlCa1NqNmRMaUhiQlZkMWFBAAAAAAAAAAIWa1JZZFFZQmtTajZkTGlIYkJWZDFhQQAAAAAAAAAFFmtSWWRRWUJrU2o2ZExpSGJCVmQxYUEAAAAAAAAABBZrUllkUVlCa1NqNmRMaUhiQlZkMWFB"
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 187: c2c21e2824fbf6b7198ede30419da82b.adoc
[source,console]
----
DELETE /_search/scroll/_all
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 196: b94cee0f74f57742b3948f9b784dfdd4.adoc
[source,console]
----
DELETE /_search/scroll/DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAAAD4WYm9laVYtZndUQlNsdDcwakFMNjU1QQ==,DnF1ZXJ5VGhlbkZldGNoBQAAAAAAAAABFmtSWWRRWUJrU2o2ZExpSGJCVmQxYUEAAAAAAAAAAxZrUllkUVlCa1NqNmRMaUhiQlZkMWFBAAAAAAAAAAIWa1JZZFFZQmtTajZkTGlIYkJWZDFhQQAAAAAAAAAFFmtSWWRRWUJrU2o2ZExpSGJCVmQxYUEAAAAAAAAABBZrUllkUVlCa1NqNmRMaUhiQlZkMWFB
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 209: 1027ab1ca767ac1428176ef4f84bfbcf.adoc
[source,console]
----
GET /twitter/_search?scroll=1m
{
    "slice": {
        "id": 0, \<1>
        "max": 2 \<2>
    },
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    }
}
GET /twitter/_search?scroll=1m
{
    "slice": {
        "id": 1,
        "max": 2
    },
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/scroll.asciidoc: line 272: fdcaba9547180439ff4b6275034a5170.adoc
[source,console]
----
GET /twitter/_search?scroll=1m
{
    "slice": {
        "field": "date",
        "id": 0,
        "max": 10
    },
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/search-after.asciidoc: line 13: 402ee4bf8e2e386d5f9100fdaf13a6d6.adoc
[source,console]
----
GET twitter/_search
{
    "size": 10,
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    },
    "sort": [
        {"date": "asc"},
        {"tie_breaker_id": "asc"}      \<1>
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/search-after.asciidoc: line 57: 525ec32997125d401f9c128ca450cefa.adoc
[source,console]
----
GET twitter/_search
{
    "size": 10,
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    },
    "search_after": [1463538857, "654323"],
    "sort": [
        {"date": "asc"},
        {"tie_breaker_id": "asc"}
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/search-type.asciidoc: line 54: de3c9fe00efc5647ad4b695524cbe8a0.adoc
[source,console]
----
GET twitter/_search?search_type=query_then_fetch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/search-type.asciidoc: line 73: be0d2fbf861842eef2c98d5e5bf6e406.adoc
[source,console]
----
GET twitter/_search?search_type=dfs_query_then_fetch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/seq-no.asciidoc: line 8: 63965d439716ed6d18d30baef09001a5.adoc
[source,console]
----
GET /_search
{
    "seq_no_primary_term": true,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 11: d1b3b7d2bb2ab90d15fd10318abd24db.adoc
[source,console]
----
PUT /my_index
{
    "mappings": {
        "properties": {
            "post_date": { "type": "date" },
            "user": {
                "type": "keyword"
            },
            "name": {
                "type": "keyword"
            },
            "age": { "type": "integer" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 31: ae9b5fbd42af2386ffbf56ad4a697e51.adoc
[source,console]
----
GET /my_index/_search
{
    "sort" : [
        { "post_date" : {"order" : "asc"}},
        "user",
        { "name" : "desc" },
        { "age" : "desc" },
        "_score"
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 96: b997885974522ef439d5e345924cc5ba.adoc
[source,console]
----
PUT /my_index/_doc/1?refresh
{
   "product": "chocolate",
   "price": [20, 4]
}

POST /_search
{
   "query" : {
      "term" : { "product" : "chocolate" }
   },
   "sort" : [
      {"price" : {"order" : "asc", "mode" : "avg"}}
   ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 126: abf329ebefaf58acd4ee30e685731499.adoc
[source,console]
----
PUT /index_double
{
    "mappings": {
        "properties": {
            "field": { "type": "double" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 139: f6b5032bf27c2445d28845be0d413970.adoc
[source,console]
----
PUT /index_long
{
    "mappings": {
        "properties": {
            "field": { "type": "long" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 159: 2891aa10ee9d474780adf94d5607f2db.adoc
[source,console]
----
POST /index_long,index_double/_search
{
   "sort" : [
      {
        "field" : {
            "numeric_type" : "double"
        }
      }
   ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 187: f4a1008b3f9baa67bb03ce9ef5ab4cb4.adoc
[source,console]
----
PUT /index_double
{
    "mappings": {
        "properties": {
            "field": { "type": "date" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 200: 7477671958734843dd67cf0b8e6c7515.adoc
[source,console]
----
PUT /index_long
{
    "mappings": {
        "properties": {
            "field": { "type": "date_nanos" }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 220: 5f3549ac7fee94682ca0d7439eebdd2a.adoc
[source,console]
----
POST /index_long,index_double/_search
{
   "sort" : [
      {
        "field" : {
            "numeric_type" : "date_nanos"
        }
      }
   ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 272: de139866a220124360e5e27d1a736ea4.adoc
[source,console]
----
POST /_search
{
   "query" : {
      "term" : { "product" : "chocolate" }
   },
   "sort" : [
       {
          "offer.price" : {
             "mode" :  "avg",
             "order" : "asc",
             "nested": {
                "path": "offer",
                "filter": {
                   "term" : { "offer.color" : "blue" }
                }
             }
          }
       }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 300: 22334f4b24bb8977d3e1bf2ffdc29d3f.adoc
[source,console]
----
POST /_search
{
   "query": {
      "nested": {
         "path": "parent",
         "query": {
            "bool": {
                "must": {"range": {"parent.age": {"gte": 21}}},
                "filter": {
                    "nested": {
                        "path": "parent.child",
                        "query": {"match": {"parent.child.name": "matt"}}
                    }
                }
            }
         }
      }
   },
   "sort" : [
      {
         "parent.child.age" : {
            "mode" :  "min",
            "order" : "asc",
            "nested": {
               "path": "parent",
               "filter": {
                  "range": {"parent.age": {"gte": 21}}
               },
               "nested": {
                  "path": "parent.child",
                  "filter": {
                     "match": {"parent.child.name": "matt"}
                  }
               }
            }
         }
      }
   ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 357: ef0f4fa4272c47ff62fb7b422cf975e7.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        { "price" : {"missing" : "_last"} }
    ],
    "query" : {
        "term" : { "product" : "chocolate" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 382: 899eef71a67a1b2aa11a2166ec7f48f1.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        { "price" : {"unmapped_type" : "long"} }
    ],
    "query" : {
        "term" : { "product" : "chocolate" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 405: d17269bb80fb63ec0bf37d219e003dcb.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : [-70, 40],
                "order" : "asc",
                "unit" : "km",
                "mode" : "min",
                "distance_type" : "arc",
                "ignore_unmapped": true
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 459: 979d25dff2d8987119410291ad47b0d1.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : {
                    "lat" : 40,
                    "lon" : -70
                },
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 486: d50a3c64890f88af32c6d4ef4899d82a.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : "40,-70",
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 508: a1db5c822745fe167e9ef854dca3d129.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : "drm3btev3e86",
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 533: 15dad5338065baaaa7d475abe85f4c22.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : [-70, 40],
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 558: 77243bbf92f2a55e0fca6c2a349a1c15.adoc
[source,console]
----
GET /_search
{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : [[-70, 40], [-71, 42]],
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 588: 04fe1e3a0047b0cdb10987b79fc3f3f3.adoc
[source,console]
----
GET /_search
{
    "query" : {
        "term" : { "user" : "kimchy" }
    },
    "sort" : {
        "_script" : {
            "type" : "number",
            "script" : {
                "lang": "painless",
                "source": "doc['field_name'].value * params.factor",
                "params" : {
                    "factor" : 1.1
                }
            },
            "order" : "asc"
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/sort.asciidoc: line 618: e8e451bc8c45bcf16df43804c4fc8329.adoc
[source,console]
----
GET /_search
{
    "track_scores": true,
    "sort" : [
        { "post_date" : {"order" : "desc"} },
        { "name" : "desc" },
        { "age" : "desc" }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/source-filtering.asciidoc: line 15: 08c5b266f5e5534dc094346974cf7386.adoc
[source,console]
----
GET /_search
{
    "_source": false,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/source-filtering.asciidoc: line 31: 5c10e00c99b338353b3e486e94be253e.adoc
[source,console]
----
GET /_search
{
    "_source": "obj.*",
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/source-filtering.asciidoc: line 45: 160ae4ff9c53b8a98700caed0e82d7fe.adoc
[source,console]
----
GET /_search
{
    "_source": [ "obj1.*", "obj2.*" ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/source-filtering.asciidoc: line 63: 1e86a78433a0748970d6c3922a34898c.adoc
[source,console]
----
GET /_search
{
    "_source": {
        "includes": [ "obj1.*", "obj2.*" ],
        "excludes": [ "*.description" ]
    },
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/stored-fields.asciidoc: line 13: 2eeb3e55a7d3955e084bb369f1539009.adoc
[source,console]
----
GET /_search
{
    "stored_fields" : ["user", "postDate"],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/stored-fields.asciidoc: line 30: 2af86a6ebbb834fbcf6fa7268f87a3a5.adoc
[source,console]
----
GET /_search
{
    "stored_fields" : [],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/stored-fields.asciidoc: line 62: ccec437aed7a10d9111724ffd929fe00.adoc
[source,console]
----
GET /_search
{
    "stored_fields": "_none_",
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/track-total-hits.asciidoc: line 23: 32789ba30a73d8813b61c39619ad7d71.adoc
[source,console]
----
GET twitter/_search
{
    "track_total_hits": true,
     "query": {
        "match" : {
            "message" : "Elasticsearch"
        }
     }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/track-total-hits.asciidoc: line 69: e45cb729ed4a694b2d6cabaa55c9b5be.adoc
[source,console]
----
GET twitter/_search
{
    "track_total_hits": 100,
     "query": {
        "match" : {
            "message" : "Elasticsearch"
        }
     }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/track-total-hits.asciidoc: line 145: d9e08bca979c7ba3a9581f69470bf914.adoc
[source,console]
----
GET twitter/_search
{
    "track_total_hits": false,
     "query": {
        "match" : {
            "message" : "Elasticsearch"
        }
     }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/request/version.asciidoc: line 7: 9535be36eac8a589bd6bf7b7228eefd7.adoc
[source,console]
----
GET /_search
{
    "version": true,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 8: e068d93555351b9afbdb9dd2aff6368d.adoc
[source,console]
----
GET _search/template
{
    "source" : {
      "query": { "match" : { "{{my_field}}" : "{{my_value}}" } },
      "size" : "{{my_size}}"
    },
    "params" : {
        "my_field" : "message",
        "my_value" : "some message",
        "my_size" : 5
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 41: 4697b9aa952ac1613ee1a6ec7b3223c1.adoc
[source,console]
----
GET _search/template
{
    "source": {
        "query": {
            "term": {
                "message": "{{query_string}}"
            }
        }
    },
    "params": {
        "query_string": "search for these words"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 66: eb1f3134f28a9ba8406b0f10199cf5be.adoc
[source,console]
----
GET _search/template
{
  "source": "{ \"query\": { \"terms\": {{#toJson}}statuses{{/toJson}} }}",
  "params": {
    "statuses" : {
        "status": [ "pending", "published" ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 99: 6be45fa02e779a727ddf48f871610aa8.adoc
[source,console]
----
GET _search/template
{
    "source": "{\"query\":{\"bool\":{\"must\": {{#toJson}}clauses{{/toJson}} }}}",
    "params": {
        "clauses": [
            { "term": { "user" : "foo" } },
            { "term": { "user" : "bar" } }
        ]
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 145: 33bb4a6ec63a709a14dfa15a5e2cca88.adoc
[source,console]
----
GET _search/template
{
  "source": {
    "query": {
      "match": {
        "emails": "{{#join}}emails{{/join}}"
      }
    }
  },
  "params": {
    "emails": [ "username@email.com", "lastname@email.com" ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 179: 02f0012ca77fdc409592e524e5647fb8.adoc
[source,console]
----
GET _search/template
{
  "source": {
    "query": {
      "range": {
        "born": {
            "gte"   : "{{date.min}}",
            "lte"   : "{{date.max}}",
            "format": "{{#join delimiter='||'}}date.formats{{/join delimiter='||'}}"
	    }
      }
    }
  },
  "params": {
    "date": {
        "min": "2016",
        "max": "31/12/2017",
        "formats": ["dd/MM/yyyy", "yyyy"]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 366: a5cc9a86f0f9525cd86564421c721d2f.adoc
[source,console]
----
GET _render/template
{
    "source" : {
        "query" : {
            "term": {
                "http_access_log": "{{#url}}{{host}}/{{page}}{{/url}}"
            }
        }
    },
    "params": {
        "host": "https://www.elastic.co/",
        "page": "learn"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 408: 07248c39e529f40e1e1648a9ec48ab33.adoc
[source,console]
----
POST _scripts/<templatename>
{
    "script": {
        "lang": "mustache",
        "source": {
            "query": {
                "match": {
                    "title": "{{query_string}}"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 444: 7e160bad9b0524db95b27411f5955d17.adoc
[source,console]
----
GET _scripts/<templatename>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 471: 310c3d0d4f00ab9aa13ca31f55f727f5.adoc
[source,console]
----
DELETE _scripts/<templatename>
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 495: e5a10173765fc4471e0ec310e275b5a1.adoc
[source,console]
----
GET _search/template
{
    "id": "<templateName>", \<1>
    "params": {
        "query_string": "search for these words"
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 514: 4b13f649aa2eca6f7ee4221f708430c1.adoc
[source,console]
----
GET _render/template
{
  "source": "{ \"query\": { \"terms\": {{#toJson}}statuses{{/toJson}} }}",
  "params": {
    "statuses" : {
        "status": [ "pending", "published" ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 566: 99e29a569f37ea83b02687e6e2793529.adoc
[source,console]
----
GET _search/template
{
  "id": "my_template",
  "params": {
    "status": [ "pending", "published" ]
  },
  "explain": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-template.asciidoc: line 585: 3462452c6fdba8dc1efe2cca101246e8.adoc
[source,console]
----
GET _search/template
{
  "id": "my_template",
  "params": {
    "status": [ "pending", "published" ]
  },
  "profile": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-shards.asciidoc: line 17: 49b137a1c0016face219bac3faf41996.adoc
[source,console]
----
GET /twitter/_search_shards
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/search-shards.asciidoc: line 102: a44b7da0091ac75e5571475a4e99bb16.adoc
[source,console]
----
GET /twitter/_search_shards?routing=foo,bar
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters.asciidoc: line 16: 626f8c4b3e2cd3d9beaa63a7f5799d7a.adoc
[source,console]
----
POST twitter/_search
{
  "query" : {
    "match": {
      "message": "tring out Elasticsearch"
    }
  },
  "suggest" : {
    "my-suggestion" : {
      "text" : "tring out Elasticsearch",
      "term" : {
        "field" : "message"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters.asciidoc: line 43: 2533e4b36ae837eaecda08407ecb6383.adoc
[source,console]
----
POST _search
{
  "suggest": {
    "my-suggest-1" : {
      "text" : "tring out Elasticsearch",
      "term" : {
        "field" : "message"
      }
    },
    "my-suggest-2" : {
      "text" : "kmichy",
      "term" : {
        "field" : "user"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters.asciidoc: line 119: 5275842787967b6db876025f4a1c6942.adoc
[source,console]
----
POST _search
{
  "suggest": {
    "text" : "tring out Elasticsearch",
    "my-suggest-1" : {
      "term" : {
        "field" : "message"
      }
    },
    "my-suggest-2" : {
       "term" : {
        "field" : "user"
       }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/phrase-suggest.asciidoc: line 25: 5566cff431570f522e1fc5475b2ed875.adoc
[source,console]
----
PUT test
{
  "settings": {
    "index": {
      "number_of_shards": 1,
      "analysis": {
        "analyzer": {
          "trigram": {
            "type": "custom",
            "tokenizer": "standard",
            "filter": ["lowercase","shingle"]
          },
          "reverse": {
            "type": "custom",
            "tokenizer": "standard",
            "filter": ["lowercase","reverse"]
          }
        },
        "filter": {
          "shingle": {
            "type": "shingle",
            "min_shingle_size": 2,
            "max_shingle_size": 3
          }
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "fields": {
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          }
        }
      }
    }
  }
}
POST test/_doc?refresh=true
{"title": "noble warriors"}
POST test/_doc?refresh=true
{"title": "nobel prize"}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/phrase-suggest.asciidoc: line 84: 3b162509ed14eda44a9681cd1108fa39.adoc
[source,console]
----
POST test/_search
{
  "suggest": {
    "text": "noble prize",
    "simple_phrase": {
      "phrase": {
        "field": "title.trigram",
        "size": 1,
        "gram_size": 3,
        "direct_generator": [ {
          "field": "title.trigram",
          "suggest_mode": "always"
        } ],
        "highlight": {
          "pre_tag": "<em>",
          "post_tag": "</em>"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/phrase-suggest.asciidoc: line 226: 89a6b24618cafd60de1702a5b9f28a8d.adoc
[source,console]
----
POST test/_search
{
  "suggest": {
    "text" : "noble prize",
    "simple_phrase" : {
      "phrase" : {
        "field" :  "title.trigram",
        "size" :   1,
        "direct_generator" : [ {
          "field" :            "title.trigram",
          "suggest_mode" :     "always",
          "min_word_length" :  1
        } ],
        "collate": {
          "query": { \<1>
            "source" : {
              "match": {
                "{{field_name}}" : "{{suggestion}}" \<2>
              }
            }
          },
          "params": {"field_name" : "title"}, \<3>
          "prune": true \<4>
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/phrase-suggest.asciidoc: line 295: 203c3bb334384bdfb11ff1101ccfba25.adoc
[source,console]
----
POST test/_search
{
  "suggest": {
    "text" : "obel prize",
    "simple_phrase" : {
      "phrase" : {
        "field" : "title.trigram",
        "size" : 1,
        "smoothing" : {
          "laplace" : {
            "alpha" : 0.7
          }
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/phrase-suggest.asciidoc: line 416: eb6d62f1d855a8e8fe9eab2656d47504.adoc
[source,console]
----
POST test/_search
{
  "suggest": {
    "text" : "obel prize",
    "simple_phrase" : {
      "phrase" : {
        "field" : "title.trigram",
        "size" : 1,
        "direct_generator" : [ {
          "field" : "title.trigram",
          "suggest_mode" : "always"
        }, {
          "field" : "title.reverse",
          "suggest_mode" : "always",
          "pre_filter" : "reverse",
          "post_filter" : "reverse"
        } ]
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 28: b8718ca915bbb848925a5fb593a03e70.adoc
[source,console]
----
PUT music
{
    "mappings": {
        "properties" : {
            "suggest" : {
                "type" : "completion"
            },
            "title" : {
                "type": "keyword"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 85: 223787a2b80e132a22548768ccf7052d.adoc
[source,console]
----
PUT music/_doc/1?refresh
{
    "suggest" : {
        "input": [ "Nevermind", "Nirvana" ],
        "weight" : 34
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 112: 5e9f3b7246f4549624fa5b9dd3719d75.adoc
[source,console]
----
PUT music/_doc/1?refresh
{
    "suggest" : [
        {
            "input": "Nevermind",
            "weight" : 10
        },
        {
            "input": "Nirvana",
            "weight" : 3
        }
    ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 134: 7c3414279d47e9c29105d061ed316ef8.adoc
[source,console]
----
PUT music/_doc/1?refresh
{
  "suggest" : [ "Nevermind", "Nirvana" ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 152: 7f951981bd8ed09e56aebeb13adb96ce.adoc
[source,console]
----
POST music/_search?pretty
{
    "suggest": {
        "song-suggest" : {
            "prefix" : "nir", \<1>
            "completion" : { \<2>
                "field" : "suggest" \<3>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 222: 565ef4aad0c7765879325cc5d2e3c530.adoc
[source,console]
----
POST music/_search
{
    "_source": "suggest", \<1>
    "suggest": {
        "song-suggest" : {
            "prefix" : "nir",
            "completion" : {
                "field" : "suggest", \<2>
                "size" : 5 \<3>
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 314: b2a6fb1a94dd10bf594dafe727647e1d.adoc
[source,console]
----
POST music/_search?pretty
{
    "suggest": {
        "song-suggest" : {
            "prefix" : "nor",
            "completion" : {
                "field" : "suggest",
                "skip_duplicates": true
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 340: a4eac3c0bac550247e8c7d3f9bcaac1c.adoc
[source,console]
----
POST music/_search?pretty
{
    "suggest": {
        "song-suggest" : {
            "prefix" : "nor",
            "completion" : {
                "field" : "suggest",
                "fuzzy" : {
                    "fuzziness" : 2
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/completion-suggest.asciidoc: line 399: 62280b8a1ec0c214b3110a2c42a55fce.adoc
[source,console]
----
POST music/_search?pretty
{
    "suggest": {
        "song-suggest" : {
            "regex" : "n[ever|i]r",
            "completion" : {
                "field" : "suggest"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 25: 46b3154afd9a05f1aadd726efdd9cf98.adoc
[source,console]
----
PUT place
{
    "mappings": {
        "properties" : {
            "suggest" : {
                "type" : "completion",
                "contexts": [
                    { \<1>
                        "name": "place_type",
                        "type": "category"
                    },
                    { \<2>
                        "name": "location",
                        "type": "geo",
                        "precision": 4
                    }
                ]
            }
        }
    }
}
PUT place_path_category
{
    "mappings": {
        "properties" : {
            "suggest" : {
                "type" : "completion",
                "contexts": [
                    { \<3>
                        "name": "place_type",
                        "type": "category",
                        "path": "cat"
                    },
                    { \<4>
                        "name": "location",
                        "type": "geo",
                        "precision": 4,
                        "path": "loc"
                    }
                ]
            },
            "loc": {
                "type": "geo_point"
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 100: 2e59a0f8721e27dd537566f4af7a568f.adoc
[source,console]
----
PUT place/_doc/1
{
    "suggest": {
        "input": ["timmy's", "starbucks", "dunkin donuts"],
        "contexts": {
            "place_type": ["cafe", "food"] \<1>
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 118: d2a53c6c16ff2305830f64a3efd5f61d.adoc
[source,console]
----
PUT place_path_category/_doc/1
{
    "suggest": ["timmy's", "starbucks", "dunkin donuts"],
    "cat": ["cafe", "food"] \<1>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 140: 8c3e9da5f412261477c032b33f36a3e9.adoc
[source,console]
----
POST place/_search?pretty
{
    "suggest": {
        "place_suggestion" : {
            "prefix" : "tim",
            "completion" : {
                "field" : "suggest",
                "size": 10,
                "contexts": {
                    "place_type": [ "cafe", "restaurants" ]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 169: 8ac73762800c9db1ae418bfc0bcfa65a.adoc
[source,console]
----
POST place/_search?pretty
{
    "suggest": {
        "place_suggestion" : {
            "prefix" : "tim",
            "completion" : {
                "field" : "suggest",
                "size": 10,
                "contexts": {
                    "place_type": [ \<1>
                        { "context" : "cafe" },
                        { "context" : "restaurants", "boost": 2 }
                     ]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 254: 182162241e42f16f5860ea26fdc52c7e.adoc
[source,console]
----
PUT place/_doc/1
{
    "suggest": {
        "input": "timmy's",
        "contexts": {
            "location": [
                {
                    "lat": 43.6624803,
                    "lon": -79.3863353
                },
                {
                    "lat": 43.6624718,
                    "lon": -79.3873227
                }
            ]
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 284: bc79a8936474faf7de6d3c9872678176.adoc
[source,console]
----
POST place/_search
{
    "suggest": {
        "place_suggestion" : {
            "prefix" : "tim",
            "completion" : {
                "field" : "suggest",
                "size": 10,
                "contexts": {
                    "location": {
                        "lat": 43.662,
                        "lon": -79.380
                    }
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/context-suggest.asciidoc: line 318: 837c765a38fa0fd5f01b1559138469be.adoc
[source,console]
----
POST place/_search?pretty
{
    "suggest": {
        "place_suggestion" : {
            "prefix" : "tim",
            "completion" : {
                "field" : "suggest",
                "size": 10,
                "contexts": {
                    "location": [ \<1>
                        {
                            "lat": 43.6624803,
                            "lon": -79.3863353,
                            "precision": 2
                        },
                        {
                            "context": {
                                "lat": 43.6624803,
                                "lon": -79.3863353
                            },
                            "boost": 2
                        }
                     ]
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/suggesters/misc.asciidoc: line 10: e194e9cbe3eb2305f4f7cdda0cf529bd.adoc
[source,console]
----
POST _search?typed_keys
{
  "suggest": {
    "text" : "some test mssage",
    "my-first-suggester" : {
      "term" : {
        "field" : "message"
      }
    },
    "my-second-suggester" : {
      "phrase" : {
        "field" : "message"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/multi-search.asciidoc: line 65: 05af5eab63bf98d0078dfe661cd81124.adoc
[source,console]
----
GET twitter/_msearch
{}
{"query" : {"match_all" : {}}, "from" : 0, "size" : 10}
{}
{"query" : {"match_all" : {}}}
{"index" : "twitter2"}
{"query" : {"match_all" : {}}}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/multi-search.asciidoc: line 113: a914be2ff7dd0cbdec0257f0ad50b625.adoc
[source,console]
----
GET _msearch/template
{"index" : "twitter"}
{ "source" : "{ \"query\": { \"match\": { \"message\" : \"{{keywords}}\" } } } }", "params": { "query_type": "match", "keywords": "some message" } }
{"index" : "twitter"}
{ "source" : "{ \"query\": { \"match_{{template}}\": {} } }", "params": { "template": "all" } }
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/multi-search.asciidoc: line 128: 28e66ff0ecdd71cb1426880115eab5dd.adoc
[source,console]
----
POST /_scripts/my_template_1
{
    "script": {
        "lang": "mustache",
        "source": {
            "query": {
                "match": {
                    "message": "{{query_string}}"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/multi-search.asciidoc: line 147: 72e72cb3aa1b10b903d8cadcaddf7d10.adoc
[source,console]
----
POST /_scripts/my_template_2
{
    "script": {
        "lang": "mustache",
        "source": {
            "query": {
                "term": {
                    "{{field}}": "{{value}}"
                }
            }
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/multi-search.asciidoc: line 168: 8b4c8f395c0a6f952a42051a0d357154.adoc
[source,console]
----
GET _msearch/template
{"index" : "main"}
{ "id": "my_template_1", "params": { "query_string": "some message" } }
{"index" : "main"}
{ "id": "my_template_2", "params": { "field": "user", "value": "test" } }
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/count.asciidoc: line 11: 8f0511f8a5cb176ff2afdd4311799a33.adoc
[source,console]
----
PUT /twitter/_doc/1?refresh
{
    "user": "kimchy"
}

GET /twitter/_count?q=user:kimchy

GET /twitter/_count
{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/validate.asciidoc: line 8: a0a6e4abbf0a5d064d06d06ddc585f4c.adoc
[source,console]
----
PUT twitter/_bulk?refresh
{"index":{"_id":1}}
{"user" : "kimchy", "post_date" : "2009-11-15T14:12:12", "message" : "trying out Elasticsearch"}
{"index":{"_id":2}}
{"user" : "kimchi", "post_date" : "2009-11-15T14:12:13", "message" : "My username is similar to @kimchy!"}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/validate.asciidoc: line 21: 6bdf94c025faf346013a70e3473d5f87.adoc
[source,console]
----
GET twitter/_validate/query?q=user:foo
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/validate.asciidoc: line 62: 1a0ce57a5e6d73765601de98a5d60d80.adoc
[source,console]
----
GET twitter/_validate/query
{
  "query" : {
    "bool" : {
      "must" : {
        "query_string" : {
          "query" : "*:*"
        }
      },
      "filter" : {
        "term" : { "user" : "kimchy" }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/validate.asciidoc: line 89: 9989c7860423519c7357936a73c2a5ce.adoc
[source,console]
----
GET twitter/_validate/query
{
  "query": {
    "query_string": {
      "query": "post_date:foo",
      "lenient": false
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/validate.asciidoc: line 112: b5cd0cc45db5f2fba30ac310630ad172.adoc
[source,console]
----
GET twitter/_validate/query?explain=true
{
  "query": {
    "query_string": {
      "query": "post_date:foo",
      "lenient": false
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/validate.asciidoc: line 152: fd74d7518bab5f1dbc1fed588b9bc2a6.adoc
[source,console]
----
GET twitter/_validate/query?rewrite=true
{
  "query": {
    "more_like_this": {
      "like": {
        "_id": "2"
      },
      "boost_terms": 1
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/validate.asciidoc: line 199: d253135ac0a4b3b04531b1a5d2a19279.adoc
[source,console]
----
GET twitter/_validate/query?rewrite=true&all_shards=true
{
  "query": {
    "match": {
      "user": {
        "query": "kimchy",
        "fuzziness": "auto"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/explain.asciidoc: line 16: abfec22fbe7d571711cc65661ca887ee.adoc
[source,console]
----
GET /twitter/_explain/0
{
      "query" : {
        "match" : { "message" : "elasticsearch" }
      }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/explain.asciidoc: line 110: 5032518611d928d1f802e215cf79c550.adoc
[source,console]
----
GET /twitter/_explain/0?q=message:search
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/profile.asciidoc: line 22: f6e300010478e5cbbeb2e589bc16fce7.adoc
[source,console]
----
GET /twitter/_search
{
  "profile": true,\<1>
  "query" : {
    "match" : { "message" : "some number" }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/profile.asciidoc: line 509: d8621790a416f05557c8df037a3722ac.adoc
[source,console]
----
GET /twitter/_search
{
  "profile": true,
  "query": {
    "term": {
      "user": {
        "value": "test"
      }
    }
  },
  "aggs": {
    "my_scoped_agg": {
      "terms": {
        "field": "likes"
      }
    },
    "my_global_agg": {
      "global": {},
      "aggs": {
        "my_level_agg": {
          "terms": {
            "field": "likes"
          }
        }
      }
    }
  },
  "post_filter": {
    "match": {
      "message": "some"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/profile.asciidoc: line 708: d8621790a416f05557c8df037a3722ac.adoc
[source,console]
----
GET /twitter/_search
{
  "profile": true,
  "query": {
    "term": {
      "user": {
        "value": "test"
      }
    }
  },
  "aggs": {
    "my_scoped_agg": {
      "terms": {
        "field": "likes"
      }
    },
    "my_global_agg": {
      "global": {},
      "aggs": {
        "my_level_agg": {
          "terms": {
            "field": "likes"
          }
        }
      }
    }
  },
  "post_filter": {
    "match": {
      "message": "some"
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/field-caps.asciidoc: line 9: 8025830e885c7c0820157e399154a5e0.adoc
[source,console]
----
GET _field_caps?fields=rating
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/field-caps.asciidoc: line 17: 614bd49400b6ebf47c5b12839dd1ecb8.adoc
[source,console]
----
GET twitter/_field_caps?fields=rating
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/field-caps.asciidoc: line 65: a985e6b7b2ead9c3f30a9bc97d8b598e.adoc
[source,console]
----
GET _field_caps?fields=rating,title
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/field-caps.asciidoc: line 114: 4e931cfac74e46e221cf4a9ab88a182d.adoc
[source,console]
----
GET _field_caps?fields=rating,title&include_unmapped
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/rank-eval.asciidoc: line 151: 2a989679e4b71569e17e02db8865b685.adoc
[source,console]
----
GET /twitter/_rank_eval
{
    "requests": [
    {
        "id": "JFK query",
        "request": { "query": { "match_all": {}}},
        "ratings": []
    }],
    "metric": {
      "precision": {
        "k" : 20,
        "relevant_rating_threshold": 1,
        "ignore_unlabeled": false
      }
   }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/rank-eval.asciidoc: line 194: 351775a1f73e47025463bd937948f7b4.adoc
[source,console]
----
GET /twitter/_rank_eval
{
    "requests": [
    {
        "id": "JFK query",
        "request": { "query": { "match_all": {}}},
        "ratings": []
    }],
    "metric": {
        "mean_reciprocal_rank": {
            "k" : 20,
            "relevant_rating_threshold" : 1
        }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/rank-eval.asciidoc: line 233: c4f013ff1a8b80c87c0265a91ed12648.adoc
[source,console]
----
GET /twitter/_rank_eval
{
    "requests": [
    {
        "id": "JFK query",
        "request": { "query": { "match_all": {}}},
        "ratings": []
    }],
    "metric": {
       "dcg": {
            "k" : 20,
            "normalize": false
       }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== search/rank-eval.asciidoc: line 282: 12c4a9be9ffc26cdc0e9343d53c1fd5d.adoc
[source,console]
----
GET /twitter/_rank_eval
{
    "requests": [
    {
        "id": "JFK query",
        "request": { "query": { "match_all": {}}},
        "ratings": []
    }],
    "metric": {
       "expected_reciprocal_rank": {
            "maximum_relevance" : 3,
            "k" : 20
       }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/authenticate.asciidoc: line 35: 55f4a15b84b724b9fbf2efd29a4da120.adoc
[source,console]
----
GET /_security/_authenticate
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/change-password.asciidoc: line 55: a2d14f8f1ea3efe970887f7892fdb268.adoc
[source,console]
----
POST /_security/user/jacknich/_password
{
  "password" : "s3cr3t"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/clear-cache.asciidoc: line 48: a5e2b3588258430f2e595abda98e3943.adoc
[source,console]
----
POST /_security/realm/default_file/_clear_cache
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/clear-cache.asciidoc: line 56: c1409f591a01589638d9b00436ce42c0.adoc
[source,console]
----
POST /_security/realm/default_file/_clear_cache?usernames=rdeniro,alpacino
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/clear-cache.asciidoc: line 65: 00272f75a6afea91f8554ef7cda0c1f2.adoc
[source,console]
----
POST /_security/realm/default_file,ldap1/_clear_cache
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/clear-roles-cache.asciidoc: line 40: ee577c4c7cc723e99569ea2d1137adba.adoc
[source,console]
----
POST /_security/role/my_admin_role/_clear_cache
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-api-keys.asciidoc: line 69: 0c8f24166d0ce7b8792781b268b544a9.adoc
[source,console]
----
POST /_security/api_key
{
  "name": "my-api-key",
  "expiration": "1d", \<1>
  "role_descriptors": { \<2>
    "role-a": {
      "cluster": ["all"],
      "index": [
        {
          "names": ["index-a*"],
          "privileges": ["read"]
        }
      ]
    },
    "role-b": {
      "cluster": ["all"],
      "index": [
        {
          "names": ["index-b*"],
          "privileges": ["all"]
        }
      ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc: line 90: 4ee31fd4ea6d18f32ec28b7fa433441d.adoc
[source,console]
----
PUT /_security/privilege
{
  "myapp": {
    "read": {
      "actions": [ \<1>
        "data:read/*" , \<2>
        "action:login" ],
        "metadata": { \<3>
          "description": "Read access to myapp"
        }
      }
    }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc: line 133: ee90d1fb22b59d30da339d825303b912.adoc
[source,console]
----
PUT /_security/privilege
{
  "app01": {
    "read": {
      "actions": [ "action:login", "data:read/*" ]
    },
    "write": {
      "actions": [ "action:login", "data:write/*" ]
    }
  },
  "app02": {
    "all": {
      "actions": [ "*" ]
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 109: 23b062c157235246d7c347b9047b2435.adoc
[source,console]
----
POST /_security/role_mapping/mapping1
{
  "roles": [ "user"],
  "enabled": true, \<1>
  "rules": {
    "field" : { "username" : "*" }
  },
  "metadata" : { \<2>
    "version" : 1
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 144: b176e0d428726705298184ef39ad5cb2.adoc
[source,console]
----
POST /_security/role_mapping/mapping2
{
  "roles": [ "user", "admin" ],
  "enabled": true,
  "rules": {
     "field" : { "username" : [ "esadmin01", "esadmin02" ] }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 158: e60b7f75ca806f2c74927c3d9409a986.adoc
[source,console]
----
POST /_security/role_mapping/mapping3
{
  "roles": [ "ldap-user" ],
  "enabled": true,
  "rules": {
    "field" : { "realm.name" : "ldap1" }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 174: 7a23a385a63c87cab58fd494870450fd.adoc
[source,console]
----
POST /_security/role_mapping/mapping4
{
  "roles": [ "superuser" ],
  "enabled": true,
  "rules": {
    "any": [
      {
        "field": {
          "username": "esadmin"
        }
      },
      {
        "field": {
          "groups": "cn=admins,dc=example,dc=com"
        }
      }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 217: 5ad365ed9e1a3c26093a0f09666c133a.adoc
[source,console]
----
POST /_security/role_mapping/mapping5
{
  "role_templates": [
    {
      "template": { "source": "{{#tojson}}groups{{/tojson}}" }, \<1>
      "format" : "json" \<2>
    }
  ],
  "rules": {
    "field" : { "realm.name" : "saml1" }
  },
  "enabled": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 241: 7e5faa551f2c95ffd627da352563d450.adoc
[source,console]
----
POST /_security/role_mapping/mapping6
{
  "roles": [ "example-user" ],
  "enabled": true,
  "rules": {
    "field" : { "dn" : "*,ou=subtree,dc=example,dc=com" }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 257: b80e1f5b26bae4f3c2f8a604b7caaf17.adoc
[source,console]
----
POST /_security/role_mapping/mapping7
{
  "roles": [ "ldap-example-user" ],
  "enabled": true,
  "rules": {
    "all": [
      { "field" : { "dn" : "*,ou=subtree,dc=example,dc=com" } },
      { "field" : { "realm.name" : "ldap1" } }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 282: 0d94d76b7f00d0459d1f8c962c144dcd.adoc
[source,console]
----
POST /_security/role_mapping/mapping8
{
  "roles": [ "superuser" ],
  "enabled": true,
  "rules": {
    "all": [
      {
        "any": [
          {
            "field": {
              "dn": "*,ou=admin,dc=example,dc=com"
            }
          },
          {
            "field": {
              "username": [ "es-admin", "es-system" ]
            }
          }
        ]
      },
      {
        "field": {
          "groups": "cn=people,dc=example,dc=com"
        }
      },
      {
        "except": {
          "field": {
            "metadata.terminated_date": null
          }
        }
      }
    ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-role-mappings.asciidoc: line 333: 50dc35d3d8705bd62aed20a15209476c.adoc
[source,console]
----
POST /_security/role_mapping/mapping9
{
  "rules": { "field": { "realm.name": "cloud-saml" } },
  "role_templates": [
    { "template": { "source" : "saml_user" } }, \<1>
    { "template": { "source" : "_user_{{username}}" } }
  ],
  "enabled": true
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-roles.asciidoc: line 86: 850a6d4aaf112ec1279260a2b7400a89.adoc
[source,console]
----
POST /_security/role/my_admin_role
{
  "cluster": ["all"],
  "indices": [
    {
      "names": [ "index1", "index2" ],
      "privileges": ["all"],
      "field_security" : { // optional
        "grant" : [ "title", "body" ]
      },
      "query": "{\"match\": {\"title\": \"foo\"}}" // optional
    }
  ],
  "applications": [
    {
      "application": "myapp",
      "privileges": [ "admin", "read" ],
      "resources": [ "*" ]
    }
  ],
  "run_as": [ "other_user" ], // optional
  "metadata" : { // optional
    "version" : 1
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/create-users.asciidoc: line 108: 4c514b787945952a223cde8a4a09e826.adoc
[source,console]
----
POST /_security/user/jacknich
{
  "password" : "j@rV1s",
  "roles" : [ "admin", "other_role1" ],
  "full_name" : "Jack Nicholson",
  "email" : "jacknich@example.com",
  "metadata" : {
    "intelligence" : 7
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/delete-app-privileges.asciidoc: line 42: ebd76a45e153c4656c5871e23b7b5508.adoc
[source,console]
----
DELETE /_security/privilege/myapp/read
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/delete-role-mappings.asciidoc: line 41: 261480571394632db40e88fbb6c59c2f.adoc
[source,console]
----
DELETE /_security/role_mapping/mapping1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/delete-roles.asciidoc: line 42: cffce059425d3d21e7f9571500d63524.adoc
[source,console]
----
DELETE /_security/role/my_admin_role
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/delete-users.asciidoc: line 39: ffd63dd186ab81b893faec3b3358fa09.adoc
[source,console]
----
DELETE /_security/user/jacknich
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/disable-users.asciidoc: line 45: bb293e1bdf0c6f6d9069eeb7edc9d399.adoc
[source,console]
----
PUT /_security/user/jacknich/_disable
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/enable-users.asciidoc: line 44: adf36e2d8fc05c3719c91912481c4e19.adoc
[source,console]
----
PUT /_security/user/jacknich/_enable
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-api-keys.asciidoc: line 56: 8d3be5482270921111754772479f8676.adoc
[source,console]
----
POST /_security/api_key
{
  "name": "my-api-key",
  "role_descriptors": {}
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-api-keys.asciidoc: line 83: 701f1fffc65e9e51c96aa60261e2eae3.adoc
[source,console]
----
GET /_security/api_key?id=VuaCfGcBCdbkQm-e5aOx
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-api-keys.asciidoc: line 93: 7b864d61767ab283cfd5f9b9ba784b1f.adoc
[source,console]
----
GET /_security/api_key?name=my-api-key
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-api-keys.asciidoc: line 102: 10d9da8a3b7061479be908c8c5c76cfb.adoc
[source,console]
----
GET /_security/api_key?realm_name=native1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-api-keys.asciidoc: line 111: 62eafc5b3ab75cc67314d5a8567d6077.adoc
[source,console]
----
GET /_security/api_key?username=myuser
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-api-keys.asciidoc: line 121: 30abc76a39e551f4b52c65002bb6405d.adoc
[source,console]
----
GET /_security/api_key?username=myuser&realm_name=native1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-app-privileges.asciidoc: line 59: cd8006165ac64f1ef99af48e5a35a25b.adoc
[source,console]
----
GET /_security/privilege/myapp/read
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-app-privileges.asciidoc: line 91: 3b18e9de638ff0b1c7a1f1f6bf1c24f3.adoc
[source,console]
----
GET /_security/privilege/myapp/
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-app-privileges.asciidoc: line 99: 0ddf705317d9c5095b4a1419a2e3bace.adoc
[source,console]
----
GET /_security/privilege/
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-builtin-privileges.asciidoc: line 55: 2623eb122cc0299b42fc9eca6e7f5e56.adoc
[source,console]
----
GET /_security/privilege/_builtin
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-role-mappings.asciidoc: line 59: 8b3a94495127efd9d56b2cd7f3eecdca.adoc
[source,console]
----
GET /_security/role_mapping/mapping1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-roles.asciidoc: line 55: 115529722ba30b0b0d51a7ff87e59198.adoc
[source,console]
----
GET /_security/role/my_admin_role
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-roles.asciidoc: line 91: 128283698535116931dca9d16a16dca2.adoc
[source,console]
----
GET /_security/role
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-tokens.asciidoc: line 102: cee591c1fc70d4f180c623a3a6d07755.adoc
[source,console]
----
POST /_security/oauth2/token
{
  "grant_type" : "client_credentials"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-tokens.asciidoc: line 138: e1337c6b76defd5a46d05220f9d9c9fc.adoc
[source,console]
----
POST /_security/oauth2/token
{
  "grant_type" : "password",
  "username" : "test_admin",
  "password" : "x-pack-test-password"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-tokens.asciidoc: line 169: 1873f8a8a291e6fcd6c1c83ea6928759.adoc
[source,console]
----
POST /_security/oauth2/token
{
    "grant_type": "refresh_token",
    "refresh_token": "vLBPvmAB6KvwvJZr27cS"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-users.asciidoc: line 56: 3924ee252581ebb96ac0e60046125ae8.adoc
[source,console]
----
GET /_security/user/jacknich
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-users.asciidoc: line 63: bac6203259754d2f09c1ebeecc9ded5d.adoc
[source,console]
----
{
  "jacknich": {
    "username": "jacknich",
    "roles": [
      "admin", "other_role1"
    ],
    "full_name": "Jack Nicholson",
    "email": "jacknich@example.com",
    "metadata": { "intelligence" : 7 },
    "enabled": true
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/get-users.asciidoc: line 83: abdbc81e799e28c833556b1c29f03ba6.adoc
[source,console]
----
GET /_security/user
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/has-privileges.asciidoc: line 68: 9684e5fa8c22a07a372feb6fc1f5f7c0.adoc
[source,console]
----
GET /_security/user/_has_privileges
{
  "cluster": [ "monitor", "manage" ],
  "index" : [
    {
      "names": [ "suppliers", "products" ],
      "privileges": [ "read" ]
    },
    {
      "names": [ "inventory" ],
      "privileges" : [ "read", "write" ]
    }
  ],
  "application": [
    {
      "application": "inventory_manager",
      "privileges" : [ "read", "data:write/inventory" ],
      "resources" : [ "product/1852563" ]
    }
  ]
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-api-keys.asciidoc: line 65: 0aff04881be21eea45375ec4f4f50e66.adoc
[source,console]
----
POST /_security/api_key
{
  "name": "my-api-key"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-api-keys.asciidoc: line 92: 01cc9dac719f2612a48cc1b23db7cd54.adoc
[source,console]
----
DELETE /_security/api_key
{
  "id" : "VuaCfGcBCdbkQm-e5aOx"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-api-keys.asciidoc: line 106: f388e571224dd6850f8c9f9f08fca3da.adoc
[source,console]
----
DELETE /_security/api_key
{
  "name" : "my-api-key"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-api-keys.asciidoc: line 119: dde283eab92608e7bfbfa09c6482a12e.adoc
[source,console]
----
DELETE /_security/api_key
{
  "realm_name" : "native1"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-api-keys.asciidoc: line 132: e7d819634d765cde269e2669e2dc677f.adoc
[source,console]
----
DELETE /_security/api_key
{
  "username" : "myuser"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-api-keys.asciidoc: line 145: 6c927313867647e0ef3cd3a37cb410cc.adoc
[source,console]
----
DELETE /_security/api_key
{
  "username" : "myuser",
  "realm_name" : "native1"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 72: cee591c1fc70d4f180c623a3a6d07755.adoc
[source,console]
----
POST /_security/oauth2/token
{
  "grant_type" : "client_credentials"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 84: da2bb6894d95489812b653be2feeeb5b.adoc
[source,console]
----
{
  "access_token" : "dGhpcyBpcyBub3QgYSByZWFsIHRva2VuIGJ1dCBpdCBpcyBvbmx5IHRlc3QgZGF0YS4gZG8gbm90IHRyeSB0byByZWFkIHRva2VuIQ==",
  "type" : "Bearer",
  "expires_in" : 1200
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 98: dbf9abc37899352751dab0ede62af2fd.adoc
[source,console]
----
DELETE /_security/oauth2/token
{
  "token" : "dGhpcyBpcyBub3QgYSByZWFsIHRva2VuIGJ1dCBpdCBpcyBvbmx5IHRlc3QgZGF0YS4gZG8gbm90IHRyeSB0byByZWFkIHRva2VuIQ=="
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 112: e1337c6b76defd5a46d05220f9d9c9fc.adoc
[source,console]
----
POST /_security/oauth2/token
{
  "grant_type" : "password",
  "username" : "test_admin",
  "password" : "x-pack-test-password"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 126: 774740abbecda50b03d75dbff8cbe60f.adoc
[source,console]
----
{
  "access_token" : "dGhpcyBpcyBub3QgYSByZWFsIHRva2VuIGJ1dCBpdCBpcyBvbmx5IHRlc3QgZGF0YS4gZG8gbm90IHRyeSB0byByZWFkIHRva2VuIQ==",
  "type" : "Bearer",
  "expires_in" : 1200,
  "refresh_token": "vLBPvmAB6KvwvJZr27cS"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 142: 0c6f9c9da75293fae69659ac1d6329de.adoc
[source,console]
----
DELETE /_security/oauth2/token
{
  "refresh_token" : "vLBPvmAB6KvwvJZr27cS"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 156: 4bc4db44b8c74610b73f21a421099a13.adoc
[source,console]
----
DELETE /_security/oauth2/token
{
  "realm_name" : "saml1"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 169: 0280247e0cf2e561c548f22c9fb31163.adoc
[source,console]
----
DELETE /_security/oauth2/token
{
  "username" : "myuser"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/invalidate-tokens.asciidoc: line 182: 6dd2a107bc64fd6f058fb17c21640649.adoc
[source,console]
----
DELETE /_security/oauth2/token
{
  "username" : "myuser",
  "realm_name" : "saml1"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/oidc-prepare-authentication-api.asciidoc: line 69: e3019fd5f23458ae49ad9854c97d321c.adoc
[source,console]
----
POST /_security/oidc/prepare
{
  "realm" : "oidc1"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/oidc-prepare-authentication-api.asciidoc: line 96: 57dc15e5ad663c342fd5c1d86fcd1b29.adoc
[source,console]
----
POST /_security/oidc/prepare
{
  "realm" : "oidc1",
  "state" : "lGYK0EcSLjqH6pkT5EVZjC6eIW5YCGgywj2sxROO",
  "nonce" : "zOBXLJGUooRrbLbQk5YCcyC8AXw3iloynvluYhZ5"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/oidc-prepare-authentication-api.asciidoc: line 124: d35c8cf7a98b3f112e1de8797ec6689d.adoc
[source,console]
----
POST /_security/oidc/prepare
{
  "iss" : "http://127.0.0.1:8080",
  "login_hint": "this_is_an_opaque_string"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/oidc-authenticate-api.asciidoc: line 61: 95b341300d31db2f573905ebeac42d89.adoc
[source,console]
----
POST /_security/oidc/authenticate
{
  "redirect_uri" : "https://oidc-kibana.elastic.co:5603/api/security/v1/oidc?code=jtI3Ntt8v3_XvcLzCFGq&state=4dbrihtIAt3wBTwo6DxK-vdk-sSyDBV8Yf0AjdkdT5I",
  "state" : "4dbrihtIAt3wBTwo6DxK-vdk-sSyDBV8Yf0AjdkdT5I",
  "nonce" : "WaBPH0KqPVdG5HHdSxPRjfoZbXMCicm5v1OiAj0DUFM"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/oidc-logout-api.asciidoc: line 44: 2a1eece9a59ac1773edcf0a932c26de0.adoc
[source,console]
----
POST /_security/oidc/logout
{
  "token" : "dGhpcyBpcyBub3QgYSByZWFsIHRva2VuIGJ1dCBpdCBpcyBvbmx5IHRlc3QgZGF0YS4gZG8gbm90IHRyeSB0byByZWFkIHRva2VuIQ==",
  "refresh_token": "vLBPvmAB6KvwvJZr27cS"
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/security/ssl.asciidoc: line 84: 05f6049c677a156bdf9b83e71a3b87ed.adoc
[source,console]
----
GET /_ssl/certificates
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 52: f0f1a2ad8f815d8dfea122420b295a35.adoc
[source,console]
----
PUT /_slm/policy/daily-snapshots
{
  "schedule": "0 30 1 * * ?", \<1>
  "name": "<daily-snap-{now/d}>", \<2>
  "repository": "my_repository", \<3>
  "config": { \<4>
    "indices": ["data-*", "important"], \<5>
    "ignore_unavailable": false,
    "include_global_state": false
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 116: b4f9fe8808cb27a210b162e7aaba261d.adoc
[source,console]
----
GET /_slm/policy/daily-snapshots?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 154: bc2dd9e5ed37f98016ecf53f968d2211.adoc
[source,console]
----
GET /_slm/policy
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 178: c2837666ce06acefbdd575bcc727b370.adoc
[source,console]
----
PUT /_slm/policy/daily-snapshots/_execute
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 201: b4f9fe8808cb27a210b162e7aaba261d.adoc
[source,console]
----
GET /_slm/policy/daily-snapshots?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 247: b9e0a99932e6f9ee620f5ca7f8588163.adoc
[source,console]
----
PUT /_slm/policy/daily-snapshots
{
  "schedule": "0 30 1 * * ?",
  "name": "<daily-snap-{now/d}>",
  "repository": "my_repository",
  "config": {
    "indices": ["data-*", "important"],
    "ignore_unavailable": true,
    "include_global_state": false
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 266: c2837666ce06acefbdd575bcc727b370.adoc
[source,console]
----
PUT /_slm/policy/daily-snapshots/_execute
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 284: b4f9fe8808cb27a210b162e7aaba261d.adoc
[source,console]
----
GET /_slm/policy/daily-snapshots?human
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ilm/apis/slm-api.asciidoc: line 346: 1a1f3421717ff744ed83232729289bb0.adoc
[source,console]
----
DELETE /_slm/policy/daily-snapshots
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/put-watch.asciidoc: line 101: 3a12feb0de224bfaaf518d95b9f516ff.adoc
[source,console]
----
PUT _watcher/watch/my-watch
{
  "trigger" : {
    "schedule" : { "cron" : "0 0/1 * * * ?" }
  },
  "input" : {
    "search" : {
      "request" : {
        "indices" : [
          "logstash*"
        ],
        "body" : {
          "query" : {
            "bool" : {
              "must" : {
                "match": {
                   "response": 404
                }
              },
              "filter" : {
                "range": {
                  "@timestamp": {
                    "from": "{{ctx.trigger.scheduled_time}}||-5m",
                    "to": "{{ctx.trigger.triggered_time}}"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "condition" : {
    "compare" : { "ctx.payload.hits.total" : { "gt" : 0 }}
  },
  "actions" : {
    "email_admin" : {
      "email" : {
        "to" : "admin@domain.host.com",
        "subject" : "404 recently encountered"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/get-watch.asciidoc: line 34: e827a9040e137410d62d10bb3b3cbb71.adoc
[source,console]
----
GET _watcher/watch/my_watch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/delete-watch.asciidoc: line 48: 2aa548b692fc2fe7b6f0d90eb8b2ae29.adoc
[source,console]
----
DELETE _watcher/watch/my_watch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/execute-watch.asciidoc: line 142: 01dc7bdc223bd651574ed2d3954a5b1c.adoc
[source,console]
----
POST _watcher/watch/my_watch/_execute
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/execute-watch.asciidoc: line 151: f6eff830fb0fad200ebfb1e3e46f6f0e.adoc
[source,console]
----
POST _watcher/watch/my_watch/_execute
{
  "trigger_data" : { \<1>
     "triggered_time" : "now",
     "scheduled_time" : "now"
  },
  "alternative_input" : { \<2>
    "foo" : "bar"
  },
  "ignore_condition" : true, \<3>
  "action_modes" : {
    "my-action" : "force_simulate" \<4>
  },
  "record_execution" : true \<5>
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/execute-watch.asciidoc: line 294: 7f37031fb40b68a61255b7c71d7eed0b.adoc
[source,console]
----
POST _watcher/watch/my_watch/_execute
{
  "action_modes" : {
    "action1" : "force_simulate",
    "action2" : "skip"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/execute-watch.asciidoc: line 310: 9cf6c7012a4f2bb562bc256aa28c3409.adoc
[source,console]
----
POST _watcher/watch/my_watch/_execute
{
  "action_modes" : {
    "_all" : "force_execute"
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/execute-watch.asciidoc: line 324: 9cd37d0ccbc66ad47ddb626564b27cc8.adoc
[source,console]
----
POST _watcher/watch/_execute
{
  "watch" : {
    "trigger" : { "schedule" : { "interval" : "10s" } },
    "input" : {
      "search" : {
        "request" : {
          "indices" : [ "logs" ],
          "body" : {
            "query" : {
              "match" : { "message": "error" }
            }
          }
        }
      }
    },
    "condition" : {
      "compare" : { "ctx.payload.hits.total" : { "gt" : 0 }}
    },
    "actions" : {
      "log_error" : {
        "logging" : {
          "text" : "Found {{ctx.payload.hits.total}} errors in the logs"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/execute-watch.asciidoc: line 361: 10b924bf6298aa6157ed00ce12f8edc1.adoc
[source,console]
----
POST _watcher/watch/_execute
{
  "ignore_condition" : true,
  "watch" : {
    "trigger" : { "schedule" : { "interval" : "10s" } },
    "input" : {
      "search" : {
        "request" : {
          "indices" : [ "logs" ],
          "body" : {
            "query" : {
              "match" : { "message": "error" }
            }
          }
        }
      }
    },
    "condition" : {
      "compare" : { "ctx.payload.hits.total" : { "gt" : 0 }}
    },
    "actions" : {
      "log_error" : {
        "logging" : {
          "text" : "Found {{ctx.payload.hits.total}} errors in the logs"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/ack-watch.asciidoc: line 47: 7a1b94de1cbb90b0f06ff8631a70236a.adoc
[source,console]
----
PUT _watcher/watch/my_watch
{
  "trigger": {
    "schedule": {
      "hourly": {
        "minute": [ 0, 5 ]
      }
    }
  },
  "input": {
    "simple": {
      "payload": {
        "send": "yes"
      }
    }
  },
  "condition": {
    "always": {}
  },
  "actions": {
    "test_index": {
      "throttle_period": "15m",
      "index": {
        "index": "test"
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/ack-watch.asciidoc: line 84: e827a9040e137410d62d10bb3b3cbb71.adoc
[source,console]
----
GET _watcher/watch/my_watch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/ack-watch.asciidoc: line 123: bdc1afd2181154bb78797360f9dbb1a0.adoc
[source,console]
----
POST _watcher/watch/my_watch/_execute
{
  "record_execution" : true
}

GET _watcher/watch/my_watch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/ack-watch.asciidoc: line 180: 1b0dc9d076bbb58c6a2953ef4323d2fc.adoc
[source,console]
----
PUT _watcher/watch/my_watch/_ack/test_index
GET _watcher/watch/my_watch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/ack-watch.asciidoc: line 236: 8051766cadded0892290bc2cc06e145c.adoc
[source,console]
----
POST _watcher/watch/my_watch/_ack/action1,action2
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/ack-watch.asciidoc: line 245: df7dbac966b67404b8bfa9cdda5ef480.adoc
[source,console]
----
POST _watcher/watch/my_watch/_ack
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/activate-watch.asciidoc: line 36: e827a9040e137410d62d10bb3b3cbb71.adoc
[source,console]
----
GET _watcher/watch/my_watch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/activate-watch.asciidoc: line 69: 3477a89d869b1f7f72d50c2ca86c4679.adoc
[source,console]
----
PUT _watcher/watch/my_watch/_activate
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/deactivate-watch.asciidoc: line 35: e827a9040e137410d62d10bb3b3cbb71.adoc
[source,console]
----
GET _watcher/watch/my_watch
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/deactivate-watch.asciidoc: line 68: f63f6343e74bd5c844854272e746de14.adoc
[source,console]
----
PUT _watcher/watch/my_watch/_deactivate
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/stats.asciidoc: line 74: 17266cee5eaaddf08e5534bf580a1910.adoc
[source,console]
----
GET _watcher/stats
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/stats.asciidoc: line 103: 3ed79871d956bfb2d6d2721d7272520c.adoc
[source,console]
----
GET _watcher/stats?metric=current_watches
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/stats.asciidoc: line 111: 56b6b50b174a935d368301ebd717231d.adoc
[source,console]
----
GET _watcher/stats/current_watches
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/stats.asciidoc: line 156: 6244204213f60edf2f23295f9059f2c9.adoc
[source,console]
----
GET _watcher/stats/queued_watches
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/stop.asciidoc: line 25: 6b1336ff477f91d4a0db0b06db546ff0.adoc
[source,console]
----
POST _watcher/_stop
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ../../x-pack/docs/en/rest-api/watcher/start.asciidoc: line 25: 97ea5ab17213cb1faaf6f3ea13607098.adoc
[source,console]
----
POST _watcher/_start
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/df-analytics/apis/dfanalyticsresources.asciidoc: line 23: 7b8afc2612fb2cdf2263cff1dead852c.adoc
[source,console]
----
PUT _ml/data_frame/analytics/loganalytics
{
  "source": {
    "index": "logdata"
  },
  "dest": {
    "index": "logdata_out"
  },
  "analysis": {
    "outlier_detection": {
    }
  },
  "analyzed_fields": {
        "includes": [ "request.bytes", "response.counts.error" ],
        "excludes": [ "source.geo" ]
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== ml/anomaly-detection/apis/jobresource.asciidoc: line 361: 07daeea2d56f43ae1229860111dae8af.adoc
[source,console]
----
POST _ml/anomaly_detectors/_validate
{
  "analysis_config" : {
    "categorization_analyzer" : {
      "tokenizer" : "ml_classic",
      "filter" : [
        { "type" : "stop", "stopwords": [
          "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday",
          "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun",
          "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December",
          "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
          "GMT", "UTC"
        ] }
      ]
    },
    "categorization_field_name": "message",
    "detectors" :[{
      "function":"count",
      "by_field_name": "mlcategory"
    }]
  },
  "data_description" : {
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
=== migration/migrate_8_0/snapshots.asciidoc: line 20: 6458a2377155ecbdd2d3ebd0e1529201.adoc
[source,console]
----
GET _snapshot/repo1/snap1
----
|===
| php | csharp

| &cross; | &cross;
|===
=== redirects.asciidoc: line 408: 4ab6d3ed4f4422cee8a590040a579be5.adoc
[source,console]
----
GET _search
{
  "query": {
    "bool": {
      "must": {
        "match": {
          "text": "quick brown fox"
        }
      },
      "filter": {
        "term": {
          "status": "published"
        }
      }
    }
  }
}
----
|===
| php | csharp

| &cross; | &cross;
|===
