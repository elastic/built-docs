<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Data stream lifecycle settings in Elasticsearch | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Data stream lifecycle settings in Elasticsearch | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="settings.html" title="Configuring Elasticsearch"/>
<link rel="prev" href="ilm-settings.html" title="Index lifecycle management settings in Elasticsearch"/>
<link rel="next" href="index-management-settings.html" title="Index management settings"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="ilm-settings.html">« Index lifecycle management settings in Elasticsearch</a>
</span>
<span class="next">
<a href="index-management-settings.html">Index management settings »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="settings.html">Configuring Elasticsearch</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Data stream lifecycle settings in Elasticsearch</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/settings/data-stream-lifecycle-settings.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="data-stream-lifecycle-settings"></a>Data stream lifecycle settings in Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/settings/data-stream-lifecycle-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>These are the settings available for configuring <a class="xref" href="data-stream-lifecycle.html" title="Data stream lifecycle">data stream lifecycle</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_cluster_level_settings_3"></a>Cluster level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/settings/data-stream-lifecycle-settings.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<a id="data-streams-lifecycle-poll-interval"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_streams.lifecycle.poll_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, <a class="xref" href="api-conventions.html#time-units" title="Time units">time unit value</a>)
How often Elasticsearch checks what is the next action for all data streams with a built-in lifecycle. Defaults to <code class="literal">5m</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-lifecycle-default-rollover"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.lifecycle.default.rollover</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, string)
This property accepts a key value pair formatted string and configures the conditions that would trigger a data stream
to <a class="xref" href="index-rollover.html" title="Rollover">rollover</a> when it has <code class="literal">lifecycle</code> configured. This property is an implementation detail and subject to
change. Currently, it defaults to <code class="literal">max_age=auto,max_primary_shard_size=50gb,min_docs=1,max_primary_shard_docs=200000000</code>,
this means that your data stream will rollover if any of the following conditions are met:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Either any primary shard reaches the size of 50GB,
</li>
<li class="listitem">
or any primary shard contains 200.000.000 documents
</li>
<li class="listitem">
or the index reaches a certain age which depends on the retention time of your data stream,
</li>
<li class="listitem">
<span class="strong strong"><strong>and</strong></span> has at least one document.
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="data-streams-lifecycle-target-merge-factor"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_streams.lifecycle.target.merge.policy.merge_factor</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, integer)
Data stream lifecycle implements <a class="xref" href="data-stream-lifecycle.html#data-streams-lifecycle-how-it-works" title="How does it work?">tail merging</a> by
updating the lucene merge policy factor for the target backing index. The merge factor
is both the number of segments that should be merged together, and the maximum number
of segments that we expect to find on a given tier.
This setting controls what value does <a class="xref" href="data-stream-lifecycle.html" title="Data stream lifecycle">Data stream lifecycle</a>
configures on the target index. It defaults to <code class="literal">16</code>.
The value will be visible under the <code class="literal">index.merge.policy.merge_factor</code> index setting
on the target index.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="data-streams-lifecycle-target-floor-segment"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_streams.lifecycle.target.merge.policy.floor_segment</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>)
Data stream lifecycle implements <a class="xref" href="data-stream-lifecycle.html#data-streams-lifecycle-how-it-works" title="How does it work?">tail merging</a> by
updating the lucene merge policy floor segment for the target backing index. This floor
segment size is a way to prevent indices from having a long tail of very small segments.
This setting controls what value does <a class="xref" href="data-stream-lifecycle.html" title="Data stream lifecycle">data stream lifecycle</a>
configures on the target index. It defaults to <code class="literal">100MB</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="data-streams-lifecycle-signalling-error-retry-interval"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_streams.lifecycle.signalling.error_retry_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#dynamic-cluster-setting">Dynamic</a>, integer)
Represents the number of retries data stream lifecycle has to perform for an index
in an error step in order to signal that the index is not progressing (i.e. it&#8217;s
stuck in an error step).
The current signalling mechanism is a log statement at the <code class="literal">error</code> level however,
the signalling mechanism can be extended in the future.
Defaults to 10 retries.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_index_level_settings_2"></a>Index level settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/settings/data-stream-lifecycle-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>The following index-level settings are typically configured on the backing indices of a data stream.</p>
<div class="variablelist">
<a id="index-lifecycle-prefer-ilm"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.prefer_ilm</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices-update-settings.html" title="Update index settings API">Dynamic</a>, boolean)
This setting determines which feature is managing the backing index of a data stream if, and only if, the backing index
has an <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management</a> (ILM) policy and the data stream has also a built-in lifecycle. When
<code class="literal">true</code> this index is managed by ILM, when <code class="literal">false</code> the backing index is managed by the data stream lifecycle.
Defaults to <code class="literal">true</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="index-data-stream-lifecycle-origination-date"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.lifecycle.origination_date</code>
</span>
</dt>
<dd>
(<a class="xref" href="indices-update-settings.html" title="Update index settings API">Dynamic</a>, long)
If specified, this is the timestamp used to calculate the backing index generation age after this backing index has been
<a class="xref" href="index-rollover.html" title="Rollover">rolled over</a>. The generation age is used to determine data retention, consequently, you can use this
setting if you create a backing index that contains older data and want to ensure that the retention period or
other parts of the lifecycle will be applied based on the data&#8217;s original timestamp and not the timestamp they got
indexed. Specified as a Unix epoch value in milliseconds.
</dd>
</dl>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ilm-settings.html">« Index lifecycle management settings in Elasticsearch</a>
</span>
<span class="next">
<a href="index-management-settings.html">Index management settings »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"python":{"hasAny":true},"ruby":{"hasAny":true},"go":{"hasAny":true},"js":{"hasAny":true}}}}</script>
  </body>
</html>
