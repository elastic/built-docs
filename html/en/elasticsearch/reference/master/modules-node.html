<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Node | Elasticsearch Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="up" href="settings.html" title="Configuring Elasticsearch"/>
<link rel="prev" href="monitoring-settings.html" title="Monitoring settings in Elasticsearch"/>
<link rel="next" href="modules-network.html" title="Networking"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
»
<span class="breadcrumb-link"><a href="settings.html">Configuring Elasticsearch</a></span>
»
<span class="breadcrumb-node">Node</span>
</div>
<div class="navheader">
<span class="prev">
<a href="monitoring-settings.html">« Monitoring settings in Elasticsearch</a>
</span>
<span class="next">
<a href="modules-network.html">Networking »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-node"></a>Node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h2>
</div></div></div>
<p>Any time that you start an instance of Elasticsearch, you are starting a <em>node</em>. A
collection of connected nodes is called a <a class="xref" href="modules-cluster.html" title="Cluster-level shard allocation and routing settings">cluster</a>. If you
are running a single node of Elasticsearch, then you have a cluster of one node.</p>
<p>Every node in the cluster can handle <a class="xref" href="modules-network.html" title="Networking">HTTP and transport</a>
traffic by default. The transport layer is used exclusively for communication
between nodes; the HTTP layer is used by REST clients.</p>
<p><a id="modules-node-description"></a>All nodes know about all the other nodes in the cluster and can forward client
requests to the appropriate node.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-roles"></a>Node roles<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>You define a node&#8217;s roles by setting <code class="literal">node.roles</code> in <code class="literal">elasticsearch.yml</code>. If you
set <code class="literal">node.roles</code>, the node is only assigned the roles you specify. If you don&#8217;t
set <code class="literal">node.roles</code>, the node is assigned the following roles:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">master</code>
</li>
<li class="listitem">
<code class="literal">data</code>
</li>
<li class="listitem">
<code class="literal">data_content</code>
</li>
<li class="listitem">
<code class="literal">data_hot</code>
</li>
<li class="listitem">
<code class="literal">data_warm</code>
</li>
<li class="listitem">
<code class="literal">data_cold</code>
</li>
<li class="listitem">
<code class="literal">data_frozen</code>
</li>
<li class="listitem">
<code class="literal">ingest</code>
</li>
<li class="listitem">
<code class="literal">ml</code>
</li>
<li class="listitem">
<code class="literal">remote_cluster_client</code>
</li>
<li class="listitem">
<code class="literal">transform</code>
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you set <code class="literal">node.roles</code>, ensure you specify every node role your cluster needs.
Some Elastic Stack features require specific node roles:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Cross-cluster search and cross-cluster replication require the <code class="literal">remote_cluster_client</code> role.
</li>
<li class="listitem">
Stack Monitoring and ingest pipelines require the <code class="literal">ingest</code> role.
</li>
<li class="listitem">
Fleet, the Elastic Security app, and transforms require the <code class="literal">transform</code> role.
The <code class="literal">remote_cluster_client</code> role is also required to use cross-cluster search with these
features.
</li>
<li class="listitem">
Machine learning features, such as anomaly detection, require the <code class="literal">ml</code> role.
</li>
</ul>
</div>
</div>
</div>
<p>As the cluster grows and in particular if you have large machine learning jobs or
continuous transforms, consider separating dedicated master-eligible nodes from
dedicated data nodes, machine learning nodes, and transform nodes.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a class="xref" href="modules-node.html#master-node" title="Master-eligible node">Master-eligible node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">master</code> role, which makes it eligible to be
<a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">elected as the <em>master</em> node</a>, which controls the cluster.
</dd>
<dt>
<span class="term">
<a class="xref" href="modules-node.html#data-node" title="Data node">Data node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">data</code> role. Data nodes hold data and perform data
related operations such as CRUD, search, and aggregations. A node with the <code class="literal">data</code> role can fill any of the specialised data node roles.
</dd>
<dt>
<span class="term">
<a class="xref" href="modules-node.html#node-ingest-node" title="Ingest node">Ingest node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">ingest</code> role. Ingest nodes are able to apply an
<a class="xref" href="pipeline.html" title="Pipeline Definition">ingest pipeline</a> to a document in order to transform and enrich the
document before indexing. With a heavy ingest load, it makes sense to use
dedicated ingest nodes and to not include the <code class="literal">ingest</code> role from nodes that have
the <code class="literal">master</code> or <code class="literal">data</code> roles.
</dd>
<dt>
<span class="term">
<a class="xref" href="modules-node.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">remote_cluster_client</code> role, which makes it eligible to act
as a remote client.
</dd>
<dt>
<span class="term">
<a class="xref" href="modules-node.html#ml-node" title="Machine learning node">Machine learning node</a>
</span>
</dt>
<dd>
A node that has <code class="literal">xpack.ml.enabled</code> and the <code class="literal">ml</code> role. If you want to use
machine learning features, there must be at least one machine learning node in your cluster. For more
information about machine learning features, see <a href="/guide/en/machine-learning/master/index.html" class="ulink" target="_top">Machine learning in
the Elastic Stack</a>.
</dd>
<dt>
<span class="term">
<a class="xref" href="modules-node.html#transform-node" title="Transform node">Transform node</a>
</span>
</dt>
<dd>
A node that has the <code class="literal">transform</code> role. If you want to use transforms, there
must be at least one transform node in your cluster. For more information, see
<a class="xref" href="transform-settings.html" title="Transforms settings in Elasticsearch">Transforms settings</a> and <a class="xref" href="transforms.html" title="Transforming data"><em>Transforming data</em></a>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Coordinating node<a id="coordinating-node"></a></h3>
<p>Requests like search requests or bulk-indexing requests may involve data held
on different data nodes. A search request, for example, is executed in two
phases which are coordinated by the node which receives the client request&#8201;&#8212;&#8201;the <em>coordinating node</em>.</p>
<p>In the <em>scatter</em> phase, the coordinating node forwards the request to the data
nodes which hold the data.  Each data node executes the request locally and
returns its results to the coordinating node. In the <em>gather</em>  phase, the
coordinating node reduces each data node&#8217;s results into a single global
result set.</p>
<p>Every node is implicitly a coordinating node. This means that a node that has
an explicit empty list of roles via <code class="literal">node.roles</code> will only act as a coordinating
node, which cannot be disabled. As a result, such a node needs to have enough
memory and CPU in order to deal with the gather phase.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="master-node"></a>Master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>The master node is responsible for lightweight cluster-wide actions such as
creating or deleting an index, tracking which nodes are part of the cluster,
and deciding which shards to allocate to which nodes. It is important for
cluster health to have a stable master node.</p>
<p>Any master-eligible node that is not a <a class="xref" href="modules-node.html#voting-only-node" title="Voting-only master-eligible node">voting-only node</a> may
be elected to become the master node by the <a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">master election
process</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Master nodes must have access to the <code class="literal">data/</code> directory (just like
<code class="literal">data</code> nodes) as this is where the cluster state is persisted between node
restarts.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="dedicated-master-node"></a>Dedicated master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h4>
</div></div></div>
<p>It is important for the health of the cluster that the elected master node has
the resources it needs to fulfill its responsibilities. If the elected master
node is overloaded with other tasks then the cluster may not operate well. In
particular, indexing and searching your data can be very resource-intensive, so
in large or high-throughput clusters it is a good idea to avoid using the
master-eligible nodes for tasks such as indexing and searching. You can do this
by configuring three of your nodes to be dedicated master-eligible nodes.
Dedicated master-eligible nodes only have the <code class="literal">master</code> role, allowing them to
focus on managing the cluster. While master nodes can also behave as
<a class="xref" href="modules-node.html#coordinating-node" title="Coordinating node">coordinating nodes</a> and route search and indexing requests
from clients to data nodes, it is better <em>not</em> to use dedicated master nodes for
this purpose.</p>
<p>To create a dedicated master-eligible node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ master ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="voting-only-node"></a>Voting-only master-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h4>
</div></div></div>
<p>A voting-only master-eligible node is a node that participates in
<a class="xref" href="modules-discovery.html" title="Discovery and cluster formation">master elections</a> but which will not act as the cluster&#8217;s
elected master node. In particular, a voting-only node can serve as a tiebreaker
in elections.</p>
<p>It may seem confusing to use the term "master-eligible" to describe a
voting-only node since such a node is not actually eligible to become the master
at all. This terminology is an unfortunate consequence of history:
master-eligible nodes are those nodes that participate in elections and perform
certain tasks during cluster state publications, and voting-only nodes have the
same responsibilities even if they can never become the elected master.</p>
<p>To configure a master-eligible node as a voting-only node, include <code class="literal">master</code> and
<code class="literal">voting_only</code> in the list of roles. For example to create a voting-only data
node:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data, master, voting_only ]</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only nodes with the <code class="literal">master</code> role can be marked as having the
<code class="literal">voting_only</code> role.</p>
</div>
</div>
<p>High availability (HA) clusters require at least three master-eligible nodes, at
least two of which are not voting-only nodes. Such a cluster will be able to
elect a master node even if one of the nodes fails.</p>
<p>Since voting-only nodes never act as the cluster&#8217;s elected master, they may
require less heap and a less powerful CPU than the true master nodes.
However all master-eligible nodes, including voting-only nodes, require
reasonably fast persistent storage and a reliable and low-latency network
connection to the rest of the cluster, since they are on the critical path for
<a class="xref" href="cluster-state-publishing.html" title="Publishing the cluster state">publishing cluster state updates</a>.</p>
<p>Voting-only master-eligible nodes may also fill other roles in your cluster.
For instance, a node may be both a data node and a voting-only master-eligible
node. A <em>dedicated</em> voting-only master-eligible nodes is a voting-only
master-eligible node that fills no other roles in the cluster. To create a
dedicated voting-only master-eligible node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ master, voting_only ]</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-node"></a>Data node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Data nodes hold the shards that contain the documents you have indexed. Data
nodes handle data related operations like CRUD, search, and aggregations.
These operations are I/O-, memory-, and CPU-intensive. It is important to
monitor these resources and to add more data nodes if they are overloaded.</p>
<p>The main benefit of having dedicated data nodes is the separation of the master
and data roles.</p>
<p>To create a dedicated data node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data ]</pre>
</div>
<p>In a multi-tier deployment architecture, you use specialized data roles to
assign data nodes to specific tiers: <code class="literal">data_content</code>,<code class="literal">data_hot</code>, <code class="literal">data_warm</code>,
<code class="literal">data_cold</code>, or <code class="literal">data_frozen</code>. A node can belong to multiple tiers, but a node
that has one of the specialized data roles cannot have the generic <code class="literal">data</code> role.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-content-node"></a><span class="x-pack">Content data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Content data nodes accommodate user-created content. They enable operations like CRUD,
search and aggregations.</p>
<p>To create a dedicated content node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_content ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-hot-node"></a><span class="x-pack">Hot data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Hot data nodes store time series data as it enters Elasticsearch. The hot tier must be fast for
both reads and writes, and requires more hardware resources (such as SSD drives).</p>
<p>To create a dedicated hot node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_hot ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-warm-node"></a><span class="x-pack">Warm data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Warm data nodes store indices that are no longer being regularly updated, but are still being
queried. Query volume is usually at a lower frequency than it was while the index was in the hot tier.
Less performant hardware can usually be used for nodes in this tier.</p>
<p>To create a dedicated warm node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_warm ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-cold-node"></a><span class="x-pack">Cold data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Cold data nodes store read-only indices that are accessed less frequently. This tier uses less performant hardware and may leverage searchable snapshot indices to minimize the resources required.</p>
<p>To create a dedicated cold node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_cold ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-frozen-node"></a><span class="x-pack">Frozen data node</span><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Frozen data nodes store read-only indices that are accessed rarely. Nodes in the
frozen tier use less performant hardware than the cold tier. To minimize
resources, indices in the frozen tier may rely on searchable snapshots for
resiliency.</p>
<p>To create a dedicated frozen node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ data_frozen ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="node-ingest-node"></a>Ingest node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Ingest nodes can execute pre-processing pipelines, composed of one or more
ingest processors. Depending on the type of operations performed by the ingest
processors and the required resources, it may make sense to have dedicated
ingest nodes, that will only perform this specific task.</p>
<p>To create a dedicated ingest node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ingest ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="coordinating-only-node"></a>Coordinating only node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>If you take away the ability to be able to handle master duties, to hold data,
and pre-process documents, then you are left with a <em>coordinating</em> node that
can only route requests, handle the search reduce phase, and distribute bulk
indexing. Essentially, coordinating only nodes behave as smart load balancers.</p>
<p>Coordinating only nodes can benefit large clusters by offloading the
coordinating node role from data and master-eligible nodes.  They join the
cluster and receive the full <a class="xref" href="cluster-state.html" title="Cluster state API">cluster state</a>, like every other
node, and they use the cluster state to route requests directly to the
appropriate place(s).</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Adding too many coordinating only nodes to a cluster can increase the
burden on the entire cluster because the elected master node must await
acknowledgement of cluster state updates from every node! The benefit of
coordinating only nodes should not be overstated&#8201;&#8212;&#8201;data nodes can happily
serve the same purpose.</p>
</div>
</div>
<p>To create a dedicated coordinating node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-node"></a>Remote-eligible node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>A remote-eligible node acts as a cross-cluster client and connects to
<a class="xref" href="modules-remote-clusters.html" title="Remote clusters">remote clusters</a>. Once connected, you can search
remote clusters using <a class="xref" href="modules-cross-cluster-search.html" title="Search across clusters">cross-cluster search</a>. You can also sync
data between clusters using <a class="xref" href="xpack-ccr.html" title="Cross-cluster replication">cross-cluster replication</a>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ remote_cluster_client ]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-node"></a><span class="xpack">Machine learning node</span><a class="xpack_tag" href="/subscriptions"></a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>The machine learning features provide machine learning nodes, which run jobs and handle machine learning API
requests. If <code class="literal">xpack.ml.enabled</code> is set to <code class="literal">true</code> and the node does not have the
<code class="literal">ml</code> role, the node can service API requests but it cannot run jobs.</p>
<p>If you want to use machine learning features in your cluster, you must enable machine learning
(set <code class="literal">xpack.ml.enabled</code> to <code class="literal">true</code>) on all master-eligible nodes. If you want to
use machine learning features in clients (including Kibana), it must also be enabled on all
coordinating nodes.</p>
<p>For more information about these settings, see <a class="xref" href="ml-settings.html" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.</p>
<p>To create a dedicated machine learning node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ ml, remote_cluster_client] <a id="CO7-1"></a><i class="conum" data-value="1"></i>
xpack.ml.enabled: true <a id="CO7-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO7-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">remote_cluster_client</code> role is optional but strongly recommended.
Otherwise, cross-cluster search fails when used in machine learning jobs or datafeeds. See <a class="xref" href="modules-node.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO7-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">xpack.ml.enabled</code> setting is enabled by default.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="transform-node"></a><span class="xpack">Transform node</span><a class="xpack_tag" href="/subscriptions"></a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Transform nodes run transforms and handle transform API requests. For
more information, see <a class="xref" href="transform-settings.html" title="Transforms settings in Elasticsearch">Transforms settings</a>.</p>
<p>To create a dedicated transform node, set:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.roles: [ transform, remote_cluster_client ] <a id="CO8-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">remote_cluster_client</code> role is optional but strongly recommended.
Otherwise, cross-cluster search fails when used in transforms. See <a class="xref" href="modules-node.html#remote-node" title="Remote-eligible node">Remote-eligible node</a>.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="change-node-role"></a>Changing the role of a node<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Each data node maintains the following data on disk:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the shard data for every shard allocated to that node,
</li>
<li class="listitem">
the index metadata corresponding with every shard allocated to that node, and
</li>
<li class="listitem">
the cluster-wide metadata, such as settings and index templates.
</li>
</ul>
</div>
<p>Similarly, each master-eligible node maintains the following data on disk:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
the index metadata for every index in the cluster, and
</li>
<li class="listitem">
the cluster-wide metadata, such as settings and index templates.
</li>
</ul>
</div>
<p>Each node checks the contents of its data path at startup. If it discovers
unexpected data then it will refuse to start. This is to avoid importing
unwanted <a class="xref" href="modules-gateway-dangling-indices.html" title="Dangling indices">dangling indices</a> which can lead
to a red cluster health. To be more precise, nodes without the <code class="literal">data</code> role will
refuse to start if they find any shard data on disk at startup, and nodes
without both the <code class="literal">master</code> and <code class="literal">data</code> roles will refuse to start if they have any
index metadata on disk at startup.</p>
<p>It is possible to change the roles of a node by adjusting its
<code class="literal">elasticsearch.yml</code> file and restarting it. This is known as <em>repurposing</em> a
node. In order to satisfy the checks for unexpected data described above, you
must perform some extra steps to prepare a node for repurposing when starting
the node without the <code class="literal">data</code> or <code class="literal">master</code> roles.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you want to repurpose a data node by removing the <code class="literal">data</code> role then you
should first use an <a class="xref" href="allocation-filtering.html" title="Cluster-level shard allocation filtering">allocation filter</a> to safely
migrate all the shard data onto other nodes in the cluster.
</li>
<li class="listitem">
If you want to repurpose a node to have neither the <code class="literal">data</code> nor <code class="literal">master</code> roles
then it is simplest to start a brand-new node with an empty data path and the
desired roles. You may find it safest to use an
<a class="xref" href="allocation-filtering.html" title="Cluster-level shard allocation filtering">allocation filter</a> to migrate the shard data elsewhere
in the cluster first.
</li>
</ul>
</div>
<p>If it is not possible to follow these extra steps then you may be able to use
the <a class="xref" href="node-tool.html#node-tool-repurpose" title="Changing the role of a node"><code class="literal">elasticsearch-node repurpose</code></a> tool to delete any
excess data that prevents a node from starting.</p>
<h3><a id="_node_data_path_settings"></a>Node data path settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="data-path"></a><code class="literal">path.data</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
</div></div></div>
<p>Every data and master-eligible node requires access to a data directory where
shards and index and cluster metadata will be stored. The <code class="literal">path.data</code> defaults
to <code class="literal">$ES_HOME/data</code> but can be configured in the <code class="literal">elasticsearch.yml</code> config
file an absolute path or a path relative to <code class="literal">$ES_HOME</code> as follows:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path.data:  /var/elasticsearch/data</pre>
</div>
<p>Like all node settings, it can also be specified on the command line as:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./bin/elasticsearch -Epath.data=/var/elasticsearch/data</pre>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>When using the <code class="literal">.zip</code> or <code class="literal">.tar.gz</code> distributions, the <code class="literal">path.data</code> setting
should be configured to locate the data directory outside the Elasticsearch home
directory, so that the home directory can be deleted without deleting your data!
The RPM and Debian distributions do this for you already.</p>
</div>
</div>
<h3><a id="other-node-settings"></a>Other node settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc">edit</a></h3>
<p>More node settings can be found in <a class="xref" href="settings.html" title="Configuring Elasticsearch"><em>Configuring Elasticsearch</em></a> and <a class="xref" href="important-settings.html" title="Important Elasticsearch configuration"><em>Important Elasticsearch configuration</em></a>,
including:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="important-settings.html#cluster-name" title="Cluster name setting"><code class="literal">cluster.name</code></a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#node-name" title="Node name setting"><code class="literal">node.name</code></a>
</li>
<li class="listitem">
<a class="xref" href="modules-network.html" title="Networking">network settings</a>
</li>
</ul>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="monitoring-settings.html">« Monitoring settings in Elasticsearch</a>
</span>
<span class="next">
<a href="modules-network.html">Networking »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"csharp":{"hasAny":true},"python":{"hasAny":true},"ruby":{"hasAny":true},"go":{"hasAny":true},"js":{"hasAny":true}}}}</script>
  </body>
</html>
