<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Semantic text field type | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Semantic text field type | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="mapping-types.html" title="Field data types"/>
<link rel="prev" href="search-as-you-type.html" title="Search-as-you-type field type"/>
<link rel="next" href="shape.html" title="Shape field type"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="search-as-you-type.html">« Search-as-you-type field type</a>
</span>
<span class="next">
<a href="shape.html">Shape field type »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="mapping-types.html">Field data types</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Semantic text field type</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="semantic-text"></a>Semantic text field type<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>The <code class="literal">semantic_text</code> field type automatically generates embeddings for text
content using an inference endpoint.</p>
<p>The <code class="literal">semantic_text</code> field type specifies an inference endpoint identifier that will be used to generate embeddings.
You can create the inference endpoint by using the <a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>.
This field type and the <a class="xref" href="query-dsl-semantic-query.html" title="Semantic query"><code class="literal">semantic</code> query</a> type make it simpler to perform semantic search on your data.</p>
<p>Using <code class="literal">semantic_text</code>, you won&#8217;t need to specify how to generate embeddings for
your data, or how to index it. The inference endpoint automatically determines
the embedding generation, indexing, and query to use.</p>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "my-index-000001",
  mappings: {
    properties: {
      inference_field: {
        type: "semantic_text",
        inference_id: "my-elser-endpoint",
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="19f1f9f25933f8e7aba59a10881c648b"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "inference_field": {
        "type": "semantic_text",
        "inference_id": "my-elser-endpoint"
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/301.console"></div>
<h4><a id="semantic-text-params"></a>Parameters for <code class="literal">semantic_text</code> fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">inference_id</code>
</span>
</dt>
<dd>
(Required, string)
Inference endpoint that will be used to generate the embeddings for the field.
Use the <a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a> to create the endpoint.
</dd>
</dl>
</div>
<h4><a id="infer-endpoint-validation"></a>Inference endpoint validation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<p>The <code class="literal">inference_id</code> will not be validated when the mapping is created, but when documents are ingested into the index.
When the first document is indexed, the <code class="literal">inference_id</code> will be used to generate underlying indexing structures for the field.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Removing an inference endpoint will cause ingestion of documents and semantic queries to fail on indices that define <code class="literal">semantic_text</code> fields with that inference endpoint as their <code class="literal">inference_id</code>.
Trying to <a class="xref" href="delete-inference-api.html" title="Delete inference API">delete an inference endpoint</a> that is used on a <code class="literal">semantic_text</code> field will result in an error.</p>
</div>
</div>
<h4><a id="auto-text-chunking"></a>Automatic text chunking<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<p>Inference endpoints have a limit on the amount of text they can process.
To allow for large amounts of text to be used in semantic search, <code class="literal">semantic_text</code> automatically generates smaller passages if needed, called <em>chunks</em>.</p>
<p>Each chunk will include the text subpassage and the corresponding embedding generated from it.
When querying, the individual passages will be automatically searched for each document, and the most relevant passage will be used to compute a score.</p>
<p>Documents are split into 250-word sections with a 100-word overlap so that each section shares 100 words with the previous section.
This overlap ensures continuity and prevents vital contextual information in the input text from being lost by a hard break.</p>
<h4><a id="semantic-text-structure"></a><code class="literal">semantic_text</code> structure<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<p>Once a document is ingested, a <code class="literal">semantic_text</code> field will have the following structure:</p>
<a id="08ac29f8fbac92b4f7fd58f00fb1fc25"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">"inference_field": {
  "text": "these are not the droids you're looking for", <a id="CO88-1"></a><i class="conum" data-value="1"></i>
  "inference": {
    "inference_id": "my-elser-endpoint", <a id="CO88-2"></a><i class="conum" data-value="2"></i>
    "model_settings": { <a id="CO88-3"></a><i class="conum" data-value="3"></i>
      "task_type": "sparse_embedding"
    },
    "chunks": [ <a id="CO88-4"></a><i class="conum" data-value="4"></i>
      {
        "text": "these are not the droids you're looking for",
        "embeddings": {
          (...)
        }
      }
    ]
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO88-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field will become an object structure to accommodate both the original
text and the inference results.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO88-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">inference_id</code> used to generate the embeddings.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO88-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Model settings, including the task type and dimensions/similarity if
applicable.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO88-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Inference results will be grouped in chunks, each with its corresponding
text and embeddings.</p>
</td>
</tr>
</table>
</div>
<p>Refer to <a class="xref" href="semantic-search-semantic-text.html" title="Tutorial: semantic search with semantic_text">this tutorial</a> to learn more about
semantic search using <code class="literal">semantic_text</code> and the <code class="literal">semantic</code> query.</p>
<h4><a id="custom-indexing"></a>Customizing <code class="literal">semantic_text</code> indexing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<p><code class="literal">semantic_text</code> uses defaults for indexing data based on the inference endpoint
specified. It enables you to quickstart your semantic search by providing
automatic inference and a dedicated query so you don&#8217;t need to provide further
details.</p>
<p>In case you want to customize data indexing, use the
<a class="xref" href="sparse-vector.html" title="Sparse vector field type"><code class="literal">sparse_vector</code></a> or <a class="xref" href="dense-vector.html" title="Dense vector field type"><code class="literal">dense_vector</code></a> field
types and create an ingest pipeline with an
<a class="xref" href="inference-processor.html" title="Inference processor">inference processor</a> to generate the embeddings.
<a class="xref" href="semantic-search-inference.html" title="Tutorial: semantic search with the inference API">This tutorial</a> walks you through the process. In
these cases - when you use <code class="literal">sparse_vector</code> or <code class="literal">dense_vector</code> field types instead
of the <code class="literal">semantic_text</code> field type to customize indexing - using the
<a class="xref" href="query-dsl-semantic-query.html" title="Semantic query"><code class="literal">semantic_query</code></a> is not supported for querying the
field data.</p>
<h4><a id="update-script"></a>Updates to <code class="literal">semantic_text</code> fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<p>Updates that use scripts are not supported for an index contains a <code class="literal">semantic_text</code> field.
Even if the script targets non-<code class="literal">semantic_text</code> fields, the update will fail when the index contains a <code class="literal">semantic_text</code> field.</p>
<h4><a id="copy-to-support"></a><code class="literal">copy_to</code> support<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<p>The <code class="literal">semantic_text</code> field type can be the target of
<a class="xref" href="copy-to.html" title="copy_to"><code class="literal">copy_to</code> fields</a>. This means you can use a single <code class="literal">semantic_text</code>
field to collect the values of other fields for semantic search. Each value has
its embeddings calculated separately; each field value is a separate set of chunk(s) in
the resulting embeddings.</p>
<p>This imposes a restriction on bulk requests and ingestion pipelines that update documents with <code class="literal">semantic_text</code> fields.
In these cases, all fields that are copied to a <code class="literal">semantic_text</code> field, including the <code class="literal">semantic_text</code> field value, must have a value to ensure every embedding is calculated correctly.</p>
<p>For example, the following mapping:</p>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "test-index",
  mappings: {
    properties: {
      infer_field: {
        type: "semantic_text",
        inference_id: "my-elser-endpoint",
      },
      source_field: {
        type: "text",
        copy_to: "infer_field",
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="8593715fcc70315a0816b435551258e0"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">PUT test-index
{
    "mappings": {
        "properties": {
            "infer_field": {
                "type": "semantic_text",
                "inference_id": "my-elser-endpoint"
            },
            "source_field": {
                "type": "text",
                "copy_to": "infer_field"
            }
        }
    }
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/302.console"></div>
<p>Will need the following bulk update request to ensure that <code class="literal">infer_field</code> is updated correctly:</p>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.bulk({
  index: "test-index",
  operations: [
    {
      update: {
        _id: "1",
      },
    },
    {
      doc: {
        infer_field: "updated inference field",
        source_field: "updated source field",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="38ba93890494bfa7beece58dffa44f98"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">PUT test-index/_bulk
{"update": {"_id": "1"}}
{"doc": {"infer_field": "updated inference field", "source_field": "updated source field"}}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/303.console"></div>
<p>Notice that both the <code class="literal">semantic_text</code> field and the source field are updated in the bulk request.</p>
<h4><a id="limitations"></a>Limitations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/mapping/types/semantic-text.asciidoc">edit</a></h4>
<p><code class="literal">semantic_text</code> field types have the following limitations:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">semantic_text</code> fields are not currently supported as elements of <a class="xref" href="nested.html" title="Nested field type">nested fields</a>.
</li>
<li class="listitem">
<code class="literal">semantic_text</code> fields can&#8217;t be defined as <a class="xref" href="multi-fields.html" title="fields">multi-fields</a> of another field, nor can they contain other fields as multi-fields.
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="search-as-you-type.html">« Search-as-you-type field type</a>
</span>
<span class="next">
<a href="shape.html">Shape field type »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {"alternatives":{"console":{"php":{"hasAny":true},"python":{"hasAny":true},"ruby":{"hasAny":true},"go":{"hasAny":true},"js":{"hasAny":true}}}}</script>
  </body>
</html>
