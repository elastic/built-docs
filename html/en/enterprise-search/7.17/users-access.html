<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Manage users and access to Enterprise Search | Elastic Enterprise Search Documentation [7.17] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Enterprise Search Documentation [7.17]"/>
<link rel="up" href="index.html" title="Elastic Enterprise Search Documentation [7.17]"/>
<link rel="prev" href="configure-ssl-tls.html" title="Configure SSL/TLS"/>
<link rel="next" href="saml-idp.html" title="Set up Enterprise Search with SAML 2.0 single sign-on (SSO)"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search/Guide/7.17"/>
<meta name="DC.subject" content="Enterprise Search"/>
<meta name="DC.identifier" content="7.17"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elastic Enterprise Search Documentation [7.17]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="configure-ssl-tls.html">« Configure SSL/TLS</a>
</span>
<span class="next">
<a href="saml-idp.html">Set up Enterprise Search with SAML 2.0 single sign-on (SSO) »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="users-access"></a>Manage users and access to Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h1>
</div></div></div>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To quickly get started managing users and access to App Search or Workplace Search, see the following guides within the product-specific documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a>
</li>
</ul>
</div>
</div>
</div>
<p>You can manage users and their access to Enteprise Search entirely within App Search and Workplace Search.
Or you can manage <em>access</em> to Enterprise Search separately from where you manage your <em>users</em>.</p>
<p>When managing access, you separately manage access to <em>App Search</em>, <em>Workplace Search</em>, and <em>Enterprise Search management APIs</em>.
However, App Search and Workplace Search are both affected by an Enterprise Search setting called <em>role-based access control (RBAC)</em>.
You can also <em>reset access</em> to Enterprise Search.</p>
<p>When managing users, you manage them within <em>App Search</em>, <em>Workplace Search</em>, the <em>Elastic Stack</em>, or <em>external identity providers</em>.
In addition to managed users, you can access Enterprise Search using several <em>default users</em>.
You can <em>recover</em> users if you lose access, but the process varies by type of user or deployment.</p>
<p>Since 7.14.0, Enterprise Search shares users with the Elastic Stack and will automatically migrate <em>standard</em> users when upgrading from earlier versions.</p>
<p>Use the following sections to learn more about these topics:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><a class="xref" href="users-access.html#users-access-manage-access" title="Manage users' access to Enterprise Search">Manage users' access to Enterprise Search</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-access-app-search" title="Manage users' access to App Search">Manage users' access to App Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-access-workplace-search" title="Manage users' access to Workplace Search">Manage users' access to Workplace Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-access-enterprise-search" title="Manage users' access to Enterprise Search management APIs">Manage users' access to Enterprise Search management APIs</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="users-access.html#users-access-rbac" title="Enterprise Search role-based access control (RBAC)">Enterprise Search role-based access control (RBAC)</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-enable-rbac" title="Enable Enterprise Search RBAC">Enable Enterprise Search RBAC</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-disable-rbac" title="Disable Enterprise Search RBAC">Disable Enterprise Search RBAC</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-reset-access" title="Reset access to Enterprise Search">Reset access to Enterprise Search</a>
</li>
<li class="listitem">
<p><a class="xref" href="users-access.html#users-access-manage-users" title="Manage users for your Elastic deployment">Manage users for your Elastic deployment</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-app-search" title="Manage users using App Search">Manage users using App Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-workplace-search" title="Manage users using Workplace Search">Manage users using Workplace Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-elastic-stack" title="Manage users using the Elastic Stack">Manage users using the Elastic Stack</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-idps" title="Manage users using external identity provider services (IdPs)">Manage users using external identity provider services (IdPs)</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-elastic-cloud" title="Manage users using Elastic Cloud">Manage users using Elastic Cloud</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="users-access.html#users-access-default-users" title="Default users">Default users</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-default-users-elastic-cloud" title="Elastic Cloud user">Elastic Cloud user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-default-users-elastic" title="elastic user"><code class="literal">elastic</code> user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-default-users-enterprise-search" title="enterprise_search user"><code class="literal">enterprise_search</code> user</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="users-access.html#users-access-recover-users" title="Recover users for your Elastic deployment">Recover users for your Elastic deployment</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-as-self" title="Recover your own user account">Recover your own user account</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-as-superuser" title="Recover users as a superuser">Recover users as a superuser</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-elastic-cloud" title="Recover the Elastic Cloud user">Recover the Elastic Cloud user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-elastic" title="Recover the elastic user">Recover the <code class="literal">elastic</code> user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-enterprise-search" title="Recover the enterprise_search user">Recover the <code class="literal">enterprise_search</code> user</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="users-access.html#user-access-configure" title="Configure users and access">Configure users and access</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-saml" title="Set up a SAML 2.0 identity provider service (SAML IdP) for Enterprise Search">Set up a SAML 2.0 identity provider service (SAML IdP) for Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-oidc" title="Set up OpenID Connect provider service (SSO) for Enterprise Search">Set up OpenID Connect provider service (SSO) for Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-ldap" title="Set up LDAP for Enterprise Search">Set up LDAP for Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-active-directory" title="Set up Active Directory for Enterprise Search">Set up Active Directory for Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-pki" title="Set up PKI user authentication for Enterprise Search">Set up PKI user authentication for Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-preferred" title="Set a preferred authentication provider for Enterprise Search in Kibana">Set a preferred authentication provider for Enterprise Search in Kibana</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-upgrade-from-7-13" title="Upgrade from Enterprise Search 7.13 and earlier">Upgrade from Enterprise Search 7.13 and earlier</a>
</li>
</ul>
</div>
<h3><a id="users-access-manage-access"></a>Manage users' access to Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<p>Users of your Elastic deployment may need access to App Search, Workplace Search, and the Enterprise Search management APIs.
You grant access to each of these interfaces separately.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-access-app-search" title="Manage users' access to App Search">Manage users' access to App Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-access-workplace-search" title="Manage users' access to Workplace Search">Manage users' access to Workplace Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-access-enterprise-search" title="Manage users' access to Enterprise Search management APIs">Manage users' access to Enterprise Search management APIs</a>
</li>
</ul>
</div>
<h4><a id="users-access-manage-access-app-search"></a>Manage users' access to App Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>Users' access to App Search is determined by App Search roles and engine assignments.</p>
<p>You can manage users and their access together within App Search.
Or you can manage users outside of App Search and control access through App Search role mappings.
App Search provides default mappings, and you can define your own custom mappings.</p>
<p>See <a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a> in the App Search documentation.</p>
<h4><a id="users-access-manage-access-workplace-search"></a>Manage users' access to Workplace Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>Users' access to Workplace Search is determined by Workplace Search roles and group assignments.</p>
<p>You can manage users and their access together within Workplace Search.
Or you can manage users outside of Workplace Search and control access through Workplace Search role mappings.
Workplace Search provides default mappings, and you can define your own custom mappings.</p>
<p>See <a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a> in the Workplace Search documentation.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>Disabling App Search access for standard users</strong></span></p>
<p>A common use case for Workplace Search is to redirect <span class="strong strong"><strong>standard users</strong></span> to the search application after they log in.
In some circumstances, users may have access to App Search when they log in.
They will be directed to a product selector instead of being directed to the Workplace Search search experience.</p>
<p>You will need to disable App Search access for these users:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log into App Search and enable <a class="xref" href="users-access.html#users-access-rbac" title="Enterprise Search role-based access control (RBAC)">role-based access control (RBAC)</a> (enabled by default in older versions of App Search).
</li>
<li class="listitem">
Remove App Search role mappings for standard users. Ensure at least one user, such as <code class="literal">superadminuser</code>, retains access to App Search.
</li>
</ol>
</div>
</div>
</div>
<h4><a id="users-access-manage-access-enterprise-search"></a>Manage users' access to Enterprise Search management APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>Enterprise Search has management APIs for health, status, and other functions useful to operators.</p>
<p>You manage access to these APIs differently than access to App Search or Workplace Search.
Refer to the API reference for each API operation.</p>
<p>See <a class="xref" href="management-apis.html" title="Management APIs"><em>Management APIs</em></a>.</p>
<h3><a id="users-access-rbac"></a>Enterprise Search role-based access control (RBAC)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<p>Access to App Search and Workplace Search is affected by an Enterprise Search setting called <em>role-based access control (RBAC)</em>.</p>
<p>When Enterprise Search RBAC is disabled, most users of your deployment have full access to App Search and Workplace Search.
This is the default setting for new deployments.</p>
<p>To restrict users' access, you must enable RBAC.
You can enable RBAC from either App Search <span class="strong strong"><strong>or</strong></span> Workplace Search, but once enabled, the setting applies to <span class="strong strong"><strong>both</strong></span> products.</p>
<p>To enable and disable Enterprise Search RBAC, see the following sections:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-enable-rbac" title="Enable Enterprise Search RBAC">Enable Enterprise Search RBAC</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-disable-rbac" title="Disable Enterprise Search RBAC">Disable Enterprise Search RBAC</a>
</li>
</ul>
</div>
<p>Enabling RBAC changes the <em>default</em> mappings for both App Search and Workplace Search.
The default mappings change from <em>permissive</em> to <em>restrictive</em>.
For details, see the following sections in the product-specific documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html#security-role-mappings-default" class="ulink" target="_blank" rel="noopener">Default App Search mappings</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html#security-role-mappings-default" class="ulink" target="_blank" rel="noopener">Default Workplace Search mappings</a>
</li>
</ul>
</div>
<p>To use <em>custom</em> mappings within App Search or Workplace Search, you must enable RBAC.
Activating RBAC from <span class="strong strong"><strong>either</strong></span> product enables custom mappings for <span class="strong strong"><strong>both</strong></span> products.
For details, see the following sections in the product-specific documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html#security-role-mappings-custom" class="ulink" target="_blank" rel="noopener">Custom App Search mappings</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html#security-role-mappings-custom" class="ulink" target="_blank" rel="noopener">Custom Workplace Search mappings</a>
</li>
</ul>
</div>
<h4><a id="users-access-enable-rbac"></a>Enable Enterprise Search RBAC<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><a href="/guide/en/elasticsearch/reference/7.17/built-in-roles.html#built-in-roles-superuser" class="ulink" target="_blank" rel="noopener"><code class="literal">superuser</code></a> privileges are required to enable RBAC.</p>
</div>
</div>
<p>You can enable RBAC from either App Search <span class="strong strong"><strong>or</strong></span> Workplace Search, but once enabled, the setting applies to <span class="strong strong"><strong>both</strong></span> products.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open the management interface for App Search or Workplace Search.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Users and roles</strong></span>.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Enable role-based access</strong></span>.
</li>
</ol>
</div>
<p>If this button is not present, RBAC is already enabled.</p>
<p>Enable RBAC in App Search:</p>
<div class="imageblock">
<div class="content">
<img src="images/enable-rbac-app-search.png" alt="enable rbac app search">
</div>
</div>
<p>Enable RBAC in Workplace Search:</p>
<div class="imageblock">
<div class="content">
<img src="images/enable-rbac-workplace-search.png" alt="enable rbac workplace search">
</div>
</div>
<h4><a id="users-access-disable-rbac"></a>Disable Enterprise Search RBAC<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>There are two ways to disable Enterprise Search RBAC:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Remove all App Search role mappings and Workplace Search role mappings.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
See <a href="/guide/en/app-search/7.17/security-and-users.html#security-role-mappings-custom" class="ulink" target="_blank" rel="noopener">Custom App Search mappings</a> in the App Search documentation.
</li>
<li class="listitem">
See <a href="/guide/en/workplace-search/7.17/workplace-search-security.html#security-role-mappings-custom" class="ulink" target="_blank" rel="noopener">Custom Workplace Search mappings</a> in the Worklpace Search documentation.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Reset access to Enterprise Search.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
See <a class="xref" href="users-access.html#users-access-reset-access" title="Reset access to Enterprise Search">Reset access to Enterprise Search</a>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<h3><a id="users-access-reset-access"></a>Reset access to Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<p>You can reset access to Enterprise Search.</p>
<div class="caution admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is a destructive process.
Carefully review the following effects before performing this action.</p>
</div>
</div>
<p>Resetting access to Enterprise Search performs the following operations:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Removes all custom role mappings for App Search and Workplace Search.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
See <a href="/guide/en/app-search/7.17/security-and-users.html#security-role-mappings-custom" class="ulink" target="_blank" rel="noopener">Custom App Search mappings</a> in the App Search documentation.
</li>
<li class="listitem">
See <a href="/guide/en/workplace-search/7.17/workplace-search-security.html#security-role-mappings-custom" class="ulink" target="_blank" rel="noopener">Custom Workplace Search mappings</a> in the Worklpace Search documentation.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Disables Enterprise Search role-based access control.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
See <a class="xref" href="users-access.html#users-access-rbac" title="Enterprise Search role-based access control (RBAC)">Enterprise Search role-based access control (RBAC)</a>.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Generates a new password for the <code class="literal">enterprise_search</code> user.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
See <a class="xref" href="users-access.html#users-access-default-users-enterprise-search" title="enterprise_search user"><code class="literal">enterprise_search</code> user</a>.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>Reset access to Enterprise Search using the command line interface:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">bin/enterprise-search --reset-auth</pre>
</div>
<h3><a id="users-access-manage-users"></a>Manage users for your Elastic deployment<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<p>You can manage users for your Elastic deployment within App Search or Workplace Search, or within a variety of other interfaces.</p>
<p>The application or service that provides the user management interface is called an <em>identity provider</em>.
You can use your Elastic deployment or Elastic Cloud as identity providers, and you can set up any number of external identity providers.</p>
<p>A <em>user</em> or <em>user account</em> is composed of an identifier and other attributes.
These may include <code class="literal">username</code>, <code class="literal">email</code>, <code class="literal">role</code>, and any number of other attributes defined by the identity provider.</p>
<p>Each user management interface permits different management operations, such as listing, creating, inviting, modifying, and deleting users and their attributes.</p>
<p>Manage users for your Elastic deployment within any of the following interfaces:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-app-search" title="Manage users using App Search">Manage users using App Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-workplace-search" title="Manage users using Workplace Search">Manage users using Workplace Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-elastic-stack" title="Manage users using the Elastic Stack">Manage users using the Elastic Stack</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-idps" title="Manage users using external identity provider services (IdPs)">Manage users using external identity provider services (IdPs)</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-manage-users-elastic-cloud" title="Manage users using Elastic Cloud">Manage users using Elastic Cloud</a>
</li>
</ul>
</div>
<h4><a id="users-access-manage-users-app-search"></a>Manage users using App Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>You can create, invite, list, and modify users directly within App Search.
Within App Search, you create users and give them access to App Search at the same time.</p>
<p>See <a href="/guide/en/app-search/7.17/security-and-users.html#security-users" class="ulink" target="_blank" rel="noopener">Manage users within App Search</a> in the App Search documentation.</p>
<p>To manage users within App Search, you must enable Enterprise Search role-based access control (RBAC).
Enabling this setting also affects the default mappings for App Search and Workplace Search.
See <a class="xref" href="users-access.html#users-access-rbac" title="Enterprise Search role-based access control (RBAC)">Enterprise Search role-based access control (RBAC)</a>.</p>
<p>The users you create within App Search are <em>native</em> Elastic users and can be granted access to Elastic features outside of App Search.
See <a href="/guide/en/elasticsearch/reference/7.17/native-realm.html" class="ulink" target="_blank" rel="noopener">Native user authentication</a> in the Elasticsearch documentation.</p>
<h4><a id="users-access-manage-users-workplace-search"></a>Manage users using Workplace Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>You can create, invite, list, and modify users directly within Workplace Search.
Within Workplace Search, you create users and give them access to Workplace Search at the same time.</p>
<p>See <a href="/guide/en/workplace-search/7.17/workplace-search-security.html#security-users" class="ulink" target="_blank" rel="noopener">Manage users within Workplace Search</a> in the Workplace Search documentation.</p>
<p>To manage users within Workplace Search, you must enable Enterprise Search role-based access control (RBAC).
Enabling this setting also affects the default mappings for Workplace Search and Workplace Search.
See <a class="xref" href="users-access.html#users-access-rbac" title="Enterprise Search role-based access control (RBAC)">Enterprise Search role-based access control (RBAC)</a>.</p>
<p>The users you create within Workplace Search are <em>native</em> Elastic users and can be granted access to Elastic features outside of Workplace Search.
See <a href="/guide/en/elasticsearch/reference/7.17/native-realm.html" class="ulink" target="_blank" rel="noopener">Native user authentication</a> in the Elasticsearch documentation.</p>
<h4><a id="users-access-manage-users-elastic-stack"></a>Manage users using the Elastic Stack<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>You may want to manage users outside of App Search and Workplace Search, particularly if you want to permit broad access to Elastic features.
This may include access to other Elastic solutions, apps, and features.</p>
<p>Elasticsearch and Kibana provide UI, API, CLI, and file interfaces to manage users for your Elastic deployment.
To manage users within these interfaces, refer to the following information in the Elasticsearch documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.17/native-realm.html" class="ulink" target="_blank" rel="noopener">Native user authentication</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.17/file-realm.html" class="ulink" target="_blank" rel="noopener">File-based user authentication</a>
</li>
</ul>
</div>
<p>To give these users access to App Search and Enterprise Search, you must map their Elastic Stack roles or other user attributes to App Search or Workplace Search roles.
See the following guides in the App Search and Workplace Search documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a>
</li>
</ul>
</div>
<h4><a id="users-access-manage-users-idps"></a>Manage users using external identity provider services (IdPs)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>You may want to manage users within an external identify provider, particularly if you want to re-use the same users across Elastic deployments or other web applications.</p>
<p>You can configure your Elastic deployment to use any SAML 2.0 Identity Provider service (IdP).
The following are examples of these services:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://www.okta.com" class="ulink" target="_blank" rel="noopener">Okta</a>
</li>
<li class="listitem">
<a href="https://auth0.com" class="ulink" target="_blank" rel="noopener">Auth0</a>
</li>
<li class="listitem">
<a href="https://www.onelogin.com" class="ulink" target="_blank" rel="noopener">OneLogin</a>
</li>
</ul>
</div>
<h5><a id="saml-external-identity-providers"></a>SAML external identity providers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h5>
<p>For each SAML identity provider you&#8217;d like to use, you must complete a one-time setup process.
Refer to the following documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="saml-idp.html" title="Set up Enterprise Search with SAML 2.0 single sign-on (SSO)">Set up Enterprise Search with SAML</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.17/saml-realm.html" class="ulink" target="_top">SAML authentication</a> in the Elasticsearch documentation
</li>
</ul>
</div>
<p>After completing the one-time setup, manage these users within the interfaces provided by the IdP.</p>
<p>To give these users access to App Search and Enterprise Search, you must map their Elastic Stack roles or other user attributes to App Search or Workplace Search roles.
See the following guides in the App Search and Workplace Search documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a>
</li>
</ul>
</div>
<h5><a id="oidc-external-identity-providers"></a>OpenID Connect external identity providers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h5>
<p>Refer to the following to set up OpenID Connect:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="openid-connect.html" title="Set up Enterprise Search with OpenID Connect single sign-on (SSO)">Set up Enterprise Search with OpenID Connect</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.17/oidc-realm.html" class="ulink" target="_blank" rel="noopener">OpenID Connect authentication</a> in the Elasticsearch documentation
</li>
<li class="listitem">
<a href="/guide/en/cloud/current/ec-secure-clusters-oidc.html" class="ulink" target="_blank" rel="noopener">Secure your clusters with OpenID Connect</a> in the Elastic Cloud documentation.
</li>
</ul>
</div>
<p>To give these users access to App Search and Enterprise Search, you must map their Elastic Stack roles or other user attributes to App Search or Workplace Search roles.
See the following guides in the App Search and Workplace Search documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a>
</li>
</ul>
</div>
<h5><a id="ldap-external-identity-providers"></a>LDAP external identity providers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h5>
<p>Refer to the following to set up LDAP authentication:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ldap-auth.html" title="Set up Enterprise Search with LDAP user authentication">Set up Enterprise Search with LDAP user authentication</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.17/ldap-realm.html" class="ulink" target="_blank" rel="noopener">LDAP user authentication</a> in the Elasticsearch documentation
</li>
</ul>
</div>
<p>To give these users access to App Search and Enterprise Search, you must map their Elastic Stack roles or other user attributes to App Search or Workplace Search roles.
See the following guides in the App Search and Workplace Search documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a>
</li>
</ul>
</div>
<h5><a id="active-directory-external-identity-providers"></a>Active Directory external identity providers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h5>
<p>Elasticsearch uses LDAP to communicate with Active Directory. These two realms are very similar. Refer to the following to set up Active Directory authentication:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="active-directory-auth.html" title="Set up Enterprise Search with Active Directory user authentication">Set up Enterprise Search with Active Directory user authentication</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.17/active-directory-realm.html" class="ulink" target="_blank" rel="noopener">Active Directory user authentication</a> in the Elasticsearch documentation
</li>
</ul>
</div>
<p>To give these users access to App Search and Enterprise Search, you must map their Elastic Stack roles or other user attributes to App Search or Workplace Search roles.
See the following guides in the App Search and Workplace Search documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a>
</li>
</ul>
</div>
<h5><a id="pki-user-auth"></a>PKI user authentication<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h5>
<p>Refer to the following to set up authentication with client keys (PKI):</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="pki-auth.html" title="Set up Enterprise Search with PKI user authentication">Set up Enterprise Search with PKI user authentication</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.17/pki-realm.html" class="ulink" target="_blank" rel="noopener">PKI user authentication</a> in the Elasticsearch documentation
</li>
</ul>
</div>
<p>To give these users access to App Search and Enterprise Search, you must map their Elastic Stack roles or other user attributes to App Search or Workplace Search roles.
See the following guides in the App Search and Workplace Search documentation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/app-search/7.17/security-and-users.html" class="ulink" target="_blank" rel="noopener">Manage users and access to App Search</a>
</li>
<li class="listitem">
<a href="/guide/en/workplace-search/7.17/workplace-search-security.html" class="ulink" target="_blank" rel="noopener">Manage users and access to Workplace Search</a>
</li>
</ul>
</div>
<h4><a id="users-access-manage-users-elastic-cloud"></a>Manage users using Elastic Cloud<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>Elastic Cloud is a SAML 2.0 IdP managed by Elastic.
However, presently, you can have only one Elastic Cloud user per deployment.</p>
<p>See <a class="xref" href="users-access.html#users-access-default-users-elastic-cloud" title="Elastic Cloud user">Elastic Cloud user</a>.</p>
<p>In future releases, you will be able to grant access to multiple Elastic Cloud users on each deployment.</p>
<h3><a id="users-access-default-users"></a>Default users<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<p>In addition to managing your own users, you can access Enterprise Search using several default users that are created for you.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-default-users-elastic-cloud" title="Elastic Cloud user">Elastic Cloud user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-default-users-elastic" title="elastic user"><code class="literal">elastic</code> user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-default-users-enterprise-search" title="enterprise_search user"><code class="literal">enterprise_search</code> user</a>
</li>
</ul>
</div>
<h4><a id="users-access-default-users-elastic-cloud"></a>Elastic Cloud user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>The <em>Elastic Cloud user</em> is the user who created your Elastic deployment through the Elastic Cloud service.</p>
<p>This user has the Elastic Stack <code class="literal">superuser</code> role and therefore has full access to Enterprise Search.
See <a href="/guide/en/elasticsearch/reference/7.17/built-in-roles.html#built-in-roles-superuser" class="ulink" target="_blank" rel="noopener"><code class="literal">superuser</code></a> in the Elasticsearch documentation.</p>
<p>To recover this user, see <a class="xref" href="users-access.html#users-access-recover-users-elastic-cloud" title="Recover the Elastic Cloud user">Recover the Elastic Cloud user</a>.</p>
<h4><a id="users-access-default-users-elastic"></a><code class="literal">elastic</code> user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>The <code class="literal">elastic</code> user is one of the built-in users for the Elastic Stack.
See <a href="/guide/en/elasticsearch/reference/7.17/built-in-users.html" class="ulink" target="_blank" rel="noopener">Built-in users</a> in the Elasticsearch documentation.</p>
<p>This user has the Elastic Stack <code class="literal">superuser</code> role and therefore has full access to Enterprise Search.
See <a href="/guide/en/elasticsearch/reference/7.17/built-in-roles.html#built-in-roles-superuser" class="ulink" target="_blank" rel="noopener"><code class="literal">superuser</code></a> in the Elasticsearch documentation.</p>
<p>To recover this user, see <a class="xref" href="users-access.html#users-access-recover-users-elastic" title="Recover the elastic user">Recover the <code class="literal">elastic</code> user</a>.</p>
<h4><a id="users-access-default-users-enterprise-search"></a><code class="literal">enterprise_search</code> user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>The <code class="literal">enterprise_search</code> user is created when Enterprise Search starts for the first time.</p>
<p>This user is a native Elastic Stack user that you can manage like any other native user.
For example, you can delete this user if you prefer to use one of the other default users.
See <a href="/guide/en/elasticsearch/reference/7.17/native-realm.html" class="ulink" target="_blank" rel="noopener">Native user authentication</a> in the Elasticsearch documentation.</p>
<p>The <code class="literal">enterprise_search</code> user has the Elastic Stack roles <code class="literal">enterprise-search-app-search-owner</code> and <code class="literal">enterprise-search-workplace-search-admin</code>.
The user therefore has full access to Enterprise Search due to the default role mappings in each product.</p>
<p>The first time Enterprise Search starts, it generates and prints to the screen a random password for this user.
Alternatively, you can set the environment variable <code class="literal">ENT_SEARCH_DEFAULT_PASSWORD</code> to set an explicit password for this user.
You must do this the first time you start Enterprise Search.</p>
<p>For example, to set the password to <code class="literal">u7f#o#FY&amp;l4vv?-M^86+8GY?</code>, start Enterprise Search for the first time with this command:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ENT_SEARCH_DEFAULT_PASSWORD='u7f#o#FY&amp;l4vv?-M^86+8GY?' bin/enterprise-search</pre>
</div>
<p>To recover this user, see <a class="xref" href="users-access.html#users-access-recover-users-enterprise-search" title="Recover the enterprise_search user">Recover the <code class="literal">enterprise_search</code> user</a>.</p>
<h3><a id="users-access-recover-users"></a>Recover users for your Elastic deployment<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<p>If you or another user of your deployment can no longer log in, you can recover that user.
Refer to the appropriate section:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-as-self" title="Recover your own user account">Recover your own user account</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-as-superuser" title="Recover users as a superuser">Recover users as a superuser</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-elastic-cloud" title="Recover the Elastic Cloud user">Recover the Elastic Cloud user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-elastic" title="Recover the elastic user">Recover the <code class="literal">elastic</code> user</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#users-access-recover-users-enterprise-search" title="Recover the enterprise_search user">Recover the <code class="literal">enterprise_search</code> user</a>
</li>
</ul>
</div>
<h4><a id="users-access-recover-users-as-self"></a>Recover your own user account<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>To recover your own user account, use the help text and links provided with the login form.
You may need to contact an administrator or operator for your deployment.</p>
<h4><a id="users-access-recover-users-as-superuser"></a>Recover users as a superuser<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>As a superuser, you can change the passwords of other users.</p>
<p>Within Kibana, choose <span class="strong strong"><strong>Stack Management</strong></span>, then <span class="strong strong"><strong>Users</strong></span>.
Select a user to change their password.</p>
<p>You can also use the <em>change passwords</em> API endpoint.
See <a href="/guide/en/elasticsearch/reference/7.17/security-api-change-password.html" class="ulink" target="_blank" rel="noopener">Change passwords API</a> in the Elasticsearch documentation.</p>
<p>You must access this API as a superuser or other user with the necessary privileges.</p>
<p>If necessary, create a new superuser using the file-based user realm.
See <a href="/guide/en/elasticsearch/reference/7.17/file-realm.html" class="ulink" target="_blank" rel="noopener">File-based user authentication</a> in the Elasticsearch documentation.</p>
<h4><a id="users-access-recover-users-elastic-cloud"></a>Recover the Elastic Cloud user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>As the <a class="xref" href="users-access.html#users-access-default-users-elastic-cloud" title="Elastic Cloud user">Elastic Cloud user</a>, you can recover your own user account.
Use the help text and links provided with the Elastic Cloud login form.</p>
<h4><a id="users-access-recover-users-elastic"></a>Recover the <code class="literal">elastic</code> user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>The process to recover the <a class="xref" href="users-access.html#users-access-default-users-elastic" title="elastic user"><code class="literal">elastic</code> user</a> varies by deployment type.</p>
<p>For Elastic Cloud deployments, see <a href="/guide/en/cloud/current/ec-password-reset.html" class="ulink" target="_blank" rel="noopener">Reset the <code class="literal">elastic</code> user password</a> in the Elastic Cloud documentation.</p>
<p>For self-managed deployments, <a class="xref" href="users-access.html#users-access-recover-users-as-superuser" title="Recover users as a superuser">recover the user as a superuser</a>.</p>
<h4><a id="users-access-recover-users-enterprise-search"></a>Recover the <code class="literal">enterprise_search</code> user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>The process to recover the <a class="xref" href="users-access.html#users-access-default-users-enterprise-search" title="enterprise_search user"><code class="literal">enterprise_search</code> user</a> varies by deployment type.</p>
<p>For production deployments, <a class="xref" href="users-access.html#users-access-recover-users-as-superuser" title="Recover users as a superuser">recover the user as a superuser</a>.</p>
<p>Within local development environments, you can also reset access to Enterprise Search.
See <a class="xref" href="users-access.html#users-access-reset-access" title="Reset access to Enterprise Search">Reset access to Enterprise Search</a>.</p>
<h3><a id="user-access-configure"></a>Configure users and access<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<p>Operators can configure some aspects of user and access management for Enterprise Search:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-saml" title="Set up a SAML 2.0 identity provider service (SAML IdP) for Enterprise Search">Set up a SAML 2.0 identity provider service (SAML IdP) for Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-oidc" title="Set up OpenID Connect provider service (SSO) for Enterprise Search">Set up OpenID Connect provider service (SSO) for Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="users-access.html#user-access-configure-preferred" title="Set a preferred authentication provider for Enterprise Search in Kibana">Set a preferred authentication provider for Enterprise Search in Kibana</a>
</li>
</ul>
</div>
<h4><a id="user-access-configure-saml"></a>Set up a SAML 2.0 identity provider service (SAML IdP) for Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>You can <a class="xref" href="users-access.html#users-access-manage-users-idps" title="Manage users using external identity provider services (IdPs)">manage Enterprise Search users using external identity provider services (IdPs)</a>, as long as they implement the SAML 2.0 standard for authentication.</p>
<p>For each SAML identity provider you&#8217;d like to use, you must complete a one-time setup process.
To complete this process, see <a class="xref" href="saml-idp.html" title="Set up Enterprise Search with SAML 2.0 single sign-on (SSO)">Set up Enterprise Search with SAML</a>.</p>
<h4><a id="user-access-configure-oidc"></a>Set up OpenID Connect provider service (SSO) for Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>You can also configure <a class="xref" href="users-access.html#oidc-external-identity-providers" title="OpenID Connect external identity providers">OpenID Connect providers</a> with Enterprise Search.</p>
<p>See <a class="xref" href="openid-connect.html" title="Set up Enterprise Search with OpenID Connect single sign-on (SSO)">Set up Enterprise Search with OpenID Connect</a> for additional information and examples.</p>
<h4><a id="user-access-configure-ldap"></a>Set up LDAP for Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>It is possible to configure <a class="xref" href="users-access.html#ldap-external-identity-providers" title="LDAP external identity providers">LDAP authentication</a> with Enterprise Search.</p>
<p>See <a class="xref" href="ldap-auth.html" title="Set up Enterprise Search with LDAP user authentication">Set up Enterprise Search with LDAP user authentication</a> for additional information and examples.</p>
<h4><a id="user-access-configure-active-directory"></a>Set up Active Directory for Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>Configuring <a class="xref" href="users-access.html#active-directory-external-identity-providers" title="Active Directory external identity providers">Active Directory authentication</a> in Enterprise Search is very similar to LDAP.</p>
<p>See <a class="xref" href="active-directory-auth.html" title="Set up Enterprise Search with Active Directory user authentication">Set up Enterprise Search with Active Directory user authentication</a> for additional information and examples.</p>
<h4><a id="user-access-configure-pki"></a>Set up PKI user authentication for Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>You can also configure <a class="xref" href="users-access.html#pki-user-auth" title="PKI user authentication">PKI user authentication</a> with Enterprise Search.</p>
<p>See <a class="xref" href="pki-auth.html" title="Set up Enterprise Search with PKI user authentication">Set up Enterprise Search with PKI user authentication</a> for additional information and examples.</p>
<h4><a id="user-access-configure-preferred"></a>Set a preferred authentication provider for Enterprise Search in Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h4>
<p>When using Kibana as your primary management interface for Enterprise Search, Enterprise Search redirects users to Kibana to log in.
See <a class="xref" href="user-interfaces.html" title="User interfaces"><em>User interfaces</em></a> for an explanation of management interfaces for Enterprise Search.</p>
<p>Enterprise Search considers Kibana to be the primary management interface when the following <a class="xref" href="configuration.html" title="Configuration">configuration</a> is present in <code class="literal">enterprise-search.yml</code>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">kibana.external_url</code> is set.
</li>
<li class="listitem">
No settings matching <code class="literal">ent_search.auth.*</code> are set.
</li>
</ul>
</div>
<p>Kibana may be configured with multiple authentication providers.
In this case, you can set a preferred provider for Enterprise Search within the Enterprise Search configuration.
Kibana will then prefer this provider when redirecting users to Kibana.
Kibana will present the preferred login option rather than ask users to choose from all available providers when logging in.</p>
<p><a class="xref" href="configuration.html" title="Configuration">Configure</a> the preferred provider within <code class="literal">enterprise-search.yml</code> by setting <code class="literal">kibana.preferred_auth_provider</code> to the name of the authentication provider of your choice from your Kibana configuration.</p>
<p>For example, given the following <code class="literal">kibana.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.providers:
  basic.basic1:
    order: 0
    icon: "logoElasticsearch"
    hint: "Typically for administrators"
  saml.saml1:
    order: 1
    realm: saml1
    description: "Log in with SSO"
    icon: "https://my-company.xyz/saml-logo.svg"</pre>
</div>
<p>Set the preferred auth provider to <code class="literal">saml1</code> within <code class="literal">enterprise-search.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">kibana.preferred_auth_provider: saml1</pre>
</div>
<h3><a id="users-access-upgrade-from-7-13"></a>Upgrade from Enterprise Search 7.13 and earlier<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.17/enterprise-search-docs/users-access.asciidoc">edit</a></h3>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>When upgrading from Enterprise Search 7.13 and earlier, do not change any user/auth configuration settings before upgrading to 7.14.0 or later.</p>
</div>
</div>
<p>Prior to 7.14.0, Enterprise Search had three <em>auth modes</em>: standard, native, and SAML.
Auth modes are deprecated in Enterprise Search 7.14.0 and will be removed in 8.0.0.</p>
<p>Since 7.14.0, users created by Enterprise Search are native Elastic Stack users, and those users can be granted access to Elastic features outside of Enterprise Search.</p>
<p><span class="strong strong"><strong>Enterprise Search will use your current configuration to migrate your existing user data</strong></span>.
When you upgrade from 7.13.0 and earlier, Enterprise Search performs the following operations:</p>
<p><span class="strong strong"><strong>If the currently configured auth mode is <code class="literal">standard</code> (or blank):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Migrate <em>standard</em> Enterprise Search users to native Elastic Stack users.
</li>
<li class="listitem">
For each migrated user, create a role mapping, based on <code class="literal">username</code>, to map the user to the same roles and groups or engines they could previously access.
</li>
<li class="listitem">
Delete all users that were created specifically for Enterprise Search <em>native</em> authentication.
</li>
<li class="listitem">
Delete Workplace Search private content sources belonging to the deleted users.
</li>
</ul>
</div>
<p>For example, if the following list represents your users <span class="strong strong"><strong>before</strong></span> upgrading:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">shay.banon</code> (standard)
</li>
<li class="listitem">
<code class="literal">steven.schuurman</code> (standard)
</li>
<li class="listitem">
<code class="literal">shay.banon</code> (native)
</li>
<li class="listitem">
<code class="literal">uri.boness</code> (native)
</li>
</ul>
</div>
<p>Then the following represents your users <span class="strong strong"><strong>after</strong></span> upgrading:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">shay.banon</code> (native, migrated from standard)
</li>
<li class="listitem">
<code class="literal">steven.schuurman</code> (native, migrated from standard)
</li>
<li class="listitem">
<del><code class="literal">shay.banon</code></del> (deleted native user)
</li>
<li class="listitem">
<del><code class="literal">uri.boness</code></del> (deleted native user)
</li>
</ul>
</div>
<p><span class="strong strong"><strong>If the currently configured auth mode is any other value (not <code class="literal">standard</code>):</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Delete all users that were created specifically for Enterprise Search <em>standard</em> authentication.
</li>
<li class="listitem">
Delete Workplace Search private content sources belonging to the deleted users.
</li>
</ul>
</div>
<p>For example, if the following list represents your users <span class="strong strong"><strong>before</strong></span> upgrading:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">shay.banon</code> (standard)
</li>
<li class="listitem">
<code class="literal">steven.schuurman</code> (standard)
</li>
<li class="listitem">
<code class="literal">shay.banon</code> (native)
</li>
<li class="listitem">
<code class="literal">uri.boness</code> (native)
</li>
</ul>
</div>
<p>Then the following represents your users <span class="strong strong"><strong>after</strong></span> upgrading:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<del><code class="literal">shay.banon</code></del> (deleted standard user)
</li>
<li class="listitem">
<del><code class="literal">steven.schuurman</code></del> (deleted standard user)
</li>
<li class="listitem">
<code class="literal">shay.banon</code> (native, unchanged)
</li>
<li class="listitem">
<code class="literal">uri.boness</code> (native, unchanged)
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>After upgrading, review the other sections in this document to determine how you&#8217;d like to manage users and access, since new options are available.</p>
</div>
</div>





</div>
<div class="navfooter">
<span class="prev">
<a href="configure-ssl-tls.html">« Configure SSL/TLS</a>
</span>
<span class="next">
<a href="saml-idp.html">Set up Enterprise Search with SAML 2.0 single sign-on (SSO) »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
