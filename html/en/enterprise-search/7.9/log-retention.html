<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Log retention | Elastic Enterprise Search Documentation [7.9] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Enterprise Search Documentation [7.9]"/>
<link rel="up" href="index.html" title="Elastic Enterprise Search Documentation [7.9]"/>
<link rel="prev" href="read-only-api.html" title="Managing Read-Only Mode via API"/>
<link rel="next" href="changelog.html" title="Release Notes"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search/Guide/7.9"/>
<meta name="DC.subject" content="Enterprise Search"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Enterprise Search Documentation [7.9]</a></span>
»
<span class="breadcrumb-node">Log retention</span>
</div>
<div class="navheader">
<span class="prev">
<a href="read-only-api.html">« Managing Read-Only Mode via API</a>
</span>
<span class="next">
<a href="changelog.html">Release Notes »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="log-retention"></a>Log retention<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/enterprise-search-docs/log-retention.asciidoc">edit</a></h1>
</div></div></div>
<p>Enterprise Search indexes various event data such as analytics, API requests, and content source events.
These event log indexes would grow infinitely in size without retention management.
Since 7.9.0, Enterprise Search manages log retention for you, using <a href="/guide/en/elasticsearch/reference/current/index-lifecycle-management.html" class="ulink" target="_blank" rel="noopener">Index Lifecycle Management (ILM)</a>.</p>
<p>Enterprise search creates several ILM policies that manage the Enterprise Search log indexes as they age, automatically transitioning each through a lifecycle.
You can find these policies by their IDs to modify them, or you can create your own policies.
See:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="log-retention.html#log-retention-ilm-policy-ids" title="Enterprise Search ILM policy IDs">Enterprise Search ILM policy IDs</a>
</li>
<li class="listitem">
<a class="xref" href="log-retention.html#log-retention-manage-ilm" title="Manage ILM policies">Manage ILM policies</a>
</li>
</ul>
</div>
<p>Enterprise Search uses ILM as long as the underlying Elastic Stack supports the feature.
You can disable ILM on all self-managed deployments if desired.
Also, App Search exposes additional controls to disable logging in that product only.
See:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="log-retention.html#log-retention-disable-ilm" title="Disable ILM for log retention in Enterprise Search">Disable ILM for log retention in Enterprise Search</a>
</li>
<li class="listitem">
<a class="xref" href="log-retention.html#log-retention-disable-logging-app-search" title="Disable logging in App Search">Disable logging in App Search</a>
</li>
</ul>
</div>
<h3><a id="log-retention-ilm-policy-ids"></a>Enterprise Search ILM policy IDs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/enterprise-search-docs/log-retention.asciidoc">edit</a></h3>
<p>Enterprise Search creates ILM policies with the following IDs:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ent-search-api-ecs-ilm-logs
ent-search-app-search-analytics-ecs-ilm-logs
ent-search-workplace-search-analytics-ecs-ilm-logs
ent-search-workplace-search-content-events-ecs-ilm-logs</pre>
</div>
<h3><a id="log-retention-manage-ilm"></a>Manage ILM policies<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/enterprise-search-docs/log-retention.asciidoc">edit</a></h3>
<p>Manage the above Enterprise Search ILM policies using UIs in Kibana or APIs in Elasticsearch.
See:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/kibana/current/index-lifecycle-policies.html" class="ulink" target="_blank" rel="noopener">Index Lifecycle Policies</a> in the Kibana documentation
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/7.8/index-lifecycle-management-api.html" class="ulink" target="_blank" rel="noopener">Index lifecycle management API</a> in the Elasticsearch documentation
</li>
</ul>
</div>
<h3><a id="log-retention-disable-ilm"></a>Disable ILM for log retention in Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/enterprise-search-docs/log-retention.asciidoc">edit</a></h3>
<p>Enterprise Search automatically uses ILM for log retention management as long as the underlying Elastic Stack supports the feature.</p>
<p>However, if you&#8217;d prefer to manage log retention on your own, modify your Enterprise Search <a class="xref" href="configuration.html" title="Configuration">configuration</a>.
Set <code class="literal">ilm.enabled</code> to <code class="literal">false</code>.</p>
<p>From <code class="literal">config/enterprise-search.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml"># Use Index Lifecycle Management (ILM) to manage analytics and API logs
# retention.
#
# auto: Use ILM when supported by the underlying Elasticsearch cluster
# true: Use ILM (requires ILM support in the underlying Elasticsearch cluster)
# false: Don't use ILM (analytics and API logs will grow unconstrained)
#
#ilm.enabled: auto</pre>
</div>
<p>Elastic Cloud deployments cannot access this setting, but such deployments can effectively disable ILM by modifying the ILM policies to discard logs.
See <a class="xref" href="log-retention.html#log-retention-manage-ilm" title="Manage ILM policies">Manage ILM policies</a>, above.</p>
<h3><a id="log-retention-disable-logging-app-search"></a>Disable logging in App Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/enterprise-search-docs/log-retention.asciidoc">edit</a></h3>
<p>Finally, App Search allows admins and developers to disable logging through its <em>log settings</em> UI and API.
Although related to log retention, this is a separate feature that is specific to App Search.</p>
<p>See <a href="/guide/en/app-search/7.9/logs.html" class="ulink" target="_blank" rel="noopener">Log settings guide</a> in the App Search documentation.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="read-only-api.html">« Managing Read-Only Mode via API</a>
</span>
<span class="next">
<a href="changelog.html">Release Notes »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
