<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="description" content="The Elastic Serverless Forwarder is an Amazon Web Services (AWS) Lambda function that ships logs from your AWS environment to Elastic.">
<meta name="keywords" content="serverless">
<title>Elastic Serverless Forwarder for AWS | Elastic Serverless Forwarder Guide | Elastic</title>
<meta class="elastic" name="content" content="Elastic Serverless Forwarder for AWS | Elastic Serverless Forwarder Guide">

<link rel="home" href="index.html" title="Elastic Serverless Forwarder Guide"/>
<link rel="up" href="index.html" title="Elastic Serverless Forwarder Guide"/>
<link rel="prev" href="index.html" title="Elastic Serverless Forwarder Guide"/>
<link rel="next" href="aws-deploy-elastic-serverless-forwarder.html" title="Deploy Elastic Serverless Forwarder"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="cloud native ingest"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud Native Ingest/Reference"/>
<meta name="DC.subject" content="cloud native ingest"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Serverless Forwarder Guide</a></span>
</div>
<div class="navheader">
<span class="prev">
</span>
<span class="next">
<a href="aws-deploy-elastic-serverless-forwarder.html">Deploy Elastic Serverless Forwarder »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="aws-elastic-serverless-forwarder"></a>Elastic Serverless Forwarder for AWS<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h1>
</div></div></div>

<p>The Elastic Serverless Forwarder is an Amazon Web Services (AWS) Lambda function that ships logs from your AWS environment to Elastic.</p>
<p>The Elastic Serverless Forwarder works with Elastic Stack 7.17 and later.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Using Elastic Serverless Forwarder may result in additional charges. To learn
how to minimize additional charges, refer to <a class="xref" href="aws-serverless-troubleshooting.html#preventing-unexpected-costs" title="Preventing unexpected costs">Preventing unexpected costs</a>.</p>
</div>
</div>
<h2><a id="aws-serverless-forwarder-overview"></a>Overview<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h2>
<p>The Elastic Serverless Forwarder can forward AWS data to cloud-hosted, self-managed Elastic environments, or <span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span>Logstash. It supports the following inputs:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Amazon S3 (via SQS event notifications)
</li>
<li class="listitem">
Amazon Kinesis Data Streams
</li>
<li class="listitem">
Amazon CloudWatch Logs subscription filters
</li>
<li class="listitem">
Amazon SQS message payload
</li>
</ul>
</div>
<div class="imageblock screenshot">
<div class="content">
<img src="images/aws-serverless-lambda-flow.png" alt="AWS Lambda flow">
</div>
</div>
<p>Elastic Serverless Forwarder ensures <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-at-least-once-delivery" title="At-least-once delivery">at-least-once delivery</a> of the forwarded message.</p>
<p>When you successfully deploy the forwarder, an SQS <em>Continuing queue</em> is automatically created in Lambda to ensure no data is lost. By default, the forwarder runs for a maximum of 15 minutes, so it&#8217;s possible that AWS may exit the function in the middle of processing event data. The forwarder handles this scenario by keeping track of the last offset processed. When the queue triggers a new function invocation, the forwarder will start where the last function run stopped.</p>
<p>The forwarder uses a <em>Replay queue</em> (also automatically created during deployment) to handle any ingestion-related exception or fail scenarios. Data in the replay queue is stored as individual events. Lambda keeps track of any failed events and writes them to the <em>Replay queue</em> that can then be consumed by adding it as an additional SQS trigger via Lambda.</p>
<p>You can use the <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">config.yaml</a> file to configure the service for each input and output type, including information such as SQS queue ARN (Amazon Resource Number) and Elasticsearch or Logstash connection details. You can create multiple input sections within the configuration file to map different inputs to specific log types.</p>
<p>There is no need to define a specific input in the <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">config.yaml</a> for the <em>Contuining queue</em> and the _Replay queue.</p>
<p>The forwarder also supports writing directly to an index, alias, or custom data stream. This enables existing Elasticsearch users to re-use index templates, ingest pipelines, or dashboards that are already created and connected to other processes.</p>
<h2><a id="aws-serverless-forwarder-inputs"></a>Inputs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h2>
<h3><a id="aws-serverless-forwarder-inputs-s3"></a>Amazon S3 (via SQS event notifications)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h3>
<p>The forwarder can ingest logs contained in an Amazon Simple Storage Service (S3) bucket through a Simple Queue Service (SQS) notification (<code class="literal">s3:ObjectCreated</code>) and send them to Elastic. The SQS queue serves as a trigger for the forwarder. When a new log file is written to an S3 bucket and meets the user-defined criteria (including prefix/suffix), an SQS notification is generated that triggers the Lambda function.</p>
<p>You can set up separate SQS queues for each type of log (for example, <code class="literal">aws.vpcflow</code>, <code class="literal">aws.cloudtrail</code>, <code class="literal">aws.waf</code>). A single configuration file can have many input sections, pointing to different SQS queues that match specific log types. The <code class="literal">es_datastream_name</code> parameter in the config file is optional. The forwarder supports automatic routing of various AWS service logs to the corresponding data streams for further processing and storage in the Elasticsearch cluster. It supports automatic routing of <code class="literal">aws.cloudtrail</code>, <code class="literal">aws.cloudwatch_logs</code>, <code class="literal">aws.elb_logs</code>, <code class="literal">aws.firewall_logs</code>, <code class="literal">aws.vpcflow</code>, and <code class="literal">aws.waf</code> logs.</p>
<p>For other log types, you can optionally set the <code class="literal">es_datastream_name</code> value in the configuration file according to the naming convention of the Elasticsearch data stream and integration.  If the <code class="literal">es_datastream_name</code> is not specified, and the log cannot be matched with any of the above AWS services, then the dataset will be set to <code class="literal">generic</code> and the namespace set to <code class="literal">default</code>, pointing to the data stream name <code class="literal">logs-generic-default</code>.</p>
<p>For more information on creating SQS event notifications for S3 buckets, read the <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/ways-to-add-notification-config-to-bucket.html" class="ulink" target="_top">AWS documentation</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must set a visibility timeout of <code class="literal">910</code> seconds for any SQS queues you want to use as a trigger. This is 10 seconds greater than the Elastic Serverless Forwarder Lambda timeout.</p>
</div>
</div>
<h3><a id="aws-serverless-forwarder-inputs-kinesis"></a>Amazon Kinesis Data Streams<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h3>
<p>The forwarder can ingest logs contained in the payload of a Kinesis Data Stream record and send them to Elastic. The Kinesis Data Stream serves as a trigger for the forwarder. When a new record gets written to a Kinesis Data Stream, it triggers the Lambda function.</p>
<p>You can set up separate Kinesis Data Streams for each type of log. The <code class="literal">es_datastream_name</code> parameter in the config file is mandatory. If this value is set to an Elasticsearch data stream, the type of log must be correctly defined with configuration parameters. A single configuration file can have many input sections, pointing to different data streams that match specific log types.</p>
<h3><a id="aws-serverless-forwarder-inputs-cloudwatch"></a>Amazon CloudWatch Logs subscription filters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h3>
<p>The forwarder can ingest logs contained in the message payload of CloudWatch Logs events and send them to Elastic. The CloudWatch Logs service serves as a trigger for the forwarder. When a new event gets written to a CloudWatch Logs log stream, it triggers the Lambda function.</p>
<p>You can set up separate CloudWatch Logs groups for each type of log. The <code class="literal">es_datastream_name</code> parameter in the config file is mandatory. If this value is set to an Elasticsearch data stream, the type of log must be correctly defined with configuration parameters. A single configuration file can have many input sections, pointing to different CloudWatch Logs groups that match specific log types.</p>
<h3><a id="aws-serverless-forwarder-inputs-direct"></a>Amazon SQS message payload<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h3>
<p>The forwarder can ingest logs contained within the payload of an Amazon SQS body record and send them to Elastic. The SQS queue serves as a trigger for the forwarder. When a new record gets written to an SQS queue, the Lambda function triggers.</p>
<p>You can set up a separate SQS queue for each type of log. The config parameter for Elasticsearch output <code class="literal">es_datastream_name</code> is mandatory. If this value is set to an Elasticsearch data stream, the type of log must be correctly defined with configuration parameters. A single configuration file can have many input sections, pointing to different SQS queues that match specific log types.</p>
<h2><a id="aws-serverless-forwarder-at-least-once-delivery"></a>At-least-once delivery<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h2>
<p>The Elastic Serverless Forwarder ensures at-least-once delivery of the forwarder messages recurring to the <code class="literal">Continuing queue</code> and <code class="literal">Replay queue</code>.</p>
<h3><a id="aws-serverless-forwarder-at-least-once-delivery-continuing-queue"></a>Continuing queue<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h3>
<p>The Elastic Serverless Forwarder can run for a maximum amount of time of 15 minutes. Different inputs can trigger the Elastic Serverless Forwarder, with different payload sizes for each execution trigger. The size of the payload impacts on the number of events to be forwarded. Additional impacts are given by configuring <a class="xref" href="aws-elastic-serverless-forwarder-configuration.html#aws-serverless-define-include-exclude-filters" title="Define include/exclude filters">include/exclude filters definition</a>, <a class="xref" href="aws-elastic-serverless-forwarder-configuration.html#expanding-events-from-json-object-lists" title="Expanding events from JSON object lists">expanding events from JSON object lists</a> and <a class="xref" href="aws-elastic-serverless-forwarder-configuration.html#aws-serverless-manage-multiline-messages" title="Manage multiline messages">managing multiline messages</a>.</p>
<p>The <code class="literal">Continuing queue</code> takes a role in ensuring at-least-once delivery for the scenario when the maximum amount of time of 15 minutes is not sufficient to forward all the events resulting from a single execution of the Elastic Serverless Forwarder.</p>
<p>For this a grace period of two minutes before reaching the 15 minutes timeout is reserved to handle the remaining events that are left to be processed.
At the beginning of this grace period events forwarding is halted. The rest of the time is dedicated to send a copy of the original messages that contains the remaining events to the <code class="literal">Continuing queue</code>.
This mechanism removes the necessity to handle partial processing of the trigger at inputs level, that&#8217;s not always possible (for example in the case of <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-cloudwatch" title="Amazon CloudWatch Logs subscription filters">Amazon CloudWatch Logs subscription filters</a>), and that will require to force the users to abide to specific configuration of the AWS resource used as inputs.</p>
<p>The messages in the <code class="literal">Continuing queue</code> contain metadata related to the offsets where to restart forwarding the events from, and a reference to the original input.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can remove a specific input as trigger of the Elastic Serverless Forwarder, but it is important to not remove its definition from <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">config.yaml</a> as well, before ensuring that all the events generated while the input was still a trigger are fully processed, including the ones in the messages copied to the <code class="literal">Continuing queue</code>. The handling of the messages in the <code class="literal">Continuing queue</code> requires a lookup of the original input in the <code class="literal">config.yml</code>.</p>
</div>
</div>
<p>In the unlikely scenario that the Elastic Serverless Forwarder exceeds its maximum allocated execution time and is forcefully terminated, the <code class="literal">Continuing queues</code> will not be properly populated with a copy of the messages left to be processed, either all of them or only a portion of them. In this scenario the messages might or not might be lost according to the specific AWS resource used as input and its specific configuration.</p>
<p>An AWS SQS <a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-dead-letter-queues.html" class="ulink" target="_top">Dead Letter Queue</a> is created for the <code class="literal">Continuing Queue</code>.</p>
<p>When the Elastic Serverless Forwarder is triggered by the <code class="literal">Continuing Queue</code> and in the unlikely scenario that it exceeds its maximum allocated execution time and is forcefully terminated, all the messages in the payload that triggered the Elastic Serverless Forwarder execution will not be deleted from the <code class="literal">Continuing Queue</code> and will trigger another Elastic Serverless Forwarder execution. The <code class="literal">Continuing Queue</code> is configured for a number of 3 maximum receives before a message is sent to the DLQ.</p>
<h3><a id="aws-serverless-forwarder-at-least-once-delivery-replay-queue"></a>Replay queue<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h3>
<p>The Elastic Serverless Forwarder forwards events to the outputs defined for a specific input. Events to be forwarded are grouped in batches that can be configured according to the specific output.
Failures can happen when forwarding events to an output. According to the output type the granularity of the failure can either be for the whole batch of events, or for single events in the batch.
There are multiple reasons for a failure to happen, including, but not limited, network connectivity, the output service being unavailable or under stress.</p>
<p>The <code class="literal">Replay queue</code> takes a role in ensuring at-least-once delivery for the scenario when a failure in forwarding an event happens.</p>
<p>For this, after any time a batch of events is forwarded, a copy of all the events in the batch that failed to be forwarded is sent to the <code class="literal">Replay queue</code>. Each message sent to the <code class="literal">Replay queue</code> contain exactly one event that failed to be forwarded.</p>
<p>It is possible to enable the <code class="literal">Replay queue</code> as a trigger of the Elastic Serverless Forwarder in order to forward again the events in the queue.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It is left to the user to enable and disable the <code class="literal">Replay queue</code> as trigger of the Elastic Serverless Forwarder, according to the specific reason of why the forwarding failures happened. In most of the cases it is relevant to resolve the underlying issue causing the failures that populates the <code class="literal">Replay queue</code>, before trying to forward again the events in the queue. According to the nature and the impact of the issue, forwarding the events again without solving the issue before, will produce the outcome of new failures and events going back to the <code class="literal">Replay queue</code>. In some scenarios, like the output service being under stress, it is indeed suggested to disable the <code class="literal">Replay queue</code> as trigger of the Elastic Serverless Forwarder, since keeping forwarding the events could indeed worsen the issue.</p>
</div>
</div>
<p>When the Elastic Serverless Forwarder is triggered by the <code class="literal">Replay queue</code>, if no event fails to be forwarded for a specific execution no message is explicitly deleted, the Elastic Serverless Forwarded execution succeeds and the messages in the trigger payload will be removed automatically from the <code class="literal">Replay queue</code>.
In the case any of the events fails again to be forwarded, all the messages in the trigger payload that contain events that didn&#8217;t fail are deleted, and a specific expected exception is raised. This marks the Elastic Serverless Forwarded execution as failed with the outcome of having only the messages that failed again to go back to the <code class="literal">Replay queue</code>.</p>
<p>The messages in the <code class="literal">Replay queue</code> contain metadata with the references to the original input and the original output of the events.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can remove a specific input as trigger of the Elastic Serverless Forwarder, but it is important to not remove its definition from <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">config.yaml</a> as well, before ensuring that all the events failed to be ingested while the input was still a trigger are fully processed. The handling of the messages in the <code class="literal">Replay queue</code> requires a lookup of the original input and output in the <code class="literal">config.yml</code>.</p>
</div>
</div>
<p>An AWS SQS <a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-dead-letter-queues.html" class="ulink" target="_top">Dead Letter Queue</a> is created for the <code class="literal">Replay Queue</code>.</p>
<p>The same message can go back to the <code class="literal">Replay queue</code> up to three times, after that it will reach the configured number of 3 maximum receives, and it will be sent to the DLQ.
The same message can go back to the <code class="literal">Replay queue</code> either because it contains an event that failed again to be forwarded, according to the planned design, or in the unlikely scenario that the Elastic Serverless Forwarder triggered by the queue exceeds its maximum allocated execution time and is forcefully terminated. In this scenario the messages will not be lost and will eventually be sent to the DQL.</p>
<h2><a id="aws-serverless-forwarder-get-started"></a>Get started<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elastic-serverless-forwarder/edit/main/docs/en/aws-elastic-serverless-forwarder.asciidoc">edit</a></h2>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html" title="Deploy Elastic Serverless Forwarder">Deploy Elastic Serverless Forwarder</a>
</li>
<li class="listitem">
<a class="xref" href="aws-elastic-serverless-forwarder-configuration.html" title="Configuration options for Elastic Serverless Forwarder">Configuration options</a>
</li>
<li class="listitem">
<a class="xref" href="aws-serverless-troubleshooting.html" title="Troubleshooting and error handling">Troubleshooting</a>
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
</span>
<span class="next">
<a href="aws-deploy-elastic-serverless-forwarder.html">Deploy Elastic Serverless Forwarder »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
