<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Upgrade Elastic Agent | Fleet and Elastic Agent Guide [7.13] | Elastic</title>
<meta class="elastic" name="content" content="Upgrade Elastic Agent | Fleet and Elastic Agent Guide [7.13]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [7.13]"/>
<link rel="up" href="elastic-agent-installation-configuration.html" title="Elastic Agents"/>
<link rel="prev" href="running-on-kubernetes-standalone.html" title="Run Elastic Agent standalone on Kubernetes"/>
<link rel="next" href="start-elastic-agent.html" title="Start Elastic Agent"/>
<meta class="elastic" name="product_version" content="7.13"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/7.13"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="7.13"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [7.13]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elastic-agent-installation-configuration.html">Elastic Agents</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="running-on-kubernetes-standalone.html">« Run Elastic Agent standalone on Kubernetes</a>
</span>
<span class="next">
<a href="start-elastic-agent.html">Start Elastic Agent »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="upgrade-elastic-agent"></a>Upgrade Elastic Agent<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/7.13/docs/en/ingest-management/elastic-agent/upgrade-elastic-agent.asciidoc">edit</a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<h4><a id="upgrade-agent"></a>Upgrade Elastic Agent<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/7.13/docs/en/ingest-management/elastic-agent/upgrade-elastic-agent.asciidoc">edit</a></h4>
<p>Starting with version 7.10, Fleet provides upgrade capabilities. You can view
and select agents that are out of date, and trigger selected agents to download,
install, and run the new version.</p>
<p>This approach simplifies the process of keeping your agents up to date. It also
saves you time because you don’t need third-party tools or processes to
manage upgrades.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The upgrade feature is not supported for upgrading DEB/RPM packages or
Docker images.</p>
</div>
</div>
<p>To upgrade Elastic Agent to a new version:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Fleet, select <span class="strong strong"><strong>Agents</strong></span>.
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Agents</strong></span>, click <span class="strong strong"><strong>Upgrade available</strong></span> to see a list of agents
that you can upgrade.
</li>
<li class="listitem">
<p>To upgrade a single agent, choose <span class="strong strong"><strong>Upgrade agent</strong></span> from the <span class="strong strong"><strong>Actions</strong></span> menu
next to the agent you want to upgrade.</p>
<p>The <span class="strong strong"><strong>Upgrade agent</strong></span> option is grayed out when an upgrade is unavailable, or
the Kibana version is lower than the agent version.</p>
</li>
<li class="listitem">
<p>To upgrade multiple agents, bulk select the agents and click
<span class="strong strong"><strong>Upgrade agents</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/fleet-agents.png" alt="Upgrade menu for bulk upgrade in Fleet">
</div>
</div>
</li>
</ol>
</div>
<h4><a id="upgrade-standalone"></a>Upgrade standalone agents<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/7.13/docs/en/ingest-management/elastic-agent/upgrade-elastic-agent.asciidoc">edit</a></h4>
<p>To upgrade a standalone agent running on an edge node:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Make sure the <code class="literal">elastic-agent</code> service is running.
</li>
<li class="listitem">
<p>From the directory where Elastic Agent is installed, run the <code class="literal">upgrade</code> command to
upgrade to a new version. Not sure where the agent is
installed? See <a class="xref" href="elastic-agent-installation.html#installation-layout" title="Installation layout">Installation layout</a>.</p>
<p>For example, on macOS, to upgrade the agent from version 7.10.0 to 7.10.1, you
would run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">cd /Library/Elastic/Agent/
sudo elastic-agent upgrade 7.10.1</pre>
</div>
</li>
</ol>
</div>
<p>For more command-line options, see the help for the
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-upgrade-command" title="elastic-agent upgrade"><code class="literal">upgrade</code></a> command.</p>
<h4><a id="upgrade-7.12-lower"></a>Upgrade from 7.12 or lower<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/7.13/docs/en/ingest-management/elastic-agent/upgrade-elastic-agent.asciidoc">edit</a></h4>
<p>As part of the 7.13 release, we introduce <a class="xref" href="fleet-server.html" title="Fleet Server">Fleet Server</a>,
a mechanism to connect your Elastic Agents to Fleet.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>When you upgrade to 7.13 from 7.12 or lower, please note the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
All of your existing Elastic Agents will be automatically unenrolled from Fleet and will stop sending data.
</li>
<li class="listitem">
Before you can add your Elastic Agents again to Fleet, you must have Fleet Server running.
</li>
<li class="listitem">
All of your policies will be migrated.
</li>
</ul>
</div>
</div>
</div>
<h5><a id="fleet-prereqs-upgrade"></a>Prerequisite<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/7.13/docs/en/ingest-management/elastic-agent/upgrade-elastic-agent.asciidoc">edit</a></h5>
<p>You must upgrade your deployment to 7.13. If your deployment is running in our <a href="/cloud/elasticsearch-service?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">hosted Elasticsearch Service</a>
on Elastic Cloud, see <a href="/guide/en/cloud/current/ec-upgrade-deployment.html" class="ulink" target="_top">Upgrade versions</a>. If you are running a self-managed
deployment, see <a href="/guide/en/elastic-stack/7.13/upgrading-elastic-stack.html" class="ulink" target="_top">Upgrading the Elastic Stack</a>.</p>
<h5><a id="set-up-fleet-server"></a>Step 1: Set up Fleet Server<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/7.13/docs/en/ingest-management/elastic-agent/upgrade-elastic-agent.asciidoc">edit</a></h5>
<p>Here’s what you need to set up Fleet Server for each deployment type:</p>
<div class="tabs" data-tab-group="upgrade-fleet">
  <div role="tablist" aria-label="Upgrade">
    <button role="tab"
            aria-selected="true"
            aria-controls="cloud-tab-upgrade"
            id="cloud-upgrade">
      Elasticsearch Service
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="self-managed-tab-upgrade"
            id="self-managed-upgrade"
            tabindex="-1">
      Self-managed
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="cloud-tab-upgrade"
       aria-labelledby="cloud-upgrade">
<p>Elastic Cloud runs a hosted version of Fleet Server.</p>
<p>To confirm that Fleet Server is available in your deployment:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to Kibana and go to <span class="strong strong"><strong>Management &gt; Fleet</strong></span>, and click the <span class="strong strong"><strong>Agents</strong></span> tab.
</li>
<li class="listitem">
<p>The following message is displayed. Please note that your Elastic Agents have now
been unenrolled and have stopped sending data.</p>
<p>Select <span class="strong strong"><strong>Do not show this message again</strong></span>, and then click <span class="strong strong"><strong>Close and get started</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/fleet-server-prompt.png" alt="Add Fleet Server prompt">
</div>
</div>
<p>If your previous deployment did not include an APM node, you are prompted to enable <span class="strong strong"><strong>APM &amp; Fleet</strong></span>,
required for using Fleet Server.</p>
<p>Click <span class="strong strong"><strong>Edit deployment</strong></span> and add an <span class="strong strong"><strong>APM &amp; Fleet</strong></span> node to your deployment.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/apm-fleet-prompt.png" alt="Add APM &amp; Fleet node prompt">
</div>
</div>
</li>
<li class="listitem">
To confirm that Fleet Server is available in your deployment, click the <span class="strong strong"><strong>Agents</strong></span> tab.
</li>
<li class="listitem">
<p>Under <span class="strong strong"><strong>Policies</strong></span>, select the <span class="strong strong"><strong>Elastic Cloud agent policy</strong></span> to confirm that Fleet Server
is listed. This policy is managed by Elastic Cloud and can not be modified.</p>
<p>You are now able to install and enroll subsequent Elastic Agents with Fleet Server.</p>
</li>
</ol>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="self-managed-tab-upgrade"
       aria-labelledby="self-managed-upgrade"
       hidden="">
<p>To upgrade to Fleet Server:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to Kibana and go to <span class="strong strong"><strong>Management &gt; Fleet</strong></span>.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Agents</strong></span> tab.
</li>
<li class="listitem">
<p>The following message is displayed. Please note that your Elastic Agents have now
been unenrolled and have stopped sending data.</p>
<p>Select <span class="strong strong"><strong>Do not show this message again</strong></span>, and then click <span class="strong strong"><strong>Close and get started</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/fleet-server-prompt-managed.png" alt="Add Fleet Server prompt">
</div>
</div>
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Fleet settings</strong></span>, and in the <span class="strong strong"><strong>Fleet Server hosts</strong></span> field, enter the
URLs Elastic Agents will use to connect to Fleet Server. For example,
<code class="literal">https://192.0.2.1:8220</code>, where <code class="literal">192.0.2.1</code> is the host IP where you will
install Fleet Server.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Elasticsearch hosts</strong></span> field, specify the Elasticsearch URLs where Elastic Agents will send data.
For example, <code class="literal">https://192.0.2.0:9200</code>.
</li>
<li class="listitem">
Save and apply the settings.
</li>
<li class="listitem">
<p>Click the <span class="strong strong"><strong>Agents</strong></span> tab and follow the in-product instructions to add a
Fleet Server.</p>
<p>Start with downloading the Elastic Agent artifact of your choice to the host
to run the Fleet Server:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/add-fleet-server.png" alt="In-product instructions for adding a Fleet Server">
</div>
</div>
<p>The <code class="literal">install</code> command installs the Elastic Agent as a managed service and enrolls it
in a Fleet Server policy. The example below is for Linux and MacOS hosts (Windows usage
will be similar):</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">sudo ./elastic-agent install -f --fleet-server-es=http://localhost:9200 \
--fleet-server-service-token=AAEAAWVsYXN0aWMvZmxlZXQtc2VydmVyL3Rva2VuLTE2MTkxMzg3MzIzMTg6dzEta0JDTmZUZGlDTjlwRmNVTjNVQQ</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>For DEB or RPM artifact usage, substitute the <code class="literal">install</code> command for <code class="literal">enroll</code>.
This is because DEB and RPM usage inherently include installing the Elastic Agent files to disk,
and so the <code class="literal">install</code> command is incompatible with them.</p>
</div>
</div>
<p>When the installation is successful, you&#8217;ll see the Fleet Server Elastic Agent on the
<span class="strong strong"><strong>Agents</strong></span> tab in <span class="strong strong"><strong>Fleet</strong></span>.</p>
<p>Notice that the <span class="strong strong"><strong>Default Fleet Server policy</strong></span> is
assigned to the Elastic Agent. This policy is created when you run Fleet for the
first time.</p>
<p>You now need to install and enroll your Elastic Agents.</p>
</li>
</ol>
</div>
  </div>
</div>
<h5><a id="reenroll-agent"></a>Step 2: Install and enroll Elastic Agent on more hosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/7.13/docs/en/ingest-management/elastic-agent/upgrade-elastic-agent.asciidoc">edit</a></h5>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>When you upgrade to 7.13 from 7.12 or lower, you may see the following error message in the Elasticsearch logs:</p>
<p><code class="literal">Authentication using apikey failed - api key has been invalidated</code></p>
<p>Before installing and enrolling your Elastic Agents, make sure to uninstall your previous Elastic Agents.
See <a class="xref" href="uninstall-elastic-agent.html" title="Uninstall Elastic Agent">Uninstall Elastic Agent</a>.</p>
</div>
</div>
<p>From the perspective of a host, Fleet Server will be running with the version of the installed
Elastic Agent that started it. Any other Elastic Agents enrolling with Fleet Server must have an equal or
lower version than that of the Fleet Server.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Starting from version 7.13.0 Fleet Server is required.</p>
</div>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
On the <span class="strong strong"><strong>Agents</strong></span> tab in Fleet, click <span class="strong strong"><strong>Add agent</strong></span>.
</li>
<li class="listitem">
<p>Under <span class="strong strong"><strong>Enroll in Fleet</strong></span>, follow the in-product installation steps.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/add-agent.png" alt="add agent">
</div>
</div>
<p>See the <a href="/downloads/elastic-agent" class="ulink" target="_top">download page</a> for other
installation options.</p>
</li>
</ol>
</div>
<p><span class="strong strong"><strong>Notes:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the default agent policy to get started quickly. This policy includes a
system integration for collecting logs and metrics from the host system. You
can change the policy later.
</li>
<li class="listitem">
<p>The <code class="literal">install</code> command installs the Elastic Agent as a managed service, enrolls it
in the selected policy, and starts the service. For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">./elastic-agent install -f --url=https://10.0.2.2:8220 \
--enrollment-token=blJqaUdua0JqYXA0bmNscVVjUkE6ZGh4WWNRSHRRek9aSS1paEs2cHdFQQ==</pre>
</div>
</li>
<li class="listitem">
Because Elastic Agent is installed as an auto-starting service, it will restart
automatically if the system is rebooted.
</li>
<li class="listitem">
To see where files are installed, see <a class="xref" href="elastic-agent-installation.html#installation-layout" title="Installation layout">Installation layout</a>.
</li>
</ul>
</div>
<p>If installation is successful, you’ll see the agent on the <span class="strong strong"><strong>Agents</strong></span>
tab in <span class="strong strong"><strong>Fleet</strong></span>. Notice that the Default policy is assigned to the
agent.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-fleet-agents.png" alt="Fleet showing enrolled agents">
</div>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the status hangs at Enrolling, make sure the <code class="literal">elastic-agent</code> process
is running.</p>
</div>
</div>
<p>If you run into problems, see <a class="xref" href="fleet-troubleshooting.html" title="Troubleshoot common problems"><em>Troubleshoot common problems</em></a>.</p>
<style>
.tabs {
  width: 100%;
}
[role="tablist"] {
  margin: 0 0 -0.1em;
  overflow: visible;
}
[role="tab"] {
  position: relative;
  padding: 0.3em 0.5em 0.4em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0.2em 0.2em 0 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  background: hsl(220, 20%, 94%);
}
[role="tab"]:hover::before,
[role="tab"]:focus::before,
[role="tab"][aria-selected="true"]::before {
  position: absolute;
  bottom: 100%;
  right: -1px;
  left: -1px;
  border-radius: 0.2em 0.2em 0 0;
  border-top: 3px solid hsl(219, 1%, 72%);
  content: '';
}
[role="tab"][aria-selected="true"] {
  border-radius: 0;
  background: hsl(220, 43%, 99%);
  outline: 0;
}
[role="tab"][aria-selected="true"]:not(:focus):not(:hover)::before {
  border-top: 5px solid hsl(218, 96%, 48%);
}
[role="tab"][aria-selected="true"]::after {
  position: absolute;
  z-index: 3;
  bottom: -1px;
  right: 0;
  left: 0;
  height: 0.3em;
  background: hsl(220, 43%, 99%);
  box-shadow: none;
  content: '';
}
[role="tab"]:hover,
[role="tab"]:focus,
[role="tab"]:active {
  outline: 0;
  border-radius: 0;
  color: inherit;
}
[role="tab"]:hover::before,
[role="tab"]:focus::before {
  border-color: hsl(218, 96%, 48%);
}
[role="tabpanel"] {
  position: relative;
  z-index: 2;
  padding: 1em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0 0.2em 0.2em 0.2em;
  box-shadow: 0 0 0.2em hsl(219, 1%, 72%);
  background: hsl(220, 43%, 99%);
  margin-bottom: 1em;
}
[role="tabpanel"] p {
  margin: 0;
}
[role="tabpanel"] * + p {
  margin-top: 1em;
}
</style>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabList = document.querySelector('[role="tablist"]');
  // Add a click event handler to each tab
  tabs.forEach(tab => {
    tab.addEventListener("click", changeTabs);
  });
  // Enable arrow navigation between tabs in the tab list
  let tabFocus = 0;
  tabList.addEventListener("keydown", e => {
    // Move right
    if (e.keyCode === 39 || e.keyCode === 37) {
      tabs[tabFocus].setAttribute("tabindex", -1);
      if (e.keyCode === 39) {
        tabFocus++;
        // If we're at the end, go to the start
        if (tabFocus >= tabs.length) {
          tabFocus = 0;
        }
        // Move left
      } else if (e.keyCode === 37) {
        tabFocus--;
        // If we're at the start, move to the end
        if (tabFocus < 0) {
          tabFocus = tabs.length - 1;
        }
      }
      tabs[tabFocus].setAttribute("tabindex", 0);
      tabs[tabFocus].focus();
    }
  });
});

function setActiveTab(target) {
  const parent = target.parentNode;
  const grandparent = parent.parentNode;
  // console.log(grandparent);
  // Remove all current selected tabs
  parent
    .querySelectorAll('[aria-selected="true"]')
    .forEach(t => t.setAttribute("aria-selected", false));
  // Set this tab as selected
  target.setAttribute("aria-selected", true);
  // Hide all tab panels
  grandparent
    .querySelectorAll('[role="tabpanel"]')
    .forEach(p => p.setAttribute("hidden", true));
  // Show the selected panel
  grandparent.parentNode
    .querySelector(`#${target.getAttribute("aria-controls")}`)
    .removeAttribute("hidden");
}

function changeTabs(e) {
  // get the containing list of the tab that was just clicked
  const tabList = e.target.parentNode;

  // get all of the sibling tabs
  const buttons = Array.apply(null, tabList.querySelectorAll('button'));

  // loop over the siblings to discover which index thje clicked one was
  const { index } = buttons.reduce(({ found, index }, button) => {
    if (!found && buttons[index] === e.target) {
      return { found: true, index };
    } else if (!found) {
      return { found, index: index + 1 };
    } else {
      return { found, index };
    }
  }, { found: false, index: 0 });

  // get the tab container
  const container = tabList.parentNode;
  // read the data-tab-group value from the container, e.g. "os"
  const { tabGroup } = container.dataset;
  // get a list of all the tab groups that match this value on the page
  const groups = document.querySelectorAll('[data-tab-group=' + tabGroup + ']');

  // for each of the found tab groups, find the tab button at the previously discovered index and select it for each group
  groups.forEach((group) => {
    const target = group.querySelectorAll('button')[index];
    setActiveTab(target);
  });
}
</script>
</div>
<div class="navfooter">
<span class="prev">
<a href="running-on-kubernetes-standalone.html">« Run Elastic Agent standalone on Kubernetes</a>
</span>
<span class="next">
<a href="start-elastic-agent.html">Start Elastic Agent »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
