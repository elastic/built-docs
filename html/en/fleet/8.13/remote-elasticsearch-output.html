<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Remote Elasticsearch output | Fleet and Elastic Agent Guide [8.13] | Elastic</title>
<meta class="elastic" name="content" content="Remote Elasticsearch output | Fleet and Elastic Agent Guide [8.13]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.13]"/>
<link rel="up" href="fleet-settings.html" title="Fleet settings"/>
<link rel="prev" href="kafka-output-settings.html" title="Kafka output settings"/>
<link rel="next" href="manage-agents.html" title="Elastic Agents"/>
<meta class="elastic" name="product_version" content="8.13"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.13"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.13"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.13]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="manage-agents-in-fleet.html">Centrally manage Elastic Agents in Fleet</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="fleet-settings.html">Fleet settings</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="kafka-output-settings.html">« Kafka output settings</a>
</span>
<span class="next">
<a href="manage-agents.html">Elastic Agents »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-elasticsearch-output"></a>Remote Elasticsearch output<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/8.13/docs/en/ingest-management/fleet/fleet-settings-remote-elasticsearch.asciidoc">edit</a></h3>
</div></div></div>
<p>Beginning in version 8.12.0, you can send Elastic Agent data to a remote Elasticsearch cluster. This is especially useful for data that you want to keep separate and independent from the deployment where you use Fleet to manage the agents.</p>
<p>A remote Elasticsearch cluster supports the same <a class="xref" href="es-output-settings.html" title="Elasticsearch output settings">output settings</a> as your main Elasticsearch cluster.</p>
<p>To configure a remote Elasticsearch cluster for your Elastic Agent data:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Kibana, go to <span class="strong strong"><strong>Management &#8594; Fleet &#8594; Settings</strong></span>.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Outputs</strong></span> section, select <span class="strong strong"><strong>Add output</strong></span>.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Add new output</strong></span> flyout, provide a name for the output and select <span class="strong strong"><strong>Remote Elasticsearch</strong></span> as the output type.
</li>
<li class="listitem">
<p>In the <span class="strong strong"><strong>Hosts</strong></span> field, add the URL that agents should use to access the remote Elasticsearch cluster.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
To find the remote host address, in the remote cluster open Kibana and go to <span class="strong strong"><strong>Management &#8594; Fleet &#8594; Settings</strong></span>.
</li>
<li class="listitem">
Copy the <span class="strong strong"><strong>Hosts</strong></span> value for the default output.
</li>
<li class="listitem">
Back in your main cluster, paste the value you copied into the output <span class="strong strong"><strong>Hosts</strong></span> field.
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>Create a service token to access the remote cluster.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Below the <span class="strong strong"><strong>Service Token</strong></span> field, copy the API request.
</li>
<li class="listitem">
In the remote cluster, open the Kibana menu and go to <span class="strong strong"><strong>Management &#8594; Dev Tools</strong></span>.
</li>
<li class="listitem">
Run the API request.
</li>
<li class="listitem">
Copy the value for the generated token.
</li>
<li class="listitem">
<p>Back in your main cluster, paste the value you copied into the output <span class="strong strong"><strong>Service Token</strong></span> field.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To prevent unauthorized access the Elasticsearch Service Token is stored as a secret value. While secret storage is recommended, you can choose to override this setting and store the password as plain text in the agent policy definition. Secret storage requires Fleet Server version 8.12 or higher. This setting can also be stored as a secret value or as plain text for preconfigured outputs. See <a href="/guide/en/kibana/8.13/fleet-settings-kb.html#_preconfiguration_settings_for_advanced_use_cases" class="ulink" target="_top">Preconfiguration settings</a> in the Kibana Guide to learn more.</p>
</div>
</div>
</li>
</ol>
</div>
</li>
<li class="listitem">
Choose whether or not the remote output should be the default for agent integrations or for agent monitoring data. When set, Elastic Agents use this output to send data if no other output is set in the <a class="xref" href="agent-policy.html" title="Elastic Agent policies">agent policy</a>.
</li>
<li class="listitem">
Select which <a class="xref" href="es-output-settings.html#es-output-settings-performance-tuning-settings" title="Performance tuning settings">performance tuning settings</a> you&#8217;d prefer in order to optimize Elastic Agent for throughput, scale, or latency, or leave the default <code class="literal">balanced</code> setting.
</li>
<li class="listitem">
Add any <a class="xref" href="es-output-settings.html#es-output-settings-yaml-config" title="Advanced YAML configuration">advanced YAML configuration settings</a> that you&#8217;d like for the output.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save and apply settings</strong></span>.
</li>
</ol>
</div>
<p>After the output is created, you can update an Elastic Agent policy to use the new remote Elasticsearch cluster:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Kibana, go to <span class="strong strong"><strong>Management &#8594; Fleet &#8594; Agent policies</strong></span>.
</li>
<li class="listitem">
Click the agent policy to edit it, then click <span class="strong strong"><strong>Settings</strong></span>.
</li>
<li class="listitem">
To send integrations data, set the <span class="strong strong"><strong>Output for integrations</strong></span> option to use the output that you configured in the previous steps.
</li>
<li class="listitem">
To send Elastic Agent monitoring data, set the <span class="strong strong"><strong>Output for agent monitoring</strong></span> option to use the output that you configured in the previous steps.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save changes</strong></span>.
</li>
</ol>
</div>
<p>The remote Elasticsearch cluster is now configured.</p>
<p>As a final step before using the remote Elasticsearch output, you need to make sure that for any integrations that have been <a class="xref" href="add-integration-to-policy.html" title="Add an Elastic Agent integration to a policy">added to your Elastic Agent policy</a>, the integration assets have been installed on the remote Elasticsearch cluster. Refer to <a class="xref" href="install-uninstall-integration-assets.html" title="Install and uninstall Elastic Agent integration assets">Install and uninstall Elastic Agent integration assets</a> for the steps.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="kafka-output-settings.html">« Kafka output settings</a>
</span>
<span class="next">
<a href="manage-agents.html">Elastic Agents »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
