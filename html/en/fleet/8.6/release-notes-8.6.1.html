<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Fleet and Elastic Agent 8.6.1 | Fleet and Elastic Agent Guide [8.6] | Elastic</title>
<meta class="elastic" name="content" content="Fleet and Elastic Agent 8.6.1 | Fleet and Elastic Agent Guide [8.6]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.6]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes-8.6.2.html" title="Fleet and Elastic Agent 8.6.2"/>
<link rel="next" href="release-notes-8.6.0.html" title="Fleet and Elastic Agent 8.6.0"/>
<meta class="elastic" name="product_version" content="8.6"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.6"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.6"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.6]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-8.6.2.html">« Fleet and Elastic Agent 8.6.2</a>
</span>
<span class="next">
<a href="release-notes-8.6.0.html">Fleet and Elastic Agent 8.6.0 »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-8.6.1"></a>Fleet and Elastic Agent 8.6.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.6/docs/en/ingest-management/release-notes/release-notes-8.6.asciidoc">edit</a></h2>
</div></div></div>
<p>Review important information about the Fleet and Elastic Agent 8.6.1 release.</p>
<h4><a id="known-issues-8.6.1"></a>Known issues<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.6/docs/en/ingest-management/release-notes/release-notes-8.6.asciidoc">edit</a></h4>
<details id="known-issue-issue-2066-8-6-1">
<summary class="title">Osquery live query results can take up to five minutes to show up in Kibana.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
A known issue in Elastic Agent may prevent live query results from being available
in the Kibana UI even though the results have been successfully sent to Elasticsearch.
For more information, refer to <a href="https://github.com/elastic/elastic-agent/issues/2066" class="ulink" target="_top">#2066</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Be aware that the live query results shown in Kibana may be delayed by up to 5 minutes.</p>
</div>
</details>
<details id="known-issue-2170">
<summary class="title">Adding a Fleet Server integration to an agent results in panic if the agent was not bootstrapped with a Fleet Server.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>A panic occurs because the Elastic Agent does not have a <code class="literal">fleet.server</code> in the <code class="literal">fleet.enc</code>
configuration file. When this happens, the agent fails with a message like:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x557b8eeafc1d]
goroutine 86 [running]:
github.com/elastic/elastic-agent/internal/pkg/agent/application.FleetServerComponentModifier.func1({0xc000652f00, 0xa, 0x10}, 0x557b8fa8eb92?)
...</pre>
</div>
<p>For more information, refer to <a href="https://github.com/elastic/elastic-agent/issues/2170" class="ulink" target="_top">#2170</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>To work around this problem, uninstall the Elastic Agent and install it again with
Fleet Server enabled during the bootstrap process.</p>
</div>
</details>
<details id="known-issue-2232-8-6-1">
<summary class="title">Changing the Elastic Agent log level can incorrectly disable inputs in supervised Beats.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>Data collection may be disabled when the Elastic Agent log level is changed. Avoid changing the Elastic Agent log level.</p>
<p>Upgrade to 8.6.2 to fix the problem. For more information, refer to <a href="https://github.com/elastic/elastic-agent/issues/2232" class="ulink" target="_top">#2232</a>.</p>
</div>
</details>
<details id="known-issue-2328-8-6-1">
<summary class="title">Fleet Server will crash when configured to use the Warning log level.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>Fleet Server will crash when configured to use the Warning log level. Do not use the Warning log level.
Affected Fleet Server instances must be reinstalled to fix the problem.</p>
<p>Upgrade to 8.6.2 to fix the problem. For more information, refer to <a href="https://github.com/elastic/fleet-server/issues/2328" class="ulink" target="_top">#2328</a>.</p>
</div>
</details>
<details id="known-issue-issue-unsigned-8.6.1">
<summary class="title">The initial release of Elastic Agent 8.6.1 for MacOS contained an unsigned elastic-agent executable. On MacOS Ventura, upgrading from 8.6.1 to any other version will fail and can disable Elastic Defend protections.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The initial release of Elastic Agent version 8.6.1 for MacOS contained an unsigned elastic-agent executable and a correctly signed endpoint-security
executable. The endpoint-security executable implements the endpoint protection functionality of the Elastic Defend integration.</p>
<p>New functionality in MacOS Gatekeeper in MacOS Ventura prevents the unsigned elastic-agent executable from modifying the installation of the signed endpoint-security executable causing upgrades from affected 8.6.1 versions to fail. The failed upgrade can leave Elastic Agent in an unhealthy
state with the endpoint-security executable disabled. Note that MacOS Gatekeeper implements a signature cache, such that the upgrade is only likely to fail on MacOS Ventura machines that have been rebooted since the first upgrade to version 8.6.1.</p>
<p>As of February 27th 2023 the Elastic Agent 8.6.1 artifacts for MacOS have been updated with a correctly signed elastic-agent executable. To verify that
the signature of the elastic-agent executable is correct, run the command below and ensure that Elasticsearch, Inc appears in the Authority field.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">tar xvfz elastic-agent-8.6.1-darwin-aarch64.tar.gz
cd elastic-agent-8.6.1-darwin-aarch64
codesign -dvvvv ./elastic-agent
...
Signature size=9068
Authority=Developer ID Application: Elasticsearch, Inc (2BT3HPN62Z)
Authority=Developer ID Certification Authority
Authority=Apple Root CA
Timestamp=Feb 24, 2023 at 4:33:02 AM
...</pre>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Any Elastic Agent deployed to MacOS Ventura that was upgraded to version 8.6.1 prior to February 27th 2023 must be reinstalled using a version with correctly signed executables.
Upgrades to any other version will fail and lead to broken functionality, including disabling the protections from Elastic Defend.</p>
<p>The specific steps to follow to correct this problem are:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Download a version of Elastic Agent with correctly signed executables.
</li>
<li class="listitem">
Unenroll the affected agents, either from the command line or the Fleet UI. A new agent ID will be generated when reinstalling.
</li>
<li class="listitem">
Run the <code class="literal">elastic-agent uninstall</code> command to remove the incorrectly signed version of Elastic Agent.
</li>
<li class="listitem">
From the directory containing the new, correctly signed Elastic Agent artifacts run the <code class="literal">elastic-agent install</code> command. The agent may be reenrolled at install time or separately with the <code class="literal">elastic-agent enroll</code> command.
</li>
</ol>
</div>
</div>
</details>
<details id="known-issue-issue-2103-8.6.1">
<summary class="title">Installing Elastic Agent on MacOS Ventura may fail if Full Disk Access has not been granted to the application used for installation.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
This issue occurs on MacOS Ventura when Full Disk Access is not granted to the application that runs the installation command.
This could be either a Terminal or any custom package that a user has built to distribute Elastic Agent.</p>
<p>For more information, refer to <a href="https://github.com/elastic/elastic-agent/issues/2103" class="ulink" target="_top">#2103</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Elastic Agent will fail to install and produce "Error: failed to fix permissions: chown elastic-agent.app: operation not permitted" message.
Ensure that the application used to install Elastic Agent (for example, the Terminal or custom package) has Full Disk Access before running <code class="literal">sudo ./elastic-agent install</code>.</p>
</div>
</details>
<details id="known-issue-issue-2343-8.6.1">
<summary class="title">Elastic Agent upgrades scheduled for a future time do not run.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
A known issue in Elastic Agent may prevent upgrades scheduled to execute at a later time from running.
For more information refer to <a href="https://github.com/elastic/elastic-agent/issues/2343" class="ulink" target="_top">#2343</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Kibana may show an agent as being stuck with the <code class="literal">Updating</code> status.
If the scheduled start time has passed, you may force the agent to run by sending it any action (excluding an upgrade action), such as a change to the policy or the log level.</p>
</div>
</details>
<details id="known-issue-issue-2303-8.6.1">
<summary class="title">Fleet ignores custom <code class="literal">server.*</code> attributes provided through integration settings.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Fleet will ignore any custom <code class="literal">server.*</code> attributes provided through the custom configurations yaml block of the intgration.
For more information refer to <a href="https://github.com/elastic/fleet-server/issues/2303" class="ulink" target="_top">#2303</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Custom yaml settings are silently ignored by Fleet.
Settings with input blocks, such as Max agents are still effective.</p>
</div>
</details>
<h4><a id="bug-fixes-8.6.1"></a>Bug fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.6/docs/en/ingest-management/release-notes/release-notes-8.6.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix missing policy ID in installation URL for cloud integrations <a href="https://github.com/elastic/kibana/pull/149243" class="ulink" target="_top">#149243</a>
</li>
<li class="listitem">
Fix package installation APIs to install packages without a version <a href="https://github.com/elastic/kibana/pull/149193" class="ulink" target="_top">#149193</a>
</li>
<li class="listitem">
Fix issue where the latest GA version could not be installed if there was a newer prerelease version in the registry
<a href="https://github.com/elastic/kibana/pull/149133" class="ulink" target="_top">#149133</a> <a href="https://github.com/elastic/kibana/pull/149104" class="ulink" target="_top">#149104</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Fleet Server
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Update the <code class="literal">.fleet-agent</code> index when acknowledging policy changes when Logstash
is the configured output. Fixes agents always showing as Updating when using the
Logstash output <a href="https://github.com/elastic/fleet-server/pull/2119" class="ulink" target="_top">#2119</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix issue where Beats started by Elastic Agent may fail with an <code class="literal">output unit has no config</code> error <a href="https://github.com/elastic/elastic-agent/pull/2138" class="ulink" target="_top">#2138</a> <a href="https://github.com/elastic/elastic-agent/issues/2086" class="ulink" target="_top">#2086</a>
</li>
<li class="listitem">
Restore the ability to set custom HTTP headers at enrollment time. Fixes traffic filters in Integrations Server cloud deployments <a href="https://github.com/elastic/elastic-agent/pull/2158" class="ulink" target="_top">#2158</a> <a href="https://github.com/elastic/beats/issues/32993" class="ulink" target="_top">#32993</a>
</li>
<li class="listitem">
Make it easier to filter agent logs from the combined agent log file <a href="https://github.com/elastic/elastic-agent/pull/2044" class="ulink" target="_top">#2044</a> <a href="https://github.com/elastic/elastic-agent/issues/1810" class="ulink" target="_top">#1810</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes-8.6.2.html">« Fleet and Elastic Agent 8.6.2</a>
</span>
<span class="next">
<a href="release-notes-8.6.0.html">Fleet and Elastic Agent 8.6.0 »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
