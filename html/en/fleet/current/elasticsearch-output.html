<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Configure the Elasticsearch output | Fleet and Elastic Agent Guide [8.3] | Elastic</title>
<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.3]"/>
<link rel="up" href="elastic-agent-output-configuration.html" title="Configure outputs for standalone Elastic Agents"/>
<link rel="prev" href="elastic-agent-output-configuration.html" title="Configure outputs for standalone Elastic Agents"/>
<link rel="next" href="logstash-output.html" title="Logstash output"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.3"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.3"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.3]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="elastic-agent-configuration.html">Configure standalone Elastic Agents</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="elastic-agent-output-configuration.html">Configure outputs for standalone Elastic Agents</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="elastic-agent-output-configuration.html">« Configure outputs for standalone Elastic Agents</a>
</span>
<span class="next">
<a href="logstash-output.html">Logstash output »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="elasticsearch-output"></a>Configure the Elasticsearch output<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h3>
</div></div></div>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Running Elastic Agent in standalone mode is an advanced use case. The
documentation is incomplete and not yet mature. When possible, we recommend
using Fleet-managed agents instead of standalone mode.</p>
</div>
</div>
<p>The Elasticsearch output sends events directly to Elasticsearch by using the Elasticsearch HTTP API.</p>
<p><span class="strong strong"><strong>Compatibility:</strong></span> This output works with all compatible versions of Elasticsearch. See the
<a href="/support/matrix#matrix_compatibility" class="ulink" target="_top">Elastic Support
Matrix</a>.</p>
<p>This example configures an Elasticsearch output called <code class="literal">default</code> in the
<code class="literal">elastic-agent.yml</code> file:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    hosts: [127.0.0.1:9200]
    username: elastic
    password: changeme</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_elasticsearch_output_configuration_settings"></a>Elasticsearch output configuration settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">elasticsearch</code> output type supports the following settings, grouped by
category. Many of these settings have sensible defaults that allow you to run
Elastic Agent with minimal configuration.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-commonly-used-settings" title="Commonly used settings">Commonly used settings</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-authentication-settings" title="Authentication settings">Authentication settings</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-data-parsing-settings" title="Data parsing, filtering, and manipulation settings">Data parsing, filtering, and manipulation settings</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-http-settings" title="HTTP settings">HTTP settings</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-performance-tuning-settings" title="Performance tuning settings">Performance tuning settings</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="output-elasticsearch-commonly-used-settings"></a>Commonly used settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-enabled-setting"></a><code class="literal">enabled</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Enables or disables the output. If set to <code class="literal">false</code>, the output is
disabled.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-hosts-setting"></a><code class="literal">hosts</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of Elasticsearch nodes to connect to. The events are distributed to
these nodes in round robin order. If one node becomes unreachable, the event is
automatically sent to another node. Each Elasticsearch node can be defined as a <code class="literal">URL</code> or
<code class="literal">IP:PORT</code>. For example: <code class="literal">http://192.15.3.2</code>, <code class="literal">https://es.found.io:9230</code> or
<code class="literal">192.24.3.2:9300</code>. If no port is specified, <code class="literal">9200</code> is used.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When a node is defined as an <code class="literal">IP:PORT</code>, the <em>scheme</em> and <em>path</em> are taken
from the <code class="literal">protocol</code> and <code class="literal">path</code> settings.</p>
</div>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    hosts: ["10.45.3.2:9220", "10.45.3.1:9230"] <a id="CO14-1"></a><i class="conum" data-value="1"></i>
    protocol: https
    path: /elasticsearch</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO14-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>In this example, the Elasticsearch nodes are available at
<code class="literal">https://10.45.3.2:9220/elasticsearch</code> and
<code class="literal">https://10.45.3.1:9230/elasticsearch</code>.</p>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-protocol-setting"></a><code class="literal">protocol</code></p>
</td>
<td align="left" valign="top">
<p>(string) The name of the protocol Elasticsearch is reachable on. The options are:
<code class="literal">http</code> or <code class="literal">https</code>. The default is <code class="literal">http</code>. However, if you specify a URL for
<code class="literal">hosts</code>, the value of <code class="literal">protocol</code> is overridden by whatever scheme you specify in
the URL.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-proxy_disable-setting"></a><code class="literal">proxy_disable</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) If set to <code class="literal">true</code>, all proxy settings, including <code class="literal">HTTP_PROXY</code> and
<code class="literal">HTTPS_PROXY</code> variables, are ignored.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-proxy_headers-setting"></a><code class="literal">proxy_headers</code></p>
</td>
<td align="left" valign="top">
<p>(string) Additional headers to send to proxies during CONNECT requests.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-proxy_url-setting"></a><code class="literal">proxy_url</code></p>
</td>
<td align="left" valign="top">
<p>(string) The URL of the proxy to use when connecting to the Elasticsearch servers. The
value may be either a complete URL or a <code class="literal">host[:port]</code>, in which case the <code class="literal">http</code>
scheme is assumed. If a value is not specified through the configuration file
then proxy environment variables are used. See the
<a href="https://golang.org/pkg/net/http/#ProxyFromEnvironment" class="ulink" target="_top">Go documentation</a>
for more information about the environment variables.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="output-elasticsearch-authentication-settings"></a>Authentication settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h4>
</div></div></div>
<p>Settings for authenticating with Elasticsearch.</p>
<p>When sending data to a secured cluster through the <code class="literal">elasticsearch</code>
output, Elastic Agent can use any of the following authentication methods:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-basic-authentication-settings" title="Basic authentication credentials">Basic authentication credentials</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-apikey-authentication-settings" title="Token-based (API key) authentication">Token-based (API key) authentication</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-pki-certs-authentication-settings" title="Public Key Infrastructure (PKI) certificates">Public Key Infrastructure (PKI) certificates</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-kerberos-authentication-settings" title="Kerberos">Kerberos</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="output-elasticsearch-basic-authentication-settings"></a>Basic authentication credentials<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h5>
</div></div></div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    hosts: ["https://myEShost:9200"]
    username: "your-username"
    password: "your-password"</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-password-setting"></a><code class="literal">password</code></p>
</td>
<td align="left" valign="top">
<p>(string) The basic authentication password for connecting to Elasticsearch.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-username-setting"></a><code class="literal">username</code></p>
</td>
<td align="left" valign="top">
<p>(string) The basic authentication username for connecting to Elasticsearch.</p>
<p>This user needs the privileges required to publish events to Elasticsearch.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="output-elasticsearch-apikey-authentication-settings"></a>Token-based (API key) authentication<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h5>
</div></div></div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    hosts: ["https://myEShost:9200"]
    api_key: "KnR6yE41RrSowb0kQ0HWoA"</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-api_key-setting"></a><code class="literal">api_key</code></p>
</td>
<td align="left" valign="top">
<p>(string) Instead of using a username and password, you can use API keys to
secure communication with Elasticsearch. The value must be the ID of the API key and the
API key joined by a colon: <code class="literal">id:api_key</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="output-elasticsearch-pki-certs-authentication-settings"></a>Public Key Infrastructure (PKI) certificates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h5>
</div></div></div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    hosts: ["https://myEShost:9200"]
    ssl.certificate: "/etc/pki/client/cert.pem"
    ssl.key: "/etc/pki/client/cert.key"</pre>
</div>
<p>There are a number of SSL configuration settings available depending on whether
you are configuring the client, server, or both. See the following tables for
available settings:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-common-ssl-options" title="Common configuration options">Table 1, &#8220;Common configuration options&#8221;</a>. These settings are valid in both client and
server configurations.
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-client-ssl-options" title="Client configuration options">Table 2, &#8220;Client configuration options&#8221;</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html#output-elasticsearch-server-ssl-options" title="Server configuration options">Table 3, &#8220;Server configuration options&#8221;</a>
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>For more information about using certificates, refer to
<a class="xref" href="secure-connections.html" title="Configure SSL/TLS for self-managed Fleet Servers">Configure SSL/TLS for self-managed Fleet Servers</a>.</p>
</div>
</div>
<div class="table">
<a id="output-elasticsearch-common-ssl-options"></a>
<p class="title"><strong>Table 1. Common configuration options</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Common configuration options">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.ca_sha256-common-setting"></a><code class="literal">ssl.ca_sha256</code></p>
</td>
<td align="left" valign="top">
<p>(string) This configures a certificate pin that you can use to ensure that a
specific certificate is part of the verified chain.</p>
<p>The pin is a base64 encoded string of the SHA-256 of the certificate.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This check is not a replacement for the normal SSL validation, but it adds
additional validation. If this setting is used with  <code class="literal">verification_mode</code> set to
<code class="literal">none</code>, the check will always fail because it will not receive any verified
chains.</p>
</div>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.cipher_suites-common-setting"></a><code class="literal">ssl.cipher_suites</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of cipher suites to use. The first entry has the highest
priority. If this option is omitted, the Go crypto library&#8217;s
<a href="https://golang.org/pkg/crypto/tls/" class="ulink" target="_top">default suites</a> are used (recommended). Note
that TLS 1.3 cipher suites are not individually configurable in Go, so they are
not included in this list.</p>
<p>The following cipher suites are available:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
ECDHE-ECDSA-AES-128-CBC-SHA
</li>
<li class="listitem">
ECDHE-ECDSA-AES-128-CBC-SHA256: TLS 1.2 only. Disabled by default.
</li>
<li class="listitem">
ECDHE-ECDSA-AES-128-GCM-SHA256: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-ECDSA-AES-256-CBC-SHA
</li>
<li class="listitem">
ECDHE-ECDSA-AES-256-GCM-SHA384: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-ECDSA-CHACHA20-POLY1305: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-ECDSA-RC4-128-SHA: Disabled by default. RC4 not recommended.
</li>
<li class="listitem">
ECDHE-RSA-3DES-CBC3-SHA
</li>
<li class="listitem">
ECDHE-RSA-AES-128-CBC-SHA
</li>
<li class="listitem">
ECDHE-RSA-AES-128-CBC-SHA256: TLS 1.2 only. Disabled by default.
</li>
<li class="listitem">
ECDHE-RSA-AES-128-GCM-SHA256: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-RSA-AES-256-CBC-SHA
</li>
<li class="listitem">
ECDHE-RSA-AES-256-GCM-SHA384: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-RSA-CHACHA20-POLY1205: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-RSA-RC4-128-SHA: Disabled by default. RC4 not recommended.
</li>
<li class="listitem">
RSA-3DES-CBC3-SHA
</li>
<li class="listitem">
RSA-AES-128-CBC-SHA
</li>
<li class="listitem">
RSA-AES-128-CBC-SHA256: TLS 1.2 only. Disabled by default.
</li>
<li class="listitem">
RSA-AES-128-GCM-SHA256: TLS 1.2 only.
</li>
<li class="listitem">
RSA-AES-256-CBC-SHA
</li>
<li class="listitem">
RSA-AES-256-GCM-SHA384: TLS 1.2 only.
</li>
<li class="listitem">
RSA-RC4-128-SHA: Disabled by default. RC4 not recommended.
</li>
</ul>
</div>
<p>Here is a list of acronyms used in defining the cipher suites:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
3DES:
Cipher suites using triple DES
</li>
<li class="listitem">
AES-128/256:
Cipher suites using AES with 128/256-bit keys.
</li>
<li class="listitem">
CBC:
Cipher using Cipher Block Chaining as block cipher mode.
</li>
<li class="listitem">
ECDHE:
Cipher suites using Elliptic Curve Diffie-Hellman (DH) ephemeral key exchange.
</li>
<li class="listitem">
ECDSA:
Cipher suites using Elliptic Curve Digital Signature Algorithm for authentication.
</li>
<li class="listitem">
GCM:
Galois/Counter mode is used for symmetric key cryptography.
</li>
<li class="listitem">
RC4:
Cipher suites using RC4.
</li>
<li class="listitem">
RSA:
Cipher suites using RSA.
</li>
<li class="listitem">
SHA, SHA256, SHA384:
Cipher suites using SHA-1, SHA-256 or SHA-384.
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.curve_types-common-setting"></a><code class="literal">ssl.curve_types</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of curve types for ECDHE (Elliptic Curve Diffie-Hellman
ephemeral key exchange).</p>
<p>The following elliptic curve types are available:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
P-256
</li>
<li class="listitem">
P-384
</li>
<li class="listitem">
P-521
</li>
<li class="listitem">
X25519
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.enabled-common-setting"></a><code class="literal">ssl.enabled</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Enables or disables the SSL configuration.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code></p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>SSL settings are disabled if either <code class="literal">enabled</code> is set to <code class="literal">false</code> or the
<code class="literal">ssl</code> section is missing.</p>
</div>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.supported_protocols-common-setting"></a><code class="literal">ssl.supported_protocols</code></p>
</td>
<td align="left" valign="top">
<p>(list) List of allowed SSL/TLS versions. If the SSL/TLS server supports none
of the specified versions, the connection will be dropped during or after the
handshake. The list of allowed protocol versions include: <code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>
for TLS version 1.0, <code class="literal">TLSv1.0</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, and <code class="literal">TLSv1.3</code>.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">[TLSv1.1, TLSv1.2, TLSv1.3]</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="table">
<a id="output-elasticsearch-client-ssl-options"></a>
<p class="title"><strong>Table 2. Client configuration options</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Client configuration options">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.certificate-client-setting"></a><code class="literal">ssl.certificate</code></p>
</td>
<td align="left" valign="top">
<p>(string) The path to the certificate for SSL client authentication. This
setting is only required if <code class="literal">client_authentication</code> is specified. If
<code class="literal">certificate</code> is not specified, client authentication is not available, and the
connection might fail if the server requests client authentication. If the SSL
server does not require client authentication, the certificate will be loaded,
but not requested or used by the server.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: "/path/to/cert.pem"</pre>
</div>
<p>When this setting is configured, the <code class="literal">ssl.key</code> setting is also required.</p>
<p>Specify a path, or embed a certificate directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.certificate_authorities-client-setting"></a><code class="literal">ssl.certificate</code>
<code class="literal">_authorities</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of root certificates for verifications (required). If
<code class="literal">certificate_authorities</code> is empty or not set, the system keystore is used. If
<code class="literal">certificate_authorities</code> is self-signed, the host system needs to trust that CA
cert as well.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities: ["/path/to/root/ca.pem"]</pre>
</div>
<p>Specify a list of files that Elastic Agent will read, or embed a certificate directly
in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities:
  - |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.key-client-setting"></a><code class="literal">ssl.key</code></p>
</td>
<td align="left" valign="top">
<p>(string) The client certificate key used for client authentication. Only
required if <code class="literal">client_authentication</code> is configured.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: "/path/to/cert.key"</pre>
</div>
<p>Specify a path, or embed the private key directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: |
    -----BEGIN PRIVATE KEY-----
    KEY CONTENT APPEARS HERE
    -----END PRIVATE KEY-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.key_passphrase-client-setting"></a><code class="literal">ssl.key_passphrase</code></p>
</td>
<td align="left" valign="top">
<p>(string) The passphrase used to decrypt an encrypted key stored in the
configured <code class="literal">key</code> file.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.verification_mode-client-setting"></a><code class="literal">ssl.verification</code>
<code class="literal">_mode</code></p>
</td>
<td align="left" valign="top">
<p>(string) Controls the verification of server certificates. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">strict</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate. If the Subject Alternative
Name is empty, it returns an error.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after cautious consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use in
production environments is strongly discouraged.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">full</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.ca_trusted_fingerprint"></a><code class="literal">ssl.ca_trusted</code>
<code class="literal">_fingerprint</code></p>
</td>
<td align="left" valign="top">
<p>(string) A HEX encoded SHA-256 of a CA certificate. If this certificate is
present in the chain during the handshake, it will be added to the
<code class="literal">certificate_authorities</code> list and the handshake will continue
normally.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.ca_trusted_fingerprint: 3b24d33844d6553...826</pre>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="table">
<a id="output-elasticsearch-server-ssl-options"></a>
<p class="title"><strong>Table 3. Server configuration options</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Server configuration options">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.certificate-server-setting"></a><code class="literal">ssl.certificate</code></p>
</td>
<td align="left" valign="top">
<p>(string) The path to the certificate for SSL server authentication. If the
certificate is not specified, startup will fail.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: "/path/to/server/cert.pem"</pre>
</div>
<p>When this setting is configured, the <code class="literal">key</code> setting is also required.</p>
<p>Specify a path, or embed a certificate directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.certificate_authorities-server-setting"></a><code class="literal">ssl.certificate</code>
<code class="literal">_authorities</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of root certificates for client verifications is only required
if  <code class="literal">client_authentication</code> is configured. If <code class="literal">certificate_authorities</code> is empty
or not set, and <code class="literal">client_authentication</code> is configured, the system keystore is
used. If <code class="literal">certificate_authorities</code> is self-signed, the host system needs to
trust that CA cert too.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities: ["/path/to/root/ca.pem"]</pre>
</div>
<p>Specify a list of files that Elastic Agent will read, or embed a certificate directly
in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities:
  - |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.client_authentication-server-setting"></a><code class="literal">ssl.client_</code>
<code class="literal">authentication</code></p>
</td>
<td align="left" valign="top">
<p>(string) Configures client authentication. The valid options are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Disables client authentication.
</dd>
<dt>
<span class="term">
<code class="literal">optional</code>
</span>
</dt>
<dd>
When a client certificate is supplied, the server will verify it.
</dd>
<dt>
<span class="term">
<code class="literal">required</code>
</span>
</dt>
<dd>
Requires clients to provide a valid certificate.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">required</code> (if <code class="literal">certificate_authorities</code> is set); otherwise, <code class="literal">none</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.key-server-setting"></a><code class="literal">ssl.key</code></p>
</td>
<td align="left" valign="top">
<p>(string) The server certificate key used for authentication (required).</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: "/path/to/server/cert.key"</pre>
</div>
<p>Specify a path, or embed the private key directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: |
    -----BEGIN PRIVATE KEY-----
    KEY CONTENT APPEARS HERE
    -----END PRIVATE KEY-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.key_passphrase-server-setting"></a><code class="literal">ssl.key_passphrase</code></p>
</td>
<td align="left" valign="top">
<p>(string) The passphrase used to decrypt an encrypted key stored in the
configured <code class="literal">key</code> file.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.renegotiation-server-setting"></a><code class="literal">ssl.renegotiation</code></p>
</td>
<td align="left" valign="top">
<p>(string) Configures the type of TLS renegotiation to support. The valid options
are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">never</code>
</span>
</dt>
<dd>
Disables renegotiation.
</dd>
<dt>
<span class="term">
<code class="literal">once</code>
</span>
</dt>
<dd>
Allows a remote server to request renegotiation once per connection.
</dd>
<dt>
<span class="term">
<code class="literal">freely</code>
</span>
</dt>
<dd>
Allows a remote server to request renegotiation repeatedly.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">never</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-ssl.verification_mode-server-setting"></a><code class="literal">ssl.verification</code>
<code class="literal">_mode</code></p>
</td>
<td align="left" valign="top">
<p>(string) Controls the verification of client certificates. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">strict</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate. If the Subject Alternative
Name is empty, it returns an error.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Performs <em>no verification</em> of the server&#8217;s certificate. This mode disables many
of the security benefits of SSL/TLS and should only be used after cautious
consideration. It is primarily intended as a temporary diagnostic mechanism when
attempting to resolve TLS errors; its use in production environments is strongly
discouraged.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">full</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="output-elasticsearch-kerberos-authentication-settings"></a>Kerberos<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h5>
</div></div></div>
<p>The following encryption types are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
aes128-cts-hmac-sha1-96
</li>
<li class="listitem">
aes128-cts-hmac-sha256-128
</li>
<li class="listitem">
aes256-cts-hmac-sha1-96
</li>
<li class="listitem">
aes256-cts-hmac-sha384-192
</li>
<li class="listitem">
des3-cbc-sha1-kd
</li>
<li class="listitem">
rc4-hmac
</li>
</ul>
</div>
<p>Example output config with Kerberos password-based authentication:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    hosts: ["http://my-elasticsearch.elastic.co:9200"]
    kerberos.auth_type: password
    kerberos.username: "elastic"
    kerberos.password: "changeme"
    kerberos.config_path: "/etc/krb5.conf"
    kerberos.realm: "ELASTIC.CO"</pre>
</div>
<p>The service principal name for the Elasticsearch instance is constructed from these
options. Based on this configuration, the name would be:</p>
<p><code class="literal">HTTP/my-elasticsearch.elastic.co@ELASTIC.CO</code></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.auth_type-setting"></a><code class="literal">kerberos.auth_type</code></p>
</td>
<td align="left" valign="top">
<p>(string) The type of authentication to use with Kerberos KDC:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">password</code>
</span>
</dt>
<dd>
When specified, also set <code class="literal">kerberos.username</code> and <code class="literal">kerberos.password</code>.
</dd>
<dt>
<span class="term">
<code class="literal">keytab</code>
</span>
</dt>
<dd>
When specified, also set <code class="literal">kerberos.username</code> and <code class="literal">kerberos.keytab</code>. The keytab
must contain the keys of the selected principal, or authentication fails.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">password</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.config_path"></a><code class="literal">kerberos.config_path</code></p>
</td>
<td align="left" valign="top">
<p>(string) Path to the <code class="literal">krb5.conf</code>. Elastic Agent uses this setting to find the
Kerberos KDC to retrieve a ticket.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.enabled-setting"></a><code class="literal">kerberos.enabled</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Enables or disables the Kerberos configuration.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Kerberos settings are disabled if either <code class="literal">enabled</code> is set to <code class="literal">false</code> or the
<code class="literal">kerberos</code> section is missing.</p>
</div>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.enable_krb5_fast"></a><code class="literal">kerberos.enable_krb5_fast</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) If <code class="literal">true</code>, enables Kerberos FAST authentication. This may conflict
with some Active Directory installations.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.keytab"></a><code class="literal">kerberos.keytab</code></p>
</td>
<td align="left" valign="top">
<p>(string) If <code class="literal">kerberos.auth_type</code> is <code class="literal">keytab</code>, provide the path to the keytab
of the selected principal.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.password"></a><code class="literal">kerberos.password</code></p>
</td>
<td align="left" valign="top">
<p>(string) If <code class="literal">kerberos.auth_type</code> is <code class="literal">password</code>, provide a password for the
selected principal.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.realm"></a><code class="literal">kerberos.realm</code></p>
</td>
<td align="left" valign="top">
<p>(string) Name of the realm where the output resides.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-kerberos.username"></a><code class="literal">kerberos.username</code></p>
</td>
<td align="left" valign="top">
<p>(string) Name of the principal used to connect to the output.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="output-elasticsearch-data-parsing-settings"></a>Data parsing, filtering, and manipulation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h5>
</div></div></div>
<p>Settings used to parse, filter, and transform data.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-escape_html-setting"></a><code class="literal">escape_html</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Configures escaping of HTML in strings. Set to <code class="literal">true</code> to enable
escaping.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-pipeline-setting"></a><code class="literal">pipeline</code></p>
</td>
<td align="left" valign="top">
<p>(string) A format string value that specifies the
<a href="/guide/en/elasticsearch/reference/8.3/ingest.html" class="ulink" target="_top">ingest pipeline</a> to write events to.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearchoutput.elasticsearch:
    hosts: ["http://localhost:9200"]
    pipeline: my_pipeline_id</pre>
</div>
<p>You can set the ingest pipeline dynamically by using a format string to
access any event field. For example, this configuration uses a custom field,
<code class="literal">fields.log_type</code>, to set the pipeline for each event:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch  hosts: ["http://localhost:9200"]
    pipeline: "%{[fields.log_type]}_pipeline"</pre>
</div>
<p>With this configuration, all events with <code class="literal">log_type: normal</code> are sent to a
pipeline named <code class="literal">normal_pipeline</code>, and all events with <code class="literal">log_type: critical</code> are
sent to a pipeline named <code class="literal">critical_pipeline</code>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To learn how to add custom fields to events, see the <code class="literal">fields</code> option.</p>
</div>
</div>
<p>See the <code class="literal">pipelines</code> setting for other ways to set the ingest pipeline
dynamically.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-pipelines-setting"></a><code class="literal">pipelines</code></p>
</td>
<td align="left" valign="top">
<p>An array of pipeline selector rules. Each rule specifies the <a href="/guide/en/elasticsearch/reference/8.3/ingest.html" class="ulink" target="_top">ingest pipeline</a>
to use for events that match the rule. During publishing, Elastic Agent uses the first
matching rule in the array. Rules can contain conditionals, format string-based
fields, and name mappings. If the <code class="literal">pipelines</code> setting is missing or no rule
matches, the <code class="literal">pipeline</code> setting is used.</p>
<p>Rule settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">pipeline</code></strong></span>
</span>
</dt>
<dd>
The pipeline format string to use. If this string contains field
references, such as <code class="literal">%{[fields.name]}</code>, the fields must exist, or the rule
fails.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">mappings</code></strong></span>
</span>
</dt>
<dd>
A dictionary that takes the value returned by <code class="literal">pipeline</code> and maps
it to a new name.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">default</code></strong></span>
</span>
</dt>
<dd>
The default string value to use if <code class="literal">mappings</code> does not find a
match.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">when</code></strong></span>
</span>
</dt>
<dd>
A condition that must succeed in order to execute the current rule.
</dd>
</dl>
</div>
<p>All the conditions supported by processors are also supported here.</p>
<p>The following example sends events to a specific pipeline based on whether the
<code class="literal">message</code> field contains the specified string:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch  hosts: ["http://localhost:9200"]
    pipelines:
      - pipeline: "warning_pipeline"
        when.contains:
          message: "WARN"
      - pipeline: "error_pipeline"
        when.contains:
          message: "ERR"</pre>
</div>
<p>The following example sets the pipeline by taking the name returned by the
<code class="literal">pipeline</code> format string and mapping it to a new name that&#8217;s used for the
pipeline:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    hosts: ["http://localhost:9200"]
    pipelines:
      - pipeline: "%{[fields.log_type]}"
        mappings:
          critical: "sev1_pipeline"
          normal: "sev2_pipeline"
        default: "sev3_pipeline"</pre>
</div>
<p>With this configuration, all events with <code class="literal">log_type: critical</code> are sent to
<code class="literal">sev1_pipeline</code>, all events with <code class="literal">log_type: normal</code> are sent to a
<code class="literal">sev2_pipeline</code>, and all other events are sent to <code class="literal">sev3_pipeline</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="output-elasticsearch-http-settings"></a>HTTP settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h4>
</div></div></div>
<p>Settings that modify the HTTP requests sent to Elasticsearch.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-headers-setting"></a><code class="literal">headers</code></p>
</td>
<td align="left" valign="top">
<p>Custom HTTP headers to add to each request created by the Elasticsearch output.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: elasticsearch
    headers:
      X-My-Header: Header contents</pre>
</div>
<p>Specify multiple header values for the same header name by separating them with
a comma.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-parameters-setting"></a><code class="literal">parameters</code></p>
</td>
<td align="left" valign="top">
<p>Dictionary of HTTP parameters to pass within the URL with index operations.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-path-setting"></a><code class="literal">path</code></p>
</td>
<td align="left" valign="top">
<p>(string) An HTTP path prefix that is prepended to the HTTP API calls. This is
useful for the cases where Elasticsearch listens behind an HTTP reverse proxy that
exports the API under a custom prefix.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="output-elasticsearch-performance-tuning-settings"></a>Performance tuning settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.3/docs/en/ingest-management/elastic-agent/configuration/outputs/output-elasticsearch.asciidoc">edit</a></h4>
</div></div></div>
<p>Settings that may affect performance.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-backoff.init-setting"></a><code class="literal">backoff.init</code></p>
</td>
<td align="left" valign="top">
<p>(string) The number of seconds to wait before trying to reconnect to Elasticsearch
after a network error. After waiting <code class="literal">backoff.init</code> seconds, Elastic Agent tries to
reconnect. If the attempt fails, the backoff timer is increased exponentially up
to <code class="literal">backoff.max</code>. After a successful connection, the backoff timer is reset.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-backoff.max-setting"></a><code class="literal">backoff.max</code></p>
</td>
<td align="left" valign="top">
<p>(string) The maximum number of seconds to wait before attempting to connect to
Elasticsearch after a network error.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">60s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-bulk_max_size-setting"></a><code class="literal">bulk_max_size</code></p>
</td>
<td align="left" valign="top">
<p>(int) The maximum number of events to bulk in a single Elasticsearch bulk API index
request.</p>
<p>Events can be collected into batches. Elastic Agent will split batches larger than
<code class="literal">bulk_max_size</code> into multiple batches.</p>
<p>Specifying a larger batch size can improve performance by lowering the overhead
of sending events. However big batch sizes can also increase processing times,
which might result in API errors, killed connections, timed-out publishing
requests, and, ultimately, lower throughput.</p>
<p>Setting <code class="literal">bulk_max_size</code> to values less than or equal to 0 turns off the
splitting of batches. When splitting is disabled, the queue decides on the
number of events to be contained in a batch.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">50</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-compression_level-setting"></a><code class="literal">compression_level</code></p>
</td>
<td align="left" valign="top">
<p>(int) The gzip compression level. Set this value to <code class="literal">0</code> to disable compression.
The compression level must be in the range of <code class="literal">1</code> (best speed) to <code class="literal">9</code> (best
compression).</p>
<p>Increasing the compression level reduces network usage but increases CPU usage.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">0</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-max_retries-setting"></a><code class="literal">max_retries</code></p>
</td>
<td align="left" valign="top">
<p>(int) The number of times to retry publishing an event after a publishing
failure. After the specified number of retries, the events are typically
dropped.</p>
<p>Set <code class="literal">max_retries</code> to a value less than 0 to retry until all events are published.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">3</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-timeout-setting"></a><code class="literal">timeout</code></p>
</td>
<td align="left" valign="top">
<p>(string) The HTTP request timeout in seconds for the Elasticsearch request.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">90s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-worker-setting"></a><code class="literal">worker</code></p>
</td>
<td align="left" valign="top">
<p>(int) The number of workers per configured host publishing events to
{output-type}. This is best used with load balancing mode enabled. Example: If
you have two hosts and three workers, in total six workers are started (three
for each host).</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="elastic-agent-output-configuration.html">« Configure outputs for standalone Elastic Agents</a>
</span>
<span class="next">
<a href="logstash-output.html">Logstash output »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
