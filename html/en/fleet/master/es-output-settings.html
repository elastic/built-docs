<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Elasticsearch output settings | Fleet and Elastic Agent Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Elasticsearch output settings | Fleet and Elastic Agent Guide [master]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [master]"/>
<link rel="up" href="fleet-settings.html" title="Fleet settings"/>
<link rel="prev" href="fleet-settings.html" title="Fleet settings"/>
<link rel="next" href="ls-output-settings.html" title="Logstash output settings"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/master"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="manage-agents-in-fleet.html">Centrally manage Elastic Agents in Fleet</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="fleet-settings.html">Fleet settings</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="fleet-settings.html">« Fleet settings</a>
</span>
<span class="next">
<a href="ls-output-settings.html">Logstash output settings »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="es-output-settings"></a>Elasticsearch output settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/fleet/fleet-settings-output-elasticsearch.asciidoc">edit</a></h3>
</div></div></div>
<p>Specify these settings to send data over a secure connection to Elasticsearch. In the Fleet <a class="xref" href="fleet-settings.html#output-settings" title="Output settings">Output settings</a>, make sure that Elasticsearch output type is selected.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="es-output-hosts-setting"></a><span class="strong strong"><strong>Hosts</strong></span></p>
</td>
<td align="left" valign="top">
<p>The Elasticsearch URLs where Elastic Agents will send data. By default, Elasticsearch is exposed
on the following ports:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">9200</code>
</span>
</dt>
<dd>
Default Elasticsearch port for self-managed clusters
</dd>
<dt>
<span class="term">
<code class="literal">443</code>
</span>
</dt>
<dd>
Default Elasticsearch port for Elastic Cloud
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Examples:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">https://192.0.2.0:9200</code>
</li>
<li class="listitem">
<code class="literal">https://1d7a52f5eb344de18ea04411fe09e564.fleet.eu-west-1.aws.qa.cld.elstc.co:443</code>
</li>
<li class="listitem">
<code class="literal">https://[2001:db8::1]:9200</code>
</li>
</ul>
</div>
<p>Refer to the <a class="xref" href="fleet-server.html" title="What is Fleet Server?">Fleet Server</a> documentation for default ports and other configuration details.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="es-trusted-fingerprint-yaml-setting"></a><span class="strong strong"><strong>Elasticsearch CA trusted fingerprint</strong></span></p>
</td>
<td align="left" valign="top">
<p>HEX encoded SHA-256 of a CA certificate. If this certificate is
present in the chain during the handshake, it will be added to the
<code class="literal">certificate_authorities</code> list and the handshake will continue
normally. To learn more about trusted fingerprints, refer to the
<a href="/guide/en/elasticsearch/reference/master/configuring-stack-security.html" class="ulink" target="_top">Elasticsearch security documentation</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="es-agent-proxy-output"></a><span class="strong strong"><strong>Proxy</strong></span></p>
</td>
<td align="left" valign="top">
<p>Select a proxy URL for Elastic Agent to connect to Elasticsearch.
To learn about proxy configuration, refer to <a class="xref" href="fleet-agent-proxy-support.html" title="Using a proxy server with Elastic Agent and Fleet">Using a proxy server with Elastic Agent and Fleet</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="es-output-advanced-yaml-setting"></a><span class="strong strong"><strong>Advanced YAML configuration</strong></span></p>
</td>
<td align="left" valign="top">
<p>YAML settings that will be added to the Elasticsearch output section of each policy
that uses this output. Make sure you specify valid YAML. The UI does not
currently provide validation.</p>
<p>See <a class="xref" href="es-output-settings.html#es-output-settings-yaml-config" title="Advanced YAML configuration">Advanced YAML configuration</a> for descriptions of the available settings.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="es-agent-integrations-output"></a><span class="strong strong"><strong>Make this output the default for agent integrations</strong></span></p>
</td>
<td align="left" valign="top">
<p>When this setting is on, Elastic Agents use this output to send data if no other
output is set in the <a class="xref" href="agent-policy.html" title="Elastic Agent policies">agent policy</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="es-agent-monitoring-output"></a><span class="strong strong"><strong>Make this output the default for agent monitoring</strong></span></p>
</td>
<td align="left" valign="top">
<p>When this setting is on, Elastic Agents use this output to send <a class="xref" href="monitor-elastic-agent.html" title="Monitor Elastic Agents">agent monitoring data</a> if no other output is set in the <a class="xref" href="agent-policy.html" title="Elastic Agent policies">agent policy</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="es-agent-performance-tuning"></a><span class="strong strong"><strong>Performance tuning</strong></span></p>
</td>
<td align="left" valign="top">
<p>Choose one of the menu options to tune your Elastic Agent performance when sending data to an Elasticsearch output. You can optimize for throughput, scale, latency, or you can choose a balanced (the default) set of performance specifications. Refer to <a class="xref" href="es-output-settings.html#es-output-settings-performance-tuning-settings" title="Performance tuning settings">Performance tuning settings</a> for details about the setting values and their potential impact on performance.</p>
<p>You can also use the <a class="xref" href="es-output-settings.html#es-output-settings-yaml-config" title="Advanced YAML configuration">Advanced YAML configuration</a> field to set custom values. Note that if you adjust any of the performance settings described in the following <span class="strong strong"><strong>Advanced YAML configuration</strong></span> section, the <span class="strong strong"><strong>Performance tuning</strong></span> option automatically changes to <code class="literal">Custom</code> and cannot be changed.</p>
<p>Performance tuning preset values take precedence over any settings that may be defined separately. If you want to change any setting, you need to use the <code class="literal">Custom</code> <span class="strong strong"><strong>Performance tuning</strong></span> option and specify the settings in the <span class="strong strong"><strong>Advanced YAML configuration</strong></span> field.</p>
<p>For example, if you would like to use the balanced preset values except that you prefer a higher compression level, you can do so as follows:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Fleet, open the <span class="strong strong"><strong>Settings</strong></span> tab.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Outputs</strong></span> section, select <span class="strong strong"><strong>Add output</strong></span> to create a new output, or select the edit icon to edit an existing output.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Add new output</strong></span> or the <span class="strong strong"><strong>Edit output</strong></span> flyout, set <span class="strong strong"><strong>Performance tuning</strong></span> to <code class="literal">Custom</code>.
</li>
<li class="listitem">
<p>Refer to the list of <a class="xref" href="es-output-settings.html#es-output-settings-performance-tuning-settings" title="Performance tuning settings">performance tuning preset values</a>, and add the settings you prefer into the <span class="strong strong"><strong>Advanced YAML configuration</strong></span> field. For the <code class="literal">balanced</code> presets, the yaml configuration would be as shown:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">bulk_max_size: 1600
worker: 1
queue.mem.events: 3200
queue.mem.flush.min_events: 1600
queue.mem.flush.timeout: 10s
compression_level: 1
connection_idle_timeout: 3s</pre>
</div>
</li>
<li class="listitem">
Adjust any settings as preferred. For example, you can update the <code class="literal">compression_level</code> setting to <code class="literal">4</code>.
</li>
</ol>
</div>
<p>When you create an Elastic Agent policy using this output, the output will use the balanced preset options except with the higher compression level, as specified.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="es-output-settings-yaml-config"></a>Advanced YAML configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/fleet/fleet-settings-output-elasticsearch.asciidoc">edit</a></h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-backoff.init-setting"></a><code class="literal">backoff.init</code></p>
</td>
<td align="left" valign="top">
<p>(string) The number of seconds to wait before trying to reconnect to Elasticsearch
after a network error. After waiting <code class="literal">backoff.init</code> seconds, Elastic Agent tries to
reconnect. If the attempt fails, the backoff timer is increased exponentially up
to <code class="literal">backoff.max</code>. After a successful connection, the backoff timer is reset.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-backoff.max-setting"></a><code class="literal">backoff.max</code></p>
</td>
<td align="left" valign="top">
<p>(string) The maximum number of seconds to wait before attempting to connect to
Elasticsearch after a network error.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">60s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-bulk_max_size-setting"></a><code class="literal">bulk_max_size</code></p>
</td>
<td align="left" valign="top">
<p>(int) The maximum number of events to bulk in a single Elasticsearch bulk API index
request.</p>
<p>Events can be collected into batches. Elastic Agent will split batches larger than
<code class="literal">bulk_max_size</code> into multiple batches.</p>
<p>Specifying a larger batch size can improve performance by lowering the overhead
of sending events. However big batch sizes can also increase processing times,
which might result in API errors, killed connections, timed-out publishing
requests, and, ultimately, lower throughput.</p>
<p>Setting <code class="literal">bulk_max_size</code> to values less than or equal to 0 turns off the
splitting of batches. When splitting is disabled, the queue decides on the
number of events to be contained in a batch.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1600</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-compression_level-setting"></a><code class="literal">compression_level</code></p>
</td>
<td align="left" valign="top">
<p>(int) The gzip compression level. Set this value to <code class="literal">0</code> to disable compression.
The compression level must be in the range of <code class="literal">1</code> (best speed) to <code class="literal">9</code> (best
compression).</p>
<p>Increasing the compression level reduces network usage but increases CPU usage.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-max_retries-setting"></a><code class="literal">max_retries</code></p>
</td>
<td align="left" valign="top">
<p>(int) The number of times to retry publishing an event after a publishing
failure. After the specified number of retries, the events are typically
dropped.</p>
<p>Set <code class="literal">max_retries</code> to a value less than 0 to retry until all events are published.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">3</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-queue.mem.events-setting"></a><code class="literal">queue.mem.events</code></p>
</td>
<td align="left" valign="top">
<p>The number of events the queue can store. This value should be evenly divisible by the smaller of <code class="literal">queue.mem.flush.min_events</code> or <code class="literal">bulk_max_size</code> to avoid sending partial batches to the output.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">3200 events</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-queue.mem.flush.min_events-setting"></a><code class="literal">queue.mem.flush.min_events</code></p>
</td>
<td align="left" valign="top">
<p><code class="literal">flush.min_events</code> is a legacy parameter, and new configurations should prefer to control batch size with <code class="literal">bulk_max_size</code>. As of 8.13, there is never a performance advantage to limiting batch size with <code class="literal">flush.min_events</code> instead of <code class="literal">bulk_max_size</code></p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1600 events</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-queue.mem.flush.timeout-setting"></a><code class="literal">queue.mem.flush.timeout</code></p>
</td>
<td align="left" valign="top">
<p>(int) The maximum wait time for <code class="literal">queue.mem.flush.min_events</code> to be fulfilled. If set to 0s, events are available to the output immediately.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">10s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-timeout-setting"></a><code class="literal">timeout</code></p>
</td>
<td align="left" valign="top">
<p>(string) The HTTP request timeout in seconds for the Elasticsearch request.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">90s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-elasticsearch-fleet-settings-worker-setting"></a><code class="literal">worker</code></p>
</td>
<td align="left" valign="top">
<p>(int) The number of workers per configured host publishing events. Example: If
you have two hosts and three workers, in total six workers are started (three
for each host).</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="es-output-settings-performance-tuning-settings"></a>Performance tuning settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/fleet/fleet-settings-output-elasticsearch.asciidoc">edit</a></h4>
</div></div></div>
<div class="table">
<p class="title"><strong>Table 1. Performance tuning preset values</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Performance tuning preset values">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Configuration</th>
<th align="left" valign="top">Balanced</th>
<th align="left" valign="top">Optimized for Throughput</th>
<th align="left" valign="top">Optimized for Scale</th>
<th align="left" valign="top">Optimized for Latency</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">bulk_max_size</code></p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>50</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">worker</code></p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">queue.mem.events</code></p></td>
<td align="left" valign="top"><p>3200</p></td>
<td align="left" valign="top"><p>12800</p></td>
<td align="left" valign="top"><p>3200</p></td>
<td align="left" valign="top"><p>4100</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">queue.mem.flush.min_events</code></p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>2050</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">queue.mem.flush.timeout</code></p></td>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>20</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">compression_level</code></p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">connection_idle_timeout</code></p></td>
<td align="left" valign="top"><p>3</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>60</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>For descriptions of each setting, refer to <a class="xref" href="es-output-settings.html#es-output-settings-yaml-config" title="Advanced YAML configuration">Advanced YAML configuration</a>. For the  <code class="literal">queue.mem.events</code>, <code class="literal">queue.mem.flush.min_events</code> and <code class="literal">queue.mem.flush.timeout</code> settings, refer to the <a href="/guide/en/beats/filebeat/master/configuring-internal-queue.html" class="ulink" target="_top">internal queue configuration settings</a> in the Filebeat documentation.</p>
<p><code class="literal">Balanced</code> represents the new default setting (out of the box behaviour). Relative to <code class="literal">Balanced</code>, <code class="literal">Optimized for throughput</code> setting will improve EPS by 4 times, <code class="literal">Optimized for Scale</code> will perform on par and <code class="literal">Optimized for Latency</code> will show a 20% degredation in EPS (Events Per Second). These relative performance numbers were calculated from a performance testbed which operates in a controlled setting ingesting a large log file.</p>
<p>As mentioned, the <code class="literal">custom</code> preset allows you to input your own set of parameters for a finer tuning of performance. The following table
is a summary of a few data points and how the resulting EPS compares to the <code class="literal">Balanced</code> setting mentioned above.</p>
<p>These presets apply only to agents on version 8.12.0 or later.</p>
<div class="table">
<p class="title"><strong>Table 2. Performance tuning: EPS data</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Performance tuning: EPS data">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
<col class="col_7"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">worker</th>
<th align="left" valign="top">bulk_max_size</th>
<th align="left" valign="top">queue.mem_events</th>
<th align="left" valign="top">queue.mem.flush.min_events</th>
<th align="left" valign="top">queue.mem.flush.timeout</th>
<th align="left" valign="top">connection_idle_timeout</th>
<th align="left" valign="top">Relative EPS</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>3200</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>1x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>1x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>8192</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>1x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>6400</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>2x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>8192</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>2x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>16384</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>2x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>12800</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>3.6x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>16384</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>3.6x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>32768</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>3.6x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>8</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>25600</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>5.3x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>8</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>32768</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>5.1x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>8</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>65536</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>5.2x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>16</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>51200</p></td>
<td align="left" valign="top"><p>1600</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>5.3x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>16</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>65536</p></td>
<td align="left" valign="top"><p>2048</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>5.2x</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>16</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>131072</p></td>
<td align="left" valign="top"><p>4096</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>5.3x</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="fleet-settings.html">« Fleet settings</a>
</span>
<span class="next">
<a href="ls-output-settings.html">Logstash output settings »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
