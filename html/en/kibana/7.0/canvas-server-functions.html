<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Canvas server functions | Kibana Guide [7.0] | Elastic</title>
<meta class="elastic" name="content" content="Canvas server functions | Kibana Guide [7.0]">

<link rel="home" href="index.html" title="Kibana Guide [7.0]"/>
<link rel="up" href="canvas-function-reference.html" title="Canvas function reference"/>
<link rel="prev" href="canvas-common-functions.html" title="Canvas common functions"/>
<link rel="next" href="canvas-client-functions.html" title="Canvas client functions"/>
<meta class="elastic" name="product_version" content="7.0"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.0"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.0"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="canvas-common-functions.html">« Canvas common functions</a>
</span>
<span class="next">
<a href="canvas-client-functions.html">Canvas client functions »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.0]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="canvas.html">Canvas</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="canvas-function-reference.html">Canvas function reference</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Canvas server functions</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="canvas-server-functions"></a>Canvas server functions<a class="xpack_tag" href="/subscriptions"></a></h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
</div></div></div>
<p>These functions can only execute on the server. This may be for performance
or security reasons, or because the function uses an API only available on the
Kibana server. If the expression is executing in the browser, it will transfer to
the server when it hits one of these functions.</p>
<p>A <span class="strong strong"><strong>*</strong></span> denotes a required argument.</p>
<div class="position-relative"><h3><a id="_demodata"></a>demodata</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
<p>A mock data set that includes project CI times with usernames, countries, and run phases.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em> (Alias: <code class="literal">type</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>The name of the demo data set to use  (default: <code class="literal">ci</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
<div class="position-relative"><h3><a id="_esdocs"></a>esdocs</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
<p>Queries Elasticsearch and gets back raw documents. Specify the fields you want to receive,
especially if you are asking for a lot of rows.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>index</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Specify an index pattern, for example, "logstash-*"  (default is <code class="literal">_all</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em> (Aliases: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>A Lucene query string (default: <code class="literal">_index:.kibana</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>sort</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Sort directions as "field, direction", for example, "@timestamp, desc" or "bytes, asc"</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>fields</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Comma separated list of fields. Fewer fields will perform better</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>metaFields</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Comma separated list of meta fields, for example, "_index,_type"</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>count</p></td>
<td align="left" valign="top"><p>number</p></td>
<td align="left" valign="top"><p>The number of docs to pull back. Smaller numbers perform better (default: <code class="literal">100</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
<div class="position-relative"><h3><a id="_escount"></a>escount</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
<p>Queries Elasticsearch for a count of the number of hits matching a query.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>index</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Specify an index pattern, for example, "logstash-*"  (default: <code class="literal">all</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em>  (Alias: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>A Lucene query string (default: <code class="literal">"-_index:.kibana"</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> number</p>
<div class="position-relative"><h3><a id="_essql"></a>essql</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
<p>Specifies an Elasticsearch SQL.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em>*  (Alias: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>An SQL query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>count</p></td>
<td align="left" valign="top"><p>number</p></td>
<td align="left" valign="top"><p>The default is <code class="literal">1000</code></p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
<div class="position-relative"><h3><a id="_pointseries"></a>pointseries</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
<p>Turns a datatable into a point series model. Currently Canvas differentiates measure
from dimensions by looking for a <a class="xref" href="canvas-tinymath-functions.html" title="TinyMath functions">Tiny Math function</a>. If you enter a TinyMath
expression in your argument, Canvas treats that argument as a measure. Otherwise, it
is a dimension. Dimensions are combined to create unique keys. Measures are
then deduplicated by those keys using the specified TinyMath function.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> datatable</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>x</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>The values along the X-axis</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>y</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>The values along the Y-axis</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>color</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>An expression to use in determining the mark&#8217;s color</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>size</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>For elements that support it, the size of the marks</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>For use in charts that support it, the text to show in the mark</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> pointseries</p>
<div class="position-relative"><h3><a id="_server"></a>server</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
<p>Forces the interpreter to return to the server.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> Anything or nothing</p>
<p><span class="strong strong"><strong>Returns:</strong></span> Depends on your input and arguments
&nbsp;</p>
<div class="position-relative"><h3><a id="_timelion"></a>timelion</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/canvas/canvas-server-functions.asciidoc">edit</a></div>
<p>Uses Timelion to extract one or more time series from many sources.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em> (Aliases: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>A Timelion query (default: <code class="literal">".es(*)"</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>interval</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Bucket interval for the time series (default: <code class="literal">auto</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>from</p></td>
<td align="left" valign="top"><p>any</p></td>
<td align="left" valign="top"><p>Elasticsearch date math string for the start of the time range (default: <code class="literal">now-1y</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>to</p></td>
<td align="left" valign="top"><p>any</p></td>
<td align="left" valign="top"><p>Elasticsearch date math string for the end of the time range (default: <code class="literal">now</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>timezone</p></td>
<td align="left" valign="top"><p>any</p></td>
<td align="left" valign="top"><p>Time zone for the time range (default: <code class="literal">UTC</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="canvas-common-functions.html">« Canvas common functions</a>
</span>
<span class="next">
<a href="canvas-client-functions.html">Canvas client functions »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
