<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Managing Dependencies | Kibana Guide [7.0] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [7.0]"/>
<link rel="up" href="core-development.html" title="Core Development"/>
<link rel="prev" href="development-basepath.html" title="Considerations for basePath"/>
<link rel="next" href="development-modules.html" title="Modules and Autoloading"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.0"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.0"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.0]</a></span>
»
<span class="breadcrumb-link"><a href="development.html">Developer guide</a></span>
»
<span class="breadcrumb-link"><a href="core-development.html">Core Development</a></span>
»
<span class="breadcrumb-node">Managing Dependencies</span>
</div>
<div class="navheader">
<span class="prev">
<a href="development-basepath.html">« Considerations for basePath</a>
</span>
<span class="next">
<a href="development-modules.html">Modules and Autoloading »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="development-dependencies"></a>Managing Dependencies<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/developer/core/development-dependencies.asciidoc">edit</a></h2>
</div></div></div>
<p>While developing plugins for use in the Kibana front-end environment you will
probably want to include a library or two (at least). While that should be
simple to do 90% of the time, there are always outliers, and some of those
outliers are very popular projects.</p>
<p>Before you can use an external library with Kibana you have to install it. You
do that using&#8230;&#8203;</p>
<h4><a id="_yarn_preferred_method"></a>yarn (preferred method)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/developer/core/development-dependencies.asciidoc">edit</a></h4>
<p>Once you&#8217;ve <a href="http://npmsearch.com" class="ulink" target="_top">found</a> a dependency you want to add, you can
install it like so:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">yarn add some-neat-library</pre>
</div>
<p>At the top of a javascript file, just import the library using it&#8217;s name:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">import someNeatLibrary from 'some-neat-library';</pre>
</div>
<p>Just like working in node.js, front-end code can require node modules installed
by yarn without any additional configuration.</p>
<h4><a id="_webpackshims"></a>webpackShims<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/developer/core/development-dependencies.asciidoc">edit</a></h4>
<p>When a library you want to use does use es6 or common.js modules but is not
available with yarn, you can copy the source of the library into a webpackShim.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell"># create a directory for our new library to live
mkdir -p webpackShims/some-neat-library
# download the library you want to use into that directory
curl https://cdnjs.com/some-neat-library/library.js &gt; webpackShims/some-neat-library/index.js</pre>
</div>
<p>Then include the library in your JavaScript code as you normally would:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">import someNeatLibrary from 'some-neat-library';</pre>
</div>
<h4><a id="_shimming_third_party_code"></a>Shimming third party code<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/developer/core/development-dependencies.asciidoc">edit</a></h4>
<p>Some JavaScript libraries do not declare their dependencies in a way that tools
like webpack can understand. It is also often the case that libraries do not
<code class="literal">export</code> their provided values, but simply write them to a global variable name
(or something to that effect).</p>
<p>When pulling code like this into Kibana we need to write "shims" that will
adapt the third party code to work with our application, other libraries, and
module system. To do this we can utilize the <code class="literal">webpackShims</code> directory.</p>
<p>The easiest way to explain how to write a shim is to show you some. Here is our
webpack shim for jQuery:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">// webpackShims/jquery.js

module.exports = window.jQuery = window.$ = require('../node_modules/jquery/dist/jquery');
require('ui/jquery/findTestSubject')(window.$);</pre>
</div>
<p>This shim is loaded up anytime an <code class="literal">import 'jquery';</code> statement is found by
webpack, because of the way that <code class="literal">webpackShims</code> behaves like <code class="literal">node_modules</code>.
When that happens, the shim does two things:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Assign the exported value of the actual jQuery module to the window at <code class="literal">$</code> and <code class="literal">jQuery</code>, allowing libraries like angular to detect that jQuery is available, and use it as the module&#8217;s export value.
</li>
<li class="listitem">
Finally, a jQuery plugin that we wrote is included so that every time a file imports jQuery it will get both jQuery and the <code class="literal">$.findTestSubject</code> helper function.
</li>
</ol>
</div>
<p>Here is what our webpack shim for angular looks like:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">// webpackShims/angular.js

require('jquery');
require('../node_modules/angular/angular');
require('../node_modules/angular-elastic/elastic');
require('ui/modules').get('kibana', ['monospaced.elastic']);
module.exports = window.angular;</pre>
</div>
<p>What this shim does is fairly simple if you go line by line:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
makes sure that jQuery is loaded before angular (which actually runs the shim above)
</li>
<li class="listitem">
load the angular.js file from the node_modules directory
</li>
<li class="listitem">
load the angular-elastic plugin, a plugin we want to always be included whenever we import angular
</li>
<li class="listitem">
use the <code class="literal">ui/modules</code> module to add the module exported by angular-elastic as a dependency to the <code class="literal">kibana</code> angular module
</li>
<li class="listitem">
finally, export the window.angular variable. This means that writing <code class="literal">import angular from 'angular';</code> will properly set the angular variable to the angular library, rather than undefined which is the default behavior.
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="development-basepath.html">« Considerations for basePath</a>
</span>
<span class="next">
<a href="development-modules.html">Modules and Autoloading »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
