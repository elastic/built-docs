<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Geo alert types | Kibana Guide [7.11] | Elastic</title>
<meta class="elastic" name="content" content="Geo alert types | Kibana Guide [7.11]">

<link rel="home" href="index.html" title="Kibana Guide [7.11]"/>
<link rel="up" href="alerting-getting-started.html" title="Alerting and Actions"/>
<link rel="prev" href="alert-types.html" title="Standard stack alert types"/>
<link rel="next" href="alerting-production-considerations.html" title="Production considerations"/>
<meta class="elastic" name="product_version" content="7.11"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.11"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.11"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.11]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="alerting-getting-started.html">Alerting and Actions</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="alert-types.html">« Standard stack alert types</a>
</span>
<span class="next">
<a href="alerting-production-considerations.html">Production considerations »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="geo-alert-types"></a>Geo alert types<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.11/docs/user/alerting/geo-alert-types.asciidoc">edit</a></h2>
</div></div></div>
<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> Two additional stack alerts are available:
<a class="xref" href="geo-alert-types.html#alert-type-tracking-threshold" title="Tracking threshold">Tracking threshold</a> and <a class="xref" href="geo-alert-types.html#alert-type-tracking-containment" title="Tracking containment">Tracking containment</a>. To enable,
add the following configuration to your <code class="literal">kibana.yml</code>:</p>
<div class="pre_wrapper lang-yml">
<pre class="programlisting prettyprint lang-yml">xpack.stack_alerts.enableGeoAlerting: true</pre>
</div>
<p>As with other stack alerts, you need <code class="literal">all</code> access to the <span class="strong strong"><strong>Stack Alerts</strong></span> feature
to be able to create and edit either of the geo alerts.
See <a class="xref" href="kibana-privileges.html#kibana-feature-privileges" title="Feature privileges">feature privileges</a> for more information on configuring roles that provide access to this feature.</p>
<h3><a id="_geo_alert_requirements"></a>Geo alert requirements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.11/docs/user/alerting/geo-alert-types.asciidoc">edit</a></h3>
<p>To create either a <span class="strong strong"><strong>Tracking threshold</strong></span> or a <span class="strong strong"><strong>Tracking containment</strong></span> alert, the
following requirements must be present:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Tracks index or index pattern</strong></span>: An index containing a <code class="literal">geo_point</code> field, <code class="literal">date</code> field,
and some form of entity identifier. An entity identifier is a <code class="literal">keyword</code> or <code class="literal">number</code>
field that consistently identifies the entity to be tracked. The data in this index should be dynamically
updating so that there are entity movements to alert upon.
</li>
<li class="listitem">
<span class="strong strong"><strong>Boundaries index or index pattern</strong></span>: An index containing <code class="literal">geo_shape</code> data, such as boundary data and bounding box data.
This data is presumed to be static (not updating). Shape data matching the query is
harvested once when the alert is created and anytime after when the alert is re-enabled
after disablement.
</li>
</ul>
</div>
<p>By design, current interval entity locations (<em>current</em> is determined by <code class="literal">date</code> in
the <span class="strong strong"><strong>Tracked index or index pattern</strong></span>) are queried to determine if they are contained
within any monitored boundaries. Entity
data should be somewhat "real time", meaning the dates of new documents aren’t older
than the current time minus the amount of the interval. If data older than
<code class="literal">now - &lt;current interval&gt;</code> is ingested, it won&#8217;t trigger an alert.</p>
<h3><a id="_creating_a_geo_alert"></a>Creating a geo alert<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.11/docs/user/alerting/geo-alert-types.asciidoc">edit</a></h3>
<p>Both <span class="strong strong"><strong>threshold</strong></span> and <span class="strong strong"><strong>containment</strong></span> alerts can be created by clicking the <span class="strong strong"><strong>Create</strong></span>
button in the <a class="xref" href="alert-management.html" title="Managing Alerts">alert management UI</a>.
Complete the <a class="xref" href="defining-alerts.html#defining-alerts-general-details" title="General alert details">general alert details</a>.
Select <a class="xref" href="geo-alert-types.html#alert-type-tracking-threshold" title="Tracking threshold">Tracking threshold</a> to generate an alert when an entity crosses a boundary, and you desire the
ability to highlight lines of crossing on a custom map.
Select
<a class="xref" href="geo-alert-types.html#alert-type-tracking-containment" title="Tracking containment">Tracking containment</a> if an entity should send out constant alerts
while contained within a boundary (this feature is optional) or if the alert is generally
just more focused around activity when an entity exists within a shape.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/alert-types-tracking-select.png" alt="Choosing a tracking alert type">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>With recent advances in the alerting framework, most of the features
available in Tracking threshold alerts can be replicated with just
a little more work in Tracking containment alerts. The capabilities of Tracking
threshold alerts may be deprecated or folded into Tracking containment alerts
in the future.</p>
</div>
</div>
<h3><a id="alert-type-tracking-threshold"></a>Tracking threshold<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.11/docs/user/alerting/geo-alert-types.asciidoc">edit</a></h3>
<p>The Tracking threshold alert type runs an Elasticsearch query over indices, comparing the latest
entity locations with their previous locations. In the event that an entity has crossed a
boundary from the selected boundary index, an alert may be generated.</p>
<h4><a id="_defining_the_conditions_2"></a>Defining the conditions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.11/docs/user/alerting/geo-alert-types.asciidoc">edit</a></h4>
<p>Tracking threshold has a <span class="strong strong"><strong>Delayed evaluation offset</strong></span> and 4 clauses that define the
condition to detect, as well as 2 Kuery bars used to provide additional filtering
context for each of the indices.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/alert-types-tracking-threshold-conditions.png" alt="Five clauses define the condition to detect">
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Delayed evaluation offset
</span>
</dt>
<dd>
If a data source lags or is intermittent, you may supply
an optional value to evaluate alert conditions following a fixed delay. For instance, if data
is consistently indexed 5-10 minutes following its original timestamp, a <span class="strong strong"><strong>Delayed evaluation
offset</strong></span> of <code class="literal">10 minutes</code> would ensure that alertable instances are still captured.
</dd>
<dt>
<span class="term">
Index (entity)
</span>
</dt>
<dd>
This clause requires an <span class="strong strong"><strong>index or index pattern</strong></span>, a <span class="strong strong"><strong>time field</strong></span> that will be used for the <span class="strong strong"><strong>time window</strong></span>, and a <span class="strong strong"><strong><code class="literal">geo_point</code> field</strong></span> for tracking.
</dd>
<dt>
<span class="term">
By
</span>
</dt>
<dd>
This clause specifies the field to use in the previously provided
<span class="strong strong"><strong>index or index pattern</strong></span> for tracking Entities. An entity is a <code class="literal">keyword</code>
or <code class="literal">number</code> field that consistently identifies the entity to be tracked.
</dd>
<dt>
<span class="term">
When entity
</span>
</dt>
<dd>
This clause specifies which crossing option to track. The values
<span class="strong strong"><strong>Entered</strong></span>, <span class="strong strong"><strong>Exited</strong></span>, and <span class="strong strong"><strong>Crossed</strong></span> can be selected to indicate which crossing conditions
should trigger an alert. <span class="strong strong"><strong>Entered</strong></span> alerts on entry into a boundary, <span class="strong strong"><strong>Exited</strong></span> alerts on exit
from a boundary, and <span class="strong strong"><strong>Crossed</strong></span> alerts on all boundary crossings whether they be entrances
or exits.
</dd>
<dt>
<span class="term">
Index (Boundary)
</span>
</dt>
<dd>
This clause requires an <span class="strong strong"><strong>index or index pattern</strong></span>, a <span class="strong strong"><strong><code class="literal">geo_shape</code> field</strong></span>
identifying boundaries, and an optional <span class="strong strong"><strong>Human-readable boundary name</strong></span> for better alerting
messages.
</dd>
</dl>
</div>
<h3><a id="alert-type-tracking-containment"></a>Tracking containment<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.11/docs/user/alerting/geo-alert-types.asciidoc">edit</a></h3>
<p>The Tracking containment alert type runs an Elasticsearch query over indices, determining if any
documents are currently contained within any boundaries from the specified boundary index.
In the event that an entity is contained within a boundary, an alert may be generated.</p>
<h4><a id="_defining_the_conditions_3"></a>Defining the conditions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.11/docs/user/alerting/geo-alert-types.asciidoc">edit</a></h4>
<p>Tracking containment alerts have 3 clauses that define the condition to detect,
as well as 2 Kuery bars used to provide additional filtering context for each of the indices.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/alert-types-tracking-containment-conditions.png" alt="Five clauses define the condition to detect">
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Index (entity)
</span>
</dt>
<dd>
This clause requires an <span class="strong strong"><strong>index or index pattern</strong></span>, a <span class="strong strong"><strong>time field</strong></span> that will be used for the <span class="strong strong"><strong>time window</strong></span>, and a <span class="strong strong"><strong><code class="literal">geo_point</code> field</strong></span> for tracking.
</dd>
<dt>
<span class="term">
When entity
</span>
</dt>
<dd>
This clause specifies which crossing option to track. The values
<span class="strong strong"><strong>Entered</strong></span>, <span class="strong strong"><strong>Exited</strong></span>, and <span class="strong strong"><strong>Crossed</strong></span> can be selected to indicate which crossing conditions
should trigger an alert. <span class="strong strong"><strong>Entered</strong></span> alerts on entry into a boundary, <span class="strong strong"><strong>Exited</strong></span> alerts on exit
from a boundary, and <span class="strong strong"><strong>Crossed</strong></span> alerts on all boundary crossings whether they be entrances
or exits.
</dd>
<dt>
<span class="term">
Index (Boundary)
</span>
</dt>
<dd>
This clause requires an <span class="strong strong"><strong>index or index pattern</strong></span>, a <span class="strong strong"><strong><code class="literal">geo_shape</code> field</strong></span>
identifying boundaries, and an optional <span class="strong strong"><strong>Human-readable boundary name</strong></span> for better alerting
messages.
</dd>
</dl>
</div>
<p>Conditions for how an alert is tracked can be specified uniquely for each individual action.
An alert can be triggered either when a containment condition is met or when an entity
is no longer contained.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/alert-types-tracking-containment-action-options.png" alt="Five clauses define the condition to detect">
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="alert-types.html">« Standard stack alert types</a>
</span>
<span class="next">
<a href="alerting-production-considerations.html">Production considerations »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
