<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="description" content="A reference of the reporting settings administrators configure in kibana.yml.">
<meta name="keywords" content="administrator, reference, setup, reporting">
<title>Logging configuration migration | Kibana Guide [7.17] | Elastic</title>
<meta class="elastic" name="content" content="Logging configuration migration | Kibana Guide [7.17]">

<link rel="home" href="index.html" title="Kibana Guide [7.17]"/>
<link rel="up" href="setup.html" title="Set up"/>
<link rel="prev" href="upgrade-migrations.html" title="Upgrade migrations"/>
<link rel="next" href="logging-cli-migration.html" title="Logging configuration via CLI"/>
<meta class="elastic" name="product_version" content="7.17"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.17"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.17"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="upgrade-migrations.html">« Upgrade migrations</a>
</span>
<span class="next">
<a href="logging-cli-migration.html">Logging configuration via CLI »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.17]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Logging configuration migration</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="logging-configuration-migration"></a>Logging configuration migration</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
</div></div></div>
<div class="position-relative"><h3><a id="_prepare_for_logging_in_8_0"></a>Prepare for logging in 8.0</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
<p>The entire logging system changed to offer a more consistent logging behavior with Elasticsearch, which uses the popular <a href="https://logging.apache.org/log4j/2.x" class="ulink" target="_top"><code class="literal">log4j 2</code></a> for managing logs. The current system differs from the more simplistic, deprecated system and allows you the freedom to customize what, how, and where Kibana outputs log messages. The best place to learn about the new logging system is our logging service guide. However, there are some important considerations when you are migrating from the old to the new system:</p>
<div class="position-relative"><h4><a id="_mixing_deprecated_and_current_configurations"></a>Mixing deprecated and current configurations</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
<p>Kibana supports mixed usage of the deprecated and current logging configuration styles, however, to reduce the risk of confusion that may arise from conflicting configurations, we recommend changing over to the new system all at once.</p>
<div class="position-relative"><h4><a id="_rotating_log_files"></a>Rotating log files</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
<p>If you use log rotation, be careful when mixing deprecated and current configuration styles as it could lead to unexpected behavior. For example, one system could apply the log file rotation while the other still writes to the original file. Rather, switch over to the current system completely.</p>
<div class="position-relative"><h4><a id="_service_scripts"></a>Service scripts</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
<p>If you are using the systemd service scripts (<code class="literal">kibana.service</code>), be aware that the deprecated <code class="literal">logging.dest</code> configuration might be set via CLI options in the <code class="literal">kibana.service</code> declaration. When <code class="literal">logging.dest</code> is set in the service scripts, Kibana will continue to write log messages to the "old" file. To switch over to the current logging system, remove the <code class="literal">logging.dest</code> CLI argument from <code class="literal">/etc/systemd/system/kibana.service</code> and run <code class="literal">systemctl daemon-reload</code>.</p>
<div class="position-relative"><h4><a id="_compatibility"></a>Compatibility</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
<p>Compatibility with the legacy logging system is assured until the end of the <code class="literal">v7</code> version.
All log messages handled by <code class="literal">root</code> context are forwarded to the legacy logging service. If you configure a custom appender for <code class="literal">root</code>, make sure to include the <code class="literal">default</code> appender in the appenders array to provide backward compatibility.</p>
<div class="position-relative"><h4><a id="_duplicate_log_messages"></a>Duplicate log messages</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
<p>When you switch to the new logging configuration, you will start seeing duplicate log entries in both legacy and current formats. The legacy format will be removed when the <code class="literal">default</code> appender is no longer required.
To override this behavior for specific log messages, configure an appender for the logger.</p>
<div class="position-relative"><h4><a id="_memory_consumption"></a>Memory consumption</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.17/docs/setup/upgrade/logging-configuration-migration.asciidoc">edit</a></div>
<p>If you log large volumes to file, such as logging in <code class="literal">verbose</code> mode, be aware that by using the legacy logging system, your cluster may experience increased memory consumption. We recommend switching over to the current logging system to avoid out of memory issues.
Refer to the <a href="https://github.com/elastic/kibana/issues/134724" class="ulink" target="_top">public issue</a> for more information.</p>
<div class="informaltable">
<a id="logging-pattern-format-old-and-new-example"></a>
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Parameter</th>
<th align="left" valign="top">Platform log record in <span class="strong strong"><strong>pattern</strong></span> format</th>
<th align="left" valign="top">Legacy Platform log record <span class="strong strong"><strong>text</strong></span> format</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>@timestamp</p></td>
<td align="left" valign="top"><p>ISO8601_TZ <code class="literal">2012-01-31T23:33:22.011-05:00</code></p></td>
<td align="left" valign="top"><p>Absolute <code class="literal">23:33:22.011</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>logger</p></td>
<td align="left" valign="top"><p><code class="literal">parent.child</code></p></td>
<td align="left" valign="top"><p><code class="literal">['parent', 'child']</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>level</p></td>
<td align="left" valign="top"><p><code class="literal">DEBUG</code></p></td>
<td align="left" valign="top"><p><code class="literal">['debug']</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>meta</p></td>
<td align="left" valign="top"><p>stringified JSON object <code class="literal">{"to": "v8"}</code></p></td>
<td align="left" valign="top"><p>N/A</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>pid</p></td>
<td align="left" valign="top"><p>can be configured as <code class="literal">%pid</code></p></td>
<td align="left" valign="top"><p>N/A</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<a id="logging-json-format-old-and-new-example"></a>
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Parameter</th>
<th align="left" valign="top">Platform log record in <span class="strong strong"><strong>json</strong></span> format</th>
<th align="left" valign="top">Legacy Platform log record <span class="strong strong"><strong>json</strong></span> format</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>@timestamp</p></td>
<td align="left" valign="top"><p>ISO8601_TZ <code class="literal">2012-01-31T23:33:22.011-05:00</code></p></td>
<td align="left" valign="top"><p>ISO8601 <code class="literal">2012-01-31T23:33:22.011Z</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>logger</p></td>
<td align="left" valign="top"><p><code class="literal">log.logger: parent.child</code></p></td>
<td align="left" valign="top"><p><code class="literal">tags: ['parent', 'child']</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>level</p></td>
<td align="left" valign="top"><p><code class="literal">log.level: DEBUG</code></p></td>
<td align="left" valign="top"><p><code class="literal">tags: ['debug']</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>meta</p></td>
<td align="left" valign="top"><p>merged in log record  <code class="literal">{... "to": "v8"}</code></p></td>
<td align="left" valign="top"><p>merged in log record  <code class="literal">{... "to": "v8"}</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>pid</p></td>
<td align="left" valign="top"><p><code class="literal">process.pid: 12345</code></p></td>
<td align="left" valign="top"><p><code class="literal">pid: 12345</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>type</p></td>
<td align="left" valign="top"><p>N/A</p></td>
<td align="left" valign="top"><p><code class="literal">type: log</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>error</p></td>
<td align="left" valign="top"><p><code class="literal">{ message, name, stack }</code></p></td>
<td align="left" valign="top"><p><code class="literal">{ message, name, stack, code, signal }</code></p></td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="upgrade-migrations.html">« Upgrade migrations</a>
</span>
<span class="next">
<a href="logging-cli-migration.html">Logging configuration via CLI »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
