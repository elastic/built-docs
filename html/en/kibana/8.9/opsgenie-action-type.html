<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Opsgenie connector and action | Kibana Guide [8.9] | Elastic</title>
<meta class="elastic" name="content" content="Opsgenie connector and action | Kibana Guide [8.9]">

<link rel="home" href="index.html" title="Kibana Guide [8.9]"/>
<link rel="up" href="action-types.html" title="Connectors"/>
<link rel="prev" href="teams-action-type.html" title="Microsoft Teams connector and action"/>
<link rel="next" href="pagerduty-action-type.html" title="PagerDuty connector and action"/>
<meta class="elastic" name="product_version" content="8.9"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/8.9"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="8.9"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [8.9]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="management.html">Stack Management</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="action-types.html">Connectors</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="teams-action-type.html">« Microsoft Teams connector and action</a>
</span>
<span class="next">
<a href="pagerduty-action-type.html">PagerDuty connector and action »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="opsgenie-action-type"></a>Opsgenie connector and action<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h2>
</div></div></div>

<p>The Opsgenie connector uses the <a href="https://docs.opsgenie.com/docs/alert-api" class="ulink" target="_top">Opsgenie alert API</a>.</p>
<h4><a id="define-opsgenie-ui"></a>Create connectors in Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h4>
<p>You can create connectors in <span class="strong strong"><strong>Stack Management &gt; Connectors</strong></span>
or as needed when you&#8217;re creating a rule. For example:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="management/connectors/images/opsgenie-connector.png" alt="Opsgenie connector">
</div>
</div>
<h5><a id="opsgenie-connector-configuration"></a>Connector configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h5>
<p>Opsgenie connectors have the following configuration properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Name
</span>
</dt>
<dd>
The name of the connector. The name is used to identify a connector in the management UI connector listing, or in the connector list when configuring an action.
</dd>
<dt>
<span class="term">
URL
</span>
</dt>
<dd>
<p>
The Opsgenie URL. For example, <a href="https://api.opsgenie.com" class="ulink" target="_top">https://api.opsgenie.com</a> or <a href="https://api.eu.opsgenie.com" class="ulink" target="_top">https://api.eu.opsgenie.com</a>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using the <a class="xref" href="alert-action-settings-kb.html#action-settings" title="Action settings"><code class="literal">xpack.actions.allowedHosts</code></a> setting, make sure the hostname is added to the allowed hosts.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
API Key
</span>
</dt>
<dd>
The Opsgenie API authentication key for HTTP Basic authentication. For more details about generating Opsgenie API keys, refer to <a href="https://support.atlassian.com/opsgenie/docs/create-a-default-api-integration/" class="ulink" target="_top">Opsgenie documentation</a>.
</dd>
</dl>
</div>
<h4><a id="preconfigured-opsgenie-configuration"></a>Create preconfigured connectors<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h4>
<p>If you are running Kibana on-prem, you can define connectors by
adding <code class="literal">xpack.actions.preconfigured</code> settings to your <code class="literal">kibana.yml</code> file.
For example:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">xpack.actions.preconfigured:
  my-opsgenie:
    name: preconfigured-opsgenie-connector-type
    actionTypeId: .opsgenie
    config:
      apiUrl: https://api.opsgenie.com
    secrets:
      apiKey: apikey</pre>
</div>
<p>Config defines information for the connector type.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">apiUrl</code>
</span>
</dt>
<dd>
A string that corresponds to <span class="strong strong"><strong>URL</strong></span>.
</dd>
</dl>
</div>
<p>Secrets defines sensitive information for the connector type.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">apiKey</code>
</span>
</dt>
<dd>
A string that corresponds to <span class="strong strong"><strong>API Key</strong></span>.
</dd>
</dl>
</div>
<h4><a id="opsgenie-action-configuration"></a>Test connectors<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h4>
<p>You can test connectors with the <a class="xref" href="execute-connector-api.html" title="Run connector API">run connector API</a> or
as you&#8217;re creating or editing the connector in Kibana. For example:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="management/connectors/images/opsgenie-params-test.png" alt="Opsgenie params test">
</div>
</div>
<p>The Opsgenie connector supports two types of actions: Create alert and Close alert. The properties supported for each action are different because Opsgenie defines different properties for each operation.</p>
<p>When testing the Opsgenie connector, choose the appropriate action from the selector. Each action has different properties that can be configured.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Action
</span>
</dt>
<dd>
Select <span class="strong strong"><strong>Create alert</strong></span> to configure the actions that occur when a rule&#8217;s conditions are met. Select <span class="strong strong"><strong>Close alert</strong></span> to define the recovery actions that occur when a rule&#8217;s conditions are no longer met.
</dd>
</dl>
</div>
<h5><a id="opsgenie-action-create-alert-configuration"></a>Configure the create alert action<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h5>
<p>You can configure the create alert action through the form view or using a JSON editor.</p>
<h6><a id="opsgenie-action-create-alert-form-configuration"></a>Form view<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h6>
<p>The create alert action form has the following configuration properties.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Message
</span>
</dt>
<dd>
The message for the alert (required).
</dd>
<dt>
<span class="term">
Opsgenie tags
</span>
</dt>
<dd>
The tags for the alert (optional).
</dd>
<dt>
<span class="term">
Priority
</span>
</dt>
<dd>
The priority level for the alert.
</dd>
<dt>
<span class="term">
Description
</span>
</dt>
<dd>
A description that provides detailed information about the alert (optional).
</dd>
<dt>
<span class="term">
Alias
</span>
</dt>
<dd>
The alert identifier, which is used for alert deduplication in Opsgenie. For more information, refer to the <a href="https://support.atlassian.com/opsgenie/docs/what-is-alert-de-duplication/" class="ulink" target="_top">Opsgenie documentation</a> (optional).
</dd>
<dt>
<span class="term">
Entity
</span>
</dt>
<dd>
The domain of the alert (optional).
</dd>
<dt>
<span class="term">
Source
</span>
</dt>
<dd>
The source of the alert (optional).
</dd>
<dt>
<span class="term">
User
</span>
</dt>
<dd>
The display name of the owner (optional).
</dd>
<dt>
<span class="term">
Note
</span>
</dt>
<dd>
Additional information for the alert (optional).
</dd>
</dl>
</div>
<h6><a id="opsgenie-action-create-alert-json-configuration"></a>JSON editor<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h6>
<p>A JSON editor is provided as an alternative to the form view and supports additional fields not shown in the form view. The JSON editor supports all of the forms configuration properties but as lowercase keys as <a href="https://docs.opsgenie.com/docs/alert-api#create-alert" class="ulink" target="_top">described in the Opsgenie API documentation</a>. The JSON editor supports the following additional properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
responders
</span>
</dt>
<dd>
The entities to receive notifications about the alert (optional).
</dd>
<dt>
<span class="term">
visibleTo
</span>
</dt>
<dd>
The teams and users that the alert will be visible to without sending a notification to them (optional).
</dd>
<dt>
<span class="term">
actions
</span>
</dt>
<dd>
The custom actions available to the alert (optional).
</dd>
<dt>
<span class="term">
details
</span>
</dt>
<dd>
The custom properties of the alert (optional).
</dd>
</dl>
</div>
<p><a id="opsgenie-action-create-alert-json-example-configuration"></a>Example JSON editor contents</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "message": "An example alert message",
  "alias": "Life is too short for no alias",
  "description":"Every alert needs a description",
  "responders":[
      {"id":"4513b7ea-3b91-438f-b7e4-e3e54af9147c", "type":"team"},
      {"name":"NOC", "type":"team"},
      {"id":"bb4d9938-c3c2-455d-aaab-727aa701c0d8", "type":"user"},
      {"username":"trinity@opsgenie.com", "type":"user"},
      {"id":"aee8a0de-c80f-4515-a232-501c0bc9d715", "type":"escalation"},
      {"name":"Nightwatch Escalation", "type":"escalation"},
      {"id":"80564037-1984-4f38-b98e-8a1f662df552", "type":"schedule"},
      {"name":"First Responders Schedule", "type":"schedule"}
  ],
  "visibleTo":[
      {"id":"4513b7ea-3b91-438f-b7e4-e3e54af9147c","type":"team"},
      {"name":"rocket_team","type":"team"},
      {"id":"bb4d9938-c3c2-455d-aaab-727aa701c0d8","type":"user"},
      {"username":"trinity@opsgenie.com","type":"user"}
  ],
  "actions": ["Restart", "AnExampleAction"],
  "tags": ["OverwriteQuietHours","Critical"],
  "details":{"key1":"value1","key2":"value2"},
  "entity":"An example entity",
  "priority":"P1"
}</pre>
</div>
<h5><a id="opsgenie-action-close-alert-configuration"></a>Close alert configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h5>
<p>The close alert action has the following configuration properties.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Alias
</span>
</dt>
<dd>
The alert identifier, which is used for alert deduplication in Opsgenie (required). The alias must match the value used when creating the alert. For more information, refer to the <a href="https://support.atlassian.com/opsgenie/docs/what-is-alert-de-duplication/" class="ulink" target="_top">Opsgenie documentation</a>.
</dd>
<dt>
<span class="term">
Note
</span>
</dt>
<dd>
Additional information for the alert (optional).
</dd>
<dt>
<span class="term">
Source
</span>
</dt>
<dd>
The display name of the source (optional).
</dd>
<dt>
<span class="term">
User
</span>
</dt>
<dd>
The display name of the owner (optional).
</dd>
</dl>
</div>
<h4><a id="opgenie-connector-networking-configuration"></a>Connector networking configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h4>
<p>Use the <a class="xref" href="alert-action-settings-kb.html#action-settings" title="Action settings">Action configuration settings</a> to customize connector networking configurations, such as proxies, certificates, or TLS settings. You can set configurations that apply to all your connectors or use <code class="literal">xpack.actions.customHostSettings</code> to set per-host configurations.</p>
<h4><a id="configuring-opsgenie"></a>Configure an Opsgenie account<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.9/docs/management/connectors/action-types/opsgenie.asciidoc">edit</a></h4>
<p>After obtaining an Opsgenie instance, configure the API integration. For details, refer to the <a href="https://support.atlassian.com/opsgenie/docs/create-a-default-api-integration/" class="ulink" target="_top">Opsgenie documentation</a>.</p>
<p>If you&#8217;re using a free trial, go to the <code class="literal">Teams</code> dashboard and select the appropriate team.</p>
<div class="imageblock">
<div class="content">
<img src="management/connectors/images/opsgenie-teams.png" alt="Opsgenie teams dashboard">
</div>
</div>
<p>Select the <code class="literal">Integrations</code> menu item, then select <code class="literal">Add integration</code>.</p>
<div class="imageblock">
<div class="content">
<img src="management/connectors/images/opsgenie-integrations.png" alt="Opsgenie teams integrations">
</div>
</div>
<p>Search for <code class="literal">API</code> and select the <code class="literal">API</code> integration.</p>
<div class="imageblock">
<div class="content">
<img src="management/connectors/images/opsgenie-add-api-integration.png" alt="Opsgenie API integration">
</div>
</div>
<p>Configure the integration and ensure you record the <code class="literal">API Key</code>. This key will be used to populate the <code class="literal">API Key</code> field when creating the Kibana Opsgenie connector. Click <code class="literal">Save Integration</code> after you finish configuring the integration.</p>
<div class="imageblock">
<div class="content">
<img src="management/connectors/images/opsgenie-save-integration.png" alt="Opsgenie save integration">
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="teams-action-type.html">« Microsoft Teams connector and action</a>
</span>
<span class="next">
<a href="pagerduty-action-type.html">PagerDuty connector and action »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
