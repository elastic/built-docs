<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Google_pubsub input plugin | Logstash Reference [5.6] | Elastic</title>
<link rel="home" href="index.html" title="Logstash Reference [5.6]"/>
<link rel="up" href="input-plugins.html" title="Input plugins"/>
<link rel="prev" href="plugins-inputs-github.html" title="Github input plugin"/>
<link rel="next" href="plugins-inputs-graphite.html" title="Graphite input plugin"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/5.6"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="5.6"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Logstash Reference [5.6]</a></span>
»
<span class="breadcrumb-link"><a href="input-plugins.html">Input plugins</a></span>
»
<span class="breadcrumb-node">Google_pubsub input plugin</span>
</div>
<div class="navheader">
<span class="prev">
<a href="plugins-inputs-github.html">« Github input plugin</a>
</span>
<span class="next">
<a href="plugins-inputs-graphite.html">Graphite input plugin »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="plugins-inputs-google_pubsub"></a>Google_pubsub input plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h2>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Plugin version: v1.2.1
</li>
<li class="listitem">
Released on: 2018-08-17
</li>
<li class="listitem">
<a href="https://github.com/logstash-plugins/logstash-input-google_pubsub/blob/v1.2.1/CHANGELOG.md" class="ulink" target="_top">Changelog</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_installation_3"></a>Installation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>For plugins not bundled by default, it is easy to install by running <code class="literal">bin/logstash-plugin install logstash-input-google_pubsub</code>. See <a class="xref" href="working-with-plugins.html" title="Working with plugins"><em>Working with plugins</em></a> for more details.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_getting_help_13"></a>Getting Help<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>For questions about the plugin, open a topic in the <a href="http://discuss.elastic.co" class="ulink" target="_top">Discuss</a> forums. For bugs or feature requests, open an issue in <a href="https://github.com/logstash-plugins/logstash-input-google_pubsub" class="ulink" target="_top">Github</a>.
For the list of Elastic supported plugins, please consult the <a href="/support/matrix#show_logstash_plugins" class="ulink" target="_top">Elastic Support Matrix</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_description_13"></a>Description<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>Author: Eric Johnson &lt;<a href="mailto:erjohnso@google.com" class="ulink" target="_top">erjohnso@google.com</a>&gt;
Date: 2016-06-01</p>
<p>Copyright 2016 Google Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<pre class="literallayout">http://www.apache.org/licenses/LICENSE-2.0</pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Google deps
This is a <a href="https://github.com/elastic/logstash" class="ulink" target="_top">Logstash</a> input plugin for
<a href="https://cloud.google.com/pubsub/" class="ulink" target="_top">Google Pub/Sub</a>. The plugin can subscribe
to a topic and ingest messages.</p>
<p>The main motivation behind the development of this plugin was to ingest
<a href="https://cloud.google.com/logging/" class="ulink" target="_top">Stackdriver Logging</a> messages via the
<a href="https://cloud.google.com/logging/docs/export/using_exported_logs" class="ulink" target="_top">Exported Logs</a>
feature of Stackdriver Logging.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_prerequisites"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>You must first create a Google Cloud Platform project and enable the
Google Pub/Sub API. If you intend to use the plugin ingest Stackdriver Logging
messages, you must also enable the Stackdriver Logging API and configure log
exporting to Pub/Sub. There is plentiful information on
<a href="https://cloud.google.com/" class="ulink" target="_top">https://cloud.google.com/</a> to get started:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Google Cloud Platform Projects and <a href="https://cloud.google.com/docs/overview/" class="ulink" target="_top">Overview</a>
</li>
<li class="listitem">
Google Cloud Pub/Sub <a href="https://cloud.google.com/pubsub/" class="ulink" target="_top">documentation</a>
</li>
<li class="listitem">
Stackdriver Logging <a href="https://cloud.google.com/logging/" class="ulink" target="_top">documentation</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_cloud_pubsub"></a>Cloud Pub/Sub<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>Currently, this module requires you to create a <code class="literal">topic</code> manually and specify
it in the logstash config file. You must also specify a <code class="literal">subscription</code>, but
the plugin will attempt to create the pull-based <code class="literal">subscription</code> on its own.</p>
<p>All messages received from Pub/Sub will be converted to a logstash <code class="literal">event</code>
and added to the processing pipeline queue. All Pub/Sub messages will be
<code class="literal">acknowledged</code> and removed from the Pub/Sub <code class="literal">topic</code> (please see more about
<a href="https://cloud.google.com/pubsub/overview#concepts)" class="ulink" target="_top">Pub/Sub concepts</a>.</p>
<p>It is generally assumed that incoming messages will be in JSON and added to
the logstash <code class="literal">event</code> as-is. However, if a plain text message is received, the
plugin will return the raw text in as <code class="literal">raw_message</code> in the logstash <code class="literal">event</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_authentication"></a>Authentication<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>You have two options for authentication depending on where you run Logstash.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>If you are running Logstash outside of Google Cloud Platform, then you will
need to create a Google Cloud Platform Service Account and specify the full
path to the JSON private key file in your config. You must assign sufficient
roles to the Service Account to create a subscription and to pull messages
from the subscription. Learn more about GCP Service Accounts and IAM roles
here:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Google Cloud Platform IAM <a href="https://cloud.google.com/iam/" class="ulink" target="_top">overview</a>
</li>
<li class="listitem">
Creating Service Accounts <a href="https://cloud.google.com/iam/docs/creating-managing-service-accounts" class="ulink" target="_top">overview</a>
</li>
<li class="listitem">
Granting Roles <a href="https://cloud.google.com/iam/docs/granting-roles-to-service-accounts" class="ulink" target="_top">overview</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
If you are running Logstash on a Google Compute Engine instance, you may opt
to use Application Default Credentials. In this case, you will not need to
specify a JSON private key file in your config.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_stackdriver_logging_optional"></a>Stackdriver Logging (optional)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>If you intend to use the logstash plugin for Stackdriver Logging message
ingestion, you must first manually set up the Export option to Cloud Pub/Sub and
the manually create the <code class="literal">topic</code>. Please see the more detailed instructions at,
<a href="https://cloud.google.com/logging/docs/export/using_exported_logs" class="ulink" target="_top">https://cloud.google.com/logging/docs/export/using_exported_logs</a> [Exported Logs]
and ensure that the <a href="https://cloud.google.com/logging/docs/export/configure_export#manual-access-pubsub" class="ulink" target="_top">necessary permissions</a>
have also been manually configured.</p>
<p>Logging messages from Stackdriver Logging exported to Pub/Sub are received as
JSON and converted to a logstash <code class="literal">event</code> as-is in
<a href="https://cloud.google.com/logging/docs/export/using_exported_logs#log_entries_in_google_pubsub_topics" class="ulink" target="_top">this format</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_sample_configuration"></a>Sample Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>Below is a copy of the included <code class="literal">example.conf-tmpl</code> file that shows a basic
configuration for this plugin.</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">input {
    google_pubsub {
        # Your GCP project id (name)
        project_id =&gt; "my-project-1234"

        # The topic name below is currently hard-coded in the plugin. You
        # must first create this topic by hand and ensure you are exporting
        # logging to this pubsub topic.
        topic =&gt; "logstash-input-dev"

        # The subscription name is customizeable. The plugin will attempt to
        # create the subscription (but use the hard-coded topic name above).
        subscription =&gt; "logstash-sub"

        # If you are running logstash within GCE, it will use
        # Application Default Credentials and use GCE's metadata
        # service to fetch tokens.  However, if you are running logstash
        # outside of GCE, you will need to specify the service account's
        # JSON key file below.
        #json_key_file =&gt; "/home/erjohnso/pkey.json"

        # Should the plugin attempt to create the subscription on startup?
        # This is not recommended for security reasons but may be useful in
        # some cases.
        #create_subscription =&gt; false
    }
}
output { stdout { codec =&gt; rubydebug } }</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_metadata_and_attributes"></a>Metadata and Attributes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>The original Pub/Sub message is preserved in the special Logstash
<code class="literal">[@metadata][pubsub_message]</code> field so you can fetch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Message attributes
</li>
<li class="listitem">
The origiginal base64 data
</li>
<li class="listitem">
Pub/Sub message ID for de-duplication
</li>
<li class="listitem">
Publish time
</li>
</ul>
</div>
<p>You MUST extract any fields you want in a filter prior to the data being sent
to an output because Logstash deletes <code class="literal">@metadata</code> fields otherwise.</p>
<p>See the PubsubMessage
<a href="https://cloud.google.com/pubsub/docs/reference/rest/v1/PubsubMessage" class="ulink" target="_top">documentation</a>
for a full description of the fields.</p>
<p>Example to get the message ID:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">input {google_pubsub {...}}

filter {
  mutate {
    add_field =&gt; { "messageId" =&gt; "%{[@metadata][pubsub_message][messageId]}" }
  }
}

output {...}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="plugins-inputs-google_pubsub-options"></a>Google_pubsub Input Configuration Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>This plugin supports the following configuration options plus the <a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-common-options" title="Common Options">Common Options</a> described later.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-json_key_file" title="json_key_file"><code class="literal">json_key_file</code></a></p></td>
<td align="left" valign="top"><p>a valid filesystem path</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-max_messages" title="max_messages"><code class="literal">max_messages</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-project_id" title="project_id"><code class="literal">project_id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-subscription" title="subscription"><code class="literal">subscription</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-topic" title="topic"><code class="literal">topic</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-include_metadata" title="include_metadata"><code class="literal">include_metadata</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-create_subscription" title="create_subscription"><code class="literal">create_subscription</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<p>Also see <a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-common-options" title="Common Options">Common Options</a> for a list of options supported by all
input plugins.</p>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-json_key_file"></a><code class="literal">json_key_file</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#path" title="Path">path</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>If logstash is running within Google Compute Engine, the plugin will use
GCE&#8217;s Application Default Credentials. Outside of GCE, you will need to
specify a Service Account JSON key file.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-max_messages"></a><code class="literal">max_messages</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">5</code>
</li>
</ul>
</div>
<p>The maximum number of messages returned per request.
The Pub/Sub system may return fewer than the number specified.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-project_id"></a><code class="literal">project_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Google Cloud Project ID (name, not number).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-subscription"></a><code class="literal">subscription</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-topic"></a><code class="literal">topic</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Google Cloud Pub/Sub Topic and Subscription.
Note that the topic must be created manually with Cloud Logging
pre-configured export to PubSub configured to use the defined topic.
The subscription will be created automatically by the plugin.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-include_metadata"></a><code class="literal">include_metadata</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">false</code>.
</li>
</ul>
</div>
<p>If set true, will include the full message data in the <code class="literal">[@metadata][pubsub_message]</code> field.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-create_subscription"></a><code class="literal">create_subscription</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Added in 1.2.0.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">false</code>.
</li>
</ul>
</div>
<p>If true, the plugin will try to create the subscription before publishing.
Note: this requires additional permissions to be granted to the client and is <em>not</em>
recommended for most use-cases.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="plugins-inputs-google_pubsub-common-options"></a>Common Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>The following configuration options are supported by all input plugins:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-add_field" title="add_field"><code class="literal">add_field</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#hash" title="Hash">hash</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-codec" title="codec"><code class="literal">codec</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#codec" title="Codec">codec</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-enable_metric" title="enable_metric"><code class="literal">enable_metric</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-id" title="id"><code class="literal">id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-tags" title="tags"><code class="literal">tags</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#array" title="Array">array</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-inputs-google_pubsub.html#plugins-inputs-google_pubsub-type" title="type"><code class="literal">type</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_details_15"></a>Details<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-add_field"></a><code class="literal">add_field</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#hash" title="Hash">hash</a>
</li>
<li class="listitem">
Default value is <code class="literal">{}</code>
</li>
</ul>
</div>
<p>Add a field to an event</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-codec"></a><code class="literal">codec</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#codec" title="Codec">codec</a>
</li>
<li class="listitem">
Default value is <code class="literal">"plain"</code>
</li>
</ul>
</div>
<p>The codec used for input data. Input codecs are a convenient method for decoding your data before it enters the input, without needing a separate filter in your Logstash pipeline.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-enable_metric"></a><code class="literal">enable_metric</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">true</code>
</li>
</ul>
</div>
<p>Disable or enable metric logging for this specific plugin instance
by default we record all the metrics we can, but you can disable metrics collection
for a specific plugin.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-id"></a><code class="literal">id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Add a unique <code class="literal">ID</code> to the plugin configuration. If no ID is specified, Logstash will generate one.
It is strongly recommended to set this ID in your configuration. This is particularly useful
when you have two or more plugins of the same type, for example, if you have 2 google_pubsub inputs.
Adding a named ID in this case will help in monitoring Logstash when using the monitoring APIs.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">input {
  google_pubsub {
    id =&gt; "my_plugin_id"
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-tags"></a><code class="literal">tags</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#array" title="Array">array</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Add any number of arbitrary tags to your event.</p>
<p>This can help with processing later.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-inputs-google_pubsub-type"></a><code class="literal">type</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-input-google_pubsub/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>This is the base class for Logstash inputs.
Add a <code class="literal">type</code> field to all events handled by this input.</p>
<p>Types are used mainly for filter activation.</p>
<p>The type is stored as part of the event itself, so you can
also use the type to search for it in Kibana.</p>
<p>If you try to set a type on an event that already has one (for
example when you send an event from a shipper to an indexer) then
a new input will not override the existing type. A type set at
the shipper stays with that event for its life even
when sent to another Logstash server.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="plugins-inputs-github.html">« Github input plugin</a>
</span>
<span class="next">
<a href="plugins-inputs-graphite.html">Graphite input plugin »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
