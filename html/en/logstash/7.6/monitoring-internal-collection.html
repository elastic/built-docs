<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Collect Logstash monitoring data using internal collectors | Logstash Reference [7.6] | Elastic</title>
<link rel="home" href="index.html" title="Logstash Reference [7.6]"/>
<link rel="up" href="configuring-logstash.html" title="Monitoring Logstash with X-Pack"/>
<link rel="prev" href="monitoring-with-metricbeat.html" title="Collect Logstash monitoring data with Metricbeat"/>
<link rel="next" href="logstash-monitoring-ui.html" title="Monitoring UI"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/7.6"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="7.6"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Logstash Reference [7.6]</a></span>
»
<span class="breadcrumb-link"><a href="configuring-logstash.html">Monitoring Logstash with X-Pack</a></span>
»
<span class="breadcrumb-node">Collect Logstash monitoring data using internal collectors</span>
</div>
<div class="navheader">
<span class="prev">
<a href="monitoring-with-metricbeat.html">« Collect Logstash monitoring data with Metricbeat</a>
</span>
<span class="next">
<a href="logstash-monitoring-ui.html">Monitoring UI »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="monitoring-internal-collection"></a>Collect Logstash monitoring data using internal collectors<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/monitoring/monitoring-internal.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>Using internal collectors for Logstash X-Pack monitoring these components:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="monitoring-internal-collection.html#logstash-monitoring-collectors" title="Collectors">Collectors</a>
</li>
<li class="listitem">
<a class="xref" href="monitoring-internal-collection.html#logstash-monitoring-output" title="Output">Output</a>
</li>
</ul>
</div>
<p>These pieces live outside of the default Logstash pipeline in a dedicated monitoring
pipeline. This configuration ensures that all data and processing has a minimal
impact on ordinary Logstash processing. Existing Logstash features, such as the
<a class="xref" href="plugins-outputs-elasticsearch.html" title="Elasticsearch output plugin"><code class="literal">elasticsearch</code> output</a>, can be reused to
benefit from its retry policies.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">elasticsearch</code> output that is used by X-Pack monitoring for Logstash is
configured exclusively via settings found in <code class="literal">logstash.yml</code>. It is not
configured by using anything from the Logstash configurations that might also be
using their own separate <code class="literal">elasticsearch</code> outputs.</p>
</div>
</div>
<p>The Elasticsearch cluster that is configured for use with X-Pack monitoring for Logstash is
expected to be the production cluster. This configuration enables the production
Elasticsearch cluster to add metadata (for example, its cluster UUID) to the Logstash
monitoring data then route it to the monitoring clusters. For more information
about typical monitoring architectures, see
<a href="/guide/en/elasticsearch/reference/7.6/how-monitoring-works.html" class="ulink" target="_top">How monitoring works</a> in the <a href="/guide/en/elasticsearch/reference/7.6" class="ulink" target="_top">Elasticsearch Reference</a>.</p>
<h5 class="xpack"><a id="logstash-monitoring-collectors"></a>Collectors<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/monitoring/collectors.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h5>
<p>Collectors, as their name implies, collect things. In X-Pack monitoring for Logstash,
collectors are just <a class="xref" href="pipeline.html" title="How Logstash Works">Inputs</a> in the same way that ordinary Logstash
configurations provide inputs.</p>
<p>Like X-Pack monitoring for Elasticsearch, each collector can create zero or more monitoring
documents. As it is currently implemented, each Logstash node runs two types of
collectors: one for node stats and one for pipeline stats.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Collector</th>
<th align="left" valign="top">Data Types</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Node Stats</p></td>
<td align="left" valign="top"><p><code class="literal">logstash_stats</code></p></td>
<td align="left" valign="top"><p>Gathers details about the running node, such as memory utilization and CPU
usage (for example, <code class="literal">GET /_stats</code>).</p>
<p>This runs on every Logstash node with X-Pack monitoring enabled. One common
failure is that Logstash directories are copied with their <code class="literal">path.data</code> directory
included (<code class="literal">./data</code> by default), which copies the persistent UUID of the Logstash
node along with it. As a result, it generally appears that one or more Logstash
nodes are failing to collect monitoring data, when in fact they are all really
misreporting as the <em>same</em> Logstash node. Re-use <code class="literal">path.data</code> directories only
when upgrading Logstash, such that upgraded nodes replace the previous versions.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Pipeline Stats</p></td>
<td align="left" valign="top"><p><code class="literal">logstash_state</code></p></td>
<td align="left" valign="top"><p>Gathers details about the node&#8217;s running pipelines, which powers the
Monitoring Pipeline UI.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Per collection interval, which defaults to 10 seconds (<code class="literal">10s</code>), each collector is
run. The failure of an individual collector does not impact any other collector.
Each collector, as an ordinary Logstash input, creates a separate Logstash event
in its isolated monitoring pipeline. The Logstash output then sends the data.</p>
<p>The collection interval can be configured dynamically and you can also disable
data collection. For more information about the configuration options for the
collectors, see <a class="xref" href="monitoring-internal-collection.html#monitoring-settings" title="Monitoring settings for internal collection">Monitoring Settings</a>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Unlike X-Pack monitoring for Elasticsearch and Kibana, there is no
<code class="literal">xpack.monitoring.collection.enabled</code> setting on Logstash. You must use the
<code class="literal">xpack.monitoring.enabled</code> setting to enable and disable data collection.</p>
</div>
</div>
<p>If gaps exist in the monitoring charts in Kibana, it is typically because either
a collector failed or the monitoring cluster did not receive the data (for
example, it was being restarted). In the event that a collector fails, a logged
error should exist on the node that attempted to perform the collection.</p>
<h4 class="xpack"><a id="logstash-monitoring-output"></a>Output<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/monitoring/monitoring-output.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h4>
<p>Like all Logstash pipelines, the purpose of the dedicated monitoring pipeline is
to send events to outputs. In the case of X-Pack monitoring for Logstash, the output
is always an <code class="literal">elasticsearch</code> output. However, unlike ordinary Logstash pipelines,
the output is configured within the <code class="literal">logstash.yml</code> settings file via the
<code class="literal">xpack.monitoring.elasticsearch.*</code> settings.</p>
<p>Other than its unique manner of configuration, this <code class="literal">elasticsearch</code> output
behaves like all <code class="literal">elasticsearch</code> outputs, including its ability to pause data
collection when issues exist with the output.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>It is critical that all Logstash nodes share the same setup.
Otherwise, monitoring data might be routed in different ways or to different places.</p>
</div>
</div>
<h5><a id="logstash-monitoring-default"></a>Default Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/monitoring/monitoring-output.asciidoc">edit</a></h5>
<p>If a Logstash node does not explicitly define an X-Pack monitoring output setting,
the following default configuration is used:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.hosts: [ "http://localhost:9200" ]</pre>
</div>
<p>All data produced by X-Pack monitoring for Logstash is indexed in the monitoring
cluster by using the <code class="literal">.monitoring-logstash</code> template, which is managed by the
<a href="/guide/en/elasticsearch/reference/7.6/es-monitoring-exporters.html" class="ulink" target="_top">exporters</a> within Elasticsearch.</p>
<p>If you are working with a cluster that has security features enabled, extra
steps are necessary to properly configure Logstash. For more information, see
<a class="xref" href="configuring-logstash.html" title="Monitoring Logstash with X-Pack"><em>Monitoring Logstash with X-Pack</em></a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>When discussing security relative to the <code class="literal">elasticsearch</code> output, it
is critical to remember that all users are managed on the production cluster,
which is identified in the <code class="literal">xpack.monitoring.elasticsearch.hosts</code> setting.
This is particularly important to remember when you move from development
environments to production environments, where you often have dedicated
monitoring clusters.</p>
</div>
</div>
<p>For more information about the configuration options for the output, see
<a class="xref" href="monitoring-internal-collection.html#monitoring-settings" title="Monitoring settings for internal collection">Monitoring Settings</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="configure-internal-collectors"></a>Configure Logstash monitoring with internal collectors<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/monitoring/monitoring-internal.asciidoc">edit</a></h3>
</div></div></div>

<p>To monitor Logstash nodes:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Specify where to send monitoring data. This cluster is often referred to as
the <em>production cluster</em>. For examples of typical monitoring architectures, see
<a href="/guide/en/elasticsearch/reference/7.6/how-monitoring-works.html" class="ulink" target="_top">How monitoring works</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>To visualize Logstash as part of the Elastic Stack (as shown in Step
6), send metrics to your <em>production</em> cluster. Sending metrics to a dedicated
monitoring cluster will show the Logstash metrics under the <em>monitoring</em> cluster.</p>
</div>
</div>
</li>
<li class="listitem">
Verify that the <code class="literal">xpack.monitoring.collection.enabled</code> setting is <code class="literal">true</code> on the
production cluster. If that setting is <code class="literal">false</code>, the collection of monitoring data
is disabled in Elasticsearch and data is ignored from all other sources.
</li>
<li class="listitem">
<p>Configure your Logstash nodes to send metrics by setting the
<code class="literal">xpack.monitoring.elasticsearch.hosts</code> in <code class="literal">logstash.yml</code>. If security features
are enabled, you also need to specify the credentials for the
<a href="/guide/en/elasticsearch/reference/7.6/built-in-users.html" class="ulink" target="_top">built-in <code class="literal">logstash_system</code> user</a>. For more
information about these settings, see <a class="xref" href="monitoring-internal-collection.html#monitoring-settings" title="Monitoring settings for internal collection">Monitoring Settings</a>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.hosts: ["http://es-prod-node-1:9200", "http://es-prod-node-2:9200"] <a id="CO17-1"></a><i class="conum" data-value="1"></i>
xpack.monitoring.elasticsearch.username: "logstash_system" <a id="CO17-2"></a><i class="conum" data-value="2"></i>
xpack.monitoring.elasticsearch.password: "changeme"</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>If SSL/TLS is enabled on the production cluster, you must
connect through HTTPS. As of v5.2.1, you can specify multiple
Elasticsearch hosts as an array as well as specifying a single
host as a string. If multiple URLs are specified, Logstash
can round-robin requests to these production nodes.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If security features are disabled on the production cluster, you can omit
these <code class="literal">username</code> and <code class="literal">password</code> settings.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
<p>If SSL/TLS is enabled on the production Elasticsearch cluster, specify the trusted
CA certificates that will be used to verify the identity of the nodes
in the cluster.</p>
<p>To add a CA certificate to a Logstash node&#8217;s trusted certificates, you
can specify the location of the PEM encoded certificate with the
<code class="literal">certificate_authority</code> setting:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.ssl.certificate_authority: /path/to/ca.crt</pre>
</div>
<p>Alternatively, you can configure trusted certificates using a truststore
(a Java Keystore file that contains the certificates):</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.ssl.truststore.path: /path/to/file
xpack.monitoring.elasticsearch.ssl.truststore.password: password</pre>
</div>
<p>Also, optionally, you can set up client certificate using a keystore
(a Java Keystore file that contains the certificate):</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.ssl.keystore.path: /path/to/file
xpack.monitoring.elasticsearch.ssl.keystore.password: password</pre>
</div>
<p>Set sniffing to <code class="literal">true</code> to enable discovery of other nodes of the Elasticsearch cluster.
It defaults to <code class="literal">false</code>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.sniffing: false</pre>
</div>
</li>
<li class="listitem">
Restart your Logstash nodes.
</li>
<li class="listitem">
<p>To verify your X-Pack monitoring configuration, point your web browser at your Kibana
host, and select <span class="strong strong"><strong>Monitoring</strong></span> from the side navigation. Metrics reported from
your Logstash nodes should be visible in the Logstash section. When security is
enabled, to view the monitoring dashboards you must log in to Kibana as a user
who has the <code class="literal">kibana_user</code> and <code class="literal">monitoring_user</code> roles.</p>
<div class="imageblock">
<div class="content">
<a class="image" href="monitoring/images/monitoring-ui.png"><img src="images/monitoring-ui.png" alt="Monitoring"></a>
</div>
</div>
</li>
</ol>
</div>
<h5><a id="monitoring-upgraded-logstash"></a>Re-enabling Logstash Monitoring After Upgrading<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/monitoring/monitoring-internal.asciidoc">edit</a></h5>
<p>When upgrading from older versions of X-Pack, the built-in <code class="literal">logstash_system</code>
user is disabled for security reasons. To resume monitoring,
change the password and re-enable the logstash_system user.</p>
</div>

<div class="section xpack">
<div class="titlepage"><div><div>
<h3 class="title"><a id="monitoring-settings"></a>Monitoring settings for internal collection<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/settings/monitoring-settings.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h3>
</div></div></div>

<p>You can set the following <code class="literal">xpack.monitoring</code> settings in <code class="literal">logstash.yml</code> to
control how monitoring data is collected from your Logstash nodes. However, the
defaults work best in most circumstances. For more information about configuring
Logstash, see <a class="xref" href="logstash-settings-file.html" title="logstash.yml">logstash.yml</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-general-settings"></a>General monitoring settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.enabled</code>
</span>
</dt>
<dd>
Monitoring is disabled by default. Set to <code class="literal">true</code> to enable X-Pack monitoring.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.hosts</code>
</span>
</dt>
<dd>
The Elasticsearch instances that you want to ship your Logstash metrics to. This might be
the same Elasticsearch instance specified in the <code class="literal">outputs</code> section in your Logstash
configuration, or a different one. This is <span class="strong strong"><strong>not</strong></span> the URL of your dedicated
monitoring cluster. Even if you are using a dedicated monitoring cluster, the
Logstash metrics must be routed through your production cluster. You can specify
a single host as a string, or specify multiple hosts as an array. Defaults to
<code class="literal">http://localhost:9200</code>.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If your Elasticsearch cluster is configured with dedicated master-eliglble
nodes, Logstash metrics should <em>not</em> be routed to these nodes, as doing so can
create resource contention and impact the stability of the Elasticsearch
cluster. Therefore, do not include such nodes in
<code class="literal">xpack.monitoring.elasticsearch.hosts</code>.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.username</code> and <code class="literal">xpack.monitoring.elasticsearch.password</code>
</span>
</dt>
<dd>
If your Elasticsearch is protected with basic authentication, these settings provide the
username and password that the Logstash instance uses to authenticate for
shipping monitoring data.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-collection-settings"></a>Monitoring collection settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.collection.interval</code>
</span>
</dt>
<dd>
Controls how often data samples are collected and shipped on the Logstash side.
Defaults to <code class="literal">10s</code>. If you modify the collection interval, set the
<code class="literal">xpack.monitoring.min_interval_seconds</code> option in <code class="literal">kibana.yml</code> to the same value.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-ssl-settings"></a>X-Pack monitoring TLS/SSL settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<p>You can configure the following Transport Layer Security (TLS) or
Secure Sockets Layer (SSL) settings. For more information, see
<a class="xref" href="ls-security.html#ls-monitoring-user" title="Configuring Credentials for Logstash Monitoring">Configuring Credentials for Logstash Monitoring</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.ssl.certificate_authority</code>
</span>
</dt>
<dd>
Optional setting that enables you to specify a path to the <code class="literal">.pem</code> file for the
certificate authority for your Elasticsearch instance.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.ssl.truststore.path</code>
</span>
</dt>
<dd>
Optional settings that provide the paths to the Java keystore (JKS) to validate
the server’s certificate.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.ssl.truststore.password</code>
</span>
</dt>
<dd>
Optional settings that provide the password to the truststore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.ssl.keystore.path</code>
</span>
</dt>
<dd>
Optional settings that provide the paths to the Java keystore (JKS) to validate
the client’s certificate.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.ssl.keystore.password</code>
</span>
</dt>
<dd>
Optional settings that provide the password to the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.ssl.verification_mode</code>
</span>
</dt>
<dd>
Option to validate the server’s certificate. Defaults to <code class="literal">certificate</code>. To
disable, set to <code class="literal">none</code>. Disabling this severely compromises security.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="monitoring-additional-settings"></a>Additional settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/settings/monitoring-settings.asciidoc">edit</a></h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.cloud_id</code>
</span>
</dt>
<dd>
If you&#8217;re using Elasticsearch in Elastic Cloud, you should specify the identifier here.
This setting is an alternative to <code class="literal">xpack.monitoring.elasticsearch.hosts</code>.
If <code class="literal">cloud_id</code> is configured, <code class="literal">xpack.monitoring.elasticsearch.hosts</code> should not be used.
The Elasticsearch instances that you want to ship your Logstash metrics to. This might be
the same Elasticsearch instance specified in the <code class="literal">outputs</code> section in your Logstash
configuration, or a different one.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.monitoring.elasticsearch.cloud_auth</code>
</span>
</dt>
<dd>
If you&#8217;re using Elasticsearch in Elastic Cloud, you can set your auth credentials here.
This setting is an alternative to both <code class="literal">xpack.monitoring.elasticsearch.username</code>
and <code class="literal">xpack.monitoring.elasticsearch.password</code>. If <code class="literal">cloud_auth</code> is configured,
those settings should not be used.
</dd>
</dl>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="monitoring-with-metricbeat.html">« Collect Logstash monitoring data with Metricbeat</a>
</span>
<span class="next">
<a href="logstash-monitoring-ui.html">Monitoring UI »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
