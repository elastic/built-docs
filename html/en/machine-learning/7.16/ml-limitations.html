<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="description" content="An introduction to machine learning anomaly detection, which analyzes time series data to identify and predict anomalous patterns in your data.">
<meta name="keywords" content="ML, Elastic Stack, anomaly detection, data frame analytics">
<title>Machine learning anomaly detection limitations | Machine Learning in the Elastic Stack [7.16] | Elastic</title>
<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [7.16]"/>
<link rel="up" href="xpack-ml.html" title="Anomaly detection"/>
<link rel="prev" href="move-jobs.html" title="Export and import machine learning jobs"/>
<link rel="next" href="ml-troubleshooting.html" title="Troubleshooting anomaly detection"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/7.16"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="7.16"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [7.16]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="xpack-ml.html">Anomaly detection</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="move-jobs.html">« Export and import machine learning jobs</a>
</span>
<span class="next">
<a href="ml-troubleshooting.html">Troubleshooting anomaly detection »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-limitations"></a>Machine learning anomaly detection limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h2>
</div></div></div>

<p>The following limitations and known problems apply to the 7.16.3 release of
the Elastic machine learning features. The limitations are grouped into four categories:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ml-limitations.html#ad-platform-limitations" title="Platform limitations">Platform limitations</a> are related to the platform that hosts the machine learning
feature of the Elastic Stack.
</li>
<li class="listitem">
<a class="xref" href="ml-limitations.html#ad-config-limitations" title="Configuration limitations">Configuration limitations</a> apply to the configuration process of the
anomaly detection jobs.
</li>
<li class="listitem">
<a class="xref" href="ml-limitations.html#ad-operational-limitations" title="Operational limitations">Operational limitations</a> affect the behavior of the anomaly detection jobs that
are running.
</li>
<li class="listitem">
<a class="xref" href="ml-limitations.html#ad-ui-limitations" title="Limitations in Kibana">Limitations in Kibana</a> only apply to anomaly detection jobs managed via the user
interface.
</li>
</ul>
</div>
<h3><a id="ad-platform-limitations"></a>Platform limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h3>
<h4><a id="ml-limitations-sse"></a>CPUs must support SSE4.2<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>Machine learning uses Streaming SIMD Extensions (SSE) 4.2 instructions, so it works only
on machines whose CPUs
<a href="https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs" class="ulink" target="_top">support</a> SSE4.2. If you run
Elasticsearch on older hardware you must disable machine learning by setting <code class="literal">xpack.ml.enabled</code> to
<code class="literal">false</code>. See <a href="/guide/en/elasticsearch/reference/7.16/ml-settings.html" class="ulink" target="_top">Machine learning settings in Elasticsearch</a>.</p>
<h4><a id="ml-scheduling-priority"></a>CPU scheduling improvements apply to Linux and MacOS only<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>When there are many machine learning jobs running at the same time and there are
insufficient CPU resources, the JVM performance must be prioritized so search
and indexing latency remain acceptable. To that end, when CPU is constrained on
Linux and MacOS environments, the CPU scheduling priority of native analysis
processes is reduced to favor the Elasticsearch JVM. This improvement does not apply to
Windows environments.</p>
<h3><a id="ad-config-limitations"></a>Configuration limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h3>
<h4><a id="_terms_aggregation_size_affects_data_analysis"></a>Terms aggregation size affects data analysis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>By default, the <code class="literal">terms</code> aggregation returns the buckets for the top ten terms.
You can change this default behavior by setting the <code class="literal">size</code> parameter.</p>
<p>If you send pre-aggregated data to a job for analysis, you must ensure that the
<code class="literal">size</code> is configured correctly. Otherwise, some data might not be analyzed.</p>
<h4><a id="_fields_named_by_count_or_over_cannot_be_used_to_split_data"></a>Fields named "by", "count", or "over" cannot be used to split data<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>You cannot use the following field names in the <code class="literal">by_field_name</code> or
<code class="literal">over_field_name</code> properties in a job: <code class="literal">by</code>; <code class="literal">count</code>; <code class="literal">over</code>. This limitation
also applies to those properties when you create advanced jobs in Kibana.</p>
<h4><a id="ml-arrays-limitations"></a>Arrays in analyzed fields are turned into comma-separated strings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>If an anomaly detection job is configured to analyze an aggregatable field (a field that
is part of the index mapping definition), and this field contains an array, then
the array is turned into a comma-separated concatenated string. The items in the
array are sorted alphabetically and the duplicated items are removed. For
example, the array <code class="literal">["zebra", "dog", "cat", "alligator", "cat"]</code> becomes
<code class="literal">alligator,cat,dog,zebra</code>. The Anomaly Explorer charts don&#8217;t display any results
for the job as the string does not exist in the source data. The Single Metric
Viewer displays results if the model plot is enabled.</p>
<p>If an array field is not aggregatable and is retrieved from <code class="literal">_source</code>, the array
is also turned into a comma-separated, concatenated list. However, the list
items are not sorted alphabetically, nor are they deduplicated. Taking the
example above, the comma-separated list, in this case, would be
<code class="literal">zebra,dog,cat,alligator,cat</code>.</p>
<p>Analyzing large arrays results in long strings which may require more system
resources. Consider using a query in the datafeed that filters on the relevant
items of the array.</p>
<h4><a id="ml-frozen-limitations"></a>Frozen indices are not supported<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p><a href="/guide/en/elasticsearch/reference/7.16/frozen-indices.html" class="ulink" target="_top">Frozen indices</a> cannot be used in anomaly detection jobs or
datafeeds. This limitation applies irrespective of whether you create the jobs in
Kibana or by using APIs. This limitation exists because it&#8217;s currently not
possible to specify the <code class="literal">ignore_throttled</code> query parameter for search requests
in datafeeds or jobs. See
<a href="/guide/en/elasticsearch/reference/7.16/searching_a_frozen_index.html" class="ulink" target="_top">Searching a frozen index</a>.</p>
<h4><a id="ml-forecast-config-limitations"></a>Unsupported forecast configurations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>There are some limitations that affect your ability to create a forecast:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You can generate only three forecasts per anomaly detection job concurrently. There is
no limit to the number of forecasts that you retain. Existing forecasts are not
overwritten when you create new forecasts. Rather, they are automatically
deleted when they expire.
</li>
<li class="listitem">
If you use an <code class="literal">over_field_name</code> property in your anomaly detection job (that is to
say, it&#8217;s a <em>population job</em>), you cannot create a forecast.
</li>
<li class="listitem">
<p>If you use any of the following analytical functions in your anomaly detection job,
you cannot create a forecast:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">lat_long</code>
</li>
<li class="listitem">
<code class="literal">rare</code> and <code class="literal">freq_rare</code>
</li>
<li class="listitem">
<p><code class="literal">time_of_day</code> and <code class="literal">time_of_week</code></p>
<p>For more information about any of these functions, see <a class="xref" href="ml-functions.html" title="Function reference"><em>Function reference</em></a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h4><a id="ml-limitations-runtime"></a>Anomaly detection performs better on indexed fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>Anomaly detection jobs sort all data by a user-defined time field, which is
frequently accessed. If the time field is a <a href="/guide/en/elasticsearch/reference/7.16/runtime.html" class="ulink" target="_top">runtime field</a>,
the performance impact of calculating field values at query time can
significantly slow the job. Use an indexed field as a time field when running
anomaly detection jobs.</p>
<h3><a id="ad-operational-limitations"></a>Operational limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h3>
<h4><a id="_categorization_uses_english_dictionary_words"></a>Categorization uses English dictionary words<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>Categorization identifies static parts of unstructured logs and groups similar
messages together. The default categorization tokenizer assumes English language
log messages. For other languages you must define a different
<code class="literal">categorization_analyzer</code> for your job. For more information, see
<a class="xref" href="ml-configuring-categories.html" title="Detecting anomalous categories of data">Detecting anomalous categories of data</a>.</p>
<p>Additionally, a dictionary used to influence the categorization process contains
only English words. This means categorization might work better in English than
in other languages. The ability to customize the dictionary will be added in a
future release.</p>
<h4><a id="_post_data_api_requires_json_format"></a>Post data API requires JSON format<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>The post data API enables you to send data to a job for analysis. The data that
you send to the job must use the JSON format.</p>
<p>For more information about this API, see
<a href="/guide/en/elasticsearch/reference/7.16/ml-post-data.html" class="ulink" target="_top">Post Data to Jobs</a>.</p>
<h4><a id="_misleading_high_missing_field_counts"></a>Misleading high missing field counts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>One of the counts associated with a machine learning job is <code class="literal">missing_field_count</code>,
which indicates the number of records that are missing a configured field.</p>
<p>Since jobs analyze JSON data, the <code class="literal">missing_field_count</code> might be misleading.
Missing fields might be expected due to the structure of the data and therefore
do not generate poor results.</p>
<p>For more information about <code class="literal">missing_field_count</code>,
see the <a href="/guide/en/elasticsearch/reference/7.16/ml-get-job-stats.html" class="ulink" target="_top">get anomaly detection job statistics API</a>.</p>
<h4><a id="_security_integration"></a>Security integration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>When the Elasticsearch security features are enabled, a datafeed stores the roles of the
user who created or updated the datafeed <span class="strong strong"><strong>at that time</strong></span>. This means that if the
roles the user has are changed after they create or update a datafeed then the
datafeed continues to run without change. However, if instead the permissions
associated with the roles that are stored with the datafeed are changed then this
affects the datafeed. For more information, see <a class="xref" href="ml-datafeeds.html" title="Datafeeds">Datafeeds</a>.</p>
<h4><a id="ml-result-size-limitations"></a>Job and datafeed APIs have a maximum search size<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>In 6.6 and later releases, the <a href="/guide/en/elasticsearch/reference/7.16/ml-get-job.html" class="ulink" target="_top">get jobs API</a> and the
<a href="/guide/en/elasticsearch/reference/7.16/ml-get-job-stats.html" class="ulink" target="_top">get job statistics API</a> return a maximum of 10,000
jobs. Likewise, the <a href="/guide/en/elasticsearch/reference/7.16/ml-get-datafeed.html" class="ulink" target="_top">get datafeeds API</a> and the
<a href="/guide/en/elasticsearch/reference/7.16/ml-get-datafeed-stats.html" class="ulink" target="_top">get datafeed statistics API</a> return a maximum of
10,000 datafeeds.</p>
<h4><a id="ml-forecast-limitations"></a>Forecast operational limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>There are some factors that may be considered when you run forecasts:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Forecasts run concurrently with real-time machine learning analysis. That is to say, machine learning
analysis does not stop while forecasts are generated. Forecasts can have an
impact on anomaly detection jobs, however, especially in terms of memory usage. For this
reason, forecasts run only if the model memory status is acceptable.
</li>
<li class="listitem">
The anomaly detection job must be open when you create a forecast. Otherwise, an error
occurs.
</li>
<li class="listitem">
If there is insufficient data to generate any meaningful predictions, an
error occurs. In general, forecasts that are created early in the learning phase
of the data analysis are less accurate.
</li>
</ul>
</div>
<h3><a id="ad-ui-limitations"></a>Limitations in Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h3>
<h4><a id="_pop_ups_must_be_enabled_in_browsers"></a>Pop-ups must be enabled in browsers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>The machine learning features in Kibana use pop-ups. You must configure your web browser so
that it does not block pop-up windows or create an exception for your Kibana URL.</p>
<h4><a id="_anomaly_explorer_and_single_metric_viewer_omissions_and_limitations"></a>Anomaly Explorer and Single Metric Viewer omissions and limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>In Kibana, <span class="strong strong"><strong>Anomaly Explorer</strong></span> and <span class="strong strong"><strong>Single Metric Viewer</strong></span> charts are not
displayed for anomalies that were due to categorization (if model plot is not
enabled), <code class="literal">time_of_day</code> functions, <code class="literal">time_of_week</code> functions, or <code class="literal">lat_long</code>
geographic functions.</p>
<p>If model plot is not enabled, the charts are not displayed for detectors that
use script fields either (except for scripts that define metric fields). In that
case, the original source data cannot be easily searched because it has been
transformed by the script.</p>
<p>If your <a class="xref" href="ml-configuring-aggregation.html#aggs-dfeeds" title="Nested aggregations in datafeeds">datafeed uses aggregations with nested <code class="literal">terms</code> aggs</a> and
model plot is not enabled for the anomaly detection job, neither the <span class="strong strong"><strong>Anomaly
Explorer</strong></span> nor the <span class="strong strong"><strong>Single Metric Viewer</strong></span> can plot and display an anomaly
chart for the job. In these cases, the charts are not visible and an explanatory
message is shown.</p>
<p>The charts can also look odd in circumstances where there is very little data to
plot. For example, if there is only one data point, it is represented as a
single dot. If there are only two data points, they are joined by a line.</p>
<h4><a id="_jobs_created_in_kibana_must_use_datafeeds"></a>Jobs created in Kibana must use datafeeds<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>If you create jobs in Kibana, you must use datafeeds. If the data that you want to
analyze is not stored in Elasticsearch, you cannot use datafeeds and therefore you cannot
create your jobs in Kibana. You can, however, use the machine learning APIs to create jobs. For more information, see
<a class="xref" href="ml-datafeeds.html" title="Datafeeds">Datafeeds</a> and <a class="xref" href="ml-api-quickref.html" title="API quick reference"><em>API quick reference</em></a>.</p>
<h4><a id="_jobs_created_in_kibana_use_model_plot_config_and_pre_aggregated_data"></a>Jobs created in Kibana use model plot config and pre-aggregated data<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>If you create single or multi-metric jobs in Kibana, it might enable some
options under the covers that you&#8217;d want to reconsider for large or
long-running jobs.</p>
<p>For example, when you create a single metric job in Kibana, it generally
enables the <code class="literal">model_plot_config</code> advanced configuration option. That
configuration option causes model information to be stored along with the
results and provides a more detailed view into anomaly detection. It is
specifically used by the <span class="strong strong"><strong>Single Metric Viewer</strong></span> in Kibana. When this option is
enabled, however, it can add considerable overhead to the performance of the
system. If you have jobs with many entities, for example data from tens of
thousands of servers, storing this additional model information for every bucket
might be problematic. If you are not certain that you need this option or if you
experience performance issues, edit your job configuration to disable this
option.</p>
<p>Likewise, when you create a single or multi-metric job in Kibana, in some cases
it uses aggregations on the data that it retrieves from Elasticsearch. One of the
benefits of summarizing data this way is that Elasticsearch automatically distributes
these calculations across your cluster. This summarized data is then fed into
machine learning instead of raw results, which reduces the volume of data that must
be considered while detecting anomalies. However, if you have two jobs, one of
which uses pre-aggregated data and another that does not, their results might
differ. This difference is due to the difference in precision of the input data.
The machine learning analytics are designed to be aggregation-aware and the likely increase
in performance that is gained by pre-aggregating the data makes the potentially
poorer precision worthwhile. If you want to view or change the aggregations
that are used in your job, refer to the <code class="literal">aggregations</code> property in your datafeed.</p>
<p>When the aggregation interval of the datafeed and the bucket span of the job
don&#8217;t match, the values of the chart plotted in both the <span class="strong strong"><strong>Single Metric
Viewer</strong></span> and the <span class="strong strong"><strong>Anomaly Explorer</strong></span> differ from the actual values of the job.
To avoid this behavior, make sure that the aggregation interval in the datafeed
configuration and the bucket span in the anomaly detection job configuration have the
same values.</p>
<h4><a id="ml-space-limitations"></a>Calendars and filters are visible in all Kibana spaces<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p><a href="/guide/en/kibana/7.16/xpack-spaces.html" class="ulink" target="_top">Spaces</a> enable you to organize your
anomaly detection jobs in Kibana and to see only the jobs and other saved objects
that belong to your space. However, this limited scope does not apply to
<a class="xref" href="ml-calendars.html" title="Calendars and scheduled events">calendars</a> and <a class="xref" href="ml-rules.html" title="Custom rules">filters</a>; they are visible in all
spaces.</p>
<h4><a id="ml-rollup-limitations"></a>Rollup indices are not supported in Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.16/docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc">edit</a></h4>
<p>Rollup indices and index patterns with rolled up indices cannot be used in
anomaly detection jobs or datafeeds in Kibana. If you try to analyze data that exists in
an index that uses the experimental <a href="/guide/en/elasticsearch/reference/7.16/xpack-rollup.html" class="ulink" target="_top">data rollup features</a>,
the anomaly detection job creation wizards fail. If you use APIs to create
anomaly detection jobs that use data rollup features, the job results might not display
properly in the <span class="strong strong"><strong>Single Metric Viewer</strong></span> or <span class="strong strong"><strong>Anomaly Explorer</strong></span> in Kibana.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="move-jobs.html">« Export and import machine learning jobs</a>
</span>
<span class="next">
<a href="ml-troubleshooting.html">Troubleshooting anomaly detection »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
