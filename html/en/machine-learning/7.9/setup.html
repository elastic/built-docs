<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Set up machine learning features | Machine Learning in the Elastic Stack [7.9] | Elastic</title>
<meta class="elastic" name="content" content="Set up machine learning features | Machine Learning in the Elastic Stack [7.9]">

<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [7.9]"/>
<link rel="up" href="index.html" title="Machine Learning in the Elastic Stack [7.9]"/>
<link rel="prev" href="index.html" title="Machine Learning in the Elastic Stack [7.9]"/>
<link rel="next" href="ml-getting-started.html" title="Getting started with machine learning"/>
<meta class="elastic" name="product_version" content="7.9"/>
<meta class="elastic" name="product_name" content="Machine Learning"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/7.9"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [7.9]</a></span>
</div>
<div class="navheader">
<span class="prev">
</span>
<span class="next">
<a href="ml-getting-started.html">Getting started with machine learning »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="setup"></a>Set up machine learning features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.9/docs/en/stack/ml/setup.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>

<p>To use the Elastic Stack machine learning features, you must have the
<a href="/subscriptions" class="ulink" target="_top">appropriate subscription</a> and at least one
<a class="xref" href="setup.html#ml-nodes" title="Machine learning nodes">machine learning node</a> in your cluster.</p>
<p>In Kibana, the machine learning features must be visible in your
<a href="/guide/en/kibana/7.9/xpack-spaces.html#spaces-control-feature-visibility" class="ulink" target="_top">space</a> and your
source index patterns must exist in the same space as your machine learning jobs.</p>
<p>If Elastic Stack security features are enabled, you must also ensure your users have
the <a class="xref" href="setup.html#setup-privileges" title="Security privileges">necessary privileges</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>The fastest way to get started with machine learning features is to
<a href="/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">start a free 14-day trial of Elasticsearch Service</a> in the cloud.</p>
</div>
</div>
<h3><a id="ml-nodes"></a>Machine learning nodes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.9/docs/en/stack/ml/setup.asciidoc">edit</a></h3>
<p>To use machine learning features, there must be at least one machine learning node in your cluster. A
machine learning node is a node that has <code class="literal">xpack.ml.enabled</code> set to <code class="literal">true</code> and <code class="literal">ml</code> in
<code class="literal">node.roles</code>.</p>
<p>If nodes do not have the machine learning role, they cannot run machine learning jobs. If
<code class="literal">xpack.ml.enabled</code> is <code class="literal">true</code>, however, they can service API requests. For more
information, see <a href="/guide/en/elasticsearch/reference/7.9/modules-node.html#ml-node" class="ulink" target="_top">Machine learning nodes</a> and
<a href="/guide/en/elasticsearch/reference/7.9/ml-settings.html" class="ulink" target="_top">Machine learning settings in Elasticsearch</a>.</p>
<h3><a id="setup-privileges"></a>Security privileges<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.9/docs/en/stack/ml/setup.asciidoc">edit</a></h3>
<p>The Elastic Stack security features provide roles and privileges that make it easier
to control which users can manage or view machine learning objects such as jobs, datafeeds,
results, and model snapshots. Kibana also enables you to control access to the
machine learning features within each space. For more information, see <a href="/guide/en/elasticsearch/reference/7.9/security-privileges.html" class="ulink" target="_top">Security privileges</a> and
<a href="/guide/en/kibana/7.9/kibana-privileges.html" class="ulink" target="_top">Kibana privileges</a>.</p>
<p>For full access to the machine learning features in Kibana, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">all</code> Kibana privileges for the machine learning features in the appropriate spaces
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> and <code class="literal">view_index_metadata</code> index privileges on source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code>, <code class="literal">manage</code>, and <code class="literal">index</code> index privileges on destination indices (for
data frame analytics jobs only)
</li>
</ul>
</div>
<p>For read-only access to the machine learning features in Kibana, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> Kibana privileges for the machine learning features in the appropriate spaces
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> index privileges on source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> index privileges on destination indices (for data frame analytics jobs
only)
</li>
</ul>
</div>
<p>To upload files in Kibana with the <span class="strong strong"><strong>File Data Visualizer</strong></span>, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">all</code> Kibana privileges for the machine learning features in the appropriate spaces.
Alternatively, <code class="literal">read</code> Kibana privileges for the machine learning features and <code class="literal">all</code> Kibana
privileges for the index pattern management feature
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">ingest_admin</code> <a href="/guide/en/elasticsearch/reference/7.9/built-in-roles.html" class="ulink" target="_top">built-in role</a>
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code>, <code class="literal">manage</code>, and <code class="literal">index</code> index privileges for destination indices
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot limit access to specific machine learning objects in each space. If
the machine learning feature is visible in your space and you have <code class="literal">read</code> or <code class="literal">all</code> Kibana
privileges for the feature, you have access to <span class="strong strong"><strong>all</strong></span> machine learning objects in that space.</p>
</div>
</div>
<p>If you call machine learning APIs directly, you must have the index privileges listed above
as well as <code class="literal">machine_learning_admin</code> or <code class="literal">machine_learning_user</code> built-in roles.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">machine_learning_admin</code> and <code class="literal">machine_learning_user</code> roles grant
access to the machine learning features in all Kibana spaces. Therefore, when you use Kibana,
use custom roles instead and set your Kibana privileges appropriately for each
space.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
</span>
<span class="next">
<a href="ml-getting-started.html">Getting started with machine learning »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
