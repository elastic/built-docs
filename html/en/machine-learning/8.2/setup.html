<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="description" content="An introduction to the breadth of Elastic machine learning features.">
<meta name="keywords" content="ML, Elastic Stack">
<title>Set up machine learning features | Machine Learning in the Elastic Stack [8.2] | Elastic</title>
<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [8.2]"/>
<link rel="up" href="index.html" title="Machine Learning in the Elastic Stack [8.2]"/>
<link rel="prev" href="machine-learning-intro.html" title="What is Elastic Machine Learning?"/>
<link rel="next" href="ml-ad-overview.html" title="Anomaly detection"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/8.2"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="8.2"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [8.2]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="machine-learning-intro.html">« What is Elastic Machine Learning?</a>
</span>
<span class="next">
<a href="ml-ad-overview.html">Anomaly detection »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="setup"></a>Set up machine learning features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h1>
</div></div></div>

<h2><a id="requirements-overview"></a>Requirements overview<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h2>
<p>To use the Elastic Stack machine learning features, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> the <a href="/subscriptions" class="ulink" target="_top">appropriate subscription</a> level or the free trial
period activated
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">xpack.ml.enabled</code> set to its default value of <code class="literal">true</code> on every node in the
cluster (refer to <a href="/guide/en/elasticsearch/reference/8.2/ml-settings.html" class="ulink" target="_top">Machine learning settings in Elasticsearch</a>)
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">ml</code> value defined in the list of <code class="literal">node.roles</code> on the
<a href="/guide/en/elasticsearch/reference/8.2/modules-node.html#ml-node" class="ulink" target="_top">machine learning nodes</a>
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> machine learning features visible in the Kibana space
</li>
<li class="listitem">
<p><input type="checkbox" data-item-complete="0"> security privileges assigned to the user that:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
grant use of machine learning features, and
</li>
<li class="listitem">
grant access to source and destination indices.
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>The fastest way to get started with machine learning features is to
<a href="/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">start a free 14-day trial of Elasticsearch Service</a> in the cloud.</p>
</div>
</div>
<h2><a id="setup-privileges"></a>Security privileges<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h2>
<p>Assigning security privileges affects how users access machine learning features. Consider
the two main categories:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="setup.html#es-security-privileges" title="Elasticsearch API user">Elasticsearch API user</a></strong></span>: uses an Elasticsearch client, cURL, or Kibana Dev Tools to
access machine learning features via Elasticsearch APIs. It requires Elasticsearch security privileges.
</li>
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="setup.html#kib-security-privileges" title="Kibana user">Kibana user</a></strong></span>: uses the machine learning features in Kibana and does not
use Dev Tools. It requires either Kibana feature privileges or Elasticsearch security
privileges and is granted the most permissive combination of both. Kibana feature
privileges are recommended if you control job level visibility via <em>Spaces</em>.
Machine learning features must be visible in the relevant space. Refer to
<a class="xref" href="setup.html#kib-visibility-spaces" title="Feature visibility in Spaces">Feature visibility in Spaces</a> for configuration information.
</li>
</ul>
</div>
<p>You can configure these privileges under <span class="strong strong"><strong>Stack Management</strong></span> &gt; <em>Security</em> in
Kibana or via the respective Elasticsearch security APIs.</p>
<h3><a id="es-security-privileges"></a>Elasticsearch API user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h3>
<p>If you use machine learning APIs, you must have the following cluster and index privileges:</p>
<p>For full access:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">machine_learning_admin</code> built-in role or the equivalent cluster
privileges
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> and <code class="literal">view_index_metadata</code> on source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code>, <code class="literal">manage</code>, and <code class="literal">index</code> on destination indices (for
data frame analytics jobs only)
</li>
</ul>
</div>
<p>For read-only access:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">machine_learning_user</code> built-in role or the equivalent cluster privileges
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> index privileges on source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> index privileges on destination indices (for data frame analytics jobs
only)
</li>
</ul>
</div>
<h3><a id="kib-security"></a>Kibana security<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h3>
<h4><a id="kib-visibility-spaces"></a>Feature visibility in Spaces<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h4>
<p>In Kibana, the machine learning features must be visible in your
<a href="/guide/en/kibana/8.2/xpack-spaces.html#spaces-control-feature-visibility" class="ulink" target="_top">space</a>. To
control which features are visible in your space, use <span class="strong strong"><strong>Stack Management</strong></span> &gt;
<em>Kibana</em> &gt; <em>Spaces</em>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="spaces.jpg" alt="Manage spaces in Kibana">
</div>
</div>
<p>In addition to index privileges, source data views must also exist in the
same space as your machine learning jobs. These can be configured in <span class="strong strong"><strong>Stack Management</strong></span>
&gt; <em>Kibana</em> &gt; <em>Data Views</em>.</p>
<p>Each machine learning job and trained model can be assigned to all, one, or multiple spaces.
This can be configured in <span class="strong strong"><strong>Stack Management &gt; Alerts and Insights &gt; Machine Learning</strong></span>.
You can edit the spaces that a job or model is assigned to by clicking the
icons in the <span class="strong strong"><strong>Spaces</strong></span> column.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="assign-job-spaces.jpg" alt="Assign machine learning jobs to spaces">
</div>
</div>
<h4><a id="kib-security-privileges"></a>Kibana user<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h4>
<p>Within a Kibana space, for full access to the machine learning features, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">Machine Learning: All</code> Kibana privileges
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">Data Views Management: All</code> Kibana feature privileges
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code>, and <code class="literal">view_index_metadata</code> index privileges on your source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> data views for your source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> data views, <code class="literal">read</code>, <code class="literal">manage</code>, and <code class="literal">index</code> index privileges on
destination indices (for data frame analytics jobs only)
</li>
</ul>
</div>
<p>Within a Kibana space, for read-only access to the machine learning features, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">Machine Learning: Read</code> Kibana privileges
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> data views for your source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> index privilege on your source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> data views and <code class="literal">read</code> index privileges on destination indices (for
data frame analytics jobs only)
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Data views can be automatically created when creating a
data frame analytics job.</p>
</div>
</div>
<p>For access to use machine learning APIs via <em>Dev Tools</em> in Kibana, set the Elasticsearch security
privileges and grant access to <code class="literal">machine_learning_admin</code> or
<code class="literal">machine_learning_user</code> built-in roles.</p>
<h4><a id="upload-file-security-privileges"></a>Data Visualizer feature<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.2/docs/en/stack/ml/setup.asciidoc">edit</a></h4>
<p>Within a Kibana space, to upload and import files in the <span class="strong strong"><strong>Data Visualizer</strong></span>, you must
have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">Machine Learning: Read</code> or <code class="literal">Discover: All</code> Kibana feature privileges
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">Data Views Management: All</code> Kibana feature privileges
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">ingest_admin</code> built-in role, or <code class="literal">manage_ingest_pipelines</code> cluster
privilege
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">create</code>, <code class="literal">create_index</code>, <code class="literal">manage</code> and <code class="literal">read</code> index privileges for
destination indices
</li>
</ul>
</div>
<p>For more information, see <a href="/guide/en/elasticsearch/reference/8.2/security-privileges.html" class="ulink" target="_top">Security privileges</a>
and <a href="/guide/en/kibana/8.2/kibana-privileges.html" class="ulink" target="_top">Kibana privileges</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="machine-learning-intro.html">« What is Elastic Machine Learning?</a>
</span>
<span class="next">
<a href="ml-ad-overview.html">Anomaly detection »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
