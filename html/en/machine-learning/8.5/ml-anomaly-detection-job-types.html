<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="description" content="The description of the different anomaly detection job types.">
<meta name="keywords" content="ML, Elastic Stack, anomaly detection">
<title>Anomaly detection job types | Machine Learning in the Elastic Stack [8.5] | Elastic</title>
<meta class="elastic" name="content" content="Anomaly detection job types | Machine Learning in the Elastic Stack [8.5]">

<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [8.5]"/>
<link rel="up" href="ml-ad-concepts.html" title="Advanced concepts"/>
<link rel="prev" href="ml-ad-algorithms.html" title="Anomaly detection algorithms"/>
<link rel="next" href="anomaly-detection-scale.html" title="Working with anomaly detection at scale"/>
<meta class="elastic" name="product_version" content="8.5"/>
<meta class="elastic" name="product_name" content="Machine Learning"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/8.5"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="8.5"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [8.5]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-ad-overview.html">Anomaly detection</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-ad-concepts.html">Advanced concepts</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-ad-algorithms.html">« Anomaly detection algorithms</a>
</span>
<span class="next">
<a href="anomaly-detection-scale.html">Working with anomaly detection at scale »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-anomaly-detection-job-types"></a>Anomaly detection job types<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.5/docs/en/stack/ml/anomaly-detection/ml-ad-job-types.asciidoc">edit</a></h2>
</div></div></div>

<p>Anomaly detection jobs have many possible configuration options which enable you to
fine-tune the jobs and cover your use case as much as possible. This page
provides a quick overview of different types of anomaly detection jobs and their
capabilities. The job types available in Kibana are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
single metric jobs,
</li>
<li class="listitem">
multi-metric jobs,
</li>
<li class="listitem">
population jobs,
</li>
<li class="listitem">
advanced jobs,
</li>
<li class="listitem">
categorization jobs,
</li>
<li class="listitem">
rare jobs.
</li>
</ul>
</div>
<h4><a id="singe-metric-jobs"></a>Single metric jobs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.5/docs/en/stack/ml/anomaly-detection/ml-ad-job-types.asciidoc">edit</a></h4>
<p>Every anomaly detection job has at least one detector. A detector defines the type of
analysis that occurs (for example, using <code class="literal">max</code>, <code class="literal">average</code>, or <code class="literal">high</code> functions)
and the field in your data that is analyzed. Single metric jobs have
exactly one detector. These jobs are best for detecting anomalies in one aspect
of your time series data. For example, you can monitor the request rate in your
log data with the <code class="literal">low_count</code> function to find unusually low request rates that
might be a sign of an error. Refer to the <a class="xref" href="ml-functions.html" title="Function reference">Function reference</a> to learn more about
the available functions.</p>
<h4><a id="multi-metric-jobs"></a>Multi-metric jobs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.5/docs/en/stack/ml/anomaly-detection/ml-ad-job-types.asciidoc">edit</a></h4>
<p>Multi-metric jobs can have more than one detector configured and optionally
split the analysis by a field. Conceptually, multi-metric jobs can be considered
as multiple independent single metric jobs. Binding the jobs together into a
multi-metric job has the advantage of an overall anomaly score (instead of an
independent anomaly score for each job) and influencers that apply to all
metrics in the job. Multi-metrics jobs provide better results when the
influencers are shared across the detectors.</p>
<p>Splitting the analysis by a field enables you to model each value of that field
independently. For example, you can split the analysis of your log data set by
the <code class="literal">host</code> field which results in independent baselines for each host (each
value of the <code class="literal">host</code> field) in your data set. If you have a <code class="literal">count</code> function that
detects anomalies in the <code class="literal">error_code</code> field, and your data is split by the
<code class="literal">host</code> field, then the unusual number of events in the <code class="literal">error_code</code> field is
reported in the context of each host independently. In this case, an observed
anomaly in one host does not affect the baseline of another host.</p>
<p>Multi-metric jobs are recommended for complex use cases where you want to detect
anomalous behavior in multiple aspects of your data or analyze the data in
the context of distinct values of a field.</p>
<h4><a id="population-jobs"></a>Population jobs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.5/docs/en/stack/ml/anomaly-detection/ml-ad-job-types.asciidoc">edit</a></h4>
<p>In the case of the population jobs, the analyzed data is split by the distinct
values of a field. This field defines what is called a population. The splits
are analyzed in the context of all the splits to find unusual values in the
population. In other words, the population analysis is a comparison of an
individual entity against a collective model of all members in the population as
witnessed over time.</p>
<p>For example, if you want to detect IP addresses with unusual request rates
compared to the number of requests coming from other IP addresses, you can use a
population job. That job has a <code class="literal">count</code> function to detect unusual number of
requests and the analysis is split by the <code class="literal">client_ip</code> field. In this context, an
event is anomalous if the request rate of an IP address is unusually high or low
compared to the request rate of all IP addresses in the population. The
population job builds a model of the typical number of requests for the IP
addresses collectively and compares the behavior of each IP address against that
collective model to detect outliers.</p>
<h4><a id="advanced-jobs"></a>Advanced jobs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.5/docs/en/stack/ml/anomaly-detection/ml-ad-job-types.asciidoc">edit</a></h4>
<p>Advanced jobs give you all the flexibility that&#8217;s possible in the
<a href="/guide/en/elasticsearch/reference/8.5/ml-put-job.html" class="ulink" target="_top">create anomaly detection jobs API</a>. At the extreme, you can switch
to directly edit the JSON that will be sent to this endpoint. All the other
types of jobs described in this page <em>can</em> be created as advanced jobs, but the
more specialized wizards make it easier to create jobs for common situations.
You can create an advanced job if you are familiar with all the functionality
that machine learning anomaly detection provides and want to do something that the more
specialized wizards do not allow you to do.</p>
<h4><a id="categorization-jobs"></a>Categorization jobs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.5/docs/en/stack/ml/anomaly-detection/ml-ad-job-types.asciidoc">edit</a></h4>
<p>Categorization jobs cluster similar text values together, classify them into
categories, and detect anomalies within the categories. Categorization works
best on machine-written text like log messages that typically contains repeated
strings of text; it does not work well on human-generated text because of its
high variability.</p>
<p>The model learns the normal volume and pattern of a category over time so the
job can detect anomalous behavior, such as an unusual number of events in a
category by using the <code class="literal">count</code> function or messages that rarely occur by using
the <code class="literal">rare</code> function.</p>
<h4><a id="rare-jobs"></a>Rare jobs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/8.5/docs/en/stack/ml/anomaly-detection/ml-ad-job-types.asciidoc">edit</a></h4>
<p>Rare anomaly detection jobs detect rare occurrences in time series data. Rare jobs use
the <code class="literal">rare</code> or <code class="literal">freq_rare</code> functions and detect such events in populations as
well. A <em>rare</em> job finds events in simple time series data that occur rarely
compared to what the model observed over time. A <em>rare in a population</em> job
finds members of a population that have rare values over time compared to the
other members of the population. The <em>frequently rare in a population</em> job
detects rare events that frequently occur for a member of a population
compared to other members. As an example of this last type of rare job, you can
create one that models URI paths and client IP interactions and detects a rare
URI path that is visited by very few client IPs in the population (this is the
reason why it&#8217;s rare). The client IPs that have many interactions with this URI
path are anomalous compared to the rest of the population that rarely interact
with the URI path.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ml-ad-algorithms.html">« Anomaly detection algorithms</a>
</span>
<span class="next">
<a href="anomaly-detection-scale.html">Working with anomaly detection at scale »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
