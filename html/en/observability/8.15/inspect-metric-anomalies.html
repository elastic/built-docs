<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Detect metric anomalies | Elastic Observability [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Detect metric anomalies | Elastic Observability [8.15]">

<link rel="home" href="index.html" title="Elastic Observability [8.15]"/>
<link rel="up" href="analyze-metrics.html" title="Infrastructure monitoring"/>
<link rel="prev" href="analyze-hosts.html" title="Analyze and compare hosts"/>
<link rel="next" href="configure-settings.html" title="Configure settings"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.15"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.15"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="analyze-hosts.html">« Analyze and compare hosts</a>
</span>
<span class="next">
<a href="configure-settings.html">Configure settings »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="analyze-metrics.html">Infrastructure monitoring</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Detect metric anomalies</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/monitor-infra/inspect-metric-anomalies.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="inspect-metric-anomalies"></a>Detect metric anomalies<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/monitor-infra/inspect-metric-anomalies.asciidoc">edit</a></h2>
</div></div></div>
<p>When the anomaly detection features of machine learning are enabled, you can create machine learning jobs
to detect and inspect memory usage and network traffic anomalies for hosts and
Kubernetes pods.</p>
<p>You can model system memory usage, along with inbound and outbound network
traffic across hosts or pods. You can detect unusual increases in memory usage
and unusually high inbound or outbound traffic across hosts or pods.</p>
<h4><a id="ml-jobs-hosts"></a>Enable machine learning jobs for hosts or Kubernetes pods<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/monitor-infra/inspect-metric-anomalies.asciidoc">edit</a></h4>
<p>Create a machine learning job to detect anomalous memory usage and network traffic
automatically.</p>
<p>Once you create machine learning jobs, you can not change the settings. You can
recreate these jobs later. However, you will remove any previously detected anomalies.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to <span class="strong strong"><strong>Observability &#8594; Infrastructure &#8594; Inventory</strong></span> and click the <span class="strong strong"><strong>Anomaly detection</strong></span> link at the top of the page.
</li>
<li class="listitem">
You’ll be prompted to create a machine learning job for <span class="strong strong"><strong>Hosts</strong></span> or
<span class="strong strong"><strong>Kubernetes Pods</strong></span>. Click <span class="strong strong"><strong>Enable</strong></span>.
</li>
<li class="listitem">
<p>Choose a start date for the machine learning analysis.</p>
<p>Machine learning jobs analyze the last four weeks of data and continue to run
indefinitely.</p>
</li>
<li class="listitem">
<p>Select a partition field.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, the Kubernetes partition field <code class="literal">kubernetes.namespace</code> is selected.</p>
</div>
</div>
<p>Partitions allow you to create independent models for different groups of data
that share similar behavior. For example, you may want to build separate models
for machine type or cloud availability zone so that anomalies are not weighted
equally across groups.</p>
</li>
<li class="listitem">
By default, machine learning jobs analyze all of your metric data, and the results are listed under
the <span class="strong strong"><strong>Anomalies</strong></span> tab. You can filter this list to view only the jobs or metrics that
you are interested in. For example, you can filter by job name and node name to view
specific anomaly detection jobs for that host.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Enable jobs</strong></span>.
</li>
<li class="listitem">
<p>You&#8217;re now ready to explore your metric anomalies. Click <span class="strong strong"><strong>Anomalies</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/metrics-ml-jobs.png" alt="Infrastructure Machine Learning anomalies">
</div>
</div>
<p>The <span class="strong strong"><strong>Anomalies</strong></span> table displays a list of each single metric anomaly detection job
for the specific host or Kubernetes pod. By default, anomaly jobs are sorted by
time to show the most recent job.</p>
<p>Along with each anomaly job and the node name, detected anomalies with
a severity score equal to 50 or higher are listed. These scores represent a severity
of "warning" or higher in the selected time period. The <span class="strong strong"><strong>summary</strong></span> value represents the
increase between the actual value and the expected ("typical") value of the metric in
the anomaly record result.</p>
<p>To drill down and analyze the metric anomaly, select <span class="strong strong"><strong>Actions &#8594; Open in Anomaly Explorer</strong></span>
to view the <a href="/guide/en/machine-learning/8.15/ml-gs-results.html" class="ulink" target="_top">Anomaly Explorer in Machine Learning</a>. You can
also select <span class="strong strong"><strong>Actions &#8594; Show in Inventory</strong></span> to view the host or Kubernetes pods Inventory
page, filtered by the specific metric.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These predefined anomaly detection jobs use <a href="/guide/en/machine-learning/8.15/ml-rules.html" class="ulink" target="_top">custom rules</a>. To
update the rules in the <a href="/guide/en/machine-learning/8.15/ml-gs-results.html" class="ulink" target="_top">Anomaly Explorer</a>, select
<span class="strong strong"><strong>actions &#8594; Configure rules</strong></span>. The changes only take effect for new results.
If you want to apply the changes to existing results, clone and rerun the job.</p>
</div>
</div>
</li>
</ol>
</div>
<h4><a id="history-chart"></a>History chart<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/monitor-infra/inspect-metric-anomalies.asciidoc">edit</a></h4>
<p>On the <span class="strong strong"><strong>Inventory</strong></span> page, click <span class="strong strong"><strong>Show history</strong></span> to view the metric values within
the selected time frame. Detected anomalies with an anomaly score equal to 50,
or higher, are highlighted in red. To examine the detected anomalies, use the
<a href="/guide/en/machine-learning/8.15/ml-gs-results.html" class="ulink" target="_top">Anomaly Explorer</a>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/metrics-history-chart.png" alt="History">
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="analyze-hosts.html">« Analyze and compare hosts</a>
</span>
<span class="next">
<a href="configure-settings.html">Configure settings »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
