<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="description" content="Deploy the Elastic Serverless Forwarder using Kibana and the AWS Serverless Application Repository (SAR).">
<meta name="keywords" content="serverless, AWS, SAR">
<title>Deploy Elastic Serverless Forwarder | Observability Guide [8.7] | Elastic</title>
<meta class="elastic" name="content" content="Deploy Elastic Serverless Forwarder | Observability Guide [8.7]">

<link rel="home" href="index.html" title="Observability Guide [8.7]"/>
<link rel="up" href="aws-elastic-serverless-forwarder.html" title="Elastic Serverless Forwarder for AWS"/>
<link rel="prev" href="aws-elastic-serverless-forwarder.html" title="Elastic Serverless Forwarder for AWS"/>
<link rel="next" href="aws-elastic-serverless-forwarder-configuration.html" title="Configuration options for Elastic Serverless Forwarder"/>
<meta class="elastic" name="product_version" content="8.7"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.7"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.7"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Observability Guide [8.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="add-observability-data.html">Send data to Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="aws-elastic-serverless-forwarder.html">Elastic Serverless Forwarder for AWS</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="aws-elastic-serverless-forwarder.html">« Elastic Serverless Forwarder for AWS</a>
</span>
<span class="next">
<a href="aws-elastic-serverless-forwarder-configuration.html">Configuration options for Elastic Serverless Forwarder »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="aws-deploy-elastic-serverless-forwarder"></a>Deploy Elastic Serverless Forwarder<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h3>
</div></div></div>

<p>To deploy Elastic Serverless Forwarder, you have to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-deploy-kibana" title="Install AWS integration assets in Kibana">Install AWS integration assets in Kibana</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">Create and upload <code class="literal">config.yaml</code> to S3 bucket</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-define-deploy-parameters" title="Define deployment parameters">Define deployment parameters</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-deploy-sar" title="Deploy Elastic Serverless Forwarder from SAR">Deploy Elastic Serverless Forwarder from SAR</a>
</li>
</ul>
</div>
<h6><a id="aws-serverless-forwarder-deploy-prereq"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h6>
<p>This documentation assumes you have some familiarity with AWS services and you have correctly created and configured the necessary AWS objects. For example, if you want to use an Amazon S3 (via SQS event notifications) input then you must ensure that you have enabled AWS VPC flow logs to be sent to that bucket, and created an SQS queue to receive those logs. For more information, refer to the relevant <a href="https://docs.aws.amazon.com/" class="ulink" target="_top">AWS docs</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This page describes the basic steps required to deploy Elastic Serverless
Forwarder for AWS— for additional information on configuration topics such as permissions and automatic routing, and parsing and enriching data, see <a class="xref" href="aws-elastic-serverless-forwarder-configuration.html" title="Configuration options for Elastic Serverless Forwarder">Configuration options</a>.</p>
</div>
</div>
<h5><a id="aws-serverless-forwarder-deploy-direct-note"></a>Deploying directly without SAR<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
<p>If the customization options available when deploying via Serverless Application Repository (SAR) are not sufficient, from version <code class="literal">1.6.0</code> and above you can <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-direct-deploy" title="Deploy Elastic Serverless Forwarder directly">deploy the Elastic Serverless Forwarder directly</a> to your AWS Account without using SAR. This enables you to customize the event source settings for the inputs (i.e. triggers) one-by-one.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="aws-serverless-forwarder-deploy-kibana"></a>Install AWS integration assets in Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to <span class="strong strong"><strong>Integrations</strong></span> in Kibana and search for AWS (or select the <span class="strong strong"><strong>AWS</strong></span>
category to filter the list).
</li>
<li class="listitem">
Click the AWS integration, select <span class="strong strong"><strong>Settings</strong></span> and click
<span class="strong strong"><strong>Install AWS assets</strong></span> and confirm to install all the AWS integration assets.
</li>
</ol>
</div>
<div class="imageblock screenshot">
<div class="content">
<img src="images/aws-serverless-forwarder-install-assets.png" alt="Find and install AWS integration assets in Kibana">
</div>
</div>
<p>Adding integrations from Kibana provides appropriate pre-built dashboards,
ingest node configurations, and other assets that help you get the most out of
the data you ingest. The integrations use <a href="/guide/en/elasticsearch/reference/current/data-streams.html" class="ulink" target="_top">data streams</a>
with specific <a href="/blog/an-introduction-to-the-elastic-data-stream-naming-scheme" class="ulink" target="_top">naming conventions</a>
that provide you with more granular controls and flexibility on managing data ingestion.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend using integration assets to get started but the forwarder supports writing to any index, alias, or custom data stream. This enables existing Elasticsearch users to re-use index templates, ingest pipelines, or dashboards that are already created and connected to existing processes or systems. If you already have an existing index or data stream you intend to send data to, then you can skip this deployment step.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="sample-s3-config-file"></a>Create and upload <code class="literal">config.yaml</code> to S3 bucket<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h4>
</div></div></div>
<p>Elastic Serverless Forwarder requires a <code class="literal">config.yaml</code> file to be uploaded to an S3 bucket and referenced by the <code class="literal">S3_CONFIG_FILE</code> environment variable.</p>
<p>Save the following YAML content as <code class="literal">config.yaml</code> and edit as required before uploading to an S3 bucket. You should remove any inputs or arguments you are not using, and ensure you have entered the correct URLs and credentials as per the inline comments.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: "s3-sqs"
    id: "arn:aws:sqs:%REGION%:%ACCOUNT%:%QUEUENAME%"
    outputs:
      - type: "elasticsearch"
        args:
          # either elasticsearch_url or cloud_id, elasticsearch_url takes precedence if both are included
          elasticsearch_url: "http(s)://domain.tld:port"
          cloud_id: "cloud_id:bG9jYWxob3N0OjkyMDAkMA=="
          # either api_key or username/password, username/password takes precedence if both are included
          api_key: "YXBpX2tleV9pZDphcGlfa2V5X3NlY3JldAo="
          username: "username"
          password: "password"
          es_datastream_name: "logs-generic-default"
          batch_max_actions: 500 # optional: default value is 500
          batch_max_bytes: 10485760 # optional: default value is 10485760
      - type: "logstash"
        args:
          logstash_url: "http(s)://host:port"
          username: "username" #optional
          password: "password" #optional
          max_batch_size: 500 #optional
          compression_level: 1 #optional
          ssl_assert_fingerprint: "22:F7:FB:84:1D:43:3E:E7:BB:F9:72:F3:D8:97:AD:7C:86:E3:08:42" #optional
  - type: "sqs"
    id: "arn:aws:sqs:%REGION%:%ACCOUNT%:%QUEUENAME%"
    outputs:
      - type: "elasticsearch"
        args:
          # either elasticsearch_url or cloud_id, elasticsearch_url takes precedence if both are included
          elasticsearch_url: "http(s)://domain.tld:port"
          cloud_id: "cloud_id:bG9jYWxob3N0OjkyMDAkMA=="
          # either api_key or username/password, username/password takes precedence if both are included
          api_key: "YXBpX2tleV9pZDphcGlfa2V5X3NlY3JldAo="
          username: "username"
          password: "password"
          es_datastream_name: "logs-generic-default"
          batch_max_actions: 500 # optional: default value is 500
          batch_max_bytes: 10485760 # optional: default value is 10485760
      - type: "logstash"
        args:
          logstash_url: "http(s)://host:port"
          username: "username" #optional
          password: "password" #optional
          max_batch_size: 500 #optional
          compression_level: 1 #optional
          ssl_assert_fingerprint: "22:F7:FB:84:1D:43:3E:E7:BB:F9:72:F3:D8:97:AD:7C:86:E3:08:42" #optional
  - type: "kinesis-data-stream"
    id: "arn:aws:kinesis:%REGION%:%ACCOUNT%:stream/%STREAMNAME%"
    outputs:
      - type: "elasticsearch"
        args:
          # either elasticsearch_url or cloud_id, elasticsearch_url takes precedence if both are included
          elasticsearch_url: "http(s)://domain.tld:port"
          cloud_id: "cloud_id:bG9jYWxob3N0OjkyMDAkMA=="
          # either api_key or username/password, username/password takes precedence if both are included
          api_key: "YXBpX2tleV9pZDphcGlfa2V5X3NlY3JldAo="
          username: "username"
          password: "password"
          es_datastream_name: "logs-generic-default"
          batch_max_actions: 500 # optional: default value is 500
          batch_max_bytes: 10485760 # optional: default value is 10485760
      - type: "logstash"
        args:
          logstash_url: "http(s)://host:port"
          username: "username" #optional
          password: "password" #optional
          max_batch_size: 500 #optional
          compression_level: 1 #optional
          ssl_assert_fingerprint: "22:F7:FB:84:1D:43:3E:E7:BB:F9:72:F3:D8:97:AD:7C:86:E3:08:42" #optional
  - type: "cloudwatch-logs"
    id: "arn:aws:logs:%AWS_REGION%:%AWS_ACCOUNT_ID%:log-group:%LOG_GROUP_NAME%:*"
    outputs:
      - type: "elasticsearch"
        args:
          # either elasticsearch_url or cloud_id, elasticsearch_url takes precedence if both are included
          elasticsearch_url: "http(s)://domain.tld:port"
          cloud_id: "cloud_id:bG9jYWxob3N0OjkyMDAkMA=="
          # either api_key or username/password, username/password takes precedence if both are included
          api_key: "YXBpX2tleV9pZDphcGlfa2V5X3NlY3JldAo="
          username: "username"
          password: "password"
          es_datastream_name: "logs-generic-default"
          batch_max_actions: 500 # optional: default value is 500
          batch_max_bytes: 10485760 # optional: default value is 10485760
      - type: "logstash"
        args:
          logstash_url: "http(s)://host:port"
          username: "username" #optional
          password: "password" #optional
          max_batch_size: 500 #optional
          compression_level: 1 #optional
          ssl_assert_fingerprint: "22:F7:FB:84:1D:43:3E:E7:BB:F9:72:F3:D8:97:AD:7C:86:E3:08:42" #optional
  - type: "cloudwatch-logs"
    id: "arn:aws:logs:%AWS_REGION%:%AWS_ACCOUNT_ID%:log-group:%LOG_GROUP_NAME%:log-stream:%LOG_STREAM_NAME%"
    outputs:
      - type: "elasticsearch"
        args:
          # either elasticsearch_url or cloud_id, elasticsearch_url takes precedence if both are included
          elasticsearch_url: "http(s)://domain.tld:port"
          cloud_id: "cloud_id:bG9jYWxob3N0OjkyMDAkMA=="
          # either api_key or username/password, username/password takes precedence if both are included
          api_key: "YXBpX2tleV9pZDphcGlfa2V5X3NlY3JldAo="
          username: "username"
          password: "password"
          es_datastream_name: "logs-generic-default"
          batch_max_actions: 500 # optional: default value is 500
          batch_max_bytes: 10485760 # optional: default value is 10485760
      - type: "logstash"
        args:
          logstash_url: "http(s)://host:port"
          username: "username" #optional
          password: "password" #optional
          max_batch_size: 500 #optional
          compression_level: 1 #optional
          ssl_assert_fingerprint: "22:F7:FB:84:1D:43:3E:E7:BB:F9:72:F3:D8:97:AD:7C:86:E3:08:42" #optional</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="s3-config-file-fields"></a>Fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<p><code class="literal">inputs.[]</code>:</p>
<p>A list of inputs (i.e. triggers) for the Elastic Serverless Forwarder Lambda function.</p>
<p><code class="literal">inputs.[].type</code>:</p>
<p>The type of trigger input (<code class="literal">cloudwatch-logs</code>, <code class="literal">kinesis-data-stream</code>, <code class="literal">sqs</code> and <code class="literal">s3-sqs</code> are currently supported).</p>
<p><code class="literal">inputs.[].id</code>:</p>
<p>The ARN of the trigger input according to the type. Multiple input entries can have different unique ids with the same type.
Inputs of type <code class="literal">cloudwatch-logs</code> accept both CloudWatch Logs Log Group and CloudWatch Logs Log Stream ARNs.</p>
<p><code class="literal">inputs.[].outputs</code>:</p>
<p>A list of outputs (i.e. forwarding targets) for the Elastic Serverless Forwarder Lambda function. You can have multiple outputs for an input, but only one output can be defined per type.</p>
<p><code class="literal">inputs.[].outputs.[].type</code>:</p>
<p>The type of the forwarding target output. Currently only the following outputs are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">elasticsearch</code>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <code class="literal">logstash</code>
</li>
</ul>
</div>
<p>If Logstash is chosen as an output, Elastic Serverless Forwarder expects the <a href="/guide/en/logstash/8.7/plugins-inputs-elastic_serverless_forwarder.html" class="ulink" target="_top"><code class="literal">elastic_serverless_forwarder</code></a> Logstash input to be installed, enabled, and properly configured. For more information about installing Logstash plugins, refer to the <a href="/guide/en/logstash/8.7/working-with-plugins.html#installing-plugins" class="ulink" target="_top">Logstash documentation</a>.</p>
<p><code class="literal">inputs.[].outputs.[].args</code>:
Custom init arguments for the specified forwarding target output.</p>
<p>For <code class="literal">elasticsearch</code> the following arguments are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">args.elasticsearch_url</code>: URL of elasticsearch endpoint in the format <code class="literal">http(s)://domain.tld:port</code>. Mandatory when <code class="literal">args.cloud_id</code> is not provided. Will take precedence over <code class="literal">args.cloud_id</code> if both are defined.
</li>
<li class="listitem">
<code class="literal">args.cloud_id</code>: Cloud ID of elasticsearch endpoint. Mandatory when <code class="literal">args.elasticsearch_url</code> is not provided. Will be ignored if <code class="literal">args.elasticsearch_url</code> is defined.
</li>
<li class="listitem">
<code class="literal">args.username</code>: Username of the elasticsearch instance to connect to. Mandatory when <code class="literal">args.api_key</code> is not provided. Will take precedence over <code class="literal">args.api_key</code> if both are defined.
</li>
<li class="listitem">
<code class="literal">args.password</code> Password of the elasticsearch instance to connect to. Mandatory when <code class="literal">args.api_key</code> is not provided. Will take precedence over <code class="literal">args.api_key</code> if both are defined.
</li>
<li class="listitem">
<code class="literal">args.api_key</code>:  API key of elasticsearch endpoint in the format <code class="literal">base64encode(api_key_id:api_key_secret)</code>. Mandatory when <code class="literal">args.username</code>  and <code class="literal">args.password</code> are not provided. Will be ignored if <code class="literal">args.username</code>/<code class="literal">args.password</code> are defined.
</li>
<li class="listitem">
<code class="literal">args.es_datastream_name</code>: Name of data stream or index where logs should be forwarded to. Lambda supports automatic routing of various AWS service logs to the corresponding data streams for further processing and storage in the Elasticsearch cluster. It supports automatic routing of <code class="literal">aws.cloudtrail</code>, <code class="literal">aws.cloudwatch_logs</code>, <code class="literal">aws.elb_logs</code>, <code class="literal">aws.firewall_logs</code>, <code class="literal">aws.vpcflow</code>, and <code class="literal">aws.waf</code> logs. For other log types, if using data streams, you can optionally set its value in the configuration file according to the naming convention for data streams and available integrations. If the <code class="literal">es_datastream_name</code> is not specified and it cannot be matched with any of the above AWS services, then the value will be set to <code class="literal">logs-generic-default</code>. In versions <span class="strong strong"><strong>v0.29.1</strong></span> and below, this configuration parameter was named <code class="literal">es_index_or_datastream_name</code>. Rename the configuration parameter to <code class="literal">es_datastream_name</code> in your <code class="literal">config.yaml</code> file on the S3 bucket to continue using it in the future version. The older name <code class="literal">es_index_or_datastream_name</code> is deprecated as of version <span class="strong strong"><strong>v0.30.0</strong></span>. The related backward compatibility code is removed from version <span class="strong strong"><strong>v1.0.0</strong></span>.
</li>
<li class="listitem">
<code class="literal">args.batch_max_actions</code>: (Optional) Maximum number of actions to send in a single bulk request. Default value: 500.
</li>
<li class="listitem">
<code class="literal">args.batch_max_bytes</code>: (Optional) Maximum size in bytes to send in a single bulk request. Default value: 10485760 (10MB).
</li>
<li class="listitem">
<code class="literal">args.ssl_assert_fingerprint</code>: (Optional) SSL fingerprint for self-signed SSL certificate on HTTPS transport.
</li>
</ul>
</div>
<p>For <code class="literal">logstash</code> the following arguments are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">args.logstash_url</code>: URL of Logstash endpoint in the format <code class="literal">http(s)://host:port</code>
</li>
<li class="listitem">
<code class="literal">args.username</code>: (Optional) Username of the Logstash instance to connect to. Mandatory if HTTP Basic authentication is enabled in Logstash.
</li>
<li class="listitem">
<code class="literal">args.password</code>: (Optional) Password of the Logstash instance to connect to. Mandatory if HTTP Basic authentication is enabled in Logstash.
</li>
<li class="listitem">
<code class="literal">args.max_batch_size</code>: (Optional) Maximum number of events to send in a single HTTP(s) request. Default value: 500
</li>
<li class="listitem">
<code class="literal">args.compression_level</code>: (Optional) The GZIP compression level for HTTP(s) requests towards Logstash. It can be any integer value between 1 (minimum compression, best performance, highest amount of bytes sent) and 9 (maximum compression, worst performance, lowest amount of bytes sent). Default value: 1
</li>
<li class="listitem">
<code class="literal">args.ssl_assert_fingerprint</code>: (Optional) SSL fingerprint for self-signed SSL certificate on HTTPS transport.
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="aws-serverless-forwarder-define-deploy-parameters"></a>Define deployment parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h4>
</div></div></div>
<p>Whichever SAR deployment method you choose, you must define the following parameters correctly for your setup. This section explains the types of parameters and provides guidance on how to set them to match your deployment(s).</p>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_general_configuration"></a>General configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<p>These parameters define the general configuration and behaviour for the forwarder.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ElasticServerlessForwarderS3ConfigFile</code>: Set this value to the location of your <code class="literal">config.yaml</code> in S3 URL format: <code class="literal">s3://bucket-name/config-file-name</code>. This will populate the <code class="literal">S3_CONFIG_FILE</code> environment variable for the forwarder.
</li>
<li class="listitem">
<code class="literal">ElasticServerlessForwarderSSMSecrets</code>: Add a comma delimited list of AWS SSM Secrets ARNs used in the <code class="literal">config.yml</code> (if any).
</li>
<li class="listitem">
<code class="literal">ElasticServerlessForwarderKMSKeys</code>: Add a comma delimited list of AWS KMS Keys ARNs to be used for decrypting AWS SSM Secrets, Kinesis Data Streams, SQS queue, or S3 buckets (if any).
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Make sure you include all the KMS keys used to encrypt the data. For example, S3 buckets are often encrypted, so the Lambda function needs access to that key to get the object.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_inputs"></a>Inputs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<p>These parameters define your specific <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs" title="Inputs">Inputs</a> or <em>event triggers</em>.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ElasticServerlessForwarderSQSEvents</code>: Add a comma delimited list of Direct SQS queue ARNs to set as event triggers for the forwarder (if any).
</li>
<li class="listitem">
<code class="literal">ElasticServerlessForwarderS3SQSEvents</code>: Add a comma delimited list of S3 SQS Event Notifications ARNs to set as event triggers for the forwarder (if any).
</li>
<li class="listitem">
<code class="literal">ElasticServerlessForwarderKinesisEvents</code>: Add a comma delimited list of Kinesis Data Stream ARNs to set as event triggers for the forwarder (if any).
</li>
<li class="listitem">
<code class="literal">ElasticServerlessForwarderCloudWatchLogsEvents</code>: Add a comma delimited list of Cloudwatch Logs log group ARNs to set subscription filters on the forwarder (if any).
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Make sure you reference the ARNs specified in your <code class="literal">config.yaml</code>, and leave any settings for unused inputs blank.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_s3_bucket_permissions"></a>S3 Bucket permissions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<p>These parameters define the permissions required in order to access the associated S3 Buckets.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ElasticServerlessForwarderS3Buckets</code>: Add a comma delimited list of S3 bucket ARNs that are sources for the S3 SQS Event Notifications (if any).
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_network"></a>Network<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<p>These parameters define the network settings for your environment.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ElasticServerlessForwarderSecurityGroups</code>: Add a comma delimited list of security group IDs to attach to the forwarder. Along with <code class="literal">ElasticServerlessForwarderSubnets</code>, these settings will define the AWS VPC the forwarder will belong to. Leave blank if you don&#8217;t want the forwarder to belong to any specific AWS VPC.
</li>
<li class="listitem">
<code class="literal">ElasticServerlessForwarderSubnets</code>: Add a comma delimited list of subnet IDs for to the forwarder. Along with <code class="literal">ElasticServerlessForwarderSecurityGroups</code>, these settings will define the AWS VPC the forwarder will belong to. Leave blank if you don&#8217;t want the forwarder to belong to any specific AWS VPC.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are setting up an an AWS VPC for the forwarder, review the <a class="xref" href="aws-serverless-troubleshooting.html#aws-serverless-troubleshooting-vpc-prerequisites" title="Prerequisites when attached to a VPC">VPC prerequisites</a>.</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="aws-serverless-forwarder-deploy-sar"></a>Deploy Elastic Serverless Forwarder from SAR<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h4>
</div></div></div>
<p>There are several deployment methods available via the AWS Serverless Application Repository (SAR):</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-deploy-console" title="Deploy using AWS Console">Deploy using AWS Console</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-deploy-cloudformation" title="Deploy using Cloudformation">Deploy using Cloudformation</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-deploy-terraform" title="Deploy using Terraform">Deploy using Terraform</a>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To deploy the forwarder directly without using SAR, refer to <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-direct-deploy" title="Deploy Elastic Serverless Forwarder directly">Deploy Elastic Serverless Forwarder directly</a></p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="aws-serverless-forwarder-deploy-console"></a>Deploy using AWS Console<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to AWS console and open <span class="strong strong"><strong>Lambda</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Applications</strong></span> and then <span class="strong strong"><strong>Create application</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Serverless application</strong></span> and search for <span class="strong strong"><strong>elastic-serverless-forwarder</strong></span>.
</li>
<li class="listitem">
<p>Select <span class="strong strong"><strong>elastic-serverless-forwarder</strong></span> from the search results (ignoring any application beginning <span class="strong strong"><strong>helper-</strong></span>).</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/aws-serverless-forwarder-create-function.png" alt="Create Elastic Serverless Forwarder Lambda function within SAR">
</div>
</div>
</li>
<li class="listitem">
Complete the <span class="strong strong"><strong>Application settings</strong></span> according to <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-define-deploy-parameters" title="Define deployment parameters">Define deployment parameters</a>
</li>
<li class="listitem">
After your settings have been added, click <span class="strong strong"><strong>Deploy</strong></span>.
</li>
<li class="listitem">
On the Applications page for <span class="strong strong"><strong>serverlessrepo-elastic-serverless-forwarder</strong></span>, click <span class="strong strong"><strong>Deployments</strong></span>.
</li>
<li class="listitem">
Refresh the <span class="strong strong"><strong>Deployment history</strong></span> until you see the <code class="literal">Create complete</code> status update. It should take around 5 minutes to deploy &mdash; if the deployment fails for any reason, the create events will be rolled back and you will be able to see an explanation for which event failed.
</li>
<li class="listitem">
<p>(Optional) To enable Elastic APM instrumentation for your new deployment:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Go to <span class="strong strong"><strong>Lambda &gt; Functions</strong></span> within AWS console, and find and select the function with <span class="strong strong"><strong>serverlessrepo-</strong></span>.
</li>
<li class="listitem">
Go to <span class="strong strong"><strong>Configuration</strong></span> tab and select <span class="strong strong"><strong>Environment Variables</strong></span>
</li>
<li class="listitem">
<p>Add the following environment variables:</p>
<pre class="literallayout">| Key                       | Value  |
|---------------------------|--------|
|`ELASTIC_APM_ACTIVE`       | `true` |
|`ELASTIC_APM_SECRET_TOKEN` | token  |
|`ELASTIC_APM_SERVER_URL`	  | url    |</pre>

</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you have already successfully deployed the forwarder but want to update the application (for example, if a new version of the Lambda function is released), you should go through this deploy step again and use the same <span class="strong strong"><strong>Application name</strong></span>. This will ensure the function is updated rather than duplicated or created anew.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="aws-serverless-forwarder-deploy-cloudformation"></a>Deploy using Cloudformation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Use the following code to get the semantic version of the latest application:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">aws serverlessrepo list-application-versions --application-id arn:aws:serverlessrepo:eu-central-1:267093732750:applications/elastic-serverless-forwarder</pre>
</div>
</li>
<li class="listitem">
<p>Save the following YAML content as <code class="literal">sar-application.yaml</code> and fill in the correct parameters according to <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-define-deploy-parameters" title="Define deployment parameters">Define deployment parameters</a>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">    Transform: AWS::Serverless-2016-10-31
    Resources:
      SarCloudformationDeployment:
        Type: AWS::Serverless::Application
        Properties:
          Location:
            ApplicationId: 'arn:aws:serverlessrepo:eu-central-1:267093732750:applications/elastic-serverless-forwarder'
            SemanticVersion: '%SEMANTICVERSION%'  ## SET TO CORRECT SEMANTIC VERSION (MUST BE GREATER THAN 1.6.0)
          Parameters:
            ElasticServerlessForwarderS3ConfigFile: ""
            ElasticServerlessForwarderSSMSecrets: ""
            ElasticServerlessForwarderKMSKeys: ""
            ElasticServerlessForwarderSQSEvents: ""
            ElasticServerlessForwarderS3SQSEvents: ""
            ElasticServerlessForwarderKinesisEvents: ""
            ElasticServerlessForwarderCloudWatchLogsEvents: ""
            ElasticServerlessForwarderS3Buckets: ""
            ElasticServerlessForwarderSecurityGroups: ""
            ElasticServerlessForwarderSubnets: ""</pre>
</div>
</li>
<li class="listitem">
<p>Deploy the Lambda function from SAR by running the following command:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">    aws cloudformation deploy --template-file sar-application.yaml --stack-name esf-cloudformation-deployment --capabilities CAPABILITY_IAM CAPABILITY_AUTO_EXPAND</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Starting from <span class="strong strong"><strong>v1.4.0</strong></span>, if you want to update the Events settings for the forwarder, you do not need to manually delete existing settings before applying new settings.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="aws-serverless-forwarder-deploy-terraform"></a>Deploy using Terraform<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Save the following yaml content as <code class="literal">sar-application.tf</code> and fill in the correct parameters according to <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-define-deploy-parameters" title="Define deployment parameters">Define deployment parameters</a>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">  provider "aws" {
    region = ""  ## FILL WITH THE AWS REGION WHERE YOU WANT TO DEPLOY THE ELASTIC SERVERLESS FORWARDER
  }
  data "aws_serverlessapplicationrepository_application" "esf_sar" {
    application_id = "arn:aws:serverlessrepo:eu-central-1:267093732750:applications/elastic-serverless-forwarder"
  }
  resource "aws_serverlessapplicationrepository_cloudformation_stack" "esf_cf_stak" {
    name             = "terraform-elastic-serverless-forwarder"
    application_id   = data.aws_serverlessapplicationrepository_application.esf_sar.application_id
    semantic_version = data.aws_serverlessapplicationrepository_application.esf_sar.semantic_version
    capabilities     = data.aws_serverlessapplicationrepository_application.esf_sar.required_capabilities
  parameters = {
      ElasticServerlessForwarderS3ConfigFile = ""
      ElasticServerlessForwarderSSMSecrets = ""
      ElasticServerlessForwarderKMSKeys = ""
      ElasticServerlessForwarderSQSEvents = ""
      ElasticServerlessForwarderS3SQSEvents = ""
      ElasticServerlessForwarderKinesisEvents = ""
      ElasticServerlessForwarderCloudWatchLogsEvents = ""
      ElasticServerlessForwarderS3Buckets = ""
      ElasticServerlessForwarderSecurityGroups = ""
      ElasticServerlessForwarderSubnets = ""
    }
  }</pre>
</div>
</li>
<li class="listitem">
<p>Deploy the function from SAR by running the following commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">  terrafrom init
  terrafrom apply</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>From <span class="strong strong"><strong>v1.4.0</strong></span> and above, if you want to update the Events settings for the deployment, it is no longer required to manually delete existing settings before applying the new settings.</p>
<p>Due to a <a href="https://github.com/hashicorp/terraform-provider-aws/issues/24771" class="ulink" target="_top">Terraform bug</a> related to <code class="literal">aws_serverlessapplicationrepository_application</code>, if you want to delete existing Event parameters you have to set the related <code class="literal">aws_serverlessapplicationrepository_cloudformation_stack.parameters</code> to a blank space value (<code class="literal">" "</code>) instead of an empty string (<code class="literal">""</code>).</p>
</div>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="aws-serverless-forwarder-direct-deploy"></a>Deploy Elastic Serverless Forwarder directly<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h4>
</div></div></div>
<p>For more customisation options during deployment, from version <code class="literal">1.6.0</code> and above you can deploy the Elastic Serverless Forwarder directly to your AWS Account without using SAR. This enables you to customize the event source settings for the inputs (i.e. triggers) one-by-one.</p>
<p>To deploy the forwarder directly, you have to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-deploy-kibana" title="Install AWS integration assets in Kibana">Install AWS integration assets in Kibana</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">Create and upload <code class="literal">config.yaml</code> to S3 bucket</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-direct-publish-config-file" title="Create publish-config.yaml for the publishing script">Create <code class="literal">publish-config.yaml</code> for the publishing script</a>
</li>
<li class="listitem">
<a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-run-publish-script" title="Run the publishing script">Run the publishing script</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="sample-direct-publish-config-file"></a>Create <code class="literal">publish-config.yaml</code> for the publishing script<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<p>To deploy the forwarder directly, you need to define a <code class="literal">publish-config.yaml</code> file and pass this as an argument in the <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#aws-serverless-forwarder-run-publish-script" title="Run the publishing script">publishing script</a>.</p>
<p>Save the following YAML content as <code class="literal">publish-config.yaml</code> and edit as required before running the publishing script. You should remove any inputs or arguments you are not using.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">kinesis-data-stream:
    - arn: "arn:aws:kinesis:%REGION%:%ACCOUNT%:stream/%STREAMNAME%"
      batch_size: 10
      batching_window_in_second: 0
      starting_position: TRIM_HORIZON
      starting_position_timestamp: 0
      parallelization_factor: 1
sqs:
    - arn: "arn:aws:sqs:%REGION%:%ACCOUNT%:%QUEUENAME%"
      batch_size: 10
      batching_window_in_second: 0
s3-sqs:
    - arn: "arn:aws:sqs:%REGION%:%ACCOUNT%:%QUEUENAME%"
      batch_size: 10
      batching_window_in_second: 0
cloudwatch-logs:
    - arn: "arn:aws:logs:%AWS_REGION%:%AWS_ACCOUNT_ID%:log-group:%LOG_GROUP_NAME%:*"
    - arn: "arn:aws:logs:%AWS_REGION%:%AWS_ACCOUNT_ID%:log-group:%LOG_GROUP_NAME%:log-stream:%LOG_STREAM_NAME%"
ssm-secrets:
  - "arn:aws:secretsmanager:%AWS_REGION%:%AWS_ACCOUNT_ID%:secret:%SECRET_NAME%"
kms-keys:
    - "arn:aws:kms:%AWS_REGION%:%AWS_ACCOUNT_ID%:key/%KMS_KEY_UUID%"
s3-buckets:
    - "arn:aws:s3:::%BUCKET_NAME%"
subnets:
    - "%SUBNET_ID%"
security-groups:
    - "%SECURITY_ID%"
s3-config-file: "s3://%S3_CONFIG_BUCKET_NAME%/%S3_CONFIG_OBJECT_KEY%"
continuing-queue:
    batch_size: 10
    batching_window_in_second: 0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="direct-publish-config-file-fields"></a>Fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">kinesis-data-stream.[]</code></p></td>
<td align="left" valign="top"><p>List of <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a> (i.e. triggers) for the forwarder, matching those defined in your <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">Create and upload <code class="literal">config.yaml</code> to S3 bucket</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">kinesis-data-stream.[].arn</code></p></td>
<td align="left" valign="top"><p>ARN of the AWS Kinesis Data Stream.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">kinesis-data-stream.[].batch_size</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">10</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">GetRecords.IteratorAgeMilliseconds</code> and <code class="literal">IncomingRecords</code> Kinesis CloudWatch metrics for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of records the forwarder will process in a single execution for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">kinesis-data-stream.[].batching_window_in_second</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">0</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">GetRecords.IteratorAgeMilliseconds</code> and <code class="literal">IncomingRecords</code> Kinesis CloudWatch metrics for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of records the forwarder will process in a single execution for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">kinesis-data-stream.[].starting_position</code></p></td>
<td align="left" valign="top"><p>Change this value from the default (<code class="literal">TRIM_HORIZON</code>) if you want to change the starting position of the records processed by the forwarder for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">kinesis-data-stream.[].starting_position_timestamp</code></p></td>
<td align="left" valign="top"><p>Set this value to the time from which to start reading (in Unix time seconds) if you set <code class="literal">ElasticServerlessForwarderKinesisStartingPosition</code> to "AT_TIMESTAMP".</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">kinesis-data-stream.[].parallelization_factor</code></p></td>
<td align="left" valign="top"><p>Defines the number of forwarder functions that can run concurrently per shard (default is <code class="literal">1</code>). Increase this value if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">GetRecords.IteratorAgeMilliseconds</code> and <code class="literal">IncomingRecords</code> Kinesis CloudWatch metrics for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of records processed concurrently for <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-kinesis" title="Amazon Kinesis Data Streams">Amazon Kinesis Data Streams</a>. For more info, refer to <a href="https://docs.aws.amazon.com/lambda/latest/dg/with-kinesis.html" class="ulink" target="_top">AWS Kinesis docs</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sqs.[]</code></p></td>
<td align="left" valign="top"><p>List of <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-direct" title="Amazon SQS message payload">Amazon SQS message payload</a> (i.e. triggers) for the forwarder, matching those defined in your <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">Create and upload <code class="literal">config.yaml</code> to S3 bucket</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sqs.[].arn</code></p></td>
<td align="left" valign="top"><p>ARN of the AWS SQS queue trigger input.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sqs.[].batch_size</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">10</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">ApproximateNumberOfMessagesVisible</code> and <code class="literal">ApproximateAgeOfOldestMessage</code> SQS CloudWatch metrics for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-direct" title="Amazon SQS message payload">Amazon SQS message payload</a> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of messages the forwarder will process in a single execution for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-direct" title="Amazon SQS message payload">Amazon SQS message payload</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sqs.[].batching_window_in_second</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">0</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">ApproximateNumberOfMessagesVisible</code> and <code class="literal">ApproximateAgeOfOldestMessage</code> SQS CloudWatch metrics for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-direct" title="Amazon SQS message payload">Amazon SQS message payload</a> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of messages the forwarder will process in a single execution for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-direct" title="Amazon SQS message payload">Amazon SQS message payload</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">s3-sqs.[]</code></p></td>
<td align="left" valign="top"><p>List of <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-s3" title="Amazon S3 (via SQS event notifications)">Amazon S3 (via SQS event notifications)</a> (i.e. triggers) for the forwarder, matching those defined in your <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">Create and upload <code class="literal">config.yaml</code> to S3 bucket</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">s3-sqs.[].arn</code></p></td>
<td align="left" valign="top"><p>ARN of the AWS SQS queue receiving S3 Notifications as trigger input.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">s3-sqs.[].batch_size</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">10</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">ApproximateNumberOfMessagesVisible</code> and <code class="literal">ApproximateAgeOfOldestMessage</code> SQS CloudWatch metrics for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-s3" title="Amazon S3 (via SQS event notifications)">Amazon S3 (via SQS event notifications)</a> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of messages the forwarder will process in a single execution for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-s3" title="Amazon S3 (via SQS event notifications)">Amazon S3 (via SQS event notifications)</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">s3-sqs.[].batching_window_in_second</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">0</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">ApproximateNumberOfMessagesVisible</code> and <code class="literal">ApproximateAgeOfOldestMessage</code> SQS CloudWatch metrics for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-s3" title="Amazon S3 (via SQS event notifications)">Amazon S3 (via SQS event notifications)</a> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of messages the forwarder will process in a single execution for the <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-s3" title="Amazon S3 (via SQS event notifications)">Amazon S3 (via SQS event notifications)</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">cloudwatch-logs.[]</code></p></td>
<td align="left" valign="top"><p>List of <a class="xref" href="aws-elastic-serverless-forwarder.html#aws-serverless-forwarder-inputs-cloudwatch" title="Amazon CloudWatch Logs subscription filters">Amazon CloudWatch Logs subscription filters</a> (i.e. triggers) for the forwarder, matching those defined in your <a class="xref" href="aws-deploy-elastic-serverless-forwarder.html#sample-s3-config-file" title="Create and upload config.yaml to S3 bucket">Create and upload <code class="literal">config.yaml</code> to S3 bucket</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">cloudwatch-logs.[].arn</code></p></td>
<td align="left" valign="top"><p>ARN of the AWS CloudWatch Logs trigger input (accepts both CloudWatch Logs Log Group and CloudWatch Logs Log Stream ARNs).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ssm-secrets.[]</code></p></td>
<td align="left" valign="top"><p>List of AWS SSM Secrets ARNs used in your <code class="literal">config.yml</code> (if any).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">kms-keys.[]</code></p></td>
<td align="left" valign="top"><p>List of AWS KMS Keys ARNs to be used for decrypting AWS SSM Secrets, Kinesis Data Streams or SQS queues (if any).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">s3-buckets.[]</code></p></td>
<td align="left" valign="top"><p>List of S3 bucket ARNs that are sources for the S3 SQS Event Notifications (if any).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">subnets.[]</code></p></td>
<td align="left" valign="top"><p>A list of subnets IDs for the forwarder. Along with <code class="literal">security-groups.[]</code>, these settings will define the AWS VPC the forwarder will belong to. Leave blank if you don&#8217;t want the forwarder to belong to any specific AWS VPC.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">security-groups.[]</code></p></td>
<td align="left" valign="top"><p>List of security group IDs to attach to the forwarder. Along with <code class="literal">subnets.[]</code>, these settings will define the AWS VPC the forwarder will belong to. Leave blank if you don&#8217;t want to have the forwarder belong to any specific AWS VPC.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">s3-config-file</code></p></td>
<td align="left" valign="top"><p>Set this value to the location of your forwarder configuration file in S3 URL format: <code class="literal">s3://bucket-name/config-file-name</code>. This will populate the <code class="literal">S3_CONFIG_FILE</code> environment variable for the forwarder.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">continuing-queue.batch_size</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">10</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">ApproximateNumberOfMessagesVisible</code> and <code class="literal">ApproximateAgeOfOldestMessage</code> SQS CloudWatch metrics for the <em>Continuing queue</em> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of messages the forwarder will process in a single execution for the <em>Continuing queue</em>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">continuing-queue.batching_window_in_second</code></p></td>
<td align="left" valign="top"><p>Set this value above the default (<code class="literal">0</code>) if you experience ingestion delays in your output <span class="strong strong"><strong>and</strong></span> <code class="literal">ApproximateNumberOfMessagesVisible</code> and <code class="literal">ApproximateAgeOfOldestMessage</code> SQS CloudWatch metrics for the <em>Continuing queue</em> keep increasing <span class="strong strong"><strong>and</strong></span> the average execution time of the forwarder is below 14 minutes. This will increase the number of messages the forwarder will process in a single execution for the <em>Continuing queue</em>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="aws-serverless-forwarder-run-publish-script"></a>Run the publishing script<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h5>
</div></div></div>
<p>A bash script for publishing the Elastic Serverless Forwarder directly to your AWS account is available from the <a href="https://github.com/elastic/elastic-serverless-forwarder" class="ulink" target="_top">Elastic Serverless Forwarder repository</a>.</p>
<p>Download the <a href="https://raw.githubusercontent.com/elastic/elastic-serverless-forwarder/lambda-v1.6.0/publish_lambda.sh" class="ulink" target="_top"><code class="literal">publish_lambda.sh</code> script</a> and follow the instructions below.</p>
<div class="section">
<div class="titlepage"><div><div>
<h6 class="title"><a id="_script_arguments"></a>Script arguments<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h6>
</div></div></div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash"> $ ./publish_lambda.sh
    AWS CLI (https://aws.amazon.com/cli/), SAM (https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/install-sam-cli.html) and Python3.9 with pip3 required
    Please, before launching the tool execute "$ pip3 install ruamel.yaml"
Usage: ./publish_lambda.sh config-path lambda-name forwarder-tag bucket-name region
    Arguments:
    config-path: full path to the publish configuration
    lambda-name: name of the lambda to be published in the account
    forwarder-tag: tag of the elastic serverless forwarder to publish
    bucket-name: bucket name where to store the zip artifact for the lambda
                 (it will be created if it doesn't exists, otherwise
                  you need already to have proper access to it)
    region: region where to publish in</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h6 class="title"><a id="_prerequisites"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h6>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Python3.9 with pip3 is required to run the script
</li>
<li class="listitem">
<a href="https://aws.amazon.com/cli/" class="ulink" target="_top">AWS CLI</a>, <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/install-sam-cli.html" class="ulink" target="_top">SAM CLI</a> and the <a href="https://pypi.org/project/ruamel.yaml/" class="ulink" target="_top">ruamel.yaml package</a> must also be installed
</li>
</ul>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">$ pip3 install awscli aws-sam-cli ruamel.yaml</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h6 class="title"><a id="_running_the_script"></a>Running the script<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h6>
</div></div></div>
<p>Assuming <code class="literal">publish-config.yaml</code> in saved in the same directory you intend to run <code class="literal">publish_lambda.sh</code> from, here&#8217;s an example:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">$ ./publish_lambda.sh publish-config.yaml forwarder-lambda lambda-v1.6.0 s3-lambda-artifact-bucket-name eu-central-1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h6 class="title"><a id="_updating_to_a_new_version_via_script"></a>Updating to a new version via script<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h6>
</div></div></div>
<p>You can update the version of a published Elastic Serverless Forwarder without changing its configuration by running the publishing script again and passing a <span class="strong strong"><strong>new</strong></span> <a href="https://github.com/elastic/elastic-serverless-forwarder/tags" class="ulink" target="_top"><code class="literal">forwarder-tag</code></a>:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">$ ./publish_lambda.sh publish-config.yaml forwarder-lambda lambda-v1.7.0 s3-lambda-artifact-bucket-name eu-central-1</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The above examples show the forwarder being updated from <code class="literal">lambda-v1.6.0</code> to <code class="literal">lambda-v1.7.0</code>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h6 class="title"><a id="_changing_configuration_via_script"></a>Changing configuration via script<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h6>
</div></div></div>
<p>If you want to change the configuration of a published Elastic Serverless Forwarder without changing its version, you can update the <code class="literal">publish-config.yaml</code> and run the script again using the <span class="strong strong"><strong>same</strong></span> <code class="literal">forwarder-tag</code>:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">$ ./publish_lambda.sh publish-config.yaml forwarder-lambda lambda-v1.6.0 s3-lambda-artifact-bucket-name eu-central-1</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The above example shows an existing <code class="literal">lambda-v1.6.0</code> configuration being updated without changing version.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h6 class="title"><a id="_using_the_script_for_multiple_deployments"></a>Using the script for multiple deployments<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/aws-deploy-elastic-serverless-forwarder.asciidoc">edit</a></h6>
</div></div></div>
<p>If you want to use the publish script for deploying the forwarder with different configurations, create two different <code class="literal">publish-config.yaml</code> files with unique names and run the publishing script twice, with correct references to the <code class="literal">config-path</code> and <code class="literal">lambda-name</code>:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">$ ./publish_lambda.sh publish-config-for-first-lambda.yaml first-lambda lambda-v1.6.0 s3-lambda-artifact-bucket-name eu-central-1

$ ./publish_lambda.sh publish-config-for-second-lambda.yaml second-lambda lambda-v1.6.0 ss3-lambda-artifact-bucket-name eu-central-1</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The above example publishes two versions of the forwarder, each with different configurations i.e. <code class="literal">publish-config-for-first-lambda.yaml</code> and <code class="literal">first-lambda</code> vs. <code class="literal">publish-config-for-second-lambda.yaml</code> and <code class="literal">second-lambda</code>.</p>
</div>
</div>
</div>

</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="aws-elastic-serverless-forwarder.html">« Elastic Serverless Forwarder for AWS</a>
</span>
<span class="next">
<a href="aws-elastic-serverless-forwarder-configuration.html">Configuration options for Elastic Serverless Forwarder »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
