<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Upgrade Elastic Security | Elastic Security Solution [8.4] | Elastic</title>
<meta class="elastic" name="content" content="Upgrade Elastic Security | Elastic Security Solution [8.4]">

<link rel="home" href="index.html" title="Elastic Security Solution [8.4]"/>
<link rel="up" href="index.html" title="Elastic Security Solution [8.4]"/>
<link rel="prev" href="whats-new.html" title="What&#8217;s new in 8.4"/>
<link rel="next" href="post-upgrade-intro.html" title="Post-upgrade steps (optional)"/>
<meta class="elastic" name="product_version" content="8.4"/>
<meta class="elastic" name="product_name" content="Security"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/8.4"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="8.4"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [8.4]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="whats-new.html">« What&#8217;s new in 8.4</a>
</span>
<span class="next">
<a href="post-upgrade-intro.html">Post-upgrade steps (optional) »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="upgrade-intro"></a>Upgrade Elastic Security<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h1>
</div></div></div>
<p>We highly recommend that all Elastic Security users keep their deployments up to date with the latest available Elastic Stack version to access new features, security updates, and performance enhancements. This topic describes updates in 8.0 that require changes to your agents, existing data, user privileges, or system preferences.</p>
<p>For upgrading to the latest Elastic Stack version, we recommend using the <a href="/guide/en/kibana/8.4/upgrade-assistant.html" class="ulink" target="_top">Kibana Upgrade Assistant</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For detailed information about the 8.0 release, check out the <a class="xref" href="release-notes.html" title="Release notes">Release notes</a>.</p>
</div>
</div>
<h2><a id="upgrade-8.1.1"></a>Upgrade to 8.1.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h2>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>There is a known issue that significantly impacts UI responsiveness. Therefore, we recommend to skip upgrading to this version.</p>
</div>
</div>
<h2><a id="upgrade-reqs"></a>Upgrade to an earlier 8.x version<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h2>
<h3><a id="upgrade-agents"></a>Upgrade Elastic Agents<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<p>Upgrade your Elastic Stack and Elastic Agents to 7.17 first (refer to <a href="/guide/en/fleet/8.4/upgrade-elastic-agent.html" class="ulink" target="_top">Upgrade Fleet-managed Elastic Agents</a>). Afterwards, you can <a href="/guide/en/elastic-stack/8.4/upgrading-elastic-stack.html" class="ulink" target="_top">upgrade the Elastic Stack</a> to 8.x. Initially, Elastic Agents will be version 7.17; this is fine because Elastic Security 8.x supports the last minor release in 7.x (7.17) and any subsequent Elastic Endpoint versions in 8.x. After the Elastic Stack upgrade, you can decide whether to upgrade Elastic Agents to 8.0, which is recommended to ensure you get the latest features.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You do not need to shut down your Elastic Agents or endpoints to upgrade the Elastic Stack.</p>
</div>
</div>
<h3><a id="track-rules-upgrade"></a>Track rules that are automatically disabled when upgrading<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The following applies to customers who are upgrading from 7.17 to 8.0 only. If you are upgrading to 8.0.1 or newer, refer to the instructions below for <a class="xref" href="upgrade-intro.html#reenable-rules-upgrade" title="Re-enable disabled rules">re-enabling disabled rules</a>.</p>
</div>
</div>
<p>Upon upgrading to 8.0, rules are automatically disabled. Once the upgrade completes, you should re-enable them again to avoid gaps in rule coverage. <em>We highly recommend that you track your active rules before upgrading so you can easily find and re-enable them after upgrading to 8.0</em>.</p>
<p>Before upgrading, use the <a class="xref" href="rules-api-find.html" title="Find rules">Find rules API</a> to capture a list of enabled rules.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Use curl or another HTTP tool to run Elastic Security API commands.</p>
</div>
</div>
<p>Here is a curl command that you can run to find enabled rules:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /api/detection_engine/rules/_find?per_page=10000&amp;filter=alert.attributes.enabled:true</pre>
</div>
<div class="console_widget" data-snippet="snippets/1.console"></div>
<p>To re-enable your rules from the Rules page:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to the Rules page (<span class="strong strong"><strong>Detect &#8594; Rules</strong></span>).
</li>
<li class="listitem">
Select the rules that you want to enable.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Bulk actions &#8594; Enable</strong></span> to re-enable the rules.
</li>
</ol>
</div>
<h3><a id="reenable-rules-upgrade"></a>Re-enable disabled rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The following applies to customers who are upgrading from 7.17 to 8.0.1 and newer only. If you are upgrading to 8.0., refer to the instructions above for <a class="xref" href="upgrade-intro.html#track-rules-upgrade" title="Track rules that are automatically disabled when upgrading">tracking rules prior to upgrading to 8.0</a>.</p>
</div>
</div>
<p>Any rules that are active when you upgrade from 7.17 to 8.0.1 or newer are automatically disabled, and a tag named <code class="literal">auto_disabled_8.0</code> is added to those rules for tracking purposes. Once the upgrade is complete, you can filter rules by the newly added tag, then use bulk actions to re-enable them:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to the Rules page (<span class="strong strong"><strong>Detect &#8594; Rules</strong></span>).
</li>
<li class="listitem">
From the <span class="strong strong"><strong>Tags</strong></span> dropdown, search for <code class="literal">auto_disabled_8.0</code>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Select all <em>x</em> rules</strong></span>, or individually select the rules you want to re-enable.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Bulk actions &#8594; Enable</strong></span> to re-enable the rules.
</li>
</ol>
</div>
<p>Alternatively, you can use the <a class="xref" href="bulk-actions-rules-api.html" title="Bulk rule actions">Bulk rule actions</a> API to re-enable rules.</p>
<h3><a id="fda-upgrade"></a>Full Disk Access (FDA) approval for Elastic Endpoint<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<p>When you manually install Elastic Endpoint, you must approve a system extension, kernel extension, and enable Full Disk Access (FDA). There is a new FDA requirement in 8.0. Refer to <a class="xref" href="deploy-elastic-endpoint.html" title="Install Elastic Endpoint manually"><em>Install Elastic Endpoint manually</em></a> to review the required permissions.</p>
<h3><a id="data-views-upgrade"></a>Requirements to display Data views in the Elastic Security app<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<p>To make the <span class="strong strong"><strong>Data view</strong></span> option appear in an environment with legacy alerts, a user with elevated role privileges must visit the Elastic Security app, open a page that displays alert data (such as the Overview page), then refresh the page. The user&#8217;s role privileges must allow them to enable the detections feature in a Kibana space. Refer to <a class="xref" href="detections-permissions-section.html#enable-detections-ui" title="Enable and access detections">Enable and access detections</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If new alerts are generated in an upgraded environment without legacy alerts, refreshing any page with alert data in Elastic Security will make the <span class="strong strong"><strong>Data view</strong></span> option appear in the Elastic Security UI.</p>
</div>
</div>
<h3><a id="alert-schema-upgrade"></a>New alert schema<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<p>The system index for detection alerts has been renamed from <code class="literal">.siem-signals-&lt;space-id&gt;</code> to <code class="literal">.alerts-security.alerts-&lt;space-id&gt;</code> and is now a hidden index. Therefore, the schema used for alert documents in Elastic Security has changed. Users that access documents in the <code class="literal">.siem-signals</code> indices using the Elastic Security API must modify their API queries and scripts to operate properly on the new 8.0 alert documents. Refer to <a class="xref" href="query-alert-indices.html" title="Query alert indices">how to query alert indices</a> and review the new <a class="xref" href="alert-schema.html" title="Alert schema">Alert schema</a>.</p>
<h3><a id="preview-upgrade"></a>New privileges required to view alerts and preview rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
To view alerts, users need <code class="literal">manage</code>, <code class="literal">write</code>, <code class="literal">read</code>, and <code class="literal">view_index_metadata</code> privileges to two new indices, <code class="literal">.alerts-security.alerts</code> and <code class="literal">.internal.alerts-security.alerts</code>. Existing users who are upgrading to 8.0 can retain their privileges to the <code class="literal">.siem-signals</code> index.
</li>
<li class="listitem">
To <a class="xref" href="rules-ui-create.html#preview-rules" title="Preview your rule (optional)">preview rules</a>, users need <code class="literal">read</code> access to the new <code class="literal">.preview.alerts-security.alerts</code> index. Refer to <a class="xref" href="detections-permissions-section.html" title="Detections prerequisites and requirements">Detections prerequisites and requirements</a> for more information.
</li>
</ul>
</div>
<h3><a id="im-rules-upgrade"></a>Updates to indictor match rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.4/docs/upgrade/upgrade-security.asciidoc">edit</a></h3>
<p>Changes to the indicator match rule&#8217;s <a class="xref" href="rules-ui-create.html#rule-ui-advanced-params" title="Configure advanced rule settings (optional)">default threat indicator path</a> might require you to update existing rules, or create new ones, after upgrading to 8.0. Be mindful of the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If an indicator match rule&#8217;s default threat indicator path was not defined before the upgrade, it will default to <code class="literal">threatintel.indicator</code> after the upgrade. This allows the rule to continue using indicator data ingested by Filebeat version 7.x. If a custom value was defined before the upgrade, the value will not change.
</li>
<li class="listitem">
If an existing indicator match rule was configured to use threat indicator indices generated from Filebeat version 7.x, updating the default threat indicator path to <code class="literal">threat.indicator</code> after you upgrade to Elastic Stack version 8.0 and Elastic Agent or Filebeat version 8.0 configures the rule to use threat indicator indices generated by those later versions.
</li>
<li class="listitem">
You must create separate rules to query threat intelligence indices created by Filebeat version 7.x and version 8.0 because each version requires a different default threat indicator path value. Review the recommendations for <a class="xref" href="query-alert-indices.html" title="Query alert indices">querying alert indices</a>.
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="whats-new.html">« What&#8217;s new in 8.4</a>
</span>
<span class="next">
<a href="post-upgrade-intro.html">Post-upgrade steps (optional) »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
