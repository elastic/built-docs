<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>ECS formatted application logs | Serverless | Elastic</title>
<meta class="elastic" name="content" content="ECS formatted application logs | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="observability-correlate-application-logs.html" title="Stream application logs"/>
<link rel="prev" href="observability-plaintext-application-logs.html" title="Plaintext application logs"/>
<link rel="next" href="observability-send-application-logs.html" title="APM agent log sending"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="observability-plaintext-application-logs.html">« Plaintext application logs</a>
</span>
<span class="next">
<a href="observability-send-application-logs.html">APM agent log sending »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-observability-serverless.html">Elastic Observability serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-log-monitoring.html">Log monitoring</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-correlate-application-logs.html">Stream application logs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>ECS formatted application logs</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="observability-ecs-application-logs"></a>ECS formatted application logs</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
</div></div></div>
<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span></p>
<p>Logs formatted in Elastic Common Schema (ECS) don&#8217;t require manual parsing, and the configuration can be reused across applications. ECS-formatted logs, when paired with an APM agent, allow you to correlate logs to easily view logs that belong to a particular trace.</p>
<p>You can format your logs in ECS format the following ways:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="observability-ecs-application-logs.html#observability-ecs-application-logs-ecs-loggers" title="ECS loggers"><span class="strong strong"><strong>ECS loggers:</strong></span></a> plugins for your logging libraries that reformat your logs into ECS format.
</li>
<li class="listitem">
<a class="xref" href="observability-ecs-application-logs.html#reformatting-logs" title="APM agent ECS reformatting"><span class="strong strong"><strong>APM agent ECS reformatting:</strong></span></a> Java, Ruby, and Python APM agents automatically reformat application logs to ECS format without a logger.
</li>
</ul>
</div>
<div class="position-relative"><h6><a id="observability-ecs-application-logs-ecs-loggers"></a>ECS loggers</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>ECS loggers reformat your application logs into ECS-compatible JSON, removing the need for manual parsing.
ECS loggers require Filebeat or Elastic Agent configured to monitor and capture application logs.
In addition, pairing ECS loggers with your framework&#8217;s APM agent allows you to correlate logs to easily view logs that belong to a particular trace.</p>
<div class="position-relative"><h7><a id="observability-ecs-application-logs-get-started"></a>Get started</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>For more information on adding an ECS logger to your application, refer to the guide for your framework:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/ecs-logging/dotnet/master/setup.html" class="ulink" target="_top">.NET</a>
</li>
<li class="listitem">
Go: <a href="/guide/en/ecs-logging/go-zap/master/setup.html" class="ulink" target="_top">zap</a>, <a href="/guide/en/ecs-logging/go-logrus/master/setup.html" class="ulink" target="_top">logrus</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/java/1.x/setup.html" class="ulink" target="_top">Java</a>
</li>
<li class="listitem">
Node.js: <a href="/guide/en/ecs-logging/nodejs/master/morgan.html" class="ulink" target="_top">morgan</a>, <a href="/guide/en/ecs-logging/nodejs/master/pino.html" class="ulink" target="_top">pino</a>, <a href="/guide/en/ecs-logging/nodejs/master/winston.html" class="ulink" target="_top">winston</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/php/master/setup.html" class="ulink" target="_top">PHP</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/python/master/installation.html" class="ulink" target="_top">Python</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/ruby/master/setup.html" class="ulink" target="_top">Ruby</a>
</li>
</ul>
</div>
<div class="position-relative"><h6><a id="reformatting-logs"></a>APM agent ECS reformatting</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>Java, Ruby, and Python APM agents can automatically reformat application logs to ECS format without an ECS logger or the need to modify your application. The APM agent also allows for log correlation so you can easily view logs that belong to a particular trace.</p>
<p>To set up log ECS reformatting:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="observability-ecs-application-logs.html#observability-ecs-application-logs-enable-log-ecs-reformatting" title="Enable log ECS reformatting">Enable APM agent reformatting</a>
</li>
<li class="listitem">
<a class="xref" href="observability-ecs-application-logs.html#observability-ecs-application-logs-ingest-logs" title="Ingest logs">Ingest logs with Filebeat or Elastic Agent.</a>
</li>
<li class="listitem">
<a class="xref" href="observability-ecs-application-logs.html#observability-ecs-application-logs-view-logs" title="View logs">View logs in Logs Explorer</a>
</li>
</ol>
</div>
<div class="position-relative"><h7><a id="observability-ecs-application-logs-enable-log-ecs-reformatting"></a>Enable log ECS reformatting</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>Log ECS reformatting is controlled by the <code class="literal">log_ecs_reformatting</code> configuration option, and is disabled by default. Refer to the guide for your framework for information on enabling:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/java/current/config-logging.html#config-log-ecs-reformatting" class="ulink" target="_top">Java</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/ruby/current/configuration.html#config-log-ecs-formatting" class="ulink" target="_top">Ruby</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/python/current/configuration.html#config-log_ecs_reformatting" class="ulink" target="_top">Python</a>
</li>
</ul>
</div>
<div class="position-relative"><h7><a id="observability-ecs-application-logs-ingest-logs"></a>Ingest logs</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>After enabling log ECS reformatting, send your application logs to your project using one of the following shipping tools:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="observability-ecs-application-logs.html#observability-ecs-application-logs-ingest-logs-with-filebeat" title="Ingest logs with Filebeat"><span class="strong strong"><strong>Filebeat:</strong></span></a> A lightweight data shipper that sends log data to your project.
</li>
<li class="listitem">
<a class="xref" href="observability-ecs-application-logs.html#observability-ecs-application-logs-ingest-logs-with-agent" title="Ingest logs with Elastic Agent"><span class="strong strong"><strong>Elastic Agent:</strong></span></a> A single agent for logs, metrics, security data, and threat prevention. With Fleet, you can centrally manage Elastic Agent policies and lifecycles directly from your project.
</li>
</ul>
</div>
<div class="position-relative"><h7><a id="observability-ecs-application-logs-ingest-logs-with-filebeat"></a>Ingest logs with Filebeat</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Use Filebeat version 8.11+ for the best experience when ingesting logs with Filebeat.</p>
</div>
</div>
<p>Follow these steps to ingest application logs with Filebeat.</p>
<div class="position-relative"><h8><a id="observability-ecs-application-logs-step-1-install-filebeat"></a>Step 1: Install Filebeat</h8><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>Install Filebeat on the server you want to monitor by running the commands that align with your system:</p>
<div class="tabs" data-tab-group="transclusion-observability-tab-widgets-filebeat-install-widget">
  <div role="tablist" aria-label="transclusion-observability-tab-widgets-filebeat-install-widget">
    <button role="tab" aria-selected="true" aria-controls="transclusion-observability-tab-widgets-filebeat-install-widget-macos-panel" id="transclusion-observability-tab-widgets-filebeat-install-widget-macos-button">
      macOS
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-install-widget-linux-panel" id="transclusion-observability-tab-widgets-filebeat-install-widget-linux-button" tabindex="-1">
      Linux
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-install-widget-windows-panel" id="transclusion-observability-tab-widgets-filebeat-install-widget-windows-button" tabindex="-1">
      Windows
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-install-widget-deb-panel" id="transclusion-observability-tab-widgets-filebeat-install-widget-deb-button" tabindex="-1">
      DEB
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-install-widget-rpm-panel" id="transclusion-observability-tab-widgets-filebeat-install-widget-rpm-button" tabindex="-1">
      RPM
    </button>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-install-widget-macos-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-install-widget-macos-button">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-9.0.0-beta1-darwin-x86_64.tar.gz
tar xzvf filebeat-9.0.0-beta1-darwin-x86_64.tar.gz</pre>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-install-widget-linux-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-install-widget-linux-button" hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-9.0.0-beta1-linux-x86_64.tar.gz
tar xzvf filebeat-9.0.0-beta1-linux-x86_64.tar.gz</pre>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-install-widget-windows-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-install-widget-windows-button" hidden="">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Download the Filebeat Windows zip file: <a href="https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-9.0.0-beta1-windows-x86_64.zip" class="ulink" target="_top">https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-9.0.0-beta1-windows-x86_64.zip</a>
</li>
<li class="listitem">
Extract the contents of the zip file into <code class="literal">C:\Program Files</code>.
</li>
<li class="listitem">
Rename the <code class="literal">filebeat-((version))-windows-x86_64</code> directory to <code class="literal">((filebeat))</code>.
</li>
<li class="listitem">
Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).
</li>
<li class="listitem">
<p>From the PowerShell prompt, run the following commands to install
Filebeat as a Windows service:</p>
<div class="pre_wrapper lang-powershell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-powershell">PS &gt; cd 'C:\Program Files{filebeat}'
PS C:\Program Files{filebeat}&gt; .\install-service-filebeat.ps1</pre>
</div>
</li>
</ol>
</div>
<p>If script execution is disabled on your system, you need to set the
execution policy for the current session to allow the script to run. For
example:
<code class="literal">PowerShell.exe -ExecutionPolicy UnRestricted -File .\install-service-filebeat.ps1</code>.</p>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-install-widget-deb-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-install-widget-deb-button" hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-9.0.0-beta1-amd64.deb
sudo dpkg -i filebeat-9.0.0-beta1-amd64.deb</pre>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-install-widget-rpm-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-install-widget-rpm-button" hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-9.0.0-beta1-x86_64.rpm
sudo rpm -vi filebeat-9.0.0-beta1-x86_64.rpm</pre>
</div>
  </div>
</div>
<div class="position-relative"><h8><a id="observability-ecs-application-logs-step-2-connect-to-your-project"></a>Step 2: Connect to your project</h8><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>Connect to your project using an API key to set up Filebeat. Set the following information in the <code class="literal">filebeat.yml</code> file:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">output.elasticsearch:
  hosts: ["your-projects-elasticsearch-endpoint"]
  api_key: "id:api_key"</pre>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Set the <code class="literal">hosts</code> to your project&#8217;s Elasticsearch endpoint. Locate your project&#8217;s endpoint by clicking the help icon (<span class="image"><img src="images/icons/help.svg" alt="Help icon"></span>) and selecting <span class="strong strong"><strong>Endpoints</strong></span>. Add the <span class="strong strong"><strong>Elasticsearch endpoint</strong></span> to your configuration.
</li>
<li class="listitem">
<p>From <span class="strong strong"><strong>Developer tools</strong></span>, run the following command to create an API key that grants <code class="literal">manage</code> permissions for the <code class="literal">cluster</code> and the <code class="literal">filebeat-*</code> indices using:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">POST /_security/api_key
{
  "name": "filebeat_host001",
  "role_descriptors": {
    "filebeat_writer": {
      "cluster": ["manage"],
      "index": [
        {
          "names": ["filebeat-*"],
          "privileges": ["manage"]
        }
      ]
    }
  }
}</pre>
</div>
<p>Refer to <a href="/guide/en/beats/filebeat/master/beats-api-keys.html" class="ulink" target="_top">Grant access using API keys</a> for more information.</p>
</li>
</ol>
</div>
<div class="position-relative"><h8><a id="observability-ecs-application-logs-step-3-configure-filebeat"></a>Step 3: Configure Filebeat</h8><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>Add the following configuration to your <code class="literal">filebeat.yaml</code> file to start collecting log data.</p>
<div class="tabs" data-tab-group="transclusion-observability-tab-widgets-filebeat-logs-widget">
  <div role="tablist" aria-label="transclusion-observability-tab-widgets-filebeat-logs-widget">
    <button role="tab" aria-selected="true" aria-controls="transclusion-observability-tab-widgets-filebeat-logs-widget-log-file-panel" id="transclusion-observability-tab-widgets-filebeat-logs-widget-log-file-button">
      Log file
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-logs-widget-kubernetes-panel" id="transclusion-observability-tab-widgets-filebeat-logs-widget-kubernetes-button" tabindex="-1">
      Kubernetes
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-logs-widget-docker-panel" id="transclusion-observability-tab-widgets-filebeat-logs-widget-docker-button" tabindex="-1">
      Docker
    </button>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-logs-widget-log-file-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-logs-widget-log-file-button">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Add the following configuration to your <code class="literal">filebeat.yaml</code> file to start collecting log data.
</li>
</ol>
</div>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: filestream   <a id="CO20-1"></a><i class="conum" data-value="1"></i>
  paths: /path/to/logs.json
  parsers:
    - ndjson:
        overwrite_keys: true   <a id="CO20-2"></a><i class="conum" data-value="2"></i>
        add_error_key: true   <a id="CO20-3"></a><i class="conum" data-value="3"></i>
        expand_keys: true   <a id="CO20-4"></a><i class="conum" data-value="4"></i>
  fields:
    service.name: your_service_name   <a id="CO20-5"></a><i class="conum" data-value="5"></i>
    service.version: your_service_version   <a id="CO20-6"></a><i class="conum" data-value="5"></i>
    service.environment: your_service_environment   <a id="CO20-7"></a><i class="conum" data-value="5"></i>

processors:   <a id="CO20-8"></a><i class="conum" data-value="6"></i>
  - add_host_metadata: ~
  - add_cloud_metadata: ~
  - add_docker_metadata: ~
  - add_kubernetes_metadata: ~</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use the filestream input to read lines from active log files.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Values from the decoded JSON object overwrite the fields that Filebeat normally adds (type, source, offset, etc.) in case of conflicts.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Filebeat adds an "error.message" and "error.type: json" key in case of JSON unmarshalling errors.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Filebeat will recursively de-dot keys in the decoded JSON, and expand them into a hierarchical object structure.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-5"><i class="conum" data-value="5"></i></a><a href="#CO20-6"></a><a href="#CO20-7"></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">service.name</code> (required), <code class="literal">service.version</code> (optional) and <code class="literal">service.environment</code> (optional) of the service you&#8217;re collecting logs from, used for <a class="xref" href="observability-correlate-application-logs.html#observability-correlate-application-logs-log-correlation" title="Log correlation">Log correlation</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO20-8"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>Processors enhance your data. See <a href="/guide/en/beats/filebeat/master/filtering-and-enhancing-data.html" class="ulink" target="_top">processors</a> to learn more.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-logs-widget-kubernetes-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-logs-widget-kubernetes-button" hidden="">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Make sure your application logs to stdout/stderr.
</li>
<li class="listitem">
Follow the <a href="/guide/en/beats/filebeat/master/running-on-kubernetes.html" class="ulink" target="_top">Run Filebeat on Kubernetes</a> guide.
</li>
<li class="listitem">
Enable <a href="/guide/en/beats/filebeat/master/configuration-autodiscover-hints.html" class="ulink" target="_top">hints-based autodiscover</a> (uncomment the corresponding section in <code class="literal">filebeat-kubernetes.yaml</code>).
</li>
<li class="listitem">
<p>Add these annotations to your pods that log using ECS-compatible JSON. This will make sure the logs are parsed appropriately.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">annotations:
co.elastic.logs/json.overwrite_keys: true   <a id="CO21-1"></a><i class="conum" data-value="1"></i>
co.elastic.logs/json.add_error_key: true   <a id="CO21-2"></a><i class="conum" data-value="2"></i>
co.elastic.logs/json.expand_keys: true   <a id="CO21-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO21-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Values from the decoded JSON object overwrite the fields that Filebeat normally adds (type, source, offset, etc.) in case of conflicts.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO21-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Filebeat adds an "error.message" and "error.type: json" key in case of JSON unmarshalling errors.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO21-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Filebeat will recursively de-dot keys in the decoded JSON, and expand them into a hierarchical object structure.</p>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-logs-widget-docker-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-logs-widget-docker-button" hidden="">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Make sure your application logs to stdout/stderr.
</li>
<li class="listitem">
Follow the <a href="/guide/en/beats/filebeat/master/running-on-docker.html" class="ulink" target="_top">Run Filebeat on Docker</a> guide.
</li>
<li class="listitem">
Enable <a href="/guide/en/beats/filebeat/master/configuration-autodiscover-hints.html" class="ulink" target="_top">hints-based autodiscover</a>.
</li>
<li class="listitem">
Add these labels to your containers that log using ECS-compatible JSON. This will make sure the logs are parsed appropriately. In <code class="literal">docker-compose.yml</code>:
</li>
</ol>
</div>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">labels:
  co.elastic.logs/json.overwrite_keys: true   <a id="CO22-1"></a><i class="conum" data-value="1"></i>
  co.elastic.logs/json.add_error_key: true   <a id="CO22-2"></a><i class="conum" data-value="2"></i>
  co.elastic.logs/json.expand_keys: true   <a id="CO22-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Values from the decoded JSON object overwrite the fields that Filebeat normally adds (type, source, offset, etc.) in case of conflicts.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Filebeat adds an "error.message" and "error.type: json" key in case of JSON unmarshalling errors.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Filebeat will recursively de-dot keys in the decoded JSON, and expand them into a hierarchical object structure.</p>
</td>
</tr>
</table>
</div>
  </div>
</div>
<div class="position-relative"><h8><a id="observability-ecs-application-logs-step-4-set-up-and-start-filebeat"></a>Step 4: Set up and start Filebeat</h8><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>From the Filebeat installation directory, set the <a href="/guide/en/elasticsearch/reference/master/index-templates.html" class="ulink" target="_top">index template</a> by running the command that aligns with your system:</p>
<div class="tabs" data-tab-group="transclusion-observability-tab-widgets-filebeat-setup-widget">
  <div role="tablist" aria-label="transclusion-observability-tab-widgets-filebeat-setup-widget">
    <button role="tab" aria-selected="true" aria-controls="transclusion-observability-tab-widgets-filebeat-setup-widget-macos-panel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-macos-button">
      macOS
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-setup-widget-linux-panel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-linux-button" tabindex="-1">
      Linux
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-setup-widget-windows-panel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-windows-button" tabindex="-1">
      Windows
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-setup-widget-deb-panel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-deb-button" tabindex="-1">
      DEB
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-setup-widget-rpm-panel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-rpm-button" tabindex="-1">
      RPM
    </button>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-macos-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-setup-widget-macos-button">
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">./filebeat setup --index-management</pre>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-linux-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-setup-widget-linux-button" hidden="">
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">./filebeat setup --index-management</pre>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-windows-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-setup-widget-windows-button" hidden="">
<div class="pre_wrapper lang-powershell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-powershell">PS &gt; .\filebeat.exe setup --index-management</pre>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-deb-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-setup-widget-deb-button" hidden="">
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">filebeat setup --index-management</pre>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-setup-widget-rpm-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-setup-widget-rpm-button" hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">filebeat setup --index-management</pre>
</div>
  </div>
</div>
<p>From the Filebeat installation directory, start filebeat by running the command that aligns with your system:</p>
<div class="tabs" data-tab-group="transclusion-observability-tab-widgets-filebeat-start-widget">
  <div role="tablist" aria-label="transclusion-observability-tab-widgets-filebeat-start-widget">
    <button role="tab" aria-selected="true" aria-controls="transclusion-observability-tab-widgets-filebeat-start-widget-macos-panel" id="transclusion-observability-tab-widgets-filebeat-start-widget-macos-button">
      macOS
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-start-widget-linux-panel" id="transclusion-observability-tab-widgets-filebeat-start-widget-linux-button" tabindex="-1">
      Linux
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-start-widget-windows-panel" id="transclusion-observability-tab-widgets-filebeat-start-widget-windows-button" tabindex="-1">
      Windows
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-start-widget-deb-panel" id="transclusion-observability-tab-widgets-filebeat-start-widget-deb-button" tabindex="-1">
      DEB
    </button>
    <button role="tab" aria-selected="false" aria-controls="transclusion-observability-tab-widgets-filebeat-start-widget-rpm-panel" id="transclusion-observability-tab-widgets-filebeat-start-widget-rpm-button" tabindex="-1">
      RPM
    </button>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-start-widget-macos-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-start-widget-macos-button">
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo chown root filebeat.yml
sudo ./filebeat -e</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You&#8217;ll be running Filebeat as root, so you need to change ownership of the configuration file and any configurations enabled in the <code class="literal">modules.d</code> directory, or run Filebeat with <code class="literal">--strict.perms=false</code> specified. Refer to <a href="/guide/en/beats/libbeat/master/config-file-permissions.html" class="ulink" target="_top">Config file ownership and permissions</a>.</p>
</div>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-start-widget-linux-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-start-widget-linux-button" hidden="">
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo chown root filebeat.yml
sudo ./filebeat -e</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You&#8217;ll be running Filebeat as root, so you need to change ownership of the configuration file and any configurations enabled in the <code class="literal">modules.d</code> directory, or run Filebeat with <code class="literal">--strict.perms=false</code> specified. Refer to <a href="/guide/en/beats/libbeat/master/config-file-permissions.html" class="ulink" target="_top">Config file ownership and permissions</a>.</p>
</div>
</div>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-start-widget-windows-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-start-widget-windows-button" hidden="">
<div class="pre_wrapper lang-powershell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-powershell">PS C:\Program Files\filebeat&gt; Start-Service filebeat</pre>
</div>
<p>By default, Windows log files are stored in <code class="literal">C:\ProgramData\filebeat\Logs</code>.</p>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-start-widget-deb-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-start-widget-deb-button" hidden="">
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo service filebeat start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use an init.d script to start Filebeat, you can&#8217;t specify command line flags (refer to <a href="/guide/en/beats/filebeat/master/command-line-options.html" class="ulink" target="_top">Command reference</a>). To specify flags, start Filebeat in the foreground.</p>
</div>
</div>
<p>Also, refer to <a href="/guide/en/beats/filebeat/master/running-with-systemd.html" class="ulink" target="_top">Filebeat and systemd</a>.</p>
  </div>
  <div tabindex="0" role="tabpanel" id="transclusion-observability-tab-widgets-filebeat-start-widget-rpm-panel" aria-labelledby="transclusion-observability-tab-widgets-filebeat-start-widget-rpm-button" hidden="">
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo service filebeat start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use an init.d script to start Filebeat, you can&#8217;t specify command line flags (refer to <a href="/guide/en/beats/filebeat/master/command-line-options.html" class="ulink" target="_top">Command reference</a>). To specify flags, start Filebeat in the foreground.</p>
</div>
</div>
<p>Also, refer to <a href="/guide/en/beats/filebeat/master/running-with-systemd.html" class="ulink" target="_top">Filebeat and systemd</a>.</p>
  </div>
</div>
<div class="position-relative"><h7><a id="observability-ecs-application-logs-ingest-logs-with-agent"></a>Ingest logs with Elastic Agent</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>Add the custom logs integration to ingest and centrally manage your logs using Elastic Agent and Fleet:</p>
<div class="position-relative"><h8><a id="observability-ecs-application-logs-step-1-add-the-custom-logs-integration-to-your-project"></a>Step 1: Add the custom logs integration to your project</h8><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>To add the custom logs integration to your project:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In your Observability project, go to <span class="strong strong"><strong>Project Settings</strong></span> → <span class="strong strong"><strong>Integrations</strong></span>.
</li>
<li class="listitem">
Type <code class="literal">custom</code> in the search bar and select <span class="strong strong"><strong>Custom Logs</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Install Elastic Agent</strong></span> at the bottom of the page, and follow the instructions for your system to install the Elastic Agent. If you&#8217;ve already installed an Elastic Agent, you&#8217;ll be taken directly to configuring your integration.
</li>
<li class="listitem">
After installing the Elastic Agent, click <span class="strong strong"><strong>Save and continue</strong></span> to configure the integration from the <span class="strong strong"><strong>Add Custom Logs integration</strong></span> page.
</li>
<li class="listitem">
Give your integration a meaningful name and description.
</li>
<li class="listitem">
Add the <span class="strong strong"><strong>Log file path</strong></span>. For example, <code class="literal">/var/log/your-logs.log</code>.
</li>
<li class="listitem">
<p>Under <span class="strong strong"><strong>Custom log file</strong></span>, click <span class="strong strong"><strong>Advanced options</strong></span>.</p>
<p class="screenshot"><span class="image"><img src="images/custom-logs-advanced-options.png" alt="Screenshot of advanced options location"></span></p>
</li>
<li class="listitem">
<p>In the <span class="strong strong"><strong>Processors</strong></span> text box, add the following YAML configuration to add processors that enhance your data. See <a href="/guide/en/beats/filebeat/master/filtering-and-enhancing-data.html" class="ulink" target="_top">processors</a> to learn more.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">processors:
  - add_host_metadata: ~
  - add_cloud_metadata: ~
  - add_docker_metadata: ~
  - add_kubernetes_metadata: ~</pre>
</div>
</li>
<li class="listitem">
<p>Under <span class="strong strong"><strong>Custom configurations</strong></span>, add the following YAML configuration to collect data.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">json:
  overwrite_keys: true  <a id="CO23-1"></a><i class="conum" data-value="1"></i>
  add_error_key: true  <a id="CO23-2"></a><i class="conum" data-value="2"></i>
  expand_keys: true  <a id="CO23-3"></a><i class="conum" data-value="3"></i>
  keys_under_root: true  <a id="CO23-4"></a><i class="conum" data-value="4"></i>
fields_under_root: true  <a id="CO23-5"></a><i class="conum" data-value="5"></i>
fields:
  service.name: your_service_name  <a id="CO23-6"></a><i class="conum" data-value="6"></i>
  service.version: your_service_version  <a id="CO23-7"></a><i class="conum" data-value="6"></i>
  service.environment: your_service_environment  <a id="CO23-8"></a><i class="conum" data-value="6"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Values from the decoded JSON object overwrite the fields that Elastic Agent normally adds (type, source, offset, etc.) in case of conflicts.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Elastic Agent adds an "error.message" and "error.type: json" key in case of JSON unmarshalling errors.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Elastic Agent will recursively de-dot keys in the decoded JSON, and expand them into a hierarchical object structure.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>By default, the decoded JSON is placed under a "json" key in the output document. When set to <code class="literal">true</code>, the keys are copied top level in the output document.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>When set to <code class="literal">true</code>, custom fields are stored as top-level fields in the output document instead of being grouped under a fields sub-dictionary.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-6"><i class="conum" data-value="6"></i></a><a href="#CO23-7"></a><a href="#CO23-8"></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">service.name</code> (required), <code class="literal">service.version</code> (optional), and <code class="literal">service.environment</code> (optional) of the service you&#8217;re collecting logs from, used for <a class="xref" href="observability-correlate-application-logs.html#observability-correlate-application-logs-log-correlation" title="Log correlation">Log correlation</a>.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
An agent policy is created that defines the data your Elastic Agent collects. If you&#8217;ve previously installed an Elastic Agent on the host you&#8217;re collecting logs from, you can select the <span class="strong strong"><strong>Existing hosts</strong></span> tab and use an existing agent policy.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save and continue</strong></span>.
</li>
</ol>
</div>
<div class="position-relative"><h6><a id="observability-ecs-application-logs-view-logs"></a>View logs</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/logging/ecs-application-logs.asciidoc">edit</a></div>
<p>Use <a class="xref" href="observability-discover-and-explore-logs.html" title="Explore logs">Logs Explorer</a> to search, filter, and visualize your logs. Refer to the <a class="xref" href="observability-filter-and-aggregate-logs.html" title="Filter and aggregate logs">filter and aggregate logs</a> documentation for more information.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="observability-plaintext-application-logs.html">« Plaintext application logs</a>
</span>
<span class="next">
<a href="observability-send-application-logs.html">APM agent log sending »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
