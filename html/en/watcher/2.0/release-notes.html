<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Release Notes | Elasticsearch Watcher [2.0] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Watcher [2.0]"/>
<link rel="up" href="index.html" title="Elasticsearch Watcher [2.0]"/>
<link rel="prev" href="troubleshooting.html" title="Troubleshooting"/>
<meta name="DC.type" content="Learn/Docs/Legacy/Watcher/Reference/2.0"/>
<meta name="DC.subject" content="Watcher"/>
<meta name="DC.identifier" content="2.0"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
From version 5.0 onward, Watcher is part of X-Pack. For more information, see 
<a href=https://www.elastic.co/guide/en/elastic-stack-overview/current/xpack-alerting.html>
    Alerting on cluster and index events</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Watcher [2.0]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="troubleshooting.html">« Troubleshooting</a>
</span>
<span class="next">
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="release-notes"></a>Release Notes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h1>
</div></div></div>
<h3><a id="version-compatibility"></a>Version Compatibility<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h3>
<p>Watcher 2.0.0 is compatible with:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Elasticsearch: 2.0.0
</li>
<li class="listitem">
License 2.0.0
</li>
<li class="listitem">
Shield 2.0.0
</li>
</ul>
</div>
<h3><a id="upgrade-instructions"></a>Upgrading Watcher<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h3>
<p>Watcher 2.0.0 is backward compatible with Watcher 1.0.x. Follow these steps to
upgrade:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Back up all of the watches you&#8217;ve defined. You can search/scan the <code class="literal">.watches</code> index and save the
returned watches aside.
</li>
<li class="listitem">
Stop Elasticsearch on all nodes in your cluster.
</li>
<li class="listitem">
<p>Uninstall the Watcher plugin from each node:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">bin/plugin remove watcher</pre>
</div>
</li>
<li class="listitem">
From here on you can simply follow the <a class="xref" href="getting-started.html" title="Getting Started">Getting Started</a> guide.
</li>
</ol>
</div>
<h3><a id="change-list"></a>Change List<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h3>
<h4><a id="_2_0_2"></a>2.0.2<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<p class="title"><strong>Bug fixes</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Fixed an issue that prevented sending of emails
</li>
</ul>
</div>
<h4><a id="_2_0_1"></a>2.0.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<p class="title"><strong>Enhancement</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Adds support for Elasticsearch 2.0.1.
</li>
</ul>
</div>
<div class="ulist itemizedlist">
<p class="title"><strong>Bug fixes</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Fixed an issue where under specific conditions Watcher would not start if there are not finished watch executions from the
previous time that watcher was running and those watch execution are unable the execute during the current start process.
</li>
</ul>
</div>
<h4><a id="_2_0_0"></a>2.0.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<p class="title"><strong>Breaking Changes</strong></p>
<ul class="itemizedlist">
<li class="listitem">
The dynamic index names support has been removed and Elasticsearch&#8217;s date math index names support should be used instead.
The only difference between Watcher&#8217;s dynamic index names support and Elasticsearch&#8217;s date math index names support is
how timezones are expressed. In Watcher this is done via node settings, in Elasticsearch the timezone is part of the
date math index names support. Only if you&#8217;re using dynamic index names with timezones in Watcher then you need to
upgrade your watches after the upgrade, otherwise your watches will work as they did before the upgrade. For example if
<code class="literal">watcher.dynamic_indices.time_zone</code> setting was set to <code class="literal">+01:00</code> and a watch has the following index name <code class="literal">&lt;logstash-{now/d}&gt;</code>
then after the upgrade you need to update this watch to use the following index name <code class="literal">&lt;logstash-{now/d{YYYY.MM.dd|+01:00}}&gt;</code>.
</li>
</ul>
</div>
<div class="ulist itemizedlist">
<p class="title"><strong>New Features</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Added new <a class="xref" href="actions.html#actions-hipchat" title="HipChat Action">HipChat Action</a>
</li>
<li class="listitem">
Added new <a class="xref" href="actions.html#actions-slack" title="Slack Action">Slack Action</a>
</li>
<li class="listitem">
Watches now have an <a class="xref" href="watch-active-state.html" title="Watch Active State">active state</a>. In addition, a new API was added to
<a class="xref" href="api-rest.html#api-rest-activate-watch" title="Activate Watch API">activate</a>/<a class="xref" href="api-rest.html#api-rest-deactivate-watch" title="Deactivate Watch API">deactivate</a> registered watches.
</li>
<li class="listitem">
Added new <a class="xref" href="condition.html#condition-array-compare" title="Array Compare Condition">array-compare</a>, that can compare an array of values in the
<a class="xref" href="scripts-templates.html#watch-execution-context" title="Watch Execution Context">Watch Execution Context Model</a> to a given value.
</li>
</ul>
</div>
<div class="ulist itemizedlist">
<p class="title"><strong>Enhancements</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Watcher continuously checks if the index templates for <code class="literal">.watches</code>, <code class="literal">.triggered_watches</code>
and <code class="literal">.watch_history-*</code> exist. Whereas before the existence of these index templates was
only checked at Watcher startup time. The absence of these index templates leads to
watcher data being indexed incorrectly, which then can cause Watcher to behave incorrectly.
</li>
<li class="listitem">
If Watcher was stopped via the stop Watcher api and after that a master election took place
then Watcher would then unexpectedly start.
</li>
<li class="listitem">
During Watcher start up only wait for the shards of the <code class="literal">.watches</code> and <code class="literal">.triggered_watches</code>
indices to be available. Before Watcher also waited for the shards of the <code class="literal">.watch_history-*</code>
indices, which wasn&#8217;t needed. This improved time it takes for Watcher to startup.
</li>
<li class="listitem">
If <code class="literal">action.auto_create_index</code> setting has been configured then Watcher will check if the setting is too restrictive.
If the <code class="literal">action.auto_create_index</code> is too restrictive then Watcher will fail during startup with a descriptive error message.
</li>
</ul>
</div>
<div class="ulist itemizedlist">
<p class="title"><strong>Bug Fixes</strong></p>
<ul class="itemizedlist">
<li class="listitem">
If Watcher was installed with Shield then the Watcher index templates couldn&#8217;t be stored and could lead
to Watcher behaving incorrectly. This was caused by Watcher not detecting correctly if Shield was installed.
</li>
<li class="listitem">
Update <code class="literal">croneval</code> command line utility to properly handle whitespaces in the elasticsearch home path.
</li>
<li class="listitem">
Fixed an issue where the scheduler may get stuck during Watcher startup. This caused no watches to ever fire.
</li>
<li class="listitem">
Fixed url encoding issue in http input and webhook output. The url params were url encoded twice.
</li>
</ul>
</div>
<h4><a id="_1_0_0"></a>1.0.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<p class="title"><strong>Enhancements</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Added execution time aware dynamic index names support to <code class="literal">index</code>
action, <code class="literal">search</code> input, and <code class="literal">search</code> transform.
</li>
<li class="listitem">
You must now explicitly specify the unit when configuring any time value. (Numeric-only
values are no longer supported.)
</li>
<li class="listitem">
Cleaned up the <a class="xref" href="api-rest.html#api-rest-get-watch" title="Get Watch API">Get Watch API</a> response.
</li>
<li class="listitem">
Cleaned up the <a class="xref" href="api-rest.html#api-rest-stats" title="Stats API">Stats API</a> response.
</li>
</ul>
</div>
<h4><a id="_1_0_0_rc1"></a>1.0.0-rc1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<p class="title"><strong>New Features</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Added <a class="xref" href="api-rest.html#api-rest-execute-inline-watch" title="Inline Watch Execution">inline watch</a> support to the Execute API
</li>
</ul>
</div>
<div class="ulist itemizedlist">
<p class="title"><strong>Enhancements</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Added execution context <a class="xref" href="scripts-templates.html#watch-execution-context" title="Watch Execution Context">variables</a> support.
</li>
<li class="listitem">
Email html body sanitization is now <a class="xref" href="email-services.html#email-html-sanitization" title="Configuring HTML Sanitization Options">configurable</a>.
</li>
<li class="listitem">
It is now possible to configure timeouts for http requests in
<a class="xref" href="input.html#http-input-attributes" title="HTTP Input Attributes">HTTP input</a> and <a class="xref" href="actions.html#webhook-action-attributes" title="Webhook Action Attributes">webhook actions</a>.
</li>
</ul>
</div>
<h4><a id="_1_0_0_beta2"></a>1.0.0-Beta2<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.0/docs/public/watcher/release-notes.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<p class="title"><strong>New Features</strong></p>
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="actions.html#actions-ack-throttle" title="Acknowledgement and Throttling">Acking and Throttling</a> are now applied at the action level rather than
the watch level.
</li>
<li class="listitem">
Added support for <a class="xref" href="actions.html#anatomy-actions-index-multi-doc-support" title="Multi-Document Support">multi-doc</a> indexing to the index
action.
</li>
<li class="listitem">
Added a queued watches metric that&#8217;s accessible via the <a class="xref" href="api-rest.html#api-rest-stats" title="Stats API">Stats API</a>.
</li>
<li class="listitem">
Added a currently-executing watches metric that&#8217;s accessible via the <a class="xref" href="api-rest.html#api-rest-stats" title="Stats API">Stats API</a>.
</li>
</ul>
</div>
<div class="ulist itemizedlist">
<p class="title"><strong>Enhancements</strong></p>
<ul class="itemizedlist">
<li class="listitem">
The <a class="xref" href="condition.html#condition-compare" title="Compare Condition">compare condition</a> result now includes the value of each field that
was referenced in the comparison.
</li>
<li class="listitem">
The <a class="xref" href="api-rest.html#api-rest-execute-watch" title="Execute Watch API">Execute API</a> now supports a default trigger event
(<span class="strong strong"><strong>breaking change</strong></span>)
</li>
<li class="listitem">
The <code class="literal">watch_record</code> document structure in the <code class="literal">.watch_history-*</code> indices has changed significantly
(<span class="strong strong"><strong>breaking change</strong></span>)
</li>
<li class="listitem">
A new internal index was introduced - <code class="literal">.triggered_watches</code>
</li>
<li class="listitem">
Added support for headers in the <a class="xref" href="actions.html#actions-webhook" title="Webhook Action">Webhook Action</a> result and the
<a class="xref" href="input.html#input-http" title="HTTP Input">HTTP Input</a> result.
</li>
<li class="listitem">
Add plain text response body support for the <a class="xref" href="input.html#input-http" title="HTTP Input">HTTP Input</a>.
</li>
</ul>
</div>
<div class="ulist itemizedlist">
<p class="title"><strong>Bug Fixes</strong></p>
<ul class="itemizedlist">
<li class="listitem">
Disallow negative time value settings for <a class="xref" href="actions.html#actions-ack-throttle" title="Acknowledgement and Throttling"><code class="literal">throttle_period</code></a>
</li>
<li class="listitem">
Added support for separate keystore and truststore in <a class="xref" href="actions.html#actions-webhook" title="Webhook Action">Webhook Action</a>
and <a class="xref" href="input.html#input-http" title="HTTP Input">HTTP Input</a>.
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="troubleshooting.html">« Troubleshooting</a>
</span>
<span class="next">
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
