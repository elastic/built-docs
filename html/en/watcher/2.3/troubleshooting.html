<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Troubleshooting | Elasticsearch Watcher [2.3] | Elastic</title>
<meta class="elastic" name="content" content="Troubleshooting | Elasticsearch Watcher [2.3]">

<link rel="home" href="index.html" title="Elasticsearch Watcher [2.3]"/>
<link rel="up" href="index.html" title="Elasticsearch Watcher [2.3]"/>
<link rel="prev" href="limitations.html" title="Limitations"/>
<link rel="next" href="release-notes.html" title="Release Notes"/>
<meta class="elastic" name="product_version" content="2.3"/>
<meta class="elastic" name="product_name" content="Watcher"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Legacy/Watcher/Reference/2.3"/>
<meta name="DC.subject" content="Watcher"/>
<meta name="DC.identifier" content="2.3"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="icon" href="/favicon.ico" sizes="32x32"/>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml"/>
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/>
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="page_header">
From version 5.0 onward, Watcher is part of X-Pack. For more information, see 
<a href=https://www.elastic.co/guide/en/elastic-stack-overview/current/xpack-alerting.html>
    Alerting on cluster and index events</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="limitations.html">« Limitations</a>
</span>
<span class="next">
<a href="release-notes.html">Release Notes »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Watcher [2.3]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Troubleshooting</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.3/docs/public/watcher/troubleshooting.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="troubleshooting"></a>Troubleshooting</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.3/docs/public/watcher/troubleshooting.asciidoc">edit</a></div>
</div></div></div>
<p>Here are some common issues you might encounter while using Watcher. If you don&#8217;t see a solution
to your problem here, post a question to the <a href="https://discuss.elastic.co/c/watcher" class="ulink" target="_top">Watcher Discussion Forum</a>.</p>
<div class="position-relative"><h3><a id="_troubleshooting_a_new_watcher_installation"></a>Troubleshooting a New Watcher Installation</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.3/docs/public/watcher/troubleshooting.asciidoc">edit</a></div>
<p>If Watcher or Elasticsearch fail to start up properly after installation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make sure you are running Elasticsearch 1.5 or later.
</li>
<li class="listitem">
Make sure the License plugin is installed on every node in the cluster.
</li>
<li class="listitem">
If you are using Shield, make sure you are running Shield 1.2.2 or later.
</li>
<li class="listitem">
Make sure Watcher is installed on every node in the cluster.
</li>
<li class="listitem">
Make sure all plugin versions are compatible with the Elasticsearch version.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_logstash_cant_connect_to_elasticsearch_after_installing_watcher"></a>Logstash Can&#8217;t Connect to Elasticsearch after Installing Watcher</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.3/docs/public/watcher/troubleshooting.asciidoc">edit</a></div>
<p>By default, Logstash uses the <code class="literal">node</code> protocol. When you use the node protocol, the Logstash
instance joins the Elasticsearch cluster. Because Watcher requires all instances in the cluster
to have the License plugin, Logstash cannot join the cluster unless it has the License plugin.
You can <a class="xref" href="logstash-integration.html" title="Integrating Watcher with Logstash">install the Logstash License plugin</a> or use the <code class="literal">transport</code> or
<code class="literal">http</code> protocol to ship data to Elasticsearch.</p>
<div class="position-relative"><h3><a id="_dynamic_mapping_error_when_trying_to_add_a_watch"></a>Dynamic Mapping Error When Trying to Add a Watch</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.3/docs/public/watcher/troubleshooting.asciidoc">edit</a></div>
<p>If you get the error <em>Dynamic Mapping is Disabled</em> when you try to add a watch, verify that the
index mappings for the .watches index are available. You can do that by submitting the following
request:</p>
<div class="pre_wrapper lang-sense">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sense">GET .watches/_mapping</pre>
</div>
<div class="sense_widget" data-snippet="snippets/44.sense"></div>
<p>If the index mappings are missing, follow these steps to restore the correct mappings:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Stop the node.
</li>
<li class="listitem">
Add the configuration setting <code class="literal">watcher.index.rest.direct_access : true</code> to <code class="literal">elasticsearch.yml</code>.
</li>
<li class="listitem">
Restart the node.
</li>
<li class="listitem">
<p>Delete the <code class="literal">.watches</code> index:</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">DELETE .watches</pre>
</div>
</li>
<li class="listitem">
<p>Disable direct access to the <code class="literal">.watches</code> index:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Stop the node.
</li>
<li class="listitem">
Remove <code class="literal">watcher.index.rest.direct_access : true</code> from <code class="literal">elasticsearch.yml</code>.
</li>
<li class="listitem">
Restart the node.
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="position-relative"><h3><a id="_unable_to_send_email"></a>Unable to Send Email</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.3/docs/public/watcher/troubleshooting.asciidoc">edit</a></div>
<p>If you get an authentication error that indicates that you need to continue the sign-in process
from a web browser when Watcher attempts to send email, you need to configure Gmail to
<a href="https://support.google.com/accounts/answer/6010255?hl=en" class="ulink" target="_top">Allow Less Secure Apps to access your account</a>.</p>
<p>If you have two-step verification enabled for your email account, you must generate and use an App
Specific password to send email from Watcher. For more information, see:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Gmail: <a href="https://support.google.com/accounts/answer/185833?hl=en" class="ulink" target="_top">Sign in using App Passwords</a>
</li>
<li class="listitem">
Outlook.com: <a href="http://windows.microsoft.com/en-us/windows/app-passwords-two-step-verification" class="ulink" target="_top">App passwords and two-step verification</a>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_watcher_not_responsive"></a>Watcher Not Responsive</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.3/docs/public/watcher/troubleshooting.asciidoc">edit</a></div>
<p>Keep in mind that there&#8217;s no built-in validation of scripts that you add to a watch. Buggy or
deliberately malicious scripts can negatively impact Watcher performance. For example, if you
add multiple watches with buggy script conditions in a short period of time, Watcher might be
temporarily unable to process watches until the bad watches time out.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="limitations.html">« Limitations</a>
</span>
<span class="next">
<a href="release-notes.html">Release Notes »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
