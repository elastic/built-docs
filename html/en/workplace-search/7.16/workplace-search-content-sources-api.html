<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Content sources API reference | Workplace Search Guide [7.16] | Elastic</title>
<link rel="home" href="index.html" title="Workplace Search Guide [7.16]"/>
<link rel="up" href="workplace-search-api-overview.html" title="Workplace Search API Reference"/>
<link rel="prev" href="workplace-search-api-authentication.html" title="API Authentication Reference"/>
<link rel="next" href="workplace-search-custom-sources-api.html" title="Custom sources indexing API reference"/>
<meta name="DC.type" content="Learn/Docs/Workplace Search/Guide/7.16"/>
<meta name="DC.subject" content="Workplace Search"/>
<meta name="DC.identifier" content="7.16"/>
<meta name="robots" content="noindex,nofollow"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Workplace Search Guide [7.16]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="workplace-search-api-overview.html">Workplace Search API Reference</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="workplace-search-api-authentication.html">« API Authentication Reference</a>
</span>
<span class="next">
<a href="workplace-search-custom-sources-api.html">Custom sources indexing API reference »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="workplace-search-content-sources-api"></a>Content sources API reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h2>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is a technical API reference that applies to all content sources. For a conceptual walkthrough of <em>custom</em> sources, refer to <a class="xref" href="workplace-search-custom-api-sources.html" title="Connecting custom sources">Custom API sources</a>.</p>
</div>
</div>
<h3><a id="content-sources-api-toc"></a>In this API reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">Content source JSON representation</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#list-content-sources-api" title="List All content sources">List all content sources</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api" title="Get a content source">Get a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#create-content-source-api" title="Create a content source">Create a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#update-content-source-api" title="Update a content source">Update a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#modifying-content-source-schema-api" title="Modifying a content source&#8217;s schema">Modify a content source schema</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#upload-content-source-icon-api" title="Upload content source icons">Upload content source icons</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#remove-content-source-api" title="Remove a content source">Remove a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#get-automatic-query-refinement-details-api" title="Get a content source&#8217;s automatic query refinement details">Get a content source&#8217;s automatic query refinement details</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#get-document-by-id-api" title="Get a document">Get a document</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#content-source-jobs-api" title="Manage content source synchronization">Manage content source synchronization</a>
</li>
</ul>
</div>
<h3><a id="content-sources-api-model"></a>Content source JSON representation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Content sources represent the individual connections to 3rd party services, and the documents indexed from those connections.
Before using the API to create, access, update, or delete content sources, it is important to be familiar with the JSON notation that will be present in many of these response bodies.</p>
<h4><a id="content-source-fields"></a>Content source fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">id</code> (required)
</span>
</dt>
<dd>
<p>The string that uniquely identifies the content source.
This ID is generated by Workplace Search.</p>
</dd>
<dt>
<span class="term">
<code class="literal">service_type</code> (required)
</span>
</dt>
<dd>
<p>The string representing the content source&#8217;s service type.</p>
</dd>
<dt>
<span class="term">
<code class="literal">created_at</code> (required)
</span>
</dt>
<dd>
<p>The string in RFC-3339 format representing the date/time at which this content source was originally created.</p>
</dd>
<dt>
<span class="term">
<code class="literal">last_updated_at</code> (required)
</span>
</dt>
<dd>
<p>The string in RFC-3339 format representing the date/time at which this content source was last updated.</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_remote</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source is a "remote" content source. See <a class="xref" href="workplace-search-content-sources.html#workplace-search-content-sources-standard-vs-remote" title="Standard content sources vs remote content sources">Standard content sources vs remote content sources</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">details</code> (required)
</span>
</dt>
<dd>
<p>The list of objects that provide metadata for the content source and the account which authenticated/connected it.
These details will be displayed in the source details Overview page.</p>
<p>While this key is required, the list may be empty.</p>
<p>Any objects present in this list will contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable name of this piece of metadata.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description</code> (required)
</span>
</dt>
<dd>
<p>The string value to be displayed under the corresponding title.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">groups</code> (required)
</span>
</dt>
<dd>
<p>The list of objects which represent Workplace Search groups that have access to this content source.
Each object contains two keypairs, one for <code class="literal">id</code> and one for <code class="literal">name</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">name</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display name of this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">schema</code> (conditional)
</span>
</dt>
<dd>
<p>The object representing the schema that each document in a configured or custom content source must adhere to.
The keys of this object can be anything constructed of lower-case letters, numbers, and the underscore (<code class="literal">\_</code>) character.
These keys define the field names that may be present on indexed documents.
The values of these keypairs must be one of <code class="literal">text</code>, <code class="literal">number</code>, <code class="literal">date</code>, or <code class="literal">geolocation</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display</code> (conditional)
</span>
</dt>
<dd>
<p>The object representing the display details which govern how documents from custom content sources and configured documents from configured sources are displayed in search results.</p>
<p>The <code class="literal">display</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s title.</p>
</dd>
<dt>
<span class="term">
<code class="literal">subtitle_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s subtitle.
If <code class="literal">null</code>, the search result will not display a subtitle.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s long-form description or body.
In the UI, this content will be truncated to fit.
If <code class="literal">null</code>, the search result will not have a long-form description/body.</p>
</dd>
<dt>
<span class="term">
<code class="literal">url_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be used to link a given search result to its source of truth.</p>
</dd>
<dt>
<span class="term">
<code class="literal">type_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s type.
If <code class="literal">null</code>, the search result will not display a type.</p>
</dd>
<dt>
<span class="term">
<code class="literal">media_type_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s media type.
If <code class="literal">null</code>, the search result will not display a media type.</p>
</dd>
<dt>
<span class="term">
<code class="literal">created_by_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s creator.
If <code class="literal">null</code>, the search result will not display a creator.</p>
</dd>
<dt>
<span class="term">
<code class="literal">updated_by_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s modifier.
If <code class="literal">null</code>, the search result will not display a modifier.</p>
</dd>
<dt>
<span class="term">
<code class="literal">detail_fields</code> (required)
</span>
</dt>
<dd>
<p>The list of objects representing how the detailed view of a search result item is displayed, when clicked on.</p>
<p>The <code class="literal">detail_fields</code> objects each contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field_name</code> (required)
</span>
</dt>
<dd>
<p>The string field name that this detail pertains to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">label</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display of this field.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">color</code> (optional)
</span>
</dt>
<dd>
<p>A string hex-color code.
The <code class="literal">color</code> determines what color to fill the custom source icon with in the search UI.</p>
<p><code class="literal">color</code> is only present for custom content sources.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">context</code> (required)
</span>
</dt>
<dd>
<p>The string specifying whether this content source is available to groups of users, or a single user.
The value can be either "organization" or "private."</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_searchable</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source can currently be searched over on the search page.</p>
</dd>
<dt>
<span class="term">
<code class="literal">indexing</code> (conditional, optional)
</span>
</dt>
<dd>
<p>An object representing the indexing configuration for the content source. Indexing configurations can be used to selectively limit the indexed content. Indexing configurations work with <a class="xref" href="workplace-search-content-sources.html#workplace-search-content-sources-standard-vs-remote" title="Standard content sources vs remote content sources">standard sources</a>, excluding <a class="xref" href="workplace-search-custom-sources-api.html" title="Custom sources indexing API reference">custom content sources</a>. For a more detailed walkthrough, see <a class="xref" href="workplace-search-customizing-indexing-rules.html" title="Customize indexing for a content source">Customizing indexing</a>.</p>
<p>The <code class="literal">indexing</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">enabled</code> (required)
</span>
</dt>
<dd>
<p>A boolean value determining whether this content source should run sync jobs.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If during update <code class="literal">enabled</code> field value is changed from <code class="literal">true</code> to <code class="literal">false</code>, all jobs except the job to update permissions (if applicable) will be interrupted.
</li>
<li class="listitem">
If during update <code class="literal">enabled</code> field value is changed from <code class="literal">false</code> to <code class="literal">true</code>, all jobs that can run for the content source will attempt to restart.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">default_action</code> (required)
</span>
</dt>
<dd>
<p>A string that defines the default indexing action. One of:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">include</code> - if no rule matches the document, it will be indexed.
</li>
<li class="listitem">
<code class="literal">exclude</code> - if no rule matches the document, it will not be indexed.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">rules</code> (required)
</span>
</dt>
<dd>
<p>An array of indexing rule objects.</p>
<p>Each <code class="literal">rule</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filter_type</code> (required)
</span>
</dt>
<dd>
<p>This is a string defining what document field the rule filters on. There are three possible options:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">object_type</code> - useful for the content sources that have different types of objects available to index (example: <a class="xref" href="workplace-search-salesforce-connector.html" title="Connecting Salesforce">Salesforce</a>). This rule matches against a document&#8217;s <code class="literal">type</code> field.
</li>
<li class="listitem">
<p><code class="literal">path_template</code> - useful for the content sources that organize files into a directory structure. These include <a class="xref" href="workplace-search-google-drive-connector.html" title="Connecting Google Drive">Google Drive</a>, <a class="xref" href="workplace-search-dropbox-connector.html" title="Connecting Dropbox">Dropbox</a>, and other file-oriented sources. This rule matches against a document&#8217;s <code class="literal">path</code> field.  Using Sharepoint Online as an example, you can identify the <code class="literal">path</code> value from the Workplace Search <code class="literal">Search Application</code> by clicking on a document of interest:</p>
<div class="imageblock">
<div class="content">
<img src="images/content-source-indexing-filter-path-template.png" alt="Identifying the path value for a document using the Search Application">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is the document&#8217;s <code class="literal">path</code> field, not the full URL path to the document.</p>
</div>
</div>
</li>
<li class="listitem">
<code class="literal">file_extension</code> - similar to <em>path_template</em>, this is useful for file-based content sources. This rule matches against a document&#8217;s <code class="literal">extension</code> field.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
One of <code class="literal">include</code> or <code class="literal">exclude</code> (required)
</span>
</dt>
<dd>
<p>This is a case sensitive string defining the rule&#8217;s matching expression. For example:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
for <code class="literal">object_type</code> filter types, a source-specific document type name. For example, <code class="literal">lead</code> for Salesforce.
</li>
<li class="listitem">
for <code class="literal">file_extension</code> filter types, a file extension. For example, <code class="literal">jpg</code>, <code class="literal">doc</code>, <code class="literal">pdf</code>, etc. This is the bare file extension without a leading period.
</li>
<li class="listitem">
<p>for <code class="literal">path_template</code> filter types, a file path matching expression. Generally, path template expressiions follow the <a href="https://en.wikipedia.org/wiki/Glob_(programming)" class="ulink" target="_blank" rel="noopener">glob pattern</a>. For example:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">/ParentFolder/NestedFolder/**/*
/ParentFolder/\**/*.css</pre>
</div>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">fields</code> (conditional, optional)
</span>
</dt>
<dd>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For now, this only works with <a class="xref" href="workplace-search-salesforce-connector.html" title="Connecting Salesforce">Salesforce or Salesforce Sandbox</a> content sources!</p>
</div>
</div>
<p>This applies only to <code class="literal">include</code>-type rules with the <code class="literal">object_type</code> filter type. This is a further extension of the <code class="literal">include</code>-type rule. It allows you to index the objects selectively. Also, for custom object types, it allows you to index only the specific fields that you need.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The fields defined in this rule-specific <code class="literal">fields</code> list can have corresponding definitions in the <code class="literal">schema</code> and <code class="literal">display</code> for this content source. If there&#8217;s no field mapping in <code class="literal">schema</code> for a newly added field, its type will be inferred from the data.</p>
</div>
</div>
<p>Each field specification should have the following properties:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">remote</code> (required) - source field name;
</li>
<li class="listitem">
<p><code class="literal">target</code> (required) - field name in the indexed document.</p>
<p>For example, with the <a class="xref" href="workplace-search-salesforce-connector.html" title="Connecting Salesforce">Salesforce connector</a> you would be able to specify a rule like this to limit the indexed data to only <code class="literal">Id</code> and <code class="literal">Name</code> from your custom object type.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "rules": [
    {
      "filter_type": "object_type",
      "include": "my_awesome_object",
      "fields": [
        {
          "remote": "Id",
          "target": "id"
        },
        {
          "remote": "Name",
          "target": "name"
        }
      ]
    }
  ],
  &lt;...&gt;
}</pre>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">schedule</code> (required)
</span>
</dt>
<dd>
<p>An object representing the sync scheduling for the content source.</p>
<p>The <code class="literal">schedule</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code> (required)
</span>
</dt>
<dd>
<p>The string (<a href="https://en.wikipedia.org/wiki/ISO_8601#Durations" class="ulink" target="_blank" rel="noopener">ISO 8601 Duration</a>)  representing the refresh interval for the <code class="literal">full</code> sync job. The default interval from yml config will be returned if it&#8217;s not a platinum license or it&#8217;s not configured.</p>
</dd>
<dt>
<span class="term">
<code class="literal">incremental</code> (required)
</span>
</dt>
<dd>
<p>The string (<a href="https://en.wikipedia.org/wiki/ISO_8601#Durations" class="ulink" target="_blank" rel="noopener">ISO 8601 Duration</a>)  representing the refresh interval for the <code class="literal">incremental</code> sync job. The default interval from yml config will be returned if it&#8217;s not a platinum license or it&#8217;s not configured.</p>
</dd>
<dt>
<span class="term">
<code class="literal">delete</code> (required)
</span>
</dt>
<dd>
<p>The string (<a href="https://en.wikipedia.org/wiki/ISO_8601#Durations" class="ulink" target="_blank" rel="noopener">ISO 8601 Duration</a>)  representing the refresh interval for the <code class="literal">delete</code> sync job. The default interval from yml config will be returned if it&#8217;s not a platinum license or it&#8217;s not configured.</p>
</dd>
<dt>
<span class="term">
<code class="literal">permissions</code> (conditional)
</span>
</dt>
<dd>
<p>The string (<a href="https://en.wikipedia.org/wiki/ISO_8601#Durations" class="ulink" target="_blank" rel="noopener">ISO 8601 Duration</a>)  representing the refresh interval for the <code class="literal">permissions</code> sync job. The default interval from yml config will be returned if it&#8217;s not a platinum license or it&#8217;s not configured.</p>
<p>This field will only be present if the content source supports document-level-permissions and it&#8217;s enabled.</p>
</dd>
<dt>
<span class="term">
<code class="literal">blocked_windows</code> (conditional, optional)
</span>
</dt>
<dd>
<p>An array of block window objects.</p>
<p><code class="literal">blocked_windows</code> is only available for platinum license.</p>
<p>Each <code class="literal">block window</code> object contains the following keys:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><code class="literal">job_type</code> <span class="strong strong"><strong>(required)</strong></span></p>
<p>A string representing the job type. One of <code class="literal">full</code>, <code class="literal">incremental</code>, <code class="literal">delete</code>, <code class="literal">permissions</code> or <code class="literal">all</code>.</p>
</li>
<li class="listitem">
<p><code class="literal">day</code> <span class="strong strong"><strong>(required)</strong></span></p>
<p>A string representing the weekday. One of <code class="literal">monday</code>, <code class="literal">tuesday</code>, <code class="literal">wednesday</code>, <code class="literal">thursday</code>, <code class="literal">friday</code>, <code class="literal">saturday</code>, <code class="literal">sunday</code> or <code class="literal">all</code>.</p>
</li>
<li class="listitem">
<p><code class="literal">start</code> <span class="strong strong"><strong>(optional)</strong></span></p>
<p>A string representing the start time. It blocks from the beginning of the day if it&#8217;s not specified. <code class="literal">start</code> must be in <code class="literal">HH:mm:ssZ</code> format, e.g. <code class="literal">06:00:00Z</code>.</p>
</li>
<li class="listitem">
<p><code class="literal">end</code> <span class="strong strong"><strong>(optional)</strong></span></p>
<p>A string representing the end time. It blocks until the end of the day if it&#8217;s not specified. <code class="literal">end</code> must be in <code class="literal">HH:mm:ssZ</code> format, e.g. <code class="literal">18:00:00Z</code>. <code class="literal">end</code> must not be earlier than <code class="literal">start</code>.</p>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">estimates</code> (conditional)
</span>
</dt>
<dd>
<p>An object representing the estimates of sync jobs for the content source.</p>
<p>The field will not be present if the object is empty.</p>
<p>The <code class="literal">estimates</code> object contains the following keys:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><code class="literal">full</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>An object representing the estimates of <code class="literal">full</code> sync job.</p>
<p>The field will not be present if the object is empty.</p>
<p>The <code class="literal">full</code> object contains the following keys:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><code class="literal">last_run</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The executed time of last <code class="literal">full</code> sync job.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">full</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">duration</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The average execution time for the past 5 completed <code class="literal">full</code> sync jobs, in ISO 8601 format.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">full</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">next_start</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The estimated execution time for the next <code class="literal">full</code> sync job.</p>
<p>This field will not be present if sync is disabled for this content source or blocked for every day.</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><code class="literal">incremental</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>An object representing the estimates of <code class="literal">incremental</code> sync job.</p>
<p>The field will not be present if the object is empty.</p>
<p>The <code class="literal">incremental</code> object contains the following keys:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><code class="literal">last_run</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The executed time of last <code class="literal">incremental</code> sync job.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">incremental</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">duration</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The average execution time for the past 5 completed <code class="literal">incremental</code> sync jobs, in ISO 8601 format.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">incremental</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">next_start</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The estimated execution time for the next <code class="literal">incremental</code> sync job.</p>
<p>This field will not be present if sync is disabled for this content source or blocked for every day.</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><code class="literal">delete</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>An object representing the estimates of <code class="literal">delete</code> sync job.</p>
<p>The field will not be present if the object is empty.</p>
<p>The <code class="literal">delete</code> object contains the following keys:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><code class="literal">last_run</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The executed time of last <code class="literal">delete</code> sync job.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">delete</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">duration</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The average execution time for the past 5 completed <code class="literal">delete</code> sync jobs, in ISO 8601 format.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">delete</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">next_start</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The estimated execution time for the next <code class="literal">delete</code> sync job.</p>
<p>This field will not be present if sync is disabled for this content source or blocked for every day.</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><code class="literal">permissions</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>An object representing the estimates of <code class="literal">permissions</code> sync job.</p>
<p>This field will only be present if the content source supports document-level-permissions and it&#8217;s enabled.</p>
<p>The field will not be present if the object is empty.</p>
<p>The <code class="literal">permissions</code> object contains the following keys:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><code class="literal">last_run</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The executed time of last <code class="literal">permissions</code> sync job.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">permissions</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">duration</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The average execution time for the past 5 completed <code class="literal">permissions</code> sync jobs, in ISO 8601 format.</p>
<p>This field will not be present if there&#8217;s no past <code class="literal">permissions</code> sync job.</p>
</li>
<li class="listitem">
<p><code class="literal">next_start</code> <span class="strong strong"><strong>(conditional)</strong></span></p>
<p>The estimated execution time for the next <code class="literal">permissions</code> sync job.</p>
<p>This field will not be present if sync is disabled for this content source or blocked for every day.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">features</code> (optional)
</span>
</dt>
<dd>
<p>An object representing features that will affect how the sync jobs will extract the content from the sources. These feature toggles can be used to extract less content, allowing to speed up some of the sync jobs and reduce the storage size required to store the data at the expense of pulling less data.</p>
<p>The <code class="literal">features</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content_extraction</code> (required)
</span>
</dt>
<dd>
<p>An object representing settings of content extraction feature.
Full text content extraction is performed on many types of documents, including PDFs and most Office365 and GSuite formats.</p>
<p>The <code class="literal">content_extraction</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">enabled</code> (required):
</span>
</dt>
<dd>
<p>The boolean for whether content of the document should be extracted during synchronization. Disabling this option will speed up synchronization and reduce the storage size at the expense of being unable to run full text search over the content of documents.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">thumbnails</code> (required)
</span>
</dt>
<dd>
<p>
An object representing settings of thumbnail creation feature.
Thumbnail generation is performed on many types of documents, including PDFs, most image formats, and many Office365 and GSuite formats.
</p>
<p>The <code class="literal">thumbnails</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">enabled</code> (required):
</span>
</dt>
<dd>
<p>The boolean for whether thumbnails for the documents should be generated during synchronization. Disabling this option will speed up synchronization and reduce the storage size at the expense of not being able to see thumbnail of the documents during the search.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">facets</code> (conditional)
</span>
</dt>
<dd>
<p>An object representing the facet configuration. Content source facet configuration overrides represent custom facet rules to apply when using <a class="xref" href="searcher-manual-workplace-search.html" title="The Searcher&#8217;s Guide to Workplace Search">the native search experience</a> provided with Workplace Search. Facet configurations work with any <em><a class="xref" href="workplace-search-content-sources.html#workplace-search-content-sources-standard-vs-remote" title="Standard content sources vs remote content sources">standard</a></em> content source including <a class="xref" href="workplace-search-custom-api-sources.html" title="Connecting custom sources">Custom API sources</a>. Facet configurations will not affect the <a class="xref" href="workplace-search-search-api.html" title="Search API Reference">Search API</a>.</p>
<p>The <code class="literal">facets</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overrides</code> (required)
</span>
</dt>
<dd>
<p>An array of facet override objects.</p>
<p>Each <code class="literal">overrides</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code> (required)
</span>
</dt>
<dd>
<p>The string that identifies the field name this facet will apply to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether the facet should be displayed or not. This can be used to hide facets displayed by default.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display_name</code> (conditional)
</span>
</dt>
<dd>
<p>The string to be used as a facet label in the search experience. This field is required when <code class="literal">enabled</code> is <em>true</em>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">transform</code> (optional)
</span>
</dt>
<dd>
<p>The string to describe the text transformation to be used on facet values. Valid options are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>capitalize</strong></span> - Ensure the first word of a facet option is capitalized. Example: <em>white tiger</em> becomes <em>White tiger</em>.
</li>
<li class="listitem">
<span class="strong strong"><strong>titleize</strong></span> - Ensure every word of a facet option is capitalized. Example: <em>new york</em> becomes <em>New York</em>.
</li>
<li class="listitem">
<span class="strong strong"><strong>mime_type</strong></span> - Parse the facet option as a raw mime type and display a more user friendly value. Example: <em>application/pdf</em> becomes <em>PDF</em>.
</li>
</ul>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">automatic_query_refinement</code> (conditional)
</span>
</dt>
<dd>
<p>An object representing configuration for <a class="xref" href="workplace-search-customizing-filters.html#enabling-automatic-query-refinement" title="Enabling automatic query refinement">automatic query refinement</a>.</p>
<p>Determining which values exist for a given field is powered by the facet results of that field. Therefore, it is only possible to enable automatic query refinements for a field that is also <a class="xref" href="workplace-search-customizing-filters.html#enabling-faceted-fields" title="Add a new filter">enabled as a facet</a>.</p>
<p>The <code class="literal">automatic_query_refinement</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overrides</code> (required)
</span>
</dt>
<dd>
<p>An array of automatic query refinement override objects.</p>
<p>Each <code class="literal">overrides</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code> (required)
</span>
</dt>
<dd>
<p>The string that identifies the field name this automatic query refinement will apply to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether the automatic query refinement for this field should be enabled or not. This can be used to disabled default automatic query refinements.</p>
</dd>
<dt>
<span class="term">
<code class="literal">query_expansion_phrases</code> (required)
</span>
</dt>
<dd>
<p>The string array that defines words/phrases that should precede a field value in order to trigger the query refinement. The empty string (<code class="literal">""</code>) is used to mean the value must be at the very start of the query. The empty list (<code class="literal">[]</code>) means that the value requires no prefix, and can be found anywhere inside the query.</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_person</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this field is used to uniquely identify people. This is most useful for "name" and "email" fields, and can help to resolve queries where one user alias is queried for, but another is present in a document. This helps to power queries like <code class="literal">updated by me</code>.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>See the <a class="xref" href="automatic-query-refinement-settings.html" title="Automatic query refinement settings">Automatic query refinement settings</a> to see or change organization-wide settings for automatic query refinement.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">document_count</code> (conditional)
</span>
</dt>
<dd>
<p>The integer of how many documents are currently indexed in this content source.
This field is not applicable to remote content sources.</p>
</dd>
<dt>
<span class="term">
<code class="literal">last_indexed_at</code> (conditional)
</span>
</dt>
<dd>
<p>The string in RFC-3339 format representing the date/time when documents were last indexed into this content source.
This may be null if documents have not yet been indexed.
This field is not applicable to remote content sources.</p>
</dd>
</dl>
</div>
<h4><a id="content-source-example"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<p>Below is an example content source&#8217;s JSON representation:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "id": "603ebf0440b06a31115f4bad",
  "service_type": "custom",
  "created_at": "2021-03-02T22:41:08+00:00",
  "last_updated_at": "2021-03-02T22:41:16+00:00",
  "is_remote": false,
  "details": [
    {
      "title": "Cited Source",
      "description": "http://nps.gov"
    },
    {
      "title": "Usage",
      "description": "For Enterprise Search Examples"
    }
  ],
  "groups": [
    {
      "id": "603ea1a440b06a9c11fd832d",
      "name": "Default"
    }
  ],
  "name": "National Parks",
  "schema": {
    "description": "text",
    "title": "text",
    "nps_link": "text",
    "states": "text",
    "visitors": "number",
    "square_km": "number",
    "world_heritage_site": "text",
    "date_established": "date",
    "location": "geolocation",
    "acres": "number"
  },
  "display": {
    "title_field": "title",
    "subtitle_field": "states",
    "description_field": "description",
    "url_field": "nps_link",
    "type_field": null,
    "media_type_field": null,
    "created_by_field": null,
    "updated_by_field": null,
    "detail_fields": [
      {
        "field_name": "states",
        "label": "States"
      },
      {
        "field_name": "description",
        "label": "Description"
      },
      {
        "field_name": "date_established",
        "label": "Established"
      },
      {
        "field_name": "visitors",
        "label": "Number of Visitors"
      },
      {
        "field_name": "location",
        "label": "Location"
      },
      {
        "field_name": "world_heritage_site",
        "label": "World Heritage Site?"
      },
      {
        "field_name": "square_km",
        "label": "Square Kilometers"
      },
      {
        "field_name": "acres",
        "label": "Acres"
      }
    ],
    "color": "#000000"
  },
  "context": "organization",
  "is_searchable": true,
  "indexing": {
    "enabled": true,
    "default_action": "include",
    "rules": [
      {
        "filter_type": "extension",
        "exclude": "exe"
      }
    ],
    "schedule": {
      "full": "P3D",
      "incremental": "PT2H",
      "delete": "PT6H",
      "permissions": "PT5M",
      "blocked_windows": [
        {
          "job_type": "all",
          "day": "monday",
          "start": "09:00:00Z",
          "end": "17:00:00z"
       }
      ],
      "estimates": {
        "full" : {
          "last_run": "2021-06-01T23:00:00Z",
          "duration": "PT1H",
          "next_start": "2021-06-02T00:00:00Z"
        },
        "incremental" : {
          "last_run": "2021-06-01T23:55:00Z",
          "duration": "PT5M",
          "next_start": "2021-06-02T00:00:00Z"
        },
        "delete" : {
          "last_run": "2021-06-01T23:52:00Z",
          "duration": "PT8M",
          "next_start": "2021-06-02T00:00:00Z"
        },
        "permissions" : {
          "last_run": "2021-06-01T23:59:50Z",
          "duration": "PT10S",
          "next_start": "2021-06-02T00:00:00Z"
        }
      }
    },
    "features": {
      "content_extraction": {
        "enabled": true
      },
      "thumbnails": {
        "enabled": true
      }
    }
  },
  "facets": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "display_name": "State",
        "transform": "titleize"
      },
      {
        "field": "type",
        "enabled": false
      }
    ]
  },
  "automatic_query_refinement": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "query_expansion_phrases": [
          "where state is",
          "located in"
        ],
        "is_person": false
      },
      {
        "field": "type",
        "enabled": false,
        "query_expansion_phrases": [],
        "is_person": false
      }
    ]
  },
  "document_count": 59,
  "last_indexed_at": "2021-03-02T22:41:15+00:00"
}</pre>
</div>
<h3><a id="list-content-sources-api"></a>List All content sources<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Retrieve a paginated list of all content sources.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">GET /api/ws/v1/sources</pre>
</div>
<h4><a id="list-content-sources-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="list-content-sources-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">page[current]</code> (optional)
</span>
</dt>
<dd>
<p>The integer page of results to retrieve.
Default is <code class="literal">1</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">page[size]</code> (optional)
</span>
</dt>
<dd>
<p>The integer size of results to retrieve in a single page.
Default is <code class="literal">25</code></p>
</dd>
</dl>
</div>
<h4><a id="list-content-sources-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url 'https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources' \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url 'http://localhost:3002/api/ws/v1/sources' \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<p>With pagination:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url 'http://localhost:3002/api/ws/v1/sources?page[current]=2&amp;page[size]=1' \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="list-content-sources-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The paginated list of content sources is returned.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 4,
      "size": 25
    }
  },
  "results": [
    { &lt;ContentSourceOne&gt; },
    { &lt;ContentSourceTwo&gt; },
    { &lt;ContentSourceThree&gt; },
    { &lt;ContentSourceFour&gt; }
  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The request body was incomplete or invalid.
The response body provides additional information.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
</dd>
</dl>
</div>
<h3><a id="get-content-source-api"></a>Get a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Retrieve a single content source by its ID.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">GET /api/ws/v1/sources/&lt;content-source-id&gt;</pre>
</div>
<h4><a id="get-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="get-content-source-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to be retrieved.</p>
</dd>
</dl>
</div>
<h4><a id="get-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="get-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single content sources is returned.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{ &lt;ContentSource&gt; }</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
</dd>
</dl>
</div>
<h3><a id="create-content-source-api"></a>Create a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Create a single custom content source.</p>
<p>Only custom content sources can be created with this endpoint.
Other service types cannot be created programmatically.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">POST /api/ws/v1/sources</pre>
</div>
<h4><a id="create-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
<dt>
<span class="term">
<code class="literal">Content-Type</code>
</span>
</dt>
<dd>
<p><code class="literal">application/json</code>.
This endpoint accepts only JSON POST data.</p>
</dd>
</dl>
</div>
<h4><a id="create-content-source-api-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Content source definition (required)
</span>
</dt>
<dd>
<p>The JSON object defining the content source to be created.</p>
</dd>
<dt>
<span class="term">
<code class="literal">name</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display name of this content source.</p>
<p>The <code class="literal">name</code> may not start or end with special characters.</p>
<p>The <code class="literal">name</code> may not include special characters other than underscore (<code class="literal">\_</code>).</p>
<p>The <code class="literal">name</code> may not be longer than 64 characters.</p>
</dd>
<dt>
<span class="term">
<code class="literal">schema</code> (optional)
</span>
</dt>
<dd>
<p>The object representing the schema that each document in this content source must adhere to.
The keys of this object can be anything constructed of lower-case letters, numbers, and the underscore (<code class="literal">\_</code>) character.
These keys define the field names that may be present on indexed documents.
The values of these keypairs must be one of <code class="literal">text</code>, <code class="literal">number</code>, <code class="literal">date</code>, or <code class="literal">geolocation</code>.</p>
<p>If omitted, you cannot specify a <code class="literal">display</code> at creation time.</p>
<p>You can update <code class="literal">schema</code> later by indexing documents (the schema will be inferred) or by using the <a class="xref" href="workplace-search-content-sources-api.html#update-content-source-api" title="Update a content source">update endpoint</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display</code> (optional)
</span>
</dt>
<dd>
<p>The object representing the display details which govern how documents will be displayed in search results.</p>
<p>The <code class="literal">display</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s title.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">url_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be used to link a given search result to its source of truth.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">subtitle_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s subtitle.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a subtitle, and subtitles will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s long-form description or body.
In the UI, this content will be truncated to fit.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a description, and descriptions will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">type_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s type.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a type, and type will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">media_type_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s media type.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a media type, and media type will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">created_by_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s creator.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a creator, and creator will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">updated_by_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s modifier.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a modifier, and modifier will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">detail_fields</code> (optional)
</span>
</dt>
<dd>
<p>The list of objects representing how the detailed view of a search result item should be displayed when clicked on.</p>
<p>The <code class="literal">detail_fields</code> objects must each contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field_name</code> (required)
</span>
</dt>
<dd>
<p>The string field name that this detail pertains to.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">label</code> (required)
</span>
</dt>
<dd>
<p>The string for the human-readable display of this field.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">color</code> (optional)
</span>
</dt>
<dd>
<p>A string hex-color code.
The <code class="literal">color</code> determines what color to fill the custom source icon with in the search UI.</p>
<p><code class="literal">color</code> must be a 7-character string, beginning with a hash (<code class="literal">\#</code>) followed by 6 hexadecimal digits (0-9, A-F).
Other color strings or code formats will not be accepted.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">is_searchable</code> (optional)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source should be searchable.</p>
</dd>
<dt>
<span class="term">
<code class="literal">facets</code> (conditional)
</span>
</dt>
<dd>
<p>An object representing the facet configuration. Content source facet configuration overrides represent custom facet rules to apply when using <a class="xref" href="searcher-manual-workplace-search.html" title="The Searcher&#8217;s Guide to Workplace Search">the native search experience</a> provided with Workplace Search. Facet configurations work with any <em><a class="xref" href="workplace-search-content-sources.html#workplace-search-content-sources-standard-vs-remote" title="Standard content sources vs remote content sources">standard</a></em> content source including <a class="xref" href="workplace-search-custom-api-sources.html" title="Connecting custom sources">Custom API sources</a>. Facet configurations will not affect the <a class="xref" href="workplace-search-search-api.html" title="Search API Reference">Search API</a>.</p>
<p>The <code class="literal">facets</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overrides</code> (required)
</span>
</dt>
<dd>
<p>An array of facet override objects.</p>
<p>Each <code class="literal">overrides</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code> (required)
</span>
</dt>
<dd>
<p>The string that identifies the field name this facet will apply to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether the facet should be displayed or not. This can be used to hide facets displayed by default.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display_name</code> (conditional)
</span>
</dt>
<dd>
<p>The string to be used as a facet label in the search experience. This field is required when <code class="literal">enabled</code> is <em>true</em>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">transform</code> (optional)
</span>
</dt>
<dd>
<p>The string to describe the text transformation to be used on facet values. Valid options are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>capitalize</strong></span> - Ensure the first word of a facet option is capitalized. Example: <em>white tiger</em> becomes <em>White tiger</em>.
</li>
<li class="listitem">
<span class="strong strong"><strong>titleize</strong></span> - Ensure every word of a facet option is capitalized. Example: <em>new york</em> becomes <em>New York</em>.
</li>
<li class="listitem">
<span class="strong strong"><strong>mime_type</strong></span> - Parse the facet option as a raw mime type and display a more user friendly value. Example: <em>application/pdf</em> becomes <em>PDF</em>.
</li>
</ul>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">automatic_query_refinement</code> (conditional)
</span>
</dt>
<dd>
<p>An object representing configuration for <a class="xref" href="workplace-search-customizing-filters.html#enabling-automatic-query-refinement" title="Enabling automatic query refinement">automatic query refinement</a>.</p>
<p>Determining which values exist for a given field is powered by the facet results of that field. Therefore, it is only possible to enable automatic query refinements for a field that is also <a class="xref" href="workplace-search-customizing-filters.html#enabling-faceted-fields" title="Add a new filter">enabled as a facet</a>.</p>
<p>The <code class="literal">automatic_query_refinement</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overrides</code> (required)
</span>
</dt>
<dd>
<p>An array of automatic query refinement override objects.</p>
<p>Each <code class="literal">overrides</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code> (required)
</span>
</dt>
<dd>
<p>The string that identifies the field name this automatic query refinement will apply to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether the automatic query refinement for this field should be enabled or not. This can be used to disabled default automatic query refinements.</p>
</dd>
<dt>
<span class="term">
<code class="literal">query_expansion_phrases</code> (required)
</span>
</dt>
<dd>
<p>The string array that defines words/phrases that should precede a field value in order to trigger the query refinement. The empty string (<code class="literal">""</code>) is used to mean the value must be at the very start of the query. The empty list (<code class="literal">[]</code>) means that the value requires no prefix, and can be found anywhere inside the query.</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_person</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this field is used to uniquely identify people. This is most useful for "name" and "email" fields, and can help to resolve queries where one user alias is queried for, but another is present in a document. This helps to power queries like <code class="literal">updated by me</code>.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>See the <a class="xref" href="automatic-query-refinement-settings.html" title="Automatic query refinement settings">Automatic query refinement settings</a> to see or change organization-wide settings for automatic query refinement.</p>
</div>
</div>
<h5><a id="create-content-source-api-request-body-example"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h5>
<p>Below is an example content source definition&#8217;s JSON representation:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "name": "National Parks",
  "schema": {
    "description": "text",
    "title": "text",
    "nps_link": "text",
    "states": "text",
    "visitors": "number",
    "square_km": "number",
    "world_heritage_site": "text",
    "date_established": "date",
    "location": "geolocation",
    "acres": "number"
  },
  "display": {
    "title_field": "title",
    "subtitle_field": "states",
    "description_field": "description",
    "url_field": "nps_link",
    "type_field": null,
    "media_type_field": null,
    "created_by_field": null,
    "updated_by_field": null,
    "detail_fields": [
      {
        "field_name": "states",
        "label": "States"
      },
      {
        "field_name": "description",
        "label": "Description"
      },
      {
        "field_name": "date_established",
        "label": "Established"
      },
      {
        "field_name": "visitors",
        "label": "Number of Visitors"
      },
      {
        "field_name": "location",
        "label": "Location"
      },
      {
        "field_name": "world_heritage_site",
        "label": "World Heritage Site?"
      },
      {
        "field_name": "square_km",
        "label": "Square Kilometers"
      },
      {
        "field_name": "acres",
        "label": "Acres"
      }
    ],
    "color": "#000000"
  },
  "is_searchable": true,
  "facets": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "display_name": "State",
        "transform": "titleize"
      },
      {
        "field": "type",
        "enabled": false
      }
    ]
  },
  "automatic_query_refinement": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "query_expansion_phrases": [
          "where state is",
          "located in"
        ],
        "is_person": false
      },
      {
        "field": "type",
        "enabled": false,
        "query_expansion_phrases": [],
        "is_person": false
      }
    ]
  }
}</pre>
</div>
<h4><a id="create-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'POST' \
--url 'https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources/' \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "type_field": "my_field",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Field"
      }
    ],
    "color": "#111111"
  },
  "is_searchable": true,
  "facets": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "display_name": "State",
        "transform": "titleize"
      },
      {
        "field": "type",
        "enabled": false
      }
    ]
  },
  "automatic_query_refinement": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "query_expansion_phrases": [
          "where state is",
          "located in"
        ],
        "is_person": false
      },
      {
        "field": "type",
        "enabled": false,
        "query_expansion_phrases": [],
        "is_person": false
      }
    ]
  }
}
'</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'POST' \
--url 'http://localhost:3002/api/ws/v1/sources/' \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "type_field": "my_field",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Field"
      }
    ],
    "color": "#111111"
  },
  "is_searchable": true,
  "facets": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "display_name": "State",
        "transform": "titleize"
      },
      {
        "field": "type",
        "enabled": false
      }
    ]
  },
  "automatic_query_refinement": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "query_expansion_phrases": [
          "where state is",
          "located in"
        ],
        "is_person": false
      },
      {
        "field": "type",
        "enabled": false,
        "query_expansion_phrases": [],
        "is_person": false
      }
    ]
  }
}
'</pre>
</div>
<h4><a id="create-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single created content source is returned.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{ &lt;ContentSource&gt; }</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The request body did not meet requirements.
See the <code class="literal">errors</code> array to determine what may be wrong.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "The property '#/schema/my_field' value \"integer\" did not match one of the following values: text, geolocation, number, date",
    "The property '#/display' did not contain a required property of 'title_field'",
    "The property '#/is_searchable' did not match any of the following types: boolean",
    "The property '#/name' value \"&amp;special_chars*\" did not match the regex '(?-mix:\\A[\\w\\s.()'\\-\\/]*\\z)'"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Invalid Display</code>
</span>
</dt>
<dd>
<p>The request body included a <code class="literal">display</code> configuration that, while syntactically correct, did not align with the content source&#8217;s <code class="literal">schema</code>.
This was not detected until after the content source was created, but did prevent the display settings from being applied as expected.
The response includes both the current state of the new content source, and the errors in configuring the display.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "created" : { &lt;ContentSource&gt; },
  "errors" : [
    "Invalid display setting: title_field: \"title\" is not a field on the content source",
    "Invalid display setting: subtitle_field: \"states\" is not a field on the content source",
    "Invalid display setting: description_field: \"description\" is not a field on the content source",
    "Invalid display setting: url_field: \"nps_link\" is not a field on the content source",
    "Invalid display setting: detail_fields: \"states\" is not a field on the content source, \"description\" is not a field on the content source, \"date_established\" is not a field on the content source, \"visitors\" is not a field on the content source, \"location\" is not a field on the content source, \"world_heritage_site\" is not a field on the content source, \"square_km\" is not a field on the content source, \"acres\" is not a field on the content source"

  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
</dd>
</dl>
</div>
<h3><a id="update-content-source-api"></a>Update a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Update a single content source.
Both standard and custom content sources can be updated with this endpoint.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">PUT /api/ws/v1/sources/&lt;content-source-id&gt;</pre>
</div>
<h4><a id="update-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
<dt>
<span class="term">
<code class="literal">Content-Type</code>
</span>
</dt>
<dd>
<p><code class="literal">application/json</code>.
This endpoint accepts only JSON PUT data.</p>
</dd>
</dl>
</div>
<h4><a id="update-content-source-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to be updated.</p>
</dd>
</dl>
</div>
<h4><a id="update-content-source-api-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Content source definition (required)
</span>
</dt>
<dd>
<p>The JSON object defining the new state of the content source.</p>
<p>Unlike the <a class="xref" href="workplace-search-content-sources-api.html#create-content-source-api-request-body" title="Request body"><code class="literal">create</code> request body</a>, most parameters of this body are required. You may find it useful to first do a <a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api" title="Get a content source">get request</a>, to ensure you send the complete current values to avoid unwanted changes.</p>
</dd>
<dt>
<span class="term">
<code class="literal">name</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display name of this content source.</p>
<p>The <code class="literal">name</code> may not start or end with special characters.</p>
<p>The <code class="literal">name</code> may not include special characters other than underscore (<code class="literal">\_</code>).</p>
<p>The <code class="literal">name</code> may not be longer than 64 characters.</p>
</dd>
<dt>
<span class="term">
<code class="literal">schema</code> (conditional)
</span>
</dt>
<dd>
<p>This field is required for <em>custom</em> content sources.
It is ignored for standard content sources other than Salesforce.</p>
<p>The object representing the schema that each document in this content source must adhere to.
The keys of this object can be anything constructed of lower-case letters, numbers, and the underscore (<code class="literal">\_</code>) character.
These keys define the field names that may be present on indexed documents.
The values of these keypairs must be one of <code class="literal">text</code>, <code class="literal">number</code>, <code class="literal">date</code>, or <code class="literal">geolocation</code>.</p>
<p>If the content source already contains documents, this <code class="literal">schema</code> must not attempt to change the types of fields for document that do not have an implicit type conversion available to them.
For example, a document of</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "field_one": 42,
  "field_two": "the answer"
}</pre>
</div>
<p>a schema update of</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "field_one": "text",
  "field_two": "text"
}</pre>
</div>
<p>is fine, because <code class="literal">42</code> (numeric) can implicitly be converted to <code class="literal">"42"</code> (string) without issue.
However, a schema update of</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "field_one": "number",
  "field_two": "number"
}</pre>
</div>
<p>will fail, because there is no implicit numeric value for <code class="literal">"the answer"</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display</code> (conditional)
</span>
</dt>
<dd>
<p>This field is required for <em>custom</em> content sources.
It is ignored for standard content sources other than Salesforce.</p>
<p>The object representing the display details which govern how documents will be displayed in search results.</p>
<p>The <code class="literal">display</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s title.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">url_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be used to link a given search result to its source of truth.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">subtitle_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s subtitle.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a subtitle, and subtitles will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s long-form description or body.
In the UI, this content will be truncated to fit.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a description, and descriptions will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">type_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s type.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a type, and type will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">media_type_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s media type.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a media type, and media type will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">created_by_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s creator.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a creator, and creator will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">updated_by_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s modifier.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a modifier, and modifier will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">detail_fields</code> (optional)
</span>
</dt>
<dd>
<p>The list of objects representing how the detailed view of a search result item should be displayed when clicked on.</p>
<p>The <code class="literal">detail_fields</code> objects must each contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field_name</code> (required)
</span>
</dt>
<dd>
<p>The string field name that this detail pertains to.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">label</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display of this field.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">color</code> (required)
</span>
</dt>
<dd>
<p>A string hex-color code.
The <code class="literal">color</code> determines what color to fill the custom source icon with in the search UI.</p>
<p><code class="literal">color</code> must be a 7-character string, beginning with a hash (<code class="literal">\#</code>) followed by 6 hexadecimal digits (0-9, A-F).
Other color strings or code formats will not be accepted.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">is_searchable</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source should be searchable.</p>
</dd>
</dl>
</div>
<p>include::includes/indexing.asciidoc</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">facets</code> (conditional)
</span>
</dt>
<dd>
<p>An object representing the facet configuration. Content source facet configuration overrides represent custom facet rules to apply when using <a class="xref" href="searcher-manual-workplace-search.html" title="The Searcher&#8217;s Guide to Workplace Search">the native search experience</a> provided with Workplace Search. Facet configurations work with any <em><a class="xref" href="workplace-search-content-sources.html#workplace-search-content-sources-standard-vs-remote" title="Standard content sources vs remote content sources">standard</a></em> content source including <a class="xref" href="workplace-search-custom-api-sources.html" title="Connecting custom sources">Custom API sources</a>. Facet configurations will not affect the <a class="xref" href="workplace-search-search-api.html" title="Search API Reference">Search API</a>.</p>
<p>The <code class="literal">facets</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overrides</code> (required)
</span>
</dt>
<dd>
<p>An array of facet override objects.</p>
<p>Each <code class="literal">overrides</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code> (required)
</span>
</dt>
<dd>
<p>The string that identifies the field name this facet will apply to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether the facet should be displayed or not. This can be used to hide facets displayed by default.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display_name</code> (conditional)
</span>
</dt>
<dd>
<p>The string to be used as a facet label in the search experience. This field is required when <code class="literal">enabled</code> is <em>true</em>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">transform</code> (optional)
</span>
</dt>
<dd>
<p>The string to describe the text transformation to be used on facet values. Valid options are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>capitalize</strong></span> - Ensure the first word of a facet option is capitalized. Example: <em>white tiger</em> becomes <em>White tiger</em>.
</li>
<li class="listitem">
<span class="strong strong"><strong>titleize</strong></span> - Ensure every word of a facet option is capitalized. Example: <em>new york</em> becomes <em>New York</em>.
</li>
<li class="listitem">
<span class="strong strong"><strong>mime_type</strong></span> - Parse the facet option as a raw mime type and display a more user friendly value. Example: <em>application/pdf</em> becomes <em>PDF</em>.
</li>
</ul>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">automatic_query_refinement</code> (conditional)
</span>
</dt>
<dd>
<p>An object representing configuration for <a class="xref" href="workplace-search-customizing-filters.html#enabling-automatic-query-refinement" title="Enabling automatic query refinement">automatic query refinement</a>.</p>
<p>Determining which values exist for a given field is powered by the facet results of that field. Therefore, it is only possible to enable automatic query refinements for a field that is also <a class="xref" href="workplace-search-customizing-filters.html#enabling-faceted-fields" title="Add a new filter">enabled as a facet</a>.</p>
<p>The <code class="literal">automatic_query_refinement</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overrides</code> (required)
</span>
</dt>
<dd>
<p>An array of automatic query refinement override objects.</p>
<p>Each <code class="literal">overrides</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code> (required)
</span>
</dt>
<dd>
<p>The string that identifies the field name this automatic query refinement will apply to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether the automatic query refinement for this field should be enabled or not. This can be used to disabled default automatic query refinements.</p>
</dd>
<dt>
<span class="term">
<code class="literal">query_expansion_phrases</code> (required)
</span>
</dt>
<dd>
<p>The string array that defines words/phrases that should precede a field value in order to trigger the query refinement. The empty string (<code class="literal">""</code>) is used to mean the value must be at the very start of the query. The empty list (<code class="literal">[]</code>) means that the value requires no prefix, and can be found anywhere inside the query.</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_person</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this field is used to uniquely identify people. This is most useful for "name" and "email" fields, and can help to resolve queries where one user alias is queried for, but another is present in a document. This helps to power queries like <code class="literal">updated by me</code>.</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>See the <a class="xref" href="automatic-query-refinement-settings.html" title="Automatic query refinement settings">Automatic query refinement settings</a> to see or change organization-wide settings for automatic query refinement.</p>
</div>
</div>
<h5><a id="update-content-source-api-request-body-example"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h5>
<p>Below is an example content source definition&#8217;s JSON representation:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "name": "National Parks",
  "schema": {
    "description": "text",
    "title": "text",
    "nps_link": "text",
    "states": "text",
    "visitors": "number",
    "square_km": "number",
    "world_heritage_site": "text",
    "date_established": "date",
    "location": "geolocation",
    "acres": "number"
  },
  "display": {
    "title_field": "title",
    "subtitle_field": "states",
    "description_field": "description",
    "url_field": "nps_link",
    "type_field": null,
    "media_type_field": null,
    "created_by_field": null,
    "updated_by_field": null,
    "detail_fields": [
      {
        "field_name": "states",
        "label": "States"
      },
      {
        "field_name": "description",
        "label": "Description"
      },
      {
        "field_name": "date_established",
        "label": "Established"
      },
      {
        "field_name": "visitors",
        "label": "Number of Visitors"
      },
      {
        "field_name": "location",
        "label": "Location"
      },
      {
        "field_name": "world_heritage_site",
        "label": "World Heritage Site?"
      },
      {
        "field_name": "square_km",
        "label": "Square Kilometers"
      },
      {
        "field_name": "acres",
        "label": "Acres"
      }
    ],
    "color": "#000000"
  },
  "is_searchable": true,
  "indexing": {
    "enabled": true,
    "default_action": "include",
    "rules": [
      {
        "filter_type": "extension",
        "exclude": "exe"
      }
    ],
    "schedule": {
      "full": "P3D",
      "incremental": "PT2H",
      "delete": "PT6H",
      "permissions": "PT5M",
      "blocked_windows": [
        {
          "job_type": "all",
          "day": "monday",
          "start": "09:00:00Z",
          "end": "17:00:00z"
       }
      ]
    },
    "features": {
      "content_extraction": {
        "enabled": true
      },
      "thumbnails": {
        "enabled": true
      }
    }
  },
  "facets": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "display_name": "State",
        "transform": "titleize"
      },
      {
        "field": "type",
        "enabled": false
      }
    ]
  },
  "automatic_query_refinement": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "query_expansion_phrases": [
          "where state is",
          "located in"
        ],
        "is_person": false
      },
      {
        "field": "type",
        "enabled": false,
        "query_expansion_phrases": [],
        "is_person": false
      }
    ]
  }
}</pre>
</div>
<h4><a id="update-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'PUT' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test Update",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "type_field": "my_field",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Updated Field Display"
      }
    ],
    "color": "#222222"
  },
  "is_searchable": true,
  "facets": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "display_name": "State",
        "transform": "titleize"
      },
      {
        "field": "type",
        "enabled": false
      }
    ]
  },
  "automatic_query_refinement": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "query_expansion_phrases": [
          "where state is",
          "located in"
        ],
        "is_person": false
      },
      {
        "field": "type",
        "enabled": false,
        "query_expansion_phrases": [],
        "is_person": false
      }
    ]
  }
}
'</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'PUT' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test Update",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "type_field": "my_field",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Updated Field Display"
      }
    ],
    "color": "#222222"
  },
  "is_searchable": true,
  "facets": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "display_name": "State",
        "transform": "titleize"
      },
      {
        "field": "type",
        "enabled": false
      }
    ]
  },
  "automatic_query_refinement": {
    "overrides": [
      {
        "field": "state",
        "enabled": true,
        "query_expansion_phrases": [
          "where state is",
          "located in"
        ],
        "is_person": false
      },
      {
        "field": "type",
        "enabled": false,
        "query_expansion_phrases": [],
        "is_person": false
      }
    ]
  }
}
'</pre>
</div>
<h4><a id="update-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single updated content source is returned.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{ &lt;ContentSource&gt; }</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The request body did not meet requirements.
See the <code class="literal">errors</code> array to determine what may be wrong.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "The property '#/schema/my_field' value \"integer\" did not match one of the following values: text, geolocation, number, date",
    "The property '#/display' did not contain a required property of 'title_field'",
    "The property '#/is_searchable' did not match any of the following types: boolean",
    "The property '#/name' value \"&amp;special_chars*\" did not match the regex '(?-mix:\\A[\\w\\s.()'\\-\\/]*\\z)'"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Illegal Schema Change</code>
</span>
</dt>
<dd>
<p>The request body included a <code class="literal">schema</code> that, while syntactically correct, would require field type changes for document values that cannot match the new type.
This was not detected until after some updates may have been applied, but did prevent the schema update from being applied as expected.
The response includes both the current state of the updated content source, and the errors in updating the schema.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "updated" : { &lt;ContentSource&gt; },
  "errors": [
    "Field 'description' cannot be changed to type 'float'. Example IDs that would fail: [\"park_acadia\", \"park_badlands\", \"park_big-bend\", \"park_bryce-canyon\", \"park_canyonlands\", \"park_capitol-reef\", \"park_carlsbad-caverns\", \"park_congaree\", \"park_cuyahoga-valley\", \"park_denali\"]"
  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Invalid Display</code>
</span>
</dt>
<dd>
<p>The request body included a <code class="literal">display</code> configuration that, while syntactically correct, did not align with the content source&#8217;s <code class="literal">schema</code>.
This was not detected until after some updates may have been applied, but did prevent the display settings from being applied as expected.
The response includes both the current state of the updated content source, and the errors in configuring the display.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "updated" : { &lt;ContentSource&gt; },
  "errors" : [
    "Invalid display setting: title_field: \"title\" is not a field on the content source",
    "Invalid display setting: subtitle_field: \"states\" is not a field on the content source",
    "Invalid display setting: description_field: \"description\" is not a field on the content source",
    "Invalid display setting: url_field: \"nps_link\" is not a field on the content source",
    "Invalid display setting: detail_fields: \"states\" is not a field on the content source, \"description\" is not a field on the content source, \"date_established\" is not a field on the content source, \"visitors\" is not a field on the content source, \"location\" is not a field on the content source, \"world_heritage_site\" is not a field on the content source, \"square_km\" is not a field on the content source, \"acres\" is not a field on the content source"

  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>
The specified content source ID does not exist
</p>
<p>OR</p>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
</dd>
</dl>
</div>
<h3><a id="modifying-content-source-schema-api"></a>Modifying a content source&#8217;s schema<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Note that when making changes to a configurable or custom source&#8217;s schema, you can only add new schema fields or modify existing schema field types.</p>
<p>It is not currently possible to remove a schema field.
If a document was indexed with a field that should not be searchable, you must delete or reindex the document without the field present.
In some cases, it may be easier to remove and recreate the content source entirely to correct a schema.</p>
<h4><a id="update-content-source_schema-field-type"></a>Changing a content source&#8217;s schema field type for an existing field<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<p>If you need to change the type of a schema field, you need to issue an update request for the content source with the updated schema. The easiest way to do it would be first to issue a <code class="literal">GET</code> request to <a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api-request-examples" title="Request examples">get the whole content source body</a>, apply the changes you want to the schema and then <a class="xref" href="workplace-search-content-sources-api.html#update-content-source-api-request-body-example" title="Example">issue the update using the modified body</a>. For example, if the current schema is:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "schema": {
    "country": "text",
    "criteria": "text",
    "description": "text",
    "transboundary": "text",
    "title": "text",
    "type": "text",
    "url": "text",
    "year_added": "number",
    "location": "geolocation",
    "justification": "text",
    "area_hectacres": "number",
    "region": "text"
  }
}</pre>
</div>
<p>but your field type changed and now you want <code class="literal">year_added</code> to also be represented as text, you would simply replace it with:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">  "schema": {
    "country": "text",
    "criteria": "text",
    "description": "text",
    "transboundary": "text",
    "title": "text",
    "type": "text",
    "url": "text",
    "year_added": "text",
    "location": "geolocation",
    "justification": "text",
    "area_hectacres": "number",
    "region": "text"
  }</pre>
</div>
<h4><a id="add-content-source_schema-field"></a>Adding a content source&#8217;s schema field<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<p>If you need to add a new schema field, you need to issue an update request for the content source with the updated schema. The easiest way to do it would be first to issue a <code class="literal">GET</code> request to <a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api-request-examples" title="Request examples">get the whole content source body</a>, apply the changes you want to the schema and then <a class="xref" href="workplace-search-content-sources-api.html#update-content-source-api-request-body-example" title="Example">issue the update using the modified body</a>. For example, if the current schema is:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">  "schema": {
    "country": "text",
    "criteria": "text",
    "description": "text",
    "transboundary": "text",
    "title": "text",
    "type": "text",
    "url": "text",
    "year_added": "number",
    "location": "geolocation",
    "justification": "text",
    "area_hectacres": "number",
    "region": "text"
  }</pre>
</div>
<p>and you&#8217;re adding a new field of type <code class="literal">date</code>, you would just add it to the end of the list like this:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">  "schema": {
    "country": "text",
    "criteria": "text",
    "description": "text",
    "transboundary": "text",
    "title": "text",
    "type": "text",
    "url": "text",
    "year_added": "number",
    "location": "geolocation",
    "justification": "text",
    "area_hectacres": "number",
    "region": "text",
    "system_modified_date": "date"
  }</pre>
</div>
<h3><a id="upload-content-source-icon-api"></a>Upload content source icons<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Upload icons for a single custom content source.</p>
<p>Only custom content sources can be updated with this endpoint. Other service types cannot be updated programmatically.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">PUT /api/ws/v1/sources/&lt;content-source-id&gt;/icon</pre>
</div>
<h4><a id="upload-content-source-icon-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
<dt>
<span class="term">
<code class="literal">Content-Type</code>
</span>
</dt>
<dd>
<p><code class="literal">application/json</code>. This endpoint accepts only JSON PUT data.</p>
</dd>
</dl>
</div>
<h4><a id="upload-content-source-icon-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to be updated.</p>
</dd>
</dl>
</div>
<h4><a id="upload-content-source-icon-api-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Content source icon definition (required)
</span>
</dt>
<dd>
<p>The JSON object defining the icon of the content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">main_icon</code> (optional)
</span>
</dt>
<dd>
<p>Base64 encoded string of the main icon content, or <code class="literal">null</code> to delete the <code class="literal">main_icon</code>.</p>
<p>The <code class="literal">main_icon</code> will be displayed in Search Result Card. Default icon will be displayed if the <code class="literal">main_icon</code> is not provided.</p>
<p>The <code class="literal">main_icon</code> is required if there&#8217;s no <code class="literal">main_icon</code> uploaded for the content source.</p>
<p>The <code class="literal">main_icon</code> must not be over 1 MB in size.</p>
<p>The <code class="literal">main_icon</code> must be in the format of <code class="literal">PNG</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">alt_icon</code> (optional)
</span>
</dt>
<dd>
<p>Base64 encoded string of the alt icon content, or <code class="literal">null</code> to delete the <code class="literal">alt_icon</code>.</p>
<p>The <code class="literal">alt_icon</code> will be displayed in all places except Search Result Card. The <code class="literal">main_icon</code> will be displayed if the <code class="literal">alt_icon</code> is not provided. Default icon will be displayed if neither <code class="literal">main_icon</code> and <code class="literal">alt_icon</code> is provided.</p>
<p>The <code class="literal">alt_icon</code> must not be over 1 MB in size.</p>
<p>The <code class="literal">alt_icon</code> must be in the format of <code class="literal">PNG</code>.</p>
</dd>
</dl>
</div>
<h5><a id="upload-content-source-icon-api-request-body-example"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h5>
<p>Below is an example content source icon definition&#8217;s JSON representation:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "main_icon": "Base64 encoded string",
  "alt_icon": "Base64 encoded string"
}</pre>
</div>
<h4><a id="upload-content-source-icon-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'PUT' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources/$CONTENT_SOURCE_ID/icon" \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "main_icon": "Base64 encoded string",
  "alt_icon": "Base64 encoded string"
}
'</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'PUT' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID/icon" \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "main_icon": "Base64 encoded string",
  "alt_icon": "Base64 encoded string"
}
'</pre>
</div>
<h4><a id="upload-content-source-icon-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>An acknowledgement response is returned.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "results": {
    "main_icon": "success",
    "alt_icon": "success"
  }
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Non-custom content source</code>
</span>
</dt>
<dd>
<p>The content source is not a custom content source.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "Invalid parameter(s): Content source $CONTENT_SOURCE_ID is not a custom API source"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 No icon is provided</code>
</span>
</dt>
<dd>
<p>No icon is provided.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "At least one icon needs to be provided"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Alt icon is uploaded without main icon</code>
</span>
</dt>
<dd>
<p>Alt icon exists without main icon.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "Alt icon can't be uploaded without main icon"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Unsupported file type</code>
</span>
</dt>
<dd>
<p>The file type of the icon is not supported.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "Main icon must be in the format of image/png",
    "Alt icon must be in the format of image/png"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Uploaded icon size is over limit</code>
</span>
</dt>
<dd>
<p>The uploaded icon is over the maximum size allowed.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "Main icon exceeds the max size allowed: 1 MB",
    "Alt icon exceeds the max size allowed: 1 MB"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>
The specified content source ID does not exist
</p>
<p>OR</p>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
</dd>
</dl>
</div>
<h3><a id="remove-content-source-api"></a>Remove a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Remove a single content source by its ID.</p>
<p>Only organization content sources can be deleted with this endpoint.
Private content sources cannot be deleted with this endpoint.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">DELETE /api/ws/v1/sources/&lt;content-source-id&gt;</pre>
</div>
<h4><a id="remove-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="remove-content-source-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to be removed.</p>
</dd>
</dl>
</div>
<h4><a id="remove-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'DELETE' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'DELETE' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="remove-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>An acknowledgement that the content source was deleted</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{ "deleted" : true }</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The provided <code class="literal">content_source_id</code> is for a private content source, which is not allowed.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{ "errors": ["Invalid parameter(s): Private content sources cannot be deleted by this API"] }</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
</dd>
</dl>
</div>
<h3><a id="get-automatic-query-refinement-details-api"></a>Get a content source&#8217;s automatic query refinement details<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Where the contents of <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">Content source JSON representation</a> contain the user-defined <code class="literal">overrides</code> for <a class="xref" href="workplace-search-customizing-filters.html#enabling-automatic-query-refinement" title="Enabling automatic query refinement">automatic query refinements</a>, this API also includes the <code class="literal">defaults</code> for the content source, and the explicit <code class="literal">results</code> that can be logically derived from applying the <code class="literal">overrides</code> to the <code class="literal">defaults</code>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">GET /api/ws/v1/sources/&lt;content-source-id&gt;/automatic_query_refinement</pre>
</div>
<h4><a id="get-automatic-query-refinement-details-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="get-automatic-query-refinement-details-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source that contains the desired document.</p>
</dd>
</dl>
</div>
<h4><a id="get-automatic-query-refinement-details-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources/$CONTENT_SOURCE_ID/automatic_query_refinement" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID/automatic_query_refinement" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="get-automatic-query-refinement-details-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single content source&#8217;s automatic query refinement details are returned.</p>
<p>This includes the <code class="literal">defaults</code> for the content source, the user-provided <code class="literal">overrides</code>, and the <code class="literal">results</code> of logically combining the <code class="literal">defaults</code> with the <code class="literal">overrides</code></p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "overrides": [
    {
      "field": "one",
      "enabled": true,
      "query_expansion_phrases": [
        "one is"
      ],
      "is_person": false
    },
    {
      "field": "two",
      "enabled": true,
      "query_expansion_phrases": [
        "two is"
      ],
      "is_person": false
    }
  ],
  "defaults": [
    {
      "field": "assigned_to",
      "query_expansion_phrases": [
        "assigned to"
      ],
      "is_person": true
    },
    {
      "field": "created_by",
      "query_expansion_phrases": [
        "creator is",
        "created by",
        "edited by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "created_by_email",
      "query_expansion_phrases": [
        "creator is",
        "created by",
        "edited by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "shared_by",
      "query_expansion_phrases": [
        "from",
        "shared by"
      ],
      "is_person": true
    },
    {
      "field": "shared_by_email",
      "query_expansion_phrases": [
        "from",
        "shared by"
      ],
      "is_person": true
    },
    {
      "field": "updated_by",
      "query_expansion_phrases": [
        "edited by",
        "updated by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "updated_by_email",
      "query_expansion_phrases": [
        "edited by",
        "updated by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "extension",
      "query_expansion_phrases": [],
      "is_person": false
    },
    {
      "field": "status",
      "query_expansion_phrases": [
        "with status",
        "status is",
        "in state",
        ""
      ],
      "is_person": false
    },
    {
      "field": "state",
      "query_expansion_phrases": [
        "with state",
        "state is",
        "in state",
        ""
      ],
      "is_person": false
    },
    {
      "field": "tags",
      "query_expansion_phrases": [
        "with tag",
        "tagged",
        "tagged with"
      ],
      "is_person": false
    },
    {
      "field": "type",
      "query_expansion_phrases": [],
      "is_person": false
    },
    {
      "field": "impact",
      "query_expansion_phrases": [
        "with impact",
        "impact is"
      ],
      "is_person": false
    },
    {
      "field": "urgency",
      "query_expansion_phrases": [
        "with urgency",
        "urgency is"
      ],
      "is_person": false
    },
    {
      "field": "priority",
      "query_expansion_phrases": [
        "with priority",
        "priority is"
      ],
      "is_person": false
    },
    {
      "field": "office_location",
      "query_expansion_phrases": [
        "in",
        "from",
        "located in"
      ],
      "is_person": false
    }
  ],
  "results": [
    {
      "field": "assigned_to",
      "query_expansion_phrases": [
        "assigned to"
      ],
      "is_person": true
    },
    {
      "field": "created_by",
      "query_expansion_phrases": [
        "creator is",
        "created by",
        "edited by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "created_by_email",
      "query_expansion_phrases": [
        "creator is",
        "created by",
        "edited by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "shared_by",
      "query_expansion_phrases": [
        "from",
        "shared by"
      ],
      "is_person": true
    },
    {
      "field": "shared_by_email",
      "query_expansion_phrases": [
        "from",
        "shared by"
      ],
      "is_person": true
    },
    {
      "field": "updated_by",
      "query_expansion_phrases": [
        "edited by",
        "updated by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "updated_by_email",
      "query_expansion_phrases": [
        "edited by",
        "updated by",
        "modified by"
      ],
      "is_person": true
    },
    {
      "field": "extension",
      "query_expansion_phrases": [],
      "is_person": false
    },
    {
      "field": "status",
      "query_expansion_phrases": [
        "with status",
        "status is",
        "in state",
        ""
      ],
      "is_person": false
    },
    {
      "field": "state",
      "query_expansion_phrases": [
        "with state",
        "state is",
        "in state",
        ""
      ],
      "is_person": false
    },
    {
      "field": "tags",
      "query_expansion_phrases": [
        "with tag",
        "tagged",
        "tagged with"
      ],
      "is_person": false
    },
    {
      "field": "type",
      "query_expansion_phrases": [],
      "is_person": false
    },
    {
      "field": "impact",
      "query_expansion_phrases": [
        "with impact",
        "impact is"
      ],
      "is_person": false
    },
    {
      "field": "urgency",
      "query_expansion_phrases": [
        "with urgency",
        "urgency is"
      ],
      "is_person": false
    },
    {
      "field": "priority",
      "query_expansion_phrases": [
        "with priority",
        "priority is"
      ],
      "is_person": false
    },
    {
      "field": "office_location",
      "query_expansion_phrases": [
        "in",
        "from",
        "located in"
      ],
      "is_person": false
    },
    {
      "field": "one",
      "query_expansion_phrases": [
        "one is"
      ],
      "is_person": false
    },
    {
      "field": "two",
      "query_expansion_phrases": [
        "two is"
      ],
      "is_person": false
    }
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The authenticated user has specified a private content source that is not theirs, and they therefore do not have permission.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
</dd>
</dl>
</div>
<h3><a id="get-document-by-id-api"></a>Get a document<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Retrieve a single content source document, given the IDs of both the content source and the document.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">GET /api/ws/v1/sources/&lt;content-source-id&gt;/documents/&lt;document-id&gt;</pre>
</div>
<h4><a id="get-document-by-id-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="get-document-by-id-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source that contains the desired document.</p>
</dd>
<dt>
<span class="term">
<code class="literal">document-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the document to be retrieved.</p>
</dd>
</dl>
</div>
<h4><a id="get-document-by-id-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io:443/api/ws/v1/sources/$CONTENT_SOURCE_ID/documents/$DOCUMENT_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID/documents/$DOCUMENT_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="get-document-by-id-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single content source document is returned.</p>
<p>The only guaranteed response fields are <code class="literal">id</code>, <code class="literal">source</code>, <code class="literal">content_source_id</code>, and <code class="literal">last_updated</code>.
The others are content source specific, and must be part of the content source&#8217;s schema.
You can view a content source&#8217;s schema with the <a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api" title="Get a content source">get content source API</a>.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "id":  "some_string_id",
  "source": "custom",
  "content_source_id": "603d2c8319cbdbc907675c02",
  "last_updated": "2021-03-02T22:41:16+00:00",
  "some_text_field": "some text value",
  "some_number_field": 42,
  "some_date_field": "2021-03-02T22:41:16+00:00",
  "some_geolocation_field": "44.35,-68.21",
  "_allow_permissions": ["perm1", "perm2"],
  "_deny_permissions": ["perm3", "perm4"]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The authenticated user has specified a private content source that is not theirs, and they therefore do not have permission.</p>
<p>OR</p>
<p>The specified document has document-level-permissions which prohibit access to the authenticated user.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
<p>OR</p>
<p>The provided <code class="literal">document_id</code> does not exist.</p>
</dd>
</dl>
</div>
<h3><a id="content-source-jobs-api"></a>Manage content source synchronization<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Manage the synchronization state of the content source - either by starting a new synchronization job or by interrupting an existing one with per job-type granularity.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">POST /api/ws/v1/sources/&lt;content-source-id&gt;/sync/jobs</pre>
</div>
<div class="content-source-jobs-api-request-headers">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_request_headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="content-source-jobs-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to operate on.</p>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_query_parameters"></a>Query Parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">job-type</code> (optional)
</span>
</dt>
<dd>
<p>Array of strings that contains job types to run the command for. Allowed values are: <em>full</em>, <em>incremental</em>, <em>delete</em>, <em>permissions</em>. If this value is omitted, all job types will be considered.</p>
</dd>
</dl>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_request_body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">command</code> (required)
</span>
</dt>
<dd>
<p>The string <code class="literal">start</code> or the string <code class="literal">interrupt</code>.
The value specifies the type of job command to run.</p>
<p>Submit a <em>start</em> command to start a synchronization job or jobs for a content source according to the <code class="literal">job-type</code> query parameter. If some of the jobs are already running, an error will be returned. To restart these jobs instead of receiving an error, see <code class="literal">force_interrupt</code> flag.</p>
<p>Submit an <em>interrupt</em> command to interrupt a running synchronization job or jobs according to the <code class="literal">job-type</code> query parameter. No error is produced if no job of the specified type is running.</p>
</dd>
<dt>
<span class="term">
<code class="literal">force_interrupt</code> (optional)
</span>
</dt>
<dd>
<p>The boolean that can be provided if the <code class="literal">start</code> command is sent. <code class="literal">force_interrupt: true</code> will indicate that the system needs to interrupt jobs of specified types before starting new ones.</p>
</dd>
</dl>
</div>
<h4><a id="content-source-jobs-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<p><em>Start</em> synchronization job request template:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'POST' \
--url '&lt;WORKPLACE_SEARCH_BASE_URL&gt;/api/ws/v1/sources/&lt;content-source-id&gt;/sync/jobs' \
--header 'Authorization: Bearer &lt;ACCESS_TOKEN&gt;' \
--header 'Content-Type: application/json' \
--data '{
    "command": "start",
    "force_interrupt": false
}'</pre>
</div>
<p><em>Interrupt</em> synchronization job template:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request 'POST' \
--url '&lt;WORKPLACE_SEARCH_BASE_URL&gt;/api/ws/v1/sources/&lt;content-source-id&gt;/sync/jobs' \
--header 'Authorization: Bearer &lt;ACCESS_TOKEN&gt;' \
--header 'Content-Type: application/json' \
--data '{
    "command": "interrupt"
}'</pre>
</div>
<h4><a id="content-source-jobs-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.16/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>A results object is returned that contains information about the affected jobs.</p>
<p>When a <code class="literal">start</code> command is issued, an array of affected jobs is contained in a <code class="literal">started</code> field. When an <code class="literal">interrupt</code> command is issued, an array of affected jobs is contained in an <code class="literal">interrupted</code> field.
Jobs are guaranteed to have the following fields: <code class="literal">id</code>, <code class="literal">job_type</code>, <code class="literal">status</code>, <code class="literal">created_at</code> and <code class="literal">last_updated_at</code>.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "results": {
        "started": [
            {
                "id": "6103d19a5917cd61ab13665f",
                "job_type": "full",
                "status": "enqueued",
                "created_at": "2021-07-30T10:16:58+00:00",
                "last_updated_at": "2021-07-30T10:16:58+00:00"
            },
            {
                "id": "6103d19b5917cd61ab136660",
                "job_type": "incremental",
                "status": "enqueued",
                "created_at": "2021-07-30T10:16:59+00:00",
                "last_updated_at": "2021-07-30T10:16:59+00:00"
            },
            {
                "id": "6103d19b5917cd61ab136661",
                "job_type": "delete",
                "status": "enqueued",
                "created_at": "2021-07-30T10:16:59+00:00",
                "last_updated_at": "2021-07-30T10:16:59+00:00"
            },
            {
                "id": "6103d19b5917cd61ab136662",
                "job_type": "permissions",
                "status": "enqueued",
                "created_at": "2021-07-30T10:16:59+00:00",
                "last_updated_at": "2021-07-30T10:16:59+00:00"
            }
        ]
    }
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The request body did not meet requirements.
See the <code class="literal">errors</code> array to determine what may be wrong.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request, or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The authenticated user has specified a private content source that is not theirs, and they therefore do not have permission.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
</dd>
</dl>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="workplace-search-api-authentication.html">« API Authentication Reference</a>
</span>
<span class="next">
<a href="workplace-search-custom-sources-api.html">Custom sources indexing API reference »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
