<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>配置 Kibana | Kibana 用户手册 | Elastic</title>
<link rel="home" href="index.html" title="Kibana 用户手册"/>
<link rel="up" href="setup.html" title="搭建"/>
<link rel="prev" href="windows.html" title="在 Windows 上安装 Kibana"/>
<link rel="next" href="docker.html" title="Docker 容器中运行 Kibana"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="6.0"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana 用户手册</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">搭建</a></span>
»
<span class="breadcrumb-node">配置 Kibana</span>
</div>
<div class="navheader">
<span class="prev">
<a href="windows.html">« 在 Windows 上安装 Kibana</a>
</span>
<span class="next">
<a href="docker.html">Docker 容器中运行 Kibana »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="settings"></a>配置 Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elasticsearch-cn/kibana/edit/cn/docs/setup/settings.asciidoc">edit</a></h2>
</div></div></div>
<p>Kibana server 启动时从 <code class="literal">kibana.yml</code> 文件中读取配置属性。Kibana 默认配置 <code class="literal">localhost:5601</code> 。改变主机和端口号，或者连接其他机器上的 Elasticsearch，需要更新 <code class="literal">kibana.yml</code> 文件。也可以启用 SSL 和设置其他选项。</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">server.port:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 5601</strong></span> Kibana 由后端服务器提供服务，该配置指定使用的端口号。
</dd>
<dt>
<span class="term">
<code class="literal">server.host:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: "localhost"</strong></span> 指定后端服务器的主机地址。
</dd>
<dt>
<span class="term">
<code class="literal">server.basePath:</code>
</span>
</dt>
<dd>
如果启用了代理，指定 Kibana 的路径，该配置项只影响 Kibana 生成的 URLs，转发请求到 Kibana 时代理会移除基础路径值，该配置项不能以斜杠 (<code class="literal">/</code>)结尾。
</dd>
<dt>
<span class="term">
<code class="literal">server.maxPayloadBytes:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 1048576</strong></span> 服务器请求的最大负载，单位字节。
</dd>
<dt>
<span class="term">
<code class="literal">server.name:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: "您的主机名"</strong></span> Kibana 实例对外展示的名称。
</dd>
<dt>
<span class="term">
<code class="literal">server.defaultRoute:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: "/app/kibana"</strong></span> Kibana 的默认路径，该配置项可改变 Kibana 的登录页面。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.url:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: "http://localhost:9200"</strong></span> 用来处理所有查询的 Elasticsearch 实例的 URL 。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.preserveHost:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: true</strong></span> 该设置项的值为 true 时，Kibana 使用 <em>server.host</em> 设定的主机名，该设置项的值为 <em>false</em> 时，Kibana 使用主机的主机名来连接 Kibana 实例。
</dd>
<dt>
<span class="term">
<code class="literal">kibana.index:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: ".kibana"</strong></span> Kibana 使用 Elasticsearch 中的索引来存储保存的检索，可视化控件以及仪表板。如果没有索引，Kibana 会创建一个新的索引。
</dd>
<dt>
<span class="term">
<code class="literal">kibana.defaultAppId:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: "discover"</strong></span> 默认加载的应用。
</dd>
<dt>
<span class="term">
<a id="tilemap-settings"></a><code class="literal">tilemap.url:</code>
</span>
</dt>
<dd>
Kibana 用来在 tile 地图可视化组件中展示地图服务的 URL。默认时，Kibana 从外部的元数据服务读取 url，用户也可以覆盖该参数，使用自己的 tile 地图服务。例如：<code class="literal">"https://tiles.elastic.co/v2/default/{z}/{x}/{y}.png?elastic_tile_service_tos=agree&amp;my_app_name=kibana"</code>
</dd>
<dt>
<span class="term">
<code class="literal">tilemap.options.minZoom:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 1</strong></span> 最小缩放级别。
</dd>
<dt>
<span class="term">
<code class="literal">tilemap.options.maxZoom:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 10</strong></span> 最大缩放级别。
</dd>
<dt>
<span class="term">
<code class="literal">tilemap.options.attribution:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: <code class="literal">"© [Elastic Tile Service](https://www.elastic.co/elastic-tile-service)"</code></strong></span> 地图属性字符串。
</dd>
<dt>
<span class="term">
<code class="literal">tilemap.options.subdomains:</code>
</span>
</dt>
<dd>
服务使用的二级域名列表，用 <code class="literal">{s}</code> 指定二级域名的 URL 地址。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.username:</code> 和 <code class="literal">elasticsearch.password:</code>
</span>
</dt>
<dd>
Elasticsearch 设置了基本的权限认证，该配置项提供了用户名和密码，用于 Kibana 启动时维护索引。Kibana 用户仍需要 Elasticsearch 由 Kibana 服务端代理的认证。
</dd>
<dt>
<span class="term">
<code class="literal">server.ssl.enabled</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: "false"</strong></span> 对到浏览器端的请求启用 SSL，设为 <code class="literal">true</code> 时， <code class="literal">server.ssl.certificate</code> 和 <code class="literal">server.ssl.key</code> 也要设置。
</dd>
<dt>
<span class="term">
<code class="literal">server.ssl.certificate:</code> 和 <code class="literal">server.ssl.key:</code>
</span>
</dt>
<dd>
PEM 格式 SSL 证书和 SSL 密钥文件的路径。
</dd>
<dt>
<span class="term">
<code class="literal">server.ssl.keyPassphrase</code>
</span>
</dt>
<dd>
解密私钥的口令，该设置项可选，因为密钥可能没有加密。
</dd>
<dt>
<span class="term">
<code class="literal">server.ssl.certificateAuthorities</code>
</span>
</dt>
<dd>
可信任 PEM 编码的证书文件路径列表。
</dd>
<dt>
<span class="term">
<code class="literal">server.ssl.supportedProtocols</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: TLSv1、TLSv1.1、TLSv1.2</strong></span>  版本支持的协议，有效的协议类型: <code class="literal">TLSv1</code> 、 <code class="literal">TLSv1.1</code> 、 <code class="literal">TLSv1.2</code> 。
</dd>
<dt>
<span class="term">
<code class="literal">server.ssl.cipherSuites</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: ECDHE-RSA-AES128-GCM-SHA256, ECDHE-ECDSA-AES128-GCM-SHA256, ECDHE-RSA-AES256-GCM-SHA384, ECDHE-ECDSA-AES256-GCM-SHA384, DHE-RSA-AES128-GCM-SHA256, ECDHE-RSA-AES128-SHA256, DHE-RSA-AES128-SHA256, ECDHE-RSA-AES256-SHA384, DHE-RSA-AES256-SHA384, ECDHE-RSA-AES256-SHA256, DHE-RSA-AES256-SHA256, HIGH,!aNULL, !eNULL, !EXPORT, !DES, !RC4, !MD5, !PSK, !SRP, !CAMELLIA</strong></span>.
具体格式和有效参数可通过[OpenSSL cipher list format documentation](<a href="https://www.openssl.org/docs/man1.0.2/apps/ciphers.html#CIPHER-LIST-FORMAT" class="ulink" target="_top">https://www.openssl.org/docs/man1.0.2/apps/ciphers.html#CIPHER-LIST-FORMAT</a>) 获得。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.ssl.certificate:</code> 和 <code class="literal">elasticsearch.ssl.key:</code>
</span>
</dt>
<dd>
可选配置项，提供 PEM格式 SSL 证书和密钥文件的路径。这些文件确保 Elasticsearch 后端使用同样的密钥文件。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.ssl.keyPassphrase</code>
</span>
</dt>
<dd>
解密私钥的口令，该设置项可选，因为密钥可能没有加密。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.ssl.certificateAuthorities:</code>
</span>
</dt>
<dd>
指定用于 Elasticsearch 实例的 PEM 证书文件路径。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.ssl.verificationMode:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: full</strong></span> 控制证书的认证，可用的值有 <code class="literal">none</code> 、 <code class="literal">certificate</code> 、 <code class="literal">full</code> 。 <code class="literal">full</code> 执行主机名验证，<code class="literal">certificate</code> 不执行主机名验证。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.pingTimeout:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: <code class="literal">elasticsearch.requestTimeout</code> setting</strong></span> 的值，等待 Elasticsearch 的响应时间。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.requestTimeout:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 30000</strong></span> 等待后端或 Elasticsearch 的响应时间，单位微秒，该值必须为正整数。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.requestHeadersWhitelist:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: <code class="literal">[ 'authorization' ]</code></strong></span> Kibana 客户端发送到 Elasticsearch 头体，发送 <span class="strong strong"><strong>no</strong></span> 头体，设置该值为[]。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.customHeaders:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: <code class="literal">{}</code></strong></span> 发往 Elasticsearch的头体和值， 不管 <code class="literal">elasticsearch.requestHeadersWhitelist</code> 如何配置，任何自定义的头体不会被客户端头体覆盖。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.shardTimeout:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 0</strong></span> Elasticsearch 等待分片响应时间，单位微秒，0即禁用。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.startupTimeout:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 5000</strong></span> Kibana 启动时等待 Elasticsearch 的时间，单位微秒。
</dd>
<dt>
<span class="term">
<code class="literal">pid.file:</code>
</span>
</dt>
<dd>
指定 Kibana 的进程 ID 文件的路径。
</dd>
<dt>
<span class="term">
<code class="literal">logging.dest:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: <code class="literal">stdout</code></strong></span> 指定 Kibana 日志输出的文件。
</dd>
<dt>
<span class="term">
<code class="literal">logging.silent:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: false</strong></span> 该值设为 <code class="literal">true</code> 时，禁止所有日志输出。
</dd>
<dt>
<span class="term">
<code class="literal">logging.quiet:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: false</strong></span> 该值设为 <code class="literal">true</code> 时，禁止除错误信息除外的所有日志输出。
</dd>
<dt>
<span class="term">
<code class="literal">logging.verbose</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: false</strong></span> 该值设为 <code class="literal">true</code> 时，记下所有事件包括系统使用信息和所有请求的日志。
</dd>
<dt>
<span class="term">
<code class="literal">ops.interval</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: 5000</strong></span> 设置系统和进程取样间隔，单位微妙，最小值100。
</dd>
<dt>
<span class="term">
<code class="literal">status.allowAnonymous</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: false</strong></span> 如果启用了权限，该项设置为 <code class="literal">true</code> 即允许所有非授权用户访问 Kibana 服务端 API 和状态页面。
</dd>
<dt>
<span class="term">
<code class="literal">cpu.cgroup.path.override</code>
</span>
</dt>
<dd>
如果挂载点跟 <code class="literal">/proc/self/cgroup</code> 不一致，覆盖 cgroup cpu 路径。
</dd>
<dt>
<span class="term">
<code class="literal">cpuacct.cgroup.path.override</code>
</span>
</dt>
<dd>
如果挂载点跟 <code class="literal">/proc/self/cgroup</code> 不一致，覆盖 cgroup cpuacct 路径。
</dd>
<dt>
<span class="term">
<code class="literal">console.enabled</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: true</strong></span> 设为 false 来禁用控制台，切换该值后服务端下次启动时会重新生成资源文件，因此会导致页面服务有点延迟。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.url:</code>
</span>
</dt>
<dd>
Elasticsearch tribe 实例的 URL，用于所有查询。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.username:</code> 和 <code class="literal">elasticsearch.tribe.password:</code>
</span>
</dt>
<dd>
Elasticsearch 设置了基本的权限认证，该配置项提供了用户名和密码，用于 Kibana 启动时维护索引。Kibana 用户仍需要 Elasticsearch 由 Kibana 服务端代理的认证。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.ssl.certificate:</code> 和 <code class="literal">elasticsearch.tribe.ssl.key:</code>
</span>
</dt>
<dd>
可选配置项，提供 PEM 格式 SSL 证书和密钥文件的路径。这些文件确保 Elasticsearch 后端使用同样的密钥文件。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.ssl.keyPassphrase</code>
</span>
</dt>
<dd>
解密私钥的口令，该设置项可选，因为密钥可能没有加密。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.ssl.certificateAuthorities:</code>
</span>
</dt>
<dd>
指定用于 Elasticsearch tribe 实例的 PEM 证书文件路径。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.ssl.verificationMode:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: full</strong></span> 控制证书的认证，可用的值有 <code class="literal">none</code> 、 <code class="literal">certificate</code> 、 <code class="literal">full</code> 。 <code class="literal">full</code> 执行主机名验证， <code class="literal">certificate</code> 不执行主机名验证。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.pingTimeout:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值:  <code class="literal">elasticsearch.tribe.requestTimeout</code> setting</strong></span> 的值，等待 Elasticsearch 的响应时间。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.requestTimeout:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>Default: 30000</strong></span> 等待后端或 Elasticsearch 的响应时间，单位微秒，该值必须为正整数。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.requestHeadersWhitelist:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: <code class="literal">[ 'authorization' ]</code></strong></span> Kibana 发往 Elasticsearch 的客户端头体，发送 <span class="strong strong"><strong>no</strong></span> 头体，设置该值为[]。
</dd>
<dt>
<span class="term">
<code class="literal">elasticsearch.tribe.customHeaders:</code>
</span>
</dt>
<dd>
<span class="strong strong"><strong>默认值: <code class="literal">{}</code></strong></span> 发往 Elasticsearch的头体和值，不管 <code class="literal">elasticsearch.tribe.requestHeadersWhitelist</code> 如何配置，任何自定义的头体不会被客户端头体覆盖。
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="windows.html">« 在 Windows 上安装 Kibana</a>
</span>
<span class="next">
<a href="docker.html">Docker 容器中运行 Kibana »</a>
</span>
</div>
</div>
</body>
</html>
