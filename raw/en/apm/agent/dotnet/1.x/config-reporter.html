<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Reporter configuration options | APM .NET Agent Reference [1.x] | Elastic</title>
<link rel="home" href="index.html" title="APM .NET Agent Reference [1.x]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="config-core.html" title="Core configuration options"/>
<link rel="next" href="config-http.html" title="HTTP configuration options"/>
<meta name="DC.type" content="Learn/Docs/APM .NET Agent/Reference/1.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="1.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM .NET Agent Reference [1.x]</a></span>
»
<span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
»
<span class="breadcrumb-node">Reporter configuration options</span>
</div>
<div class="navheader">
<span class="prev">
<a href="config-core.html">« Core configuration options</a>
</span>
<span class="next">
<a href="config-http.html">HTTP configuration options »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="config-reporter"></a>Reporter configuration options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h2>
</div></div></div>
<h4><a id="config-server-url"></a><code class="literal">ServerUrl</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>The URL for your APM Server. The URL must be fully qualified, including protocol (<code class="literal">http</code> or <code class="literal">https</code>) and port.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Use of <code class="literal">ServerUrls</code> is deprecated. Use <code class="literal">ServerUrl</code>.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVER_URL</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:ServerUrl</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">http://localhost:8200</code></p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-secret-token"></a><code class="literal">SecretToken</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>A string used to ensure that only your agents can send data to your APM server.</p>
<p>Both the agents and the APM server have to be configured with the same secret token.
Use this setting in case the APM Server requires a token (e.g. APM Server in Elastic Cloud).</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>the <code class="literal">SecretToken</code> is sent as plain-text in every request to the server, so you should also secure
your communications using HTTPS. Unless you do so, your API Key could be observed by an attacker.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SECRET_TOKEN</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:SecretToken</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-api-key"></a><code class="literal">ApiKey</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.4</span>]
<span class="Admonishment-detail">
Added in 1.4.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>A base64-encoded string used to ensure that only your agents can send data to your APM server.
You must have created the API key using the APM server&#8217;s <a href="/guide/en/apm/server/7.11/api-key.html" class="ulink" target="_top">command line tool</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is fully supported in the APM Server versions &gt;= 7.6.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>the <code class="literal">APIKey</code> is sent as plain-text in every request to the server, so you should also secure
your communications using HTTPS. Unless you do so, your API Key could be observed by an attacker.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_API_KEY</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:ApiKey</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>A base64-encoded string</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-verify-server-cert"></a><code class="literal">VerifyServerCert</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.3</span>]
<span class="Admonishment-detail">
Added in 1.3.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>By default, the agent verifies the SSL certificate if you use an HTTPS connection to the APM server.</p>
<p>Verification can be disabled by changing this setting to false.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_VERIFY_SERVER_CERT</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:VerifyServerCert</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-flush-interval"></a><code class="literal">FlushInterval</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.1</span>]
<span class="Admonishment-detail">
Added in 1.1.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>The maximal amount of time events are held in the queue until there is enough to send a batch.
It&#8217;s possible for a batch to contain less than <a class="xref" href="config-reporter.html#config-max-batch-event-count" title="MaxBatchEventCount ()"><code class="literal">MaxBatchEventCount</code></a> events
if there are events that need to be sent out because they were held for too long.
A lower value will increase the load on your APM server,
while a higher value can increase the memory pressure on your app.
A higher value also impacts the time until transactions are indexed and searchable in Elasticsearch.</p>
<p>Supports the duration suffixes <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
Example: <code class="literal">30s</code>.
The default unit for this option is <code class="literal">s</code>.</p>
<p>If <code class="literal">FlushInterval</code> is set to <code class="literal">0</code> (or <code class="literal">0s</code>, <code class="literal">0ms</code>, etc.) and
there&#8217;s no event sending operation still in progress
then the Agent won&#8217;t hold events in the queue and instead will send them immediately.</p>
<p>Setting <code class="literal">FlushInterval</code> to a negative value (for example <code class="literal">-1</code>, <code class="literal">-54s</code>, <code class="literal">-89ms</code>, etc.) is invalid and
in that case agent uses the default value instead.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_FLUSH_INTERVAL</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:FlushInterval</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">10s</code></p></td>
<td align="left" valign="top"><p>TimeDuration</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-max-batch-event-count"></a><code class="literal">MaxBatchEventCount</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.1</span>]
<span class="Admonishment-detail">
Added in 1.1.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>The maximal number of events to send in a batch.
It&#8217;s possible for a batch to contain less then the maximum events
if there are events that need to be sent out because they were held for too long
 (see <a class="xref" href="config-reporter.html#config-flush-interval" title="FlushInterval ()"><code class="literal">FlushInterval</code></a>).</p>
<p>Setting <code class="literal">MaxBatchEventCount</code> to 0 or a negative value is invalid and
in that case the Agent will use the default value instead.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_MAX_BATCH_EVENT_COUNT</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:MaxBatchEventCount</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>Integer</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-max-queue-event-count"></a><code class="literal">MaxQueueEventCount</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.1</span>]
<span class="Admonishment-detail">
Added in 1.1.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>The maximum number of events to hold in the queue as candidates to be sent.
If the queue is at its maximum capacity then the agent discards the new events
until the queue has free space.</p>
<p>Setting <code class="literal">MaxQueueEventCount</code> to 0 or a negative value is invalid and
in that case the Agent will use the default value instead.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_MAX_QUEUE_EVENT_COUNT</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:MaxQueueEventCount</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1000</p></td>
<td align="left" valign="top"><p>Integer</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-metrics-interval"></a><code class="literal">MetricsInterval</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.0.0-beta1</span>]
<span class="Admonishment-detail">
Added in 1.0.0-beta1.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>The interval at which the agent sends metrics to the APM Server.
Must be at least <code class="literal">1s</code>.
Set to <code class="literal">0s</code> to deactivate.</p>
<p>Supports the duration suffixes <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
Example: <code class="literal">30s</code>.
The default unit for this option is <code class="literal">s</code>.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">30s</code></p></td>
<td align="left" valign="top"><p>TimeDuration</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_METRICS_INTERVAL</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:MetricsInterval</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-disable-metrics"></a><code class="literal">DisableMetrics</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.3.0</span>]
<span class="Admonishment-detail">
Added in 1.3.0.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>Disables the collection of certain metrics. If the name of a metric matches any of the wildcard expressions, it will not be collected. Example: <code class="literal">foo.*,bar.*</code></p>
<p>You can find the name of the available metrics in <a class="xref" href="metrics.html" title="Metrics"><em>Metrics</em></a>.</p>
<p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters. Examples: <code class="literal">/foo/*/bar/*/baz*, *foo*</code>. Matching is case insensitive by default. Prepending an element with (?-i) makes the matching case sensitive.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>&lt;none&gt;</p></td>
<td align="left" valign="top"><p>List&lt;string&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DISABLE_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:DisableMetrics</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-cloud-provider"></a><code class="literal">CloudProvider</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.7.0</span>]
<span class="Admonishment-detail">
Added in 1.7.0.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>Allows you to specify which cloud provider should be assumed for metadata collection. By default, the agent will attempt to detect the cloud provider and, if that fails, use trial and error to collect the metadata.</p>
<p>Valid options are <code class="literal">"auto"</code>, <code class="literal">"aws"</code>, <code class="literal">"gcp"</code>, <code class="literal">"azure"</code>, and <code class="literal">"none"</code>. If this config value is set to <code class="literal">"none"</code>, no cloud metadata will be collected. If set to any of
<code class="literal">"aws"</code>, <code class="literal">"gcp"</code>, or <code class="literal">"azure"</code>, attempts to collect metadata will only be performed
from the chosen provider.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CLOUD_PROVIDER</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:CloudProvider</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">auto</code></p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="config-core.html">« Core configuration options</a>
</span>
<span class="next">
<a href="config-http.html">HTTP configuration options »</a>
</span>
</div>
</div>
</body>
</html>
