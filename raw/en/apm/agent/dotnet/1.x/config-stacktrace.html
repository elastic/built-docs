<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Stacktrace configuration options | APM .NET Agent Reference [1.x] | Elastic</title>
<link rel="home" href="index.html" title="APM .NET Agent Reference [1.x]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="config-http.html" title="HTTP configuration options"/>
<link rel="next" href="config-supportability.html" title="Supportability configuration options"/>
<meta name="DC.type" content="Learn/Docs/APM .NET Agent/Reference/1.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="1.x"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM .NET Agent Reference [1.x]</a></span>
»
<span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
»
<span class="breadcrumb-node">Stacktrace configuration options</span>
</div>
<div class="navheader">
<span class="prev">
<a href="config-http.html">« HTTP configuration options</a>
</span>
<span class="next">
<a href="config-supportability.html">Supportability configuration options »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="config-stacktrace"></a>Stacktrace configuration options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h2>
</div></div></div>
<h4><a id="config-application-namespaces"></a><code class="literal">ApplicationNamespaces</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.5</span>]
<span class="Admonishment-detail">
Added in 1.5.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>Used to determine whether a stack trace frame is an in-app frame or a library frame. When defined, all namespaces that do not start with one of the values of this collection are ignored when determining error culprit.</p>
<p>Multiple namespaces can be configured as a comma separated list. For example: <code class="literal">"MyAppA, MyAppB"</code>.</p>
<p>This suppresses any configuration of <code class="literal">ExcludedNamespaces</code>.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>&lt;empty string&gt;</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_APPLICATION_NAMESPACES</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:ApplicationNamespaces</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-excluded-namespaces"></a><code class="literal">ExcludedNamespaces</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.5</span>]
<span class="Admonishment-detail">
Added in 1.5.
</span>
</span>)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p>A list of namespaces to exclude when reading an exception&#8217;s StackTrace to determine the culprit.</p>
<p>Namespaces are checked with <code class="literal">string.StartsWith()</code>, so "System." matches all System namespaces.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>"System., Microsoft., MS., FSharp., Newtonsoft.Json, Serilog, NLog, Giraffe."</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_EXCLUDED_NAMESPACES</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:ExcludedNamespaces</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="config-stack-trace-limit"></a><code class="literal">StackTraceLimit</code> (performance)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h3>
</div></div></div>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<p>Setting it to 0 will disable stack trace collection. Any positive integer value will be used as the maximum number of frames to collect. Setting it to -1 means that all frames will be collected.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">50</code></p></td>
<td align="left" valign="top"><p>Integer</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_STACK_TRACE_LIMIT</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:StackTraceLimit</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-span-frames-min-duration"></a><code class="literal">SpanFramesMinDuration</code> (performance)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<p><a class="xref" href="configuration.html#dynamic-configuration" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<p>In its default settings,
the APM agent collects a stack trace for every recorded span with duration longer than 5ms.
While this is very helpful to find the exact place in your code that causes the span,
collecting this stack trace does have some overhead.
When setting this option to a negative value, like <code class="literal">-1ms</code>, stack traces will be collected for all spans.
Setting it to a positive value, e.g. <code class="literal">5ms</code>,
will limit stack trace collection to spans with durations equal to or longer than the given value,
e.g. 5 milliseconds.</p>
<p>To disable stack trace collection for spans completely, set the value to <code class="literal">0ms</code>.</p>
<p>Supports the duration suffixes <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
Example: <code class="literal">5ms</code>.
The default unit for this option is <code class="literal">ms</code></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">5ms</code></p></td>
<td align="left" valign="top"><p>TimeDuration</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">IConfiguration or Web.config key</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_FRAMES_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">ElasticApm:SpanFramesMinDuration</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="config-http.html">« HTTP configuration options</a>
</span>
<span class="next">
<a href="config-supportability.html">Supportability configuration options »</a>
</span>
</div>
</div>
</body>
</html>
