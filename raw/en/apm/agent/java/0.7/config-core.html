<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Core configuration options | APM Java Agent Reference (Beta) [0.7] | Elastic</title>
<link rel="home" href="index.html" title="APM Java Agent Reference (Beta) [0.7]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="configuration.html" title="Configuration"/>
<link rel="next" href="config-http.html" title="HTTP configuration options"/>
<meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/0.7"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="0.7"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM Java Agent Reference (Beta) [0.7]</a></span>
»
<span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
»
<span class="breadcrumb-node">Core configuration options</span>
</div>
<div class="navheader">
<span class="prev">
<a href="configuration.html">« Configuration</a>
</span>
<span class="next">
<a href="config-http.html">HTTP configuration options »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="config-core"></a>Core configuration options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h2>
</div></div></div>
<h4><a id="config-active"></a><code class="literal">active</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>A boolean specifying if the agent should be active or not. If active, the agent will instrument incoming HTTP requests and track errors.</p>
<p>You can use this setting to dynamically disable Elastic APM at runtime.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.active</code></p></td>
<td align="left" valign="top"><p><code class="literal">active</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_ACTIVE</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-instrument"></a><code class="literal">instrument</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>A boolean specifying if the agent should instrument the application to collect performance metrics for the app. When set to false, Elastic APM will not affect your application at all.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Both active and instrument needs to be true for instrumentation to be running.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.instrument</code></p></td>
<td align="left" valign="top"><p><code class="literal">instrument</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_INSTRUMENT</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-service-name"></a><code class="literal">service_name</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>This is used to keep all the errors and transactions of your service together
and is the primary filter in the Elastic APM user interface.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The service name must conform to this regular expression: ^[a-zA-Z0-9 _-]+$. In less regexy terms: Your service name must only contain characters from the ASCII alphabet, numbers, dashes, underscores and spaces.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Name of main class or jar</p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.service_name</code></p></td>
<td align="left" valign="top"><p><code class="literal">service_name</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_NAME</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-service-version"></a><code class="literal">service_version</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>A version string for the currently deployed version of the service. If you don’t version your deployments, the recommended value for this field is the commit identifier of the deployed revision, e.g. the output of git rev-parse HEAD.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.service_version</code></p></td>
<td align="left" valign="top"><p><code class="literal">service_version</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_VERSION</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-environment"></a><code class="literal">environment</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>The name of the environment this service is deployed in, e.g. "production" or "staging".NOTE: The APM UI does not fully support the environment setting yet.
You can use the query bar to filter for a specific environment,
but by default the environments will be mixed together.
Also keep that in mind when creating alerts.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.environment</code></p></td>
<td align="left" valign="top"><p><code class="literal">environment</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_ENVIRONMENT</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-transaction-sample-rate"></a><code class="literal">transaction_sample_rate</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>By default, the agent will sample every transaction (e.g. request to your service). To reduce overhead and storage requirements, you can set the sample rate to a value between 0.0 and 1.0. We still record overall time and the result for unsampled transactions, but no context information, tags, or spans.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">1.0</code></p></td>
<td align="left" valign="top"><p>Double</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.transaction_sample_rate</code></p></td>
<td align="left" valign="top"><p><code class="literal">transaction_sample_rate</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_SAMPLE_RATE</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-transaction-max-spans"></a><code class="literal">transaction_max_spans</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>Limits the amount of spans that are recorded per transaction.</p>
<p>This is helpful in cases where a transaction creates a very high amount of spans (e.g. thousands of SQL queries).</p>
<p>Setting an upper limit will prevent overloading the agent and the APM server with too much work for such edge cases.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">500</code></p></td>
<td align="left" valign="top"><p>Integer</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.transaction_max_spans</code></p></td>
<td align="left" valign="top"><p><code class="literal">transaction_max_spans</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_MAX_SPANS</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-sanitize-field-names"></a><code class="literal">sanitize_field_names</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>Sometimes it is necessary to sanitize the data sent to Elastic APM,
e.g. remove sensitive data.</p>
<p>Configure a list of wildcard patterns of field names which should be sanitized.
These apply for example to HTTP headers and <code class="literal">application/x-www-form-urlencoded</code> data.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>A wildcard expression may either contain a single wildcard in the middle or have wildcards at the beginning and/or the end. Legal: <code class="literal">*foo*</code>, <code class="literal">foo*</code>, <code class="literal">*foo</code>, <code class="literal">foo*bar*</code>. Illegal: <code class="literal">foo*bar*</code>, <code class="literal">foo*bar*baz</code>.
Prepending an element with <code class="literal">(?i)</code> makes the matching case-insensitive.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Data in the query string is considered non-sensitive,
as sensitive information should not be sent in the query string.
See <a href="https://www.owasp.org/index.php/Information_exposure_through_query_strings_in_url" class="ulink" target="_top">https://www.owasp.org/index.php/Information_exposure_through_query_strings_in_url</a> for more information</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Review the data captured by Elastic APM carefully to make sure it does not capture sensitive information.
If you do find sensitive data in the Elasticsearch index,
you should add an additional entry to this list (make sure to also include the default entries).</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">(?i)password, (?i)passwd, (?i)pwd, (?i)secret, (?i)token, (?i)*key, (?i)*token, (?i)*session*, (?i)*credit*, (?i)*card*, (?i)authorization, (?i)set-cookie</code></p></td>
<td align="left" valign="top"><p>List</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.sanitize_field_names</code></p></td>
<td align="left" valign="top"><p><code class="literal">sanitize_field_names</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SANITIZE_FIELD_NAMES</code></p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="config-disable-instrumentations"></a><code class="literal">disable_instrumentations</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-java/edit/0.7/docs/configuration.asciidoc">edit</a></h4>
<p>A list of instrumentations which should be disabled.
Valid options are <code class="literal">jdbc</code>, <code class="literal">servlet-api</code>, <code class="literal">servlet-api-async</code>, <code class="literal">spring-mvc</code>, <code class="literal">http-client</code>, <code class="literal">apache-httpclient</code>,<code class="literal">spring-resttemplate</code> and <code class="literal">incubating</code>.
If you want to try out incubating features,
set the value to an empty string.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">incubating</code></p></td>
<td align="left" valign="top"><p>Collection</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.disable_instrumentations</code></p></td>
<td align="left" valign="top"><p><code class="literal">disable_instrumentations</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DISABLE_INSTRUMENTATIONS</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="configuration.html">« Configuration</a>
</span>
<span class="next">
<a href="config-http.html">HTTP configuration options »</a>
</span>
</div>
</div>
</body>
</html>
