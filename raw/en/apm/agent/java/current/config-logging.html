<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Logging configuration options | APM Java Agent Reference [1.x] | Elastic</title>
<meta class="elastic" name="content" content="Logging configuration options | APM Java Agent Reference [1.x]">

<link rel="home" href="index.html" title="APM Java Agent Reference [1.x]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="config-jmx.html" title="JMX configuration options"/>
<link rel="next" href="config-messaging.html" title="Messaging configuration options"/>
<meta class="elastic" name="product_version" content="1.x"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/1.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="1.x"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="config-jmx.html">« JMX configuration options</a>
</span>
<span class="next">
<a href="config-messaging.html">Messaging configuration options »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Java Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Logging configuration options</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="config-logging"></a>Logging configuration options</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
</div></div></div>

<div class="position-relative"><h4><a id="config-log-level"></a><code class="literal">log_level</code></h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>Sets the logging level for the agent.
This option is case-insensitive.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">CRITICAL</code> is a valid option, but it is mapped to <code class="literal">ERROR</code>; <code class="literal">WARN</code> and <code class="literal">WARNING</code> are equivalent;
<code class="literal">OFF</code> is only available since version 1.16.0</p>
</div>
</div>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<p>Valid options: <code class="literal">OFF</code>, <code class="literal">ERROR</code>, <code class="literal">CRITICAL</code>, <code class="literal">WARN</code>, <code class="literal">WARNING</code>, <code class="literal">INFO</code>, <code class="literal">DEBUG</code>, <code class="literal">TRACE</code></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">INFO</code></p></td>
<td align="left" valign="top"><p>LogLevel</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_level</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_level</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_LEVEL</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-file"></a><code class="literal">log_file</code></h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>Sets the path of the agent logs.
The special value <code class="literal">_AGENT_HOME_</code> is a placeholder for the folder the elastic-apm-agent.jar is in.
Example: <code class="literal">_AGENT_HOME_/logs/elastic-apm.log</code></p>
<p>When set to the special value <em>System.out</em>,
the logs are sent to standard out.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When logging to a file,
the log will be formatted in new-line-delimited JSON.
When logging to std out, the log will be formatted as plain-text.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">System.out</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_file</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_file</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_FILE</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-ecs-reformatting"></a><code class="literal">log_ecs_reformatting</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.22.0</span>]
<span class="Admonishment-detail">
Added in 1.22.0.
</span>
</span> experimental)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is currently experimental, which means it is disabled by default and it is not guaranteed to be backwards compatible in future releases.</p>
</div>
</div>
<p>Specifying whether and how the agent should automatically reformat application logs
into <a href="/guide/en/ecs-logging/overview/master/intro.html" class="ulink" target="_top">ECS-compatible JSON</a>, suitable for ingestion into Elasticsearch for
further Log analysis. This functionality is available for log4j1, log4j2, Logback and <code class="literal">java.util.logging</code>.
The ECS log lines will include active trace/transaction/error IDs, if there are such.</p>
<p>This option only applies to pattern layouts/formatters by default.
See also <a class="xref" href="config-logging.html#config-log-ecs-formatter-allow-list" title="log_ecs_formatter_allow_list"><code class="literal">log_ecs_formatter_allow_list</code></a>.
To properly ingest and parse ECS JSON logs, follow the <a href="/guide/en/ecs-logging/java/1.x/setup.html#setup-step-2" class="ulink" target="_top">getting started guide</a>.</p>
<p>Available options:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
OFF - application logs are not reformatted.
</li>
<li class="listitem">
SHADE - agent logs are reformatted and "shade" ECS-JSON-formatted logs are automatically created in
addition to the original application logs. Shade logs will have the same name as the original logs,
but with the ".ecs.json" extension instead of the original extension. Destination directory for the
shade logs can be configured through the <a class="xref" href="config-logging.html#config-log-ecs-reformatting-dir" title="log_ecs_reformatting_dir"><code class="literal">log_ecs_reformatting_dir</code></a>
configuration. Shade logs do not inherit file-rollover strategy from the original logs. Instead, they
use their own size-based rollover strategy according to the <a class="xref" href="config-logging.html#config-log-file-size" title="log_file_size ()"><code class="literal">log_file_size</code></a>
configuration and while allowing maximum of two shade log files.
</li>
<li class="listitem">
REPLACE - similar to <code class="literal">SHADE</code>, but the original logs will not be written. This option is useful if
you wish to maintain similar logging-related overhead, but write logs to a different location and/or
with a different file extension.
</li>
<li class="listitem">
OVERRIDE - same log output is used, but in ECS-compatible JSON format instead of the original format.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>while <code class="literal">SHADE</code> and <code class="literal">REPLACE</code> options are only relevant to file log appenders, the <code class="literal">OVERRIDE</code> option
is also valid for other appenders, like System out and console.</p>
</div>
</div>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<p>Valid options: <code class="literal">OFF</code>, <code class="literal">SHADE</code>, <code class="literal">REPLACE</code>, <code class="literal">OVERRIDE</code></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">OFF</code></p></td>
<td align="left" valign="top"><p>LogEcsReformatting</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_ecs_reformatting</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_ecs_reformatting</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_ECS_REFORMATTING</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-ecs-reformatting-additional-fields"></a><code class="literal">log_ecs_reformatting_additional_fields</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.26.0</span>]
<span class="Admonishment-detail">
Added in 1.26.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>A comma-separated list of key-value pairs that will be added as additional fields to all log events.
 Takes the format <code class="literal">key=value[,key=value[,...]]</code>, for example: <code class="literal">key1=value1,key2=value2</code>.
 Only relevant if <a class="xref" href="config-logging.html#config-log-ecs-reformatting" title="log_ecs_reformatting ( experimental)"><code class="literal">log_ecs_reformatting</code></a> is set to any option other than <code class="literal">OFF</code>.
Additional fields are currently not supported for direct log sending through the agent.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>Map</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_ecs_reformatting_additional_fields</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_ecs_reformatting_additional_fields</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_ECS_REFORMATTING_ADDITIONAL_FIELDS</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-ecs-formatter-allow-list"></a><code class="literal">log_ecs_formatter_allow_list</code></h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>Only formatters that match an item on this list will be automatically reformatted to ECS when
<a class="xref" href="config-logging.html#config-log-ecs-reformatting" title="log_ecs_reformatting ( experimental)"><code class="literal">log_ecs_reformatting</code></a> is set to any option other than <code class="literal">OFF</code>.
A formatter is the logging-framework-specific entity that is responsible for the formatting
of log events. For example, in log4j it would be a <code class="literal">Layout</code> implementation, whereas in Logback it would
be an <code class="literal">Encoder</code> implementation.</p>
<p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">*PatternLayout*, org.apache.log4j.SimpleLayout, ch.qos.logback.core.encoder.EchoEncoder, java.util.logging.SimpleFormatter, org.apache.juli.OneLineFormatter, org.springframework.boot.logging.java.SimpleFormatter</code></p></td>
<td align="left" valign="top"><p>List</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_ecs_formatter_allow_list</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_ecs_formatter_allow_list</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_ECS_FORMATTER_ALLOW_LIST</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-ecs-reformatting-dir"></a><code class="literal">log_ecs_reformatting_dir</code></h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>If <a class="xref" href="config-logging.html#config-log-ecs-reformatting" title="log_ecs_reformatting ( experimental)"><code class="literal">log_ecs_reformatting</code></a> is set to <code class="literal">SHADE</code> or <code class="literal">REPLACE</code>,
the shade log files will be written alongside the original logs in the same directory by default.
Use this configuration in order to write the shade logs into an alternative destination. Omitting this
config or setting it to an empty string will restore the default behavior. If relative path is used,
this path will be used relative to the original logs directory.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_ecs_reformatting_dir</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_ecs_reformatting_dir</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_ECS_REFORMATTING_DIR</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-file-size"></a><code class="literal">log_file_size</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.17.0</span>]
<span class="Admonishment-detail">
Added in 1.17.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>The size of the log file.</p>
<p>The agent always keeps one history file so that the max total log file size is twice the value of this setting.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">50mb</code></p></td>
<td align="left" valign="top"><p>ByteValue</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_file_size</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_file_size</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_FILE_SIZE</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-format-sout"></a><code class="literal">log_format_sout</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.17.0</span>]
<span class="Admonishment-detail">
Added in 1.17.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>Defines the log format when logging to <code class="literal">System.out</code>.</p>
<p>When set to <code class="literal">JSON</code>, the agent will format the logs in an <a href="https://github.com/elastic/ecs-logging-java" class="ulink" target="_top">ECS-compliant JSON format</a>
where each log event is serialized as a single line.</p>
<p>Valid options: <code class="literal">PLAIN_TEXT</code>, <code class="literal">JSON</code></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">PLAIN_TEXT</code></p></td>
<td align="left" valign="top"><p>LogFormat</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_format_sout</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_format_sout</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_FORMAT_SOUT</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-format-file"></a><code class="literal">log_format_file</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.17.0</span>]
<span class="Admonishment-detail">
Added in 1.17.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<p>Defines the log format when logging to a file.</p>
<p>When set to <code class="literal">JSON</code>, the agent will format the logs in an <a href="https://github.com/elastic/ecs-logging-java" class="ulink" target="_top">ECS-compliant JSON format</a>
where each log event is serialized as a single line.</p>
<p>Valid options: <code class="literal">PLAIN_TEXT</code>, <code class="literal">JSON</code></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">PLAIN_TEXT</code></p></td>
<td align="left" valign="top"><p>LogFormat</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_format_file</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_format_file</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_FORMAT_FILE</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-log-sending"></a><code class="literal">log_sending</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.36.0</span>]
<span class="Admonishment-detail">
Added in 1.36.0.
</span>
</span> experimental)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc">edit</a></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is currently experimental, which means it is disabled by default and it is not guaranteed to be backwards compatible in future releases.</p>
</div>
</div>
<p>Sends agent and application logs directly to APM Server.</p>
<p>Note that logs can get lost if the agent can&#8217;t keep up with the logs,
if APM Server is not available,
or if Elasticsearch can&#8217;t index the logs fast enough.</p>
<p>For better delivery guarantees, it&#8217;s recommended to ship ECS JSON log files with Filebeat
See also <a class="xref" href="config-logging.html#config-log-ecs-reformatting" title="log_ecs_reformatting ( experimental)"><code class="literal">log_ecs_reformatting</code></a>.
Log sending does not currently support custom MDC fields, <code class="literal">log_ecs_reformatting</code> and shipping the logs with Filebeat must be used if custom MDC fields are required.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">false</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.log_sending</code></p></td>
<td align="left" valign="top"><p><code class="literal">log_sending</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_SENDING</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="config-jmx.html">« JMX configuration options</a>
</span>
<span class="next">
<a href="config-messaging.html">Messaging configuration options »</a>
</span>
</div>
</body>
</html>
