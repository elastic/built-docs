<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>HTTP configuration options | APM Java Agent Reference [master] | Elastic</title>
<meta class="elastic" name="content" content="HTTP configuration options | APM Java Agent Reference [master]">

<link rel="home" href="index.html" title="APM Java Agent Reference [master]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="config-datastore.html" title="Datastore configuration options"/>
<link rel="next" href="config-huge-traces.html" title="Huge Traces configuration options"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="config-datastore.html">« Datastore configuration options</a>
</span>
<span class="next">
<a href="config-huge-traces.html">Huge Traces configuration options »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Java Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>HTTP configuration options</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="config-http"></a>HTTP configuration options</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
</div></div></div>

<div class="position-relative"><h4><a id="config-capture-body-content-types"></a><code class="literal">capture_body_content_types</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.5.0</span>]
<span class="Admonishment-detail">
Added in 1.5.0.
</span>
</span> performance)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Configures which content types should be recorded.</p>
<p>The defaults end with a wildcard so that content types like <code class="literal">text/plain; charset=utf-8</code> are captured as well.</p>
<p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">application/x-www-form-urlencoded*, text/*, application/json*, application/xml*</code></p></td>
<td align="left" valign="top"><p>List</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.capture_body_content_types</code></p></td>
<td align="left" valign="top"><p><code class="literal">capture_body_content_types</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_BODY_CONTENT_TYPES</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-transaction-ignore-urls"></a><code class="literal">transaction_ignore_urls</code></h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Used to restrict requests to certain URLs from being instrumented.</p>
<p>This property should be set to an array containing one or more strings.
When an incoming HTTP request is detected, its URL will be tested against each element in this list.</p>
<p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">/VAADIN/*, /heartbeat*, /favicon.ico, *.js, *.css, *.jpg, *.jpeg, *.png, *.gif, *.webp, *.svg, *.woff, *.woff2</code></p></td>
<td align="left" valign="top"><p>List</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.transaction_ignore_urls</code></p></td>
<td align="left" valign="top"><p><code class="literal">transaction_ignore_urls</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_IGNORE_URLS</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-transaction-ignore-user-agents"></a><code class="literal">transaction_ignore_user_agents</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.22.0</span>]
<span class="Admonishment-detail">
Added in 1.22.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Used to restrict requests from certain User-Agents from being instrumented.</p>
<p>When an incoming HTTP request is detected,
the User-Agent from the request headers will be tested against each element in this list.
Example: <code class="literal">curl/*</code>, <code class="literal">*pingdom*</code></p>
<p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>List</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.transaction_ignore_user_agents</code></p></td>
<td align="left" valign="top"><p><code class="literal">transaction_ignore_user_agents</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_IGNORE_USER_AGENTS</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-use-path-as-transaction-name"></a><code class="literal">use_path_as_transaction_name</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.0.0</span>]
<span class="Admonishment-detail">
Added in 1.0.0. Changing this value at runtime is possible since version 1.22.0
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>If set to <code class="literal">true</code>,
transaction names of unsupported or partially-supported frameworks will be in the form of <code class="literal">$method $path</code> instead of just <code class="literal">$method unknown route</code>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If your URLs contain path parameters like <code class="literal">/user/$userId</code>,
you should be very careful when enabling this flag,
as it can lead to an explosion of transaction groups.
Take a look at the <a class="xref" href="config-core.html#config-transaction-name-groups" title="transaction_name_groups ()"><code class="literal">transaction_name_groups</code></a> option on how to mitigate this problem by grouping URLs together.</p>
</div>
</div>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">false</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.use_path_as_transaction_name</code></p></td>
<td align="left" valign="top"><p><code class="literal">use_path_as_transaction_name</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_USE_PATH_AS_TRANSACTION_NAME</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-url-groups"></a><code class="literal">url_groups</code> (deprecated)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Deprecated in favor of <a class="xref" href="config-core.html#config-transaction-name-groups" title="transaction_name_groups ()"><code class="literal">transaction_name_groups</code></a>.</p>
<p>This option is only considered, when <code class="literal">use_path_as_transaction_name</code> is active.</p>
<p>With this option, you can group several URL paths together by using a wildcard expression like <code class="literal">/user/*</code>.</p>
<p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td>
<td align="left" valign="top"><p>List</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.url_groups</code></p></td>
<td align="left" valign="top"><p><code class="literal">url_groups</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_URL_GROUPS</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-capture-http-client-request-body-size"></a><code class="literal">capture_http_client_request_body_size</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.52.0</span>]
<span class="Admonishment-detail">
Added in 1.52.0.
</span>
</span> experimental)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is currently experimental, which means it is disabled by default and it is not guaranteed to be backwards compatible in future releases.</p>
</div>
</div>
<p>Configures that the first n bytes of http-client request bodies shall be captured. Note that only request bodies will be captured for content types matching the <a class="xref" href="config-core.html#config-transaction-name-groups" title="transaction_name_groups ()"><code class="literal">transaction_name_groups</code></a> configuration. The maximum allowed value is 1024, a value of 0 disables body capturing.</p>
<p>Currently only support for Apache Http Client v4 and v5, HttpUrlConnection, Spring Webflux WebClient and other frameworks building on top of these (e.g. Spring RestTemplate).</p>
<p>The body will be stored in the <code class="literal">labels.http_request_body_content</code> field on the span documents.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">0</code></p></td>
<td align="left" valign="top"><p>Integer</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.capture_http_client_request_body_size</code></p></td>
<td align="left" valign="top"><p><code class="literal">capture_http_client_request_body_size</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_HTTP_CLIENT_REQUEST_BODY_SIZE</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="config-datastore.html">« Datastore configuration options</a>
</span>
<span class="next">
<a href="config-huge-traces.html">Huge Traces configuration options »</a>
</span>
</div>
</body>
</html>
