<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Huge Traces configuration options | APM Java Agent Reference [master] | Elastic</title>
<meta class="elastic" name="content" content="Huge Traces configuration options | APM Java Agent Reference [master]">

<link rel="home" href="index.html" title="APM Java Agent Reference [master]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="config-http.html" title="HTTP configuration options"/>
<link rel="next" href="config-jax-rs.html" title="JAX-RS configuration options"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="config-http.html">« HTTP configuration options</a>
</span>
<span class="next">
<a href="config-jax-rs.html">JAX-RS configuration options »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Java Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Huge Traces configuration options</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="config-huge-traces"></a>Huge Traces configuration options</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
</div></div></div>

<div class="position-relative"><h4><a id="config-span-compression-enabled"></a><code class="literal">span_compression_enabled</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.30.0</span>]
<span class="Admonishment-detail">
Added in 1.30.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Setting this option to true will enable span compression feature.
Span compression reduces the collection, processing, and storage overhead, and removes clutter from the UI. The tradeoff is that some information such as DB statements of all the compressed spans will not be collected.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.span_compression_enabled</code></p></td>
<td align="left" valign="top"><p><code class="literal">span_compression_enabled</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_ENABLED</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-span-compression-exact-match-max-duration"></a><code class="literal">span_compression_exact_match_max_duration</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.30.0</span>]
<span class="Admonishment-detail">
Added in 1.30.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Consecutive spans that are exact match and that are under this threshold will be compressed into a single composite span. This option does not apply to composite spans. This reduces the collection, processing, and storage overhead, and removes clutter from the UI. The tradeoff is that the DB statements of all the compressed spans will not be collected.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<p>Supports the duration suffixes <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
Example: <code class="literal">50ms</code>.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">50ms</code></p></td>
<td align="left" valign="top"><p>TimeDuration</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.span_compression_exact_match_max_duration</code></p></td>
<td align="left" valign="top"><p><code class="literal">span_compression_exact_match_max_duration</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_EXACT_MATCH_MAX_DURATION</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-span-compression-same-kind-max-duration"></a><code class="literal">span_compression_same_kind_max_duration</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.30.0</span>]
<span class="Admonishment-detail">
Added in 1.30.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Consecutive spans to the same destination that are under this threshold will be compressed into a single composite span. This option does not apply to composite spans. This reduces the collection, processing, and storage overhead, and removes clutter from the UI. The tradeoff is that the DB statements of all the compressed spans will not be collected.</p>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<p>Supports the duration suffixes <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
Example: <code class="literal">0ms</code>.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">0ms</code></p></td>
<td align="left" valign="top"><p>TimeDuration</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.span_compression_same_kind_max_duration</code></p></td>
<td align="left" valign="top"><p><code class="literal">span_compression_same_kind_max_duration</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_SAME_KIND_MAX_DURATION</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="config-exit-span-min-duration"></a><code class="literal">exit_span_min_duration</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.30.0</span>]
<span class="Admonishment-detail">
Added in 1.30.0.
</span>
</span>)</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/docs/configuration.asciidoc">edit</a></div>
<p>Exit spans are spans that represent a call to an external service, like a database. If such calls are very short, they are usually not relevant and can be ignored.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If a span propagates distributed tracing ids, it will not be ignored, even if it is shorter than the configured threshold. This is to ensure that no broken traces are recorded.</p>
</div>
</div>
<p><a class="xref" href="configuration.html#configuration-dynamic" title="Dynamic configuration"><span class="image"><img src="./images/dynamic-config.svg" alt="dynamic config"></span> </a></p>
<p>Supports the duration suffixes <code class="literal">us</code>, <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
Example: <code class="literal">0ms</code>.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Dynamic</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">0ms</code></p></td>
<td align="left" valign="top"><p>TimeDuration</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Java System Properties</th>
<th align="left" valign="top">Property file</th>
<th align="left" valign="top">Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">elastic.apm.exit_span_min_duration</code></p></td>
<td align="left" valign="top"><p><code class="literal">exit_span_min_duration</code></p></td>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_EXIT_SPAN_MIN_DURATION</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="config-http.html">« HTTP configuration options</a>
</span>
<span class="next">
<a href="config-jax-rs.html">JAX-RS configuration options »</a>
</span>
</div>
</body>
</html>
