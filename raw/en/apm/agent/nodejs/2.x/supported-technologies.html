<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Supported technologies | APM Node.js Agent Reference [2.x] | Elastic</title>
<meta class="elastic" name="content" content="Supported technologies | APM Node.js Agent Reference [2.x]">

<link rel="home" href="index.html" title="APM Node.js Agent Reference [2.x]"/>
<link rel="up" href="index.html" title="APM Node.js Agent Reference [2.x]"/>
<link rel="prev" href="starting-the-agent.html" title="Starting the agent"/>
<link rel="next" href="advanced-setup.html" title="Configuration"/>
<meta class="elastic" name="product_version" content="2.x"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Node.js Agent/Reference/2.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="2.x"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="starting-the-agent.html">« Starting the agent</a>
</span>
<span class="next">
<a href="advanced-setup.html">Configuration »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Node.js Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Supported technologies</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="supported-technologies"></a>Supported technologies</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
</div></div></div>
<p>Support for the Elastic APM Node.js agent follows the support schedule of Node.js itself to the end-of-life period of each version after its maintenance term.
Versions of Node.js past their end-of-life date are not supported.</p>
<div class="imageblock">
<div class="content">
<img src="./images/node_release_schedule.png" alt="Node.js release schedule">
</div>
</div>
<p>Some versions of Node.js contain bugs or issues that limit our ability to instrument them correctly.
The following versions of Node.js are known to not be fully instrumented:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
v8.1.x - Recommended solution: Upgrade to v8.2.0 or higher to get full support
</li>
<li class="listitem">
v8.0.x - Recommended solution: Upgrade to v8.2.0 or higher to get full support
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Node.js 8.2.0 and above makes use of the experimental core API <a href="https://nodejs.org/api/async_hooks.html" class="ulink" target="_top">Async Hooks</a>.
If you experience any issues related to using Async Hooks,
you can always disable the use of this API by setting the <a class="xref" href="configuration.html#async-hooks" title="asyncHooks"><code class="literal">asyncHooks</code></a> config option to <code class="literal">false</code>.
Note however,
that not all core Node.js API&#8217;s can be instrumented without the use of Async Hooks if running Node.js 8 or above.</p>
</div>
</div>
<div class="position-relative"><h3><a id="elastic-stack-compatibility"></a>Elastic Stack Compatibility</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
<p>This agent is compatible with <a href="/guide/en/apm/server/7.15" class="ulink" target="_top">APM Server</a> v6.5 and above.
For support for previous releases of the APM Server,
use version <a href="/guide/en/apm/agent/nodejs/1.x" class="ulink" target="_top">1.x</a> of the agent.</p>
<div class="position-relative"><h3><a id="compatibility-frameworks"></a>Frameworks</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
<p>Though you can use Elastic APM <a class="xref" href="custom-stack.html" title="Get started with a custom Node.js stack">with any Node.js framework</a>,
we automate a few things for the most popular Node.js modules.</p>
<p>These are the frameworks that we officially support:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Framework</th>
<th align="left" valign="top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="express.html" title="Get started with Express">Express</a></p></td>
<td align="left" valign="top"><p>^4.0.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="hapi.html" title="Get started with hapi">hapi</a></p></td>
<td align="left" valign="top"><p>&gt;=9.0.0 &lt;19.0.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="hapi.html" title="Get started with hapi">@hapi/hapi</a></p></td>
<td align="left" valign="top"><p>&gt;=17.9.0 &lt;20.0.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="koa.html" title="Get started with Koa">Koa</a> via koa-router or @koa/router</p></td>
<td align="left" valign="top"><p>&gt;=5.2.0 &lt;9.0.0</p></td>
</tr>
<tr>
<td align="left" colspan="2" valign="top"><p>Koa doesn&#8217;t have a built in router, so we can&#8217;t support Koa directly since we rely on
router information for full support. We currently support the most popular Koa router called
<a href="https://github.com/alexmingoia/koa-router" class="ulink" target="_top">koa-router</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="restify.html" title="Get started with Restify">Restify</a></p></td>
<td align="left" valign="top"><p>&gt;=5.2.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="fastify.html" title="Get started with Fastify">Fastify</a></p></td>
<td align="left" valign="top"><p>&gt;=0.27.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h3><a id="compatibility-custom-transactions"></a>Custom Transactions</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
<p>By default transactions are named based on their matched HTTP route if the framework used is listed above.
These modules override that behavior to give better insights into specialized HTTP servers:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Module</th>
<th align="left" valign="top">Version</th>
<th align="left" valign="top">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/express-graphql" class="ulink" target="_top">express-graphql</a></p></td>
<td align="left" valign="top"><p>&gt;=0.6.1 &lt;0.10.0</p></td>
<td align="left" valign="top"><p>Will name all transactions by the GraphQL query name</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/apollo-server-express" class="ulink" target="_top">apollo-server-express</a></p></td>
<td align="left" valign="top"><p>^2.0.4</p></td>
<td align="left" valign="top"><p>Will name all transactions by the GraphQL query name</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h3><a id="compatibility-tracing-and-instrumentation"></a>Tracing and Instrumentation</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
<p>The Node.js agent will automatically instrument the following modules to give you detailed performance metrics:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Module</th>
<th align="left" valign="top">Version</th>
<th align="left" valign="top">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/cassandra-driver" class="ulink" target="_top">cassandra-driver</a></p></td>
<td align="left" valign="top"><p>&gt;=3.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/elasticsearch" class="ulink" target="_top">elasticsearch</a></p></td>
<td align="left" valign="top"><p>&gt;=8.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/graphql" class="ulink" target="_top">graphql</a></p></td>
<td align="left" valign="top"><p>&gt;=0.7.0 &lt;15.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/handlebars" class="ulink" target="_top">handlebars</a></p></td>
<td align="left" valign="top"><p>*</p></td>
<td align="left" valign="top"><p>Will instrument compile and render calls</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/jade" class="ulink" target="_top">jade</a></p></td>
<td align="left" valign="top"><p>&gt;=0.5.6</p></td>
<td align="left" valign="top"><p>Will instrument compile and render calls</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/pug" class="ulink" target="_top">pug</a></p></td>
<td align="left" valign="top"><p><em>&gt;=0.1.0</em></p></td>
<td align="left" valign="top"><p>Will instrument compile and render calls</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/ioredis" class="ulink" target="_top">ioredis</a></p></td>
<td align="left" valign="top"><p>&gt;=2.0.0 &lt;5.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/memcached" class="ulink" target="_top">memcached</a></p></td>
<td align="left" valign="top"><p>&gt;=2.2.0 </p></td>
<td align="left" valign="top"><p>Will instrument all commands.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/mongodb-core" class="ulink" target="_top">mongodb-core</a></p></td>
<td align="left" valign="top"><p>&gt;=1.2.19 &lt;4</p></td>
<td align="left" valign="top"><p>Will instrument all queries.
A lot of higher level MongoDB modules use mongodb-core,
so those should be supported as well</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/mongodb" class="ulink" target="_top">mongodb</a></p></td>
<td align="left" valign="top"><p>&gt;=2.0.0 &lt;3.3.0</p></td>
<td align="left" valign="top"><p>Supported via mongodb-core</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/mongojs" class="ulink" target="_top">mongojs</a></p></td>
<td align="left" valign="top"><p>&gt;=1.0.0 &lt;2.7.0</p></td>
<td align="left" valign="top"><p>Supported via mongodb-core</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/mongoose" class="ulink" target="_top">mongoose</a></p></td>
<td align="left" valign="top"><p>&gt;=4.0.0 &lt;5.7.0</p></td>
<td align="left" valign="top"><p>Supported via mongodb-core</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/mysql" class="ulink" target="_top">mysql</a></p></td>
<td align="left" valign="top"><p>^2.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/mysql2" class="ulink" target="_top">mysql2</a></p></td>
<td align="left" valign="top"><p>&gt;=1.0.0 &lt;3.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/pg" class="ulink" target="_top">pg</a></p></td>
<td align="left" valign="top"><p>&gt;=4.0.0 &lt;8.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/redis" class="ulink" target="_top">redis</a></p></td>
<td align="left" valign="top"><p>^2.0.0</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/tedious" class="ulink" target="_top">tedious</a></p></td>
<td align="left" valign="top"><p>&gt;=1.9</p></td>
<td align="left" valign="top"><p>Will instrument all queries</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/ws" class="ulink" target="_top">ws</a></p></td>
<td align="left" valign="top"><p>&gt;=1.0.0 &lt;8.0.0</p></td>
<td align="left" valign="top"><p>Will instrument outgoing WebSocket messages</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="compatibility-better-stack-traces"></a>Better Stack Traces</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
<p>When viewing a span in Elastic APM,
you&#8217;ll see where in your code you initiated the span (e.g. a database query).</p>
<p>Given the async nature of Node.js,
it&#8217;s not possible for us to see further back than the last async boundary.
We therefore make sure to monitor as close to your code as possible.
But some modules will interfere with this monitoring by injecting an async call between your code and the actual monitored function.</p>
<p>We monitor these "offending" modules directly to give you a better experience.</p>
<p>The modules and versions listed below are the ones we support.
If you use an unsupported version you might not be able to see your own code in the spans.
This does not impact the stability of your application in any way - only the collected metrics.</p>
<p>If you don&#8217;t see your own code in spans,
please create a new topic in the <a href="https://discuss.elastic.co/c/apm" class="ulink" target="_top">Elastic APM discuss forum</a> and include information about your dependencies.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Module</th>
<th align="left" valign="top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/knex" class="ulink" target="_top">knex</a></p></td>
<td align="left" valign="top"><p>&gt;=0.9.0 &lt;0.18.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="compatibility-continuity"></a>Continuity</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/2.x/docs/supported-technologies.asciidoc">edit</a></div>
<p>The Elastic APM agent monitors async operations in your Node.js application to maintain awareness of which request is the active request at any given time.
Certain modules can interfere with this monitoring if not handled properly.</p>
<p>Below is a list of modules known to cause issues with this monitoring.
The versions listed are the versions we support.
If you use an unsupported version you might experience missing spans.
This does not impact the stability of your application in any way - only the collected metrics.</p>
<p>If you do experience missing spans in your performance metrics,
please create a new topic in the <a href="https://discuss.elastic.co/c/apm" class="ulink" target="_top">Elastic APM discuss forum</a> and include information about your dependencies and what data is missing.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Module</th>
<th align="left" valign="top">Version</th>
<th align="left" valign="top">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/bluebird" class="ulink" target="_top">bluebird</a></p></td>
<td align="left" valign="top"><p>&gt;=2.0.0 &lt;4.0.0</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/generic-pool" class="ulink" target="_top">generic-pool</a></p></td>
<td align="left" valign="top"><p>^2.0.0 || ^3.1.0</p></td>
<td align="left" valign="top"><p>Used
by a lot of database modules like for instance "pg"</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="https://www.npmjs.com/package/express-queue" class="ulink" target="_top">express-queue</a></p></td>
<td align="left" valign="top"><p>&gt;=0.0.11 &lt;1.0.0</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="starting-the-agent.html">« Starting the agent</a>
</span>
<span class="next">
<a href="advanced-setup.html">Configuration »</a>
</span>
</div>
</body>
</html>
