<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Logs | APM Node.js Agent Reference [3.x] | Elastic</title>
<meta class="elastic" name="content" content="Logs | APM Node.js Agent Reference [3.x]">

<link rel="home" href="index.html" title="APM Node.js Agent Reference [3.x]"/>
<link rel="up" href="index.html" title="APM Node.js Agent Reference [3.x]"/>
<link rel="prev" href="metrics.html" title="Metrics"/>
<link rel="next" href="opentelemetry-bridge.html" title="OpenTelemetry bridge"/>
<meta class="elastic" name="product_version" content="3.x"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Node.js Agent/Reference/3.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="3.x"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="metrics.html">« Metrics</a>
</span>
<span class="next">
<a href="opentelemetry-bridge.html">OpenTelemetry bridge »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Node.js Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Logs</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/3.x/docs/logs.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="logs"></a>Logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/3.x/docs/logs.asciidoc">edit</a></h2>
</div></div></div>
<p>The Elastic APM Node.js Agent provides support for <a class="xref" href="logs.html#log-correlation-ids" title="Log correlation">Log correlation</a>. When
used together with the <a href="/guide/en/ecs-logging/nodejs/master/intro.html" class="ulink" target="_top"><code class="literal">ecs-logging-nodejs</code>
packages</a>, correlation IDs will be automatically injected into log records to
allow navigation between logs, traces, and services.</p>
<p>This feature is part of <a href="/guide/en/observability/8.15/application-logs.html" class="ulink" target="_top">Application log ingestion strategies</a>.</p>
<h2><a id="log-correlation-ids"></a>Log correlation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-nodejs/edit/3.x/docs/logs.asciidoc">edit</a></h2>
<p><a href="/guide/en/apm/guide/8.15/log-correlation.html" class="ulink" target="_top">Log correlation</a> allows you to navigate to all logs belonging to a particular trace
and vice-versa: for a specific log, see in which context it has been logged and which parameters the user provided.</p>
<p>In order to correlate logs from your application with traces captured by the
Elastic APM Node.js Agent, your logs must contain the following identifiers:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/ecs/8.11/ecs-tracing.html" class="ulink" target="_top"><code class="literal">trace.id</code></a>
</li>
<li class="listitem">
<a href="/guide/en/ecs/8.11/ecs-tracing.html" class="ulink" target="_top"><code class="literal">transaction.id</code></a> or <a href="/guide/en/ecs/8.11/ecs-tracing.html" class="ulink" target="_top"><code class="literal">span.id</code></a>
</li>
</ul>
</div>
<p>The APM Node.js Agent provides the <a class="xref" href="agent-api.html#apm-current-trace-ids" title="apm.currentTraceIds"><code class="literal">apm.currentTraceIds</code></a> API for this.
If your application is also using one of the <a href="/guide/en/ecs-logging/nodejs/master/intro.html" class="ulink" target="_top">ECS formatting plugin packages</a>
(available for Pino, Winston, and Morgan), then this APM Agent API will
automatically be used to inject the appropriate tracing fields into your log
records. Otherwise, configure your logger to add these fields when emitting a
log record.</p>
<p>When your logs contain the appropriate identifiers, the final step is to ingest them into the same
Elasticsearch instance that contains your APM data. See
<a href="/guide/en/apm/guide/8.15/log-correlation.html#ingest-logs-in-es" class="ulink" target="_top">Ingest your logs into Elasticsearch</a>
for more information.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="metrics.html">« Metrics</a>
</span>
<span class="next">
<a href="opentelemetry-bridge.html">OpenTelemetry bridge »</a>
</span>
</div>
</body>
</html>
