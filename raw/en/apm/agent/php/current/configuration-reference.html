<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configuration reference | APM PHP Agent Reference [1.x] | Elastic</title>
<meta class="elastic" name="content" content="Configuration reference | APM PHP Agent Reference [1.x]">

<link rel="home" href="index.html" title="APM PHP Agent Reference [1.x]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="configuration.html" title="Configuration"/>
<link rel="next" href="public-api.html" title="Public API"/>
<meta class="elastic" name="product_version" content="1.x"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM PHP Agent/Reference/1.x"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="1.x"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="configuration.html">« Configuration</a>
</span>
<span class="next">
<a href="public-api.html">Public API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">PHP Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configuration reference</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="configuration-reference"></a>Configuration reference<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h2>
</div></div></div>
<h4><a id="config-api-key"></a><code class="literal">api_key</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_API_KEY</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.api_key</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>None</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>This string is used to ensure that only your agents can send data to your APM Server.
You must have created the API key using the APM Server <a href="/guide/en/apm/guide/8.15/api-key.html" class="ulink" target="_top">command line tool</a>.</p>
<p><a class="xref" href="configuration-reference.html#config-api-key" title="api_key"><code class="literal">api_key</code></a> is an alternative to <a class="xref" href="configuration-reference.html#config-secret-token" title="secret_token"><code class="literal">secret_token</code></a>.
If both <a class="xref" href="configuration-reference.html#config-secret-token" title="secret_token"><code class="literal">secret_token</code></a> and <a class="xref" href="configuration-reference.html#config-api-key" title="api_key"><code class="literal">api_key</code></a> are configured,
then <a class="xref" href="configuration-reference.html#config-api-key" title="api_key"><code class="literal">api_key</code></a> has precedence and <a class="xref" href="configuration-reference.html#config-secret-token" title="secret_token"><code class="literal">secret_token</code></a> is ignored.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is fully supported in the APM Server versions &gt;= 7.6.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">api_key</code> value is sent as plain-text in every request to the server, so you should also secure
your communications using HTTPS. Unless you do so, your API Key could be observed by an attacker.</p>
</div>
</div>
<h4><a id="config-breakdown-metrics"></a><code class="literal">breakdown_metrics</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_BREAKDOWN_METRICS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.breakdown_metrics</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>true</p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p>If this configuration option is set to <code class="literal">true</code> the agent will collect and report
breakdown metrics (<code class="literal">span.self_time</code>) used for "Time spent by span type" chart.
Set it to <code class="literal">false</code> to disable the collection and reporting of
breakdown metrics, which can reduce the overhead of the agent.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature requires APM Server and Kibana &gt;= 7.3.</p>
</div>
</div>
<h4><a id="config-capture-errors"></a><code class="literal">capture_errors</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_ERRORS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.capture_errors</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>true</p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p>If this configuration option is set to <code class="literal">true</code> the agent will collect and report error events.
Set it to <code class="literal">false</code> to disable the collection and reporting of APM
error events, which can reduce the overhead of the agent.</p>
<p>Also see <a class="xref" href="configuration.html#configure-php-error-reporting" title="PHP errors as APM error events">PHP errors as APM error events</a>.</p>
<h4><a id="config-disable-instrumentations"></a><code class="literal">disable_instrumentations</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DISABLE_INSTRUMENTATIONS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.disable_instrumentations</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>empty list</p></td>
<td align="left" valign="top"><p>List of strings</p></td>
</tr>
</tbody>
</table>
</div>
<p>A comma-separated list of wildcard expressions to match
instrumentation names which should be disabled.
When an instrumentation is disabled, no spans will be created for that instrumentation.
Each instrumentation has a name and any number of keywords.
If the instrumentation&#8217;s name or any of its keywords match this configuration option
then the instrumentation is disabled.</p>
<p>See <a class="xref" href="configuration.html#configure-wildcard" title="Wildcard">Wildcard</a> for more details on how to use wildcard expressions.</p>
<p>Supported instrumentations:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Keywords</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">curl</code></p></td>
<td align="left" valign="top"><p><code class="literal">HTTP-client</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">PDO</code></p></td>
<td align="left" valign="top"><p><code class="literal">DB</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">MySQLi</code></p></td>
<td align="left" valign="top"><p><code class="literal">DB</code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Examples:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">db</code> disables both PDO and MySQLi instrumentations
</li>
<li class="listitem">
<code class="literal">*HTTP*</code> disables curl instrumentation
</li>
</ul>
</div>
<h4><a id="config-disable-send"></a><code class="literal">disable_send</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_DISABLE_SEND</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.disable_send</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>false</p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p>If set to <code class="literal">true</code>, the agent will work as usual, except for any task requiring
communication with the APM server. Events will be dropped and the agent won&#8217;t be
able to receive central configuration, which means that any other configuration
cannot be changed in this state without restarting the service.  Example uses
for this setting are: maintaining the ability to create traces and log
trace/transaction/span IDs through the log correlation feature, and getting
automatic distributed tracing via the <a href="https://w3c.github.io/trace-context/" class="ulink" target="_top">W3C HTTP headers</a>.</p>
<h4><a id="config-enabled"></a><code class="literal">enabled</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_ENABLED</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.enabled</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>true</p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p>Setting to false will completely disable the agent.</p>
<h4><a id="config-environment"></a><code class="literal">environment</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_ENVIRONMENT</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.environment</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>None</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>The name of the environment this service is deployed in, e.g. "production" or "staging".</p>
<p>Environments allow you to easily filter data on a global level in the APM app.
It&#8217;s important to be consistent when naming environments across agents.
See <a href="/guide/en/kibana/8.15/filters.html#environment-selector" class="ulink" target="_top">environment selector</a> in the Kibana UI for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is fully supported in the APM app in Kibana versions &gt;= 7.2.
You must use the query bar to filter for a specific environment in versions prior to 7.2.</p>
</div>
</div>
<h4><a id="config-global-labels"></a><code class="literal">global_labels</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_GLOBAL_LABELS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.global_labels</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>empty map</p></td>
<td align="left" valign="top"><p>string to string map</p></td>
</tr>
</tbody>
</table>
</div>
<p>Labels from this configuration are added to all the entities produced by the agent.</p>
<p>The format is <code class="literal">key=value[,key=value[,...]]</code>.
For example <code class="literal">dept=engineering,rack=number8</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When setting this configuration option in <code class="literal">.ini</code> file
    it is required to enclose the value in quotes (because the value contains equal sign).
    For example <code class="literal">elastic_apm.global_labels = "dept=engineering,rack=number8"</code></p>
</div>
</div>
<p>Any labels set by the application via the agent&#8217;s public API
will override global labels with the same keys.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This option requires APM Server 7.2 or later. It will have no effect on older versions.</p>
</div>
</div>
<h4><a id="config-hostname"></a><code class="literal">hostname</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_HOSTNAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.hostname</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>the local machine&#8217;s host name</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>This option allows for the reported host name to be configured.
If this option is not set the local machine&#8217;s host name is used.</p>
<h4><a id="config-log-level"></a><code class="literal">log_level</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_LEVEL</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.log_level</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>None</p></td>
<td align="left" valign="top"><p>Log level</p></td>
</tr>
</tbody>
</table>
</div>
<p>A fallback configuration setting to control the logging level for the agent.
Only used when a sink-specific option is not explicitly set.
See <a class="xref" href="configuration.html#configure-logging" title="Logging">Logging</a> for details.</p>
<h4><a id="config-log-level-stderr"></a><code class="literal">log_level_stderr</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_LEVEL_STDERR</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.log_level_stderr</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">CRITICAL</code></p></td>
<td align="left" valign="top"><p>Log level</p></td>
</tr>
</tbody>
</table>
</div>
<p>The logging level for <code class="literal">stderr</code> logging sink.
See <a class="xref" href="configuration.html#configure-logging" title="Logging">Logging</a> for details.</p>
<h4><a id="config-log-level-syslog"></a><code class="literal">log_level_syslog</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_LEVEL_SYSLOG</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.log_level_syslog</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">INFO</code></p></td>
<td align="left" valign="top"><p>Log level</p></td>
</tr>
</tbody>
</table>
</div>
<p>The logging level for <code class="literal">syslog</code> logging sink.
See <a class="xref" href="configuration.html#configure-logging" title="Logging">Logging</a> for details.</p>
<h4><a id="config-profiling-inferred-spans-enabled"></a><code class="literal">profiling_inferred_spans_enabled</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_PROFILING_INFERRED_SPANS_ENABLED</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.profiling_inferred_spans_enabled</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">false</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p>If this option is set to <code class="literal">true</code> then the agent creates spans for method executions
based on sampling aka statistical profiler.</p>
<p>Due to the nature of how sampling profilers work,
the duration of the inferred spans are not exact, but only estimations.
See <a class="xref" href="configuration-reference.html#config-profiling-inferred-spans-sampling-interval" title="profiling_inferred_spans_sampling_interval"><code class="literal">profiling_inferred_spans_sampling_interval</code></a>
to fine tune the trade-off between accuracy and overhead.</p>
<h4><a id="config-profiling-inferred-spans-min-duration"></a><code class="literal">profiling_inferred_spans_min_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_PROFILING_INFERRED_SPANS_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.profiling_inferred_spans_min_duration</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">0ms</code></p></td>
<td align="left" valign="top"><p>Duration</p></td>
</tr>
</tbody>
</table>
</div>
<p>The minimum duration of an inferred span.</p>
<p>Note that effective minimum duration is also affected by the sampling interval
so it is
max(<a class="xref" href="configuration-reference.html#config-profiling-inferred-spans-min-duration" title="profiling_inferred_spans_min_duration"><code class="literal">profiling_inferred_spans_min_duration</code></a>, <a class="xref" href="configuration-reference.html#config-profiling-inferred-spans-sampling-interval" title="profiling_inferred_spans_sampling_interval"><code class="literal">profiling_inferred_spans_sampling_interval</code></a>)</p>
<p>This configuration option supports the duration suffixes: <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
For example: <code class="literal">100ms</code>.</p>
<h4><a id="config-profiling-inferred-spans-sampling-interval"></a><code class="literal">profiling_inferred_spans_sampling_interval</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_PROFILING_INFERRED_SPANS_SAMPLING_INTERVAL</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.profiling_inferred_spans_sampling_interval</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">50ms</code></p></td>
<td align="left" valign="top"><p>Duration</p></td>
</tr>
</tbody>
</table>
</div>
<p>The frequency at which stack traces are gathered in order to construct inferred spans.
The lower this is set, the more accurate the inferred spans durations will be.
On the other hand higher accuracy comes at the expense of higher overhead
and more inferred spans for potentially irrelevant operations
(see <a class="xref" href="configuration-reference.html#config-profiling-inferred-spans-min-duration" title="profiling_inferred_spans_min_duration"><code class="literal">profiling_inferred_spans_min_duration</code></a>).</p>
<p>This configuration option supports the duration suffixes: <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
For example: <code class="literal">50ms</code>.</p>
<h4><a id="config-secret-token"></a><code class="literal">secret_token</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SECRET_TOKEN</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.secret_token</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>None</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>This string is used to ensure that only your agents can send data to your APM Server.
Both the agents and the APM Server have to be configured with the same secret token.</p>
<p>See <a href="/guide/en/apm/guide/8.15/secret-token.html" class="ulink" target="_top">the relevant APM Server&#8217;s documentation</a>
on how to configure APM Server&#8217;s secret token.</p>
<p>Use this setting if the APM Server requires a token, like in Elasticsearch Service.</p>
<p><a class="xref" href="configuration-reference.html#config-secret-token" title="secret_token"><code class="literal">secret_token</code></a> is an alternative to <a class="xref" href="configuration-reference.html#config-api-key" title="api_key"><code class="literal">api_key</code></a>.
If both <a class="xref" href="configuration-reference.html#config-secret-token" title="secret_token"><code class="literal">secret_token</code></a> and <a class="xref" href="configuration-reference.html#config-api-key" title="api_key"><code class="literal">api_key</code></a> are configured
then <a class="xref" href="configuration-reference.html#config-api-key" title="api_key"><code class="literal">api_key</code></a> has precedence and <a class="xref" href="configuration-reference.html#config-secret-token" title="secret_token"><code class="literal">secret_token</code></a> is ignored.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">secret_token</code> is sent as plain-text in every request to the server, so you should also secure
your communications using HTTPS. Unless you do so, your secret token could be observed by an attacker.</p>
</div>
</div>
<h4><a id="config-server-timeout"></a><code class="literal">server_timeout</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVER_TIMEOUT</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.server_timeout</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">30s</code></p></td>
<td align="left" valign="top"><p>Duration</p></td>
</tr>
</tbody>
</table>
</div>
<p>If a request sending events to the APM server takes longer than the configured timeout,
the request is canceled and the events are discarded.</p>
<p>The value has to be provided in <span class="strong strong"><strong><a class="xref" href="configuration.html#configure-duration-format" title="Duration format">duration format</a></strong></span>.</p>
<p>This option&#8217;s default unit is <code class="literal">s</code> (seconds).</p>
<p>If the value is <code class="literal">0</code> (or <code class="literal">0ms</code>, <code class="literal">0s</code>, etc.) the timeout for sending events to the APM Server is disabled.</p>
<p>Negative values are invalid and result in the default value being used instead.</p>
<h4><a id="config-server-url"></a><code class="literal">server_url</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVER_URL</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.server_url</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">http://localhost:8200</code></p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>The URL for your APM Server. The URL must be fully qualified, including protocol (<code class="literal">http</code> or <code class="literal">https</code>) and port.</p>
<h4><a id="config-service-name"></a><code class="literal">service_name</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_NAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.service_name</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">unknown-php-service</code></p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>This is used to keep all the errors and transactions of your service together
and is the primary filter in the Elastic APM user interface.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The service name must conform to this regular expression: <code class="literal">^[a-zA-Z0-9 _-]+$</code>.
In other words, a service name must only contain characters from the ASCII alphabet,
numbers, dashes, underscores, and spaces.
Characters in service name that don&#8217;t match regular expression will be replaced by <code class="literal">_</code> (underscore) character.</p>
</div>
</div>
<h4><a id="config-service-node-name"></a><code class="literal">service_node_name</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_NODE_NAME</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.service_node_name</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>None</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>If it&#8217;s set, this name is used to distinguish between different nodes of a service.
If it&#8217;s not set, data aggregations will be done based on the container ID
if the monitored application runs in a container.
Otherwise data aggregations will be done based on the reported hostname
(automatically discovered or manually configured using <a class="xref" href="configuration-reference.html#config-hostname" title="hostname"><code class="literal">hostname</code></a>).</p>
<h4><a id="config-service-version"></a><code class="literal">service_version</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SERVICE_VERSION</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.service_version</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>None</p></td>
<td align="left" valign="top"><p>String</p></td>
</tr>
</tbody>
</table>
</div>
<p>The version of the currently deployed service. If your deployments are not versioned,
the recommended value for this field is the commit identifier of the deployed revision, e.g.,
the output of git rev-parse HEAD.</p>
<h4><a id="config-span-compression-enabled"></a><code class="literal">span_compression_enabled</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_ENABLED</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.span_compression_enabled</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>true</p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p>Setting this option to true will enable span compression feature.
Span compression reduces the collection, processing, and storage overhead,
and removes clutter from the UI.
The tradeoff is that some information
such as DB statements of all the compressed spans will not be collected.</p>
<h4><a id="config-span-compression-exact-match-max-duration"></a><code class="literal">span_compression_exact_match_max_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_EXACT_MATCH_MAX_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.span_compression_exact_match_max_duration</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">50ms</code></p></td>
<td align="left" valign="top"><p>Duration</p></td>
</tr>
</tbody>
</table>
</div>
<p>Consecutive spans that are exact match and that are under this threshold
will be compressed into a single composite span.
This option does not apply to composite spans.
This reduces the collection, processing, and storage overhead,
and removes clutter from the UI.
The tradeoff is that the DB statements of all the compressed spans will not be collected.</p>
<p>Since it is <span class="strong strong"><strong>max</strong></span> duration threshold setting this configuration option to 0
effectively disables this compression strategy
because only spans with duration 0 will be considered eligible for compression with this strategy.</p>
<p>This configuration option supports the duration suffixes: <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
For example: <code class="literal">10ms</code>.
This option&#8217;s default unit is <code class="literal">ms</code>, so <code class="literal">5</code> is interpreted as <code class="literal">5ms</code>.</p>
<h4><a id="config-span-compression-same-kind-max-duration"></a><code class="literal">span_compression_same_kind_max_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_COMPRESSION_SAME_KIND_MAX_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.span_compression_same_kind_max_duration</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">0ms</code></p></td>
<td align="left" valign="top"><p>Duration</p></td>
</tr>
</tbody>
</table>
</div>
<p>Consecutive spans to the same destination that are under this threshold
will be compressed into a single composite span.
This option does not apply to composite spans.
This reduces the collection, processing, and storage overhead,
and removes clutter from the UI.
The tradeoff is that the DB statements of all the compressed spans will not be collected.</p>
<p>Since it is <span class="strong strong"><strong>max</strong></span> duration threshold setting this configuration option to 0
effectively disables this compression strategy
because only spans with duration 0 will be considered eligible for compression with this strategy.</p>
<p>This configuration option supports the duration suffixes: <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
For example: <code class="literal">10ms</code>.
This option&#8217;s default unit is <code class="literal">ms</code>, so <code class="literal">5</code> is interpreted as <code class="literal">5ms</code>.</p>
<h4><a id="config-span-stack-trace-min-duration"></a><code class="literal">span_stack_trace_min_duration</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_SPAN_STACK_TRACE_MIN_DURATION</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.span_stack_trace_min_duration</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">5ms</code></p></td>
<td align="left" valign="top"><p>Duration</p></td>
</tr>
</tbody>
</table>
</div>
<p>While it might be very helpful to have stack trace attached to a span,
collecting stack traces does have some overhead.
This configuration controls the minimum span duration at which stack traces are collected.
A higher value means lower overhead as stack trace collection is skipped for quick spans.</p>
<p>Set this config to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
any positive value (e.g. <code class="literal">5ms</code>) - to limit stack trace collection to spans with duration
equal to or greater than the given value (e.g. 5 milliseconds)
</li>
<li class="listitem">
<code class="literal">0</code> (or <code class="literal">0</code> with any duration units e.g. <code class="literal">0ms</code>) - to collect stack traces
for spans with any duration
</li>
<li class="listitem">
any negative value (e.g. <code class="literal">-1ms</code>) - to disable stack trace collection for spans completely
</li>
</ul>
</div>
<p>This configuration option supports the duration suffixes: <code class="literal">ms</code>, <code class="literal">s</code> and <code class="literal">m</code>.
For example: <code class="literal">10ms</code>.
This option&#8217;s default unit is <code class="literal">ms</code>, so <code class="literal">5</code> is interpreted as <code class="literal">5ms</code>.</p>
<h4><a id="config-stack-trace-limit"></a><code class="literal">stack_trace_limit</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_STACK_TRACE_LIMIT</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.stack_trace_limit</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">50</code></p></td>
<td align="left" valign="top"><p>Integer</p></td>
</tr>
</tbody>
</table>
</div>
<p>This option controls how many frames are included in stack traces captured by the agent.</p>
<p>Set this config to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
any positive integer - to define the maximum number of frames included in stack traces
</li>
<li class="listitem">
<code class="literal">0</code> - to disable stack trace capturing
</li>
<li class="listitem">
any negative integer - to capture all frames
</li>
</ul>
</div>
<h4><a id="config-transaction-ignore-urls"></a><code class="literal">transaction_ignore_urls</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_IGNORE_URLS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.transaction_ignore_urls</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>empty list</p></td>
<td align="left" valign="top"><p>List of wildcard expressions</p></td>
</tr>
</tbody>
</table>
</div>
<p>This option instructs the agent to ignore requests with certain URLs
by not to creating transactions for those requests.
It only affects automatic creation of transactions by the agent
but user can still create transactions manually by using <a class="xref" href="public-api.html" title="Public API">agent&#8217;s public API</a>.</p>
<p>See <a class="xref" href="configuration.html#configure-wildcard" title="Wildcard">Wildcard</a> section for more details on how to use wildcard expressions.</p>
<h4><a id="config-transaction-max-spans"></a><code class="literal">transaction_max_spans</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_MAX_SPANS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.transaction_max_spans</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>500</p></td>
<td align="left" valign="top"><p>Integer</p></td>
</tr>
</tbody>
</table>
</div>
<p>This limits the amount of spans that are recorded per transaction.
This is helpful in cases where a transaction creates a very high amount of spans,
for example, thousands of SQL queries.
Setting an upper limit helps prevent overloading the Agent and APM server in these edge cases.</p>
<p>If the value is <code class="literal">0</code> no spans will be collected.</p>
<p>Negative values are invalid and result in the default value being used instead.</p>
<h4><a id="config-transaction-sample-rate"></a><code class="literal">transaction_sample_rate</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_TRANSACTION_SAMPLE_RATE</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.transaction_sample_rate</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.0</p></td>
<td align="left" valign="top"><p>Floating-point number</p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the agent will sample every transaction (e.g., a request to your service).
To reduce overhead and storage requirements, set the sample rate to a value between <code class="literal">0.0</code> and <code class="literal">1.0</code>.
The agent still records the overall time and result for unsampled transactions,
but not context information, labels, or spans.</p>
<h4><a id="config-verify-server-cert"></a><code class="literal">verify_server_cert</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_VERIFY_SERVER_CERT</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.verify_server_cert</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">true</code></p></td>
<td align="left" valign="top"><p>Boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p>By default, the agent verifies the SSL certificate if you use an HTTPS connection to the APM server.
The verification can be disabled by changing this setting to <code class="literal">false</code>.</p>
<h4><a id="config-url-groups"></a><code class="literal">url_groups</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-php/edit/1.x/docs/configuration.asciidoc">edit</a></h4>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Environment variable name</th>
<th align="left" valign="top">Option name in <code class="literal">php.ini</code></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">ELASTIC_APM_URL_GROUPS</code></p></td>
<td align="left" valign="top"><p><code class="literal">elastic_apm.url_groups</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Default</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>empty list</p></td>
<td align="left" valign="top"><p>List of wildcard expressions</p></td>
</tr>
</tbody>
</table>
</div>
<p>With this option, you can group several URL paths together by using wildcard expressions
like <code class="literal">/user/*</code> - this way <code class="literal">/user/Alice</code> and <code class="literal">/user/Bob</code> will be mapped to transaction name <code class="literal">/user/*</code>.</p>
<p>See <a class="xref" href="configuration.html#configure-wildcard" title="Wildcard">Wildcard</a> section for more details on how to use wildcard expressions.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="configuration.html">« Configuration</a>
</span>
<span class="next">
<a href="public-api.html">Public API »</a>
</span>
</div>
</body>
</html>
