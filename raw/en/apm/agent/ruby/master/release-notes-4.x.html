<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ruby Agent version 4.x | APM Ruby Agent Reference [master] | Elastic</title>
<meta class="elastic" name="content" content="Ruby Agent version 4.x | APM Ruby Agent Reference [master]">

<link rel="home" href="index.html" title="APM Ruby Agent Reference [master]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes.html" title="Release notes"/>
<link rel="next" href="release-notes-3.x.html" title="Ruby Agent version 3.x"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Ruby Agent/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">Ruby Agent Reference<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/apm/guide/current/apm-overview.html">User Guide</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">Monitoring AWS Lambda Functions</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-3.x.html">Ruby Agent version 3.x »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-4.x"></a>Ruby Agent version 4.x<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h2>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.6.2"></a>4.6.2<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_fixed"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix Faraday::RackBuilder::StackLocked <a href="https://github.com/elastic/apm-agent-ruby/pull/1371" class="ulink" target="_top">#1371</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.6.1"></a>4.6.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_fixed_2"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix growing number of open file descriptors when HTTP request to APM is never sent <a href="https://github.com/elastic/apm-agent-ruby/pull/1351" class="ulink" target="_top">#1351</a>
</li>
<li class="listitem">
Fix setting span http status code when Faraday Middleware is used <a href="https://github.com/elastic/apm-agent-ruby/pull/1368" class="ulink" target="_top">#1368</a>
</li>
<li class="listitem">
Handle whitespace when splitting tracestate entries <a href="https://github.com/elastic/apm-agent-ruby/pull/1353" class="ulink" target="_top">#1353</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.6.0"></a>4.6.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_added"></a>Added<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Added transaction_name to reported error to allow grouping by transaction name <a href="https://github.com/elastic/apm-agent-ruby/pull/1267" class="ulink" target="_top">#1267</a>
</li>
<li class="listitem">
Added ability to query server for version (useful in the future) <a href="https://github.com/elastic/apm-agent-ruby/pull/1278" class="ulink" target="_top">#1278</a>
</li>
<li class="listitem">
Added instrumentation for <a href="https://github.com/zendesk/racecar/" class="ulink" target="_top">https://github.com/zendesk/racecar/</a> Racecar Kafka library <a href="https://github.com/elastic/apm-agent-ruby/pull/1284" class="ulink" target="_top">#1284</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_changed"></a>Changed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Expanded filtering to sanitize any key that contains the string <em>auth</em> <a href="https://github.com/elastic/apm-agent-ruby/pull/1266" class="ulink" target="_top">#1266</a>
</li>
<li class="listitem">
Rename <code class="literal">log_ecs_formatting</code> option to <code class="literal">log_ecs_reformatting</code>, deprecate old option name <a href="https://github.com/elastic/apm-agent-ruby/pull/1248" class="ulink" target="_top">#1248</a>
</li>
<li class="listitem">
When the configuration value for <code class="literal">log_path</code> is set, override the <code class="literal">logger</code> to point to that path instead of using e.g. Rails logger <a href="https://github.com/elastic/apm-agent-ruby/pull/1247" class="ulink" target="_top">#1247</a>
</li>
<li class="listitem">
Only send tracestate header for distributed tracing when it has content <a href="https://github.com/elastic/apm-agent-ruby/pull/1277" class="ulink" target="_top">#1277</a>
</li>
<li class="listitem">
Use the hostname as the Kubernetes pod name in the Container Info metadata if the pod id is parsed from cgroup <a href="https://github.com/elastic/apm-agent-ruby/pull/1314" class="ulink" target="_top">#1314</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_fixed_3"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Small change to Sidekiq tests to handle new configuration passing method <a href="https://github.com/elastic/apm-agent-ruby/pull/1283" class="ulink" target="_top">#1283</a>
</li>
<li class="listitem">
Set transaction sample rate to 0 when it&#8217;s unsampled <a href="https://github.com/elastic/apm-agent-ruby/pull/1339" class="ulink" target="_top">#1339</a>
</li>
<li class="listitem">
Don&#8217;t send unsampled transactions to APM server &gt;= 8.0 <a href="https://github.com/elastic/apm-agent-ruby/pull/1341" class="ulink" target="_top">#1341</a>
</li>
</ul>
</div>
</div>

</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.5.1"></a>4.5.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_changed_2"></a>Changed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Update elasticsearch spy to use new transport gem name <a href="https://github.com/elastic/apm-agent-ruby/pull/1257" class="ulink" target="_top">#1257</a>
</li>
<li class="listitem">
Standardize placeholder for phone numbers as [PHONENUMBER] per <a href="https://github.com/elastic/apm/blob/main/specs/agents/tracing-instrumentation-aws.md" class="ulink" target="_top">https://github.com/elastic/apm/blob/main/specs/agents/tracing-instrumentation-aws.md</a> <a href="https://github.com/elastic/apm-agent-ruby/pull/1246" class="ulink" target="_top">#1246</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_fixed_4"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fixed dependencies to allow CI to build successfully <a href="https://github.com/elastic/apm-agent-ruby/pull/1259" class="ulink" target="_top">#1259</a>
</li>
<li class="listitem">
Fixed warnings related to TimeTask timeouts <a href="https://github.com/elastic/apm-agent-ruby/pull/1255" class="ulink" target="_top">#1255</a>
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.5.0"></a>4.5.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_changed_3"></a>Changed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Stop collecting the field <code class="literal">http.request.socket.encrypted</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/1181" class="ulink" target="_top">#1181</a>
</li>
</ul>
</div>
<h5><a id="_fixed_5"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fixed MongoDB spy thread safety <a href="https://github.com/elastic/apm-agent-ruby/pull/1202" class="ulink" target="_top">#1202</a>
</li>
<li class="listitem">
Fixed span context fields for DynamoDB instrumentation <a href="https://github.com/elastic/apm-agent-ruby/pull/1178" class="ulink" target="_top">#1178</a>
</li>
<li class="listitem">
Fixed span context fields for S3 instrumentation <a href="https://github.com/elastic/apm-agent-ruby/pull/1179" class="ulink" target="_top">#1179</a>
</li>
<li class="listitem">
Update user agent info to match spec <a href="https://github.com/elastic/apm-agent-ruby/pull/1182" class="ulink" target="_top">#1182</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.4.0"></a>4.4.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_added_2"></a>Added<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Optional span to be ended instead of current span <a href="https://github.com/elastic/apm-agent-ruby/pull/1039" class="ulink" target="_top">#1039</a>
</li>
<li class="listitem">
Config option <code class="literal">log_ecs_formatting</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/1053" class="ulink" target="_top">#1053</a>
</li>
</ul>
</div>
<h5><a id="_fixed_6"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fixed detecting Linux on Alpine for CPU/MEM metrics <a href="https://github.com/elastic/apm-agent-ruby/pull/1057" class="ulink" target="_top">#1057</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.3.0"></a>4.3.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_added_3"></a>Added<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add JVM memory metrics <a href="https://github.com/elastic/apm-agent-ruby/pull/1040" class="ulink" target="_top">#1040</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.2.0"></a>4.2.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_added_4"></a>Added<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add support for AWS Storage Table/CosmosDB <a href="https://github.com/elastic/apm-agent-ruby/pull/999" class="ulink" target="_top">#999</a>
</li>
</ul>
</div>
<h5><a id="_fixed_7"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Align HTTP span types/subtypes with spec <a href="https://github.com/elastic/apm-agent-ruby/pull/1014" class="ulink" target="_top">#1014</a>
</li>
<li class="listitem">
Passing a full URL as a path to <code class="literal">Net::HTTP</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/1029" class="ulink" target="_top">#1029</a>
</li>
<li class="listitem">
Fix growing number of open file descriptors <a href="https://github.com/elastic/apm-agent-ruby/pull/1033" class="ulink" target="_top">#1033</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.1.0"></a>4.1.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_added_5"></a>Added<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Azure App Services instance metadata <a href="https://github.com/elastic/apm-agent-ruby/pull/1007" class="ulink" target="_top">#1007</a>
</li>
</ul>
</div>
<h5><a id="_changed_4"></a>Changed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">hostname</code> is now reported split by <code class="literal">configured_hostname</code> and <code class="literal">detected_hostname</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/1009" class="ulink" target="_top">#1009</a>
</li>
</ul>
</div>
<h5><a id="_fixed_8"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">service_node_name</code> is now correctly reported as <code class="literal">service.node.configured_name</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/1009" class="ulink" target="_top">#1009</a>
</li>
<li class="listitem">
Fix JSON parsing when using yajl-ruby <a href="https://github.com/elastic/apm-agent-ruby/pull/1012" class="ulink" target="_top">#1012</a>
</li>
<li class="listitem">
Fix SpanHelpers when methods take blocks <a href="https://github.com/elastic/apm-agent-ruby/pull/1013" class="ulink" target="_top">#1013</a>
</li>
<li class="listitem">
Fix missing <code class="literal">environment</code> param when fetching from Central Config <a href="https://github.com/elastic/apm-agent-ruby/pull/1014" class="ulink" target="_top">#1014</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-4.0.0"></a>4.0.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_upgrading"></a>Upgrading<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<p>Be aware that this release changes the agent&#8217;s general approach to instrumenting third
party libraries.
It now uses <code class="literal">Module#prepend</code> over alias method chaining.</p>
<p>This doesn&#8217;t necessarily impact your application but it could if you are using other gems
that use the old approach to patch the same method.
Mixing the two approaches can lead to infinite recursion.</p>
<h5><a id="_removed"></a>Removed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removed support for Ruby 2.3 and JRuby 9.1 <a href="https://github.com/elastic/apm-agent-ruby/pull/901" class="ulink" target="_top">#901</a>
</li>
<li class="listitem">
Config option <code class="literal">active</code>, see <code class="literal">enabled</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
<li class="listitem">
Config option <code class="literal">custom_key_filters</code>, see <code class="literal">sanitize_field_names</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
<li class="listitem">
Config option <code class="literal">default_tags</code>, see <code class="literal">global_labels</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
<li class="listitem">
Config option <code class="literal">default_labels</code>, see <code class="literal">global_labels</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
<li class="listitem">
Config option <code class="literal">ignore_url_patterns</code>, see <code class="literal">transaction_ignore_urls</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
<li class="listitem">
Config option <code class="literal">use_legacy_sql_parser</code>, legacy parser no longer included <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
</ul>
</div>
<h5><a id="_changed_5"></a>Changed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Integrations (Spies) use Module#prepend over class_eval <a href="https://github.com/elastic/apm-agent-ruby/pull/890" class="ulink" target="_top">#890</a>
</li>
<li class="listitem">
The secrets filter no longer filters based on values, see <code class="literal">sanitize_field_names</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
<li class="listitem">
The secrets filter is aligned with other agents, see <code class="literal">sanitize_field_names</code> <a href="https://github.com/elastic/apm-agent-ruby/pull/900" class="ulink" target="_top">#900</a>
</li>
</ul>
</div>
<h5><a id="_added_6"></a>Added<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Added <code class="literal">set_service</code> API <a href="https://github.com/elastic/apm-agent-ruby/pull/1006" class="ulink" target="_top">#1006</a>
</li>
</ul>
</div>
<h5><a id="_fixed_9"></a>Fixed<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-agent-ruby/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
AWS S3 spy accepts symbol bucket names <a href="https://github.com/elastic/apm-agent-ruby/pull/998" class="ulink" target="_top">#998</a>
</li>
<li class="listitem">
AWS S3 spy passing on blocks <a href="https://github.com/elastic/apm-agent-ruby/pull/998" class="ulink" target="_top">#998</a>
</li>
<li class="listitem">
SQL scanner now recognizes CQL style comments <a href="https://github.com/elastic/apm-agent-ruby/pull/1004" class="ulink" target="_top">#1004</a>
</li>
</ul>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-3.x.html">Ruby Agent version 3.x »</a>
</span>
</div>
</div>
</body>
</html>
