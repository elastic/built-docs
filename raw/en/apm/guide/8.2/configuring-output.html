<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configure the output | APM User Guide [8.2] | Elastic</title>
<meta class="elastic" name="content" content="Configure the output | APM User Guide [8.2]">

<link rel="home" href="index.html" title="APM User Guide [8.2]"/>
<link rel="up" href="configuring-howto-apm-server.html" title="Configure APM Server"/>
<link rel="prev" href="configuration-logging.html" title="Configure logging"/>
<link rel="next" href="configure-cloud-id.html" title="Configure the output for Elasticsearch Service on Elastic Cloud"/>
<meta class="elastic" name="product_version" content="8.2"/>
<meta class="elastic" name="product_name" content="APM"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/APM Guide/8.2"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="8.2"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="configuration-logging.html">« Configure logging</a>
</span>
<span class="next">
<a href="configure-cloud-id.html">Configure the output for Elasticsearch Service on Elastic Cloud »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
  <div class="related-products-title">APM:</div>
  <div class="dropdown-anchor" tabindex="0">User Guide<span class="dropdown-icon"></span></div>
  <div class="dropdown-content">
  <ul>
  <li class="dropdown-category">APM</li>
  <ul>
  <li><a href="/guide/en/observability/current/apm.html">Observability › APM</a></li>
  </ul>
  <li class="dropdown-category">APM agents</li>
  <ul>
  <li><a href="/guide/en/apm/agent/android/current/intro.html">Android Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/go/current/introduction.html">Go Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/swift/current/intro.html">iOS Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/java/current/intro.html">Java Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/dotnet/current/intro.html">.NET Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/nodejs/current/intro.html">Node.js Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/php/current/intro.html">PHP Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/python/current/getting-started.html">Python Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/ruby/current/introduction.html">Ruby Agent Reference</a></li>
  <li><a href="/guide/en/apm/agent/rum-js/current/intro.html">Real User Monitoring JavaScript Agent Reference</a></li>
  </ul>
  <li class="dropdown-category">APM extensions</li>
  <ul>
  <li><a href="/guide/en/apm/lambda/current/aws-lambda-arch.html">AWS Lambda extension</a></li>
  <li><a href="/guide/en/apm/attacher/current/apm-attacher.html">Attacher</a></li>
  </ul>
  </ul>
  </div>
  </div>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="overview.html">Legacy APM Server Reference</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuring-howto-apm-server.html">Configure APM Server</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configure the output</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.2/docs/en/apm-server/legacy/copied-from-beats/docs/outputconfig.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="configuring-output"></a>Configure the output</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.2/docs/en/apm-server/legacy/copied-from-beats/docs/outputconfig.asciidoc">edit</a></div>
</div></div></div>

<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This documentation refers to configuring the standalone (legacy) APM Server. This method of running APM Server will be deprecated and removed in a future release. Please consider <a class="xref" href="upgrade-to-apm-integration.html" title="Switch to the Elastic APM integration">upgrading to Fleet and the APM integration</a>.</p>
</div>
</div>
<p>You configure APM Server to write to a specific output by setting options
in the Outputs section of the <code class="literal">apm-server.yml</code> config file. Only a single
output may be defined.</p>
<p>The following topics describe how to configure each supported output. If you&#8217;ve
secured the Elastic Stack, also read <a class="xref" href="securing-apm-server.html" title="Secure APM Server"><em>Secure</em></a> for more about
security-related configuration options.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="configure-cloud-id.html" title="Configure the output for Elasticsearch Service on Elastic Cloud">Elasticsearch Service</a>
</li>
<li class="listitem">
<a class="xref" href="elasticsearch-output.html" title="Configure the Elasticsearch output">Elasticsearch</a>
</li>
<li class="listitem">
<a class="xref" href="logstash-output.html" title="Configure the Logstash output">Logstash</a>
</li>
<li class="listitem">
<a class="xref" href="kafka-output.html" title="Configure the Kafka output">Kafka</a>
</li>
<li class="listitem">
<a class="xref" href="redis-output.html" title="Configure the Redis output">Redis</a>
</li>
<li class="listitem">
<a class="xref" href="file-output.html" title="Configure the File output">File</a>
</li>
<li class="listitem">
<a class="xref" href="console-output.html" title="Configure the Console output">Console</a>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="sourcemap-output"></a>Source maps</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.2/docs/en/apm-server/legacy/configuring-output-after.asciidoc">edit</a></div>
<p>Source maps can be uploaded through all outputs but must eventually be stored in Elasticsearch.
When using outputs other than Elasticsearch, <code class="literal">source_mapping.elasticsearch</code> must be set for source maps to be applied.
Be sure to update <code class="literal">source_mapping.index_pattern</code> if source maps are stored in the non-default location.
See <a class="xref" href="configuration-rum.html#config-sourcemapping-elasticsearch" title="source_mapping.elasticsearch"><code class="literal">source_mapping.elasticsearch</code></a> for more details.</p>
<div class="position-relative"><h4><a id="libbeat-configuration-fields"></a><code class="literal">fields</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.2/docs/en/apm-server/legacy/configuring-output-after.asciidoc">edit</a></div>
<p>Fields are optional tags that can be added to the documents that APM Server outputs.
They are defined at the top-level in your configuration file, and will apply to any configured output.
Fields can be scalar values, arrays, dictionaries, or any nested combination of these.
By default, the fields that you specify here will be grouped under a <code class="literal">fields</code> sub-dictionary in the output document.</p>
<p>Example using the Elasticsearch output:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">fields: {project: "myproject", instance-id: "574734885120952459"}
#-------------------------- Elasticsearch output --------------------------
output.elasticsearch:
  hosts: ["localhost:9200"]</pre>
</div>
<p>To store the custom fields as top-level fields, set the <code class="literal">fields_under_root</code> option to true.
This is not recommended as when new fields are added to APM documents backward compatibility cannot be ensured.</p>








</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="configuration-logging.html">« Configure logging</a>
</span>
<span class="next">
<a href="configure-cloud-id.html">Configure the output for Elasticsearch Service on Elastic Cloud »</a>
</span>
</div>
</body>
</html>
