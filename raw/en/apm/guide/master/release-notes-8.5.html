<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>APM version 8.5 | APM User Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="APM User Guide [master]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes-head.html" title="APM version HEAD"/>
<link rel="next" href="release-notes-8.4.html" title="APM version 8.4"/>
<meta name="DC.type" content="Learn/Docs/APM Guide/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">APM User Guide [master]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-head.html">« APM version HEAD</a>
</span>
<span class="next">
<a href="release-notes-8.4.html">APM version 8.4 »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-8.5"></a>APM version 8.5<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h2>
</div></div></div>
<p><a href="https://github.com/elastic/apm-server/compare/8.4...8.5" class="ulink" target="_top">View commits</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="release-notes-8.5.html#release-notes-8.5.3" title="APM version 8.5.3">APM version 8.5.3</a>
</li>
<li class="listitem">
<a class="xref" href="release-notes-8.5.html#release-notes-8.5.2" title="APM version 8.5.2">APM version 8.5.2</a>
</li>
<li class="listitem">
<a class="xref" href="release-notes-8.5.html#release-notes-8.5.1" title="APM version 8.5.1">APM version 8.5.1</a>
</li>
<li class="listitem">
<a class="xref" href="release-notes-8.5.html#release-notes-8.5.0" title="APM version 8.5.0">APM version 8.5.0</a>
</li>
</ul>
</div>
<h4><a id="release-notes-8.5.3"></a>APM version 8.5.3<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h4>
<h5><a id="_bug_fixes_2"></a>Bug fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
OpenTelemetry GRPC Spans from the Javascript API/SDK/Instrumentations are now correctly transformed into transactions with type=<code class="literal">request</code> <a href="https://github.com/elastic/apm-server/pull/9308" class="ulink" target="_top">9308</a>
</li>
</ul>
</div>
<h4><a id="release-notes-8.5.2"></a>APM version 8.5.2<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h4>
<p>This release includes an important APM Server bug fix.
Users running APM Server with Tail Sampling enabled in version &gt;=8.3.0 and above should upgrade immediately.</p>
<p><a href="https://github.com/elastic/apm-server/compare/v8.5.1...v8.5.2" class="ulink" target="_top">View commits</a></p>
<h5><a id="_bug_fixes_3"></a>Bug fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix Tail Sampling OOM issues when storage limit is reached <a href="https://github.com/elastic/apm-server/pull/9583" class="ulink" target="_top">9583</a>
</li>
<li class="listitem">
Null APM agent configuration entries are now treated as empty, and will not cause the server to exit with an error <a href="https://github.com/elastic/apm-server/pull/9546" class="ulink" target="_top">9546</a>
</li>
</ul>
</div>
<h4><a id="release-notes-8.5.1"></a>APM version 8.5.1<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h4>
<p><a href="https://github.com/elastic/apm-server/compare/v8.5.0...v8.5.1" class="ulink" target="_top">View commits</a></p>
<h5><a id="_bug_fixes_4"></a>Bug fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set <code class="literal">error.id</code> for OpenTelemetry exception span events <a href="https://github.com/elastic/apm-server/pull/9327" class="ulink" target="_top">9327</a>
</li>
<li class="listitem">
Add an <code class="literal">apm-server</code> user to /etc/passwd in the Docker images <a href="https://github.com/elastic/apm-server/pull/9496" class="ulink" target="_top">9496</a>
</li>
</ul>
</div>
<h4><a id="release-notes-8.5.0"></a>APM version 8.5.0<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h4>
<p><a href="https://github.com/elastic/apm-server/compare/v8.4.3...v8.5.0" class="ulink" target="_top">View commits</a></p>
<h5><a id="_known_issue"></a>Known issue<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<p>Due to a recent change in the Red Hat scan verification process,
this version of APM Server is not available in the Red Hat Ecosystem Catalog.
This bug will be fixed in the next release.
Please use the <a href="https://www.docker.elastic.co/r/apm" class="ulink" target="_top">Elastic docker registry</a> to download the 8.5.0 APM Server image.</p>
<h5><a id="_breaking_changes_2"></a>Breaking Changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">event.action</code> is no longer recorded for OTLP logs, due to breaking OTLP changes <a href="https://github.com/elastic/apm-server/pull/8765" class="ulink" target="_top">8765</a>
</li>
<li class="listitem">
Experimental support for ingesting profile data has been removed <a href="https://github.com/elastic/apm-server/pull/8911" class="ulink" target="_top">8911</a>
</li>
<li class="listitem">
<code class="literal">process.ppid</code> has been renamed to <code class="literal">process.parent.pid</code> for alignment with ECS <a href="https://github.com/elastic/apm-server/pull/8783" class="ulink" target="_top">8783</a>
</li>
</ul>
</div>
<h5><a id="_deprecations_2"></a>Deprecations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<h5><a id="_bug_fixes_5"></a>Bug fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set <code class="literal">message</code> instead of <code class="literal">labels.event</code> for Jaeger span events <a href="https://github.com/elastic/apm-server/pull/8765" class="ulink" target="_top">8765</a>
</li>
<li class="listitem">
Reach full support (still technical preview) for Java agent auto attachment on Linux by allowing attachment to a JVM of any user <a href="https://github.com/elastic/apm-server/pull/8803" class="ulink" target="_top">8803</a>
</li>
<li class="listitem">
The OTLP/HTTP handlers now support gzip and deflate compression <a href="https://github.com/elastic/apm-server/pull/9067" class="ulink" target="_top">9067</a>
</li>
<li class="listitem">
The Fleet integration now applies source maps correctly when they have been uploaded with a relative bundle_filepath <a href="https://github.com/elastic/apm-server/pull/9082" class="ulink" target="_top">9082</a>
</li>
<li class="listitem">
Dynamically map all simple numerical metrics as <code class="literal">double</code>, to avoid mapping conflicts <a href="https://github.com/elastic/apm-server/pull/8868" class="ulink" target="_top">8868</a>
</li>
<li class="listitem">
Fix data stream migration ingest pipeline, upgrading old <code class="literal">observer.*</code> and <code class="literal">process.ppid</code> fields <a href="https://github.com/elastic/apm-server/pull/9095" class="ulink" target="_top">9095</a>
</li>
<li class="listitem">
Fix ordering of processors to ensure <code class="literal">host.hostname</code> is set consistently in aggregated metrics <a href="https://github.com/elastic/apm-server/pull/8983" class="ulink" target="_top">8983</a>
</li>
</ul>
</div>
<h5><a id="_intake_api_changes_2"></a>Intake API Changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add a new <code class="literal">async</code> boolean query parameter (<code class="literal">intake/v2/events?async=&lt;true|false&gt;</code>).
When set to <code class="literal">true</code>, the batch will be processed asynchronously if the APM Server can
service the incoming request immediately, otherwise a "503 queue is full" error will
be returned <a href="https://github.com/elastic/apm-server/pull/8979" class="ulink" target="_top">8979</a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> Add logs support to v2 intake API <a href="https://github.com/elastic/apm-server/pull/9068" class="ulink" target="_top">9068</a>
</li>
</ul>
</div>
<h5><a id="_added_2"></a>Added<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/main/changelogs/8.5.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set a default User-Agent field value when making HTTP requests <a href="https://github.com/elastic/apm-server/pull/8758" class="ulink" target="_top">8758</a>
</li>
<li class="listitem">
OTLP support updated to opentelemetry-collector v0.56.0 <a href="https://github.com/elastic/apm-server/pull/8765" class="ulink" target="_top">8765</a>
</li>
<li class="listitem">
Map additional fields from mobile agents <a href="https://github.com/elastic/apm-server/pull/8784" class="ulink" target="_top">8784</a>
</li>
<li class="listitem">
Include global labels to the transaction metric dimensions <a href="https://github.com/elastic/apm-server/pull/8839" class="ulink" target="_top">8839</a>
</li>
<li class="listitem">
Add an experimental integration of the Profiling collection agent gRPC service <a href="https://github.com/elastic/apm-server/pull/9005" class="ulink" target="_top">9005</a>
</li>
<li class="listitem">
Clarify tail-based sampling storage limit reached errors <a href="https://github.com/elastic/apm-server/pull/9085" class="ulink" target="_top">9085</a>
</li>
<li class="listitem">
Added support for new OTel JVM metric names, as changed in OTel Java SDK v1.13.0 <a href="https://github.com/elastic/apm-server/pull/8777" class="ulink" target="_top">8777</a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> Added technical preview of aggregated service metrics <a href="https://github.com/elastic/apm-server/pull/8607" class="ulink" target="_top">8607</a>
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes-head.html">« APM version HEAD</a>
</span>
<span class="next">
<a href="release-notes-8.4.html">APM version 8.4 »</a>
</span>
</div>
</div>
</body>
</html>
