<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>APM input settings | APM Server Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="APM Server Reference [master]"/>
<link rel="up" href="apm-integration.html" title="APM integration for Elastic Agent"/>
<link rel="prev" href="apm-integration-data-streams.html" title="Data streams"/>
<link rel="next" href="redirects.html" title="Appendix A: Deleted pages"/>
<meta name="DC.type" content="Learn/Docs/APM Server/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM Server Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="apm-integration.html">APM integration for Elastic Agent</a></span>
»
<span class="breadcrumb-node">APM input settings</span>
</div>
<div class="navheader">
<span class="prev">
<a href="apm-integration-data-streams.html">« Data streams</a>
</span>
<span class="next">
<a href="redirects.html">Appendix A: Deleted pages »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="input-apm"></a>APM input settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/apm-package/input-apm.asciidoc">edit</a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>To configure the APM integration, open Kibana and select:
<span class="strong strong"><strong>Fleet</strong></span> / <span class="strong strong"><strong>Integrations</strong></span> / <span class="strong strong"><strong>Elastic APM</strong></span> / <span class="strong strong"><strong>Add Elastic APM</strong></span>.
Expand the carrot to view all settings.</p>
<p>A limited number of settings are currently supported.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Templates, pipelines, index lifecycle management, etc., cannot be configured
with APM Server or Fleet, and must instead be configured with Kibana or Elasticsearch.</p>
</div>
</div>
<h3><a id="apm-input-general-settings"></a>General settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/apm-package/input-apm.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-host-setting"></a><code class="literal">host</code></p>
</td>
<td align="left" valign="top">
<p>(string) Defines the host and port the server is listening on.
Use <code class="literal">unix:/path/to.sock</code> to listen on a unix domain socket.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">localhost:8200</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-secret_token-setting"></a><code class="literal">secret_token</code></p>
</td>
<td align="left" valign="top">
<p>(string) Authorization token for sending APM data.
The same token must also be set in each APM agent.
This token is not used for RUM endpoints.
By default, no authorization token is set.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-max_event_bytes-setting"></a><code class="literal">max_event_bytes</code></p>
</td>
<td align="left" valign="top">
<p>(int) Maximum permitted size of an event accepted by the server to be processed (in Bytes).</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">307200</code> Bytes</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-default_service_environment-setting"></a><code class="literal">default_service_environment</code></p>
</td>
<td align="left" valign="top">
<p>(string) The default service environment for events without a defined service environment.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-capture_personal_data-setting"></a><code class="literal">capture_personal_data</code></p>
</td>
<td align="left" valign="top">
<p>(bool) Capture personal data such as IP or User Agent.
If true, APM Server captures the IP of the instrumented service and its User Agent if any.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<h3><a id="apm-input-rum-settings"></a>Real User Monitoring (RUM) settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/apm-package/input-apm.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-enable_rum-setting"></a><code class="literal">enable_rum</code></p>
</td>
<td align="left" valign="top">
<p>(bool) Enables and disables Real User Monitoring (RUM).</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code> (disabled)</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_allow_origins-setting"></a><code class="literal">rum_allow_origins</code></p>
</td>
<td align="left" valign="top">
<p>(string) A list of permitted origins for RUM support.
User-agents send an Origin header that will be validated against this list.
This is done automatically by modern browsers as part of the <a href="https://www.w3.org/TR/cors/" class="ulink" target="_top">CORS specification</a>.
An origin is made of a protocol scheme, host and port, without the URL path.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">["*"]</code> (allows everything)</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_allow_headers-setting"></a><code class="literal">rum_allow_headers</code></p>
</td>
<td align="left" valign="top">
<p>(string) By default, HTTP requests made from the RUM agent to the APM integration are limited in the HTTP headers they are allowed to have.
If any other headers are added, the request will be rejected by the browser due to Cross-Origin Resource Sharing (CORS) restrictions.
If you need to add extra headers to these requests, use this configuration to allow additional headers.</p>
<p>The default list of values includes <code class="literal">"Content-Type"</code>, <code class="literal">"Content-Encoding"</code>, and <code class="literal">"Accept"</code>.
Configured values are appended to the default list and used as the value for the
<code class="literal">Access-Control-Allow-Headers</code> header.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_response_headers-setting"></a><code class="literal">rum_response_headers</code></p>
</td>
<td align="left" valign="top">
<p>(yaml) Custom HTTP headers to add to RUM responses. For example, for security policy compliance.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_event_rate_limit-setting"></a><code class="literal">rum_event_rate_limit</code></p>
</td>
<td align="left" valign="top">
<p>(int) Defines the maximum amount of events allowed to be sent to the APM Server RUM endpoint per ip per second.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">300</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-rum_event_rate_lru_size-setting"></a><code class="literal">rum_event_rate_lru_size</code></p>
</td>
<td align="left" valign="top">
<p>(int) An LRU cache is used to keep a rate limit per IP for the most recently seen IPs.
This setting defines the number of unique IPs that can be tracked in the cache.
Sites with many concurrent clients should consider increasing this limit.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1000</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<h3><a id="_api_key_settings"></a>API key settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/apm-package/input-apm.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-api_key_enabled-setting"></a><code class="literal">api_key_enabled</code></p>
</td>
<td align="left" valign="top">
<p>(bool) Enable or disable API key authorization between APM Server and APM agents.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code> (disabled)</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-api_key_limit-setting"></a><code class="literal">api_key_limit</code></p>
</td>
<td align="left" valign="top">
<p>(int) Each unique API key triggers one request to Elasticsearch.
This setting restricts the number of unique API keys are allowed per minute.
The minimum value for this setting should be the number of API keys configured in your monitored services.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">100</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-sourcemap_api_key-setting"></a><code class="literal">sourcemap_api_key</code></p>
</td>
<td align="left" valign="top">
<p>(string) RUM API key for sourcemaps. Formatted as <code class="literal">&lt;Id&gt;:&lt;API Key&gt;</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="input-apm-kibana_api_key-setting"></a><code class="literal">kibana_api_key</code></p>
</td>
<td align="left" valign="top">
<p>(string) API Key for APM central configuration feature. Formatted as <code class="literal">&lt;Id&gt;:&lt;API Key&gt;</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="apm-integration-data-streams.html">« Data streams</a>
</span>
<span class="next">
<a href="redirects.html">Appendix A: Deleted pages »</a>
</span>
</div>
</div>
</body>
</html>
