<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configuring Encryption Keys | Elastic App Search Documentation [7.9] | Elastic</title>
<link rel="home" href="index.html" title="Elastic App Search Documentation [7.9]"/>
<link rel="up" href="configuration.html" title="Configuration"/>
<link rel="prev" href="mailer-configuration.html" title="Configuring a Mailer"/>
<link rel="next" href="troubleshooting.html" title="Troubleshooting"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/7.9"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="7.9"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic App Search Documentation [7.9]</a></span>
»
<span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span>
»
<span class="breadcrumb-node">Configuring Encryption Keys</span>
</div>
<div class="navheader">
<span class="prev">
<a href="mailer-configuration.html">« Configuring a Mailer</a>
</span>
<span class="next">
<a href="troubleshooting.html">Troubleshooting »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="encryption-keys"></a>Configuring Encryption Keys<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/configuration/encryption-keys.asciidoc">edit</a></h2>
</div></div></div>
<p>App Search is designed to keep synchronization information and access tokens secure at all times. To ensure safe storage of credentials and other secrets, <span class="strong strong"><strong>encryption keys must be provided when starting and deploying the service</strong></span>.</p>
<p>To configure encryption keys, locate the <code class="literal">config/enterprise-search.yml</code> configuration file in the App Search directory, and set a <code class="literal">secret_management.encryption_keys</code> value:</p>
<div class="pre_wrapper lang-yml">
<pre class="programlisting prettyprint lang-yml">secret_management.encryption_keys: [{encryption_key1}, {encryption_key2}, {...}]</pre>
</div>
<p><code class="literal">secret_management.encryption_keys</code> requires an array of values with at least one encryption key. We recommend rotating encryption keys over time, and App Search lets you set multiple encryption keys to enable proper security practices.</p>
<p>Should an encryption key be misplaced or lost, the encrypted access tokens and source synchronization credentials will no longer be accessible, and content synchronization will be halted for all sources until they are re-authenticated.</p>
<p>When a new value is added to the <code class="literal">encryption_keys</code> aray, App Search will attempt to decrypt secrets from the first entry, moving across the array until success. Secrets are re-encrypted with the last key in the array when rewritten.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>We strongly recommend using 256-bit encryption key values, and rotating keys on a regular basis.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="mailer-configuration.html">« Configuring a Mailer</a>
</span>
<span class="next">
<a href="troubleshooting.html">Troubleshooting »</a>
</span>
</div>
</div>
</body>
</html>
