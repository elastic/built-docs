<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Search | Elastic App Search Documentation [7.9] | Elastic</title>
<meta class="elastic" name="content" content="Search | Elastic App Search Documentation [7.9]">

<link rel="home" href="index.html" title="Elastic App Search Documentation [7.9]"/>
<link rel="up" href="api-reference.html" title="API Reference"/>
<link rel="prev" href="schema.html" title="Schema"/>
<link rel="next" href="boosts.html" title="Boosts"/>
<meta class="elastic" name="product_version" content="7.9"/>
<meta class="elastic" name="product_name" content="App Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/7.9"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="schema.html">« Schema</a>
</span>
<span class="next">
<a href="boosts.html">Boosts »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Elastic App Search Documentation<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="api-reference.html">API Reference</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Search</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="search"></a>Search</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Want to start with the concepts? Explore the <a class="xref" href="search-guide.html" title="Search Guide"><span class="strong strong"><strong>Search guide</strong></span></a>.</p>
</div>
</div>
<p></p>
<p>Search, facet, filter, and curate your documents.</p>
<p>Change the default search behaviour using the <a class="xref" href="search-settings.html" title="Search Settings">Search Settings API</a> or the <a class="xref" href="result-settings-guide.html" title="Result Settings Guide">Result Settings UI</a> in the dashboard.</p>
<p>See the sidebar for further reference on deeper search parameters.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="search-before-you-search"></a>Before You Search...</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<p>Before you send a query, it helps to know:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Are there any <a class="xref" href="search-settings.html" title="Search Settings">Search Settings</a> configured?
</li>
<li class="listitem">
Are there any <a class="xref" href="result-settings-guide.html" title="Result Settings Guide">Result Settings</a> configured?
</li>
</ol>
</div>
<p>By default a search result will include all fields as <span class="strong strong"><strong>raw</strong></span>, unlimited values. But you can choose to add character limits or return <span class="strong strong"><strong>snippet</strong></span> field values.</p>
<p>The <a class="xref" href="search-settings.html" title="Search Settings">Search Settings</a> API and the <a class="xref" href="result-settings-guide.html" title="Result Settings Guide">Result Settings</a> feature can change these defaults.</p>
<p>You can also change it per API call with the <a class="xref" href="result-fields-highlights.html" title="Result Fields (Highlights)">Result Fields API</a>.</p>
<p>It&#8217;s good to experiment to see how the Result Field parameters impact your results.</p>
<p>After you perform some basic queries with result fields, check out the other API Reference documentation to get even deeper:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="search-fields-weights.html" title="Search Fields (Weights)">Search Fields</a>
</li>
<li class="listitem">
<a class="xref" href="facets.html" title="Facets">Facets</a>
</li>
<li class="listitem">
<a class="xref" href="filters.html" title="Filters">Filters</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="search-search-queries"></a>Search Queries</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<p>The search endpoint responds to <code class="literal">GET</code> and <code class="literal">POST</code> requests.</p>
<p>There are two different endpoints that you can query:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="search.html#search-single" title="Performing a Single Search Query"><code class="literal">search</code></a>
</li>
<li class="listitem">
<a class="xref" href="search.html#search-multi" title="Performing a Multiple Search Query"><code class="literal">multi_search</code></a>
</li>
</ol>
</div>
<p>They are similar, except <code class="literal">multi_search</code> allows up to 10 queries in a single API call.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">query</code> (required)
</span>
</dt>
<dd>
A string or number used to find related documents. To match all documents, use an empty string "". You may also apply the following Lucene Query Syntax functions: double quoted strings, + and -, AND, OR, and NOT. View Example
</dd>
<dt>
<span class="term">
<code class="literal">page</code> (optional)
</span>
</dt>
<dd>
Provides optional keys of size and current. Specifies the number of results per page and which page the API should return. View Example
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="search-single"></a>Performing a Single Search Query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">POST /api/as/v1/engines/{ENGINE_NAME}/search</pre>
</div>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">GET /api/as/v1/engines/{ENGINE_NAME}/search</pre>
</div>
<p><em>Example</em> - Performing a single query search.</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X POST 'https://host-2376rb.api.swiftype.com/api/as/v1/engines/national-parks-demo/search' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer search-soaewu2ye6uc45dr8mcd54v8' \
-d '{
  "query": "everglade"
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "meta": {
    "warnings": [],
    "request_id": "2992570ab570b581ac6c457bddf68835",
    "page": {
      "total_pages": 1,
      "size": 10,
      "current": 1,
      "total_results": 3
    },
    "alerts": []
  },
  "results": [
    {
      "world_heritage_site": {
        "raw": "true"
      },
      "states": {
        "raw": [
          "Florida"
        ]
      },
      "location": {
        "raw": "25.32,-80.93"
      },
      "nps_link": {
        "raw": "https://www.nps.gov/ever/index.htm"
      },
      "acres": {
        "raw": 1508968.1
      },
      "date_established": {
        "raw": "1934-05-30T05:00:00+00:00"
      },
      "title": {
        "raw": "Everglades"
      },
      "visitors": {
        "raw": 930907
      },
      "square_km": {
        "raw": 6106.6
      },
      "description": {
        "raw": "The Everglades are the largest tropical wilderness in the United States. This mangrove and tropical rainforest ecosystem and marine estuary is home to 36 protected species, including the Florida panther, American crocodile, and West Indian manatee. Some areas have been drained and developed; restoration projects aim to restore the ecology."
      },
      "_meta": {
        "score": 1396363.1
      },
      "id": {
        "raw": "park_everglades"
      }
    },
    # ... More documents (truncated)
  ]
}</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h5 class="title"><a id="search-lucene"></a>Performing a Single Search Query with Lucene Query Syntax</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<p><em>Example</em> - Performing a single query search using Lucene Query Syntax.</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X POST 'https://host-2376rb.api.swiftype.com/api/as/v1/engines/national-parks-demo/search' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer search-soaewu2ye6uc45dr8mcd54v8' \
-d '{
  "query": "wyoming AND montana OR california NOT washington"
}'</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="search-multi"></a>Performing a Multiple Search Query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<p>You can add multiple queries to a single search request.</p>
<p>Note that the <code class="literal">multi_search</code> queries have a fixed limit of <span class="strong strong"><strong>10 queries per request</strong></span>.</p>
<p><em>Note: Each query inside of a <code class="literal">multi_search</code> is counted as a separate analytic event. For example, issuing a <code class="literal">multi_search</code> with 4 queries will increase the analytics query count by 4.</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">POST /api/as/v1/engines/{ENGINE_NAME}/multi_search</pre>
</div>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">GET /api/as/v1/engines/{ENGINE_NAME}/multi_search</pre>
</div>
<p><em>Example</em> - Performing a multiple query search.</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X POST 'http://host-2376rb.api.swiftype.com/api/as/v1/engines/national-parks-demo/multi_search' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer search-soaewu2ye6uc45dr8mcd54v8' \
-d '{
  "queries": [
    {"query": "california"},
    {"query": "florida"}
  ]
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">[
  # First query result
  {
    "meta": {
      "alerts": [],
      "warnings": [],
      "page": {
        "current": 1,
        "size": 10,
        "total_pages": 1,
        "total_results": 4
      }
    },
    "results": [
      {
        "nps_link": {
          "raw": "https://www.nps.gov/yose/index.htm"
        },
        "id": {
          "raw": "park_yosemite"
        },
        "visitors": {
          "raw": 5028868
        },
        "title": {
          "raw": "Yosemite"
        },
        "date_established": {
          "raw": "1890-10-01T05:00:00+00:00"
        },
        "world_heritage_site": {
          "raw": "true"
        },
        "_meta": {
          "score": 7543316
        },
        "description": {
          "raw": "Yosemite features sheer granite cliffs, exceptionally tall waterfalls, and old-growth forests at a unique intersection of geology and hydrology. Half Dome and El Capitan rise from the park's centerpiece, the glacier-carved Yosemite Valley, and from its vertical walls drop Yosemite Falls, one of North America's tallest waterfalls at 2,425 feet (739 m) high. Three giant sequoia groves, along with a pristine wilderness in the heart of the Sierra Nevada, are home to a wide variety of rare plant and animal species."
        },
        "states": {
          "raw": [
            "California"
          ]
        },
        "acres": {
          "raw": 761747.5
        },
        "location": {
          "raw": "37.83,-119.5"
        },
        "square_km": {
          "raw": 3082.7
        }
      },
      # ... More documents (truncated)
    ]
  },
  # ... Second query result (truncated)
]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="search-paging"></a>Page</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<p>Paginate results.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">size</code> (optional)
</span>
</dt>
<dd>
<p>Number of results per page.</p>
<p>Must be greater than or equal to <code class="literal">1</code> and less than or equal to <code class="literal">1000</code>.</p>
<p>Defaults to <code class="literal">10</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">current</code> (optional)
</span>
</dt>
<dd>
<p>Page number to return.</p>
<p>Must be greater than or equal to <code class="literal">1</code> and less than or equal to <code class="literal">100</code>.</p>
<p>Defaults to <code class="literal">1</code>.</p>
</dd>
</dl>
</div>
<p><em>Example</em> - Getting the second page of results with a page size of <code class="literal">5</code>. The API will return documents #5 through #10 by document score in the response.</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X GET 'https://host-2376rb.api.swiftype.com/api/as/v1/engines/national-parks-demo/search' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer search-soaewu2ye6uc45dr8mcd54v8' \
-d '{
  "query": "park",
  "page": {
    "size": 5,
    "current": 2
  }
}'</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="search-results-limit"></a>Limit on results per query</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<p>As described in <a class="xref" href="search.html#search-paging" title="Page">Page</a>, App Search limits <code class="literal">page.size</code> to <code class="literal">1000</code> and <code class="literal">page.current</code> to <code class="literal">100</code>.
This implies a limit of one hundred thousand results per search query (1000×100).
But App Search is further constrained by the default result window in Elasticsearch.
Therefore, <span class="strong strong"><strong>App Search effectively limits each search query to ten thousand (10000) results</strong></span>.</p>
<p>When you query for more than 10000 results, App Search returns a successful response.
However, the response is empty.</p>
<p>For example, consider a query for 10 pages of 1000 results each.
App Search returns a successful response with 10000 results:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">"page": {
    "current": 10,
    "size": 1000
}</pre>
</div>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json"># 200 OK

{
    "meta": {
        "page": {
            "current": 10,
            "total_pages": 10,
            "total_results": 10000,
            "size": 1000
        },
    },
    "results": [
      …
    ]
}</pre>
</div>
<p>However, increasing <code class="literal">page.current</code> to <code class="literal">11</code> exceeds the effective limit of 10000 results.
App Search still returns a successful response, but the response is empty.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">"page": {
    "current": 11,
    "size": 1000
}</pre>
</div>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json"># 200 OK

{
    "meta": {
        "page": {
            "current": 11,
            "total_pages": 0,
            "total_results": 0,
            "size": 1000
        },
    },
    "results": []
}</pre>
</div>
<p>Work around this limitation by requesting fewer documents.
Divide a large set of documents into smaller sets by filtering, perhaps by category, date range, or other fields.
Choose filters that create sets smaller than 10000.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="search-common-malformed-api-requests"></a>Common issues</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.9/app-search-docs/api-reference/search.asciidoc">edit</a></div>
</div></div></div>
<p>When constructing search API requests, some common issues are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">query</code> parameter is omitted.
</li>
<li class="listitem">
The value of <code class="literal">query</code> is not a string or a number.
</li>
<li class="listitem">
The value of <code class="literal">page</code> is not a JSON object.
</li>
<li class="listitem">
The value of <code class="literal">page.size</code> is not greater than or equal to <code class="literal">1</code> and less than or equal to <code class="literal">1000</code>.
</li>
<li class="listitem">
The value of <code class="literal">page.current</code> is not greater than or equal to <code class="literal">1</code> and less than or equal to <code class="literal">100</code>.
</li>
<li class="listitem">
The query requests more than 10000 results, returning an empty response.
</li>
</ul>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="schema.html">« Schema</a>
</span>
<span class="next">
<a href="boosts.html">Boosts »</a>
</span>
</div>
</body>
</html>
