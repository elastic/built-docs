<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Analytics counts API | App Search documentation [8.14] | Elastic</title>
<meta class="elastic" name="content" content="Analytics counts API | App Search documentation [8.14]">

<link rel="home" href="index.html" title="App Search documentation [8.14]"/>
<link rel="up" href="api-reference.html" title="API Reference"/>
<link rel="prev" href="clicks.html" title="Analytics clicks API"/>
<link rel="next" href="queries.html" title="Analytics queries API"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="App Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/8.14"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="clicks.html">« Analytics clicks API</a>
</span>
<span class="next">
<a href="queries.html">Analytics queries API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">App Search<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="api-reference.html">API Reference</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Analytics counts API</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="counts"></a>Analytics counts API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h2>
</div></div></div>
<p>Returns the number of <code class="literal">clicks</code> and total number of <code class="literal">queries</code> in ascending order.</p>
<p>One day is the default block of time and the default time/date format is <a href="https://www.ietf.org/rfc/rfc3339.txt" class="ulink" target="_top">RFC3339</a>.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="counts.html#counts-week-counts" title="Weekly Counts">Weekly Counts</a></strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="counts.html#counts-counts-filters" title="Counts Filtering">Counts Filtering</a></strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong><a class="xref" href="counts.html#counts-counts-full" title="Full Example">Full example</a></strong></span>
</li>
</ul>
</div>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">GET <a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/{ENGINE_NAME}/analytics/counts</pre>
</div>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">POST <a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/{ENGINE_NAME}/analytics/counts</pre>
</div>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">// An example JSON payload from the analytics/counts endpoint.
{
  "results": [
    {
      "clicks": number,
      "queries": number,
      "from": date,
      "to": date
    }
  ]
}</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="counts-week-counts"></a>Weekly Counts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h3>
</div></div></div>
<p>Return <code class="literal">7</code> days worth of results by default.</p>
<p>Each object represents a single day.</p>
<p><em>Example</em> - A <code class="literal">GET</code> request with no addition parameters.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 123,
      "queries": 2322,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 214,
      "queries": 5122,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 321,
      "queries": 4544,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 10,
      "queries": 500,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 434,
      "queries": 1100,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 312,
      "queries": 4343,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 87,
      "queries": 434,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 23,
      "queries": 439,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="counts-counts-filters"></a>Counts Filtering<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filters</code> (optional)
</span>
</dt>
<dd>
The filters key is the parent key. If no options are provided underneath it, the last 7 days are returned.
</dd>
<dt>
<span class="term">
<code class="literal">query</code> (optional)
</span>
</dt>
<dd>
You can supply a particular query to see the relevant documents that have received clicks and/or queries within a time frame. You may only include one query parameter. View example.
</dd>
<dt>
<span class="term">
<code class="literal">tag</code> (optional)
</span>
</dt>
<dd>
The Search endpoint can be used to attach tags to your documents. One or more tags can be applied to filter results via the API or within your analytics dashboard. View example.
</dd>
<dt>
<span class="term">
<code class="literal">document_id</code> (optional)
</span>
</dt>
<dd>
Providing a document_id will narrow results down to that specific document. You may only provide one document_id at a time. View example.
</dd>
<dt>
<span class="term">
<code class="literal">date</code> (optional)
</span>
</dt>
<dd>
Specify a range of time. The from and to fields are optional and the expected format is RFC3339. You may omit the time: YYYY-MM-DD. View example.
</dd>
<dt>
<span class="term">
<code class="literal">interval</code> (optional)
</span>
</dt>
<dd>
You can define an interval along with your date range. Can be either hour or day, with day as the default. You are limited to a maximum of 100 results within your interval. Therefore, when expecting hours, a date range can not exceed 100 hours or 4 days.
</dd>
<dt>
<span class="term">
<code class="literal">all</code> (optional)
</span>
</dt>
<dd>
Nest multiple filters under the all option. View example.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-queries"></a>Query<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">query</code> filter option. We want to see how many <code class="literal">clicks</code> and <code class="literal">queries</code> the <code class="literal">everglade</code> query received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "query": "everglade" }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 23,
      "queries": 322,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 14,
      "queries": 122,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 21,
      "queries": 544,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 50,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 34,
      "queries": 100,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 12,
      "queries": 343,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 7,
      "queries": 34,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 39,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-tags"></a>Tag(s)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We have a <a class="xref" href="analytics-tags-guide.html" title="Analytics Tags Guide">Tags Guide</a>, too.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="counts-single-tags"></a>Single Tag<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h5>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">tag</code> filter option. We want to see how many clicks and queries that documents with the <code class="literal">web</code> tag received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "tag": "web" }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 1,
      "queries": 12,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 44,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 133,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 5,
      "queries": 234,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 4,
      "queries": 211,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 146,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 245,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 210,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="counts-multiple-tags"></a>Multiple Tags<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h5>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">tag</code> filter option containing multiple tags. We want to see how many clicks and queries that documents with the <code class="literal">web</code> and <code class="literal">mobile</code> tags received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "tag": ["web", "mobile"] }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 2,
      "queries": 22,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 4,
      "queries": 34,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 233,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 450,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 11,
      "queries": 1403,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 5,
      "queries": 546,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 375,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 240,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-document"></a>Document ID<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">document_id</code> filter option. We want to see how many clicks and queries that the document with id <code class="literal">321</code> received over the default <code class="literal">7</code> day time period.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": { "document_id": 321 }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 4,
      "queries": 239,
      "from": "2018-07-02T10:24:46Z",
      "to": "2018-07-03T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 131,
      "from": "2018-07-03T00:00:00+00:00",
      "to": "2018-07-04T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 356,
      "from": "2018-07-04T00:00:00+00:00",
      "to": "2018-07-05T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 150,
      "from": "2018-07-05T00:00:00+00:00",
      "to": "2018-07-06T00:00:00+00:00"
    },
    {
      "clicks": 6,
      "queries": 190,
      "from": "2018-07-06T00:00:00+00:00",
      "to": "2018-07-07T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 411,
      "from": "2018-07-07T00:00:00+00:00",
      "to": "2018-07-08T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 34,
      "from": "2018-07-08T00:00:00+00:00",
      "to": "2018-07-09T00:00:00+00:00"
    },
    {
      "clicks": 6,
      "queries": 339,
      "from": "2018-07-09T00:00:00+00:00",
      "to": "2018-07-09T10:24:46Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-dates"></a>Date<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">POST</code> request with the <code class="literal">date</code> filters option. We want a shorter time frame than the default <code class="literal">7</code> days. We only want <code class="literal">4</code> days. Expects results <em>from</em> the earlier date, <em>to</em> the later date.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X POST '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2018-06-15T00:00:00+00:00",
      "to": "2018-06-19T00:00:00+00:00"
    }
  }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 1,
      "queries": 139,
      "from": "2018-06-15T00:00:00+00:00",
      "to": "2018-07-16T00:00:00+00:00"
    },
    {
      "clicks": 3,
      "queries": 349,
      "from": "2018-07-16T00:00:00+00:00",
      "to": "2018-07-17T00:00:00+00:00"
    },
    {
      "clicks": 2,
      "queries": 297,
      "from": "2018-07-17T00:00:00+00:00",
      "to": "2018-07-18T00:00:00+00:00"
    },
    {
      "clicks": 1,
      "queries": 111,
      "from": "2018-07-18T00:00:00+00:00",
      "to": "2018-07-19T00:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-interval"></a>Interval<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only <code class="literal">100</code> results may be returned at one time. Changing the <code class="literal">interval</code> will require a <code class="literal">date</code> range set to no greater than <code class="literal">100</code> hours or <code class="literal">4</code> days.</p>
</div>
</div>
<p><em>Example</em> - A <code class="literal">POST</code> request with the <code class="literal">date</code> filters option. We are asking for a <code class="literal">6</code> hour window. Interval is set to <code class="literal">hour</code>.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X POST '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2018-06-18T18:00:00+00:00",
      "to": "2018-06-19T00:00:00+00:00"
    }
  },
  "interval": "hour"
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 0,
      "queries": 31,
      "from": "2018-06-18T18:00:00+00:00",
      "to": "2018-06-18T19:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 58,
      "from": "2018-06-18T19:00:00+00:00",
      "to": "2018-06-18T20:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 24,
      "from": "2018-06-18T20:00:00+00:00",
      "to": "2018-06-18T21:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 34,
      "from": "2018-06-18T21:00:00+00:00",
      "to": "2018-06-18T22:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 15,
      "from": "2018-06-18T22:00:00+00:00",
      "to": "2018-06-18T23:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 9,
      "from": "2018-06-18T23:00:00+00:00",
      "to": "2018-06-19T00:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-all"></a>Multiple Filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p><em>Example</em> - A <code class="literal">GET</code> request with the <code class="literal">date</code> and <code class="literal">tag</code> filter options. We want to see how many <code class="literal">clicks</code> and <code class="literal">queries</code> documents with the <code class="literal">web</code> and <code class="literal">mobile</code> tag received within a <code class="literal">2</code> day window.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/counts' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "all": [
      {
        "date": {
          "from": "2018-06-17T00:00:00+00:00",
          "to": "2018-06-19T00:00:00+00:00"
        }
      }, {
        "tag": ["web", "mobile"]
      }
    ]
  }'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 4,
      "queries": 639,
      "from": "2018-06-15T00:00:00+00:00",
      "to": "2018-07-16T00:00:00+00:00"
    },
    {
      "clicks": 13,
      "queries": 949,
      "from": "2018-07-16T00:00:00+00:00",
      "to": "2018-07-17T00:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="counts-counts-full"></a>Full Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.14/app-search-docs/api-reference/analytics/counts.asciidoc">edit</a></h4>
</div></div></div>
<p>You can combine all of the different parameters for granular responses.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Including both <code class="literal">tags</code> and <code class="literal">document_id</code> is strange, but it helps to see everything within one example.</p>
</div>
</div>
<p><em>Example</em> - A <code class="literal">GET</code> request that includes the <code class="literal">interval</code> and <code class="literal">filters</code> arguments. All <code class="literal">filters</code> options are included. The <code class="literal">interval</code> is set to <code class="literal">hour</code>, with the <code class="literal">date</code> range set to <code class="literal">2</code> hours.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.14/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/analytics/clicks' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "all": [
      {
        "tag": ["mobile", "web"]
      },{
        "query": "rails"
      }, {
        "document_id": "163"
      }, {
        "date": {
          "from": "2018-07-05T12:00:00+00:00",
          "to": "2018-07-05T14:00:00+00:00"
        }
      }
    ]
  },
  "interval": "hour"
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "clicks": 1,
      "queries": 139,
      "from": "2018-07-05T12:00:00+00:00",
      "to": "2018-07-05T13:00:00+00:00"
    },
    {
      "clicks": 0,
      "queries": 59,
      "from": "2018-07-05T13:00:00+00:00",
      "to": "2018-07-05T14:00:00+00:00"
    }
  ]
}</pre>
</div>
</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="clicks.html">« Analytics clicks API</a>
</span>
<span class="next">
<a href="queries.html">Analytics queries API »</a>
</span>
</div>
</body>
</html>
