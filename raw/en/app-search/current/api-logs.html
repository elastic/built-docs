<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>API logs API | App Search documentation [8.15] | Elastic</title>
<meta class="elastic" name="content" content="API logs API | App Search documentation [8.15]">

<link rel="home" href="index.html" title="App Search documentation [8.15]"/>
<link rel="up" href="api-reference.html" title="API Reference"/>
<link rel="prev" href="queries.html" title="Analytics queries API"/>
<link rel="next" href="clickthrough.html" title="Click API"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="App Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/8.15"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="queries.html">« Analytics queries API</a>
</span>
<span class="next">
<a href="clickthrough.html">Click API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">App Search<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="api-reference.html">API Reference</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>API logs API</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="api-logs"></a>API logs API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h2>
</div></div></div>
<p>Displays API request and response data at the <span class="strong strong"><strong>Engine</strong></span> level.</p>
<p>The following operations do not log to the API logs:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Account-level operations, such as requests to <a class="xref" href="credentials.html" title="Credentials API">Credentials</a>.
</li>
<li class="listitem">
Unauthenticated operations.
</li>
<li class="listitem">
Searches performed in the documents view.
</li>
<li class="listitem">
Searches performed in the query tester.
</li>
</ul>
</div>
<p>Searches performed in a generated Search UI reference app <em>are</em> included in the API logs.</p>
<p>The following table details which API endpoints log to the API logs.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">API Endpoint</th>
<th align="left" valign="top">Logged?</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">engines</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">documents</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">search</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">synonyms</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">clickthrough</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">analytics</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">curations</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">logs/api</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Yes</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">credentials</code></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>No</strong></span></p></td>
</tr>
</tbody>
</table>
</div>
<p>Every authenticated <code class="literal">GET</code>, <code class="literal">PUT</code>, <code class="literal">POST</code> or <code class="literal">DELETE</code> received during a search query, analytics request, document creation - any <em>Engine event</em> of any kind - will be recorded within the <span class="strong strong"><strong>API Log</strong></span>.</p>
<p>Even requests against the <span class="strong strong"><strong>API Log</strong></span> itself are recorded within the <span class="strong strong"><strong>API Log</strong></span>.</p>
<p>Read more:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="api-logs.html#api-logs-authentication" title="Authentication">Authentication</a>
</li>
<li class="listitem">
<a class="xref" href="api-logs.html#api-logs-response-object" title="Response Object">Response Object</a>
</li>
<li class="listitem">
<a class="xref" href="api-logs.html#api-logs-log-filtering" title="Searching the API Log">Searching the API Log</a>
</li>
<li class="listitem">
<a class="xref" href="api-logs.html#api-logs-log-reading" title="Filtering the API Log">Filtering the API Log</a>
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>API Log</strong></span> data is robust. The examples each show one result in full, for clarity.</p>
</div>
</div>
<h4><a id="api-logs-reference-log-retention"></a>Log retention<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h4>
<p>Since 7.9.0, App Search retains API event data according to your Enterprise Search log retention settings.</p>
<p>See <a href="/guide/en/enterprise-search/8.15/log-retention.html" class="ulink" target="_blank" rel="noopener">Log retention</a> in the Enterprise Search documentation.</p>
<h4><a id="api-logs-reference-log-settings"></a>Log settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h4>
<p>Since 7.9.0, you can disable API event logging using the App Search log settings.</p>
<p>See <a class="xref" href="logs.html" title="Log settings guide">Log settings guide</a>.</p>
<h4><a id="api-logs-authentication"></a>Authentication<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h4>
<p>For authentication, the <span class="strong strong"><strong>API Logs</strong></span> endpoint requires...</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
The name of your <span class="strong strong"><strong>Engine</strong></span>: <code class="literal">[ENGINE]</code>
</li>
<li class="listitem">
A <span class="strong strong"><strong>Private API Key</strong></span>: <code class="literal">[PRIVATE_API_KEY]</code>
</li>
</ol>
</div>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/[ENGINE]/logs/api' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer [PRIVATE_API_KEY]'</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must authenticate using an <span class="strong strong"><strong>API Key</strong></span> to enable API logging. Basic Auth will not generate API logs.</p>
</div>
</div>
<h4><a id="api-logs-response-object"></a>Response Object<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h4>
<p>By default, you will receive <span class="strong strong"><strong>10 results per page</strong></span> in <span class="strong strong"><strong>ascending</strong></span> order.</p>
<p>A result will include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Time-stamp
</li>
<li class="listitem">
HTTP method
</li>
<li class="listitem">
Full request path
</li>
<li class="listitem">
Status code
</li>
<li class="listitem">
Request body and response
</li>
<li class="listitem">
User Agent queried
</li>
</ul>
</div>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">// An example JSON payload from the logs/api endpoint.
{
  "results": [
    {
      "timestamp": string,
      "http_method": string,
      "path": string,
      "full_request_path": string,
      "status": number,
      "request_body": string,
      "response_body": string,
      "user_agent": string
    }
  ],
  "meta": {
    "query": string,
    "filters": {
      "date": {
        "from": string,
        "to": string
      }
    },
    "page": {
      "current": number,
      "size": number
    }
  }
}</pre>
</div>
<h5><a id="api-logs-log-filtering"></a>Searching the API Log<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h5>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">GET <a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/[ENGINE]/logs/api</pre>
</div>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">POST <a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/[ENGINE]/logs/api</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filters</code>/<code class="literal">date</code> (required)
</span>
</dt>
<dd>
Requires a nested date object under filters containing from and to keys. The keys must contain dates formatted in accordance with RFC3339.
</dd>
<dt>
<span class="term">
<code class="literal">query</code> (optional)
</span>
</dt>
<dd>
You can search over the <code class="literal">full_request_path</code> of an API Log event.
Use this to specify a particular endpoint, e.g. analytics: <code class="literal">/api/as/v1/engines/[ENGINE]/click.json</code>, or search: <code class="literal">/api/as/v1/engines/[ENGINE]/search.json</code>.
</dd>
<dt>
<span class="term">
<code class="literal">sort_direction</code> (optional)
</span>
</dt>
<dd>
Would you like to have your results ascending, oldest to newest, or descending, newest to oldest? The key accepts asc or desc. Defaults to ascending.
</dd>
<dt>
<span class="term">
<code class="literal">page</code> (optional)
</span>
</dt>
<dd>
Set <code class="literal">size</code> to the maximum number of results to return in a given page.
Set <code class="literal">current</code> to return a specific page.
Expects integers within all fields.
</dd>
</dl>
</div>
<p><em>Example</em> - A <code class="literal">GET</code> request for search API logs between October 15th and 16th with 20 results on each page, in descending order.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/logs/api' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2018-10-15T00:00:00+00:00",
      "to": "2018-10-16T00:00:00+00:00"
    }
  },
  "page": {
    "size": 20
  },
  "query": "/api/as/v1/engines/national-parks-demo/search.json",
  "sort_direction": "desc"
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "timestamp": "2018-10-15T20:42:14Z",
      "http_method": "POST",
      "path": "/api/as/v1/engines/national-parks-demo/search",
      "full_request_path": "/api/as/v1/engines/national-parks-demo/search",
      "status": 200,
      "request_body": "{\n  \"query\": \"everglade\"\n}",
      "response_body": "{\"meta\":{\"warnings\":[],\"page\":{\"current\":1,\"total_pages\":1,\"total_results\":3,\"size\":10},\"request_id\":\"164c8262b4a82039def310f8139f68d2\"},\"results\":[{\"nps_link\":{\"raw\":\"https://www.nps.gov/ever/index.htm\"},\"title\":{\"raw\":\"Everglades\"},\"date_established\":{\"raw\":\"1934-05-30T05:00:00+00:00\"},\"world_heritage_site\":{\"raw\":\"true\"},\"states\":{\"raw\":[\"Florida\"]},\"description\":{\"raw\":\"The Everglades are the largest tropical wilderness in the United States. This mangrove and tropical rainforest ecosystem and marine estuary is home to 36 protected species, including the Florida panther, American crocodile, and West Indian manatee. Some areas have been drained and developed; restoration projects aim to restore the ecology.\"},\"visitors\":{\"raw\":930907.0},\"id\":{\"raw\":\"park_everglades\"},\"location\":{\"raw\":\"25.32,-80.93\"},\"square_km\":{\"raw\":6106.6},\"acres\":{\"raw\":1508968.1},\"_meta\":{\"score\":1.0028129}},{\"nps_link\":{\"raw\":\"https://www.nps.gov/voya/index.htm\"},\"title\":{\"raw\":\"Voyageurs\"},\"date_established\":{\"raw\":\"1971-01-08T06:00:00+00:00\"},\"world_heritage_site\":{\"raw\":\"false\"},\"states\":{\"raw\":[\"Minnesota\"]},\"description\":{\"raw\":\"This park protecting four lakes near the Canada\\u2013US border is a site for canoeing, kayaking, and fishing. The park also preserves a history populated by Ojibwe Native Americans, French fur traders called voyageurs, and gold miners. Formed by glaciers, the region features tall bluffs, rock gardens, islands, bays, and several historic buildings.\"},\"visitors\":{\"raw\":241912.0},\"id\":{\"raw\":\"park_voyageurs\"},\"location\":{\"raw\":\"48.5,-92.88\"},\"square_km\":{\"raw\":883.0},\"acres\":{\"raw\":218200.15},\"_meta\":{\"score\":0.0062864386}},{\"nps_link\":{\"raw\":\"https://www.nps.gov/wrst/index.htm\"},\"title\":{\"raw\":\"Wrangell\\u2013St. Elias\"},\"date_established\":{\"raw\":\"1980-12-02T06:00:00+00:00\"},\"world_heritage_site\":{\"raw\":\"true\"},\"states\":{\"raw\":[\"Alaska\"]},\"description\":{\"raw\":\"An over 8 million acres (32,375 km2) plot of mountainous country\\u2014the largest National Park in the system\\u2014protects the convergence of the Alaska, Chugach, and Wrangell-Saint Elias Ranges, which include many of the continent's tallest mountains and volcanoes, including the 18,008-foot Mount Saint Elias. More than a quarter of the park is covered with glaciers, including the tidewater Hubbard Glacier, piedmont Malaspina Glacier, and valley Nabesna Glacier.\"},\"visitors\":{\"raw\":79047.0},\"id\":{\"raw\":\"park_wrangell\\u2013st.-elias\"},\"location\":{\"raw\":\"61,-142\"},\"square_km\":{\"raw\":33682.6},\"acres\":{\"raw\":8323146.48},\"_meta\":{\"score\":0.00437395}}]}",
      "user_agent": "curl/7.54.0"
    },

    ## ... Truncated!

  ],
  "meta": {
    "query": "/api/as/v1/engines/national-parks-demo/search.json",
    "filters": {
      "date": {
        "from": "2018-10-15T00:00:00+00:00",
        "to": "2018-10-16T00:00:00+00:00"
      }
    },
    "sort_direction": "desc",
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 9,
      "size": 20
    }
  }
}</pre>
</div>
<h5><a id="api-logs-log-reading"></a>Filtering the API Log<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h5>
<p>Filter the API Log.</p>
<p>A time-frame must be provided.</p>
<p>You can combine all parameters within the filters object.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">GET <a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/[ENGINE]/logs/api</pre>
</div>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">POST <a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/[ENGINE]/logs/api</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filters</code>/<code class="literal">date</code> (required)
</span>
</dt>
<dd>
Requires a nested date object under filters containing from and to keys. The keys must contain dates formatted in accordance with RFC3339.
</dd>
<dt>
<span class="term">
<code class="literal">filters</code>/<code class="literal">status</code> (optional)
</span>
</dt>
<dd>
Filter based on a particular status code: 400, 401, 403, 429, 200.
</dd>
<dt>
<span class="term">
<code class="literal">filters</code>/<code class="literal">method</code> (optional)
</span>
</dt>
<dd>
Filter based on a particular HTTP method: GET, POST, PUT, PATCH, DELETE.
</dd>
</dl>
</div>
<h5><a id="api-logs-date-filter"></a>Date Filter<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h5>
<p><em>Example</em> - A <code class="literal">GET</code> request to receive all <span class="strong strong"><strong>API Log</strong></span> events between October 15th and 16th.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/logs/api' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2018-10-15T00:00:00+00:00",
      "to": "2018-10-16T00:00:00+00:00"
    }
  }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "timestamp": "2018-10-15T17:01:33Z",
      "http_method": "GET",
      "path": "/api/as/v1/engines/national-parks-demo/search",
      "full_request_path": "/api/as/v1/engines/national-parks-demo/search",
      "status": 200,
      "request_body": "{\"result_fields\": {\"states\": {\"raw\": {}}, \"location\": {\"raw\": {}}, \"title\": {\"raw\": {}}}, \"query\": \"california\", \"group\": {\"field\": \"states\"}}",
      "response_body": "{\"meta\":{\"warnings\":[],\"page\":{\"current\":1,\"total_pages\":1,\"total_results\":2,\"size\":10},\"request_id\":\"700de28b9ae89e05e7114353eed7fbee\"},\"results\":[{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Channel Islands\"},\"location\":{\"raw\":\"34.01,-119.42\"},\"id\":{\"raw\":\"park_channel-islands\"},\"_meta\":{\"score\":5.2469006},\"_group\":[{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Joshua Tree\"},\"location\":{\"raw\":\"33.79,-115.9\"},\"id\":{\"raw\":\"park_joshua-tree\"},\"_meta\":{\"score\":5.2469006}},{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Kings Canyon\"},\"location\":{\"raw\":\"36.8,-118.55\"},\"id\":{\"raw\":\"park_kings-canyon\"},\"_meta\":{\"score\":5.2469006}},{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Lassen Volcanic\"},\"location\":{\"raw\":\"40.49,-121.51\"},\"id\":{\"raw\":\"park_lassen-volcanic\"},\"_meta\":{\"score\":5.2469006}},{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Pinnacles\"},\"location\":{\"raw\":\"36.48,-121.16\"},\"id\":{\"raw\":\"park_pinnacles\"},\"_meta\":{\"score\":5.2469006}},{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Redwood\"},\"location\":{\"raw\":\"41.3,-124\"},\"id\":{\"raw\":\"park_redwood\"},\"_meta\":{\"score\":5.2469006}},{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Sequoia\"},\"location\":{\"raw\":\"36.43,-118.68\"},\"id\":{\"raw\":\"park_sequoia\"},\"_meta\":{\"score\":5.2469006}},{\"states\":{\"raw\":[\"California\"]},\"title\":{\"raw\":\"Yosemite\"},\"location\":{\"raw\":\"37.83,-119.5\"},\"id\":{\"raw\":\"park_yosemite\"},\"_meta\":{\"score\":5.2469006}},{\"states\":{\"raw\":[\"California\",\"Nevada\"]},\"title\":{\"raw\":\"Death Valley\"},\"location\":{\"raw\":\"36.24,-116.82\"},\"id\":{\"raw\":\"park_death-valley\"},\"_meta\":{\"score\":3.3266773}}],\"_group_key\":\"California\"},{\"states\":{\"raw\":[\"California\",\"Nevada\"]},\"title\":{\"raw\":\"Death Valley\"},\"location\":{\"raw\":\"36.24,-116.82\"},\"id\":{\"raw\":\"park_death-valley\"},\"_meta\":{\"score\":3.3266773},\"_group\":[],\"_group_key\":\"Nevada\"}]}",
      "user_agent": "python-requests/2.19.1"
    },

    ## ... Truncated!

  ],
  "meta": {
    "query": "",
    "filters": {
      "date": {
        "from": "2018-10-15T00:00:00+00:00",
        "to": "2018-10-16T00:00:00+00:00"
      }
    },
    "sort_direction": "asc",
    "page": {
      "current": 1,
      "total_pages": 2,
      "total_results": 20,
      "size": 10
    }
  }
}</pre>
</div>
<h5><a id="api-logs-status-filter"></a>Status Filter<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h5>
<p><em>Example</em> - A <code class="literal">GET</code> request to receive all <span class="strong strong"><strong>API Log</strong></span> events between February 1st and 5th with a status code of <code class="literal">400</code>.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/logs/api' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2019-02-01T00:00:00+00:00",
      "to": "2019-02-05T00:00:00+00:00"
    },
    "status": "400"
  }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "timestamp": "2019-02-01T16:06:06Z",
      "http_method": "POST",
      "path": "/api/as/v1/engines/national-parks-demo/query_suggestion",
      "full_request_path": "/api/as/v1/engines/national-parks-demo/query_suggestion",
      "status": 400,
      "request_body": "{\"query\":\"z\",\"types\":{\"documents\":{\"fields\":[\"title\",\"state\"]}}}",
      "response_body": "{\"errors\":[\"Types documents fields contains invalid value: state\"]}",
      "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_2) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0.2 Safari/605.1.15"
    },

    # ... Truncated!

  ],
  "meta": {
    "query": "",
    "filters": {
      "date": {
        "from": "2019-02-01T00:00:00+00:00",
        "to": "2019-02-05T00:00:00+00:00"
      },
      "status": "400"
    },
    "sort_direction": "asc",
    "page": {
      "current": 1,
      "total_pages": 3,
      "total_results": 27,
      "size": 10
    }
  }
}</pre>
</div>
<h5><a id="api-logs-method-filter"></a>Method Filter<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h5>
<p><em>Example</em> - A <code class="literal">GET</code> request to receive all <span class="strong strong"><strong>API Log</strong></span> events between February 1st and 5th with a method of <code class="literal">POST</code>.</p>
<div class="pre_wrapper lang-html">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-html">curl -X GET '<a href="/guide/en/enterprise-search/8.15/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">&lt;ENTERPRISE_SEARCH_BASE_URL&gt;</a>/api/as/v1/engines/national-parks-demo/logs/api' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer private-xxxxxxxxxxxxxxxxxxxx' \
-d '{
  "filters": {
    "date": {
      "from": "2019-02-01T00:00:00+00:00",
      "to": "2019-02-05T00:00:00+00:00"
    },
    "method": "POST"
  }
}'</pre>
</div>
<p><em>Example Response</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">{
  "results": [
    {
      "timestamp": "2019-02-01T01:13:04Z",
      "http_method": "POST",
      "path": "/api/as/v1/engines/national-parks-demo/search.json",
      "full_request_path": "/api/as/v1/engines/national-parks-demo/search.json",
      "status": 200,
      "request_body": "{\"query\":\"example\",\"facets\":{\"states\":{\"type\":\"value\",\"size\":10},\"world_heritage_site\":{\"type\":\"value\",\"size\":10}},\"result_fields\":{\"description\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"nps_link\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"location\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"states\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"title\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"visitors\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"world_heritage_site\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"acres\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"square_km\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"date_established\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}},\"id\":{\"raw\":{},\"snippet\":{\"size\":100,\"fallback\":true}}},\"search_fields\":{\"description\":{},\"nps_link\":{},\"location\":{},\"states\":{},\"title\":{},\"visitors\":{},\"world_heritage_site\":{},\"acres\":{},\"square_km\":{},\"date_established\":{},\"id\":{}},\"page\":{\"current\":1,\"size\":20},\"filters\":{\"all\":[]}}",

    # ... Truncated!

  ],
  "meta": {
    "query": "",
    "filters": {
      "date": {
        "from": "2019-02-01T00:00:00+00:00",
        "to": "2019-02-05T00:00:00+00:00"
      },
      "method": "POST"
    },
    "sort_direction": "asc",
    "page": {
      "current": 1,
      "total_pages": 18,
      "total_results": 173,
      "size": 10
    }
  }
}</pre>
</div>
<h4><a id="api-logs-what-s-next"></a>What&#8217;s Next?<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/app-search-docs/api-logs.asciidoc">edit</a></h4>
<p>Your <span class="strong strong"><strong>API Log</strong></span> is a wellspring of valuable <span class="strong strong"><strong>Engine-level</strong></span> insight. If you want to start looking deeper into how visitors run queries against your <span class="strong strong"><strong>Engines</strong></span>, the <em>Analytics</em> and <em>Clickthrough</em> endpoints are worth exploring. If you want to start improving the relevance of your queries, <em>Synonyms</em> are an excellent place to start.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="analytics.html" title="Analytics APIs">Analytics</a>
</li>
<li class="listitem">
<a class="xref" href="clickthrough.html" title="Click API">Clickthrough</a>
</li>
<li class="listitem">
<a class="xref" href="indexing-documents-guide.html" title="Indexing Documents Guide">Synonyms</a>
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="queries.html">« Analytics queries API</a>
</span>
<span class="next">
<a href="clickthrough.html">Click API »</a>
</span>
</div>
</body>
</html>
