<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Web crawler API reference | Elastic App Search Documentation [master] | Elastic</title>
<link rel="home" href="index.html" title="Elastic App Search Documentation [master]"/>
<link rel="up" href="api-reference.html" title="API Reference"/>
<link rel="prev" href="synonyms.html" title="Synonyms API"/>
<link rel="next" href="api-clients.html" title="API Clients"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/master"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic App Search Documentation [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="api-reference.html">API Reference</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="synonyms.html">« Synonyms API</a>
</span>
<span class="next">
<a href="api-clients.html">API Clients »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="web-crawler-api-reference"></a>Web crawler API reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h2>
</div></div></div>
<p>App Search provides API operations for the <a class="xref" href="web-crawler.html" title="App Search web crawler">web crawler</a>.
This document provides a reference for each API operation, as well as shared concerns:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-shared-concerns" title="Shared concerns">Shared concerns</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-shared-concerns-base-url" title="Enterprise search base URL">Enterprise search base URL</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-shared-concerns-engine" title="Engine">Engine</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-shared-concerns-access" title="Access">Access</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler" title="Crawler">Crawler</a>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-crawl-requests" title="Crawl requests">Crawl requests</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-crawl-requests-active" title="Get current active crawl request">Get current active crawl request</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-crawl-requests-active-cancel" title="Cancel an active crawl">Cancel an active crawl</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-crawl-requests" title="List crawl requests">List crawl requests</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-crawl-requests" title="Create a new crawl request">Create a new crawl request</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-partial-crawl-requests" title="Create a new partial crawl request">Create a new partial crawl request</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-crawl-requests-id" title="View details for a crawl request">View details for a crawl request</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-crawl-schedules" title="Crawl schedules">Crawl schedules</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-crawl-schedule" title="Get current crawl schedule">Get current crawl schedule</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-put-crawler-crawl-schedule" title="Create or update a crawl schedule">Create or update a crawl schedule</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-delete-crawler-crawl-schedule" title="Delete a crawl schedule">Delete a crawl schedule</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-process-crawls" title="Process crawls">Process crawls</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-process-crawls" title="List process crawls">List process crawls</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-process-crawls-id" title="View details for a process crawl">View details for a process crawl</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-process-crawls-id-denied-urls" title="View denied URLs for a process crawl">View denied URLs for a process crawl</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-process-crawls" title="Create a new process crawl">Create a new process crawl</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-troubleshooting" title="URL validation and debugging">URL validation and debugging</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-domain" title="Validate a domain">Validate a domain</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-url" title="Validate a URL">Validate a URL</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-extract-url" title="Extract content from a URL">Extract content from a URL</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-trace-url" title="Trace a URL">Trace a URL</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-user-agent" title="User agent">User agent</a>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-domains" title="Domains">Domains</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-domains" title="List domains">List domains</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-domains" title="Create a new domain">Create a new domain</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-get-crawler-domain" title="View details for a domain">View details for a domain</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-put-crawler-domain" title="Update a domain">Update a domain</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-delete-crawler-domain" title="Delete a domain">Delete a domain</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-entry-points" title="Entry points">Entry points</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-entry-points" title="Create a new entry point">Create a new entry point</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-put-entry-point" title="Update an entry point">Update an entry point</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-delete-entry-point" title="Delete an entry point">Delete an entry point</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-crawl-rules" title="Crawl rules">Crawl rules</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawl-rules" title="Create a new crawl rule">Create a new crawl rule</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-put-crawl-rule" title="Update a crawl rule">Update a crawl rule</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-delete-crawl-rule" title="Delete a crawl rule">Delete a crawl rule</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-sitemaps" title="Sitemaps">Sitemaps</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-sitemaps" title="Create a new sitemap">Create a new sitemap</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-put-sitemap" title="Update a sitemap">Update a sitemap</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-delete-sitemap" title="Delete a sitemap">Delete a sitemap</a>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-shared-concerns"></a>Shared concerns<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>All web crawler API operations share the following concerns.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-shared-concerns-base-url"></a>Enterprise search base URL<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>This is the <a href="/guide/en/enterprise-search/master/endpoints-ref.html#enterprise-search-base-url" class="ulink" target="_blank" rel="noopener">base URL</a> for your Enterprise Search deployment.</p>
<p>In the API <code class="literal">curl</code> examples, this is represented by the shell variable <code class="literal">${ENTERPRISE_SEARCH_BASE_URL}</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-shared-concerns-engine"></a>Engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Most endpoints within the crawler API are scoped to a particular App Search engine.
The engine is identified by the engine name value provided in the URL of the request.
If an engine could not be found for any API request, an empty HTTP 404 response will be returned.</p>
<p>In the API <code class="literal">curl</code> examples, the name of your engine is represented by the shell variable <code class="literal">${ENGINE_NAME}</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-shared-concerns-access"></a>Access<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Users of this API have three choices for access:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">Basic</code> authentication with a <code class="literal">user</code> and <code class="literal">password</code>
</li>
<li class="listitem">
Elasticsearch token
</li>
<li class="listitem">
App Search key
</li>
</ul>
</div>
<p>All <code class="literal">curl</code> examples in this API reference assume you are using either an Elasticsearch token or an App Search key, and that token is represented by the variable <code class="literal">${TOKEN}</code>. See <a class="xref" href="authentication.html" title="Authentication"><em>Authentication</em></a>.</p>
<p>Throughout this reference, these values are written as shell variables in the <code class="literal">curl</code> examples for easy substitution.</p>
<p>For example:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-get-crawler"></a>Crawler<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>Responds with domain objects configured for an engine.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler</code></p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-examples"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return the domain objects configured for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "domains": [
    {
      "id": "{DOMAIN_ID}",
      "name": "{DOMAIN_NAME}",
      "document_count": 0,
      "entry_points": [
        {
          "id": "6087cec06dda9bdfb4a49e39",
          "value": "/"
        }
      ],
      "crawl_rules": [],
      "default_crawl_rule": {
        "id": "-",
        "order": 0,
        "policy": "allow",
        "rule": "regex",
        "pattern": ".*"
      },
      "sitemaps": []
    }
  ]
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-crawl-requests"></a>Crawl requests<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>Each crawl performed by the Enterprise Search web crawler has an associated <span class="strong strong"><strong>crawl request</strong></span> object.
The crawl requests API allows operators to create new crawl requests and to view and control the state of existing crawl requests.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-crawl-requests-active"></a>Get current active crawl request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Returns a crawl request object for an active crawl or returns an HTTP 404 response if there is no active crawl for an engine:</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_requests/active</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return current active crawl information for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests/active" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "601b21adbeae67679b3b760a",
  "status": "running",
  "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
  "begun_at": "Wed, 03 Feb 2021 22:20:31 +0000",
  "completed_at": null
}</pre>
</div>
<p>For cases when there is no active crawl for a given engine, the API responds with a 404 error:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 404 Not Found
{
  "error": "There are no active crawl requests for this engine"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-crawler-crawl-requests-active-cancel"></a>Cancel an active crawl<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Cancels an active crawl for an engine or returns an HTTP 404 response if there is no active crawl for an engine.
This API method requires an App Search Private API Key for authentication.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines&lt;engine_name&gt;crawler/crawl_requests/active/cancel</code></p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It may take some time for the crawler to detect the cancellation request and gracefully stop the crawl.
During the time, the status of the crawl request will remain <code class="literal">canceling</code>.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_2"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to cancel an active crawl for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests/active/cancel" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A succesful response returns a single crawl request object with a <code class="literal">canceling</code> state:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "601b21adbeae67679b3b760a",
  "status": "canceling",
  "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
  "begun_at": "Wed, 03 Feb 2021 22:20:31 +0000",
  "completed_at": null
}</pre>
</div>
<p>For cases when there is no active crawl for a given engine, the API responds with a 404 error:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 404 Not Found
{
  "error": "There are no active crawl requests for this engine"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-crawl-requests"></a>List crawl requests<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Returns a list of crawl requests for a given engine.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_requests</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">page[current]</code> (optional)
</span>
</dt>
<dd>
Current page number (default: 1).
</dd>
<dt>
<span class="term">
<code class="literal">page[size]</code> (optional)
</span>
</dt>
<dd>
Page size (default: 25). The maximum is 100, and be will truncated if a larger size is requested.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_3"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return a list of crawl requests for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 3,
      "size": 25
    }
  },
  "results": [
    {
      "id": "601b21adbeae67679b3b760a",
      "status": "running",
      "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
      "begun_at": "Wed, 03 Feb 2021 22:20:31 +0000",
      "completed_at": null
    },
    {
      "id": "60147e93beae67bf7ef72e86",
      "status": "success",
      "created_at": "Fri, 29 Jan 2021 21:30:59 +0000",
      "begun_at": "Fri, 29 Jan 2021 21:31:00 +0000",
      "completed_at": "Fri, 29 Jan 2021 21:35:20 +0000"
    },
    {
      "id": "60146c07beae67f397300128",
      "status": "canceled",
      "created_at": "Fri, 29 Jan 2021 20:11:51 +0000",
      "begun_at": "Fri, 29 Jan 2021 20:11:52 +0000",
      "completed_at": "Fri, 29 Jan 2021 20:12:51 +0000"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-crawler-crawl-requests"></a>Create a new crawl request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Requests a new crawl for an engine:
If there is already an active crawl, the request returns an HTTP 400 response with an error message.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_requests</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_4"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to start a new crawl for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>If the request is successful, the response contains a single crawl request object with a <code class="literal">pending</code> state:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "601b21adbeae67679b3b760a",
  "status": "pending",
  "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
  "begun_at": null,
  "completed_at": null
}</pre>
</div>
<p>If there is already an active crawl, the API returns an HTTP 400 response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 400 Bad Request
{
  "error": "There is an active crawl for the engine \"your-engine\", please wait for it to finish or abort it before requesting another one"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-crawler-partial-crawl-requests"></a>Create a new partial crawl request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Certain properties of a crawl can be overridden at request time, allowing the user to request a crawl against a specified subset of their corpus. Such a crawl is considered a <a class="xref" href="web-crawler-reference.html#web-crawler-reference-partial-crawl" title="Partial crawl">partial crawl</a>.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_requests</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overrides</code> (optional)
</span>
</dt>
<dd>
<p>
Allows the user to override a subset of crawl configuration for the requested crawl.
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">max_crawl_depth</code> (optional)
</span>
</dt>
<dd>
Maximum depth to follow links while discovering new content.
</dd>
<dt>
<span class="term">
<code class="literal">domain_allowlist</code> (optional)
</span>
</dt>
<dd>
Array of domain names for restricting which links to follow.
</dd>
<dt>
<span class="term">
<code class="literal">seed_urls</code> (optional)
</span>
</dt>
<dd>
Array of initial URLs to crawl. Defaults to the configured entrypoints for each crawler domain.
</dd>
<dt>
<span class="term">
<code class="literal">sitemap_urls</code> (optional)
</span>
</dt>
<dd>
Array of sitemap URLs to be used for content discovery.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_5"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to start a partial crawl for an engine, setting the maximum depth to follow links while discovering new content at 2, and specifying two initial URLs to crawl:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "overrides": {
    "max_crawl_depth": 2,
    "seed_urls": ["https://www.elastic.co/blog", "https://www.elastic.co/docs"]
  }
}'</pre>
</div>
<p>A <code class="literal">POST</code> request to start a partial crawl for an engine, passing a <code class="literal">domain_allowlist</code> array:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "overrides": {
    "domain_allowlist": ["http://www.elastic.co", "https://www.example.com"]
  }
}'</pre>
</div>
<p>A <code class="literal">POST</code> request to start a partial crawl for an engine, setting the maximum depth to follow links while discovering new content at 2, and passing an array of sitemap URLs to be used for content discovery:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "overrides": {
    "max_crawl_depth": 2,
    "sitemap_urls": ["http://www.elastic.co/sitemap.xml", "https://www.example.com/sitemap.xml"]
  }
}"</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id":"6275340b23bd23196eb41a29",
  "type":"partial",
  "status":"pending",
  "created_at":"2022-05-06T11:18:34Z",
  "begun_at":null,
  "completed_at":null
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-crawl-requests-id"></a>View details for a crawl request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Returns details of a given crawl request.
The crawl request is identified with a unique Crawl Request ID value.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_requests/&lt;crawl_request_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_6"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return the details of a given crawl request,  identified by its Crawl Request ID value.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_requests/{CRAWL_REQUEST_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "60147e93beae67bf7ef72e86",
  "status": "success",
  "created_at": "Fri, 29 Jan 2021 21:30:59 +0000",
  "begun_at": "Fri, 29 Jan 2021 21:31:00 +0000",
  "completed_at": "Fri, 29 Jan 2021 21:35:20 +0000"
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-crawl-schedules"></a>Crawl schedules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>Each engine using the Enterprise Search web crawler has an associated <span class="strong strong"><strong>crawl schedule</strong></span> object.
The crawl schedule API allows operators to specify a frequency at which new crawls will be started.
If there is an active crawl, new crawls will be skipped.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-crawl-schedule"></a>Get current crawl schedule<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Returns a crawl schedule object or returns an HTTP 404 response if there is no crawl schedule object for an engine:</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_schedule</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_7"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return the crawl schedule for a given crawl request.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_schedule" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "engine": {ENGINE_NAME},
  "frequency": 2,
  "unit": "week"
}</pre>
</div>
<p>For cases when there is no crawl schedule for a given engine, the API responds with a 404 error:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 404 Not Found
{
  "errors": ["No crawl schedule found"]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-put-crawler-crawl-schedule"></a>Create or update a crawl schedule<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Upserts a crawl schedule for an engine:</p>
<p><code class="literal">PUT &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_schedule</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">frequency</code> (required)
</span>
</dt>
<dd>
A positive integer.
</dd>
<dt>
<span class="term">
<code class="literal">unit</code> (required)
</span>
</dt>
<dd>
Should be one of: <code class="literal">hour</code>, <code class="literal">day</code>, <code class="literal">week</code>, <code class="literal">month</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_8"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">PUT</code> request to create or update a crawl schedule for an engine, setting the frequency to 2 and the unit to <code class="literal">week</code>.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "PUT" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_schedule" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "frequency": 2,
  "unit": "week"
}'</pre>
</div>
<p>A successful response contains the crawl schedule object:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "engine": {ENGINE_NAME},
  "frequency": 2,
  "unit": "week"
}</pre>
</div>
<p>When the parameters are invalid, the API returns an HTTP 400 response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 400 Bad Request
{
  "errors": [
    "Crawl schedule frequency must be an integer",
    "Crawl schedule unit must be one of hour, day, week, month"
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-delete-crawler-crawl-schedule"></a>Delete a crawl schedule<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Deletes a crawl schedule for an engine:</p>
<p><code class="literal">DELETE &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/crawl_schedule</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_9"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">DELETE</code> request to delete a crawl schedule for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "DELETE" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/crawl_schedule" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response contains an object showing the crawl schedule has been deleted:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "deleted": true
}</pre>
</div>
<p>For cases when there is no crawl schedule for a given engine, the API responds with a 404 error:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 404 Not Found
{
  "errors": ["No crawl schedule found"]
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-process-crawls"></a>Process crawls<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>A <em>process crawl</em> is an operation that re-processes the documents in your engine using the current <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule" title="Crawl rule">crawl rules</a>, without waiting for a full re-crawl.
See <a class="xref" href="web-crawler-reference.html#web-crawler-reference-process-crawl" title="Process crawl">Process crawl</a>.</p>
<p>Use the following operations to manage process crawls for a given engine.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-process-crawls"></a>List process crawls<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Returns a list of <a class="xref" href="web-crawler-reference.html#web-crawler-reference-process-crawl" title="Process crawl">process crawls</a> for the given engine.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/process_crawls</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">page[current]</code> (optional)
</span>
</dt>
<dd>
Current page number (default: 1).
</dd>
<dt>
<span class="term">
<code class="literal">page[size]</code> (optional)
</span>
</dt>
<dd>
Page size (default: 25). The maximum is 100, and be will truncated if a larger size is requested.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_10"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return the process crawls for a given engine, specifying the page size at 25.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/process_crawls" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data ' {
  "page[size]": 25,
}'</pre>
</div>
<p>A successful request returns a list of process crawls for the given engine:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 3,
      "size": 25
    }
  },
  "results": [
    {
      "id": "61421fe6e725695876d72d2e",
      "dry_run": true,
      "total_url_count": 167,
      "denied_url_count": 92,
      "domains": [
        "https://swiftype.com"
      ],
      "process_all_domains": false,
      "created_at": "2021-09-15T16:31:34Z",
      "begun_at": "2021-09-15T16:31:35Z",
      "completed_at": "2021-09-15T16:31:52Z"
    },
    {
      "id": "61421e15e72569a22ad6f549",
      "dry_run": false,
      "total_url_count": 7793,
      "denied_url_count": 1028,
      "domains": [
        "https://swiftype.com",
        "https://www.elastic.co"
      ],
      "process_all_domains": true,
      "created_at": "2021-09-15T16:23:49Z",
      "begun_at": "2021-09-15T16:23:49Z",
      "completed_at": "2021-09-15T16:25:48Z"
    },
    {
      "id": "61421b93e725694296d664f0",
      "dry_run": false,
      "total_url_count": 8525,
      "denied_url_count": 930,
      "domains": [
        "https://www.elastic.co"
      ],
      "process_all_domains": true,
      "created_at": "2021-09-15T16:13:07Z",
      "begun_at": "2021-09-15T16:13:07Z",
      "completed_at": "2021-09-15T16:15:29Z"
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-process-crawls-id"></a>View details for a process crawl<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>View the details of the <a class="xref" href="web-crawler-reference.html#web-crawler-reference-process-crawl" title="Process crawl">process crawl</a> with the given ID.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/process_crawls/&lt;process_crawl_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_11"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to view a process crawl for a given engine, identified by the process crawl ID.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/process_crawls/{PROCESS_CRAWL_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response includes summary information of the process crawl, identifying the total number of URLs that were re-processed along with the number of URLs identified for deletion. For example:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "61421fe6e725695876d72d2e",
  "dry_run": true,
  "total_url_count": 167,
  "denied_url_count": 92,
  "domains": [
    "https://swiftype.com"
  ],
  "process_all_domains": false,
  "created_at": "2021-09-15T16:31:34Z",
  "begun_at": "2021-09-15T16:31:35Z",
  "completed_at": "2021-09-15T16:31:52Z"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-process-crawls-id-denied-urls"></a>View denied URLs for a process crawl<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>View a sample of 100 URLs identified for deletion by a given process crawl. This API complements the <code class="literal">dry run</code> capability of a process crawl to test configuration before committing to deletion.
See <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-process-crawls" title="Create a new process crawl">Create a new process crawl</a>.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/process_crawls/&lt;process_crawl_id&gt;/denied_urls</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_12"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to view a sample of denied URLs for a given process crawl.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/process_crawls/{PROCESS_CRAWL_ID}/denied_urls" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "total_url_count": 167,
  "denied_url_count": 92,
  "sample_size": 100,
  "denied_urls_sample": [
    "https://swiftype.com/documentation",
    "https://swiftype.com/documentation/site-search/site_search",
    "https://swiftype.com/documentation/site-search/guides/crawler-optimization",
    "https://swiftype.com/documentation/site-search/guides/multiple-domains",
    "https://swiftype.com/documentation/site-search/guides/engine-cloning",
    ...
  ]
}</pre>
</div>
<p>The denied URLs API reads from event logs generated during the process crawl. If the logs for a given process crawl have been deleted or are otherwise unavailable, an empty array is returned.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "total_url_count": 167,
  "denied_url_count": 92,
  "sample_size": 100,
  "denied_urls_sample": []
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-crawler-process-crawls"></a>Create a new process crawl<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Request a new <a class="xref" href="web-crawler-reference.html#web-crawler-reference-process-crawl" title="Process crawl">process crawl</a> for the given engine.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/process_crawls</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">dry_run</code> (optional)
</span>
</dt>
<dd>
If <code class="literal">true</code>, the process crawl identifies but does not delete documents that are no longer permitted by the current crawl configuration. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">domains</code> (optional)
</span>
</dt>
<dd>
Limits the process crawl to a subset of <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">crawler domains</a>. By default, the process crawl will apply to all crawler domains on the engine.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_13"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to create a new process crawl for the given engine,with the <code class="literal">dry_run</code> parameter set to <code class="literal">true</code>.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/process_crawls" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data ' {
  "dry_run": true
}'</pre>
</div>
<p>A successful response includes the ID of the new process crawl.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK

{
  "id": "61421b93e725694296d664f0",
  "dry_run": true,
  "total_url_count": 0,
  "denied_url_count": 0,
  "domains": [
    "https://www.elastic.co"
  ],
  "process_all_domains": true,
  "created_at": "2021-09-15T16:13:07Z",
  "begun_at": null,
  "completed_at": null
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-troubleshooting"></a>URL validation and debugging<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>The web crawler provides several API operations to help you <a class="xref" href="crawl-web-content.html#crawl-web-content-troubleshoot-crawl" title="Troubleshoot crawl">troubleshoot crawls</a>.
Use the following operations to validate and debug specific URLs from the perspective of the web crawler.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-domain" title="Validate a domain">Validate a domain</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-url" title="Validate a URL">Validate a URL</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-extract-url" title="Extract content from a URL">Extract content from a URL</a>
</li>
<li class="listitem">
<a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-trace-url" title="Trace a URL">Trace a URL</a>
</li>
</ul>
</div>
<h5><a id="web-crawler-apis-post-crawler-validate-domain"></a>Validate a domain<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h5>
<p>Validate the given domain from the perspective of the web crawler.</p>
<p>Optionally, use the <code class="literal">checks</code> parameter to choose the specific validations to perform.
The response includes an ordered set of results.
Each provides the detailed results of a specific check.
If any checks fail, the crawler skips remaining checks.</p>
<p>Use this operation to validate a domain before adding it to the crawl configuration for an engine, or troubleshoot issues crawling a specific domain.
This operation visits the domain as the web crawler, without starting a full crawl.
The results reflect how the web crawler sees that domain <span class="strong strong"><strong>now</strong></span>.
It does not represent the states of previous crawls.
For historical information, see <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-trace-url" title="Trace a URL">Trace a URL</a>.</p>
<p>You can use this operation to identify issues with a domain.
The domain owner can fix the issues, and you can verfiy the fixes.
Repeat this process until all checks pass.
This process is more convenient than requesting a new crawl to confirm the fixes.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/crawler/validate_url</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code> (required)
</span>
</dt>
<dd>
The URL of the domain to validate.
</dd>
<dt>
<span class="term">
<code class="literal">checks</code> (optional)
</span>
</dt>
<dd>
<p>
Checks to perform. Array including any of the following supported values.
To run additional checks, validate a specific page within the context of an engine.
See <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-url" title="Validate a URL">Validate a URL</a>.
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">dns</code>
</li>
<li class="listitem">
<code class="literal">robots_txt</code>
</li>
<li class="listitem">
<code class="literal">tcp</code>
</li>
<li class="listitem">
<code class="literal">url</code>
</li>
<li class="listitem">
<code class="literal">url_content</code>
</li>
<li class="listitem">
<code class="literal">url_request</code>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_14"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to validate a domain, passing the parameters <code class="literal">url: https://www.elastic.co</code> and <code class="literal">checks: ["url", "tcp", "url_request"]</code>:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/validate_url" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data ' {
  "url": "https://www.elastic.co",
  "checks": ["url", "tcp", "url_request"]
}'</pre>
</div>
<p>A successful response includes the results of the checks:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "url": "https://www.elastic.co",
  "normalized_url": "https://www.elastic.co/",
  "valid": true,
  "results": [
    {
      "result": "ok",
      "name": "url",
      "details": {},
      "comment": "URL structure looks valid"
    },
    {
      "result": "ok",
      "name": "tcp",
      "details": {
        "host": "www.elastic.co",
        "port": 443
      },
      "comment": "TCP connection successful"
    },
    {
      "result": "ok",
      "name": "url_request",
      "details": {
        "status_code": 200,
        "content_type": "text/html; charset=utf-8",
        "request_time_msec": 166
      },
      "comment": "Successfully fetched https://www.elastic.co: HTTP 200."
    }
  ]
}</pre>
</div>
<h5><a id="web-crawler-apis-post-crawler-validate-url"></a>Validate a URL<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h5>
<p>Validate the given URL from the perspective of the web crawler.
The given URL is assumed to be a web page or other web content.
To validate a domain, see <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-domain" title="Validate a domain">Validate a domain</a>.</p>
<p>Optionally, use the <code class="literal">checks</code> parameter to choose the specific validations to perform.
The response includes an ordered set of results.
Each provides the detailed results of a specific check.
If any checks fail, the crawler skips remaining checks.</p>
<p>Use this operation to troubleshoot issues crawling web content at a specific URL.
This operation visits the URL as the web crawler, without starting a full crawl.
The results reflect how the web crawler sees that URL <span class="strong strong"><strong>now</strong></span>.
It does not represent the states of previous crawls.
For historical information, see <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-trace-url" title="Trace a URL">Trace a URL</a>.</p>
<p>You can use this operation to identify issues with a specific URL.
The domain owner can fix the issues, and you can verfiy the fixes.
Repeat this process until all checks pass.
After fixing all issues, start a new crawl to discover and extract the content at the URL.
See <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-crawl-requests" title="Create a new crawl request">Create a new crawl request</a>.</p>
<p>To troubleshoot content extraction issues at a specific URL, see <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-extract-url" title="Extract content from a URL">Extract content from a URL</a>.
The <code class="literal">url_content</code> check for this operation confirms that content was extracted, but it does not include the content within the response.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/validate_url</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code> (required)
</span>
</dt>
<dd>
The URL to validate.
</dd>
<dt>
<span class="term">
<code class="literal">checks</code> (optional)
</span>
</dt>
<dd>
<p>
Checks to perform. Array including any of the following supported values.
This operation offers more checks than the operation to <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-domain" title="Validate a domain">validate a domain</a>, since this operation runs in the context of a specific engine.
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">crawl_rules</code>
</li>
<li class="listitem">
<code class="literal">domain_access</code>
</li>
<li class="listitem">
<code class="literal">dns</code>
</li>
<li class="listitem">
<code class="literal">robots_txt</code>
</li>
<li class="listitem">
<code class="literal">tcp</code>
</li>
<li class="listitem">
<code class="literal">url</code>
</li>
<li class="listitem">
<code class="literal">url_content</code>
</li>
<li class="listitem">
<code class="literal">url_request</code>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_15"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to validate a url, passing a <code class="literal">url</code> and <code class="literal">checks: ["url", "domain_access", "crawl_rules"]</code>:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/validate_url" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data ' {
  "url": "https://www.elastic.co",
  "checks": ["url", "domain_access", "crawl_rules"]
}'</pre>
</div>
<p>A successful response includes the results of the checks:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "url": "https://www.elastic.co",
  "normalized_url": "https://www.elastic.co/",
  "valid": true,
  "results": [
    {
      "result": "ok",
      "name": "url",
      "details": {},
      "comment": "URL structure looks valid"
    },
    {
      "result": "ok",
      "name": "domain_access",
      "details": {
        "domain": "https://www.elastic.co"
      },
      "comment": "The URL matches one of the domains configured for the engine"
    },
    {
      "result": "ok",
      "name": "crawl_rules",
      "details": {
        "rule": "domain=https://www.elastic.co, default allow all rule"
      },
      "comment": "The URL is allowed by one of the crawl rules"
    }
  ]
}</pre>
</div>
<h5><a id="web-crawler-apis-post-crawler-extract-url"></a>Extract content from a URL<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h5>
<p>Use the web crawler to extract content from the given URL.</p>
<p>Use this operation to troubleshoot issues with content extraction at a specific URL.
For general URL validation, see <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-validate-url" title="Validate a URL">Validate a URL</a>.</p>
<p>This operation visits the URL as the web crawler, without starting a full crawl, and extracts content.
The results reflect the current crawl configuration for the engine, and reveal how the web crawler sees the content at that URL <span class="strong strong"><strong>right now</strong></span>.
However, if the content is already indexed, the response includes that information as well.</p>
<p>This operation does not make changes to any documents in the engine.
Use this operation to identify and fix context extraction issues at a specific URL.
The content owner can fix the issues, and you can verfiy the fixes.
Repeat this process until the desired content is extracted.
After fixing all issues, start a new crawl to discover and extract the content at the URL.
See <a class="xref" href="web-crawler-api-reference.html#web-crawler-apis-post-crawler-crawl-requests" title="Create a new crawl request">Create a new crawl request</a>.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/extract_url</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code> (required)
</span>
</dt>
<dd>
The URL to crawl to extract content.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_16"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to use the web crawler to extract content from a url:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/extract_url" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data ' { "url": "https://www.elastic.co"}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "url": "https://www.example.com",
  "normalized_url": "https://www.example.com/",
  "results": {
    "download": {
      "status_code": 200
    },
    "extraction": {
      "content_hash": "fb38982491c4a9377f8cf0c57e75e067bca65daf",
      "content_hash_fields": [
        "title",
        "body_content",
        "meta_keywords",
        "meta_description",
        "links",
        "headings"
      ],
      "content_fields": {
        "title": "Example Domain",
        "body_content": "Example Domain This domain is for use in illustrative examples in documents. You may use this domain in literature without prior coordination or asking for permission. More information...",
        "links": [
          "https://www.iana.org/domains/example"
        ],
        "headings": [
          "Example Domain"
        ]
      }
    },
    "indexing": {
      "document_id": null,
      "document_fields": null
    },
    "deduplication": {
      "urls_count": 0,
      "urls_sample": []
    }
  }
}</pre>
</div>
<p>Details for selected response fields:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">results.deduplication</code>
</span>
</dt>
<dd>
The total count of URLs with this same content and a sample of those URLs.
See <a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-deduplication" title="Duplicate document handling">Duplicate document handling</a>.
</dd>
<dt>
<span class="term">
<code class="literal">results.extraction.content_fields</code>
</span>
</dt>
<dd>
The content fields extracted by the crawler&#8212;&#8203;what the crawler will extract for the <span class="strong strong"><strong>next</strong></span> crawl.
</dd>
<dt>
<span class="term">
<code class="literal">results.extraction.content_hash</code>
</span>
</dt>
<dd>
The hash used to uniquely identify this content.
See <a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-deduplication" title="Duplicate document handling">Duplicate document handling</a>.
</dd>
<dt>
<span class="term">
<code class="literal">results.extraction.content_hash_fields</code>
</span>
</dt>
<dd>
The document schema fields used to create the content hash.
See <a class="xref" href="web-crawler-reference.html#web-crawler-reference-content-deduplication" title="Duplicate document handling">Duplicate document handling</a>.
</dd>
<dt>
<span class="term">
<code class="literal">results.indexing</code>
</span>
</dt>
<dd>
The fields that are currently indexed&#8212;&#8203;what the crawler extracted during a <span class="strong strong"><strong>previous</strong></span> crawl (if any).
</dd>
</dl>
</div>
<h5><a id="web-crawler-apis-post-crawler-trace-url"></a>Trace a URL<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h5>
<p>Trace the recent history of the given URL from the perspective of the web crawler.
Determine if the web crawler saw the URL, how it discovered it, and other events specific to that URL.
Use the response to see the history of a specific URL from the perspective of the web crawler, and debug any issues crawling the URL.</p>
<p>This operation provides a view of the <a class="xref" href="web-crawler-reference.html#web-crawler-reference-web-crawler-events-logs" title="Web crawler events logs">web crawler events logs</a> for a specific engine and URL.
The response returns an array of recent crawl requests, where each indicates if the URL was found.
This is followed by specific crawler events, grouped by type.
For details on each crawler event, see <a class="xref" href="web-crawler-events-logs-reference.html" title="Web crawler events logs reference">Web crawler events logs reference</a>.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/trace_url</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code> (required)
</span>
</dt>
<dd>
The URL to trace.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_17"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to use the web crawler to trace a url:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/trace_url" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data ' { "url": "https://www.elastic.co/blog"}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "url": "https://www.elastic.co/blog",
  "normalized_url": "https://www.elastic.co/blog",
  "crawl_requests": [
    {
      "crawl_request": {
        "id": "61240b9d2a02b14c1df12f98",
        "status": "running",
        "created_at": "2021-08-23T20:57:01Z",
        "begun_at": "2021-08-23T20:57:02Z",
        "completed_at": null
      },
      "found": true,
      "discover": [
        {
          "timestamp": "Mon, 23 Aug 2021 20:57:02 +0000",
          "event_id": "61240b9e2a02b11895f12f9e",
          "message": null,
          "event_type": "allowed",
          "deny_reason": null,
          "crawl_depth": 1,
          "source_url": null
        }
      ],
      "seed": {
        "timestamp": "Mon, 23 Aug 2021 20:57:02 +0000",
        "event_id": "61240b9e2a02b11895f12f9f",
        "message": null,
        "url_type": "content",
        "source_type": "seed-list",
        "source_url": null
      },
      "fetch": {
        "timestamp": "Mon, 23 Aug 2021 20:57:03 +0000",
        "event_id": "61240b9f2a02b1f7caf12fab",
        "message": null,
        "event_outcome": "failure",
        "duration_msec": 152.537107,
        "http_response": {
          "status_code": "301",
          "body_bytes": null
        },
        "redirect": {
          "location": "https://www.elastic.co/blog/",
          "chain": [],
          "count": 1
        }
      },
      "output": {
        "timestamp": "Mon, 23 Aug 2021 20:57:03 +0000",
        "event_id": "61240b9f2a02b1f7caf12fae",
        "message": "Successfully processed the 301 response",
        "event_outcome": "success",
        "event_module": "app_search",
        "duration_msec": 36.45282,
        "engine": {
          "id": "61240b592a02b19de7f12f8e",
          "name": "elastic-blog"
        },
        "document": {
          "id": null
        }
      }
    }
  ]
}</pre>
</div>
<p>If the given URL was not seen during the recent crawls, the response will look like this:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "url": "https://github.com",
  "normalized_url": "https://github.com/",
  "crawl_requests": [
    {
      "crawl_request": {
        "id": "61240b9d2a02b14c1df12f98",
        "status": "canceled",
        "created_at": "2021-08-23T20:57:01Z",
        "begun_at": "2021-08-23T20:57:02Z",
        "completed_at": "2021-08-23T21:04:39Z"
      },
      "found": false,
      "discover": [],
      "seed": null,
      "fetch": null,
      "output": null
    }
  ]
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-user-agent"></a>User agent<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<p>Responds with the User-Agent header used by the crawler. This API method requires an App Search Admin API Key for authentication.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/crawler/user_agent</code></p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_18"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return the User-Agent header used by the crawler:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/crawler/user_agent" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response will look like this:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "user_agent": "Elastic Crawler (0.0.1)"
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-domains"></a>Domains<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-domains"></a>List domains<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Returns a list of <a class="xref" href="web-crawler-reference.html#web-crawler-reference-domain" title="Domain">domains</a> for the given engine.</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">page[current]</code> (optional)
</span>
</dt>
<dd>
Current page number (default: 1).
</dd>
<dt>
<span class="term">
<code class="literal">page[size]</code> (optional)
</span>
</dt>
<dd>
Page size (default: 25). The maximum is 100, and be will truncated if a larger size is requested.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_19"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to return the domains for the given engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response will look like this:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 2,
      "size": 25
    }
  },
  "results": [
    {
      "id": "61a8eb863932dd78141fb0df",
      "name": "https://www.elastic.co",
      "document_count": 0,
      "entry_points": [
        {
          "id": "61a8a1ed3932ddd80cc4b719",
          "value": "/"
        }
      ],
      "crawl_rules": [],
      "default_crawl_rule": {
        "id": "-",
        "order": 0,
        "policy": "allow",
        "rule": "regex",
        "pattern": ".*"
      },
      "sitemaps": []
    },
    {
      "id": "61a8a1ed3932ddd80cc4b718",
      "name": "https://swiftype.com",
      "document_count": 0,
      "entry_points": [
        {
          "id": "61a8eb863932dd78141fb0e0",
          "value": "/"
        }
      ],
      "crawl_rules": [],
      "default_crawl_rule": {
        "id": "-",
        "order": 0,
        "policy": "allow",
        "rule": "regex",
        "pattern": ".*"
      },
      "sitemaps": []
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-crawler-domains"></a>Create a new domain<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Create a (crawler) domain for an engine:</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">name</code> (required)
</span>
</dt>
<dd>
The domain URL.
</dd>
<dt>
<span class="term">
<code class="literal">auth</code> (optional)
</span>
</dt>
<dd>
<p>
The information required to crawl a domain protected by <a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-authentication" title="HTTP authentication">HTTP authentication</a>.
</p>
<p>For <code class="literal">Basic</code> auth, set <code class="literal">type</code> to <code class="literal">basic</code>, and provide the <code class="literal">username</code> and <code class="literal">password</code>:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "auth": {
    "type": "basic",
    "username": "kimchy",
    "password": ":)"
  }
}</pre>
</div>
<p>Alternatively, set the value of the <code class="literal">Authorization</code> header directly.
Set <code class="literal">type</code> to <code class="literal">raw</code>, and provide the <code class="literal">value</code>:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "auth": {
    "type": "raw",
    "header": "Bearer some-token"
  }
}</pre>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_20"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to create a new crawler domain for a given engine, using <code class="literal">Basic</code> auth, providing a username and password:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "name": "https://www.elastic.co",
  "auth": {
    "type": "basic",
    "username": "username",
    "password": "password"
  }
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 1,
      "size": 25
    }
  },
  "results": [
    {
      "id": "rjjk535wfjp14kbwlhzpf22d",
      "name": "https://www.elastic.co",
      "document_count": 86745,
      "deduplication_enabled": true,
      "deduplication_fields": [
        "title",
        "body_content",
        "meta_keywords",
        "meta_description",
        "links",
        "headings"
      ],
      "available_deduplication_fields": [
        "body_content",
        "headings",
        "id",
        "links",
        "meta_description",
        "meta_keywords",
        "title"
      ],
      "auth": {
        "type": "basic"
      },
      "created_at": "2022-04-29T09:49:59Z",
      "last_visited_at": "2022-05-05T11:10:09Z",
      "entry_points": [
        {
          "id": "626bb4fe23bd29136e54f2e3",
          "value": "/guide/en/enterprise-search/current/",
          "created_at": "2022-04-29T09:50:54Z"
        }
      ],
      "crawl_rules": [],
      "default_crawl_rule": {
        "id": "-",
        "order": 0,
        "policy": "allow",
        "rule": "regex",
        "pattern": ".*",
        "created_at": "2022-05-05T12:32:40Z"
      },
      "sitemaps": []
    }
  ]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-get-crawler-domain"></a>View details for a domain<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Get domain object for an engine:</p>
<p><code class="literal">GET &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_21"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">GET</code> request to view the domain object for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "GET" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{DOMAIN_ID}",
  "name": "{DOMAIN_NAME}",
  "document_count": 0,
  "entry_points": [
    {
      "id": "6087cec06dda9bdfb4a49e39",
      "value": "/"
    }
  ],
  "crawl_rules": [],
  "default_crawl_rule": {
    "id": "-",
    "order": 0,
    "policy": "allow",
    "rule": "regex",
    "pattern": ".*"
  },
  "sitemaps": []
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-put-crawler-domain"></a>Update a domain<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Updates a domain for an engine:</p>
<p><code class="literal">PUT &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
The domain URL.
</dd>
<dt>
<span class="term">
<code class="literal">auth</code> (optional)
</span>
</dt>
<dd>
<p>
The information required to crawl a domain protected by <a class="xref" href="web-crawler-reference.html#web-crawler-reference-http-authentication" title="HTTP authentication">HTTP authentication</a>.
</p>
<p>For <code class="literal">Basic</code> auth, set <code class="literal">type</code> to <code class="literal">basic</code>, and provide the <code class="literal">username</code> and <code class="literal">password</code>:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "auth": {
    "type": "basic",
    "username": "kimchy",
    "password": ":)"
  }
}</pre>
</div>
<p>Alternatively, set the value of the <code class="literal">Authorization</code> header directly.
Set <code class="literal">type</code> to <code class="literal">raw</code>, and provide the <code class="literal">value</code>:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "auth": {
    "type": "raw",
    "value": "Bearer some-token"
  }
}</pre>
</div>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_22"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">PUT</code> request to update a domain for an engine, using <code class="literal">Basic</code> auth, providing a username and password:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "PUT" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "name": "https://www.elastic.co",
  "auth": "{
    "type": "basic",
    "username": "username",
    "password": "password"
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{DOMAIN_ID}",
  "name": "{DOMAIN_NAME}",
  "document_count": 0,
  "entry_points": [
    {
      "id": "6087cec06dda9bdfb4a49e39",
      "value": "/"
    }
  ],
  "crawl_rules": [],
  "default_crawl_rule": {
    "id": "-",
    "order": 0,
    "policy": "allow",
    "rule": "regex",
    "pattern": ".*"
  },
  "sitemaps": []
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-delete-crawler-domain"></a>Delete a domain<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Deletes a domain for an engine:</p>
<p><code class="literal">DELETE &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_23"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">DELETE</code> request to delete a domain for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "DELETE" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \</pre>
</div>
<p>A successful response contains an object showing the domain has been deleted:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "deleted": true
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-entry-points"></a>Entry points<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-entry-points"></a>Create a new entry point<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Create an entry point for a domain.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/entry_points</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">value</code> (required)
</span>
</dt>
<dd>
The entry point path.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_24"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to create an entry point for a domain for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/entry_points" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "name": "https://www.elastic.co/blog"
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{ENTRY_POINT_ID}",
  "value": "/blog"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-put-entry-point"></a>Update an entry point<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Updates an entry point for a domain.</p>
<p><code class="literal">PUT &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/entry_points/&lt;entry_point_id&gt;</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">value</code>
</span>
</dt>
<dd>
The entry point path.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_25"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">PUT</code> request to update an entry point for a domain for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "PUT" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/entry_points/{ENTRY_POINT_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "value": "https://www.elastic.co/docs"
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{ENTRY_POINT_ID}",
  "value": "/docs"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-delete-entry-point"></a>Delete an entry point<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Deletes an entry point for a domain.</p>
<p><code class="literal">DELETE &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/entry_points/&lt;entry_point_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_26"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">DELETE</code> request to delete an entry point for a domain for an engine:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "DELETE" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/entry_points/{ENTRY_POINT_ID}"\
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \</pre>
</div>
<p>A successful response contains an object showing the entry point has been deleted:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "deleted": true
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-crawl-rules"></a>Crawl rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-crawl-rules"></a>Create a new crawl rule<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Create a crawl rule for a domain.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/crawl_rules</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">policy</code> (required)
</span>
</dt>
<dd>
Accepted values are <code class="literal">allow</code> and <code class="literal">deny</code>.
</dd>
<dt>
<span class="term">
<code class="literal">rule</code> (required)
</span>
</dt>
<dd>
Accepted values are <code class="literal">begins</code>, <code class="literal">ends</code>, <code class="literal">contains</code> and <code class="literal">regex</code>.
</dd>
<dt>
<span class="term">
<code class="literal">pattern</code> (required)
</span>
</dt>
<dd>
The path pattern to match against.
</dd>
<dt>
<span class="term">
<code class="literal">order</code> (optional)
</span>
</dt>
<dd>
An integer representing this crawl rule"s position within the list of crawl rules for the domain. The <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule-order" title="Crawl rule order">order of crawl rules</a> is significant.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_27"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to create a crawl rule for a domain:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/crawl_rules" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "policy": allow,
  "rule": ends,
  "pattern": "/ignore",
  "order": 0
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{CRAWL_RULE_ID}",
  "order": 0,
  "policy": "allow",
  "rule": "begins",
  "pattern": "/ignore"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-put-crawl-rule"></a>Update a crawl rule<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Updates a crawl rule for a domain.</p>
<p><code class="literal">PUT &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/crawl_rules/&lt;crawl_rule_id&gt;</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">policy</code>
</span>
</dt>
<dd>
Accepted values are <code class="literal">allow</code> and <code class="literal">deny</code>.
</dd>
<dt>
<span class="term">
<code class="literal">rule</code>
</span>
</dt>
<dd>
Accepted values are <code class="literal">begins</code>, <code class="literal">ends</code>, <code class="literal">contains</code> and <code class="literal">regex</code>.
</dd>
<dt>
<span class="term">
<code class="literal">pattern</code>
</span>
</dt>
<dd>
The path pattern to match against.
</dd>
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
An integer representing this crawl rule"s position within the list of crawl rules for the domain. The <a class="xref" href="web-crawler-reference.html#web-crawler-reference-crawl-rule-order" title="Crawl rule order">order of crawl rules</a> is significant.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_28"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">PUT</code> request to update a crawl rule for a domain:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/crawl_rules/{CRAWL_RULE_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "policy": deny,
  "rule": ends,
  "pattern": "/ignore",
  "order": 0
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{CRAWL_RULE_ID}",
  "order": 0,
  "policy": "deny",
  "rule": "begins",
  "pattern": "/ignore"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-delete-crawl-rule"></a>Delete a crawl rule<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Deletes a crawl rule for a domain.</p>
<p><code class="literal">DELETE &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/crawl_rules/&lt;crawl_rule_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_29"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">DELETE</code> request to delete a crawl rule for a domain:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "DELETE" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/crawl_rules/{CRAWL_RULE_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}"</pre>
</div>
<p>A successful response contains an object showing the crawl rule has been deleted:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "deleted": true
}</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="web-crawler-apis-sitemaps"></a>Sitemaps<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-post-sitemaps"></a>Create a new sitemap<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Create a sitemap for a domain.</p>
<p><code class="literal">POST &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/sitemaps</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code> (required)
</span>
</dt>
<dd>
The sitemap URL.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_30"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">POST</code> request to create a sitemap for a domain:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "POST" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/sitemaps" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "url": "https://www.elastic.co/sitemap2.xml"
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{SITEMAP_ID}",
  "url": "https://elastic.co/sitemap2.xml"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-put-sitemap"></a>Update a sitemap<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Updates a sitemap for a domain.</p>
<p><code class="literal">PUT &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/sitemaps/&lt;sitemap_id&gt;</code></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">url</code>
</span>
</dt>
<dd>
The sitemap URL.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_31"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">PUT</code> request to update a sitemap for a domain:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "PUT" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/sitemaps/{SITEMAP_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "url": "https://www.elastic.co/sitemap3.xml"
}'</pre>
</div>
<p>A successful response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "{SITEMAP_ID}",
  "url": "https://elastic.co/sitemap3.xml"
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="web-crawler-apis-delete-sitemap"></a>Delete a sitemap<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>Deletes a sitemap for a domain.</p>
<p><code class="literal">DELETE &lt;enterprise_search_base_url&gt;/api/as/v1/engines/&lt;engine_name&gt;/crawler/domains/&lt;domain_id&gt;/sitemaps/&lt;sitemap_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_examples_32"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/app-search-docs/api-reference/web-crawler-api-reference.asciidoc">edit</a></h4>
</div></div></div>
<p>A <code class="literal">DELETE</code> request to delete a sitemap for a domain:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl \
--request "DELETE" \
--url "${ENTERPRISE_SEARCH_BASE_URL}/api/as/v1/engines/${ENGINE_NAME}/crawler/domains/{DOMAIN_ID}/sitemaps/{SITEMAP_ID}" \
--header "Content-Type: application/json" \
--header "Authorization: Bearer ${TOKEN}" \
--data '{
  "url": "https://www.elastic.co/sitemap3.xml"
}'</pre>
</div>
<p>A successful response contains an object showing the sitemap has been deleted:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "deleted": true
}</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="synonyms.html">« Synonyms API</a>
</span>
<span class="next">
<a href="api-clients.html">API Clients »</a>
</span>
</div>
</div>
</body>
</html>
