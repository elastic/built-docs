<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Running Auditbeat on Kubernetes
        | Auditbeat Reference [7.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Auditbeat Reference [7.x]" /><link rel="up" href="setting-up-and-running.html" title="Setting up and running Auditbeat" /><link rel="prev" href="running-on-docker.html" title="Running Auditbeat on Docker" /><link rel="next" href="running-with-systemd.html" title="Auditbeat and systemd" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Auditbeat/Reference/7.x" /><meta xmlns="" name="DC.subject" content="Auditbeat" /><meta xmlns="" name="DC.identifier" content="7.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Auditbeat Reference
      [7.x]
    </a></span> » <span class="breadcrumb-link"><a href="setting-up-and-running.html">Setting up and running Auditbeat</a></span> » <span class="breadcrumb-node">Running Auditbeat on Kubernetes</span></div><div xmlns="" class="navheader"><span class="prev"><a href="running-on-docker.html">
              « 
              Running Auditbeat on Docker</a>
           
        </span><span class="next">
           
          <a href="running-with-systemd.html">Auditbeat and systemd
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="running-on-kubernetes"></a>Running Auditbeat on Kubernetes<a xmlns="" href="https://github.com/elastic/beats/edit/7.x/auditbeat/docs/running-on-kubernetes.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Auditbeat <a class="link" href="running-on-docker.html" title="Running Auditbeat on Docker">Docker images</a> can be used on Kubernetes to
check files integrity.</p><p>However, version 7.5.0 of Auditbeat has not yet been
released, so no Docker image is currently available for this version.</p><h4><a id="_kubernetes_deploy_manifests"></a>Kubernetes deploy manifests<a xmlns="" href="https://github.com/elastic/beats/edit/7.x/auditbeat/docs/running-on-kubernetes.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>By deploying Auditbeat as a <a class="ulink" href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" target="_top">DaemonSet</a>
we ensure we get a running instance on each node of the cluster.</p><p>Everything is deployed under <code class="literal">kube-system</code> namespace, you can change that by
updating the YAML file.</p><p>To get the manifests just run:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -L -O https://raw.githubusercontent.com/elastic/beats/7.x/deploy/kubernetes/auditbeat-kubernetes.yaml</pre></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you are using Kubernetes 1.7 or earlier: Auditbeat uses a hostPath volume to persist internal data, it’s located
under /var/lib/auditbeat-data. The manifest uses folder autocreation (<code class="literal">DirectoryOrCreate</code>), which was introduced in
Kubernetes 1.8. You will need to remove <code class="literal">type: DirectoryOrCreate</code> from the manifest and create the host folder yourself.</p></div></div><h4><a id="_settings"></a>Settings<a xmlns="" href="https://github.com/elastic/beats/edit/7.x/auditbeat/docs/running-on-kubernetes.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Some parameters are exposed in the manifest to configure logs destination, by
default they will use an existing Elasticsearch deploy if it’s present, but you
may want to change that behavior, so just edit the YAML file and modify them:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">- name: ELASTICSEARCH_HOST
  value: elasticsearch
- name: ELASTICSEARCH_PORT
  value: "9200"
- name: ELASTICSEARCH_USERNAME
  value: elastic
- name: ELASTICSEARCH_PASSWORD
  value: changeme</pre></div><h4><a id="_deploy"></a>Deploy<a xmlns="" href="https://github.com/elastic/beats/edit/7.x/auditbeat/docs/running-on-kubernetes.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>To deploy Auditbeat to Kubernetes just run:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">kubectl create -f auditbeat-kubernetes.yaml</pre></div><p>Then you should be able to check the status by running:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">$ kubectl --namespace=kube-system get ds/auditbeat

NAME       DESIRED   CURRENT   READY     UP-TO-DATE   AVAILABLE   NODE-SELECTOR   AGE
auditbeat   32        32        0         32           0           &lt;none&gt;          1m</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="running-on-docker.html">
              « 
              Running Auditbeat on Docker</a>
           
        </span><span class="next">
           
          <a href="running-with-systemd.html">Auditbeat and systemd
               »
            </a></span></div></body></html>