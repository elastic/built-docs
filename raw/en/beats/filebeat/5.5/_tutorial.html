<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Tutorial
        | Filebeat Reference [5.5]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filebeat Reference [5.5]" /><link rel="up" href="filebeat-modules-overview.html" title="Modules overview" /><link rel="prev" href="filebeat-modules-overview.html" title="Modules overview" /><link rel="next" href="filebeat-module-apache2.html" title="Apache2 module" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Filebeat/Reference/5.5" /><meta xmlns="" name="DC.subject" content="Filebeat" /><meta xmlns="" name="DC.identifier" content="5.5" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Filebeat Reference
      [5.5]
    </a></span> » <span class="breadcrumb-link"><a href="filebeat-modules.html">Modules</a></span> » <span class="breadcrumb-link"><a href="filebeat-modules-overview.html">Modules overview</a></span> » <span class="breadcrumb-node">Tutorial</span></div><div xmlns="" class="navheader"><span class="prev"><a href="filebeat-modules-overview.html">
              « 
              Modules overview</a>
           
        </span><span class="next">
           
          <a href="filebeat-module-apache2.html">Apache2 module
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_tutorial"></a>Tutorial<a xmlns="" href="https://github.com/elastic/beats/edit/5.5/filebeat/docs/modules-overview.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>This tutorial assumes you have Elasticsearch and Kibana installed and
accessible from Filebeat (see the <a class="link" href="filebeat-getting-started.html" title="Getting Started With Filebeat">getting started</a>
section). It also assumes that the Ingest Node GeoIP and User Agent plugins are
installed. These plugins are required to capture the geographical location and
browser information used by some of the visualizations available in the sample
dashboards. You can install these plugins by running the following commands in the Elasticsearch home path:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">sudo bin/elasticsearch-plugin install ingest-geoip
sudo bin/elasticsearch-plugin install ingest-user-agent</pre></div><p>You need to restart Elasticsearch after running these commands.</p><p>If you are using an <a class="ulink" href="https://cloud.elastic.co/" target="_top">Elastic Cloud</a> instance, you can
enable the two plugins from the configuration page.</p><p>This also assumes you have Nginx installed and writing logs in the default
location and format. If you want to monitor another service for which a module
exists, adjust the commands in the tutorial accordingly.</p><p>You can start Filebeat with the following command:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">./filebeat -e -modules=nginx -setup</pre></div><p>The <code class="literal">-e</code> flag tells Filebeat to output its logs to standard error, instead of
syslog.</p><p>The <code class="literal">-modules=nginx</code> flag loads the Nginx module.</p><p>The <code class="literal">-setup</code> flag tells Filebeat to load the associated sample Kibana
dashboards. This setup phase, in which the dashboards are loaded, doesn’t have
to be executed each time, and because it’s a relatively heavy operation, we
recommend executing it only once after installing or upgrading Filebeat. That
is why, the next commands from this tutorial are omitting the <code class="literal">-setup</code> flag.</p><p>Visiting the Kibana web interface now, open the Nginx dashboard and you should
already see your logs parsed and visualized in several widgets.</p><p><span class="inlinemediaobject"><img src="./images/kibana-nginx.png" alt="./images/kibana-nginx.png" /></span></p><p>You can also start multiple modules at once:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">./filebeat -e -modules=nginx,mysql,system</pre></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Because Filebeat modules are currently in Beta, the default Filebeat
configuration may interfere with the Filebeat <code class="literal">system</code> module configuration. If
you plan to run the <code class="literal">system</code> module, edit the Filebeat configuration file,
<code class="literal">filebeat.yml</code>, and comment out the following lines:</p><div class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">#- input_type: log
  #paths:
    #- /var/log/*.log</pre></div><p xmlns="http://www.w3.org/1999/xhtml">For rpm and deb, you’ll find the configuration file at
<code class="literal">/etc/filebeat/filebeat.yml</code>. For mac and win, look in the archive that you
extracted when you installed Filebeat.</p></div></div><p>While enabling the modules from the CLI file is handy for getting started and
for testing, you will probably want to use the configuration file for the
production setup. The equivalent of the above in the configuration file is:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">filebeat.modules:
- module: nginx
- module: mysql
- module: system</pre></div><p>Then you can start Filebeat simply with: <code class="literal">./filebeat -e</code>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="module-varialbe-overrides"></a>Variable overrides<a xmlns="" href="https://github.com/elastic/beats/edit/5.5/filebeat/docs/modules-overview.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Each module and fileset has a set of "variables" which allow adjusting their
behaviour. To see the available variables, you can consult the
<code class="literal">filebeat.full.yml</code> file. For example, all filesets allow setting a custom
<code class="literal">paths</code> value, which is a list of Globs where the log files are searched.</p><p>These variables have default values, sometimes depending on the operating
system. You can override them either from the CLI via the <code class="literal">-M</code> flag, or from
the configuration file.</p><p>In the case of Nginx, for example, you can use the following if the access
files are in a custom location:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">./filebeat -e -modules=nginx -M "nginx.access.var.paths=[/var/log/nginx/access.log*]"</pre></div><p>Or via the configuration file:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">filebeat.modules:
- module: nginx
  access:
    var.paths: ["/var/log/nginx/access.log*"]</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_advanced_settings"></a>Advanced settings<a xmlns="" href="https://github.com/elastic/beats/edit/5.5/filebeat/docs/modules-overview.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Behind the scenes, each module starts a Filebeat prospector. For advanced
users, it’s possible to add or overwrite any of the prospector settings. For
example, enabling <a class="link" href="configuration-filebeat-options.html#close-eof" title="close_eof">close_eof</a> can be done like this:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">filebeat.modules:
- module: nginx
  access:
    prospector:
      close_eof: true</pre></div><p>Or like this:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">./filebeat -e -modules=nginx -M "nginx.access.prospector.close_eof=true"</pre></div><p>From the CLI, it’s possible to change variables or settings for multiple
modules/fileset at once. For example, the following works and will enable
<code class="literal">close_eof</code> for all the filesets in the nginx module:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">./filebeat -e -modules=nginx -M "nginx.*.prospector.close_eof=true"</pre></div><p>The following also works and will enable <code class="literal">close_eof</code> for all prospectors
created by any of the modules:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">./filebeat -e -modules=nginx,mysql -M "*.*.prospector.close_eof=true"</pre></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="filebeat-modules-overview.html">
              « 
              Modules overview</a>
           
        </span><span class="next">
           
          <a href="filebeat-module-apache2.html">Apache2 module
               »
            </a></span></div></body></html>