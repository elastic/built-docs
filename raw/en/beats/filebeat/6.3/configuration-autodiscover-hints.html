<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Hints based autodiscover
        | Filebeat Reference [6.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filebeat Reference [6.3]" /><link rel="up" href="configuration-autodiscover.html" title="Autodiscover" /><link rel="prev" href="configuration-autodiscover.html" title="Autodiscover" /><link rel="next" href="configuration-autodiscover-advanced.html" title="Advanced usage" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Filebeat/Reference/6.3" /><meta xmlns="" name="DC.subject" content="Filebeat" /><meta xmlns="" name="DC.identifier" content="6.3" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Filebeat Reference
      [6.3]
    </a></span> » <span class="breadcrumb-link"><a href="configuring-howto-filebeat.html">Configuring Filebeat</a></span> » <span class="breadcrumb-link"><a href="configuration-autodiscover.html">Autodiscover</a></span> » <span class="breadcrumb-node">Hints based autodiscover</span></div><div xmlns="" class="navheader"><span class="prev"><a href="configuration-autodiscover.html">
              « 
              Autodiscover</a>
           
        </span><span class="next">
           
          <a href="configuration-autodiscover-advanced.html">Advanced usage
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-autodiscover-hints"></a>Hints based autodiscover<a xmlns="" href="https://github.com/elastic/beats/edit/6.3/libbeat/docs/shared-autodiscover.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Filebeat supports autodiscover based on hints from the provider. The hints system looks for
hints in Kubernetes Pod annotations or Docker labels that have the prefix <code class="literal">co.elastic.logs</code>. As soon as
the container starts, Filebeat will check if it contains any hints and launch the proper config for
it. Hints tell Filebeat how to get logs for the given container. By default logs will be retrieved
from the container using the <code class="literal">docker</code> input. You can use hints to modify this behavior. This is the full
list of supported hints:</p><h5><a id="_literal_co_elastic_logs_disable_literal"></a><code class="literal">co.elastic.logs/disable</code><a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Filebeat gets logs from all containers by default, you can set this hint to <code class="literal">true</code> to ignore
the output of the container. Filebeat won’t read or send logs from it.</p><h5><a id="_literal_co_elastic_logs_multiline_literal"></a><code class="literal">co.elastic.logs/multiline.*</code><a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Multiline settings. See <a class="xref" href="multiline-examples.html" title="Manage multiline messages"><em>Manage multiline messages</em></a> for a full list of all supported options.</p><h5><a id="_literal_co_elastic_logs_include_lines_literal"></a><code class="literal">co.elastic.logs/include_lines</code><a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>A list of regular expressions to match the lines that you want Filebeat to include.
See <a class="xref" href="configuration-filebeat-options.html" title="Configure inputs"><em>Configure inputs</em></a> for more info.</p><h5><a id="_literal_co_elastic_logs_exclude_lines_literal"></a><code class="literal">co.elastic.logs/exclude_lines</code><a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>A list of regular expressions to match the lines that you want Filebeat to exclude.
See <a class="xref" href="configuration-filebeat-options.html" title="Configure inputs"><em>Configure inputs</em></a> for more info.</p><h5><a id="_literal_co_elastic_logs_module_literal"></a><code class="literal">co.elastic.logs/module</code><a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Instead of using raw <code class="literal">docker</code> input, specifies the module to use to parse logs from the container. See
<a class="xref" href="filebeat-modules.html" title="Modules">Modules</a> for the list of supported modules.</p><h5><a id="_literal_co_elastic_logs_fileset_literal"></a><code class="literal">co.elastic.logs/fileset</code><a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>When module is configured, map container logs to module filesets. You can either configure
a single fileset like this:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">co.elastic.logs/fileset: access</pre></div><p>Or configure a fileset per stream in the container (stdout and stderr):</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">co.elastic.logs/fileset.stdout: access
co.elastic.logs/fileset.stderr: error</pre></div><h4><a id="_kubernetes_2"></a>Kubernetes<a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Kubernetes autodiscover provider supports hints in Pod annotations. To enable it just set <code class="literal">hints.enabled</code>:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">filebeat.autodiscover:
  providers:
    - type: kubernetes
      hints.enabled: true</pre></div><p>You can annotate Kubernetes Pods with useful info to spin up Filebeat inputs or modules:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">annotations:
  co.elastic.logs/multiline.pattern: '^\['
  co.elastic.logs/multiline.negate: true
  co.elastic.logs/multiline.match: after</pre></div><h5><a id="_multiple_containers"></a>Multiple containers<a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>When a pod has multiple containers, the settings are shared unless you put the container name in the
hint. For example, these hints configure multiline settings for all containers in the pod, but set a
specific <code class="literal">exclude_lines</code> hint for the container called <code class="literal">sidecar</code>.</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">annotations:
  co.elastic.logs/multiline.pattern: '^\['
  co.elastic.logs/multiline.negate: true
  co.elastic.logs/multiline.match: after
  co.elastic.logs.sidecar/exlude_lines: '^DBG'</pre></div><h4><a id="_docker_3"></a>Docker<a xmlns="" href="https://github.com/elastic/beats/edit/6.3/filebeat/docs/autodiscover-hints.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Docker autodiscover provider supports hints in labels. To enable it just set <code class="literal">hints.enabled</code>:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">filebeat.autodiscover:
  providers:
    - type: docker
      hints.enabled: true</pre></div><p>You can label Docker containers with useful info to spin up Filebeat inputs, for example:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">  co.elastic.logs/module: nginx
  co.elastic.logs/fileset.stdout: access
  co.elastic.logs/fileset.stderr: error</pre></div><p>The above labels configure Filebeat to use the Nginx module to harvest logs for this container.
Access logs will be retrieved from stdout stream, and error logs from stderr.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="configuration-autodiscover.html">
              « 
              Autodiscover</a>
           
        </span><span class="next">
           
          <a href="configuration-autodiscover-advanced.html">Advanced usage
               »
            </a></span></div></body></html>