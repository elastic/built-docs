<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Migrate your configuration | Filebeat Reference [6.6] | Elastic</title>
<link rel="home" href="index.html" title="Filebeat Reference [6.6]"/>
<link rel="up" href="migrating-from-logstash-forwarder.html" title="Migrating from Logstash Forwarder to Filebeat"/>
<link rel="prev" href="migration-registry-file.html" title="Update the registry file"/>
<link rel="next" href="migration-changed-cli.html" title="Changes to command line options"/>
<meta name="DC.type" content="Learn/Docs/Filebeat/Reference/6.6"/>
<meta name="DC.subject" content="Filebeat"/>
<meta name="DC.identifier" content="6.6"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Filebeat Reference [6.6]</a></span>
»
<span class="breadcrumb-link"><a href="migrating-from-logstash-forwarder.html">Migrating from Logstash Forwarder to Filebeat</a></span>
»
<span class="breadcrumb-node">Migrate your configuration</span>
</div>
<div class="navheader">
<span class="prev">
<a href="migration-registry-file.html">« Update the registry file</a>
</span>
<span class="next">
<a href="migration-changed-cli.html">Changes to command line options »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="migration-configuration"></a>Migrate your configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/migration.asciidoc">edit</a></h2>
</div></div></div>
<p>Although Filebeat is based on Logstash Forwarder, Filebeat uses YAML for its configuration
file, rather than the JSON+comments language used by Logstash Forwarder. This means that you
will need to migrate your existing configuration files to use the YAML syntax. Filebeat has a main
configuration file called <code class="literal">filebeat.yml</code>, but Filebeat also accepts reading
multiple configuration files from a <code class="literal">conf.d</code> directory and has similar restrictions to Logstash Forwarder.
If you specify additional config files, you need to place them in a directory other than the directory
where the main Filebeat config file resides. You specify the location of the config files by using the
<code class="literal">config_dir</code> option to configure the path to the directory. In most cases, you can do a one-to-one
conversion to create a Filebeat config file for each Logstash Forwarder config file.</p>
<p>Before migrating your config files, we recommend that you first read the <a class="xref" href="configuring-howto-filebeat.html" title="Configuring Filebeat">Configuring Filebeat</a>
section to understand the Filebeat options.</p>
<h3><a id="_migrate_the_files_section"></a>Migrate the "files" section<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/migration.asciidoc">edit</a></h3>
<p>To migrate the <code class="literal">files</code> section from the Logstash Forwarder configuration, create an <code class="literal">inputs</code> section in the Filebeat config file. For example, assuming that you start
with this configuration in Logstash Forwarder:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">  # The list of files configurations
  "files": [
    # An array of hashes. Each hash tells what paths to watch and
    # what fields to annotate on events from those paths.
    {
      "paths": [
        "/var/log/messages",
        "/var/log/*.log"
      ],

      # A dictionary of fields to annotate on each event.
      "fields": {
        "type": "syslog",
        "service": "apache",
        "zone": "us-east-1"
      }
    }, {
      # A path of "-" means stdin.
      "paths": [ "-" ],
      "fields": { "type": "stdin" }
    }, {
      "paths": [
        "/var/log/apache/httpd-*.log"
      ],
      "fields": { "type": "apache" }
    }
  ]</pre>
</div>
<p>The equivalent <code class="literal">inputs</code> section would look like this:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: log
  paths:
    - /var/log/messages
    - /var/log/*.log
  fields:
    service: apache
    zone: us-east-1
  fields_under_root: true
- type: stdin <a id="CO25-1"></a><i class="conum" data-value="1"></i>
- type: log
  paths:
    - /var/log/apache2/httpd-*.log</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO25-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The explicit <code class="literal">type</code> option was introduced to differentiate between normal files and
stdin. In the future, additional types might be supported.</p>
</td>
</tr>
</table>
</div>
<p>As you can see, apart from the new <code class="literal">type</code> options,
which were before implicitly defined via the <code class="literal">type</code> custom field, the remaining
options can be migrated mechanically.</p>
<p>The Filebeat configuration gives you more control over how each input behaves
by allowing you to configure options that were previously global in Logstash Forwarder
and set them separately for each input. See <a class="xref" href="configuring-howto-filebeat.html" title="Configuring Filebeat">Configuring Filebeat</a>.</p>
<h3><a id="_migrate_the_network_section"></a>Migrate the "network" section<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/migration.asciidoc">edit</a></h3>
<p>Like Logstash Forwarder, Filebeat can communicate directly with Logstash.
Filebeat can also insert log entries directly
into Elasticsearch. This results in an <code class="literal">output</code> section that is a bit more complex, as
you can see in the following example. You&#8217;ll find, however, that you can easily
translate the Logstash part of the configuration from the equivalent Logstash Forwarder
configuration.</p>
<p>The following snippet shows the <code class="literal">network</code> section of the Logstash Forwarder configuration:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">  # The network section covers network configuration :)
  "network": {
    # A list of downstream servers listening for our messages.
    # logstash-forwarder will pick one at random and only switch if
    # the selected one appears to be dead or unresponsive
    "servers": [ "localhost:5043" ],

    # The path to your client ssl certificate (optional)
    "ssl certificate": "./logstash-forwarder.crt",
    # The path to your client ssl key (optional)
    "ssl key": "./logstash-forwarder.key",

    # The path to your trusted ssl CA file. This is used
    # to authenticate your downstream server.
    "ssl ca": "./logstash-forwarder.crt",

    # Network timeout in seconds. This is most important for
    # logstash-forwarder determining whether to stop waiting for an
    # acknowledgement from the downstream server. If an timeout is reached,
    # logstash-forwarder will assume the connection or server is bad and
    # will connect to a server chosen at random from the servers list.
    "timeout": 15
  }</pre>
</div>
<p>The equivalent in Filebeat would look like this:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">output.logstash:
  hosts: <a id="CO26-1"></a><i class="conum" data-value="1"></i>
    - localhost:5043
  timeout: 15
  ssl.certificate_authorities: <a id="CO26-2"></a><i class="conum" data-value="2"></i>
    - ./logstash-forwarder.crt
  ssl.certificate: ./logstash-forwarder.crt
  ssl.key: ./logstash-forwarder.key</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO26-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>When multiple hosts are defined, the default behavior in Filebeat is to
pick a random host for new connections, similar to the Logstash Forwarder
behavior. Filebeat can optionally do load balancing. For more details, see the
<a class="xref" href="logstash-output.html#loadbalance" title="loadbalance"><code class="literal">loadbalance</code></a> configuration option.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO26-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Note that if the <code class="literal">ssl</code> settings are missing, then SSL is disabled. SSL is
automatically enabled when you add any of the <code class="literal">ssl</code> options. For more information about
specific configuration options, see <a class="xref" href="configuration-ssl.html" title="Specify SSL settings"><em>Specify SSL settings</em></a>.</p>
</td>
</tr>
</table>
</div>
<h3><a id="changed-configuration-options"></a>Changed configuration file options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/migration.asciidoc">edit</a></h3>
<p>With the refactoring of the configuration file, the following options were removed or renamed:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Config Option</th>
<th align="left" valign="top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">deadTime</code></p></td>
<td align="left" valign="top"><p><code class="literal">deadTime</code> was renamed to <code class="literal">ignore_older</code>. Filebeat keeps the files that it’s reading open until they are older than the timespan specified by <code class="literal">ignore_older</code>. If a file is changed, Filebeat reopens it.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">netTimeout</code></p></td>
<td align="left" valign="top"><p><code class="literal">netTimeout</code> was removed and is replaced by the <code class="literal">timeout</code> option in libbeat.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">log-to-syslog</code> and <code class="literal">syslog</code></p></td>
<td align="left" valign="top"><p>Both options were removed and replaced by logging options in libbeat.</p></td>
</tr>
</tbody>
</table>
</div>
<p>For more information about these options, see <a class="xref" href="configuring-howto-filebeat.html" title="Configuring Filebeat">Configuring Filebeat</a>.</p>
<h3><a id="_a_complete_example"></a>A complete example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.6/filebeat/docs/migration.asciidoc">edit</a></h3>
<p>Let&#8217;s see a simple, but complete example of a Logstash Forwarder configuration
and its equivalent for Filebeat.</p>
<p>Logstash Forwarder configuration:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "files": [
    {
      "paths": [
        "/var/log/*.log"
      ],
      "fields": {
        "type": "syslog",
        "service": "test01"
      }
    }
  ],
  "network": {
    "servers": [ "localhost:5043" ],
  }
}</pre>
</div>
<p>Filebeat configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: log
  paths:
    - /var/log/*.log
  fields:
    service: test01
output.elasticsearch:
  hosts: ["http://localhost:5043"]</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="migration-registry-file.html">« Update the registry file</a>
</span>
<span class="next">
<a href="migration-changed-cli.html">Changes to command line options »</a>
</span>
</div>
</div>
</body>
</html>
