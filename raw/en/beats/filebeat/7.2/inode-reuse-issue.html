<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Inode reuse causes Filebeat to skip lines
        | Filebeat Reference [7.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filebeat Reference [7.2]" /><link rel="up" href="faq.html" title="Common problems" /><link rel="prev" href="reduce-registry-size.html" title="Registry file is too large" /><link rel="next" href="windows-file-rotation.html" title="Open file handlers cause issues with Windows file rotation" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Filebeat/Reference/7.2" /><meta xmlns="" name="DC.subject" content="Filebeat" /><meta xmlns="" name="DC.identifier" content="7.2" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Filebeat Reference
      [7.2]
    </a></span> » <span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-link"><a href="faq.html">Common problems</a></span> » <span class="breadcrumb-node">Inode reuse causes Filebeat to skip lines</span></div><div xmlns="" class="navheader"><span class="prev"><a href="reduce-registry-size.html">
              « 
              Registry file is too large</a>
           
        </span><span class="next">
           
          <a href="windows-file-rotation.html">Open file handlers cause issues with Windows file rotation
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="inode-reuse-issue"></a>Inode reuse causes Filebeat to skip lines<a xmlns="" href="https://github.com/elastic/beats/edit/7.2/filebeat/docs/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>On Linux file systems, Filebeat uses the inode and device to identify files. When a file is removed from disk, the inode may be assigned to a new file. In use cases involving file rotation, if an old file is removed and a new one is created immediately afterwards, the new file may have the exact same inode as the file that was removed. In this case, Filebeat assumes that the new file is the same as the old and tries to continue reading at the old position, which is not correct.</p><p>By default states are never removed from the registry file. To resolve the inode reuse issue, we recommend that you use the <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-options" title="clean_*"><code class="literal">clean_*</code></a> options, especially <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-inactive" title="clean_inactive"><code class="literal">clean_inactive</code></a>, to remove the state of inactive files. For example, if your files get rotated every 24 hours, and the rotated files are not updated anymore, you can set <a class="link" href="filebeat-input-log.html#filebeat-input-log-ignore-older" title="ignore_older"><code class="literal">ignore_older</code></a> to 48 hours and <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-inactive" title="clean_inactive"><code class="literal">clean_inactive</code></a> to 72 hours.</p><p>You can use <a class="link" href="filebeat-input-log.html#filebeat-input-log-clean-removed" title="clean_removed"><code class="literal">clean_removed</code></a> for files that are removed from disk. Be aware that <code class="literal">clean_removed</code> cleans the file state from the registry whenever a file cannot be found during a scan. If the file shows up again later, it will be sent again from scratch.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="reduce-registry-size.html">
              « 
              Registry file is too large</a>
           
        </span><span class="next">
           
          <a href="windows-file-rotation.html">Open file handlers cause issues with Windows file rotation
               »
            </a></span></div></body></html>