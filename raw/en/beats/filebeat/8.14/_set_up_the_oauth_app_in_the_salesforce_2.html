<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Set up the OAuth App in the Salesforce | Filebeat Reference [8.14] | Elastic</title>
<meta class="elastic" name="content" content="Set up the OAuth App in the Salesforce | Filebeat Reference [8.14]">

<link rel="home" href="index.html" title="Filebeat Reference [8.14]"/>
<link rel="up" href="filebeat-module-salesforce.html" title="Salesforce module"/>
<link rel="prev" href="filebeat-module-salesforce.html" title="Salesforce module"/>
<link rel="next" href="filebeat-module-santa.html" title="Santa module"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Filebeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Filebeat/Reference/8.14"/>
<meta name="DC.subject" content="Filebeat"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="filebeat-module-salesforce.html">« Salesforce module</a>
</span>
<span class="next">
<a href="filebeat-module-santa.html">Santa module »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Filebeat Reference [8.14]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="filebeat-modules.html">Modules</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="filebeat-module-salesforce.html">Salesforce module</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Set up the OAuth App in the Salesforce</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="_set_up_the_oauth_app_in_the_salesforce_2"></a>Set up the OAuth App in the Salesforce</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
</div></div></div>
<p>In order to use this integration, users need to create a new Salesforce Application using OAuth. Follow the steps below to create a connected application in Salesforce:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Login to <a href="https://login.salesforce.com/" class="ulink" target="_top">Salesforce</a> with the same user credentials that the user wants to collect data with.
</li>
<li class="listitem">
Click on Setup on the top right menu bar. On the Setup page, search for <code class="literal">App Manager</code> in the <code class="literal">Search Setup</code> search box at the top of the page, then select <code class="literal">App Manager</code>.
</li>
<li class="listitem">
Click <em>New Connected App</em>.
</li>
<li class="listitem">
Provide a name for the connected application. This will be displayed in the App Manager and on its App Launcher tile.
</li>
<li class="listitem">
Enter the API name. The default is a version of the name without spaces. Only letters, numbers, and underscores are allowed. If the original app name contains any other characters, edit the default name.
</li>
<li class="listitem">
Enter the contact email for Salesforce.
</li>
<li class="listitem">
Under the API (Enable OAuth Settings) section of the page, select <em>Enable OAuth Settings</em>.
</li>
<li class="listitem">
In the Callback URL, enter the Instance URL (Please refer to <code class="literal">Salesforce Instance URL</code>).
</li>
<li class="listitem">
<p>Select the following OAuth scopes to apply to the connected app:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Manage user data via APIs (api).
</li>
<li class="listitem">
Perform requests at any time (refresh_token, offline_access).
</li>
<li class="listitem">
(Optional) In case of data collection, if any permission issues arise, add the Full access (full) scope.
</li>
</ul>
</div>
</li>
<li class="listitem">
Select <em>Require Secret for the Web Server Flow</em> to require the app&#8217;s client secret in exchange for an access token.
</li>
<li class="listitem">
Select <em>Require Secret for Refresh Token Flow</em> to require the app&#8217;s client secret in the authorization request of a refresh token and hybrid refresh token flow.
</li>
<li class="listitem">
Click Save. It may take approximately 10 minutes for the changes to take effect.
</li>
<li class="listitem">
Click Continue and then under API details, click Manage Consumer Details. Verify the user account using the Verification Code.
</li>
<li class="listitem">
Copy <code class="literal">Consumer Key</code> and <code class="literal">Consumer Secret</code> from the Consumer Details section, which should be populated as values for Client ID and Client Secret respectively in the configuration.
</li>
</ol>
</div>
<p>For more details on how to create a Connected App, refer to the Salesforce documentation <a href="https://help.salesforce.com/apex/HTViewHelpDoc?id=connected_app_create.htm" class="ulink" target="_top">here</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>Enabling real-time events</strong></span></p>
<p>To get started with <a href="https://developer.salesforce.com/blogs/2020/05/introduction-to-real-time-event-monitoring" class="ulink" target="_top">real-time</a> events, head to setup and into the quick find search for <em>Event Manager</em>. Enterprise and Unlimited environments have access to the Logout Event by default, but the remainder of the events need licensing to access <a href="https://help.salesforce.com/s/articleView?id=sf.salesforce_shield.htm&amp;type=5" class="ulink" target="_top">Shield Event Monitoring</a>.</p>
</div>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Read the <a class="xref" href="filebeat-installation-configuration.html" title="Filebeat quick start: installation and configuration">quick start</a> to learn
how to configure and run modules.</p>
</div>
</div>
<div class="position-relative"><h3><a id="configuring-salesforce-module"></a>Configure the module</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>You can further refine the behavior of the <code class="literal">salesforce</code> module by specifying
<a class="xref" href="_set_up_the_oauth_app_in_the_salesforce_2.html#salesforce-settings" title="Variable settings">variable settings</a> in the
<code class="literal">modules.d/salesforce.yml</code> file, or overriding settings at the command line.</p>
<p>You must enable at least one fileset in the module.
<span class="strong strong"><strong>Filesets are disabled by default.</strong></span></p>
<div class="position-relative"><h4><a id="salesforce-settings"></a>Variable settings</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>Each fileset has separate variable settings for configuring the behavior of the
module. If you don’t specify variable settings, the <code class="literal">salesforce</code> module uses
the defaults.</p>
<p>For advanced use cases, you can also override input settings. See
<a class="xref" href="advanced-settings.html" title="Override input settings">Override input settings</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>When you specify a setting at the command line, remember to prefix the
setting with the module name, for example, <code class="literal">salesforce.login.var.paths</code>
instead of <code class="literal">login.var.paths</code>.</p>
</div>
</div>
<div class="position-relative"><h3><a id="_fileset_settings"></a>Fileset settings</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_login_fileset"></a><code class="literal">login</code> fileset</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>Example config:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: salesforce
  login:
    enabled: true
    var.initial_interval: 1d
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.event_log_file: true
    var.elf_interval: 1h
    var.log_file_interval: Hourly

    var.real_time: true
    var.real_time_interval: 5m</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.initial_interval</code></strong></span>
</span>
</dt>
<dd>
The time window for collecting historical data when the input starts. Expects a duration string (e.g. 12h or 7d).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.api_version</code></strong></span>
</span>
</dt>
<dd>
The API version of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication</code></strong></span>
</span>
</dt>
<dd>
Authentication config for connecting to Salesforce API. Supports JWT or user-password auth flows.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.username</code></strong></span>
</span>
</dt>
<dd>
The username for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.key_path</code></strong></span>
</span>
</dt>
<dd>
Path to the client key file for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.url</code></strong></span>
</span>
</dt>
<dd>
The audience URL for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.secret</code></strong></span>
</span>
</dt>
<dd>
The client secret for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.token_url</code></strong></span>
</span>
</dt>
<dd>
The Salesforce token URL for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.username</code></strong></span>
</span>
</dt>
<dd>
The Salesforce username for authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.password</code></strong></span>
</span>
</dt>
<dd>
The password for the Salesforce user.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.url</code></strong></span>
</span>
</dt>
<dd>
The URL of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.event_log_file</code></strong></span>
</span>
</dt>
<dd>
Set to true to collect logs from EventLogFile (historical data).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.elf_interval</code></strong></span>
</span>
</dt>
<dd>
Interval for collecting EventLogFile logs, e.g. 1h or 5m.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.log_file_interval</code></strong></span>
</span>
</dt>
<dd>
Either "Hourly" or "Daily". The time interval of each log file from EventLogFile.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.real_time</code></strong></span>
</span>
</dt>
<dd>
Set to true to collect real-time data collection.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.real_time_interval</code></strong></span>
</span>
</dt>
<dd>
Interval for collecting real-time logs, e.g. 30s or 5m.
</dd>
</dl>
</div>
<div class="position-relative"><h4><a id="_logout_fileset"></a><code class="literal">logout</code> fileset</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>Example config:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: salesforce
  logout:
    enabled: true
    var.initial_interval: 1d
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.event_log_file: true
    var.elf_interval: 1h
    var.log_file_interval: Hourly

    var.real_time: true
    var.real_time_interval: 5m</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.initial_interval</code></strong></span>
</span>
</dt>
<dd>
The time window for collecting historical data when the input starts. Expects a duration string (e.g. 12h or 7d).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.api_version</code></strong></span>
</span>
</dt>
<dd>
The API version of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication</code></strong></span>
</span>
</dt>
<dd>
Authentication config for connecting to Salesforce API. Supports JWT or user-password auth flows.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.username</code></strong></span>
</span>
</dt>
<dd>
The username for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.key_path</code></strong></span>
</span>
</dt>
<dd>
Path to the client key file for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.url</code></strong></span>
</span>
</dt>
<dd>
The audience URL for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.secret</code></strong></span>
</span>
</dt>
<dd>
The client secret for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.token_url</code></strong></span>
</span>
</dt>
<dd>
The Salesforce token URL for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.username</code></strong></span>
</span>
</dt>
<dd>
The Salesforce username for authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.password</code></strong></span>
</span>
</dt>
<dd>
The password for the Salesforce user.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.url</code></strong></span>
</span>
</dt>
<dd>
The URL of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.event_log_file</code></strong></span>
</span>
</dt>
<dd>
Set to true to collect logs from EventLogFile (historical data).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.elf_interval</code></strong></span>
</span>
</dt>
<dd>
Interval for collecting EventLogFile logs, e.g. 1h or 5m.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.log_file_interval</code></strong></span>
</span>
</dt>
<dd>
Either "Hourly" or "Daily". The time interval of each log file from EventLogFile.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.real_time</code></strong></span>
</span>
</dt>
<dd>
Set to true to collect real-time data collection.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.real_time_interval</code></strong></span>
</span>
</dt>
<dd>
Interval for collecting real-time logs, e.g. 30s or 5m.
</dd>
</dl>
</div>
<div class="position-relative"><h4><a id="_setupaudittrail_fileset"></a><code class="literal">setupaudittrail</code> fileset</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>Example config:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: salesforce
  setupaudittrail:
    enabled: true
    var.initial_interval: 1d
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.real_time: true
    var.real_time_interval: 5m</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.initial_interval</code></strong></span>
</span>
</dt>
<dd>
The time window for collecting historical data when the input starts. Expects a duration string (e.g. 12h or 7d).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.api_version</code></strong></span>
</span>
</dt>
<dd>
The API version of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication</code></strong></span>
</span>
</dt>
<dd>
Authentication config for connecting to Salesforce API. Supports JWT or user-password auth flows.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.username</code></strong></span>
</span>
</dt>
<dd>
The username for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.key_path</code></strong></span>
</span>
</dt>
<dd>
Path to the client key file for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.url</code></strong></span>
</span>
</dt>
<dd>
The audience URL for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.secret</code></strong></span>
</span>
</dt>
<dd>
The client secret for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.token_url</code></strong></span>
</span>
</dt>
<dd>
The Salesforce token URL for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.username</code></strong></span>
</span>
</dt>
<dd>
The Salesforce username for authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.password</code></strong></span>
</span>
</dt>
<dd>
The password for the Salesforce user.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.url</code></strong></span>
</span>
</dt>
<dd>
The URL of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.real_time</code></strong></span>
</span>
</dt>
<dd>
Set to true to collect real-time data collection.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.real_time_interval</code></strong></span>
</span>
</dt>
<dd>
Interval for collecting real-time logs, e.g. 30s or 5m.
</dd>
</dl>
</div>
<div class="position-relative"><h4><a id="_apex_fileset"></a><code class="literal">apex</code> fileset</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>Example config:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: salesforce
  apex:
    enabled: true
    var.initial_interval: 1d
    var.log_file_interval: Hourly
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.event_log_file: true
    var.elf_interval: 1h
    var.log_file_interval: Hourly</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.initial_interval</code></strong></span>
</span>
</dt>
<dd>
The time window for collecting historical data when the input starts. Expects a duration string (e.g. 12h or 7d).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.api_version</code></strong></span>
</span>
</dt>
<dd>
The API version of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication</code></strong></span>
</span>
</dt>
<dd>
Authentication config for connecting to Salesforce API. Supports JWT or user-password auth flows.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.username</code></strong></span>
</span>
</dt>
<dd>
The username for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.client.key_path</code></strong></span>
</span>
</dt>
<dd>
Path to the client key file for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.jwt_bearer_flow.url</code></strong></span>
</span>
</dt>
<dd>
The audience URL for JWT authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.enabled</code></strong></span>
</span>
</dt>
<dd>
Set to true to use user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.id</code></strong></span>
</span>
</dt>
<dd>
The client ID for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.client.secret</code></strong></span>
</span>
</dt>
<dd>
The client secret for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.token_url</code></strong></span>
</span>
</dt>
<dd>
The Salesforce token URL for user-password authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.username</code></strong></span>
</span>
</dt>
<dd>
The Salesforce username for authentication.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.authentication.user_password_flow.password</code></strong></span>
</span>
</dt>
<dd>
The password for the Salesforce user.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.url</code></strong></span>
</span>
</dt>
<dd>
The URL of the Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.event_log_file</code></strong></span>
</span>
</dt>
<dd>
Set to true to collect logs from EventLogFile (historical data).
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.elf_interval</code></strong></span>
</span>
</dt>
<dd>
Interval for collecting EventLogFile logs, e.g. 1h or 5m.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">var.log_file_interval</code></strong></span>
</span>
</dt>
<dd>
Either "Hourly" or "Daily". The time interval of each log file from EventLogFile.
</dd>
</dl>
</div>
<div class="position-relative"><h3><a id="_troubleshooting"></a>Troubleshooting</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>Here are some common issues and how to resolve them:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>Hitting Salesforce API limits</strong></span>
</span>
</dt>
<dd>
Reduce the values of <code class="literal">var.real_time_interval</code> and <code class="literal">var.elf_interval</code> to poll the API less frequently. Monitor the API usage in your Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Connectivity issues</strong></span>
</span>
</dt>
<dd>
Verify the <code class="literal">var.url</code> is correct. Check that the user credentials are valid and have the necessary permissions. Ensure network connectivity between the Elastic Agent and Salesforce instance.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Not seeing any data</strong></span>
</span>
</dt>
<dd>
Check the Elastic Agent logs for errors. Verify the module configuration is correct, the filesets are enabled, and the intervals are reasonable. Confirm there is log activity in Salesforce for the log types being collected.
</dd>
</dl>
</div>
<div class="position-relative"><h3><a id="_fields_47"></a>Fields</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc">edit</a></div>
<p>For a description of each field in the module, see the
<a class="xref" href="exported-fields-salesforce.html" title="Salesforce fields">exported fields</a> section.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="filebeat-module-salesforce.html">« Salesforce module</a>
</span>
<span class="next">
<a href="filebeat-module-santa.html">Santa module »</a>
</span>
</div>
</body>
</html>
