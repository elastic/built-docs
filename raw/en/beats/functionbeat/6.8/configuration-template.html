<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Load the Elasticsearch index template
        | Functionbeat Reference [6.8]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Functionbeat Reference [6.8]" /><link rel="up" href="configuring-howto-functionbeat.html" title="Configuring Functionbeat" /><link rel="prev" href="setup-kibana-endpoint.html" title="Set up the Kibana endpoint" /><link rel="next" href="configuration-logging.html" title="Configure logging" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Functionbeat/Reference/6.8" /><meta xmlns="" name="DC.subject" content="Functionbeat" /><meta xmlns="" name="DC.identifier" content="6.8" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Functionbeat Reference
      [6.8]
    </a></span> » <span class="breadcrumb-link"><a href="configuring-howto-functionbeat.html">Configuring Functionbeat</a></span> » <span class="breadcrumb-node">Load the Elasticsearch index template</span></div><div xmlns="" class="navheader"><span class="prev"><a href="setup-kibana-endpoint.html">
              « 
              Set up the Kibana endpoint</a>
           
        </span><span class="next">
           
          <a href="configuration-logging.html">Configure logging
               »
            </a></span></div><div class="xpack chapter"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-template"></a>Load the Elasticsearch index template<a xmlns="" href="https://github.com/elastic/beats/edit/6.8/libbeat/docs/template-config.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a xmlns="" class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>The <code class="literal">setup.template</code> section of the <code class="literal">functionbeat.yml</code> config file specifies
the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/indices-templates.html" target="_top">index template</a> to use for setting
mappings in Elasticsearch. If template loading is enabled (the default),
Functionbeat loads the index template automatically after successfully
connecting to Elasticsearch.</p><p>You can adjust the following settings to load your own template or overwrite an
existing one.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.enabled</code></strong></span>
</span></dt><dd>
Set to false to disable template loading. If set this to false,
you must <a class="link" href="functionbeat-template.html#load-template-manually" title="Load the template manually">load the template manually</a>.
</dd><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.name</code></strong></span>
</span></dt><dd>
The name of the template. The default is
<code class="literal">functionbeat</code>. The Functionbeat version is always appended to the given
name, so the final name is <code class="literal">functionbeat-%{[beat.version]}</code>.
</dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.pattern</code></strong></span>
</span></dt><dd><p class="simpara">
The template pattern to apply to the default index
settings. The default pattern is <code class="literal">functionbeat-*</code>. The Functionbeat version is always
included in the pattern, so the final pattern is
<code class="literal">functionbeat-%{[beat.version]}-*</code>. The wildcard character <code class="literal">-*</code> is used to
match all daily indices.
</p><p class="simpara">Example:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">setup.template.name: "functionbeat"
setup.template.pattern: "functionbeat-*"</pre></div></dd><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.fields</code></strong></span>
</span></dt><dd>
The path to the YAML file describing the fields. The default is <code class="literal">fields.yml</code>. If a
relative path is set, it is considered relative to the config path. See the <a class="xref" href="directory-layout.html" title="Directory layout">Directory layout</a>
section for details.
</dd><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.overwrite</code></strong></span>
</span></dt><dd>
A boolean that specifies whether to overwrite the existing template. The default
is false.
</dd><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.settings</code></strong></span>
</span></dt><dd><p class="simpara">
A dictionary of settings to place into the <code class="literal">settings.index</code> dictionary of the
Elasticsearch template. For more details about the available Elasticsearch mapping options, please
see the Elasticsearch <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/mapping.html" target="_top">mapping reference</a>.
</p><p class="simpara">Example:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">setup.template.name: "functionbeat"
setup.template.fields: "fields.yml"
setup.template.overwrite: false
setup.template.settings:
  index.number_of_shards: 1
  index.number_of_replicas: 1</pre></div></dd></dl></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you want to use <a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/6.8/xpack-ccr.html" target="_top">cross-cluster replication</a> to replicate Functionbeat
indices to another cluster, you will need to add additional template settings to
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/6.8/ccr-requirements.html#ccr-overview-beats" target="_top">enable soft deletes</a> on the
underlying indices.</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.settings._source</code></strong></span>
</span></dt><dd><p class="simpara">
A dictionary of settings for the <code class="literal">_source</code> field. For the available settings,
please see the Elasticsearch <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/mapping-source-field.html" target="_top">reference</a>.
</p><p class="simpara">Example:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">setup.template.name: "functionbeat"
setup.template.fields: "fields.yml"
setup.template.overwrite: false
setup.template.settings:
  _source.enabled: false</pre></div></dd><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.append_fields</code></strong></span> <span xmlns="" class="Admonishment Admonishment--experimental">
      [<span class="Admonishment-title u-mono">experimental</span>]
      <span class="Admonishment-detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span>
</span></dt><dd><p class="simpara">
A list of fields to be added
to the template and Kibana index pattern. This setting adds new fields. It does
not overwrite or change existing fields.
</p><p class="simpara">This setting is useful when your data contains fields that Functionbeat doesn’t
know about in advance.</p><p class="simpara">If <code class="literal">append_fields</code> is specified along with <code class="literal">overwrite: true</code>, Functionbeat
overwrites the existing template and applies the new template when creating new
indices. Existing indices are not affected. If you’re running multiple
instances of Functionbeat with different <code class="literal">append_fields</code> settings, the last one
writing the template takes precedence.</p><p class="simpara">Any changes to this setting also affect the Kibana index pattern.</p><p class="simpara">Example config:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">setup.template.overwrite: true
setup.template.append_fields:
- name: test.name
  type: keyword
- name: test.hostname
  type: long</pre></div></dd><dt><span class="term">
<span class="strong strong"><strong><code class="literal">setup.template.json.enabled</code></strong></span>
</span></dt><dd><p class="simpara">
Set to <code class="literal">true</code> to load a
JSON-based template file. Specify the path to your Elasticsearch index template file and
set the name of the template.
</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">setup.template.json.enabled: true
setup.template.json.path: "template.json"
setup.template.json.name: "template-name</pre></div></dd></dl></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If the JSON template is used, the <code class="literal">fields.yml</code> is skipped for the template
generation.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="setup-kibana-endpoint.html">
              « 
              Set up the Kibana endpoint</a>
           
        </span><span class="next">
           
          <a href="configuration-logging.html">Configure logging
               »
            </a></span></div></body></html>