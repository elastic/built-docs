<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Redis Output | Heartbeat Reference [5.4] | Elastic</title>
<meta class="elastic" name="content" content="Redis Output | Heartbeat Reference [5.4]">

<link rel="home" href="index.html" title="Heartbeat Reference [5.4]"/>
<link rel="up" href="heartbeat-configuration-details.html" title="Configuration Options (Reference)"/>
<link rel="prev" href="kafka-output.html" title="Kafka Output"/>
<link rel="next" href="file-output.html" title="File Output"/>
<meta class="elastic" name="product_version" content="5.4"/>
<meta class="elastic" name="product_name" content="Heartbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Heartbeat/Reference/5.4"/>
<meta name="DC.subject" content="Heartbeat"/>
<meta name="DC.identifier" content="5.4"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<p>
  <strong>WARNING</strong>: Version 5.4 of Heartbeat has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div class="navheader">
<span class="prev">
<a href="kafka-output.html">« Kafka Output</a>
</span>
<span class="next">
<a href="file-output.html">File Output »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Heartbeat Reference [5.4]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuring-howto-heartbeat.html">Configuring Heartbeat</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="heartbeat-configuration-details.html">Configuration Options (Reference)</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Redis Output</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="redis-output"></a>Redis Output<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h2>
</div></div></div>
<p>The Redis output inserts the events into a Redis list or a Redis channel.
This output plugin is compatible with
the <a href="/guide/en/logstash/current/plugins-inputs-redis.html" class="ulink" target="_top">Redis input plugin</a> for Logstash.</p>
<p>Example configuration:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">output.redis:
  hosts: ["localhost"]
  password: "my_password"
  key: "heartbeat"
  db: 0
  timeout: 5</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_compatibility_4"></a>Compatibility<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h3>
</div></div></div>
<p>This output works with Redis 3.2.4.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_redis_output_options"></a>Redis Output Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h3>
</div></div></div>
<p>You can specify the following options in the <code class="literal">redis</code> section of the <code class="literal">heartbeat.yml</code> config file:</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_enabled_4"></a>enabled<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The enabled config is a boolean setting to enable or disable the output. If set
to false, the output is disabled.</p>
<p>The default value is true.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_hosts_2"></a>hosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The list of Redis servers to connect to. If load balancing is enabled, the events are
distributed to the servers in the list. If one server becomes unreachable, the events are
distributed to the reachable servers only. You can define each Redis server by specifying
<code class="literal">HOST</code> or <code class="literal">HOST:PORT</code>. For example: <code class="literal">"192.15.3.2"</code> or <code class="literal">"test.redis.io:12345"</code>. If you
don&#8217;t specify a port number, the value configured by <code class="literal">port</code> is used.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_port"></a>port<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deprecated in 5.0.0.</p>
</div>
</div>
<p>The Redis port to use if <code class="literal">hosts</code> does not contain a port number. The default is 6379.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_index_2"></a>index<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 5.0.0.</h3>
<p>The <code class="literal">index</code> setting is renamed to <code class="literal">key</code></p>
</div>
</div>
<p>The name of the Redis list or channel the events are published to. The default is
"heartbeat".</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_key_2"></a>key<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The name of the Redis list or channel the events are published to. The default is
"heartbeat".</p>
<p>The redis key can be set dynamically using a format string accessing any
fields in the event to be published.</p>
<p>This configuration will use the <code class="literal">fields.list</code> field to set the redis list key. If
<code class="literal">fields.list</code> is missing, <code class="literal">fallback</code> will be used.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">output.redis:
  hosts: ["localhost"]
  key: "%{[fields.list]:fallback}"</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_keys"></a>keys<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>Array of key selector configurations supporting conditionals, format string
based field access and name mappings. The first rule matching will be used to
set the <code class="literal">key</code> for the event to be published. If <code class="literal">keys</code> is missing or no
rule matches, the <code class="literal">key</code> field will be used.</p>
<p>Rule settings:</p>
<p><span class="strong strong"><strong><code class="literal">key</code></strong></span>: The key format string. If the fields used in the format string are missing, the rule fails.</p>
<p><span class="strong strong"><strong><code class="literal">mapping</code></strong></span>: Dictionary mapping key values to new names</p>
<p><span class="strong strong"><strong><code class="literal">default</code></strong></span>: Default string value if <code class="literal">mapping</code> does not find a match.</p>
<p><span class="strong strong"><strong><code class="literal">when</code></strong></span>: Condition which must succeed in order to execute the current rule.</p>
<p>Example <code class="literal">keys</code> settings:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">output.redis:
  hosts: ["localhost"]
  key: "default_list"
  keys:
    - key: "info_list"   # send to info_list if `message` field contains INFO
      when.contains:
        message: "INFO"
    - key: "debug_list"  # send to debug_list if `message` field contains DEBUG
      when.contains:
        message: "DEBUG"
    - key: "%{[type]}"
      mapping:
        "http": "frontend_list"
        "nginx": "frontend_list"
        "mysql": "backend_list"</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_password_3"></a>password<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The password to authenticate with. The default is no authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_db"></a>db<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The Redis database number where the events are published. The default is 0.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_datatype"></a>datatype<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The Redis data type to use for publishing events.If the data type is <code class="literal">list</code>, the
Redis RPUSH command is used and all events are added to the list with the key defined under <code class="literal">key</code>.
If the data type <code class="literal">channel</code> is used, the Redis <code class="literal">PUBLISH</code> command is used and means that all events
are pushed to the pub/sub mechanism of Redis. The name of the channel is the one defined under <code class="literal">key</code>.
The default value is <code class="literal">list</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_codec_2"></a>codec<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>Output codec configuration. If the <code class="literal">codec</code> section is missing, events will be json encoded.</p>
<p>See <a class="xref" href="configuration-output-codec.html" title="Output Codec">Output Codec</a> for more information.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_host_topology"></a>host_topology<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deprecated in 5.0.0.</p>
</div>
</div>
<p>The Redis host to connect to when using topology map support. Topology map support is disabled if this option is not set.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_password_topology"></a>password_topology<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deprecated in 5.0.0.</p>
</div>
</div>
<p>The password to use for authenticating with the Redis topology server. The default is no authentication.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_db_topology"></a>db_topology<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deprecated in 5.0.0.</p>
</div>
</div>
<p>The Redis database number where the topology information is stored. The default is 1.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_worker_4"></a>worker<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The number of workers to use for each host configured to publish events to Redis. Use this setting along with the
<code class="literal">loadbalance</code> option. For example, if you have 2 hosts and 3 workers, in total 6 workers are started (3 for each host).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_loadbalance"></a>loadbalance<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>If set to true and multiple hosts or workers are configured, the output plugin load balances published events onto all
Redis hosts. If set to false, the output plugin sends all events to only one host (determined at random) and will switch
to another host if the currently selected one becomes unreachable. The default value is true.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_timeout_4"></a>timeout<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The Redis connection timeout in seconds. The default is 5 seconds.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_max_retries_4"></a>max_retries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The number of times to retry publishing an event after a publishing failure.
After the specified number of retries, the events are typically dropped.
Some Beats, such as Filebeat, ignore the <code class="literal">max_retries</code> setting and retry until all
events are published.</p>
<p>Set <code class="literal">max_retries</code> to a value less than 0 to retry until all events are published.</p>
<p>The default is 3.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_bulk_max_size_4"></a>bulk_max_size<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The maximum number of events to bulk in a single Redis request or pipeline. The default is 2048.</p>
<p>If the Beat sends single events, the events are collected into batches. If the
Beat publishes a large batch of events (larger than the value specified by
<code class="literal">bulk_max_size</code>), the batch is split.</p>
<p>Specifying a larger batch size can improve performance by lowering the overhead
of sending events. However big batch sizes can also increase processing times,
which might result in API errors, killed connections, timed-out publishing
requests, and, ultimately, lower throughput.</p>
<p>Setting <code class="literal">bulk_max_size</code> to values less than or equal to 0 disables buffering in
libbeat. When buffering is disabled, Beats that publish single events (such as
Packetbeat) send each event directly to Redis. Beats that publish
data in batches (such as Filebeat) send events in batches based on the spooler
size.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_ssl_4"></a>ssl<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>Configuration options for SSL parameters like the root CA for Redis connections
guarded by SSL proxies (for example <a href="https://www.stunnel.org" class="ulink" target="_top">stunnel</a>). See
<a class="xref" href="configuration-output-ssl.html" title="SSL">SSL</a> for more information.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_proxy_url_3"></a>proxy_url<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The URL of the SOCKS5 proxy to use when connecting to the Redis servers. The
value must be a URL with a scheme of <code class="literal">socks5://</code>. You cannot use a web proxy
because the protocol used to communicate with Redis is not based on HTTP.</p>
<p>If the SOCKS5 proxy server requires client authentication, you can embed
a username and password in the URL.</p>
<p>When using a proxy, hostnames are resolved on the proxy server instead of on the
client. You can change this behavior by setting the
<a class="xref" href="redis-output.html#redis-proxy-use-local-resolver" title="proxy_use_local_resolver">proxy_use_local_resolver</a> option.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="redis-proxy-use-local-resolver"></a>proxy_use_local_resolver<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/libbeat/docs/outputconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>This option determines whether Redis hostnames are resolved locally when using a proxy.
The default value is false, which means that name resolution occurs on the proxy server.</p>
</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="kafka-output.html">« Kafka Output</a>
</span>
<span class="next">
<a href="file-output.html">File Output »</a>
</span>
</div>
</body>
</html>
