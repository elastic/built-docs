<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Add Docker metadata
        | Heartbeat Reference [6.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Heartbeat Reference [6.1]" /><link rel="up" href="filtering-and-enhancing-data.html" title="Filter and Enhance the exported data" /><link rel="prev" href="add-kubernetes-metadata.html" title="Add Kubernetes metadata" /><link rel="next" href="configuring-ingest-node.html" title="Parse logs by using ingest node" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Heartbeat/Reference/6.1" /><meta xmlns="" name="DC.subject" content="Heartbeat" /><meta xmlns="" name="DC.identifier" content="6.1" /></head><body><div xmlns="" class="page_header">This functionality is in beta and is subject to change. The design and
code is considered to be less mature than official GA features. Elastic will
take a best effort approach to fix any issues, but beta features are not
subject to the support SLA of official GA features.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Heartbeat Reference
      [6.1]
    </a></span> » <span class="breadcrumb-link"><a href="configuring-howto-heartbeat.html">Configuring Heartbeat</a></span> » <span class="breadcrumb-link"><a href="filtering-and-enhancing-data.html">Filter and Enhance the exported data</a></span> » <span class="breadcrumb-node">Add Docker metadata</span></div><div xmlns="" class="navheader"><span class="prev"><a href="add-kubernetes-metadata.html">
              « 
              Add Kubernetes metadata</a>
           
        </span><span class="next">
           
          <a href="configuring-ingest-node.html">Parse logs by using ingest node
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="add-docker-metadata"></a>Add Docker metadata<a xmlns="" href="https://github.com/elastic/beats/edit/6.1/libbeat/docs/processors-using.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p></div></div><p>The <code class="literal">add_docker_metadata</code> processor annotates each event with relevant metadata
from Docker containers:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Container ID
</li><li class="listitem">
Name
</li><li class="listitem">
Image
</li><li class="listitem">
Labels
</li></ul></div><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">processors:
- add_docker_metadata:
    host: "unix:///var/run/docker.sock"
    #match_fields: ["system.process.cgroup.id"]
    #match_source: true
    #match_source_index: 4
    #cleanup_timeout: 60
    # To connect to Docker over TLS you must specify a client and CA certificate.
    #ssl:
    #  certificate_authority: "/etc/pki/root/ca.pem"
    #  certificate:           "/etc/pki/client/cert.pem"
    #  key:                   "/etc/pki/client/cert.key"</pre></div><p>It has the following settings:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">host</code>
</span></dt><dd>
(Optional) Docker socket (UNIX or TCP socket). It uses
  <code class="literal">unix:///var/run/docker.sock</code> by default.
</dd><dt><span class="term">
<code class="literal">match_fields</code>
</span></dt><dd>
(Optional) A list of fields to match a container id, at least
  one of them should hold a container id to get the event enriched.
</dd><dt><span class="term">
<code class="literal">match_source</code>
</span></dt><dd>
(Optional) Match container id from a log path present in
  <code class="literal">source</code> field. Enabled by default.
</dd><dt><span class="term">
<code class="literal">match_source_index</code>
</span></dt><dd>
(Optional) Index in the source path split by / to look
  for container id. It defaults to 4 to match
  <code class="literal">/var/lib/docker/containers/&lt;container_id&gt;/*.log</code>
</dd><dt><span class="term">
<code class="literal">cleanup_timeout</code>
</span></dt><dd>
(Optional) Time of inactivity to consider we can clean and
forget metadata for a container, 60s by default.
</dd></dl></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="add-kubernetes-metadata.html">
              « 
              Add Kubernetes metadata</a>
           
        </span><span class="next">
           
          <a href="configuring-ingest-node.html">Parse logs by using ingest node
               »
            </a></span></div></body></html>