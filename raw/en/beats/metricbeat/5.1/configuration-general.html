<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>General Configuration | Metricbeat Reference [5.1] | Elastic</title>
<link rel="home" href="index.html" title="Metricbeat Reference [5.1]"/>
<link rel="up" href="metricbeat-configuration-options.html" title="Configuration Options (Reference)"/>
<link rel="prev" href="configuration-metricbeat.html" title="Modules Configuration"/>
<link rel="next" href="elasticsearch-output.html" title="Elasticsearch Output Configuration"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/5.1"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="5.1"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>WARNING</strong>: Version 5.1 of Metricbeat has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [5.1]</a></span>
»
<span class="breadcrumb-link"><a href="configuring-howto-metricbeat.html">Configuring Metricbeat</a></span>
»
<span class="breadcrumb-link"><a href="metricbeat-configuration-options.html">Configuration Options (Reference)</a></span>
»
<span class="breadcrumb-node">General Configuration</span>
</div>
<div class="navheader">
<span class="prev">
<a href="configuration-metricbeat.html">« Modules Configuration</a>
</span>
<span class="next">
<a href="elasticsearch-output.html">Elasticsearch Output Configuration »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="configuration-general"></a>General Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h2>
</div></div></div>
<p>The general section of the <code class="literal">metricbeat.yml</code> config file contains configuration options for the Beat and some
general settings that control its behaviour.</p>
<p>Here is an example configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">name: "my-shipper"
tags: ["service-X", "web-tier"]</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_general_options"></a>General Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h3>
</div></div></div>
<p>You can specify the following options:</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_name"></a>name<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The name of the Beat. If this option is empty, the <code class="literal">hostname</code> of the server is
used. The name is included as the <code class="literal">beat.name</code> field in each published transaction. You can
use the name to group all transactions sent by a single Beat.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">name: "my-shipper"</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_tags_2"></a>tags<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>A list of tags that the Beat includes in the <code class="literal">tags</code> field of each published
transaction. Tags make it easy to group servers by different logical properties.
For example, if you have a cluster of web servers, you can add the "webservers"
tag to the Beat on each server, and then use filters and queries in the Kibana
web interface to get visualisations for the whole group of servers.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">tags: ["my-service", "hardware", "test"]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="libbeat-configuration-fields"></a>fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>Optional fields that you can specify to add additional information to the
output. Fields can be scalar values, arrays, dictionaries, or any nested
combination of these. By default, the fields that you specify here will be
grouped under a <code class="literal">fields</code> sub-dictionary in the output document. To store the
custom fields as top-level fields, set the <code class="literal">fields_under_root</code> option to true.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">fields: {project: "myproject", instance-id: "574734885120952459"}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_fields_under_root"></a>fields_under_root<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>If this option is set to true, the custom <a class="xref" href="configuration-general.html#libbeat-configuration-fields" title="fields">fields</a> are
stored as top-level fields in the output document instead of being grouped under
a <code class="literal">fields</code> sub-dictionary. If the custom field names conflict with other field
names, then the custom fields overwrite the other fields.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">fields_under_root: true
fields:
  instance_id: i-10a64379
  region: us-east-1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_refresh_topology_freq"></a>refresh_topology_freq<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deprecated in 5.0.0.</p>
</div>
</div>
<p>The refresh interval of the topology map in
seconds. In other words, this setting specifies how often each Beat publishes its
IP addresses to the topology map. The default is 10 seconds.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_topology_expire"></a>topology_expire<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deprecated in 5.0.0.</p>
</div>
</div>
<p>The expiration time for the topology in seconds. This is useful in case a Beat
stops publishing its IP addresses. The IP addresses are removed automatically
from the topology map after expiration.</p>
<p>This setting is used only by the Redis output. The other outputs don&#8217;t support
expiring entries.</p>
<p>The default is 15 seconds.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_queue_size"></a>queue_size<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>The internal queue size for single events in the processing pipeline. The default
value is 1000.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_bulk_queue_size"></a>bulk_queue_size<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>(DO NOT TOUCH) The internal queue size for bulk events in the processing pipeline. The default value is 0.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_max_procs"></a>max_procs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<p>Sets the maximum number of CPUs that can be executing simultaneously. The
default is the number of logical CPUs available in the system.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_geoip_paths"></a>geoip.paths<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.1/libbeat/docs/generalconfig.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 5.0.0.</h3>
<p>Please use the <a href="/guide/en/elasticsearch/plugins/master/ingest-geoip.html" class="ulink" target="_top">Geoip processor in Ingest Node</a> or the <a href="/guide/en/logstash/current/plugins-filters-geoip.html" class="ulink" target="_top">Logstash GeoIP filter</a> instead</p>
</div>
</div>
<p>This configuration option is currently used by Packetbeat only and it will be removed in version 6.0.</p>
<p>The paths to search for GeoIP databases. The Beat loads the first installed GeoIP database
that if finds. Then, for each transaction, the Beat exports the GeoIP location of the client.</p>
<p>The recommended values for geoip.paths are <code class="literal">/usr/share/GeoIP/GeoLiteCity.dat</code>
and <code class="literal">/usr/local/var/GeoIP/GeoLiteCity.dat</code>.</p>
<p>If no paths are configured, GeoIP is disabled.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">geoip:
  paths:
    - "/usr/share/GeoIP/GeoLiteCity.dat"
    - "/usr/local/var/GeoIP/GeoLiteCity.dat"</pre>
</div>
<p><span class="strong strong"><strong>Important</strong></span>: For GeoIP support to function correctly, the
<a href="https://dev.maxmind.com/geoip/legacy/geolite/" class="ulink" target="_top">GeoLite City database</a> is required.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="configuration-metricbeat.html">« Modules Configuration</a>
</span>
<span class="next">
<a href="elasticsearch-output.html">Elasticsearch Output Configuration »</a>
</span>
</div>
</div>
</body>
</html>
