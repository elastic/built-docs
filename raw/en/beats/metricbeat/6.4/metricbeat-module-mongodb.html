<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MongoDB module | Metricbeat Reference [6.4] | Elastic</title>
<meta class="elastic" name="content" content="MongoDB module | Metricbeat Reference [6.4]">

<link rel="home" href="index.html" title="Metricbeat Reference [6.4]"/>
<link rel="up" href="metricbeat-modules.html" title="Modules"/>
<link rel="prev" href="metricbeat-metricset-memcached-stats.html" title="Memcached stats metricset"/>
<link rel="next" href="metricbeat-metricset-mongodb-collstats.html" title="MongoDB collstats metricset"/>
<meta class="elastic" name="product_version" content="6.4"/>
<meta class="elastic" name="product_name" content="Metricbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/6.4"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="6.4"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="metricbeat-metricset-memcached-stats.html">« Memcached stats metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-mongodb-collstats.html">MongoDB collstats metricset »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [6.4]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="metricbeat-modules.html">Modules</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>MongoDB module</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.4/metricbeat/docs/modules/mongodb.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="metricbeat-module-mongodb"></a>MongoDB module</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.4/metricbeat/docs/modules/mongodb.asciidoc">edit</a></div>
</div></div></div>
<p>This module periodically fetches metrics from <a href="https://www.mongodb.com" class="ulink" target="_top">MongoDB</a>
servers.</p>
<div class="position-relative"><h3><a id="_module_specific_configuration_notes_3"></a>Module-specific configuration notes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.4/metricbeat/docs/modules/mongodb.asciidoc">edit</a></div>
<p>When configuring the <code class="literal">hosts</code> option, you must use MongoDB URLs of the following
format:</p>
<pre class="screen">[mongodb://][user:pass@]host[:port][?options]</pre>
<p>The URL can be as simple as:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: mongodb
  hosts: ["localhost"]</pre>
</div>
<p>Or more complex like:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: mongodb
  hosts: ["mongodb://myuser:mypass@localhost:40001", "otherhost:40001"]</pre>
</div>
<p>The username and password can be included in the URL or they can be set using
the respective configuration options. The credentials in the URL take precedence
over the username and password configuration options.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: mongodb
  metricsets: ["status"]
  hosts: ["localhost:27017"]
  username: root
  password: test</pre>
</div>
<p>The default metricsets are <code class="literal">collstats</code>, <code class="literal">dbstats</code> and <code class="literal">status</code>.</p>
<div class="position-relative"><h3><a id="_compatibility_9"></a>Compatibility</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.4/metricbeat/docs/modules/mongodb.asciidoc">edit</a></div>
<p>The MongoDB metricsets were tested with MongoDB 3.4 and 3.0 and are expected to
work with all versions &gt;= 2.8.</p>
<div class="position-relative"><h3><a id="_example_configuration_21"></a>Example configuration</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.4/metricbeat/docs/modules/mongodb.asciidoc">edit</a></div>
<p>The MongoDB module supports the standard configuration options that are described
in <a class="xref" href="configuration-metricbeat.html" title="Specify which modules to run"><em>Specify which modules to run</em></a>. Here is an example configuration:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">metricbeat.modules:
- module: mongodb
  metricsets: ["dbstats", "status"]
  period: 10s
  enabled: true

  # The hosts must be passed as MongoDB URLs in the format:
  # [mongodb://][user:pass@]host[:port].
  # The username and password can also be set using the respective configuration
  # options. The credentials in the URL take precedence over the username and
  # password configuration options.
  hosts: ["localhost:27017"]

  # Optional SSL. By default is off.
  #ssl.enabled: true

  # Mode of verification of server certificate ('none' or 'full')
  #ssl.verification_mode: 'full'

  # List of root certificates for TLS server verifications
  #ssl.certificate_authorities: ["/etc/pki/root/ca.pem"]

  # Certificate for SSL client authentication
  #ssl.certificate: "/etc/pki/client/cert.pem"

  # Client Certificate Key
  #ssl.key: "/etc/pki/client/cert.key"

  # Username to use when connecting to MongoDB. Empty by default.
  #username: user

  # Password to use when connecting to MongoDB. Empty by default.
  #password: pass</pre>
</div>
<p>This module supports TLS connections when using <code class="literal">ssl</code> config field, as described in <a class="xref" href="configuration-ssl.html" title="Specify SSL settings"><em>Specify SSL settings</em></a>.</p>
<div class="position-relative"><h3><a id="_metricsets_22"></a>Metricsets</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/6.4/metricbeat/docs/modules/mongodb.asciidoc">edit</a></div>
<p>The following metricsets are available:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="metricbeat-metricset-mongodb-collstats.html" title="MongoDB collstats metricset">collstats</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-mongodb-dbstats.html" title="MongoDB dbstats metricset">dbstats</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-mongodb-status.html" title="MongoDB status metricset">status</a>
</li>
</ul>
</div>



</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="metricbeat-metricset-memcached-stats.html">« Memcached stats metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-mongodb-collstats.html">MongoDB collstats metricset »</a>
</span>
</div>
</body>
</html>
