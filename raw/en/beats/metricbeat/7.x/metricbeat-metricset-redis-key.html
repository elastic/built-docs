<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Redis key metricset | Metricbeat Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Metricbeat Reference [7.x]"/>
<link rel="up" href="metricbeat-module-redis.html" title="Redis module"/>
<link rel="prev" href="metricbeat-metricset-redis-info.html" title="Redis info metricset"/>
<link rel="next" href="metricbeat-metricset-redis-keyspace.html" title="Redis keyspace metricset"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/7.x"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="metricbeat-modules.html">Modules</a></span>
»
<span class="breadcrumb-link"><a href="metricbeat-module-redis.html">Redis module</a></span>
»
<span class="breadcrumb-node">Redis key metricset</span>
</div>
<div class="navheader">
<span class="prev">
<a href="metricbeat-metricset-redis-info.html">« Redis info metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-redis-keyspace.html">Redis keyspace metricset »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="metricbeat-metricset-redis-key"></a>Redis key metricset<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.x/metricbeat/docs/modules/redis/key.asciidoc">edit</a></h2>
</div></div></div>
<p>The Redis <code class="literal">key</code> metricset collects information about Redis keys.</p>
<p>For each key matching one of the configured patterns, an event is sent to
Elasticsearch with information about this key, what includes the type, its
length when available, and its ttl.</p>
<p>Patterns are configured as a list containing these fields:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">pattern</code> (required): pattern for key names, as accepted by the Redis
<code class="literal">KEYS</code> or <code class="literal">SCAN</code> commands.
</li>
<li class="listitem">
<code class="literal">limit</code> (optional): safeguard when using patterns with wildcards to avoid
collecting too many keys (Default: 0, no limit)
</li>
<li class="listitem">
<code class="literal">keyspace</code> (optional): Identifier of the database to use to look for the keys
(Default: 0)
</li>
</ul>
</div>
<p>For example the following configuration will collect information about all keys
whose name starts with <code class="literal">pipeline-*</code>, with a limit of 20 keys.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">- module: redis
  metricsets: ['key']
  key.patterns:
    - pattern: 'pipeline-*'
      limit: 20</pre>
</div>
<h3><a id="_dashboard_33"></a>Dashboard<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.x/metricbeat/module/redis/key/_meta/docs.asciidoc">edit</a></h3>
<p>The Redis key metricset comes with a predefined dashboard. For example:</p>
<div class="imageblock">
<div class="content">
<img src="./images/metricbeat_redis_key_dashboard.png" alt="metricbeat redis key dashboard">
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fields_187"></a>Fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/7.x/metricbeat/docs/modules/redis/key.asciidoc">edit</a></h3>
</div></div></div>
<p>For a description of each field in the metricset, see the
<a class="xref" href="exported-fields-redis.html" title="Redis fields">exported fields</a> section.</p>
<p>Here is an example document generated by this metricset:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "@timestamp": "2017-10-12T08:05:34.853Z",
    "agent": {
        "hostname": "host.example.com",
        "name": "host.example.com"
    },
    "event": {
        "dataset": "redis.key",
        "duration": 115000,
        "module": "redis"
    },
    "metricset": {
        "name": "key"
    },
    "redis": {
        "key": {
            "expire": {
                "ttl": 360
            },
            "id": "0:foo",
            "length": 3,
            "name": "foo",
            "type": "string"
        },
        "keyspace": {
            "id": "db0"
        }
    },
    "service": {
        "address": "127.0.0.1:6379",
        "type": "redis"
    }
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="metricbeat-metricset-redis-info.html">« Redis info metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-redis-keyspace.html">Redis keyspace metricset »</a>
</span>
</div>
</div>
</body>
</html>
