<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>vSphere module | Metricbeat Reference [8.15] | Elastic</title>
<meta class="elastic" name="content" content="vSphere module | Metricbeat Reference [8.15]">

<link rel="home" href="index.html" title="Metricbeat Reference [8.15]"/>
<link rel="up" href="metricbeat-modules.html" title="Modules"/>
<link rel="prev" href="metricbeat-metricset-uwsgi-status.html" title="uWSGI status metricset"/>
<link rel="next" href="metricbeat-metricset-vsphere-cluster.html" title="vSphere cluster metricset"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Metricbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/8.15"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="metricbeat-metricset-uwsgi-status.html">« uWSGI status metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-vsphere-cluster.html">vSphere cluster metricset »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="metricbeat-modules.html">Modules</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>vSphere module</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/metricbeat/module/vsphere/_meta/docs.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="metricbeat-module-vsphere"></a>vSphere module</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/metricbeat/module/vsphere/_meta/docs.asciidoc">edit</a></div>
</div></div></div>
<p>The vSphere module uses the <a href="https://github.com/vmware/govmomi" class="ulink" target="_top">Govmomi</a> library to collect metrics from any VMware SDK URL (ESXi/VCenter).</p>
<p>This module has been tested against ESXi and vCenter versions 5.5, 6.0, 6.5, and 7.0.3.</p>
<p>By default, the vSphere module enables the following metricsets:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
cluster
</li>
<li class="listitem">
datastore
</li>
<li class="listitem">
datastorecluster
</li>
<li class="listitem">
host
</li>
<li class="listitem">
network
</li>
<li class="listitem">
resourcepool
</li>
<li class="listitem">
virtualmachine
</li>
</ol>
</div>
<div class="position-relative"><h3><a id="_supported_periods"></a>Supported Periods:</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/metricbeat/module/vsphere/_meta/docs.asciidoc">edit</a></div>
<p>The Datastore and Host metricsets support performance data collection using the vSphere performance API. Given that the performance API imposes usage restrictions based on data collection intervals, users should configure the period optimally to ensure the receipt of real-time data. This configuration can be determined based on the <a href="https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.monitoring.doc/GUID-247646EA-A04B-411A-8DD4-62A3DCFCF49B.html" class="ulink" target="_top">Data Collection Intervals</a> and <a href="https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.monitoring.doc/GUID-25800DE4-68E5-41CC-82D9-8811E27924BC.html" class="ulink" target="_top">Data Collection Levels</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only host and datastore metricsets have limitation of system configured period from vSphere instance. Users can still collect summary metrics if performance metrics are not supported for the configured instance.</p>
</div>
</div>
<div class="position-relative"><h4><a id="_real_time_data_collection_default_interval"></a>Real-time data collection default interval:</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/metricbeat/module/vsphere/_meta/docs.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
20s
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_historical_data_collection_default_intervals"></a>Historical data collection default intervals:</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/metricbeat/module/vsphere/_meta/docs.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
300s
</li>
<li class="listitem">
1800s
</li>
<li class="listitem">
7200s
</li>
<li class="listitem">
86400s
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_example_5"></a>Example:</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/metricbeat/module/vsphere/_meta/docs.asciidoc">edit</a></div>
<p>If you need to configure multiple metricsets with different periods, you can achieve this by setting up multiple vSphere modules with different metricsets as demonstrated below:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: vsphere
  metricsets:
   - cluster
   - datastorecluster
   - network
   - resourcepool
   - virtualmachine
  period: 10s
  hosts: ["https://localhost/sdk"]
  username: "user"
  password: "password"
  insecure: false

- module: vsphere
  metricsets:
   - datastore
   - host
  period: 300s
  hosts: ["https://localhost/sdk"]
  username: "user"
  password: "password"
  insecure: false</pre>
</div>
<div class="position-relative"><h3><a id="_dashboard_46"></a>Dashboard</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/metricbeat/module/vsphere/_meta/docs.asciidoc">edit</a></div>
<p>The vSphere module includes a predefined dashboard. For example:</p>
<div class="imageblock">
<div class="content">
<img src="./images/metricbeat_vsphere_dashboard.png" alt="metricbeat vsphere dashboard">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/metricbeat_vsphere_vm_dashboard.png" alt="metricbeat vsphere vm dashboard">
</div>
</div>
<div class="position-relative"><h3><a id="_example_configuration_63"></a>Example configuration</h3></div>
<p>The vSphere module supports the standard configuration options that are described
in <a class="xref" href="configuration-metricbeat.html" title="Configure modules"><em>Modules</em></a>. Here is an example configuration:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">metricbeat.modules:
- module: vsphere
  enabled: true
  metricsets: ["cluster", "datastore", "datastorecluster", "host", "network", "resourcepool", "virtualmachine"]

  # Real-time data collection – An ESXi Server collects data for each performance counter every 20 seconds by default.
  # Supported Periods:
  # The Datastore and Host metricsets support performance data collection using the vSphere performance API.
  # Since the performance API has usage restrictions based on data collection intervals,
  # users should ensure that the period is configured optimally to receive real-time data.
  # users can still collect summary metrics if performance metrics are not supported for the configured instance.
  # This configuration can be determined based on the Data Collection Intervals and Data Collection Levels.
  # Reference Links:
  # Data Collection Intervals: https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.monitoring.doc/GUID-247646EA-A04B-411A-8DD4-62A3DCFCF49B.html
  # Data Collection Levels: https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.monitoring.doc/GUID-25800DE4-68E5-41CC-82D9-8811E27924BC.html
  period: 20s
  hosts: ["https://localhost/sdk"]

  username: "user"
  password: "password"
  # If insecure is true, don't verify the server's certificate chain
  insecure: false
  # Get custom fields when using virtualmachine metricset. Default false.
  # get_custom_fields: false</pre>
</div>
<div class="position-relative"><h3><a id="_metricsets_71"></a>Metricsets</h3></div>
<p>The following metricsets are available:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="metricbeat-metricset-vsphere-cluster.html" title="vSphere cluster metricset">cluster</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-vsphere-datastore.html" title="vSphere datastore metricset">datastore</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-vsphere-datastorecluster.html" title="vSphere datastorecluster metricset">datastorecluster</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-vsphere-host.html" title="vSphere host metricset">host</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-vsphere-network.html" title="vSphere network metricset">network</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-vsphere-resourcepool.html" title="vSphere resourcepool metricset">resourcepool</a>
</li>
<li class="listitem">
<a class="xref" href="metricbeat-metricset-vsphere-virtualmachine.html" title="vSphere virtualmachine metricset">virtualmachine</a>
</li>
</ul>
</div>







</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="metricbeat-metricset-uwsgi-status.html">« uWSGI status metricset</a>
</span>
<span class="next">
<a href="metricbeat-metricset-vsphere-cluster.html">vSphere cluster metricset »</a>
</span>
</div>
</body>
</html>
