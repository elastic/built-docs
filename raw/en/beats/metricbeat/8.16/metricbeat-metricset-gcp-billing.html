<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Google Cloud Platform billing metricset | Metricbeat Reference [8.16] | Elastic</title>
<meta class="elastic" name="content" content="Google Cloud Platform billing metricset | Metricbeat Reference [8.16]">

<link rel="home" href="index.html" title="Metricbeat Reference [8.16]"/>
<link rel="up" href="metricbeat-module-gcp.html" title="Google Cloud Platform module"/>
<link rel="prev" href="metricbeat-module-gcp.html" title="Google Cloud Platform module"/>
<link rel="next" href="metricbeat-metricset-gcp-carbon.html" title="Google Cloud Platform carbon metricset"/>
<meta class="elastic" name="product_version" content="8.16"/>
<meta class="elastic" name="product_name" content="Metricbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/8.16"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="8.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="metricbeat-module-gcp.html">« Google Cloud Platform module</a>
</span>
<span class="next">
<a href="metricbeat-metricset-gcp-carbon.html">Google Cloud Platform carbon metricset »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [8.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="metricbeat-modules.html">Modules</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="metricbeat-module-gcp.html">Google Cloud Platform module</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Google Cloud Platform billing metricset</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/metricbeat/module/gcp/billing/_meta/docs.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="metricbeat-metricset-gcp-billing"></a>Google Cloud Platform billing metricset</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/metricbeat/module/gcp/billing/_meta/docs.asciidoc">edit</a></div>
</div></div></div>
<p><code class="literal">billing</code> metricset is designed for collecting billing metrics from Google Cloud
BigQuery daily cost detail table. BigQuery is a fully-managed, serverless data
warehouse.
Cloud Billing export to BigQuery enables you to export standard and detailed Google Cloud
billing data (such as usage, cost estimates, and pricing data) automatically
throughout the day to a BigQuery dataset that you specify. Then you can access
your Cloud Billing data from BigQuery for detailed analysis using Metricbeat.
Please see <a href="https://cloud.google.com/billing/docs/how-to/export-data-bigquery" class="ulink" target="_top">export
cloud billing data to BigQuery</a> for more details on how to export billing data.</p>
<p>In BigQuery, Google Cloud daily cost data is categorized into two formats:
standard and detailed. Each format is stored within a designated dataset and
follows a structured schema for precise cost analysis. For a comprehensive
understanding of these formats, consult the <a href="https://cloud.google.com/billing/docs/how-to/export-data-bigquery-tables/standard-usage#standard-usage-cost-data-schema" class="ulink" target="_top">
standard</a> and <a href="https://cloud.google.com/billing/docs/how-to/export-data-bigquery-tables/detailed-usage#detailed-usage-cost-data-schema" class="ulink" target="_top">
detailed</a> data schema documentation.</p>
<p>For standard usage cost data, set the table pattern format to
<code class="literal">gcp_billing_export_v1</code>. This table pattern is set as the default when no other
is specified.</p>
<p>For detailed usage cost data, set the table pattern to <code class="literal">gcp_billing_export_resource_v1</code>.
Detailed tables include the standard fields and additional fields, such as
<code class="literal">effective_price</code>, enabling a more granular view of expenses.</p>
<div class="position-relative"><h3><a id="_metricset_specific_configuration_notes_12"></a>Metricset-specific configuration notes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/metricbeat/module/gcp/billing/_meta/docs.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>dataset_id</strong></span>: (Required) Dataset ID that points to the top-level container which contains
the actual billing tables.
</li>
<li class="listitem">
<span class="strong strong"><strong>table_pattern</strong></span>: (Optional) Daily cost detail billing table name prefix.
Default to <code class="literal">gcp_billing_export_v1</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong>cost_type</strong></span>: (Optional) The type of cost this line item represents: regular,
tax, adjustment, or rounding error. Default to <code class="literal">regular</code>.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_configuration_example_20"></a>Configuration example</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/main/x-pack/metricbeat/module/gcp/billing/_meta/docs.asciidoc">edit</a></div>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- module: gcp
  metricsets:
    - billing
  period: 24h
  project_id: "your project id"
  credentials_file_path: "your JSON credentials file path"
  dataset_id: "dataset id"
  table_pattern: "table pattern"
  cost_type: "regular"</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="_fields_98"></a>Fields</h3></div>
</div></div></div>
<p>For a description of each field in the metricset, see the
<a class="xref" href="exported-fields-gcp.html" title="Google Cloud Platform fields">exported fields</a> section.</p>
<p>Here is an example document generated by this metricset:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
    "@timestamp": "2017-10-12T08:05:34.853Z",
    "cloud.account.id": "01475F-5B1080-1137E7",
    "cloud.project.id": "elastic-bi",
    "cloud.project.name": "elastic-containerlib-prod",
    "cloud.provider": "gcp",
    "event": {
        "dataset": "gcp.billing",
        "duration": 115000,
        "module": "gcp"
    },
    "gcp": {
        "billing": {
            "billing_account_id": "01475F-5B1080-1137E7",
            "cost_type": "regular",
            "invoice_month": "202106",
            "project_id": "containerlib-prod-12763",
            "project_name": "elastic-containerlib-prod",
            "total": 4717.170681,
            "sku_id": "0D56-2F80-52A5",
            "service_id": "6F81-5844-456A",
            "sku_description": "Network Inter Region Ingress from Jakarta to Americas",
            "service_description": "Compute Engine",
            "effective_price": 0.00292353,
            "tags": [
                {
                    "key": "size",
                    "value": "standard"
                }
            ]
        }
    },
    "metricset": {
        "name": "billing",
        "period": 10000
    },
    "service": {
        "type": "gcp"
    }
}</pre>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="metricbeat-module-gcp.html">« Google Cloud Platform module</a>
</span>
<span class="next">
<a href="metricbeat-metricset-gcp-carbon.html">Google Cloud Platform carbon metricset »</a>
</span>
</div>
</body>
</html>
