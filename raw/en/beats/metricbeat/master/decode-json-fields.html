<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Decode JSON fields | Metricbeat Reference [master] | Elastic</title>
<meta class="elastic" name="content" content="Decode JSON fields | Metricbeat Reference [master]">

<link rel="home" href="index.html" title="Metricbeat Reference [master]"/>
<link rel="up" href="filtering-and-enhancing-data.html" title="Filter and enhance data with processors"/>
<link rel="prev" href="decode-duration.html" title="Decode duration"/>
<link rel="next" href="decode-xml.html" title="Decode XML"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Metricbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Metricbeat/Reference/master"/>
<meta name="DC.subject" content="Metricbeat"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuring-howto-metricbeat.html">Configure Metricbeat</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="filtering-and-enhancing-data.html">Filter and enhance data with processors</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="decode-duration.html">« Decode duration</a>
</span>
<span class="next">
<a href="decode-xml.html">Decode XML »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="decode-json-fields"></a>Decode JSON fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/main/libbeat/processors/actions/docs/decode_json_fields.asciidoc">edit</a></h2>
</div></div></div>

<p>The <code class="literal">decode_json_fields</code> processor decodes fields containing JSON strings and
replaces the strings with valid JSON objects.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">processors:
  - decode_json_fields:
      fields: ["field1", "field2", ...]
      process_array: false
      max_depth: 1
      target: ""
      overwrite_keys: false
      add_error_key: true</pre>
</div>
<p>The <code class="literal">decode_json_fields</code> processor has the following configuration settings:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">fields</code>
</span>
</dt>
<dd>
The fields containing JSON strings to decode.
</dd>
<dt>
<span class="term">
<code class="literal">process_array</code>
</span>
</dt>
<dd>
(Optional) A Boolean value that specifies whether to process
arrays. The default is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">max_depth</code>
</span>
</dt>
<dd>
(Optional) The maximum parsing depth. A value of <code class="literal">1</code>  will decode the
JSON objects in fields indicated in <code class="literal">fields</code>, a value of <code class="literal">2</code> will also decode the
objects embedded in the fields of these parsed documents. The default is <code class="literal">1</code>.
</dd>
<dt>
<span class="term">
<code class="literal">target</code>
</span>
</dt>
<dd>
(Optional) The field under which the decoded JSON will be written. By
default, the decoded JSON object replaces the string field from which it was
read. To merge the decoded JSON fields into the root of the event, specify
<code class="literal">target</code> with an empty string (<code class="literal">target: ""</code>). Note that the <code class="literal">null</code> value (<code class="literal">target:</code>)
is treated as if the field was not set.
</dd>
<dt>
<span class="term">
<code class="literal">overwrite_keys</code>
</span>
</dt>
<dd>
(Optional) A Boolean value that specifies whether existing keys in the event are overwritten by keys from the decoded JSON object. The
default value is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">expand_keys</code>
</span>
</dt>
<dd>
(Optional) A Boolean value that specifies whether keys in the decoded JSON
should be recursively de-dotted and expanded into a hierarchical object structure.
For example, <code class="literal">{"a.b.c": 123}</code> would be expanded into <code class="literal">{"a":{"b":{"c":123}}}</code>.
</dd>
<dt>
<span class="term">
<code class="literal">add_error_key</code>
</span>
</dt>
<dd>
(Optional) If set to <code class="literal">true</code> and an error occurs while decoding JSON keys,
the <code class="literal">error</code> field will become a part of the event with the error message. If set to <code class="literal">false</code>, there will not be any error in the event&#8217;s field. The default value is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">document_id</code>
</span>
</dt>
<dd>
(Optional) JSON key that&#8217;s used as the document ID. If configured,
the field will be removed from the original JSON document and stored in
<code class="literal">@metadata._id</code>
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="decode-duration.html">« Decode duration</a>
</span>
<span class="next">
<a href="decode-xml.html">Decode XML »</a>
</span>
</div>
</div>
</body>
</html>
