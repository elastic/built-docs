<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Recording a Trace | Packetbeat Reference [5.4] | Elastic</title>
<meta class="elastic" name="content" content="Recording a Trace | Packetbeat Reference [5.4]">

<link rel="home" href="index.html" title="Packetbeat Reference [5.4]"/>
<link rel="up" href="troubleshooting.html" title="Troubleshooting"/>
<link rel="prev" href="enable-packetbeat-debugging.html" title="Debugging"/>
<link rel="next" href="faq.html" title="Frequently Asked Questions"/>
<meta class="elastic" name="product_version" content="5.4"/>
<meta class="elastic" name="product_name" content="Packetbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Packetbeat/Reference/5.4"/>
<meta name="DC.subject" content="Packetbeat"/>
<meta name="DC.identifier" content="5.4"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<p>
  <strong>WARNING</strong>: Version 5.4 of Packetbeat has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div class="navheader">
<span class="prev">
<a href="enable-packetbeat-debugging.html">« Debugging</a>
</span>
<span class="next">
<a href="faq.html">Frequently Asked Questions »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Packetbeat Reference [5.4]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Recording a Trace</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/packetbeat/docs/troubleshooting.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="recording-trace"></a>Recording a Trace<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/beats/edit/5.4/packetbeat/docs/troubleshooting.asciidoc">edit</a></h2>
</div></div></div>
<p>If you are having an issue, it&#8217;s often useful to record a full network trace
and send it to us. It will help us reproduce the issue, and we can also add it
to our automatic regression tests so that the problem never reoccurs. A trace
of 10-20 seconds is usually enough. To record the trace, you can use the following Packetbeat command:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">packetbeat -e -dump trace.pcap</pre>
</div>
<p>This command executes Packetbeat in normal mode (all processing happens as usual), but
at the same time, it records all packets in libpcap format in the <code class="literal">trace.pcap</code>
file. If there&#8217;s a particular error message you want us to investigate, please
keep the trace running until the error shows up (it will printed on standard
error).</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>PCAP files can be large. Please monitor the disk usage while doing the
dump to make sure you don&#8217;t run out of disk space. Whenever possible, we
recommend recording the trace on a non-production machine.</p>
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="enable-packetbeat-debugging.html">« Debugging</a>
</span>
<span class="next">
<a href="faq.html">Frequently Asked Questions »</a>
</span>
</div>
</body>
</html>
