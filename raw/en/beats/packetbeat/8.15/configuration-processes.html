<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configure which processes to monitor | Packetbeat Reference [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Configure which processes to monitor | Packetbeat Reference [8.15]">

<link rel="home" href="index.html" title="Packetbeat Reference [8.15]"/>
<link rel="up" href="configuring-howto-packetbeat.html" title="Configure Packetbeat"/>
<link rel="prev" href="packetbeat-redis-options.html" title="Capture Redis traffic"/>
<link rel="next" href="configuration-general-options.html" title="Configure general settings"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Packetbeat"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Packetbeat/Reference/8.15"/>
<meta name="DC.subject" content="Packetbeat"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="packetbeat-redis-options.html">« Capture Redis traffic</a>
</span>
<span class="next">
<a href="configuration-general-options.html">Configure general settings »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Packetbeat Reference [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="configuring-howto-packetbeat.html">Configure Packetbeat</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configure which processes to monitor</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/8.15/packetbeat/docs/packetbeat-options.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="configuration-processes"></a>Configure which processes to monitor<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/8.15/packetbeat/docs/packetbeat-options.asciidoc">edit</a></h2>
</div></div></div>

<p>This section of the <code class="literal">packetbeat.yml</code> config file is optional, but configuring
the processes enables Packetbeat to show you not only the servers that the
traffic is flowing between, but also the processes. Packetbeat can even show you
the traffic between two processes running on the same host, which is
particularly useful when you have many services running on the same server. By
default, process enrichment is disabled.</p>
<p>When Packetbeat starts, and then periodically afterwards, it scans the process
table for processes that match the configuration file. For each of these
processes, it monitors which file descriptors it has opened. When a new packet
is captured, it reads the list of active TCP and UDP connections and matches the
corresponding one with the list of file descriptors.</p>
<p>All this information is available via system interfaces: The <code class="literal">/proc</code> file system
in Linux and the IP Helper API (<code class="literal">iphlpapi.dll</code>) on Windows, so Packetbeat
doesn&#8217;t need a kernel module.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Process monitoring is currently only supported on
      Linux and Windows systems. Packetbeat automatically disables
      process monitoring when it detects other operating systems.</p>
</div>
</div>
<p>Example configuration:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">packetbeat.procs.enabled: true</pre>
</div>
<p>When the process monitor is enabled, it will enrich all the events whose source
or destination is a local process. The <code class="literal">source.process</code> and/or
<code class="literal">destination.process</code> fields will be added to an event, when the server side or
client side of the connection belong to a local process, respectively.</p>
<h3><a id="_configuration_options_14"></a>Configuration options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/8.15/packetbeat/docs/packetbeat-options.asciidoc">edit</a></h3>
<p>You can specify the following process monitoring options in the <code class="literal">monitored</code>
section of the <code class="literal">packetbeat.yml</code> config file to customize the name of process:</p>
<h4><a id="_process"></a><code class="literal">process</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/8.15/packetbeat/docs/packetbeat-options.asciidoc">edit</a></h4>
<p>The name of the process as it will appear in the published transactions. The name
doesn&#8217;t have to match the name of the executable, so feel free to choose something
more descriptive (for example,  "myapp" instead of "gunicorn").</p>
<h4><a id="_cmdline_grep"></a><code class="literal">cmdline_grep</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/8.15/packetbeat/docs/packetbeat-options.asciidoc">edit</a></h4>
<p>The name used to identify the process at run time. When Packetbeat starts, and then
periodically afterwards, it scans the process table for
processes that match the values specified for this option. The match is done against the
process' command line as read from <code class="literal">/proc/&lt;pid&gt;/cmdline</code>.</p>
<h4><a id="shutdown-timeout"></a><code class="literal">shutdown_timeout</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/8.15/packetbeat/docs/packetbeat-options.asciidoc">edit</a></h4>
<p>How long Packetbeat waits on shutdown. By default, this option is disabled. Packetbeat
will wait for <code class="literal">shutdown_timeout</code> and then close. It will not track if all events were sent
previously.</p>
<p>Example configuration:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">packetbeat.shutdown_timeout: 5s</pre>
</div>
<h4><a id="_overwrite_pipelines"></a><code class="literal">overwrite_pipelines</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/8.15/packetbeat/docs/packetbeat-options.asciidoc">edit</a></h4>
<p>By default Ingest pipelines are not updated if a pipeline with the same ID
already exists. If this option is enabled Packetbeat overwrites pipelines
every time a new Elasticsearch connection is established.</p>
<p>The default value is <code class="literal">false</code>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="packetbeat-redis-options.html">« Capture Redis traffic</a>
</span>
<span class="next">
<a href="configuration-general-options.html">Configure general settings »</a>
</span>
</div>
</body>
</html>
