<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Enable more stack features: Add Kibana to a deployment
        | Elastic Cloud Enterprise Reference [2.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.1]" /><link rel="up" href="ece-restful-api-examples.html" title="API examples" /><link rel="prev" href="ece-restful-api-examples-upgrade.html" title="Applying a new deployment configuration: Upgrade" /><link rel="next" href="ece-restful-api-examples-generate-roles-token.html" title="Dipping a toe into platform automation: Generate a roles token" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.1" /><meta name="DC.subject" content="ECE" /><meta name="DC.identifier" content="2.1" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.1]
    </a></span> » <span class="breadcrumb-link"><a href="ece-restful-api.html">RESTful API</a></span> » <span class="breadcrumb-link"><a href="ece-restful-api-examples.html">API examples</a></span> » <span class="breadcrumb-node">Enable more stack features: Add Kibana to a deployment</span></div><div class="navheader"><span class="prev"><a href="ece-restful-api-examples-upgrade.html">
              « 
              Applying a new deployment configuration: Upgrade</a>
           
        </span><span class="next">
           
          <a href="ece-restful-api-examples-generate-roles-token.html">Dipping a toe into platform automation: Generate a roles token
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ece-restful-api-examples-add-kibana"></a>Enable more stack features: Add Kibana to a deployment</h2></div></div></div><p>The RESTful API is also useful for adding Elastic Stack features to existing deployments. In this example, we’ll show you how to create a new Kibana instance and associate it with an existing Elasticsearch cluster that is part of a deployment.</p><h4><a id="ece-before_you_begin_23"></a>Before you begin</h4><p>This example requires a deployment with an Elasticsearch cluster to work with that is not being used for anything important. If you don’t already have one, you can follow <a class="link" href="ece-restful-api-examples-create-deployment.html" title="Create a first deployment: Just an Elasticsearch cluster">our <code class="literal">My First Deployment</code> example</a> to create one.</p><h4><a id="ece-steps_9"></a>Steps</h4><p>To add a Kibana instance to a deployment:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Create a JSON file with a basic Kibana configuration, here <code class="literal">add-kibana.json</code>.
</p><p class="simpara">There are different options you can specify, but the most important one is that you need to include an Elasticsearch cluster ID that the Kibana instance will be associated with and a Kibana instance configuration that tells ECE how to create the new Kibana instance.</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">{
 "elasticsearch_cluster_id": "$ELASTICSEARCH_CLUSTER_ID<a id="CO34-1"></a><i class="conum" data-value="1"></i>",
  "plan": {
   "kibana": {},
   "cluster_topology": [
    {
      "instance_configuration_id": "$KIBANA_INSTANCE_CONFIGURATION_ID<a id="CO34-2"></a><i class="conum" data-value="2"></i>",
      "zone_count": 1,
      "size": {
        "resource": "memory",
        "value": 1024
      }
    }
   ]
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The Elasticsearch cluster ID as shown in the Cloud UI or obtained via the API.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
A Kibana instance configuration ID. On a default ECE installation, you can use <code class="literal">kibana</code>.
</p></td></tr></table></div></li><li class="listitem"><p class="simpara">
Issue a POST request to create the new Kibana instance, which returns a new Kibana ID in the response:
</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">curl -k -X POST -u $USER<a id="CO35-1"></a><i class="conum" data-value="1"></i>:$PASSWORD<a id="CO35-2"></a><i class="conum" data-value="2"></i> https://$COORDINATOR_HOST<a id="CO35-3"></a><i class="conum" data-value="3"></i>:12443/api/v1/clusters/kibana -H 'content-type: application/json' -d @add-kibana.json
{
  "kibana_cluster_id": "8cffc14c26cb4abe92448603dfc01485"
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO35-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
A user with sufficient privileges, such as the <code class="literal">admin</code> user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO35-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The password for the user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO35-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
A host that you installed Elastic Cloud Enterprise on that holds the coordinator role
</p></td></tr></table></div></li></ol></div><p>After the configuration change is complete, your deployment now has a Kibana instance associated with it. If you switch back to the Cloud UI, you can open Kibana to test that it works as expected.</p></div><div class="navfooter"><span class="prev"><a href="ece-restful-api-examples-upgrade.html">
              « 
              Applying a new deployment configuration: Upgrade</a>
           
        </span><span class="next">
           
          <a href="ece-restful-api-examples-generate-roles-token.html">Dipping a toe into platform automation: Generate a roles token
               »
            </a></span></div></body></html>
