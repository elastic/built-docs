<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>elastic-cloud-enterprise.sh set-logging-and-metrics-policy | Elastic Cloud Enterprise Reference [2.2] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.2]"/>
<link rel="up" href="ece-script-reference.html" title="Script reference"/>
<link rel="prev" href="ece-installation-script-add-stacks.html" title="elastic-cloud-enterprise.sh add-stack-version"/>
<link rel="next" href="ece-release-notes.html" title="Release notes"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.2"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="2.2"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [2.2]</a></span>
»
<span class="breadcrumb-link"><a href="ece-script-reference.html">Script reference</a></span>
»
<span class="breadcrumb-node"><code class="literal">elastic-cloud-enterprise.sh set-logging-and-metrics-policy</code></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-installation-script-add-stacks.html">« <code class="literal">elastic-cloud-enterprise.sh add-stack-version</code></a>
</span>
<span class="next">
<a href="ece-release-notes.html">Release notes »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-installation-script-set-logging-and-metrics-policy"></a><code class="literal">elastic-cloud-enterprise.sh set-logging-and-metrics-policy</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.2/docs/cloud-enterprise/ce-script-reference.asciidoc">edit</a></h2>
</div></div></div>
<p><span class="strong strong"><strong>NAME</strong></span></p>
<p>bash elastic-cloud-enterprise.sh set-logging-and-metrics-policy&#8201;&#8212;&#8201;Set the retention period for logging and metrics indices</p>
<p><span class="strong strong"><strong>SYNOPSIS</strong></span></p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bash elastic-cloud-enterprise.sh set-logging-and-metrics-policy
[--host-docker-host "PATH_NAME/docker.sock"] [--print] [--pattern PATTERN]
[--days DAYS] [--secrets PATH_TO_SECRETS_FILE]
[--host-storage-path PATH_NAME]
[[--]help]</pre>
</div>
<p><span class="strong strong"><strong>REQUIRED PRIVILEGES</strong></span></p>
<p>To run this script, a user must be part of the <code class="literal">docker</code> group. The host that you run this script on must be the first host that you installed Elastic Cloud Enterprise on or a host that holds the director role.</p>
<p><span class="strong strong"><strong>DESCRIPTION</strong></span></p>
<p>Set the retention period for the logging and metrics indices that allow you to monitor your Elastic Cloud Enterprise installation.</p>
<p><span class="strong strong"><strong>PARAMETERS</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
--host-docker-host <code class="literal">/PATH_NAME/docker.sock</code>
</span>
</dt>
<dd>
Specifies the location of the Docker socket used to communicate with the Docker daemon. Defaults to /var/run/docker.sock.
</dd>
<dt>
<span class="term">
--print
</span>
</dt>
<dd>
Prints the policy that is currently in effect. Cannot be specified together with --pattern and --days.
</dd>
<dt>
<span class="term">
--pattern <code class="literal">PATTERN</code>
</span>
</dt>
<dd>
Specifies the index pattern for which a new retention period will be set, such as <code class="literal">cluster-logs-*</code>. If specified, --days must also be specified.
</dd>
<dt>
<span class="term">
--days <code class="literal">DAYS</code>
</span>
</dt>
<dd>
Specifies the number of days that indices matching the given pattern are kept. Defaults to one day for patterns that match metrics indices and seven days for patterns that match logging indices. Specifying <code class="literal">0</code> or <code class="literal">-1</code> disables index curation and results in indices being retained indefinitely. If specified, --pattern must also be specified.
</dd>
<dt>
<span class="term">
--secrets <code class="literal">PATH_TO_SECRETS_FILE</code>
</span>
</dt>
<dd>
Specifies a path to a file with secrets. If not specified, attempts to use <code class="literal">HOST_STORAGE_PATH/bootstrap-state/bootstrap-secrets.json</code>, where <code class="literal">HOST_STORAGE_PATH</code> is the host storage path used by the Elastic Cloud Enterprise installation.
</dd>
<dt>
<span class="term">
--host-storage-path <code class="literal">PATH_NAME</code>
</span>
</dt>
<dd>
Specifies the host storage path used by the Elastic Cloud Enterprise installation. Defaults to <code class="literal">/mnt/data/elastic</code>. Used for determining the default locations of the secrets file and log files.
</dd>
</dl>
</div>
<h2><a id="ece_example_249"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.2/docs/cloud-enterprise/ce-script-reference.asciidoc">edit</a></h2>
<p>Set the retention period for the <code class="literal">cluster-logs-*</code> index pattern to 14 days:</p>
<pre class="literallayout">bash elastic-cloud-enterprise.sh set-logging-and-metrics-policy --pattern cluster-logs-* --days 14</pre>

</div>
<div class="navfooter">
<span class="prev">
<a href="ece-installation-script-add-stacks.html">« <code class="literal">elastic-cloud-enterprise.sh add-stack-version</code></a>
</span>
<span class="next">
<a href="ece-release-notes.html">Release notes »</a>
</span>
</div>
</div>
</body>
</html>
