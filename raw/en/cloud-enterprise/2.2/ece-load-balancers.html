<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Load balancers | Elastic Cloud Enterprise Reference [2.2] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.2]"/>
<link rel="up" href="ece-planning.html" title="Planning your installation"/>
<link rel="prev" href="ece-separation-of-roles.html" title="Separation of roles"/>
<link rel="next" href="ece-wildcard-dns.html" title="Wildcard DNS record"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.2"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="2.2"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [2.2]</a></span>
»
<span class="breadcrumb-link"><a href="ece-planning.html">Planning your installation</a></span>
»
<span class="breadcrumb-node">Load balancers</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-separation-of-roles.html">« Separation of roles</a>
</span>
<span class="next">
<a href="ece-wildcard-dns.html">Wildcard DNS record »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-load-balancers"></a>Load balancers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/2.2/docs/cloud-enterprise/ce-planning.asciidoc">edit</a></h2>
</div></div></div>
<p>Elastic Cloud Enterprise is designed to be used in conjunction with at least one load balancer. A load balancer is not included with Elastic Cloud Enterprise, so you need to provide one yourself and place it in front of the Elastic Cloud Enterprise proxies. The exact number of load balancers depends on the utilization rate for your clusters. In a highly available installation, use at least two load balancers per availability zone in your installation.</p>
<p>Load balancers require that inbound traffic is open on the ports used by Elasticsearch, Kibana, and the transport client. To learn more, see the <a class="xref" href="ece-prereqs-networking.html" title="Networking">networking prerequisites</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Load balancers must be configured to strip inbound <code class="literal">X-Forwarded-For</code> headers and to replace them with the client source IP as seen by the load balancer. This is required to prevent clients from spoofing their IP addresses. Elastic Cloud Enterprise uses <code class="literal">X-Forwarder-For</code> for logging client IP addresses and, if you have implemented IP filtering, for traffic management.</p>
</div>
</div>
<p>When setting up your load balancer:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use <em>HTTP mode</em> for ports 9200/9243 (HTTP traffic to clusters) and also for ports 12400/12443 (adminconsole traffic).
</li>
<li class="listitem">
Use <em>TCP mode</em> for ports 9300/9343 (transport client traffic to clusters) and the load balancer should enable the proxy protocol support.
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Be sure that all load balancers or proxies sending HTTP traffic to deployments hosted on Elastic Cloud Enterprise are sending HTTP/1.1 traffic.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ece-separation-of-roles.html">« Separation of roles</a>
</span>
<span class="next">
<a href="ece-wildcard-dns.html">Wildcard DNS record »</a>
</span>
</div>
</div>
</body>
</html>
