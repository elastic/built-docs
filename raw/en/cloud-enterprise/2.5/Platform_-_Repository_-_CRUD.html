<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Platform - Repository - CRUD | Elastic Cloud Enterprise Reference [2.5] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.5]"/>
<link rel="up" href="ece-api-reference.html" title="API reference"/>
<link rel="prev" href="Platform_-_License.html" title="Platform - License"/>
<link rel="next" href="Platform_-_Runners.html" title="Platform - Runners"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.5"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="2.5"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [2.5]</a></span>
»
<span class="breadcrumb-link"><a href="ece-restful-api.html">RESTful API</a></span>
»
<span class="breadcrumb-link"><a href="ece-api-reference.html">API reference</a></span>
»
<span class="breadcrumb-node">Platform - Repository - CRUD</span>
</div>
<div class="navheader">
<span class="prev">
<a href="Platform_-_License.html">« Platform - License</a>
</span>
<span class="next">
<a href="Platform_-_Runners.html">Platform - Runners »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="Platform_-_Repository_-_CRUD"></a>Platform - Repository - CRUD</h2>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="Platform_-_Repository_-_CRUD.html#get-snapshot-repositories" title="Get snapshot repositories">Get snapshot repositories</a>
</li>
<li class="listitem">
<a class="xref" href="Platform_-_Repository_-_CRUD.html#delete-snapshot-repository" title="Delete snapshot repository">Delete snapshot repository</a>
</li>
<li class="listitem">
<a class="xref" href="Platform_-_Repository_-_CRUD.html#get-snapshot-repository" title="Get snapshot repository">Get snapshot repository</a>
</li>
<li class="listitem">
<a class="xref" href="Platform_-_Repository_-_CRUD.html#set-snapshot-repository" title="Set snapshot repository">Set snapshot repository</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-snapshot-repositories"></a>Get snapshot repositories</h3>
</div></div></div>
<p>Retrieves a list of available snapshot repository configurations. To access the configuration contents, you must have privileged permissions.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_265"></a>Request</h4>
</div></div></div>
<p><code class="literal">GET /api/v1/platform/configuration/snapshots/repositories</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_responses_265"></a>Responses</h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#RepositoryConfigs" title="RepositoryConfigs"><code class="literal">RepositoryConfigs</code></a>) List of snapshot repository configs</p>
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_example_265"></a>Request example</h4>
</div></div></div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">curl -XGET https://{{hostname}}/api/v1/platform/configuration/snapshots/repositories \
-H "Authorization: ApiKey $ECE_API_KEY"</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-snapshot-repository"></a>Delete snapshot repository</h3>
</div></div></div>
<p>Deletes the snapshot repository configuration.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_266"></a>Request</h4>
</div></div></div>
<p><code class="literal">DELETE /api/v1/platform/configuration/snapshots/repositories/{repository_name}</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_path_parameters_206"></a>Path parameters</h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Required</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">repository_name</code></p></td>
<td align="left" valign="top"><p><code class="literal">string</code></p></td>
<td align="left" valign="top"><p>Y</p></td>
<td align="left" valign="top"><p>The name of the snapshot repository configuration.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_query_parameters_120"></a>Query parameters</h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Required</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">cleanup_deployments</code></p></td>
<td align="left" valign="top"><p><code class="literal">boolean</code>; default: <code class="literal">false</code></p></td>
<td align="left" valign="top"><p>N</p></td>
<td align="left" valign="top"><p>Removes references to this snapshot repository configuration and disables snapshots on the clusters that were referencing this configuration. If a request is made to delete a repository configuration that has already been deleted and this parameter is set to true and clusters still reference the configuration, then the request will have the side effects of removing references and disabling snapshots for clusters that reference the previously deleted configuration.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_responses_266"></a>Responses</h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#EmptyResponse" title="EmptyResponse"><code class="literal">EmptyResponse</code></a>) successful operation</p>
</dd>
<dt>
<span class="term">
<code class="literal">202</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#EmptyResponse" title="EmptyResponse"><code class="literal">EmptyResponse</code></a>) Delete snapshot repository config</p>
</dd>
<dt>
<span class="term">
<code class="literal">449</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) elevated permissions are required. (code: &#39;&#34;root.unauthorized.rbac.elevated_permissions_required&#34;&#39;)</p>
</dd>
<dt>
<span class="term">
<code class="literal">500</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) Failed to delete references and disable snapshots in one or more referencing clusters.</p>
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_example_266"></a>Request example</h4>
</div></div></div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">curl -XDELETE https://{{hostname}}/api/v1/platform/configuration/snapshots/repositories/{repository_name} \
-H "Authorization: ApiKey $ECE_API_KEY"</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-snapshot-repository"></a>Get snapshot repository</h3>
</div></div></div>
<p>Retrieves the snapshot repository configuration. To access the configuration contents, you must have privileged permissions.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_267"></a>Request</h4>
</div></div></div>
<p><code class="literal">GET /api/v1/platform/configuration/snapshots/repositories/{repository_name}</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_path_parameters_207"></a>Path parameters</h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Required</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">repository_name</code></p></td>
<td align="left" valign="top"><p><code class="literal">string</code></p></td>
<td align="left" valign="top"><p>Y</p></td>
<td align="left" valign="top"><p>The name of the snapshot repository configuration.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_responses_267"></a>Responses</h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#RepositoryConfig" title="RepositoryConfig"><code class="literal">RepositoryConfig</code></a>) Retrieve snapshot repository config</p>
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_example_267"></a>Request example</h4>
</div></div></div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">curl -XGET https://{{hostname}}/api/v1/platform/configuration/snapshots/repositories/{repository_name} \
-H "Authorization: ApiKey $ECE_API_KEY"</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="set-snapshot-repository"></a>Set snapshot repository</h3>
</div></div></div>
<p>Creates or updates the snapshot repository configuration.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_268"></a>Request</h4>
</div></div></div>
<p><code class="literal">PUT /api/v1/platform/configuration/snapshots/repositories/{repository_name}</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_path_parameters_208"></a>Path parameters</h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Required</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">repository_name</code></p></td>
<td align="left" valign="top"><p><code class="literal">string</code></p></td>
<td align="left" valign="top"><p>Y</p></td>
<td align="left" valign="top"><p>The name of the snapshot repository configuration.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_query_parameters_121"></a>Query parameters</h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Required</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">version</code></p></td>
<td align="left" valign="top"><p><code class="literal">integer</code></p></td>
<td align="left" valign="top"><p>N</p></td>
<td align="left" valign="top"><p>Checks for conflicts against the metadata version, then returns the value in the <code class="literal">x-cloud-resource-version</code> header.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_body_83"></a>Request body</h4>
</div></div></div>
<p>(<a class="xref" href="definitions.html#SnapshotRepositoryConfiguration" title="SnapshotRepositoryConfiguration"><code class="literal">SnapshotRepositoryConfiguration</code></a>) (required) The Elasticsearch snapshot repository configuration</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_responses_268"></a>Responses</h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#RepositoryConfig" title="RepositoryConfig"><code class="literal">RepositoryConfig</code></a>) New snapshot repository config</p>
</dd>
<dt>
<span class="term">
<code class="literal">449</code>
</span>
</dt>
<dd>
<p>(<a class="xref" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) elevated permissions are required. (code: &#39;&#34;root.unauthorized.rbac.elevated_permissions_required&#34;&#39;)</p>
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="ece_request_example_268"></a>Request example</h4>
</div></div></div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">curl -XPUT https://{{hostname}}/api/v1/platform/configuration/snapshots/repositories/{repository_name} \
-H "Authorization: ApiKey $ECE_API_KEY" \
-H 'Content-Type: application/json' \
-d '
{
   "settings" : {},
   "type" : "string"
}
'</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="Platform_-_License.html">« Platform - License</a>
</span>
<span class="next">
<a href="Platform_-_Runners.html">Platform - Runners »</a>
</span>
</div>
</div>
</body>
</html>
