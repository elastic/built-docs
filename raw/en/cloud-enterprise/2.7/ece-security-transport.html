<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configure the Java transport client (deprecated) | Elastic Cloud Enterprise Reference [2.7] | Elastic</title>
<meta class="elastic" name="content" content="Configure the Java transport client (deprecated) | Elastic Cloud Enterprise Reference [2.7]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.7]"/>
<link rel="up" href="ece-stack-getting-started.html" title="Getting started with deployments"/>
<link rel="prev" href="ece-working-with-elasticsearch.html" title="Work with Elasticsearch"/>
<link rel="next" href="ece-getting-started-next-steps.html" title="Next steps"/>
<meta class="elastic" name="product_version" content="2.7"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.7"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="2.7"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<p>
  <strong>It is time to say goodbye</strong>: This version of Elastic Cloud Enterprise 
  has reached <a href="https://www.elastic.co/support/eol">end-of-life (EOL)</a>
  and is no longer supported. 
</p>  
<p>
  The documentation for this version is no longer being maintained. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-working-with-elasticsearch.html">« Work with Elasticsearch</a>
</span>
<span class="next">
<a href="ece-getting-started-next-steps.html">Next steps »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [2.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-stack-getting-started.html">Getting started with deployments</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configure the Java transport client (deprecated)</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-working-with-transport-client.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ece-security-transport"></a>Configure the Java transport client (deprecated)</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-working-with-transport-client.asciidoc">edit</a></div>
</div></div></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Java transport client is deprecated and might not be available in the future.</p>
</div>
</div>
<p>You can connect to a deployment secured with the X-Pack security features or Shield by using the transport client. In addition to the standard transport client configuration, you&#8217;ll need to ensure two key points for Elastic Cloud Enterprise deployments:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The X-Found-Cluster header must be included, indicating which cluster to route the connections to.
</li>
<li class="listitem">
The connecting user must have the <code class="literal">transport_client</code> role as well as the <code class="literal">monitoring</code> cluster privilege.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="ece_before_you_begin_13"></a>Before you begin</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-working-with-transport-client.asciidoc">edit</a></div>
<p>Some limitations apply when you use the transport client. To learn more, see <a class="xref" href="ece-limitations.html#ece-restrictions-transport-client" title="Transport client">Transport client (Restrictions and known problems)</a>.</p>
<div class="position-relative"><h3><a id="ece_example_transport_client_configuration"></a>Example: Transport client configuration</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-47/docs/shared/ec-ce-working-with-transport-client.asciidoc">edit</a></div>
<p>Here is an example of how to create a transport client to connect to Elastic Cloud Enterprise:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">// Build the settings for our client.
String clusterId = "ac01aa2425e4a5bafdebf5100af3e9b37401055b"; // Your cluster ID here
String region = "us-east-1"; // Your region here
boolean enableSsl = true;

Settings settings = Settings.settingsBuilder()
    .put("transport.ping_schedule", "5s")
    //.put("transport.sniff", false) // Disabled by default and *must* be disabled.
    .put("cluster.name", clusterId)
    .put("action.bulk.compress", false)
    .put("shield.transport.ssl", enableSsl)
    .put("request.headers.X-Found-Cluster", clusterId)
    .put("shield.user", "username:password") // your shield username and password
    .build();

String hostname = clusterId + "." + region + ".aws.found.io";
// Instantiate a TransportClient and add the cluster to the list of addresses to connect to.
// Only port 9343 (SSL-encrypted) is currently supported.
Client client = TransportClient.builder()
        .addPlugin(ShieldPlugin.class)
        .settings(settings)
        .build()
        .addTransportAddress(new InetSocketTransportAddress(InetAddress.getByName(hostname), 9343));</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The example is for an ES 2.1 cluster. See GitHub for  <a href="https://github.com/elastic/found-shield-example" class="ulink" target="_top">examples that work with other versions</a>.</p>
</div>
</div>
<p>Some additional configuration steps might be required, such as adding the Shield JAR to your classpath. To learn more, see <a href="/guide/en/shield/2.4/_using_elasticsearch_java_clients_with_shield.html" class="ulink" target="_top">Configuring the Transport Client to work with Shield</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Transport client support for Elasticsearch 6.x was added in version 6.2.4 and later ported back to make it available to newly created Elasticsearch 6.1 and 6.0 clusters. If you have an existing version 6.0 or 6.1 cluster without transport client support, you can use the transport client by upgrading your cluster to version 6.2.4 first.</p>
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ece-working-with-elasticsearch.html">« Work with Elasticsearch</a>
</span>
<span class="next">
<a href="ece-getting-started-next-steps.html">Next steps »</a>
</span>
</div>
</body>
</html>
