<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Use the emergency roles token | Elastic Cloud Enterprise Reference [3.1] | Elastic</title>
<meta class="elastic" name="content" content="Use the emergency roles token | Elastic Cloud Enterprise Reference [3.1]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.1]"/>
<link rel="up" href="ece-troubleshooting.html" title="Troubleshooting"/>
<link rel="prev" href="ece-issues.html" title="Common issues"/>
<link rel="next" href="ece-uninstall.html" title="Remove Elastic Cloud Enterprise"/>
<meta class="elastic" name="product_version" content="3.1"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.1"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.1"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.1]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-troubleshooting.html">Troubleshooting</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-issues.html">« Common issues</a>
</span>
<span class="next">
<a href="ece-uninstall.html">Remove Elastic Cloud Enterprise »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-troubleshooting-emergency"></a>Use the emergency roles token<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-70/docs/cloud-enterprise/ce-troubleshooting.asciidoc">edit</a></h2>
</div></div></div>
<p>During installation, an emergency token gets generated that enables you to install Elastic Cloud Enterprise on additional hosts with all roles already assigned, except the allocator role. The emergency token can save your installation if all coordinators fail or are removed and you can no longer use the Cloud UI or the RESTful API. As part of the installation instructions, we ask you to keep this token safe.</p>
<p>To use the emergency token:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p><a class="xref" href="ece-installing-additional.html" title="Install ECE on additional hosts">Install Elastic Cloud Enterprise on an additional host</a> and specify the emergency token along with the original coordinator host. For example:</p>
<pre class="literallayout">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host 192.168.50.10 --roles-token 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIyZGVlYjlkZS01MDkzLTQxNGItYmI5NS0zNmJhZTQxMWI0YzgiLCJyb2xlcyI6WyJjb29yZGluYXRvciIsInByb3h5IiwiZGlyZWN0b3IiXSwiaXNzIjoiY3VycmVudCIsInBlcnNpc3RlbnQiOnRydWV9.5tIVQxEluSjtJ7qiwE8OWzy5O4l1GJ0urTFs_l1x5bU'</pre>

</li>
<li class="listitem">
<a class="xref" href="ece-login.html" title="Log into the Cloud UI">Log into the Cloud UI</a> on the newly created coordinator. The URL you use is the IP address of the host that you installed Elastic Cloud Enterprise on in Step 1 (<code class="literal">http://10.142.0.4:12400</code>, for example).
</li>
<li class="listitem">
Verify that the Cloud UI works as expected.
</li>
<li class="listitem">
<p>Optional: Prevent a recurrence of the issue by enabling high availability for the administration console:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Repeat Step 1 to create two additional coordinators in two additional availability zones. <a class="xref" href="ece-installation-script.html#ece-installation-script-examples" title="Examples">Examples of the installation commands</a> you need to run are available.
</li>
<li class="listitem">
<a class="xref" href="ece-change-deployment.html" title="Change your deployment configuration">Change the configuration for the <code class="literal">admin-console-elasticsearch</code> and <code class="literal">logging-and-metrics</code> deployments</a> to use three availability zones and resize the nodes to use at least 4 GB of RAM. This change makes sure that the clusters used by the administration console are highly available and provisioned sufficiently.
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ece-issues.html">« Common issues</a>
</span>
<span class="next">
<a href="ece-uninstall.html">Remove Elastic Cloud Enterprise »</a>
</span>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>
