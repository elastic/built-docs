<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elastic Cloud Enterprise 2.12.0 | Elastic Cloud Enterprise Reference [3.2] | Elastic</title>
<meta class="elastic" name="content" content="Elastic Cloud Enterprise 2.12.0 | Elastic Cloud Enterprise Reference [3.2]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.2]"/>
<link rel="up" href="ece-release-notes.html" title="Release notes"/>
<link rel="prev" href="ece-release-notes-2.12.1.html" title="Elastic Cloud Enterprise 2.12.1"/>
<link rel="next" href="ece_deprecations_5.html" title="Deprecations"/>
<meta class="elastic" name="product_version" content="3.2"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.2"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.2"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.2]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-release-notes.html">Release notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-release-notes-2.12.1.html">« Elastic Cloud Enterprise 2.12.1</a>
</span>
<span class="next">
<a href="ece_deprecations_5.html">Deprecations »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-release-notes-2.12.0"></a>Elastic Cloud Enterprise 2.12.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/releases/2.12.0/index.asciidoc">edit</a></h2>
</div></div></div>
<p>The following changes are included in this release.</p>
<h3><a id="ece_features_5"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/releases/2.12.0/feature.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Allow APM and fleet server for agent.</strong></span> Agent supports APM to allow upgrades from legacy to managed.</p>
<p><span class="strong strong"><strong>Feedback link to the Help menu.</strong></span> Added a <code class="literal">Give feedback</code> link to the Cloud console header in the <span class="strong strong"><strong>Help</strong></span> menu. The link opens a feedback page in a new tab.</p>
<p><span class="strong strong"><strong>Force enroll on container restart.</strong></span> Introduced ephemeral Hosted Agent on container restart.</p>
<p><span class="strong strong"><strong>Migrate to plan level settings, if possible, when editing.</strong></span> When editing a deployment in the UI, user settings are moved from the topology element level to the deployment resource level if it is possible to do so safely.</p>
<p><span class="strong strong"><strong>ECE upgrade to fix 7.14 APM during upgrade to 2.11.</strong></span> As of ECE version 2.11, the the allocator uses different HTTP endpoint for health checks of APM instances. The new endpoint is hosted by Agent process. The previous versions of ECE do not configure the Agent, and so ECE upgrade re-configures all APM of 7.14 and later the way that allocator 2.11 will be able to update the container and start agent.</p>
<p><span class="strong strong"><strong>Enable operator privileges.</strong></span> Enable <a href="/guide/en/elasticsearch/reference/8.8/operator-privileges.html" class="ulink" target="_top">operator privileges</a> for Elasticsearch clusters. This feature limits access to <a href="/guide/en/elasticsearch/reference/8.8/operator-only-functionality.html" class="ulink" target="_top">functionality</a> that should only be used by the operator of the cluster infrastructure.</p>
<h3><a id="ece_enhancements_6"></a>Enhancements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/releases/2.12.0/enhancement.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Validate deployment against template min-version.</strong></span> Additional API validation: Ensure that the stack version used in the deployment is at least the minimum version required by the deployment template.</p>
<p><span class="strong strong"><strong>Improve output of PreInstanceRemovalSafetyChecks.</strong></span> Improved details on activity page when the step <code class="literal">Making sure it is safe to remove instances from the cluster</code> fails.</p>
<p><span class="strong strong"><strong>Validate deployment templates: Check referenced observability deployment and snapshot repository.</strong></span> Added validations when creating and updating deployment templates:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Observability settings: Make sure the referenced deployments for logging and metrics exist.
</li>
<li class="listitem">
Snapshot repository settings: Make sure the referenced snapshot repository name is configured.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Updating docs and adding task manager monitoring config.</strong></span> Adds support and docs for:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">xpack.task_manager.monitored_stats_health_verbose_log.enabled</code> Kibana Task Manager configuration
</li>
<li class="listitem">
<code class="literal">xpack.task_manager.monitored_stats_health_verbose_log.warn_delayed_task_start_in_seconds</code> Kibana Task Manager configuration
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Record boot failures.</strong></span> It is now possible to detect boot failure patterns from the Elasticsearch boot log.</p>
<p><span class="strong strong"><strong>Update default deployment name.</strong></span> Default deployment name is <em>My deployment</em>.</p>
<p><span class="strong strong"><strong>Shorten Azure private link endpoint name.</strong></span> Improves the handling of long Azure Private Link Endpoint names. With this release Azure Private Link traffic filters work regardless of the length of their endpoint names.</p>
<p><span class="strong strong"><strong>Make EnsureStorageResources step conditional.</strong></span> The step <code class="literal">Preparing to store snapshots</code> will run only when needed.</p>
<p><span class="strong strong"><strong>Consider allocator status when terminating.</strong></span> Plans that terminate deployments will no longer stall out during the step <code class="literal">Waiting until instances are terminated</code> if any nodes are on disconnected allocators.</p>
<p><span class="strong strong"><strong>Add support and docs for Manager ephemeral tasks configuration.</strong></span> Adds support and docs for:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">xpack.task_manager.ephemeral_tasks.enabled</code> Kibana Task Manager configuration
</li>
<li class="listitem">
<code class="literal">xpack.task_manager.ephemeral_tasks.request_capacity</code> Kibana Task Manager configuration
</li>
<li class="listitem">
<code class="literal">xpack.alerting.maxEphemeralActionsPerAlert</code> Kibana Alerting configuration
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Rework conditional logic for SuspendSnapshotting.</strong></span> The step <code class="literal">Disabling snapshots</code> will no longer run during plans that aren’t stopping nodes. If it fails, the plan is still allowed to continue in some cases.</p>
<p><span class="strong strong"><strong>On-demand heap dump capture UI.</strong></span> Adds on-demand heap dump capture capabilities. Heap dumps can now be captured on-demand from Elasticsearch instances and downloaded from the Cloud UI.</p>
<p><span class="strong strong"><strong>Remove CPU overcommit.</strong></span> ECE no longer supports overriding the CPU overcommit factor for individual deployments, because CPU overcommitting could lead to unpredictable performance.</p>
<p><span class="strong strong"><strong>Include chain status in TLS endpoints responses.</strong></span> Make <code class="literal">GET /api/v1/platform/configuration/security/tls/{service_name}</code> responses include a status JSON object with information on the time to life of the <code class="literal">service_name</code> certification chain. Check <a class="xref" href="get-tls-certificate.html" title="Get TLS certificate">the TLS certificate</a>.</p>
<p><span class="strong strong"><strong>Turn on OOM heap dumps by default. Stop uploading heap dumps.</strong></span> Heap dumps are now taken by default on OOM and are available to download through the API. We&#8217;ve stopped uploading heap dumps to S3 and GCS snapshot repositories and heap dump URLs will no longer be returned by the system alerts API.</p>
<p><span class="strong strong"><strong>Add stricter validation to create or update deployment templates.</strong></span> When creating or updating a Deployment template, if it specifies <code class="literal">node_roles</code> in the Elasticsearch plan, the template must contain all resource types and all Elasticsearch tiers.</p>
<p><span class="strong strong"><strong>Increase APM and Fleet size to 1GB RAM.</strong></span> We have recently added Fleet Server to the APM component and, as part of that change, we also be updated the deployment templates to set the initial size of the APM and Fleet component to 1GB by default.</p>
<p><span class="strong strong"><strong>Make plan snapshots conditional.</strong></span> A deployment plan no longer creates a snapshot as a first step, unless the plan includes removing data nodes or doing major stack version upgrades.</p>
<p><span class="strong strong"><strong>Elasticsearch: Add settings to enable compression for ingest data transfer.</strong></span> Configure Elasticsearch to use data compression when ingesting data to reduce data transfer rates.</p>
<p><span class="strong strong"><strong>Set <code class="literal">use_for_peer_recovery</code> in snapshot settings for 7.15+.</strong></span> The <code class="literal">use_for_peer_recovery</code> setting is enabled on snapshot repositories for clusters running stack versions 7.15 or higher. This aims to reduce data transfer costs by using existing snapshots for shard migrations and instance recovery.</p>
<p><span class="strong strong"><strong>Failed autoscaling notification.</strong></span> An email notification has been added to inform you when autoscaling fails to adjust the size of a deployment. This failure will require you to fix your deployment’s health before further autoscaling changes will be attempted.</p>
<p><span class="strong strong"><strong>Added duration or number support for <code class="literal">xpack.reporting.queue.timeout</code>.</strong></span> Added the ability to configure <code class="literal">xpack.reporting.queue.timeout</code> as a number value (milliseconds) or a string (duration).</p>
<p><span class="strong strong"><strong>Respect maintenance mode in autoscaling service.</strong></span> The constructor autoscaling service will now respect maintenance mode. When a constructor is in maintenance mode it will not process any incoming autoscaling requests.</p>
<p><span class="strong strong"><strong>Skip snapshot steps in termination handler.</strong></span> Terminating an Elasticsearch cluster while using the <code class="literal">Skip snapshots</code> option will no longer execute the <code class="literal">suspend-snapshotting</code> step. This makes it easier to terminate a cluster that is in an unhealthy state.</p>
<p><span class="strong strong"><strong>Make plan handler LogContext more consistent.</strong></span> Constructor logs will be a bit more consistent in which log attributes are present. Notably, termination plans will now have the <code class="literal">is_termination: true</code> log attribute.</p>
<p><span class="strong strong"><strong>Add and default to plan-level user settings editing.</strong></span> For new deployments, or existing deployments without user settings, new user settings will be stored once at the deployment resource level, instead of within each topology element.</p>
<p><span class="strong strong"><strong>Run EnsureRepository less often.</strong></span> Step <code class="literal">Ensuring snapshot repository exists</code> will not run as often when it does not need to.</p>
<p><span class="strong strong"><strong>Use restored snapshot name as default.</strong></span> When a deployment is created from a restored snapshot, the snapshot name is used as a placeholder for the new deployment name.</p>
<p><span class="strong strong"><strong>Improve error output for failed snapshot restores.</strong></span> Failures during the <code class="literal">Restoring snapshot</code> step that are due to Elasticsearch errors will now have details of the error on the Activity page.</p>
<p><span class="strong strong"><strong>Change in Kibana setting <code class="literal">Allow server.maxPayload</code>.</strong></span> Kibana renamed the <code class="literal">server.maxPayloadBytes</code> setting to <code class="literal">server.maxPayload</code> in 7.13.0. <code class="literal">server.maxPayloadBytes</code> will be removed in 8.0.0. With this Elastic Cloud Enterprise release, deployments can start using the new setting.</p>
<p><span class="strong strong"><strong>Warn of upcoming certs expirations.</strong></span> Include Platform warnings in Cloud UI when <code class="literal">ui</code>/<code class="literal">api</code> or <code class="literal">propxy</code> TLS chains are about to become invalid due any of the certificates expiring.</p>
<p><span class="strong strong"><strong>Remove dependencies on python templating for ProxyV2 configuration.</strong></span> The Proxy configuration will be generated by the proxy during startup.</p>
<p><span class="strong strong"><strong>Support Enterprise Search heap dump download and capture in UI.</strong></span> Extends support for on-demand heap dump capture and download to Enterprise Search instances.</p>
<h3><a id="ece_bug_fixes_11"></a>Bug fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/releases/2.12.0/bug.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Fixed a bug in ApplyMonitoringConfig.</strong></span> Fixed a bug that could cause monitoring configuration to not be applied after a major version upgrade.</p>
<p><span class="strong strong"><strong>Fixed logs and metrics links when deployment does not have a Kibana instance.</strong></span> Fixed an issue where the logs and metrics links either were disabled or didn&#8217;t render when the source or destination deployment did not have a Kibana instance.</p>
<p><span class="strong strong"><strong>Fixed a UI rendering bug.</strong></span> Fixes bug in the UI where new plan attempts would be occasionally render incorrectly. This was usually fixed with a simple refresh.</p>
<p><span class="strong strong"><strong>Propagates custom headers to Elastic Agent .</strong></span> Adds support for custom headers that was added in <a href="https://github.com/elastic/beats/pull/26275" class="ulink" target="_top">Beats PR #26275</a>. This PR modifies the fleet-setup config so these headers are propagated to the Elastic Agent similar to APM.</p>
<p><span class="strong strong"><strong>Issues logging in with SSO to Kibana.</strong></span> When logging into Kibana from the Cloud UI, single sign currently required pressing the "Login with Elastic Cloud" button, but now it automatically sends you directly into Kibana.</p>
<p><span class="strong strong"><strong>CTS - Gracefully handle returning keys of non-existent object.</strong></span> The CTS framework implements some JSON-parsing utility methods. One of them, <code class="literal">GetKeys</code> returns the keys for a JSON object. This method causes a <code class="literal">panic</code> if the JSON object itself is non-existent. This PR fixes this panic by checking for the existence of the JSON object first. If it isn’t found, it returns an empty slice of keys.</p>
<p><span class="strong strong"><strong>Apply enterprise license during 7.8.1+ upgrades.</strong></span> Fixes a bug which causes clusters to not have access to new enterprise features immediately while upgrading to 7.8.1 or higher (from version 7.8.0 or lower).</p>
<p><span class="strong strong"><strong>Hide terminate button for Kibana.</strong></span> Removes a misleading <span class="strong strong"><strong>Terminate</strong></span> button that users couldn’t click.</p>
<p><span class="strong strong"><strong>Add breadcrumbs to Getting started page.</strong></span> Adds header breadcrumbs to the <span class="strong strong"><strong>Getting started</strong></span> page.</p>
<p><span class="strong strong"><strong>Validate that there is only one resource for each type.</strong></span> Makes sure that it is not possible to create two resources of the same type in the same deployment (for example two Elasticsearch clusters), as this is not supported.</p>
<p><span class="strong strong"><strong>Add role "kibana_system" to EntSearch 7.14+.</strong></span> Add role "kibana_system" to the service user for Enterprise Search at versions 7.14+.</p>
<p><span class="strong strong"><strong>Remove legacy and buggy v0.1 certificates routes.</strong></span> We are removing the deprecated <code class="literal">/api/v0.1/regions/local-1/certificates/&lt;proxy|admin-console&gt;/*.pem</code> routes after having detected bugs in their implementation and noticed that they are not used anymore.</p>
<p><span class="strong strong"><strong>Route allocator service traffic to tiebreakers.</strong></span> <span class="strong strong"><strong>ECE Only</strong></span>
Fixed an issue where heap dumps could not be captured, listed, or downloaded from Elasticsearch tiebreaker nodes.</p>
<h3><a id="ece_breaking_changes_2"></a>Breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/releases/2.12.0/breaking.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Recovery from snapshot is now enabled by default.</strong></span> Starting in Elastic Cloud Enterprise version 2.12 with Elasticsearch versions 7.15 and above, the default configuration for clusters is to use snapshots to repopulate data in new instances on, for example, node vacates or moves to allow greater capacity. You should disable this configuration in your cluster if your snapshot repository has associated download costs. This change can be done per cluster by changing the cluster setting <a href="/guide/en/elasticsearch/reference/8.8/recovery.html#_expert_peer_recovery_settings" class="ulink" target="_top">indices.recovery.use_snapshots</a>.</p>
<p><span class="strong strong"><strong>Turn on OOM heap dumps by default. Stop uploading heap dumps.</strong></span> Heap dumps are now taken by default on OOM and are available to download through the API. We&#8217;ve stopped uploading heap dumps to S3 and GCS snapshot repositories and heap dump URLs are no longer be returned by the system alerts API.</p>

</div>
<div class="navfooter">
<span class="prev">
<a href="ece-release-notes-2.12.1.html">« Elastic Cloud Enterprise 2.12.1</a>
</span>
<span class="next">
<a href="ece_deprecations_5.html">Deprecations »</a>
</span>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>
