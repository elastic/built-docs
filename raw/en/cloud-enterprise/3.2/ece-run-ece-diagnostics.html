<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Run ECE diagnostics tool | Elastic Cloud Enterprise Reference [3.2] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.2]"/>
<link rel="up" href="ece-troubleshooting.html" title="Troubleshooting"/>
<link rel="prev" href="ece-zookeeper-sync.html" title="Verify Zookeeper Sync Status"/>
<link rel="next" href="ece-getting-help.html" title="Ask for help"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.2"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.2"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.2]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-troubleshooting.html">Troubleshooting</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-zookeeper-sync.html">« Verify Zookeeper Sync Status</a>
</span>
<span class="next">
<a href="ece-getting-help.html">Ask for help »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-run-ece-diagnostics"></a>Run ECE diagnostics tool<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/ce-troubleshooting.asciidoc">edit</a></h2>
</div></div></div>
<p>ECE diagnostics is a command line tool that you can run on the host where the ECE instance is installed. It collects logs and metrics, and stores everything into an archive file that can be provided to Elastic support for troubleshooting and investigation purposes.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The ECE diagnostics tool is currently available for ECE version 3.2 onwards.</p>
</div>
</div>
<h3><a id="ece_how_to_use"></a>How to use<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/ce-troubleshooting.asciidoc">edit</a></h3>
<p>The ECE diagnostics tool is bundled in ECE images, and you can use it by following these instructions:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Export it from a running Docker container to the host you have to troubleshoot:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker cp frc-runners-runner:/elastic_cloud_apps/ece-diagnostics/ece-diagnostics .</pre>
</div>
</li>
<li class="listitem">
<p>Run it:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./ece-diagnostics run</pre>
</div>
</li>
</ol>
</div>
<p>This tool supports various command line flags. You can also run it with <code class="literal">-h</code> or <code class="literal">--help</code> to print all available subcommands and options:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">./ece-diagnostics --help</pre>
</div>
<h3><a id="ece_example_3"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-72/docs/cloud-enterprise/ce-troubleshooting.asciidoc">edit</a></h3>
<p>After you run the ECE diagnostics tool on the host you want to troubleshoot, you might get an output similar to this one:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">[...]
✓ collected information on certificates (took: 104ms)
✓ collected information on client-forwarder connectivity (took: 369ms)
✓ collected API information for ECE and Elasticsearch (took: 9.117s)
✓ collected ZooKeeper stats (took: 9.146s)
✓ collected ECE metricbeat data (took: 12.534s)
✓ collected system information (took: 12.992s)
✓ collected host logs for ECE (took: 29.222s)
✓ collected Docker info and logs (took: 29.246s)
Finished creating file: /tmp/ecediag-192.168.44.10-20220506-084902.tar.gz (total: 48.937s)</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ece-zookeeper-sync.html">« Verify Zookeeper Sync Status</a>
</span>
<span class="next">
<a href="ece-getting-help.html">Ask for help »</a>
</span>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>
