<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Removals for ECE 3.0 | Elastic Cloud Enterprise Reference [3.4] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.4]"/>
<link rel="up" href="ece-upgrade.html" title="Upgrade your installation"/>
<link rel="prev" href="ece-upgrade.html" title="Upgrade your installation"/>
<link rel="next" href="ece-stack-getting-started.html" title="Working with deployments"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.4"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.4"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.4]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="ece-administering-ece.html">Administering your installation</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="ece-upgrade.html">Upgrade your installation</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ece-upgrade.html">« Upgrade your installation</a>
</span>
<span class="next">
<a href="ece-stack-getting-started.html">Working with deployments »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ece-3-0-removals"></a>Removals for ECE 3.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/cloud-enterprise/ce-upgrading-ece.asciidoc">edit</a></h2>
</div></div></div>
<p>With the release of Elastic Cloud Enterprise version 3.0 a number of features, API endpoints, and Elastic Stack versions will no longer be supported. Check the following information for details about what will be removed, and migration options if appropriate.</p>
<p>Check the following sections for more detail:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ece-3-0-removals.html#ece-3-0-removed-features" title="Features removed in ECE 3.0">Features removed in ECE 3.0</a>
</li>
<li class="listitem">
<a class="xref" href="ece-3-0-removals.html#ece-3-0-removed-api-endpoints" title="API endpoints removed in ECE 3.0">API endpoints removed in ECE 3.0</a>
</li>
<li class="listitem">
<a class="xref" href="ece-3-0-removals.html#ece-3-0-removed-api-clusters-to-deployments" title="Deployments API replaces clusters API">Deployments API replaces clusters API</a>
</li>
<li class="listitem">
<a class="xref" href="ece-3-0-removals.html#ece-3-0-deprecated-stack-versions" title="Deprecated Elastic Stack versions">Deprecated Elastic Stack versions</a>
</li>
</ul>
</div>
<h3><a id="ece-3-0-removed-features"></a>Features removed in ECE 3.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/cloud-enterprise/ce-upgrading-ece.asciidoc">edit</a></h3>
<p>The following set of features are removed in Elastic Cloud Enterprise 3.0.</p>
<div class="variablelist">
<a id="ece-3-0-removed-features-custom-template"></a>
<dl class="variablelist">
<dt>
<span class="term">
Custom deployment templates must support <code class="literal">node_roles</code> and include all components
</span>
</dt>
<dd>
<p>
When <a class="xref" href="ece-configuring-ece-create-templates.html" title="Create deployment templates">creating custom deployment templates</a>, aside from the <code class="literal">Hot data and Content</code> tier, platform admins were previously able to decide whether or not to include other components, such as Enterprise Search, Kibana, and others. This is in addition to the option to disable a component by setting its size to 0GB.
</p>
<p>In <a class="xref" href="ece-release-notes-2.9.0.html" title="Elastic Cloud Enterprise 2.9.0">ECE version 2.9.0</a>, we introduced a new <code class="literal">node_roles</code> field to configure which node roles are assigned to each Elasticsearch node, and which added support for features such as autoscaling and the frozen data tier. As part of this change, all components are now required to be included in custom templates when using <code class="literal">node_roles</code>. When a component is included it is still be possible to disable it by setting its size to 0GB, excluding the hot data and content tier which is required and must be enabled.</p>
<p>Starting with ECE version 3.0, all custom deployment templates are required to support <code class="literal">node_roles</code> and must include all components. Existing deployments will be required to migrate to use <code class="literal">node_roles</code> before upgrading to Elastic Stack version 8.0 or above.</p>
<p>If there are deployment templates in your environment that were not updated to support <code class="literal">node_roles</code> or that do not include all components, you must first update them before you are able to upgrade your environment to ECE version 3.0 or above.</p>
<p>You can use this <a class="xref" href="ce-add-support-for-node-roles-and-autoscaling.html" title="Updating custom templates to support node_roles and autoscaling">step-by-step guide</a> that describes the migration process.</p>
</dd>
<dt>
<span class="term">
Removing support for the dedicated App Search component
</span>
</dt>
<dd>
<p>
In <a class="xref" href="ece-release-notes-2.4.0.html" title="Elastic Cloud Enterprise 2.4.0">ECE version 2.4.0</a> we introduced support for an Elastic App Search component with a dedicated App Search deployment template.
In <a class="xref" href="ece-release-notes-2.6.0.html" title="Elastic Cloud Enterprise 2.6.0">ECE version 2.6.0</a>, we expanded that support to Elastic Enterprise Search that gives you access both to App Search and Workplace Search.
</p>
<p>Starting from ECE version 3.0 we will no longer support the App Search deployment template or App Search component in custom deployment templates.</p>
<p>If there are active deployments in your ECE environment that are still using the legacy App Search deployment template or the App Search component in a custom deployment template, you must first migrate them to use Enterprise Search before you are able to upgrade your environment to ECE version 3.0 or above.</p>
<p>You can use the following <a class="xref" href="ece-upgrading-v5.html#ece-upgrade-appsearch2" title="Upgrade App Search to Enterprise Search">step-by-step guide</a> that will walk you through the migration process.</p>
</dd>
<dt>
<span class="term">
Removing support for the dedicated Cross-Cluster-Search (CCS) deployment template
</span>
</dt>
<dd>
<p>
Previously, we supported CCS using a dedicated CCS deployment template. In <a class="xref" href="ece-release-notes-2.9.0.html" title="Elastic Cloud Enterprise 2.9.0">ECE version 2.9.0</a>, we expanded that support to all deployment templates, making CCS (and CCR) available in all deployments using compatible Elastic Stack versions.
</p>
<p>Starting with ECE version 3.0, we no longer support the dedicated CCS deployment template.</p>
<p>If there are active deployments in your environment created using the CCS template, you must first migrate them to a different template before you are able to upgrade your environment to ECE version 3.0 or above.</p>
<p>You can use this <a class="xref" href="ece-migrate-ccs.html" title="Migrate the cross-cluster search deployment template">step-by-step guide</a> that describes the migration process.</p>
</dd>
<dt>
<span class="term">
Removing support for Elastic Stack versions 2.x and 5.x
</span>
</dt>
<dd>
<p>
In ECE 2.x versions, you could upload older 2.x and 5.x Elastic Stack packs and create new deployments using those versions. As described on our <a href="/support/eol" class="ulink" target="_top">End-of-Life page</a>, maintenance for those versions ended more than two years ago.
</p>
<p>Starting with ECE version 3.0, we no longer support version 2.x or 5.x deployments.</p>
<p>If there are active deployments in your ECE environment using those versions, you must first upgrade them to Elastic Stack 6.0 or above before you are able to upgrade your environment to ECE version 3.0 or above. We highly recommend upgrading to a supported version as described on our <a href="/support/eol" class="ulink" target="_top">End-of-Life page</a>.</p>
<p>Refer to our <a class="xref" href="ece-upgrade-deployment.html" title="Upgrade versions">Upgrade documentation</a> to upgrade your deployments to a newer Elastic Stack version.</p>
</dd>
<dt>
<span class="term">
Removing support for index curation
</span>
</dt>
<dd>
<p>
Index curation enabled you to easily and automatically move indices from hot to cold data nodes after a certain time period. In <a class="xref" href="ece-release-notes-2.2.0.html" title="Elastic Cloud Enterprise 2.2.0">ECE version 2.2</a>, we released support for <a href="/guide/en/elasticsearch/reference/8.6/index-lifecycle-management.html" class="ulink" target="_top">index lifecycle management</a> (ILM) that offers a much more robust mechanism to move your data across the different phases as it matures and is less frequently searched.
</p>
<p>Starting with ECE version 3.0, we no longer support index curation.</p>
<p>If you have active deployments using index curation, you must first migrate them to use ILM before you are able to upgrade your environment to ECE version 3.0 or above.</p>
<p>You can use this <a class="xref" href="ece-migrate-index-management.html" title="Migrate to index lifecycle management">step-by-step guide</a> that describes the migration process.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="ece-curator-removal"></a>
<dl class="variablelist">
<dt>
<span class="term">
Remove logging and metrics index curator
</span>
</dt>
<dd>
<p>
Logging and metrics curator was a process that ran on coordinating nodes that enforced index retention on system-managed indices in the logging and metrics cluster.
</p>
<p>Starting with ECE version 3.0, we no longer use the curator process for logging and metrics index retention. Instead, we will install default ILM policies for system-managed logging and metrics indices in the logging and metrics cluster. If log and metrics retention was customized in previous versions of ECE, we won&#8217;t install the default ILM policies to avoid pruning logs and metrics that were intended to be retained. The upgrade log will warn you about this and output the custom retention policy that was detected.</p>
<p>To configure system log and metrics indices retention, see <a class="xref" href="ece-monitoring-ece-set-retention.html" title="Set the retention period for logging and metrics indices">setting retention period for logging and metrics indices</a>.</p>
</dd>
<dt>
<span class="term">
Removing support for Elasticsearch remote clusters “sniff mode”
</span>
</dt>
<dd>
<p>
When creating or editing a deployment, the <code class="literal">node_type</code> field was used to configure which Elasticsearch node roles should be assigned to each node. Starting with Elastic Stack 7.10, Elasticsearch supports a new method to configure and manage Elasticsearch node roles using a single <code class="literal">node.roles</code> setting. With this change, we introduced a new <code class="literal">node_roles</code> field in our ECE API to take advantage of the new Elasticsearch setting.
</p>
<p>Starting with Elastic Stack version 8.0, the legacy node role configuration is no longer supported in Elasticsearch and, as a result, we are also removing support for the legacy <code class="literal">node_type</code> field. Requests to create or update deployments using Elastic Stack version 8.0 or above will be rejected. You can, however, continue and use the <code class="literal">node_type</code> field to create and manage deployments using older stack versions.</p>
<p>As a first step, before you migrate a deployment to use <code class="literal">node_roles</code>, the relevant deployment template associated with that deployment (as configured in the <code class="literal">deployment_template</code> field in the deployment JSON) must be updated to support <code class="literal">node_roles</code>. System-owned templates all support the new <code class="literal">node_roles</code> field. To learn more about how to update custom deployment templates, refer to <a class="xref" href="ece-3-0-removals.html#ece-3-0-removed-features-custom-template">Custom deployment templates must support <code class="literal">node_roles</code> and include all components</a>.</p>
<p>If you are using the ECE user console to manage your deployment, this change should be transparent. The deployment will automatically migrate to use the new <code class="literal">node_roles</code> field when you upgrade to a stack version that supports the new field. If you are using the ECE API to create and manage deployments, you must edit your payload and replace the <code class="literal">node_type</code> field with the new <code class="literal">node_roles</code> field to assign node roles to each Elasticsearch node.</p>
<p>You can use this <a class="xref" href="ce-add-support-for-node-roles-and-autoscaling.html#ece-migrating-a-deployment-to-node-roles" title="Migrating a deployment to node_roles">step-by-step guide</a> that describes the migration process.</p>
</dd>
<dt>
<span class="term">
Removing the IP filtering API endpoints
</span>
</dt>
<dd>
We introduced the <a class="xref" href="Deployments_-_Traffic_Filter_-_CRUD.html" title="Deployments - Traffic Filter - CRUD">Traffic Filters API</a> in <a class="xref" href="ece-release-notes-2.6.0.html" title="Elastic Cloud Enterprise 2.6.0">ECE version 2.6.0</a>. The IP Filtering API endpoints were deprecated in the same release. We are removing access to the IP Filtering endpoints in ECE version 3.0 to consolidate on the newer set of API endpoints.
</dd>
<dt>
<span class="term">
Change in CORS behavior
</span>
</dt>
<dd>
We implemented CORS behavior handling in the proxy to match legacy behavior, and since the stack now fully supports CORS handling on its own, we no longer need to do this for current versions. Beginning with ECE version 3.0, we now rely on the stack implementation for all clusters that support it.
</dd>
</dl>
</div>
<h3><a id="ece-3-0-removed-api-endpoints"></a>API endpoints removed in ECE 3.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/cloud-enterprise/ce-upgrading-ece.asciidoc">edit</a></h3>
<p>The following set endpoints have removed from the <a class="xref" href="ece-restful-api.html" title="RESTful API">Elastic Cloud Enterprise RESTful API</a> in version 3.0. Check <a class="xref" href="ece-3-0-removals.html#ece-3-0-removed-api-clusters-to-deployments" title="Deployments API replaces clusters API">Deployments API replaces clusters API</a> for options on how to migrate to a different endpoint before upgrading ECE.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">POST /cluster/_search</code>
</span>
</dt>
<dd>
Use <a class="xref" href="search-deployments.html" title="Search Deployments"><code class="literal">POST /deployments/_search</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/apm</code>
</span>
</dt>
<dd>
Use <a class="xref" href="list-deployments.html" title="List Deployments"><code class="literal">GET /deployments</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/_resync</code>
</span>
</dt>
<dd>
Use <a class="xref" href="resync-deployments.html" title="Resynchronize Deployments"><code class="literal">POST /deployments/_resync</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/_search</code>
</span>
</dt>
<dd>
Use <a class="xref" href="search-deployments.html" title="Search Deployments"><code class="literal">POST /deployments/_search</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/apm/{cluster_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/apm/{cluster_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-deployment-stateless-resource.html" title="Delete Stateless Resource from Deployment"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/_reset-token</code>
</span>
</dt>
<dd>
Use <a class="xref" href="deployment-apm-reset-secret-token.html" title="Reset the secret token for an APM resource."><code class="literal">POST /deployments/{deployment_id}/apm/{ref_id}/_reset-token</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/_restart</code>
</span>
</dt>
<dd>
Use <a class="xref" href="restart-deployment-stateless-resource.html" title="Restart Deployment Stateless Resource"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/_restart</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/_shutdown</code>
</span>
</dt>
<dd>
Use <a class="xref" href="shutdown-deployment-stateless-resource.html" title="Shutdown Deployment Stateless Resource"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/_shutdown</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/_upgrade</code>
</span>
</dt>
<dd>
Use <a class="xref" href="upgrade-deployment-stateless-resource.html" title="Upgrade Kibana, APM, Integrations Server, AppSearch, Enterprise Search inside Deployment"><code class="literal">POST /deployments/{deployment_id}/{stateless_resource_kind}/{ref_id}/_upgrade</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/_move</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances-all.html" title="Start all instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances-all.html" title="Stop all instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/maintenance-mode/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances-all-maintenance-mode.html" title="Start maintenance mode (all instances)"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/maintenance-mode/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/maintenance-mode/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances-all-maintenance-mode.html" title="Stop maintenance mode (all instances)"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/maintenance-mode/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/{instance_ids}/_move</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/{instance_ids}/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances.html" title="Start instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/{instance_ids}/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances.html" title="Stop instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/{instance_ids}/maintenance-mode/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-maintenance-mode.html" title="Start maintenance mode"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/maintenance-mode/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/instances/{instance_ids}/maintenance-mode/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-maintenance-mode.html" title="Stop maintenance mode"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/maintenance-mode/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/apm/{cluster_id}/metadata/name/{new_name}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/apm/{cluster_id}/metadata/raw</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}?show_metadata=true</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/metadata/raw</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-deployment-resource-raw-metadata.html" title="Set a Deployment&#8217;s resource metadata"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/metadata/raw</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/apm/{cluster_id}/metadata/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PATCH /clusters/apm/{cluster_id}/metadata/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/apm/{cluster_id}/plan</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/apm/{cluster_id}/plan</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/apm/{cluster_id}/plan/activity</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/apm/{cluster_id}/plan/pending</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/apm/{cluster_id}/plan/pending</code>
</span>
</dt>
<dd>
Use <a class="xref" href="cancel-deployment-resource-pending-plan.html" title="Cancel resource pending plan"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}/plan/pending</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch</code>
</span>
</dt>
<dd>
Use <a class="xref" href="list-deployments.html" title="List Deployments"><code class="literal">GET /deployments</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch</code>
</span>
</dt>
<dd>
Use <a class="xref" href="create-deployment.html" title="Create Deployment"><code class="literal">POST /deployments</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/_resync</code>
</span>
</dt>
<dd>
Use <a class="xref" href="resync-deployments.html" title="Resynchronize Deployments"><code class="literal">POST /deployments/_resync</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/_search</code>
</span>
</dt>
<dd>
Use <a class="xref" href="search-deployments.html" title="Search Deployments"><code class="literal">POST /deployments/_search</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/ccs/eligible_remotes</code>
</span>
</dt>
<dd>
Use <a class="xref" href="search-eligible-remote-clusters.html" title="Get eligible remote clusters"><code class="literal">POST /deployments/eligible-remote-clusters</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/elasticsearch/{cluster_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-deployment.html" title="Delete Deployment"><code class="literal">DELETE /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/_restart</code>
</span>
</dt>
<dd>
Use <a class="xref" href="restart-deployment-es-resource.html" title="Restart Deployment Elasticsearch Resource"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/_restart</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/_resync</code>
</span>
</dt>
<dd>
Use <a class="xref" href="resync-deployment.html" title="Resynchronize Deployment"><code class="literal">POST /deployments/{deployment_id}/_resync</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/_shutdown</code>
</span>
</dt>
<dd>
Use <a class="xref" href="shutdown-deployment-es-resource.html" title="Shutdown Deployment Elasticsearch Resource"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/_shutdown</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/_snapshot</code>
</span>
</dt>
<dd>
Use Elasticsearch snapshot API and snapshot lifecycle management APIs.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/ccs</code>
</span>
</dt>
<dd>
Use Elasticsearch remote info API.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/ccs/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment-es-resource-remote-clusters.html" title="Get remote clusters"><code class="literal">GET /deployments/{deployment_id}/elasticsearch/{ref_id}/remote-clusters</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/elasticsearch/{cluster_id}/ccs/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-deployment-es-resource-remote-clusters.html" title="Set remote clusters"><code class="literal">PUT /deployments/{deployment_id}/elasticsearch/{ref_id}/remote-clusters</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/curation/settings</code>
</span>
</dt>
<dd>
Curation no longer available. Use Elasticsearch index lifecycle management instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/elasticsearch/{cluster_id}/curation/settings</code>
</span>
</dt>
<dd>
Curation no longer available. Use Elasticsearch index lifecycle management instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/_move</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances-all.html" title="Start all instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances-all.html" title="Stop all instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/maintenance-mode/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances-all-maintenance-mode.html" title="Start maintenance mode (all instances)"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/maintenance-mode/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/maintenance-mode/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances-all-maintenance-mode.html" title="Stop maintenance mode (all instances)"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/maintenance-mode/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/elasticsearch/{cluster_id}/instances/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-all-instances-settings-overrides.html" title="Set size overrides"><code class="literal">PUT /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/overrides</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/{instance_ids}/_move</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/{instance_ids}/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances.html" title="Start instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/{instance_ids}/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances.html" title="Stop instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/{instance_ids}/maintenance-mode/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-maintenance-mode.html" title="Start maintenance mode"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/maintenance-mode/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/instances/{instance_ids}/maintenance-mode/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-maintenance-mode.html" title="Stop maintenance mode"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/maintenance-mode/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/elasticsearch/{cluster_id}/instances/{instance_ids}/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-instance-settings-overrides.html" title="Set size overrides"><code class="literal">PUT /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/overrides</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/keystore</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment-es-resource-keystore.html" title="Get the items in the Elasticsearch resource keystore"><code class="literal">GET /deployments/{deployment_id}/elasticsearch/{ref_id}/keystore</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PATCH /clusters/elasticsearch/{cluster_id}/keystore</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-deployment-es-resource-keystore.html" title="Add or remove items from the Elasticsearch resource keystore"><code class="literal">PATCH /deployments/{deployment_id}/elasticsearch/{ref_id}/keystore</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/elasticsearch/{cluster_id}/metadata/name/{new_name}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/metadata/raw</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}?show_metadata=true</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/metadata/raw</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-deployment-resource-raw-metadata.html" title="Set a Deployment&#8217;s resource metadata"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/metadata/raw</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/metadata/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PATCH /clusters/elasticsearch/{cluster_id}/metadata/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/elasticsearch/{cluster_id}/monitoring</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/monitoring/{dest_cluster_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/plan</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/plan</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/plan/_migrate</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/plan/activity</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}?show_plan_history=true&amp;show_plan_logs=true</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/plan/pending</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/elasticsearch/{cluster_id}/plan/pending</code>
</span>
</dt>
<dd>
Use <a class="xref" href="cancel-deployment-resource-pending-plan.html" title="Cancel resource pending plan"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}/plan/pending</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/proxy/{elasticsearch_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment-resource-proxy-requests.html" title="Proxy HTTP GET request"><code class="literal">GET /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/elasticsearch/{cluster_id}/proxy/{elasticsearch_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="post-deployment-resource-proxy-requests.html" title="Proxy HTTP POST request"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/elasticsearch/{cluster_id}/proxy/{elasticsearch_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="put-deployment-resource-proxy-requests.html" title="Proxy HTTP PUT request"><code class="literal">PUT /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/elasticsearch/{cluster_id}/proxy/{elasticsearch_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-deployment-resource-proxy-requests.html" title="Proxy HTTP DELETE request"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/elasticsearch/{cluster_id}/settings/security/legacy</code>
</span>
</dt>
<dd>
Endpoint was used for 2.x versions of Elasticsearch which are EOL and unsupported in ECE 3.0.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/snapshot/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PATCH /clusters/elasticsearch/{cluster_id}/snapshot/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/support/_generate-diagnostics</code>
</span>
</dt>
<dd>
Use <a class="xref" href="capture-deployment-resource-diagnostics.html" title="Capture diagnostics for an Elasticsearch or Kibana resource"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/diagnostics/_capture</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/elasticsearch/{cluster_id}/support/_generate-logs</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">GET /clusters/enterprise_search/{cluster_id}/proxy/{enterprise_search_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment-resource-proxy-requests.html" title="Proxy HTTP GET request"><code class="literal">GET /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/enterprise_search/{cluster_id}/proxy/{enterprise_search_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="post-deployment-resource-proxy-requests.html" title="Proxy HTTP POST request"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/enterprise_search/{cluster_id}/proxy/{enterprise_search_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="put-deployment-resource-proxy-requests.html" title="Proxy HTTP PUT request"><code class="literal">PUT /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/enterprise_search/{cluster_id}/proxy/{enterprise_search_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-deployment-resource-proxy-requests.html" title="Proxy HTTP DELETE request"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana</code>
</span>
</dt>
<dd>
Use <a class="xref" href="list-deployments.html" title="List Deployments"><code class="literal">GET /deployments</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/_resync</code>
</span>
</dt>
<dd>
Use <a class="xref" href="resync-deployments.html" title="Resynchronize Deployments"><code class="literal">POST /deployments/_resync</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/_search</code>
</span>
</dt>
<dd>
Use <a class="xref" href="search-deployments.html" title="Search Deployments"><code class="literal">POST /deployments/_search</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana/{cluster_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/kibana/{cluster_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-deployment-stateless-resource.html" title="Delete Stateless Resource from Deployment"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/_restart</code>
</span>
</dt>
<dd>
Use <a class="xref" href="restart-deployment-stateless-resource.html" title="Restart Deployment Stateless Resource"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/_restart</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/_resync</code>
</span>
</dt>
<dd>
Use <a class="xref" href="resync-deployment.html" title="Resynchronize Deployment"><code class="literal">POST /deployments/{deployment_id}/_resync</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/_shutdown</code>
</span>
</dt>
<dd>
Use <a class="xref" href="shutdown-deployment-stateless-resource.html" title="Shutdown Deployment Stateless Resource"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/_shutdown</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/_upgrade</code>
</span>
</dt>
<dd>
Use <a class="xref" href="upgrade-deployment-stateless-resource.html" title="Upgrade Kibana, APM, Integrations Server, AppSearch, Enterprise Search inside Deployment"><code class="literal">POST /deployments/{deployment_id}/{stateless_resource_kind}/{ref_id}/_upgrade</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/_move</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances-all.html" title="Start all instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances-all.html" title="Stop all instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/maintenance-mode/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances-all-maintenance-mode.html" title="Start maintenance mode (all instances)"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/maintenance-mode/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/maintenance-mode/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances-all-maintenance-mode.html" title="Stop maintenance mode (all instances)"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/maintenance-mode/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/{instance_ids}/_move</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/{instance_ids}/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-instances.html" title="Start instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/{instance_ids}/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-instances.html" title="Stop instances"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/{instance_ids}/maintenance-mode/_start</code>
</span>
</dt>
<dd>
Use <a class="xref" href="start-deployment-resource-maintenance-mode.html" title="Start maintenance mode"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/maintenance-mode/_start</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/instances/{instance_ids}/maintenance-mode/_stop</code>
</span>
</dt>
<dd>
Use <a class="xref" href="stop-deployment-resource-maintenance-mode.html" title="Stop maintenance mode"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/instances/{instance_ids}/maintenance-mode/_stop</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/kibana/{cluster_id}/metadata/name/{new_name}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana/{cluster_id}/metadata/raw</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}?show_metadata=true</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/metadata/raw</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-deployment-resource-raw-metadata.html" title="Set a Deployment&#8217;s resource metadata"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/metadata/raw</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana/{cluster_id}/metadata/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PATCH /clusters/kibana/{cluster_id}/metadata/settings</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana/{cluster_id}/plan</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/plan</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-deployment.html" title="Update Deployment"><code class="literal">PUT /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana/{cluster_id}/plan/activity</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}?show_plan_history=true&amp;show_plan_logs=true</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana/{cluster_id}/plan/pending</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment.html" title="Get Deployment"><code class="literal">GET /deployments/{deployment_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/kibana/{cluster_id}/plan/pending</code>
</span>
</dt>
<dd>
Use <a class="xref" href="cancel-deployment-resource-pending-plan.html" title="Cancel resource pending plan"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}/plan/pending</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /clusters/kibana/{cluster_id}/proxy/{kibana_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment-resource-proxy-requests.html" title="Proxy HTTP GET request"><code class="literal">GET /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /clusters/kibana/{cluster_id}/proxy/{kibana_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="post-deployment-resource-proxy-requests.html" title="Proxy HTTP POST request"><code class="literal">POST /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /clusters/kibana/{cluster_id}/proxy/{kibana_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="put-deployment-resource-proxy-requests.html" title="Proxy HTTP PUT request"><code class="literal">PUT /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /clusters/kibana/{cluster_id}/proxy/{kibana_path}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-deployment-resource-proxy-requests.html" title="Proxy HTTP DELETE request"><code class="literal">DELETE /deployments/{deployment_id}/{resource_kind}/{ref_id}/proxy/{proxy_path}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /deployments/ip-filtering/associations/{association_type}/{associated_entity_id}/rulesets</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-traffic-filter-deployment-ruleset-associations.html" title="Get associated rulesets"><code class="literal">GET /deployments/traffic-filter/associations/{association_type}/{associated_entity_id}/rulesets</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /deployments/ip-filtering/rulesets</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-traffic-filter-rulesets.html" title="List traffic filter rulesets"><code class="literal">GET /deployments/traffic-filter/rulesets</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /deployments/ip-filtering/rulesets</code>
</span>
</dt>
<dd>
Use <a class="xref" href="create-traffic-filter-ruleset.html" title="Create a ruleset"><code class="literal">POST /deployments/traffic-filter/rulesets</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /deployments/ip-filtering/rulesets/{ruleset_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-traffic-filter-ruleset.html" title="Retrieves the ruleset by ID."><code class="literal">GET /deployments/traffic-filter/rulesets/{ruleset_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /deployments/ip-filtering/rulesets/{ruleset_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="update-traffic-filter-ruleset.html" title="Updates a ruleset"><code class="literal">PUT /deployments/traffic-filter/rulesets/{ruleset_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /deployments/ip-filtering/rulesets/{ruleset_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-traffic-filter-ruleset.html" title="Delete a ruleset"><code class="literal">DELETE /deployments/traffic-filter/rulesets/{ruleset_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /deployments/ip-filtering/rulesets/{ruleset_id}/associations</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-traffic-filter-ruleset-deployment-associations.html" title="Get associated deployments"><code class="literal">GET /deployments/traffic-filter/rulesets/{ruleset_id}/associations</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /deployments/ip-filtering/rulesets/{ruleset_id}/associations</code>
</span>
</dt>
<dd>
Use <a class="xref" href="create-traffic-filter-ruleset-association.html" title="Create ruleset association"><code class="literal">POST /deployments/traffic-filter/rulesets/{ruleset_id}/associations</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /deployments/ip-filtering/rulesets/{ruleset_id}/associations/{association_type}/{associated_entity_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-traffic-filter-ruleset-association.html" title="Delete ruleset association"><code class="literal">DELETE /deployments/traffic-filter/rulesets/{ruleset_id}/associations/{association_type}/{associated_entity_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /platform/configuration/security/deployment/_disable</code>
</span>
</dt>
<dd>
The security deployment is required in Elastic Cloud Enterprise 3.0, so there is no longer an API for disabling it.
</dd>
<dt>
<span class="term">
<code class="literal">POST /platform/configuration/security/deployment/_enable</code>
</span>
</dt>
<dd>
The security deployment is already enabled in Elastic Cloud Enterprise 3.0, so there is no longer an API for enabling it.
</dd>
<dt>
<span class="term">
<code class="literal">GET /platform/configuration/templates/deployments</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment-templates-v2.html" title="Get deployment templates"><code class="literal">GET /deployments/templates</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /platform/configuration/templates/deployments</code>
</span>
</dt>
<dd>
Use <a class="xref" href="create-deployment-template-v2.html" title="Create deployment template"><code class="literal">POST /deployments/templates</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">DELETE /platform/configuration/templates/deployments/{template_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="delete-deployment-template-v2.html" title="Delete deployment template"><code class="literal">DELETE /deployments/templates/{template_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">GET /platform/configuration/templates/deployments/{template_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="get-deployment-template-v2.html" title="Get deployment template"><code class="literal">GET /deployments/templates/{template_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">PUT /platform/configuration/templates/deployments/{template_id}</code>
</span>
</dt>
<dd>
Use <a class="xref" href="set-deployment-template-v2.html" title="Set deployment template"><code class="literal">PUT /deployments/templates/{template_id}</code></a> instead.
</dd>
<dt>
<span class="term">
<code class="literal">POST /users/auth/reauthenticate</code>
</span>
</dt>
<dd>
Use API keys instead.
</dd>
</dl>
</div>
<h3><a id="ece-3-0-removed-api-clusters-to-deployments"></a>Deployments API replaces clusters API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/cloud-enterprise/ce-upgrading-ece.asciidoc">edit</a></h3>
<p>Starting in Elastic Cloud Enterprise 3.0, there is no longer a top-level concept of clusters. Deployments are now the only top level model, and they represent a collection of resources. A resource is essentially what used to be called a cluster. It represents a deployable product with an infrastructure plan and a topology of instances that are deployed on one or more allocators. A resource has a kind (Elasticsearch, Kibana, Enterprise Search, and so on) and a reference ID (refid) that uniquely identifies it within the deployment. The resource kind and refid are used throughout the API to replace operations that used to be for operating on individual clusters. You can retrieve the resources and their corresponding refids for a given deployment by using the <a class="xref" href="get-deployment.html" title="Get Deployment">Get Deployment</a> API.</p>
<p>As an example, in Elastic Cloud Enterprise 2, you could use the clusters API like so to create a deployment:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">POST /api/v1/clusters/elasticsearch
{
  "cluster_name": "My deployment",
  "plan": {
    "cluster_topology": [
      {
        "id": "hot_content",
        "node_type": {
          "data": true,
          "master": true,
          "ingest": true,
          "ml": false
        },
        "node_roles": [
          "master",
          "ingest",
          "transform",
          "data_hot",
          "remote_cluster_client",
          "data_content"
        ],
        "zone_count": 1,
        "elasticsearch": {
          "node_attributes": {
            "data": "hot"
          },
          "enabled_built_in_plugins": []
        },
        "instance_configuration_id": "data.default",
        "size": {
          "value": 4096,
          "resource": "memory"
        }
      },
      {
        "id": "warm",
        "node_type": {
          "data": true,
          "master": false,
          "ingest": false,
          "ml": false
        },
        "node_roles": [
          "data_warm",
          "remote_cluster_client"
        ],
        "zone_count": 1,
        "elasticsearch": {
          "node_attributes": {
            "data": "warm"
          },
          "enabled_built_in_plugins": []
        },
        "instance_configuration_id": "data.highstorage",
        "size": {
          "value": 0,
          "resource": "memory"
        }
      },
      {
        "id": "cold",
        "node_type": {
          "data": true,
          "master": false,
          "ingest": false,
          "ml": false
        },
        "node_roles": [
          "data_cold",
          "remote_cluster_client"
        ],
        "zone_count": 1,
        "elasticsearch": {
          "node_attributes": {
            "data": "cold"
          },
          "enabled_built_in_plugins": []
        },
        "instance_configuration_id": "data.highstorage",
        "size": {
          "value": 0,
          "resource": "memory"
        }
      },
      {
        "id": "frozen",
        "node_type": {
          "data": true,
          "master": false,
          "ingest": false,
          "ml": false
        },
        "node_roles": [
          "data_frozen"
        ],
        "zone_count": 1,
        "elasticsearch": {
          "node_attributes": {
            "data": "frozen"
          },
          "enabled_built_in_plugins": []
        },
        "instance_configuration_id": "data.frozen",
        "size": {
          "value": 0,
          "resource": "memory"
        }
      },
      {
        "id": "coordinating",
        "node_type": {
          "ingest": true,
          "master": false,
          "data": false,
          "ml": false
        },
        "node_roles": [
          "ingest",
          "remote_cluster_client"
        ],
        "zone_count": 1,
        "instance_configuration_id": "coordinating",
        "size": {
          "value": 0,
          "resource": "memory"
        },
        "elasticsearch": {
          "enabled_built_in_plugins": []
        }
      },
      {
        "id": "master",
        "node_type": {
          "master": true,
          "data": false,
          "ml": false,
          "ingest": false
        },
        "node_roles": [
          "master",
          "remote_cluster_client"
        ],
        "zone_count": 1,
        "instance_configuration_id": "master",
        "size": {
          "value": 0,
          "resource": "memory"
        },
        "elasticsearch": {
          "enabled_built_in_plugins": []
        }
      },
      {
        "id": "ml",
        "node_type": {
          "ml": true,
          "data": false,
          "master": false,
          "ingest": false
        },
        "node_roles": [
          "ml",
          "remote_cluster_client"
        ],
        "zone_count": 1,
        "instance_configuration_id": "ml",
        "size": {
          "value": 0,
          "resource": "memory"
        },
        "elasticsearch": {
          "enabled_built_in_plugins": []
        }
      }
    ],
    "elasticsearch": {
      "version": "7.15.1"
    },
    "autoscaling_enabled": false,
    "deployment_template": {
      "id": "default"
    }
  }
}</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">POST /api/v1/clusters/kibana
{
  "elasticsearch_cluster_id": {elasticsearch_id},
  "plan": {
    "zone_count": 1,
    "cluster_topology": [
      {
        "instance_configuration_id": "kibana",
        "size": {
          "value": 1024,
          "resource": "memory"
        },
        "zone_count": 1
      }
    ],
    "kibana": {
      "version": "7.15.1"
    }
  }
}</pre>
</div>
<p>With the deployments API, you can create the same deployment like so:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">POST /api/v1/deployments
{
  "resources": {
    "elasticsearch": [
      {
        "ref_id": "main-elasticsearch",
        "region": "ece-region",
        "plan": {
          "cluster_topology": [
            {
              "id": "hot_content",
              "node_roles": [
                "master",
                "ingest",
                "transform",
                "data_hot",
                "remote_cluster_client",
                "data_content"
              ],
              "zone_count": 1,
              "elasticsearch": {
                "node_attributes": {
                  "data": "hot"
                },
                "enabled_built_in_plugins": []
              },
              "instance_configuration_id": "data.default",
              "size": {
                "value": 4096,
                "resource": "memory"
              }
            },
            {
              "id": "warm",
              "node_roles": [
                "data_warm",
                "remote_cluster_client"
              ],
              "zone_count": 1,
              "elasticsearch": {
                "node_attributes": {
                  "data": "warm"
                },
                "enabled_built_in_plugins": []
              },
              "instance_configuration_id": "data.highstorage",
              "size": {
                "value": 0,
                "resource": "memory"
              }
            },
            {
              "id": "cold",
              "node_roles": [
                "data_cold",
                "remote_cluster_client"
              ],
              "zone_count": 1,
              "elasticsearch": {
                "node_attributes": {
                  "data": "cold"
                },
                "enabled_built_in_plugins": []
              },
              "instance_configuration_id": "data.highstorage",
              "size": {
                "value": 0,
                "resource": "memory"
              }
            },
            {
              "id": "frozen",
              "node_roles": [
                "data_frozen"
              ],
              "zone_count": 1,
              "elasticsearch": {
                "node_attributes": {
                  "data": "frozen"
                },
                "enabled_built_in_plugins": []
              },
              "instance_configuration_id": "data.frozen",
              "size": {
                "value": 0,
                "resource": "memory"
              }
            },
            {
              "id": "coordinating",
              "node_roles": [
                "ingest",
                "remote_cluster_client"
              ],
              "zone_count": 1,
              "instance_configuration_id": "coordinating",
              "size": {
                "value": 0,
                "resource": "memory"
              },
              "elasticsearch": {
                "enabled_built_in_plugins": []
              }
            },
            {
              "id": "master",
              "node_roles": [
                "master",
                "remote_cluster_client"
              ],
              "zone_count": 1,
              "instance_configuration_id": "master",
              "size": {
                "value": 0,
                "resource": "memory"
              },
              "elasticsearch": {
                "enabled_built_in_plugins": []
              }
            },
            {
              "id": "ml",
              "node_roles": [
                "ml",
                "remote_cluster_client"
              ],
              "zone_count": 1,
              "instance_configuration_id": "ml",
              "size": {
                "value": 0,
                "resource": "memory"
              },
              "elasticsearch": {
                "enabled_built_in_plugins": []
              }
            }
          ],
          "elasticsearch": {
            "version": "7.15.1"
          },
          "autoscaling_enabled": false,
          "deployment_template": {
            "id": "default"
          }
        },
        "settings": {
          "dedicated_masters_threshold": 6,
          "snapshot": {
            "enabled": false
          }
        }
      }
    ],
    "kibana": [
      {
        "ref_id": "main-kibana",
        "elasticsearch_cluster_ref_id": "main-elasticsearch",
        "region": "ece-region",
        "plan": {
          "zone_count": 1,
          "cluster_topology": [
            {
              "instance_configuration_id": "kibana",
              "size": {
                "value": 1024,
                "resource": "memory"
              },
              "zone_count": 1
            }
          ],
          "kibana": {
            "version": "7.15.1"
          }
        }
      }
    ],
    "apm": [],
    "enterprise_search": []
  },
  "name": "My deployment",
  "metadata": {
    "system_owned": false
  }
}</pre>
</div>
<p>You can find <a class="xref" href="ece-restful-api-examples.html" title="API examples">many more examples</a> in our Elastic Cloud Enterprise API documentation.</p>
<h3><a id="ece-3-0-deprecated-stack-versions"></a>Deprecated Elastic Stack versions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-78/docs/cloud-enterprise/ce-upgrading-ece.asciidoc">edit</a></h3>
<p>Elastic Stack verson 5.6.0 is no longer maintained and will not be supported on ECE 3.0. You must upgrade to Elastic Stack version 6.0 or above before upgrading to ECE 3.0, and we strongly recommend upgrading to a maintained version. More information is available on the Elastic products <a href="/support/eol" class="ulink" target="_top">end-of-life page</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ece-upgrade.html">« Upgrade your installation</a>
</span>
<span class="next">
<a href="ece-stack-getting-started.html">Working with deployments »</a>
</span>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>
