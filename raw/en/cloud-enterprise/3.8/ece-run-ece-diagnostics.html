<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Run ECE diagnostics tool | Elastic Cloud Enterprise Reference [3.8] | Elastic</title>
<meta class="elastic" name="content" content="Run ECE diagnostics tool | Elastic Cloud Enterprise Reference [3.8]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.8]"/>
<link rel="up" href="ece-troubleshooting.html" title="Troubleshooting"/>
<link rel="prev" href="ece-troubleshooting-containers.html" title="Troubleshooting container engines"/>
<link rel="next" href="ece-getting-help.html" title="Ask for help"/>
<meta class="elastic" name="product_version" content="3.8"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.8"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.8"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ece-troubleshooting-containers.html">« Troubleshooting container engines</a>
</span>
<span class="next">
<a href="ece-getting-help.html">Ask for help »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.8]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-troubleshooting.html">Troubleshooting</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Run ECE diagnostics tool</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/cloud-enterprise/ce-run-ece-diagnostics.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/troubleshoot/deployments/cloud-enterprise/run-ece-diagnostics-tool">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ece-run-ece-diagnostics"></a>Run ECE diagnostics tool</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/cloud-enterprise/ce-run-ece-diagnostics.asciidoc">edit</a></div>
</div></div></div>
<p>ECE diagnostics is a command line tool that you can run on hosts where the ECE instance is installed. It collects logs and metrics, and stores everything into an archive file that can be provided to Elastic support for troubleshooting and investigation purposes.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This archive file is privacy-redacted as much as possible, but may still contain host identifying metadata (such as IP/domain info). We therefore recommend against uploading this output to public forums. Any uploads to the <a href="https://support.elastic.co" class="ulink" target="_top">Elastic Support Portal</a> are treated according to the <a href="/legal/privacy-statement" class="ulink" target="_top">Elastic Privacy Statement</a>.</p>
</div>
</div>
<div class="position-relative"><h3><a id="ece_prepare"></a>Prepare</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/cloud-enterprise/ce-run-ece-diagnostics.asciidoc">edit</a></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Don&#8217;t use the diagnostics tool that comes bundled in ECE images. Always download the latest binary to avoid any known vulnerabilities in the diagnostics acquisition and shipping flow.</p>
</div>
</div>
<p>Download the bundled diagnostic binary.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
For x86_64 CPU architectures: <a href="https://download.elasticsearch.org/cloud/amd64/ece-diagnostics" class="ulink" target="_top">https://download.elasticsearch.org/cloud/amd64/ece-diagnostics</a>
</li>
<li class="listitem">
For ARM CPU architectures: <a href="https://download.elasticsearch.org/cloud/arm64/ece-diagnostics" class="ulink" target="_top">https://download.elasticsearch.org/cloud/arm64/ece-diagnostics</a>
</li>
</ul>
</div>
<p>Make it executable.</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">chmod +x ./ece-diagnostics</pre>
</div>
<div class="position-relative"><h3><a id="ece_how_to_use"></a>How to use</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/cloud-enterprise/ce-run-ece-diagnostics.asciidoc">edit</a></div>
<p>To run the default diagnostic</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">./ece-diagnostics run</pre>
</div>
<p>This tool supports various command line flags. You can also run it with <code class="literal">-h</code> or <code class="literal">--help</code> to print all available subcommands and options:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">./ece-diagnostics --help</pre>
</div>
<p>For example, Elastic Support frequently requests pulling the ECE diagnostic along with certain deployment diagnostics. You can pull these together via:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">./ece-diagnostics run --deployments MY_DEPLOYMENT_ID_1,MY_DEPLOYMENT_ID_2</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>ECE deployment diagnostics are not the same as <a href="https://github.com/elastic/support-diagnostics#usage-examples" class="ulink" target="_top">stack diagnostics</a>, which Elastic support may also request. You can get stack diagnostics from Elastic Cloud Enterprise &gt; Deployment &gt; Operations &gt; Prepare Bundle.</p>
</div>
</div>
<div class="position-relative"><h3><a id="ece_example_output"></a>Example output</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/cloud-enterprise/ce-run-ece-diagnostics.asciidoc">edit</a></div>
<p>When you run the ECE diagnostics tool on the host you want to troubleshoot, you might get an output similar to this one:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">[...]
✓ collected information on certificates (took: 104ms)
✓ collected information on client-forwarder connectivity (took: 369ms)
✓ collected API information for ECE and Elasticsearch (took: 9.117s)
✓ collected ZooKeeper stats (took: 9.146s)
✓ collected ECE metricbeat data (took: 12.534s)
✓ collected system information (took: 12.992s)
✓ collected host logs for ECE (took: 29.222s)
✓ collected Docker info and logs (took: 29.246s)
Finished creating file: /tmp/ecediag-192.168.44.10-20220506-084902.tar.gz (total: 48.937s)</pre>
</div>
<p>At that point, you&#8217;re ready to upload the <code class="literal">.tar.gz</code> file to Elastic Support.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ece-troubleshooting-containers.html">« Troubleshooting container engines</a>
</span>
<span class="next">
<a href="ece-getting-help.html">Ask for help »</a>
</span>
</div>
</body>
</html>
