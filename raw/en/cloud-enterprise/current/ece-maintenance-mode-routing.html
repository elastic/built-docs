<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Request routing | Elastic Cloud Enterprise Reference [3.7] | Elastic</title>
<meta class="elastic" name="content" content="Request routing | Elastic Cloud Enterprise Reference [3.7]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.7]"/>
<link rel="up" href="ece-maintenance-mode-deployments.html" title="Maintenance mode"/>
<link rel="prev" href="ece-maintenance-mode-deployments.html" title="Maintenance mode"/>
<link rel="next" href="ece-maintenance-mode-pausing.html" title="Pause instance"/>
<meta class="elastic" name="product_version" content="3.7"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.7"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.7"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ece-maintenance-mode-deployments.html">« Maintenance mode</a>
</span>
<span class="next">
<a href="ece-maintenance-mode-pausing.html">Pause instance »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-administering-deployments.html">Administering deployments</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-maintenance-mode-deployments.html">Maintenance mode</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Request routing</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/shared/ec-ce-maintenance-mode.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ece-maintenance-mode-routing"></a>Request routing</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/shared/ec-ce-maintenance-mode.asciidoc">edit</a></div>
</div></div></div>
<p>The Elastic Cloud proxy service routes traffic from external sources to the deployment, between deployments, and between products within a deployment. For example, it routes API requests from your local machine to your deployment, CCR and CCS requests between your deployments, and communications between Kibana and Elasticsearch. It does not direct the TCP traffic between Elasticsearch nodes, nor does it manage requests starting within Elasticsearch outwards to external sources such as to snapshot repositories.</p>
<p>The Elastic Cloud proxy routes HTTP requests to its deployment&#8217;s individual product instances through the product&#8217;s endpoint. By default, instances are enabled to route HTTP traffic and will report no special messaging.</p>
<p>It might be helpful to temporarily block upstream requests in order to protect some or all instances or products within your deployment. For example, you might stop request routing in the following cases:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If another team within your company starts streaming new data into your production Integrations Server without previous load testing, both it and Elasticsearch might experience performance issues. You might consider stopping routing requests on all Integrations Server instances in order to protect your downstream Elasticsearch instance.
</li>
<li class="listitem">
If Elasticsearch is being overwhelmed by upstream requests, it might experience increased response times or even become unresponsive. This might impact your ability to resize components in your deployment and increase the duration of pending plans or increase the chance of plan changes failing. Because every Elasticsearch node is an <a href="/guide/en/elasticsearch/reference/8.17/modules-node.html" class="ulink" target="_top">implicit coordinating node</a>, you should stop routing requests across all Elasticsearch nodes to completely block upstream traffic.
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="ece_considerations"></a>Considerations</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/shared/ec-ce-maintenance-mode.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Elastic Cloud will automatically set and remove routing blocks during  plan changes. Elastic recommends avoiding manually overriding these settings for a deployment while its plans are pending.
</li>
<li class="listitem">
The <a class="xref" href="ece-api-console.html" title="Access the Elasticsearch API console">Elasticsearch API console</a> bypasses Elastic Cloud proxy routing blocks against Elasticsearch to enable administrative tasks while plan changes are pending. You should generally default traffic to the Elasticsearch endpoint. However, if you enable <span class="strong strong"><strong>Stop routing requests</strong></span> across all Elasticsearch nodes, you need to use this UI to administer your cluster.
</li>
<li class="listitem">
While Elasticsearch has <span class="strong strong"><strong>Stop routing requests</strong></span> set across all nodes, other products with the deployment may become unhealthy. This is because Elasticsearch is a prerequisite for those other products, such as Kibana. In Kibana, this results in a <a href="/guide/en/kibana/8.17/access.html#not-ready" class="ulink" target="_top"><span class="strong strong"><strong>Kibana server is not ready yet</strong></span></a> message.
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="ece_stop_routing_requests"></a>Stop routing requests</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/shared/ec-ce-maintenance-mode.asciidoc">edit</a></div>
<p>To block HTTP requests for an instance, select <span class="strong strong"><strong>Stop routing requests</strong></span> under from instance&#8217;s menu.</p>
<p>The instance will then report <span class="strong strong"><strong>Not routing requests</strong></span>. It will complete existing requested traffic, but not be sent new requests.</p>
<div class="position-relative"><h4><a id="ece_restart_routing_requests"></a>Restart routing requests</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/shared/ec-ce-maintenance-mode.asciidoc">edit</a></div>
<p>To unblock HTTP requests for an instance, select <span class="strong strong"><strong>Start routing requests</strong></span> under from instance&#8217;s menu.</p>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</div><div class="navfooter">
<span class="prev">
<a href="ece-maintenance-mode-deployments.html">« Maintenance mode</a>
</span>
<span class="next">
<a href="ece-maintenance-mode-pausing.html">Pause instance »</a>
</span>
</div>
</body>
</html>
