<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Secure your clusters with Kerberos | Elastic Cloud Enterprise Reference [3.8] | Elastic</title>
<meta class="elastic" name="content" content="Secure your clusters with Kerberos | Elastic Cloud Enterprise Reference [3.8]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.8]"/>
<link rel="up" href="ece-securing-clusters.html" title="Secure your clusters"/>
<link rel="prev" href="ece-secure-clusters-oidc.html" title="Secure your clusters with OpenID Connect"/>
<link rel="next" href="ece-securing-clusters-JWT.html" title="Secure your clusters with JWT"/>
<meta class="elastic" name="product_version" content="3.8"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.8"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.8"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ece-secure-clusters-oidc.html">« Secure your clusters with OpenID Connect</a>
</span>
<span class="next">
<a href="ece-securing-clusters-JWT.html">Secure your clusters with JWT »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.8]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-administering-deployments.html">Administering deployments</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-securing-clusters.html">Secure your clusters</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Secure your clusters with Kerberos</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/shared/ec-ce-securing-clusters-kerberos.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/deploy-manage/users-roles/cluster-or-deployment-auth/kerberos">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ece-secure-clusters-kerberos"></a>Secure your clusters with Kerberos</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/shared/ec-ce-securing-clusters-kerberos.asciidoc">edit</a></div>
</div></div></div>
<p>You can secure your Elasticsearch clusters and Kibana instances in a deployment by using the Kerberos-5 protocol to authenticate users.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Kerberos credentials are valid against the deployment, not the ECE platform.</p>
</div>
</div>
<div class="position-relative"><h3><a id="ece_before_you_begin_20"></a>Before you begin</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/shared/ec-ce-securing-clusters-kerberos.asciidoc">edit</a></div>
<p>The steps in this section require an understanding of Kerberos. To learn more about Kerberos, check our documentation on <a href="/guide/en/elasticsearch/reference/8.19/kerberos-realm.html" class="ulink" target="_top">configuring Elasticsearch for Kerberos authentication</a>.</p>
<div class="position-relative"><h3><a id="ece-configure-kerberos-settings"></a>Configure the cluster to use Kerberos</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-119/docs/shared/ec-ce-securing-clusters-kerberos.asciidoc">edit</a></div>
<p>With a custom bundle containing the Kerberos files and changes to the cluster configuration, you can enforce user authentication through the Kerberos protocol.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Create or use an existing deployment that includes a Kibana instance.
</li>
<li class="listitem">
<p>Create a
<a class="xref" href="ece-add-plugins.html" title="Add plugins">custom bundle</a>
that contains your <code class="literal">krb5.conf</code> and <code class="literal">keytab</code> files, and add it to your cluster.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You should use these exact filenames for Elastic Cloud Enterprise to recognize the file in the bundle.</p>
</div>
</div>
</li>
<li class="listitem">
<p>Edit your cluster configuration, sometimes also referred to as the deployment plan, to define Kerberos settings
as described in <a href="/guide/en/elasticsearch/reference/8.19/kerberos-realm.html" class="ulink" target="_top">Elasticsearch documentation</a>.</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">xpack.security.authc.realms.kerberos.cloud-krb:
   order: 2
   keytab.path: es.keytab
   remove_realm_name: false</pre>
</div>
</li>
<li class="listitem">
<p>Update Kibana in the
<a class="xref" href="ece-manage-kibana-settings.html" title="Add Kibana user settings">user settings configuration</a>
to use Kerberos as the authentication provider:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">xpack.security.authc.providers:
  kerberos.kerberos1:
    order: 0</pre>
</div>
<p>This configuration disables all other realms and only allows users to authenticate with Kerberos. If you wish to allow your native realm users to authenticate, you need to also enable the <code class="literal">basic</code> <code class="literal">provider</code> like this:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">xpack.security.authc.providers:
  kerberos.kerberos1:
    order: 0
    description: "Log in with Kerberos" <a id="CO66-1"></a><i class="conum" data-value="1"></i>
  basic.basic1:
    order: 1</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO66-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>This arbitrary string defines how Kerberos login is titled in the Login Selector UI that is shown when you enable multiple authentication providers in Kibana. You can also configure the optional <code class="literal">icon</code> and <code class="literal">hint</code> settings for any authentication provider.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
Use the Kibana endpoint URL to log in.
</li>
</ol>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ece-secure-clusters-oidc.html">« Secure your clusters with OpenID Connect</a>
</span>
<span class="next">
<a href="ece-securing-clusters-JWT.html">Secure your clusters with JWT »</a>
</span>
</div>
</body>
</html>
