<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Troubleshooting container engines | Elastic Cloud Enterprise Reference [3.7] | Elastic</title>
<meta class="elastic" name="content" content="Troubleshooting container engines | Elastic Cloud Enterprise Reference [3.7]">

<link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [3.7]"/>
<link rel="up" href="ece-troubleshooting.html" title="Troubleshooting"/>
<link rel="prev" href="ece-troubleshooting-zookeeper-quorum.html" title="Rebuilding a broken Zookeeper quorum"/>
<link rel="next" href="ece-run-ece-diagnostics.html" title="Run ECE diagnostics tool"/>
<meta class="elastic" name="product_version" content="3.7"/>
<meta class="elastic" name="product_name" content="ECE"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/3.7"/>
<meta name="DC.subject" content="ECE"/>
<meta name="DC.identifier" content="3.7"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ece-troubleshooting-zookeeper-quorum.html">« Rebuilding a broken Zookeeper quorum</a>
</span>
<span class="next">
<a href="ece-run-ece-diagnostics.html">Run ECE diagnostics tool »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference [3.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ece-troubleshooting.html">Troubleshooting</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Troubleshooting container engines</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/cloud-enterprise/ce-troubleshooting-containers.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ece-troubleshooting-containers"></a>Troubleshooting container engines</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/cloud-enterprise/ce-troubleshooting-containers.asciidoc">edit</a></div>
</div></div></div>
<p>This article describes how to troubleshoot container engine services in Elastic Cloud Enterprise.
We refer to <a href="https://www.docker.com/" class="ulink" target="_top">Docker</a> by default, as it&#8217;s the most common container engine, but these steps are also valid for <a href="https://podman.io/" class="ulink" target="_top">Podman</a>. You can simply replace <code class="literal">docker</code> in the commands  with <code class="literal">podman</code> as needed.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not restart the Docker daemon unless directly
prescribed by Elastic Support upon reviewing an
<a class="xref" href="ece-run-ece-diagnostics.html" title="Run ECE diagnostics tool">Elastic Cloud Enterprise diagnostic</a>, as historically Docker can leave
residual orphan processes. We also advise against running any variation of
Docker&#8217;s <code class="literal">prune</code> to avoid accidental data loss.</p>
</div>
</div>
<div class="position-relative"><h3><a id="ece-troubleshooting-containers-supported"></a>Use supported configuration</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/cloud-enterprise/ce-troubleshooting-containers.asciidoc">edit</a></div>
<p>Make sure to use a combination of <a class="xref" href="ece-configure-os-cloud.html" title="Configure your operating system">Linux operating systems</a> and container engine version that is supported, following our official <a href="/support/matrix#elastic-cloud-enterprise" class="ulink" target="_top">Support matrix</a>. Using unsupported combinations can cause a plethora of either intermediate or
potentially permanent issues with you Elastic Cloud Enterprise environment, such as failures to create <a class="xref" href="ece-system-clusters-configuration.html" title="System deployments configuration">system deployments</a>, to upgrade workload deployments, proxy timeouts, data loss, and more.</p>
<div class="position-relative"><h3><a id="ece-troubleshooting-containers-unhealthy"></a>Troubleshoot unhealthy containers</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/cloud-enterprise/ce-troubleshooting-containers.asciidoc">edit</a></div>
<p>While troubleshooting the stability of an Elastic Cloud Enterprise host, you may encounter
<code class="literal">unhealthy</code> Docker containers as reported by
<a href="https://docs.docker.com/reference/cli/docker/container/ls" class="ulink" target="_top"><code class="literal">ps</code></a>.</p>
<p>System containers reporting unhealthy is infrequent and usually only occurs
after an unexpected occurance or issues while performing operating system
maintenance. If operating system maintenance does need performed, kindly
pivot to our <a class="xref" href="ece-perform-host-maintenance.html" title="Perform host maintenance">perform host maintenance guide</a>.</p>
<div class="position-relative"><h4><a id="ece-troubleshooting-containers-unhealthy-instances"></a>Restart deployment instances</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/cloud-enterprise/ce-troubleshooting-containers.asciidoc">edit</a></div>
<p>If the <code class="literal">unhealthy</code> Docker container is a Deployment&#8217;s instance, name
formatting <code class="literal">fac-{cluster_id}-instance-{node_id}</code>, we recommend restarting the
instance from the Elastic Cloud Enterprise UI via <a class="xref" href="ece-maintenance-mode-deployments.html" title="Maintenance mode">its pause
and resume mechanism</a> rather than via Docker.</p>
<p>If the <code class="literal">unhealthy</code> status returns, we recommend investigating via
<a class="xref" href="ece-config-change-errors.html" title="How do I resolve node bootlooping?">our troubleshooting bootlooping guide</a>.</p>
<p>This should indicate an issue with the Elasticsearch configuration rather than any
Docker-level problem. An isolated exception effecting
<a class="xref" href="ece-install-offline.html" title="Install ECE offline">air-gapped environments</a> is if the expected Docker
<a href="https://docs.docker.com/reference/cli/docker/image/ls/" class="ulink" target="_top"><code class="literal">image</code></a> does not
yet exist on the Allocator in which case its logs would report
<code class="literal">Unable to pull image</code>.</p>
<div class="position-relative"><h4><a id="ece-troubleshooting-containers-unhealthy-restart"></a>Restart service containers</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-105/docs/cloud-enterprise/ce-troubleshooting-containers.asciidoc">edit</a></div>
<p>While troubleshooting <code class="literal">unhealthy</code> Elastic Cloud Enterprise system containers (name prefix <code class="literal">frc-</code>),
<em>some</em> may be restarted while others should not.</p>
<p>Elastic Cloud Enterprise&#8217;s <a class="xref" href="get-runners.html" title="Get runners">runners</a> will automatically create or restart missing
system containers. If you&#8217;re attempting to permanently remove a system container
by removing its role from the host, you&#8217;d instead
<a class="xref" href="set-runner-roles.html" title="Set runner roles">update runner roles</a>. If eligible system containers return to
an <code class="literal">unhealthy</code> status after restart, we recommend reviewing their start-up Docker
<a href="https://docs.docker.com/reference/cli/docker/container/logs/" class="ulink" target="_top"><code class="literal">logs</code></a>.</p>
<p>It is safe to restart the following via Docker
<a href="https://docs.docker.com/reference/cli/docker/container/stop/" class="ulink" target="_top"><code class="literal">stop</code></a>
followed by Docker
<a href="https://docs.docker.com/reference/cli/docker/container/rm/" class="ulink" target="_top"><code class="literal">rm</code></a> on:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">frc-allocator-metricbeats-allocator-metricbeat</code>
</li>
<li class="listitem">
<code class="literal">frc-allocators-allocator</code>
</li>
<li class="listitem">
<code class="literal">frc-beats-runners-beats-runner</code>
</li>
<li class="listitem">
<code class="literal">frc-constructors-constructor</code>
</li>
<li class="listitem">
<code class="literal">frc-proxies-proxyv2</code>
</li>
</ul>
</div>
<p>It is safe to restart the following via Docker
<a href="https://docs.docker.com/reference/cli/docker/container/restart/" class="ulink" target="_top"><code class="literal">restart</code></a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">frc-client-forwarders-client-forwarder</code>
</li>
<li class="listitem">
<code class="literal">frc-directors-director</code>
</li>
<li class="listitem">
<code class="literal">frc-services-forwarders-services-forwarder</code>
</li>
</ul>
</div>
<p>It is <span class="strong strong"><strong>not</strong></span> safe to restart the following without explicit steps from
Elastic Support upon reviewing an <a class="xref" href="ece-run-ece-diagnostics.html" title="Run ECE diagnostics tool">Elastic Cloud Enterprise diagnostic</a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
any container name prefixing <code class="literal">fac-</code>
</li>
<li class="listitem">
<code class="literal">frc-runners-runner</code>
</li>
<li class="listitem">
<code class="literal">frc-zookeeper-servers-zookeeper</code>
</li>
</ul>
</div>
<p>For unhealthy Zookeeper, instead see
<a class="xref" href="ece-zookeeper-sync.html" title="Verify ZooKeeper Sync Status">verify Zookeeper sync status</a> and
<a class="xref" href="ece-troubleshooting-zookeeper-quorum.html" title="Rebuilding a broken Zookeeper quorum">resolving Zookeeper quorum</a>.</p>
<p>For any Elastic Cloud Enterprise system container not listed, kindly reach out to
<a class="xref" href="ece-getting-help.html" title="Ask for help">Elastic Support</a> for advisement.</p>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</div><div class="navfooter">
<span class="prev">
<a href="ece-troubleshooting-zookeeper-quorum.html">« Rebuilding a broken Zookeeper quorum</a>
</span>
<span class="next">
<a href="ece-run-ece-diagnostics.html">Run ECE diagnostics tool »</a>
</span>
</div>
</body>
</html>
