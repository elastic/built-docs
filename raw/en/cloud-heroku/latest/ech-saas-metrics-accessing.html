<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Access performance metrics | Elasticsearch Add-On for Heroku Documentation | Elastic</title>
<meta class="elastic" name="content" content="Access performance metrics | Elasticsearch Add-On for Heroku Documentation">

<link rel="home" href="index.html" title="Elasticsearch Add-On for Heroku Documentation"/>
<link rel="up" href="ech-monitoring.html" title="Monitoring your deployment"/>
<link rel="prev" href="ech-monitoring-setup.html" title="How to set up monitoring"/>
<link rel="next" href="ech-memory-pressure.html" title="JVM memory pressure indicator"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elasticsearch Add-On for Heroku"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud-Heroku/Reference"/>
<meta name="DC.subject" content="Elasticsearch Add-On for Heroku"/>
<meta name="DC.identifier" content="latest"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ech-monitoring-setup.html">« How to set up monitoring</a>
</span>
<span class="next">
<a href="ech-memory-pressure.html">JVM memory pressure indicator »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Add-On for Heroku Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ech-monitoring.html">Monitoring your deployment</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Access performance metrics</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ech-saas-metrics-accessing"></a>Access performance metrics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h2>
</div></div></div>
<p>Cluster performance metrics are available directly in the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Add-On for Heroku console</a>. The graphs on this page include a subset of Elasticsearch Add-On for Heroku-specific performance metrics.</p>
<p>For advanced views or production monitoring, <a class="xref" href="ech-enable-logging-and-monitoring.html" title="Enable logging and monitoring">enable logging and monitoring</a>. The monitoring application provides more advanced views for Elasticsearch and JVM metrics, and includes a configurable retention period.</p>
<p>To access cluster performance metrics:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Add-On for Heroku console</a>.
</li>
<li class="listitem">
<p>On the deployments page, select your deployment.</p>
<p>Narrow your deployments by name, ID, or choose from several other filters. To customize your view, use a combination of filters, or change the format from a grid to a list. For example, you might want to select <span class="strong strong"><strong>Is unhealthy</strong></span> and <span class="strong strong"><strong>Has master problems</strong></span> to get a short list of deployments that need attention.</p>
</li>
<li class="listitem">
From your deployment menu, go to the <span class="strong strong"><strong>Performance</strong></span> page.
</li>
</ol>
</div>
<p>The following metrics are available:</p>
<h3><a id="echcpu_usage"></a>CPU usage<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/metrics-cpu-usage.png" alt="Graph showing CPU usage">
</div>
</div>
<p>Shows the maximum usage of the CPU resources assigned to your Elasticsearch cluster, as a percentage. CPU resources are relative to the size of your cluster, so that a cluster with 32GB of RAM gets assigned twice as many CPU resources as a cluster with 16GB of RAM. All clusters are guaranteed their share of CPU resources, as Elasticsearch Add-On for Heroku infrastructure does not overcommit any resources. CPU credits permit boosting the performance of smaller clusters temporarily, so that CPU usage can exceed 100%.</p>
<h3><a id="echcpu_credits"></a>CPU credits<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/metrics-cpu-credits.png" alt="Graph showing available CPU credits">
</div>
</div>
<p>Shows your remaining CPU credits, measured in seconds of CPU time. CPU credits enable the boosting of CPU resources assigned to your cluster to improve performance temporarily when it is needed most. For more details check <a class="xref" href="ech-vcpu-boost-instance.html" title="vCPU boosting and credits">How to use vCPU to boost your instance</a>.</p>
<h3><a id="echnumber_of_requests"></a>Number of requests<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/metrics-number-of-requests.png" alt="Graph showing the number of requests">
</div>
</div>
<p>Shows the number of requests that your cluster receives per second, separated into search requests and requests to index documents. This metric provides a good indicator of the volume of work that your cluster typically handles over time which, together with other performance metrics, helps you determine if your cluster is sized correctly. Also lets you check if there is a sudden increase in the volume of user requests that might explain an increase in response times.</p>
<h3><a id="echsearch_response_times"></a>Search response times<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/metrics-search-response-times.png" alt="Graph showing search response times">
</div>
</div>
<p>Indicates the amount of time that it takes for your Elasticsearch cluster to complete a search query, in milliseconds. Response times won&#8217;t tell you about the cause of a performance issue, but they are often a first indicator that something is amiss with the performance of your Elasticsearch cluster.</p>
<h3><a id="echindex_response_times"></a>Index response times<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/metrics-index-response-times.png" alt="Graph showing index response times">
</div>
</div>
<p>Indicates the amount of time that it takes for your Elasticsearch cluster to complete an indexing operation, in milliseconds. Response times won&#8217;t tell you about the cause of a performance issue, but they are often a first indicator that something is amiss with the performance of your Elasticsearch cluster.</p>
<h3><a id="echmemory_pressure_per_node"></a>Memory pressure per node<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/metrics-memory-pressure-per-node.png" alt="Graph showing memory pressure per node">
</div>
</div>
<p>Indicates the total memory used by the JVM heap over time. We&#8217;ve configured Elasticsearch&#8217;s garbage collector to keep memory usage below 75% for heaps of 8GB or larger. For heaps smaller than 8GB, the threshold is 85%. If memory pressure consistently remains above this threshold, you might need to resize your cluster or reduce memory consumption. Check <a class="xref" href="ech-metrics-memory-pressure.html" title="How does high memory pressure affect performance?">how high memory pressure can cause performance issues</a>.</p>
<h3><a id="echgc_overhead_per_node"></a>GC overhead per node<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/metrics-gc-overhead-per-node.png" alt="Graph showing the garbage collection overhead per node">
</div>
</div>
<p>Indicates the overhead involved in JVM garbage collection to reclaim memory.</p>
<h2><a id="echtips_for_working_with_performance_metrics"></a>Tips for working with performance metrics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h2>
<p>Performance correlates directly with resources assigned to your cluster, and many of these metrics will show some sort of correlation with each other when you are trying to determine the cause of a performance issue. Take a look at some of the scenarios included in this section to learn how you can determine the cause of performance issues.</p>
<p>It is not uncommon for performance issues on Elasticsearch Add-On for Heroku to be caused by an undersized cluster that cannot cope with the workload it is being asked to handle. If your cluster performance metrics often shows high CPU usage or excessive memory pressure, consider increasing the size of your cluster soon to improve performance. This is especially true for clusters that regularly reach 100% of CPU usage or that suffer out-of-memory failures; it is better to resize your cluster early when it is not yet maxed out than to have to resize a cluster that is already overwhelmed.
<a class="xref" href="ech-configure.html" title="Configuring your deployment">Changing the configuration of your cluster</a>
may add some overhead if data needs to be migrated to the new nodes, which can increase the load on a cluster further and delay configuration changes.</p>
<p>To help diagnose high CPU usage you can also use the Elasticsearch <a href="/guide/en/elasticsearch/reference/8.15/cluster-nodes-hot-threads.html" class="ulink" target="_top">nodes hot threads API</a>, which identifies the threads on each node that have the highest CPU usage or that have been executing for a longer than normal period of time.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Got an overwhelmed cluster that needs to be upsized? <a class="xref" href="ech-maintenance-mode-deployments.html" title="Stop routing requests">Try enabling maintenance mode first</a>. It will likely help with configuration changes.</p>
</div>
</div>
<p>Work with the metrics shown in <span class="strong strong"><strong>Cluster Performance Metrics</strong></span> section to help you find the information you need:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Hover on any part of a graph to get additional information. For example, hovering on a section of a graph that shows response times reveals the percentile that responses fall into at that point in time:</p>
<div class="imageblock">
<div class="content">
<img src="images/metrics-hover.png" alt="Hover over the metric graph">
</div>
</div>
</li>
<li class="listitem">
<p>Zoom in on a graph by drawing a rectangle to select a specific time window. As you zoom in one metric, other performance metrics change to show data for the same time window.</p>
<div class="imageblock">
<div class="content">
<img src="images/metrics-zoom.png" alt="Zoom the metric graph">
</div>
</div>
</li>
<li class="listitem">
Pan around with <span class="image"><img src="images/metrics-pan.png" alt="Pan in a metric graph"></span> to make sure that you can get the right parts of a metric graph as you zoom in.
</li>
<li class="listitem">
Reset the metric graph axes with <span class="image"><img src="images/metrics-reset.png" alt="Reset the metric graph"></span>, which returns the graphs to their original scale.
</li>
</ul>
</div>
<p>Cluster performance metrics are shown per node and are color-coded to indicate which running Elasticsearch instance they belong to.</p>
<h2><a id="echcluster_restarts_after_out_of_memory_failures"></a>Cluster restarts after out-of-memory failures<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-110/docs/shared/ec-ce-monitoring-metrics.asciidoc">edit</a></h2>
<p>For clusters that suffer out-of-memory failures, it can be difficult to determine whether the clusters are in a completely healthy state afterwards. For this reason, Elasticsearch Add-On for Heroku automatically reboots clusters that suffer out-of-memory failures.</p>
<p>You will receive an email notification to let you know that a restart occurred. For repeated alerts, the emails are aggregated so that you do not receive an excessive number of notifications. Either <a class="xref" href="ech-customize-deployment-components.html#ech-cluster-size" title="Elasticsearch">resizing your cluster to reduce memory pressure</a> or reducing the workload that a cluster is being asked to handle can help avoid these cluster restarts.</p>


</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ech-monitoring-setup.html">« How to set up monitoring</a>
</span>
<span class="next">
<a href="ech-memory-pressure.html">JVM memory pressure indicator »</a>
</span>
</div>
</body>
</html>
