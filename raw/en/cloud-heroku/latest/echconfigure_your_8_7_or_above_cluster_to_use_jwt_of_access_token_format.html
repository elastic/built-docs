<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configure your 8.7 or above cluster to use JWT of access token format | Elasticsearch Add-On for Heroku Documentation | Elastic</title>
<meta class="elastic" name="content" content="Configure your 8.7 or above cluster to use JWT of access token format | Elasticsearch Add-On for Heroku Documentation">

<link rel="home" href="index.html" title="Elasticsearch Add-On for Heroku Documentation"/>
<link rel="up" href="ech-securing-clusters-JWT.html" title="Secure your clusters with JWT"/>
<link rel="prev" href="ech-securing-clusters-JWT.html" title="Secure your clusters with JWT"/>
<link rel="next" href="ech-traffic-filtering-deployment-configuration.html" title="Traffic Filtering"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elasticsearch Add-On for Heroku"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud-Heroku/Reference"/>
<meta name="DC.subject" content="Elasticsearch Add-On for Heroku"/>
<meta name="DC.identifier" content="latest"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Add-On for Heroku Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ech-security.html">Securing your deployment</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ech-securing-clusters-JWT.html">Secure your clusters with JWT</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ech-securing-clusters-JWT.html">« Secure your clusters with JWT</a>
</span>
<span class="next">
<a href="ech-traffic-filtering-deployment-configuration.html">Traffic Filtering »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="echconfigure_your_8_7_or_above_cluster_to_use_jwt_of_access_token_format"></a>Configure your 8.7 or above cluster to use JWT of access token format<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-90/docs/shared/ec-ce-securing-clusters-jwt.asciidoc">edit</a></h2>
</div></div></div>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">xpack:
  security:
    authc:
      realms:
        jwt:
          jwt-realm-name:
            order: 2
            token_type: "access_token" <a id="CO22-1"></a><i class="conum" data-value="1"></i>
            client_authentication.type: "shared_secret"
            allowed_signature_algorithms: [ "RS256", "HS256" ]
            allowed_subjects: [ "123456-compute@developer.example.com" ] <a id="CO22-2"></a><i class="conum" data-value="2"></i>
            allowed_issuer: "issuer1"
            allowed_audiences: [ "elasticsearch1", "elasticsearch2" ]
            required_claims: <a id="CO22-3"></a><i class="conum" data-value="3"></i>
              token_use: "access"
            fallback_claims.sub: "client_id" <a id="CO22-4"></a><i class="conum" data-value="4"></i>
            fallback_claims.aud: "scope" <a id="CO22-5"></a><i class="conum" data-value="5"></i>
            claims.principal: "sub" <a id="CO22-6"></a><i class="conum" data-value="6"></i>
            claims.principal: "groups"</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies token type accepted by this JWT realm</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies subjects allowed by the realm. This setting is mandatory for <code class="literal">access_token</code> JWT realms.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Additional claims required for successful authentication. The claim name can be any valid variable names and the claim values must be either string or array of strings.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the JWT claim to extract the subject information if the <code class="literal">sub</code> claim does not exist. This setting is only available for <code class="literal">access_token</code> JWT realms.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the JWT claim to extract the audiences information if the <code class="literal">aud</code> claim does not exist. This setting is only available for <code class="literal">access_token</code> JWT realms.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>Since the fallback claim for <code class="literal">sub</code> is defined as <code class="literal">client_id</code>, the principal will also be extracted from <code class="literal">client_id</code> if the <code class="literal">sub</code> claim does not exist</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Refer to <a href="/guide/en/elasticsearch/reference/8.7/jwt-auth-realm.html" class="ulink" target="_top">JWT authentication documentation</a> for more details and examples.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ech-securing-clusters-JWT.html">« Secure your clusters with JWT</a>
</span>
<span class="next">
<a href="ech-traffic-filtering-deployment-configuration.html">Traffic Filtering »</a>
</span>
</div>
</div>
</body>
</html>
