<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configuration examples | Elastic Cloud on Kubernetes [2.5] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud on Kubernetes [2.5]"/>
<link rel="up" href="k8s-elastic-agent.html" title="Run standalone Elastic Agent on ECK"/>
<link rel="prev" href="k8s-elastic-agent-configuration.html" title="Configuration"/>
<link rel="next" href="k8s-elastic-agent-fleet.html" title="Run Fleet-managed Elastic Agent on ECK"/>
<meta name="DC.type" content="Learn/Docs/Kubernetes/Reference/2.5"/>
<meta name="DC.subject" content="ECK"/>
<meta name="DC.identifier" content="2.5"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud on Kubernetes [2.5]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="k8s-orchestrating-elastic-stack-applications.html">Orchestrating Elastic Stack applications</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="k8s-elastic-agent.html">Run standalone Elastic Agent on ECK</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="k8s-elastic-agent-configuration.html">« Configuration</a>
</span>
<span class="next">
<a href="k8s-elastic-agent-fleet.html">Run Fleet-managed Elastic Agent on ECK »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="k8s-elastic-agent-configuration-examples"></a>Configuration examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/2.5/docs/orchestrating-elastic-stack-applications/agent-standalone.asciidoc">edit</a></h2>
</div></div></div>
<p>This section contains manifests that illustrate common use cases, and can be your starting point in exploring Elastic Agent deployed with ECK. These manifests are self-contained and work out-of-the-box on any non-secured Kubernetes cluster. They all contain a three-node Elasticsearch cluster and a single Kibana instance. Add the corresponding integration package to Kibana to install the dashboards, visualizations and other assets for each of these examples as described in <a href="/guide/en/fleet/current/elastic-agent-installation.html" class="ulink" target="_top">the Elastic Agent documentation</a>.</p>
<div class="caution admon">
<div class="icon"></div>
<div class="admon_content">
<p>The examples in this section are for illustration purposes only and should not be considered to be production-ready. Some of these examples use the <code class="literal">node.store.allow_mmap: false</code> setting which has performance implications and should be tuned for production workloads, as described in <a class="xref" href="k8s-virtual-memory.html" title="Virtual memory">Virtual memory</a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="k8s_system_integration"></a>System integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/2.5/docs/orchestrating-elastic-stack-applications/agent-standalone.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">kubectl apply -f https://raw.githubusercontent.com/elastic/cloud-on-k8s/2.5/config/recipes/elastic-agent/system-integration.yaml</pre>
</div>
<p>Deploys Elastic Agent as a DaemonSet in standalone mode with system integration enabled. Collects syslog logs, auth logs and system metrics (for CPU, I/O, filesystem, memory, network, process and others).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="k8s_kubernetes_integration"></a>Kubernetes integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/2.5/docs/orchestrating-elastic-stack-applications/agent-standalone.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">kubectl apply -f https://raw.githubusercontent.com/elastic/cloud-on-k8s/2.5/config/recipes/elastic-agent/kubernetes-integration.yaml</pre>
</div>
<p>Deploys Elastic Agent as a DaemonSet in standalone mode with Kubernetes integration enabled. Collects API server, Container, Event, Node, Pod, Volume and system metrics.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="k8s_multiple_elasticsearch_clusters_output"></a>Multiple Elasticsearch clusters output<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/2.5/docs/orchestrating-elastic-stack-applications/agent-standalone.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">kubectl apply -f https://raw.githubusercontent.com/elastic/cloud-on-k8s/2.5/config/recipes/elastic-agent/multi-output.yaml</pre>
</div>
<p>Deploys two Elasticsearch clusters and two Kibana instances together with single Elastic Agent DaemonSet in standalone mode with System integration enabled. System metrics are sent to the <code class="literal">elasticsearch</code> cluster. Elastic Agent monitoring data is sent to <code class="literal">elasticsearch-mon</code> cluster.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="k8s_storing_local_state_in_host_path_volume"></a>Storing local state in host path volume<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/2.5/docs/orchestrating-elastic-stack-applications/agent-standalone.asciidoc">edit</a></h3>
</div></div></div>
<p>Elastic Agent when managed by ECK stores local state in a host path volume. This ensures that integrations run by the agent can continue their work without duplicating work that has already been done after the Pod has been recreated for example because of a Pod configuration change.
If local state storage in host path volumes is not desired this can be turned off by configuring an <code class="literal">emptyDir</code> volume instead:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">apiVersion: agent.k8s.elastic.co/v1alpha1
kind: Agent
metadata:
  name: elastic-agent
spec:
  deployment:
    podTemplate:
      spec:
        volumes:
        - name: agent-data
          emptyDir: {}
...</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="k8s-elastic-agent-configuration.html">« Configuration</a>
</span>
<span class="next">
<a href="k8s-elastic-agent-fleet.html">Run Fleet-managed Elastic Agent on ECK »</a>
</span>
</div>
</div>
</body>
</html>
