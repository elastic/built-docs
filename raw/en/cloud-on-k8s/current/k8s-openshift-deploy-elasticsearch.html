<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Deploy an Elasticsearch instance with a route | Elastic Cloud on Kubernetes [1.3] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud on Kubernetes [1.3]"/>
<link rel="up" href="k8s-openshift.html" title="Deploy ECK on OpenShift"/>
<link rel="prev" href="k8s-openshift-deploy-the-operator.html" title="Deploy the operator"/>
<link rel="next" href="k8s-openshift-deploy-kibana.html" title="Deploy a Kibana instance with a route"/>
<meta name="DC.type" content="Learn/Docs/Kubernetes/Reference/1.3"/>
<meta name="DC.subject" content="ECK"/>
<meta name="DC.identifier" content="1.3"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud on Kubernetes [1.3]</a></span>
»
<span class="breadcrumb-link"><a href="k8s-advanced-topics.html">Advanced topics</a></span>
»
<span class="breadcrumb-link"><a href="k8s-openshift.html">Deploy ECK on OpenShift</a></span>
»
<span class="breadcrumb-node">Deploy an Elasticsearch instance with a route</span>
</div>
<div class="navheader">
<span class="prev">
<a href="k8s-openshift-deploy-the-operator.html">« Deploy the operator</a>
</span>
<span class="next">
<a href="k8s-openshift-deploy-kibana.html">Deploy a Kibana instance with a route »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="k8s-openshift-deploy-elasticsearch"></a>Deploy an Elasticsearch instance with a route<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/1.3/docs/advanced-topics/openshift.asciidoc">edit</a></h2>
</div></div></div>
<p>Use the following code to create an Elasticsearch cluster <code class="literal">elasticsearch-sample</code> and a "passthrough" route to access it:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">cat &lt;&lt;EOF | oc apply -n elastic -f -
# This sample sets up an Elasticsearch cluster with an OpenShift route
apiVersion: elasticsearch.k8s.elastic.co/v1
kind: Elasticsearch
metadata:
  name: elasticsearch-sample
spec:
  version: 7.10.1
  nodeSets:
  - name: default
    count: 1
    config:
      node.store.allow_mmap: false
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: elasticsearch-sample
spec:
  #host: elasticsearch.example.com # override if you don't want to use the host that is automatically generated by OpenShift (&lt;route-name&gt;[-&lt;namespace&gt;].&lt;suffix&gt;)
  tls:
    termination: passthrough # Elasticsearch is the TLS endpoint
    insecureEdgeTerminationPolicy: Redirect
  to:
    kind: Service
    name: elasticsearch-sample-es-http
EOF</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="k8s-openshift-es-plugins"></a>Elasticsearch plugins<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/1.3/docs/advanced-topics/openshift.asciidoc">edit</a></h3>
</div></div></div>
<p>Elasticsearch plugins cannot be installed at runtime in most OpenShift environments. This is because the plugin installer must run as root, but Elasticsearch is restricted from running as root. To add plugins to Elasticsearch, you can use custom images as described in <a class="xref" href="k8s-custom-images.html" title="Create custom images"><em>Create custom images</em></a>.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="k8s-openshift-deploy-the-operator.html">« Deploy the operator</a>
</span>
<span class="next">
<a href="k8s-openshift-deploy-kibana.html">Deploy a Kibana instance with a route »</a>
</span>
</div>
</div>
</body>
</html>
