<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Scaling Logstash | Elastic Cloud on Kubernetes [master] | Elastic</title>
<meta class="elastic" name="content" content="Scaling Logstash | Elastic Cloud on Kubernetes [master]">

<link rel="home" href="index.html" title="Elastic Cloud on Kubernetes [master]"/>
<link rel="up" href="k8s-logstash.html" title="Run Logstash on ECK"/>
<link rel="prev" href="k8s-logstash-advanced-configuration.html" title="Advanced configuration"/>
<link rel="next" href="k8s-logstash-technical-preview-limitations.html" title="Technical Preview limitations"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="ECK"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kubernetes/Reference/master"/>
<meta name="DC.subject" content="ECK"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud on Kubernetes [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="k8s-orchestrating-elastic-stack-applications.html">Orchestrating Elastic Stack applications</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="k8s-logstash.html">Run Logstash on ECK</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="k8s-logstash-advanced-configuration.html">« Advanced configuration</a>
</span>
<span class="next">
<a href="k8s-logstash-technical-preview-limitations.html">Technical Preview limitations »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="k8s-logstash-scaling-logstash"></a>Scaling Logstash<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/main/docs/orchestrating-elastic-stack-applications/logstash.asciidoc">edit</a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>The ability to scale Logstash is highly dependent on the pipeline configurations, and the plugins used in those pipelines. Not all Logstash deployments can be scaled horizontally by increasing the number of Logstash Pods defined in the Logstash resource.
Increasing the number of Pods can cause data loss/duplication, or Pods running idle because they are unable to be utilized.</p>
<p>These risks are especially likely with plugins that:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Retrieve data from external sources.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Plugins that retrieve data from external sources, and require some level of coordination between nodes to split up work, are not good candidates for scaling horizontally, and would likely produce some data duplication. These are plugins such as the JDBC input plugin, which has no automatic way to split queries across Logstash instances, or the S3 input, which has no way to split which buckets to read across Logstash instances.
</li>
<li class="listitem">
Plugins that retrieve data from external sources, where work is distributed externally to Logstash, but may impose their own limits. These are plugins like the Kafka input, or Azure event hubs, where the parallelism is limited by the number of partitions vs the number of consumers. In cases like this, extra Logstash Pods may be idle if the number of consumer threads multiplied by the number of Pods is greater than the number of partitions.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Plugins that require events to be received in order.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Certain plugins, such as the aggregate filter, expect events to be received in strict order to run without error or data loss. Any plugin that requires the number of pipeline workers to be <code class="literal">1</code> will also have issues when horizontal scaling is used.
If the pipeline does not contain any such plugin, the number of Logstash instances can be increased by setting the <code class="literal">count</code> property in the Logstash resource:
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">apiVersion: logstash.k8s.elastic.co/v1alpha1
kind: Logstash
metadata:
  name: quickstart
spec:
  version: 8.8.0
  count: 3</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="k8s-logstash-advanced-configuration.html">« Advanced configuration</a>
</span>
<span class="next">
<a href="k8s-logstash-technical-preview-limitations.html">Technical Preview limitations »</a>
</span>
</div>
</div>
</body>
</html>
