<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Autoscaling stateless applications | Elastic Cloud on Kubernetes [master] | Elastic</title>
<meta class="elastic" name="content" content="Autoscaling stateless applications | Elastic Cloud on Kubernetes [master]">

<link rel="home" href="index.html" title="Elastic Cloud on Kubernetes [master]"/>
<link rel="up" href="k8s-orchestrating-elastic-stack-applications.html" title="Orchestrating Elastic Stack applications"/>
<link rel="prev" href="k8s-managing-compute-resources.html" title="Manage compute resources"/>
<link rel="next" href="k8s-stack-config-policy.html" title="Elastic Stack configuration policies"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="ECK"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kubernetes/Reference/master"/>
<meta name="DC.subject" content="ECK"/>
<meta name="DC.identifier" content="master"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="k8s-managing-compute-resources.html">« Manage compute resources</a>
</span>
<span class="next">
<a href="k8s-stack-config-policy.html">Elastic Stack configuration policies »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Cloud on Kubernetes [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="k8s-orchestrating-elastic-stack-applications.html">Orchestrating Elastic Stack applications</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Autoscaling stateless applications</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/main/docs/orchestrating-elastic-stack-applications/autoscaling.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="k8s-stateless-autoscaling"></a>Autoscaling stateless applications<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/main/docs/orchestrating-elastic-stack-applications/autoscaling.asciidoc">edit</a></h2>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This section only applies to stateless applications. Check <a class="xref" href="k8s-autoscaling.html" title="Elasticsearch autoscaling">Elasticsearch autoscaling</a> for more details about scaling automatically Elasticsearch.</p>
</div>
</div>
<p>The <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale" class="ulink" target="_top">Horizontal Pod Autoscaler</a> can be used to automatically scale the deployments of the following resources:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Kibana
</li>
<li class="listitem">
APM Server
</li>
<li class="listitem">
Enterprise Search
</li>
<li class="listitem">
Elastic Maps Server
</li>
</ul>
</div>
<p>These resources expose the <code class="literal">scale</code> subresource which can be used by the Horizontal Pod Autoscaler controller to automatically adjust the number of replicas according to the CPU load or any other custom or external metric. This example shows how to create an <code class="literal">HorizontalPodAutoscaler</code> resource to adjust the replicas of a Kibana deployment according to the CPU load:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">apiVersion: elasticsearch.k8s.elastic.co/v1
kind: Elasticsearch
metadata:
  name: elasticsearch-sample
spec:
  version: 8.15.0
  nodeSets:
    - name: default
      count: 1
      config:
        node.store.allow_mmap: false
---
apiVersion: kibana.k8s.elastic.co/v1
kind: Kibana
metadata:
  name: kibana-sample
spec:
  version: 8.15.0
  count: 1
  elasticsearchRef:
    name: "elasticsearch-sample"
  podTemplate:
    spec:
      containers:
        - name: kibana
          resources:
            requests:
              memory: 1Gi
              cpu: 1
            limits:
              memory: 1Gi
---
apiVersion: autoscaling/v2beta2
kind: HorizontalPodAutoscaler
metadata:
  name: kb
spec:
  scaleTargetRef:
    apiVersion: kibana.k8s.elastic.co/v1
    kind: Kibana
    name: kibana-sample
  minReplicas: 1
  maxReplicas: 4
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 50</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="k8s-managing-compute-resources.html">« Manage compute resources</a>
</span>
<span class="next">
<a href="k8s-stack-config-policy.html">Elastic Stack configuration policies »</a>
</span>
</div>
</body>
</html>
