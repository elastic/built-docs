<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Restore snapshots containing searchable snapshots indices across clusters | Elasticsearch Service Documentation | Elastic</title>
<meta class="elastic" name="content" content="Restore snapshots containing searchable snapshots indices across clusters | Elasticsearch Service Documentation">

<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-restore-across-clusters.html" title="Restore a snapshot across clusters"/>
<link rel="prev" href="ec-restore-snapshots-into-existing-deployment.html" title="Restore snapshot into an existing deployment"/>
<link rel="next" href="ec-snapshot-repository-azure-migration.html" title="Store snapshots of a deployment in a dedicated repository"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elastic Cloud"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="latest"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ec-restore-snapshots-into-existing-deployment.html">« Restore snapshot into an existing deployment</a>
</span>
<span class="next">
<a href="ec-snapshot-repository-azure-migration.html">Store snapshots of a deployment in a dedicated repository »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-snapshot-restore.html">Snapshot and restore</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-restore-across-clusters.html">Restore a snapshot across clusters</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Restore snapshots containing searchable snapshots indices across clusters</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ec-restore-snapshots-containing-searchable-snapshots-indices-across-clusters"></a>Restore snapshots containing searchable snapshots indices across clusters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-109/docs/shared/ec-ce-working-with-snapshots.asciidoc">edit</a></h2>
</div></div></div>
<p>If you are restoring a snapshot from one cluster to another, and that snapshot contains indices that are backed by searchable snapshots, there are a few more requirements to be aware of.</p>
<p>The first versions of Elasticsearch that supported searchable snapshots required that the repository name in the destination cluster, where the snapshot is to be restored from, match the repository name in the source cluster, where the snapshot was taken. Beginning with Elasticsearch version 7.12 this requirement is no longer present, but there are other prerequisites that need to be met.</p>
<p>Pre-requisites for restoring snapshots containing searchable snapshot indices across clusters:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>The source cluster must have been created as version 7.12.0 or higher.</p>
<p>To be more precise the requirement is on the <code class="literal">found-snapshots</code> repository settings at the time the snapshots were taken.
The repository must have a <code class="literal">uuid</code> field, which is supported only in Elasticsearch versions 7.12.0 and higher. If the cluster was created with a previous version and later upgraded to 7.12.0 or higher, the repository may not have the required <code class="literal">uuid</code> field and therefore cannot be used to restore onto another cluster.</p>
<p>To be sure, you can send a <code class="literal">GET /_snapshot/found-snapshots</code> request to your Elasticsearch cluster and check if the <code class="literal">uuid</code> field is present.</p>
</li>
<li class="listitem">
<p>The destination cluster must be version 7.13.2 or higher.</p>
<p>Previous versions had issues restoring the snapshot or recovering searchable snapshot indices in case of, for example, node failure.</p>
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The snapshot in the source cluster cannot be deleted after being successfully restored in the destination cluster.
In fact, that&#8217;s also the case for the searchable snapshots in the source cluster for which there were indices backed by the restored snapshot. These snapshots are required for recovery of the searchable snapshot indices in case of, for example, node failure.</p>
<p>This means that until you delete the searchable snapshot indices in the destination cluster, you must not delete your source deployment, delete the restored snapshot, or delete any of the searchable snapshots used by the searchable snapshot indices.</p>
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ec-restore-snapshots-into-existing-deployment.html">« Restore snapshot into an existing deployment</a>
</span>
<span class="next">
<a href="ec-snapshot-repository-azure-migration.html">Store snapshots of a deployment in a dedicated repository »</a>
</span>
</div>
</body>
</html>
