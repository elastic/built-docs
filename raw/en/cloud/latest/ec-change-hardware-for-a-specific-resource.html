<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Change hardware for a specific resource | Elasticsearch Service Documentation | Elastic</title>
<meta class="elastic" name="content" content="Change hardware for a specific resource | Elasticsearch Service Documentation">

<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-reference-hardware.html" title="Elasticsearch Service hardware"/>
<link rel="prev" href="ec-azure-list-region.html" title="Regional availability of instances per Azure region"/>
<link rel="next" href="ec-reference-regions.html" title="Elasticsearch Service regions"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elastic Cloud"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="latest"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ec-azure-list-region.html">« Regional availability of instances per Azure region</a>
</span>
<span class="next">
<a href="ec-reference-regions.html">Elasticsearch Service regions »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-reference-hardware.html">Elasticsearch Service hardware</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Change hardware for a specific resource</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-111/docs/saas/ec-change-hardware-for-a-specific-resource.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ec-change-hardware-for-a-specific-resource"></a>Change hardware for a specific resource<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-111/docs/saas/ec-change-hardware-for-a-specific-resource.asciidoc">edit</a></h2>
</div></div></div>
<p>The virtual hardware on which Elastic stack deployments run is defined by instance configurations.
To learn more about what an instance configuration is, refer to <a class="xref" href="ec-reference-hardware.html#ec-getting-started-configurations" title="Instance configurations">Instance configurations</a>.</p>
<p>When a deployment is created, each Elasticsearch tier and stateless resource (e.g., Kibana, Enterprise Search) gets an instance configuration assigned to it, based on the hardware profile used.
The combination of instance configurations defined within each hardware profile is designed to provide the best possible outcome for each use case.
Therefore, it is not advisable to use instance configurations that are not specified on the hardware profile, except in specific situations in which we may need to migrate an Elasticsearch tier or stateless resource to a different hardware type.
An example of such a scenario is when a cloud provider stops supporting a hardware type in a specific region.</p>
<h2><a id="ec_migrate_to_a_different_instance_configuration_using_the_api"></a>Migrate to a different instance configuration using the API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-111/docs/saas/ec-change-hardware-for-a-specific-resource.asciidoc">edit</a></h2>
<p>Hardware profile migrations are possible to perform through the Elastic Cloud console, however, migrating a specific tier or resource to a different instance configuration can only be achieved through the API.</p>
<p>Prerequisites:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A valid Elastic Cloud <a class="xref" href="ec-api-authentication.html" title="Access and authentication">API key</a> (<code class="literal">$EC_API_KEY</code>)
</li>
</ul>
</div>
<p>Follow these steps to migrate to a different instance configuration, replacing the default <code class="literal">$EC_API_KEY</code> value with your actual API key:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From the  <a class="xref" href="ec-regions-templates-instances.html" title="Available regions, deployment templates and instance configurations">list of instance configurations available for each region</a>, select the target instance configuration you want to migrate to.
</li>
<li class="listitem">
<p>Get the deployment update payload from the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Service Console</a> <span class="strong strong"><strong>Edit</strong></span> page, by selecting <span class="strong strong"><strong>Equivalent API request</strong></span>, and store it in a file called <code class="literal">migrate_instance_configuration.json</code>.</p>
<p>Example payload containing relevant data for migrating the hot Elasticsearch tier:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "resources": {
    "elasticsearch": [
      {
        "plan": {
          "cluster_topology": [
            {
              "id": "hot_content",
              "instance_configuration_id": "gcp.es.datahot.n2.68x10x45",
              "instance_configuration_version": 1,</pre>
</div>
</li>
<li class="listitem">
Set the <code class="literal">instance_configuration_id</code> field of the Elasticsearch tier or stateless resource you want to migrate to the <span class="strong strong"><strong>Instance ID</strong></span> of the instance configuration selected in step 1.
</li>
<li class="listitem">
<p>If the <code class="literal">instance_configuration_version</code> field is defined for that Elasticsearch tier or stateless resource, remove it from the payload.</p>
<p>Following is the update that would be required to migrate the example above to the <code class="literal">gcp.es.datahot.n2.68x10x95</code> instance configuration:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "resources": {
    "elasticsearch": [
      {
        "plan": {
          "cluster_topology": [
            {
              "id": "hot_content",
              "instance_configuration_id": "gcp.es.datahot.n2.68x10x95",</pre>
</div>
</li>
<li class="listitem">
<p>Use the payload to update your deployment and perform the instance configuration migration.</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPUT https://api.elastic-cloud.com/api/v1/deployments/{deployment_id} \
-H "Authorization: ApiKey $EC_API_KEY" \
-H 'Content-Type: application/json' \
-d @migrate_instance_configuration.json</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can perform multiple instance configuration migrations in the same request.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Having an instance configuration mismatch between the deployment and the hardware profile will cause the Elastic Cloud console to announce that there is a <span class="strong strong"><strong>Newer version available</strong></span> for the hardware profile.
Any hardware profile migration performed through the Elastic Cloud console will cause the instance configurations to be reset to the values in the hardware profile.</p>
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ec-azure-list-region.html">« Regional availability of instances per Azure region</a>
</span>
<span class="next">
<a href="ec-reference-regions.html">Elasticsearch Service regions »</a>
</span>
</div>
</body>
</html>
