<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Register Elastic Cloud SAML in Okta | Elasticsearch Service Documentation | Elastic</title>
<meta class="elastic" name="content" content="Register Elastic Cloud SAML in Okta | Elasticsearch Service Documentation">

<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-saml-sso.html" title="Configure Elastic Cloud SAML single sign-on"/>
<link rel="prev" href="ec-saml-sso.html" title="Configure Elastic Cloud SAML single sign-on"/>
<link rel="next" href="ec-saml-sso-entra.html" title="Register Elastic Cloud SAML in Microsoft Entra ID"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elastic Cloud"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="latest"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ec-saml-sso.html">« Configure Elastic Cloud SAML single sign-on</a>
</span>
<span class="next">
<a href="ec-saml-sso-entra.html">Register Elastic Cloud SAML in Microsoft Entra ID »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-organizations.html">Managing your organization</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-saml-sso.html">Configure Elastic Cloud SAML single sign-on</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Register Elastic Cloud SAML in Okta</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso-okta.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="ec-saml-sso-okta"></a>Register Elastic Cloud SAML in Okta</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-112/docs/saas/ec-organizations-saml-sso-okta.asciidoc">edit</a></div>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>To <a class="xref" href="ec-saml-sso.html" title="Configure Elastic Cloud SAML single sign-on">configure Elastic Cloud SAML SSO</a> with Okta as the identity provider (IdP):</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Create a new SAML 2.0 application in Okta.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Provide a name for the application and initially use placeholder SAML settings such as <code class="literal">http://example.com/sso</code> and <code class="literal">http://example.com/sp</code> for the SSO URL and audience URI.
</li>
<li class="listitem">
Add attribute statements for your organization members' email addresses. These addresses should match the domains that you claimed per <a class="xref" href="ec-saml-sso.html#ec-saml-sso-claim-domain" title="Claim a domain">Claim a domain</a>. Optionally add first and last names, which will be used to set the respective fields of the user&#8217;s Elastic Cloud account.
</li>
</ol>
</div>
</li>
<li class="listitem">
Save the application.
</li>
<li class="listitem">
<p>Collect information about the application from the Okta <span class="strong strong"><strong>Sign on</strong></span> tab.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Get the SAML issuer and the SSO URL, which is the URL of the IdP where users will be redirected at login.
</li>
<li class="listitem">
Download the signing certificate of the SAML 2 application.
</li>
</ol>
</div>
</li>
<li class="listitem">
<p><a class="xref" href="ec-saml-sso.html#ec-saml-sso-register-idp" title="Register a SAML IdP">Register the IdP with Elastic Cloud</a>.</p>
<p>For example:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -XPUT \
-H 'Content-Type: application/json' \
-H "Authorization: ApiKey $EC_API_KEY" \
"https://api.elastic-cloud.com/api/v1/organizations/$ORGANIZATION_ID/idp" \
-d '
{
  "enabled": true,
  "login_identifier_prefix": "&lt;businessname&gt;", <a id="CO41-1"></a><i class="conum" data-value="1"></i>
  "name": "SSO with &lt;businessname&gt;",
  "saml_idp": {
    "public_certificate": [ <a id="CO41-2"></a><i class="conum" data-value="2"></i>
      "&lt;publiccert&gt;"
    ],
    "issuer": "&lt;issuer&gt;", <a id="CO41-3"></a><i class="conum" data-value="3"></i>
    "sso_url": "&lt;ssourl&gt;", <a id="CO41-4"></a><i class="conum" data-value="4"></i>
    "subject": {
      "format": "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified" <a id="CO41-5"></a><i class="conum" data-value="5"></i>
    }
  }
}
'</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO41-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">login_identifier_prefix</code> is a customizable piece of the Elastic Cloud SSO url that your organization members can use to authenticate. This could be the name of your business. You can use alphanumeric characters and hyphens in this value and you can change it later.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO41-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">public_certificate</code> is the Base64-encoded DER-encoded certificate that you downloaded. You must remove newlines and any PEM markers (such as <code class="literal">-----BEGIN CERTIFICATE-----</code> or <code class="literal">-----END CERTIFICATE-----</code>) so that the certificate is a single-line Base64-encoded string.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO41-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">issuer</code> is the "Issuer" obtained from the Okta <span class="strong strong"><strong>Sign on</strong></span> tab.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO41-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">sso_url</code> is the "Sign on URL" obtained from the Okta <span class="strong strong"><strong>Sign on</strong></span> tab.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO41-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">format</code> is the SAML name-id format to use.</p>
</td>
</tr>
</table>
</div>
<p>If successful, the API will return the details that will need to be provided to the IdP.
For example:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">{
	"login_identifier": "&lt;loginidentifier&gt;",
	"sso_login_url": "https://cloud.elastic.co/login/sso/&lt;loginidentifier&gt;", <a id="CO42-1"></a><i class="conum" data-value="1"></i>
	"metadata_url": "https://cloud.elastic.co/api/v1/organizations/&lt;orgid&gt;/idp/metadata.xml",
	"acs": "&lt;acs&gt;", <a id="CO42-2"></a><i class="conum" data-value="2"></i>
	"sp_entity_id": "https://cloud.elastic.co/organizations/&lt;orgid&gt;", <a id="CO42-3"></a><i class="conum" data-value="3"></i>
	"signing_certificate": [ <a id="CO42-4"></a><i class="conum" data-value="4"></i>
		"&lt;cert&gt;"
	]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO42-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">sso_login_url</code> is the URL you can provide to organization members to initiate SSO with your Elastic Cloud organization.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO42-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">acs</code> is the SAML assertion consumer service that your SAML IdP should send SAML assertions.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO42-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">sp_entity_id</code> is the SAML entity ID of the service provider that your SAML IdP should send in the SAML audience.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO42-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">signing_certificate</code> is the Base64-encoded DER-encoded certificate that SAML requests to your IdP will be signed with.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
<p>Update your SAML 2 application in Okta to use the values returned by the registration API.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Set the single sign-on URL to the <code class="literal">ssl_login_url</code>.
</li>
<li class="listitem">
Set the audience URI (SP entity ID) to the <code class="literal">sp_entity_id</code>.
</li>
<li class="listitem">
Upload the <code class="literal">signing_certificate</code> as the signature certificate.
</li>
</ol>
</div>
</li>
</ol>
</div>
<p>When these steps are complete, you should be able to test SSO as described in <a class="xref" href="ec-saml-sso.html" title="Configure Elastic Cloud SAML single sign-on"><em>Configure Elastic Cloud SAML SSO</em></a>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ec-saml-sso.html">« Configure Elastic Cloud SAML single sign-on</a>
</span>
<span class="next">
<a href="ec-saml-sso-entra.html">Register Elastic Cloud SAML in Microsoft Entra ID »</a>
</span>
</div>
</body>
</html>
