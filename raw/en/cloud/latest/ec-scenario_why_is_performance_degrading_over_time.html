<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Why is performance degrading over time? | Elasticsearch Service Documentation | Elastic</title>
<meta class="elastic" name="content" content="Why is performance degrading over time? | Elasticsearch Service Documentation">

<link rel="home" href="index.html" title="Elasticsearch Service Documentation"/>
<link rel="up" href="ec-monitoring.html" title="Keeping your deployment healthy"/>
<link rel="prev" href="ec-remediate-issues-allocation-explain-API.html" title="Remediate common issues returned by the cluster allocation explain API"/>
<link rel="next" href="ec-scenario_is_my_cluster_really_highly_available.html" title="Is my cluster really highly available?"/>
<meta class="elastic" name="product_version" content="latest"/>
<meta class="elastic" name="product_name" content="Elastic Cloud"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Cloud/Reference"/>
<meta name="DC.subject" content="Elastic Cloud"/>
<meta name="DC.identifier" content="latest"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ec-monitoring.html">Keeping your deployment healthy</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ec-remediate-issues-allocation-explain-API.html">« Remediate common issues returned by the cluster allocation explain API</a>
</span>
<span class="next">
<a href="ec-scenario_is_my_cluster_really_highly_available.html">Is my cluster really highly available? »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ec-scenario_why_is_performance_degrading_over_time"></a>Why is performance degrading over time?<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/cloud/edit/ms-90/docs/shared/ec-ce-monitoring-scenarios.asciidoc">edit</a></h2>
</div></div></div>
<p>You have a smaller Elasticsearch cluster and you&#8217;ve noticed that performance seems to have declined recently. The response time during searches seems to have gone up, and overall the system just doesn&#8217;t seem to perform quite as well as it used to. You have already looked at the cluster performance metrics and have confirmed that both index and search response times have increased steadily and remained higher than before. So what explains the performance degradation?</p>
<p>When you look in the <span class="strong strong"><strong>Cluster Performance Metrics</strong></span> section of the <a href="https://cloud.elastic.co?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Elasticsearch Service Console</a>, you get the following metrics:</p>
<div class="imageblock">
<div class="content">
<img src="images/metrics-credits.png" alt="CPU usage versus CPU credits over time">
</div>
</div>
<p>Between just after 00:10 and 00:20, excessively high CPU usage consumes all CPU credits until no more credits are available. CPU credits enable boosting the assigned CPU resources temporarily to improve performance on smaller clusters up to and including 8 GB of RAM when it is needed most, but CPU credits are by their nature limited. You accumulate CPU credits when you use less than your assigned share of CPU resources, and you consume credits when you use more CPU resources than assigned. As you max out your CPU resources, CPU credits permit your cluster to consume more than 100% of the assigned resources temporarily, which explains why CPU usage exceeds 100%, with usage peaks that reach well over 400% for one node. As CPU credits are depleted, CPU usage gradually drops until it returns to 100% at 00:30 when no more CPU credits are available. You can also notice that after 00:30 credits gradually begin to accumulate again.</p>
<p>If you need your cluster to be able to sustain a certain level of performance, you cannot rely on CPU boosting to handle the workload except temporarily. To ensure that performance can be sustained, consider increasing the size of your cluster.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ec-remediate-issues-allocation-explain-API.html">« Remediate common issues returned by the cluster allocation explain API</a>
</span>
<span class="next">
<a href="ec-scenario_is_my_cluster_really_highly_available.html">Is my cluster really highly available? »</a>
</span>
</div>
</div>
</body>
</html>
