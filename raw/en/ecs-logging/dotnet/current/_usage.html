<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Usage | ECS Logging .NET Reference | Elastic</title>
<meta class="elastic" name="content" content="Usage | ECS Logging .NET Reference">

<link rel="home" href="index.html" title="ECS Logging .NET Reference"/>
<link rel="up" href="ecs-dotnet.html" title=".NET Model of ECS"/>
<link rel="prev" href="ecs-dotnet.html" title=".NET Model of ECS"/>
<link rel="next" href="intro_to_xyz.html" title="A note on the Metadata property"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="ECS Logging .NET Reference"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/ECS-logging/.NET/Guide"/>
<meta name="DC.subject" content="ECS Logging .NET Reference"/>
<meta name="DC.identifier" content="master"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="ecs-dotnet.html">« .NET Model of ECS</a>
</span>
<span class="next">
<a href="intro_to_xyz.html">A note on the <code class="literal">Metadata</code> property »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
  <div id="related-products" class="dropdown">
    <div class="related-products-title">ECS Logging:</div>
    <div class="dropdown-anchor" tabindex="0">.NET Reference<span class="dropdown-icon"></span></div>
    <div class="dropdown-content">
      <ul>
        <li><a href="/guide/en/ecs-logging/overview/current/intro.html">Reference</a></li>
        <li><a href="/guide/en/ecs-logging/go-logrus/current/intro.html">Go (Logrus) Reference</a></li>
        <li><a href="/guide/en/ecs-logging/go-zap/current/intro.html">Go (zap) Reference</a></li>
        <li><a href="/guide/en/ecs-logging/go-zerolog/current/intro.html">Go (zerolog) Reference</a></li>
        <li><a href="/guide/en/ecs-logging/java/current/intro.html">Java Reference</a></li>
        <li><a href="/guide/en/ecs-logging/dotnet/current/intro.html">.NET Reference</a></li>
        <li><a href="/guide/en/ecs-logging/nodejs/current/intro.html">Node.js Reference</a></li>
        <li><a href="/guide/en/ecs-logging/ruby/current/intro.html">Ruby Reference</a></li>
        <li><a href="/guide/en/ecs-logging/php/current/intro.html">PHP Reference</a></li>
        <li><a href="/guide/en/ecs-logging/python/current/intro.html">Python Reference</a></li>
      </ul>
    </div>
  </div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ecs-dotnet.html">.NET Model of ECS</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Usage</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/types/types.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="_usage"></a>Usage</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/types/types.asciidoc">edit</a></div>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="_creating_an_ecs_event"></a>Creating an ECS event</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/types/types.asciidoc">edit</a></div>
</div></div></div>
<p>The recommended way to create instances of <code class="literal">EcsDocument</code> is through:</p>
<div class="pre_wrapper lang-csharp">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-csharp">var doc = EcsDocument.CreateNewWithDefaults&lt;EcsDocument&gt;();</pre>
</div>
<p>This will automatically assign most common ECS fields that can be inferred from the running process.</p>
<p>However there is no requirement to do so,  simply creating a new <code class="literal">EcsDocument</code> instance directly
is completely valid and supported.</p>
<div class="pre_wrapper lang-csharp">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-csharp">var ecsDocument = new EcsDocument
{
	Timestamp = DateTimeOffset.Parse("2019-10-23T19:44:38.485Z"),
	Dns = new Dns
	{
		Id = "23666",
		OpCode = "QUERY",
		Type = "answer",
		QuestionName = "www.example.com",
		QuestionType = "A",
		QuestionClass = "IN",
		QuestionRegisteredDomain = "example.com",
		HeaderFlags = new[] { "RD", "RA" },
		ResponseCode = "NOERROR",
		ResolvedIp = new[] { "10.0.190.47", "10.0.190.117" },
		Answers = new[]
		{
			new DnsAnswers
			{
				Data = "10.0.190.47",
				Name = "www.example.com",
				Type = "A",
				Class = "IN",
				Ttl = 59
			},
			new DnsAnswers
			{
				Data = "10.0.190.117",
				Name = "www.example.com",
				Type = "A",
				Class = "IN",
				Ttl = 59
			}
		}
	},
	Network = new Network
	{
		Type = "ipv4",
		Transport = "udp",
		Protocol = "dns",
		Direction = "outbound",
		CommunityId = "1:19beef+RWVW9+BEEF/Q45VFU+2Y=",
		Bytes = 126
	},
	Source = new Source { Ip = "192.168.86.26", Port = 5785, Bytes = 31 },
	Destination = new Destination { Ip = "8.8.4.4", Port = 53, Bytes = 95 },
	Client = new Client { Ip = "192.168.86.26", Port = 5785, Bytes = 31 },
	Server = new Server { Ip = "8.8.4.4", Port = 53, Bytes = 95 },
	Event = new Event
	{
		Duration = 122433000,
		Start = DateTimeOffset.Parse("2019-10-23T19:44:38.485Z"),
		End = DateTimeOffset.Parse("2019-10-23T19:44:38.607Z"),
		Kind = "event",
		Category = new[] { "network_traffic" }
	},
	Ecs = new Ecs { Version = "1.2.0" },
	Metadata = new Dictionary&lt;string, object&gt; { { "client", "ecs-dotnet" } }
};</pre>
</div>
<div class="position-relative"><h3><a id="_dynamically_assign_ecs_fields"></a>Dynamically assign ECS fields</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ecs-dotnet/edit/do-not-delete_legacy-docs/docs/types/types.asciidoc">edit</a></div>
<p>Additionally, ECS fields can be dynamically assigned through</p>
<div class="pre_wrapper lang-csharp">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-csharp">ecsDocument.AssignProperty("orchestrator.cluster.id", "id");</pre>
</div>
<p>This will assign <code class="literal">ecsDocument.Orchestrator.ClusterId</code> to <code class="literal">"id"</code> and automatically create a new <code class="literal">Orchestrator</code> instance if needed.</p>
<p>Any <code class="literal">string</code> or <code class="literal">boolean</code> value that is not a known <code class="literal">ecs</code> field will be assigned to <code class="literal">labels.*</code> and everything else to <code class="literal">metatadata.*</code></p>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ecs-dotnet.html">« .NET Model of ECS</a>
</span>
<span class="next">
<a href="intro_to_xyz.html">A note on the <code class="literal">Metadata</code> property »</a>
</span>
</div>
</body>
</html>
