<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elasticsearch breaking changes | Installation and Upgrade Guide [7.9] | Elastic</title>
<link rel="home" href="index.html" title="Installation and Upgrade Guide [7.9]"/>
<link rel="up" href="elastic-stack-breaking-changes.html" title="Breaking changes"/>
<link rel="prev" href="beats-breaking-changes.html" title="Beats breaking changes"/>
<link rel="next" href="elasticsearch-hadoop-breaking-changes.html" title="Elasticsearch Hadoop breaking changes"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Installation and Upgrade/7.9"/>
<meta name="DC.subject" content="Elastic Stack"/>
<meta name="DC.identifier" content="7.9"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Installation and Upgrade Guide [7.9]</a></span>
»
<span class="breadcrumb-link"><a href="elastic-stack-breaking-changes.html">Breaking changes</a></span>
»
<span class="breadcrumb-node">Elasticsearch breaking changes</span>
</div>
<div class="navheader">
<span class="prev">
<a href="beats-breaking-changes.html">« Beats breaking changes</a>
</span>
<span class="next">
<a href="elasticsearch-hadoop-breaking-changes.html">Elasticsearch Hadoop breaking changes »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="elasticsearch-breaking-changes"></a>Elasticsearch breaking changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.9/docs/en/install-upgrade/breaking.asciidoc">edit</a></h2>
</div></div></div>

<p>This list summarizes the most important breaking changes in Elasticsearch 7.9.3. For
the complete list, go to <a href="/guide/en/elasticsearch/reference/7.9/breaking-changes.html" class="ulink" target="_top">Elasticsearch breaking changes</a>.</p>
<h3><a id="breaking_79_indices_changes"></a>Indices changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/migration/migrate_7_9.asciidoc">edit</a></h3>
<details>
<summary class="title">Elasticsearch includes built-in index templates for <code class="literal">logs-*-*</code> and <code class="literal">metrics-*-*</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 7.9, Elasticsearch added built-in index templates for the <code class="literal">metrics-*-*</code> and
<code class="literal">logs-*-*</code> index patterns, each with a priority of <code class="literal">100</code>.
<a href="/guide/en/ingest-management/7.9/ingest-management-overview.html" class="ulink" target="_top">Elastic Agent</a> uses these templates to
create data streams.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If you use Elastic Agent, assign your index templates a priority
lower than <code class="literal">100</code> to avoid overriding the built-in templates.</p>
<p>Otherwise, to avoid accidentally applying the built-in templates, use a
non-overlapping index pattern or assign templates with an overlapping pattern a
<code class="literal">priority</code> higher than <code class="literal">100</code>.</p>
<p>For example, if you don&#8217;t use Elastic Agent and want to use a template for the
<code class="literal">logs-*</code> index pattern, assign your template a priority of <code class="literal">200</code>. This ensures
your template is applied instead of the built-in template for <code class="literal">logs-*-*</code>.</p>
</div>
</details>
<h3><a id="breaking_79_script_cache_changes"></a>Script cache changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/migration/migrate_7_9.asciidoc">edit</a></h3>
<details id="deprecate_general_script_cache_size">
<summary class="title">The <code class="literal">script.cache.max_size</code> setting is deprecated.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">script.cache.max_size</code> setting is deprecated. In Elasticsearch 8.0.0, this is
set per-context.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To avoid deprecation warnings, discontinue use of the <code class="literal">script.cache.max_size</code>
setting. You may use <code class="literal">script.context.$CONTEXT.cache_max_size</code> for the particular context.
For example, for the <code class="literal">ingest</code> context, use <code class="literal">script.context.ingest.cache_max_size</code>.</p>
</div>
</details>
<details id="deprecate_general_script_expire">
<summary class="title">The <code class="literal">script.cache.expire</code> setting is deprecated.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">script.cache.expire</code> setting is deprecated. In Elasticsearch 8.0.0, this is
set per-context.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To avoid deprecation warnings, discontinue use of the <code class="literal">script.cache.expire</code>
setting. You may use <code class="literal">script.context.$CONTEXT.cache_expire</code> for the particular context.
For example, for the <code class="literal">update</code> context, use <code class="literal">script.context.update.cache_expire</code>.</p>
</div>
</details>
<details id="deprecate_general_script_compile_rate">
<summary class="title">The <code class="literal">script.max_compilations_rate</code> setting is deprecated.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">script.max_compilations_rate</code> setting is deprecated. In Elasticsearch 8.0.0, this is
set per-context.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To avoid deprecation warnings, discontinue use of the <code class="literal">script.max_compilations_rate</code>
setting. You may use <code class="literal">script.context.$CONTEXT.max_compilations_rate</code> for the particular
context.  For example, for the <code class="literal">processor_conditional</code> context, use
<code class="literal">script.context.processor_conditional.max_compilations_rate</code>.</p>
</div>
</details>
<details id="deprecate_mapping_updates_for_ingest_privileges">
<summary class="title">Mapping actions have been deprecated for the <code class="literal">create_doc</code>, <code class="literal">create</code>, <code class="literal">index</code> and <code class="literal">write</code> privileges.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In Elasticsearch 8.0.0, the following privileges will no longer allow users to
explicitly update the mapping of an index:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">create_doc</code>
</li>
<li class="listitem">
<code class="literal">create</code>
</li>
<li class="listitem">
<code class="literal">index</code>
</li>
<li class="listitem">
<code class="literal">write</code>
</li>
</ul>
</div>
<p>Additionally, in Elasticsearch 8.0.0, the following privileges will no longer allow users to
<a href="/guide/en/elasticsearch/reference/7.9/dynamic-mapping.html" class="ulink" target="_top">dynamically update the mapping</a> of an index
during indexing or ingest:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">create_doc</code>
</li>
<li class="listitem">
<code class="literal">create</code>
</li>
<li class="listitem">
<code class="literal">index</code>
</li>
</ul>
</div>
<p>These privileges will continue to allow mapping actions on indices (but not on data streams) until
Elasticsearch 8.0.0. However, deprecation warnings will be returned.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To allow users to explicitly update the mapping of an index,
grant the <code class="literal">manage</code> privilege.</p>
<p>To dynamically update the mapping of an index during indexing or
ingest, grant the <code class="literal">auto_configure</code> privilege and use index templates. This lets
you dynamically update the index mapping based on the template&#8217;s mapping configuration.</p>
</div>
</details>
<h3><a id="breaking_79_settings_changes"></a>Settings changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/migration/migrate_7_9.asciidoc">edit</a></h3>
<details id="deprecate_auto_import_dangling_indices">
<summary class="title">Automatically importing dangling indices is disabled by default.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Automatically importing
<a href="/guide/en/elasticsearch/reference/7.9/modules-gateway.html#dangling-indices" class="ulink" target="_top">dangling indices</a> into the cluster
is unsafe and is now disabled by default. This feature will be removed entirely
in Elasticsearch 8.0.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <a href="/guide/en/elasticsearch/reference/7.9/indices.html#dangling-indices-api" class="ulink" target="_top">dangling indices API</a> to list,
delete or import any dangling indices manually.</p>
<p>Alternatively you can enable automatic imports of dangling indices, recovering
the unsafe behaviour of earlier versions, by setting
<code class="literal">gateway.auto_import_dangling_indices</code> to <code class="literal">true</code>. This setting is deprecated
and will be removed in Elasticsearch 8.0.0. We do not recommend using this setting.</p>
</div>
</details>
</div>
<div class="navfooter">
<span class="prev">
<a href="beats-breaking-changes.html">« Beats breaking changes</a>
</span>
<span class="next">
<a href="elasticsearch-hadoop-breaking-changes.html">Elasticsearch Hadoop breaking changes »</a>
</span>
</div>
</div>
</body>
</html>
