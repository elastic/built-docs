<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Clear Scroll API | Java REST Client [6.8] | Elastic</title>
<meta class="elastic" name="content" content="Clear Scroll API | Java REST Client [6.8]">

<link rel="home" href="index.html" title="Java REST Client [6.8]"/>
<link rel="up" href="_search_apis.html" title="Search APIs"/>
<link rel="prev" href="java-rest-high-search-scroll.html" title="Search Scroll API"/>
<link rel="next" href="java-rest-high-multi-search.html" title="Multi-Search API"/>
<meta class="elastic" name="product_version" content="6.8"/>
<meta class="elastic" name="product_name" content="Clients"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Clients/JavaREST/6.8"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="6.8"/>
</head>
<body>
<div class="page_header">
<p>
  <strong>NOTE</strong>: You are looking at documentation for an older release. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div class="navheader">
<span class="prev">
<a href="java-rest-high-search-scroll.html">« Search Scroll API</a>
</span>
<span class="next">
<a href="java-rest-high-multi-search.html">Multi-Search API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Java REST Client [6.8]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="java-rest-high.html">Java High Level REST Client</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="_search_apis.html">Search APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Clear Scroll API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/6.8/docs/java-rest/high-level/search/scroll.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="java-rest-high-clear-scroll"></a>Clear Scroll API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/6.8/docs/java-rest/high-level/search/scroll.asciidoc">edit</a></h2>
</div></div></div>
<p>The search contexts used by the Search Scroll API are automatically deleted when the scroll
times out. But it is advised to release search contexts as soon as they are not
necessary anymore using the Clear Scroll API.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="java-rest-high-clear-scroll-request"></a>Clear Scroll Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/6.8/docs/java-rest/high-level/search/scroll.asciidoc">edit</a></h3>
</div></div></div>
<p>A <code class="literal">ClearScrollRequest</code> can be created as follows:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">ClearScrollRequest request = new ClearScrollRequest(); <a id="CO215-1"></a><i class="conum" data-value="1"></i>
request.addScrollId(scrollId); <a id="CO215-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO215-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a new <code class="literal">ClearScrollRequest</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO215-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Adds a scroll id to the list of scroll identifiers to clear</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_providing_the_scroll_identifiers"></a>Providing the scroll identifiers<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/6.8/docs/java-rest/high-level/search/scroll.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">ClearScrollRequest</code> allows to clear one or more scroll identifiers in a single request.</p>
<p>The scroll identifiers can be added to the request one by one:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">request.addScrollId(scrollId);</pre>
</div>
<p>Or all together using:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">request.setScrollIds(scrollIds);</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="java-rest-high-clear-scroll-sync"></a>Synchronous Execution<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/6.8/docs/java-rest/high-level/search/scroll.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">ClearScrollResponse response = client.clearScroll(request, RequestOptions.DEFAULT);</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="java-rest-high-clear-scroll-async"></a>Asynchronous Execution<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/6.8/docs/java-rest/high-level/search/scroll.asciidoc">edit</a></h3>
</div></div></div>
<p>The asynchronous execution of a clear scroll request requires both the <code class="literal">ClearScrollRequest</code>
instance and an <code class="literal">ActionListener</code> instance to be passed to the asynchronous
method:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">client.clearScrollAsync(request, RequestOptions.DEFAULT, listener); <a id="CO216-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO216-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">ClearScrollRequest</code> to execute and the <code class="literal">ActionListener</code> to use when
the execution completes</p>
</td>
</tr>
</table>
</div>
<p>The asynchronous method does not block and returns immediately. Once it is
completed the <code class="literal">ActionListener</code> is called back using the <code class="literal">onResponse</code> method
if the execution successfully completed or using the <code class="literal">onFailure</code> method if
it failed.</p>
<p>A typical listener for <code class="literal">ClearScrollResponse</code> looks like:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">ActionListener&lt;ClearScrollResponse&gt; listener =
        new ActionListener&lt;ClearScrollResponse&gt;() {
    @Override
    public void onResponse(ClearScrollResponse clearScrollResponse) {
        <a id="CO217-1"></a><i class="conum" data-value="1"></i>
    }

    @Override
    public void onFailure(Exception e) {
        <a id="CO217-2"></a><i class="conum" data-value="2"></i>
    }
};</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO217-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Called when the execution is successfully completed. The response is
provided as an argument</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO217-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Called in case of failure. The raised exception is provided as an argument</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="java-rest-high-clear-scroll-response"></a>Clear Scroll Response<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/6.8/docs/java-rest/high-level/search/scroll.asciidoc">edit</a></h3>
</div></div></div>
<p>The returned <code class="literal">ClearScrollResponse</code> allows to retrieve information about the released
 search contexts:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">boolean success = response.isSucceeded(); <a id="CO218-1"></a><i class="conum" data-value="1"></i>
int released = response.getNumFreed(); <a id="CO218-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO218-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Return true if the request succeeded</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO218-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Return the number of released search contexts</p>
</td>
</tr>
</table>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="java-rest-high-search-scroll.html">« Search Scroll API</a>
</span>
<span class="next">
<a href="java-rest-high-multi-search.html">Multi-Search API »</a>
</span>
</div>
</body>
</html>
