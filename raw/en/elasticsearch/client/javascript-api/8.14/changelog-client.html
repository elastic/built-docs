<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Release notes | Elasticsearch JavaScript Client [8.14] | Elastic</title>
<meta class="elastic" name="content" content="Release notes | Elasticsearch JavaScript Client [8.14]">

<link rel="home" href="index.html" title="Elasticsearch JavaScript Client [8.14]"/>
<link rel="up" href="index.html" title="Elasticsearch JavaScript Client [8.14]"/>
<link rel="prev" href="getting-started-js.html" title="Getting started"/>
<link rel="next" href="installation.html" title="Installation"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Clients"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Clients/JavaScript/8.14"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="getting-started-js.html">« Getting started</a>
</span>
<span class="next">
<a href="installation.html">Installation »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch JavaScript Client [8.14]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Release notes</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="changelog-client"></a>Release notes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h2>
</div></div></div>
<h3><a id="_8_14_0"></a>8.14.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_2"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_14_0"></a>Support for Elasticsearch <code class="literal">v8.14.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.14/release-notes-8.14.0.html" class="ulink" target="_top">here</a>.</p>
<h5><a id="_esql_object_api_helper"></a>ES|QL object API helper<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>A helper method has been added that parses the response of an ES|QL query and converts it into an array of objects.
A TypeScript type parameter can also be provided to improve developer experience when working with the result. <a href="https://github.com/elastic/elasticsearch-js/pull/2238" class="ulink" target="_top">#2238</a></p>
<h5><a id="_onsuccess_callback_added_to_bulk_helper"></a><code class="literal">onSuccess</code> callback added to bulk helper<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The bulk helper now supports an <code class="literal">onSuccess</code> callback that will be called for each successful operation. <a href="https://github.com/elastic/elasticsearch-js/pull/2199" class="ulink" target="_top">#2199</a></p>
<h5><a id="_request_retries_are_more_polite"></a>Request retries are more polite<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><a href="https://github.com/elastic/elastic-transport-js/releases/tag/v8.6.0" class="ulink" target="_top"><code class="literal">@elastic/transport</code> v8.6.0</a> was released, which refactored when and how failed requests are retried. Timed-out requests are no longer retried by default, and retries now use exponential backoff rather than running immediately.</p>
<h3><a id="_8_13_1"></a>8.13.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_pin_elastictransport_to_8_4_1"></a>Pin @elastic/transport to <code class="literal">~8.4.1</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.4.1</code> to <code class="literal">~8.4.1</code> ensures 8.13 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<p>v8.13.0 was also released depending on v8.4.0 of <code class="literal">@elastic/transport</code> instead of v8.4.1, which was unintentional.</p>
<h3><a id="_8_13_0"></a>8.13.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_3"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_13_0"></a>Support for Elasticsearch <code class="literal">v8.13.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.13/release-notes-8.13.0.html" class="ulink" target="_top">here</a>.</p>
<h4><a id="_fixes_2"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_ensure_new_connections_inherit_clients_set_defaults_2159"></a>Ensure new connections inherit client&#8217;s set defaults <a href="https://github.com/elastic/elasticsearch-js/pull/2159" class="ulink" target="_top">#2159</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>When instantiating a client, any connection-related defaults (e.g. <code class="literal">requestTimeout</code>) set on that client instance would not be inherited by nodes if they were entered as strings rather than a <code class="literal">ConnectionOptions</code> object.</p>
<h3><a id="_8_12_3"></a>8.12.3<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_3"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_bump_elastictransport_to_8_4_1"></a>Bump @elastic/transport to <code class="literal">~8.4.1</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.4.1</code> to <code class="literal">~8.4.1</code> ensures 8.12 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<h3><a id="_8_12_2"></a>8.12.2<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_4"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_upgrade_transport_to_8_4_1_2137"></a>Upgrade transport to 8.4.1 <a href="https://github.com/elastic/elasticsearch-js/pull/2137" class="ulink" target="_top">#2137</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Upgrades <code class="literal">@elastic/transport</code> to 8.4.1 to resolve <a href="https://github.com/elastic/elastic-transport-js/pull/83" class="ulink" target="_top">a bug</a> where arrays in error diagnostics were unintentionally transformed into objects.</p>
<h3><a id="_8_12_1"></a>8.12.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_5"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_fix_hang_in_bulk_helper_semaphore_2027"></a>Fix hang in bulk helper semaphore <a href="https://github.com/elastic/elasticsearch-js/pull/2027" class="ulink" target="_top">#2027</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The failing state could be reached when a server&#8217;s response times are slower than flushInterval.</p>
<h3><a id="_8_12_0"></a>8.12.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h3><a id="_features_4"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h5><a id="_support_for_elasticsearch_v8_12_0"></a>Support for Elasticsearch <code class="literal">v8.12.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.12/release-notes-8.12.0.html" class="ulink" target="_top">here</a>.</p>
<h3><a id="_8_11_1"></a>8.11.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_6"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_bump_elastictransport_to_8_4_0"></a>Bump @elastic/transport to <code class="literal">~8.4.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.4.0</code> to <code class="literal">~8.4.0</code> ensures 8.11 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<h3><a id="_8_11_0"></a>8.11.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_5"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_11_0"></a>Support for Elasticsearch <code class="literal">v8.11.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.11/release-notes-8.11.0.html" class="ulink" target="_top">here</a>.</p>
<h5><a id="_enhanced_support_for_redacting_potentially_sensitive_data_2095"></a>Enhanced support for redacting potentially sensitive data <a href="https://github.com/elastic/elasticsearch-js/pull/2095" class="ulink" target="_top">#2095</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><code class="literal">@elastic/transport</code> <a href="https://github.com/elastic/elastic-transport-js/releases/tag/v8.4.0" class="ulink" target="_top">version 8.4.0</a> introduces enhanced measures for ensuring that request metadata attached to some <code class="literal">Error</code> objects is redacted. This functionality is primarily to address custom logging solutions that don&#8217;t use common serialization methods like <code class="literal">JSON.stringify</code>, <code class="literal">console.log</code>, or <code class="literal">util.inspect</code>, which were already accounted for.</p>
<p>See <a class="xref" href="advanced-config.html#redaction" title="Redaction of potentially sensitive data">Redaction of potentially sensitive data</a> for more information.</p>
<h3><a id="_8_10_1"></a>8.10.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_7"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_bump_elastictransport_to_8_3_4"></a>Bump @elastic/transport to <code class="literal">~8.3.4</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.3.4</code> to <code class="literal">~8.3.4</code> ensures 8.10 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<h3><a id="_8_10_0"></a>8.10.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_6"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_10_0"></a>Support for Elasticsearch <code class="literal">v8.10.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.10/release-notes-8.10.0.html" class="ulink" target="_top">here</a>.</p>
<h3><a id="_8_9_2"></a>8.9.2<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_8"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_bump_elastictransport_to_8_3_4_2"></a>Bump @elastic/transport to <code class="literal">~8.3.4</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.3.4</code> to <code class="literal">~8.3.4</code> ensures 8.9 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<h3><a id="_8_9_1"></a>8.9.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_9"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_upgrade_transport_1968"></a>Upgrade Transport <a href="https://github.com/elastic/elasticsearch-js/pull/1968" class="ulink" target="_top">#1968</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Upgrades <code class="literal">@elastic/transport</code> to the latest patch release to fix <a href="https://github.com/elastic/elastic-transport-js/pull/69" class="ulink" target="_top">a bug</a> that could cause the process to exit when handling malformed <code class="literal">HEAD</code> requests.</p>
<h3><a id="_8_9_0"></a>8.9.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_7"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_9_0"></a>Support for Elasticsearch <code class="literal">v8.9.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.9/release-notes-8.9.0.html" class="ulink" target="_top">here</a>.</p>
<h5><a id="_allow_document_to_be_overwritten_in_ondocument_iteratee_of_bulk_helper_1732"></a>Allow document to be overwritten in <code class="literal">onDocument</code> iteratee of bulk helper <a href="https://github.com/elastic/elasticsearch-js/pull/1732" class="ulink" target="_top">#1732</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>In the <a href="/guide/en/elasticsearch/client/javascript-api/current/client-helpers.html#bulk-helper" class="ulink" target="_top">bulk helper</a>, documents could not be modified before being sent to Elasticsearch. It is now possible to <a href="/guide/en/elasticsearch/client/javascript-api/current/client-helpers.html#_modifying_a_document_before_operation" class="ulink" target="_top">modify a document</a> before sending it.</p>
<h4><a id="_fixes_10"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_updated_user_agent_header_1954"></a>Updated <code class="literal">user-agent</code> header <a href="https://github.com/elastic/elasticsearch-js/pull/1954" class="ulink" target="_top">#1954</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The <code class="literal">user-agent</code> header the client used to connect to Elasticsearch was using a non-standard format that has been improved.</p>
<h3><a id="_8_8_2"></a>8.8.2<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_11"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_bump_elastictransport_to_8_3_2"></a>Bump @elastic/transport to <code class="literal">~8.3.2</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.3.2</code> to <code class="literal">~8.3.2</code> ensures 8.8 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<h3><a id="_8_8_1"></a>8.8.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_8"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_8_1"></a>Support for Elasticsearch <code class="literal">v8.8.1</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.8/release-notes-8.8.1.html" class="ulink" target="_top">here</a>.</p>
<h4><a id="_fixes_12"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_fix_index_drift_bug_in_bulk_helper_1759"></a>Fix index drift bug in bulk helper <a href="https://github.com/elastic/elasticsearch-js/pull/1759" class="ulink" target="_top">#1759</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Fixes a bug in the bulk helper that would cause <code class="literal">onDrop</code> to send back the wrong JSON document or error on a nonexistent document when an error occurred on a bulk HTTP request that contained a <code class="literal">delete</code> action.</p>
<h5><a id="_fix_a_memory_leak_caused_by_an_outdated_version_of_undici_1902"></a>Fix a memory leak caused by an outdated version of Undici <a href="https://github.com/elastic/elasticsearch-js/pull/1902" class="ulink" target="_top">#1902</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Undici 5.5.1, used by <a href="https://github.com/elastic/elastic-transport-js" class="ulink" target="_top">elastic-transport-js</a>, could create a memory leak when a high volume of requests created too many HTTP <code class="literal">abort</code> listeners. Upgrading Undici to 5.22.1 removed the memory leak.</p>
<h3><a id="_8_8_0"></a>8.8.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_9"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_8_0"></a>Support for Elasticsearch <code class="literal">v8.8.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.8/release-notes-8.8.0.html" class="ulink" target="_top">here</a>.</p>
<h4><a id="_fixes_13"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_fix_type_declarations_for_legacy_types_with_a_body_key_1784"></a>Fix type declarations for legacy types with a body key <a href="https://github.com/elastic/elasticsearch-js/pull/1784" class="ulink" target="_top">#1784</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Prior releases contained a bug where type declarations for legacy types that include a <code class="literal">body</code> key were not actually importing the type that includes the <code class="literal">body</code> key.</p>
<h3><a id="_8_7_3"></a>8.7.3<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_14"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_bump_elastictransport_to_8_3_1"></a>Bump @elastic/transport to <code class="literal">~8.3.1</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.3.1</code> to <code class="literal">~8.3.1</code> ensures 8.7 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<h3><a id="_8_7_0"></a>8.7.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h5><a id="_support_for_elasticsearch_v8_7_0"></a>Support for Elasticsearch <code class="literal">v8.7.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.7/release-notes-8.7.0.html" class="ulink" target="_top">here</a>.</p>
<h3><a id="_8_6_1"></a>8.6.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_15"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_bump_elastictransport_to_8_3_1_2"></a>Bump @elastic/transport to <code class="literal">~8.3.1</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Switching from <code class="literal">^8.3.1</code> to <code class="literal">~8.3.1</code> ensures 8.6 client users are not required to update to Node.js v18+, which is a new requirement set by <code class="literal">@elastic/transport</code> v8.5.0. See <a href="https://github.com/elastic/elastic-transport-js/issues/91" class="ulink" target="_top">elastic/elastic-transport-js#91</a> for details.</p>
<h3><a id="_8_6_0"></a>8.6.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h5><a id="_bump_elastictransport_to_8_3_1_1802"></a>Bump @elastic/transport to 8.3.1+ <a href="https://github.com/elastic/elasticsearch-js/pull/1802" class="ulink" target="_top">#1802</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The <code class="literal">@elastic/transport</code> dependency has been bumped to <code class="literal">~8.3.1</code> to ensure
fixes to the <code class="literal">maxResponseSize</code> option are available in the client.</p>
<h5><a id="_support_for_elasticsearch_v8_6_0"></a>Support for Elasticsearch <code class="literal">v8.6.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.6/release-notes-8.6.0.html" class="ulink" target="_top">here</a>.</p>
<h3><a id="_8_5_0"></a>8.5.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h5><a id="_support_for_elasticsearch_v8_5_0"></a>Support for Elasticsearch <code class="literal">v8.5.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.5/release-notes-8.5.0.html" class="ulink" target="_top">here</a>.</p>
<h3><a id="_8_4_0"></a>8.4.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h5><a id="_support_for_elasticsearch_v8_4_0"></a>Support for Elasticsearch <code class="literal">v8.4.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.4/release-notes-8.4.0.html" class="ulink" target="_top">here</a>.</p>
<h3><a id="_8_2_1"></a>8.2.1<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_fixes_16"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_2_1"></a>Support for Elasticsearch <code class="literal">v8.2.1</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.2/release-notes-8.2.1.html" class="ulink" target="_top">here</a>.</p>
<h5><a id="_fix_ndjson_apis_1688"></a>Fix ndjson APIs <a href="https://github.com/elastic/elasticsearch-js/pull/1688" class="ulink" target="_top">#1688</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The previous release contained a bug that broken ndjson APIs.
We have released <code class="literal">v8.2.0-patch.1</code> to address this.
This fix is the same as the one we have released and we strongly recommend upgrading to this version.</p>
<h5><a id="_fix_node_shutdown_apis_1697"></a>Fix node shutdown apis <a href="https://github.com/elastic/elasticsearch-js/pull/1697" class="ulink" target="_top">#1697</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The shutdown APIs wheren&#8217;t complete, this fix completes them.</p>
<h4><a id="_types_move_query_keys_to_body_1693"></a>Types: move query keys to body <a href="https://github.com/elastic/elasticsearch-js/pull/1693" class="ulink" target="_top">#1693</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<p>The types definitions where wrongly representing the types of fields present in both query and body.</p>
<h3><a id="_8_2_0"></a>8.2.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_breaking_changes"></a>Breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_drop_node_js_v12_1670"></a>Drop Node.js v12 <a href="https://github.com/elastic/elasticsearch-js/pull/1670" class="ulink" target="_top">#1670</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>According to our <a href="https://github.com/elastic/elasticsearch-js#nodejs-support" class="ulink" target="_top">Node.js support matrix</a>.</p>
<h4><a id="_features_10"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_2"></a>Support for Elasticsearch <code class="literal">v8.2</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.2/release-notes-8.2.0.html" class="ulink" target="_top">here</a>.</p>
<h5><a id="_more_lenient_parameter_checks_1662"></a>More lenient parameter checks <a href="https://github.com/elastic/elasticsearch-js/pull/1662" class="ulink" target="_top">#1662</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>When creating a new client, an <code class="literal">undefined</code> <code class="literal">caFingerprint</code> no longer trigger an error for a http connection.</p>
<h5><a id="_update_typescript_docs_and_export_estypes_1675"></a>Update TypeScript docs and export estypes <a href="https://github.com/elastic/elasticsearch-js/pull/1675" class="ulink" target="_top">#1675</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can import the full TypeScript requests &amp; responses definitions as it follows:</p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">import { estypes } from '@elastic/elasticsearch'</pre>
</div>
<p>If you need the legacy definitions with the body, you can do the following:</p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">import { estypesWithBody } from '@elastic/elasticsearch'</pre>
</div>
<h4><a id="_fixes_17"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_updated_hpagent_to_the_latest_version_transport49"></a>Updated hpagent to the latest version <a href="https://github.com/elastic/elastic-transport-js/pull/49" class="ulink" target="_top">transport/#49</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can fing the related changes <a href="https://github.com/delvedor/hpagent/releases/tag/v1.0.0" class="ulink" target="_top">here</a>.</p>
<h3><a id="_8_1_0"></a>8.1.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_11"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_1"></a>Support for Elasticsearch <code class="literal">v8.1</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.1/release-notes-8.1.0.html" class="ulink" target="_top">here</a>.</p>
<h5><a id="_export_sniffingtransport_1653"></a>Export SniffingTransport <a href="https://github.com/elastic/elasticsearch-js/pull/1653" class="ulink" target="_top">#1653</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Now the client exports the SniffingTransport class.</p>
<h4><a id="_fixes_18"></a>Fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_fix_onflushtimeout_timer_not_being_cleared_when_upstream_errors_1616"></a>Fix onFlushTimeout timer not being cleared when upstream errors <a href="https://github.com/elastic/elasticsearch-js/pull/1616" class="ulink" target="_top">#1616</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Fixes a memory leak caused by an error in the upstream dataset of the bulk helper.</p>
<h5><a id="_cleanup_abort_listener_transport42"></a>Cleanup abort listener <a href="https://github.com/elastic/elastic-transport-js/pull/42" class="ulink" target="_top">transport/#42</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The legacy http client was not cleaning up the abort listener, which could cause a memory leak.</p>
<h5><a id="_improve_undici_performances_transport41"></a>Improve undici performances <a href="https://github.com/elastic/elastic-transport-js/pull/41" class="ulink" target="_top">transport/#41</a><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Improve the stream body collection and keep alive timeout.</p>
<h3><a id="_8_0_0"></a>8.0.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h3>
<h4><a id="_features_12"></a>Features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h4>
<h5><a id="_support_for_elasticsearch_v8_0"></a>Support for Elasticsearch <code class="literal">v8.0</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>You can find all the API changes
<a href="/guide/en/elasticsearch/reference/8.0/release-notes-8.0.0.html" class="ulink" target="_top">here</a>.</p>
<h5><a id="_drop_old_typescript_definitions"></a>Drop old typescript definitions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Medium</strong></span></p>
<p>The current TypeScript definitions will be removed from the client, and the new definitions, which contain request and response definitions as well will be shipped by default.</p>
<h5><a id="_drop_callback_style_api"></a>Drop callback-style API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Large</strong></span></p>
<p>Maintaining both API styles is not a problem per se, but it makes error handling more convoluted due to async stack traces.
Moving to a full-promise API will solve this issue.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">// callback-style api
client.search({ params }, { options }, (err, result) =&gt; {
 console.log(err || result)
})

// promise-style api
client.search({ params }, { options })
  .then(console.log)
  .catch(console.log)

// async-style (sugar syntax on top of promises)
const response = await client.search({ params }, { options })
console.log(response)</pre>
</div>
<p>If you are already using the promise-style API, this won&#8217;t be a breaking change for you.</p>
<h5><a id="_remove_the_current_abort_api_and_use_the_new_abortcontroller_standard"></a>Remove the current abort API and use the new AbortController standard<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small</strong></span></p>
<p>The old abort API makes sense for callbacks but it&#8217;s annoying to use with promises</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">// callback-style api
const request = client.search({ params }, { options }, (err, result) =&gt; {
 console.log(err) // RequestAbortedError
})

request.abort()

// promise-style api
const promise = client.search({ params }, { options })

promise
  .then(console.log)
  .catch(console.log) // RequestAbortedError

promise.abort()</pre>
</div>
<p>Node v12 has added the standard <a href="https://nodejs.org/api/globals.html#globals_class_abortcontroller" class="ulink" target="_top"><code class="literal">AbortController</code></a> API which is designed to work well with both callbacks and promises.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">const ac = new AbortController()
client.search({ params }, { signal: ac.signal })
  .then(console.log)
  .catch(console.log) // RequestAbortedError

ac.abort()</pre>
</div>
<h5><a id="_remove_the_body_key_from_the_request"></a>Remove the body key from the request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small</strong></span></p>
<p>Thanks to the new types we are developing now we know exactly where a parameter should go.
The client API leaks HTTP-related notions in many places, and removing them would definitely improve the DX.</p>
<p>This could be a rather big breaking change, so a double solution could be used during the 8.x lifecycle. (accepting body keys without them being wrapped in the body as well as the current solution).</p>
<p>To convert code from 7.x, you need to remove the <code class="literal">body</code> parameter in all the endpoints request.
For instance, this is an example for the <code class="literal">search</code> endpoint:</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">// from
const response = await client.search({
  index: 'test',
  body: {
    query: {
      match_all: {}
    }
  }
})

// to
const response = await client.search({
  index: 'test',
  query: {
    match_all: {}
  }
})</pre>
</div>
<h5><a id="_migrate_to_new_separate_transport"></a>Migrate to new separate transport<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small to none</strong></span></p>
<p>The separated transport has been rewritten in TypeScript and has already dropped the callback style API.
Given that now is separated, most of the Elasticsearch specific concepts have been removed, and the client will likely need to extend parts of it for reintroducing them.
If you weren&#8217;t extending the internals of the client, this won&#8217;t be a breaking change for you.</p>
<h5><a id="_the_returned_value_of_api_calls_is_the_body_and_not_the_http_related_keys"></a>The returned value of API calls is the body and not the HTTP related keys<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small</strong></span></p>
<p>The client API leaks HTTP-related notions in many places, and removing them would definitely improve the DX.
The client will expose a new request-specific option to still get the full response details.</p>
<p>The new behaviour returns the <code class="literal">body</code> value directly as response.
If you want to have the 7.x response format, you need to add <code class="literal">meta : true</code> in the request.
This will return all the HTTP meta information, including the <code class="literal">body</code>.</p>
<p>For instance, this is an example for the <code class="literal">search</code> endpoint:</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">// from
const response = await client.search({
  index: 'test',
  body: {
    query: {
      match_all: {}
    }
  }
})
console.log(response) // { body: SearchResponse, statusCode: number, headers: object, warnings: array }

// to
const response = await client.search({
  index: 'test',
  query: {
    match_all: {}
  }
})
console.log(response) // SearchResponse

// with a bit of TypeScript and JavaScript magic...
const response = await client.search({
  index: 'test',
  query: {
    match_all: {}
  }
}, {
  meta: true
})
console.log(response) // { body: SearchResponse, statusCode: number, headers: object, warnings: array }</pre>
</div>
<h5><a id="_use_a_weighted_connection_pool"></a>Use a weighted connection pool<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small to none</strong></span></p>
<p>Move from the current cluster connection pool to a weight-based implementation.
This new implementation offers better performances and runs less code in the background, the old connection pool can still be used.
If you weren&#8217;t extending the internals of the client, this won&#8217;t be a breaking change for you.</p>
<h5><a id="_migrate_to_the_undici_http_client"></a>Migrate to the "undici" http client<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small to none</strong></span></p>
<p>By default, the HTTP client will no longer be the default Node.js HTTP client, but <a href="https://github.com/nodejs/undici" class="ulink" target="_top">undici</a> instead.
Undici is a brand new HTTP client written from scratch, it offers vastly improved performances and has better support for promises.
Furthermore, it offers comprehensive and predictable error handling. The old HTTP client can still be used.
If you weren&#8217;t extending the internals of the client, this won&#8217;t be a breaking change for you.</p>
<h5><a id="_drop_support_for_old_camelcased_keys"></a>Drop support for old camelCased keys<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Medium</strong></span></p>
<p>Currently, every path or query parameter could be expressed in both <code class="literal">snake_case</code> and <code class="literal">camelCase</code>. Internally the client will convert everything to <code class="literal">snake_case</code>.
This was done in an effort to reduce the friction of migrating from the legacy to the new client, but now it no longer makes sense.
If you are already using <code class="literal">snake_case</code> keys, this won&#8217;t be a breaking change for you.</p>
<h5><a id="_rename_ssl_option_to_tls"></a>Rename <code class="literal">ssl</code> option to <code class="literal">tls</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small</strong></span></p>
<p>People usually refers to this as <code class="literal">tls</code>, furthermore, internally we use the tls API and Node.js refers to it as tls everywhere.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">// before
const client = new Client({
  node: 'https://localhost:9200',
  ssl: {
    rejectUnauthorized: false
  }
})

// after
const client = new Client({
  node: 'https://localhost:9200',
  tls: {
    rejectUnauthorized: false
  }
})</pre>
</div>
<h5><a id="_remove_prototype_poisoning_protection"></a>Remove prototype poisoning protection<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small</strong></span></p>
<p>Prototype poisoning protection is very useful, but it can cause performances issues with big payloads.
In v8 it will be removed, and the documentation will show how to add it back with a custom serializer.</p>
<h5><a id="_remove_client_extensions_api"></a>Remove client extensions API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Large</strong></span></p>
<p>Nowadays the client support the entire Elasticsearch API, and the <code class="literal">transport.request</code> method can be used if necessary. The client extensions API have no reason to exist.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">client.extend('utility.index', ({ makeRequest }) =&gt; {
  return function _index (params, options) {
    // your code
  }
})

client.utility.index(...)</pre>
</div>
<p>If you weren&#8217;t using client extensions, this won&#8217;t be a breaking change for you.</p>
<h5><a id="_move_to_typescript"></a>Move to TypeScript<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: No</strong></span> | <span class="strong strong"><strong>Migration effort: None</strong></span></p>
<p>The new separated transport is already written in TypeScript, and it makes sense that the client v8 will be fully written in TypeScript as well.</p>
<h5><a id="_move_from_emitter_like_interface_to_a_diagnostic_method"></a>Move from emitter-like interface to a diagnostic method<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small</strong></span></p>
<p>Currently, the client offers a subset of methods of the <code class="literal">EventEmitter</code> class, v8 will ship with a <code class="literal">diagnostic</code> property which will be a proper event emitter.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">// from
client.on('request', console.log)

// to
client.diagnostic.on('request', console.log)</pre>
</div>
<h5><a id="_remove_username_password_properties_from_cloud_configuration"></a>Remove username &amp; password properties from Cloud configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p><span class="strong strong"><strong>Breaking: Yes</strong></span> | <span class="strong strong"><strong>Migration effort: Small</strong></span></p>
<p>The Cloud configuration does not support ApiKey and Bearer auth, while the <code class="literal">auth</code> options does.
There is no need to keep the legacy basic auth support in the cloud configuration.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">// before
const client = new Client({
  cloud: {
    id: '&lt;cloud-id&gt;',
    username: 'elastic',
    password: 'changeme'
  }
})

// after
const client = new Client({
  cloud: {
    id: '&lt;cloud-id&gt;'
  },
  auth: {
    username: 'elastic',
    password: 'changeme'
  }
})</pre>
</div>
<p>If you are already passing the basic auth options in the <code class="literal">auth</code> configuration, this won&#8217;t be a breaking change for you.</p>
<h5><a id="_calling_client_close_will_reject_new_requests"></a>Calling <code class="literal">client.close</code> will reject new requests<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>Once you call <code class="literal">client.close</code> every new request after that will be rejected with a <code class="literal">NoLivingConnectionsError</code>. In-flight requests will be executed normally unless an in-flight request requires a retry, in which case it will be rejected.</p>
<h5><a id="_parameters_rename"></a>Parameters rename<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ilm.delete_lifecycle</code>: <code class="literal">policy</code> parameter has been renamed to <code class="literal">name</code>
</li>
<li class="listitem">
<code class="literal">ilm.get_lifecycle</code>: <code class="literal">policy</code> parameter has been renamed to <code class="literal">name</code>
</li>
<li class="listitem">
<code class="literal">ilm.put_lifecycle</code>: <code class="literal">policy</code> parameter has been renamed to <code class="literal">name</code>
</li>
<li class="listitem">
<code class="literal">snapshot.cleanup_repository</code>: <code class="literal">repository</code> parameter has been renamed to <code class="literal">name</code>
</li>
<li class="listitem">
<code class="literal">snapshot.create_repository</code>: <code class="literal">repository</code> parameter has been renamed to <code class="literal">name</code>
</li>
<li class="listitem">
<code class="literal">snapshot.delete_repository</code>: <code class="literal">repository</code> parameter has been renamed to <code class="literal">name</code>
</li>
<li class="listitem">
<code class="literal">snapshot.get_repository</code>: <code class="literal">repository</code> parameter has been renamed to <code class="literal">name</code>
</li>
<li class="listitem">
<code class="literal">snapshot.verify_repository</code>: <code class="literal">repository</code> parameter has been renamed to <code class="literal">name</code>
</li>
</ul>
</div>
<h5><a id="_removal_of_snake_cased_methods"></a>Removal of snake_cased methods<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-js/edit/8.14/docs/changelog.asciidoc">edit</a></h5>
<p>The v7 client provided snake_cased methods, such as <code class="literal">client.delete_by_query</code>. This is no longer supported, now only camelCased method are present.
So <code class="literal">client.delete_by_query</code> can be accessed with <code class="literal">client.deleteByQuery</code></p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="getting-started-js.html">« Getting started</a>
</span>
<span class="next">
<a href="installation.html">Installation »</a>
</span>
</div>
</body>
</html>
