<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Troubleshooting | Elasticsearch Ruby Client [master] | Elastic</title>
<meta class="elastic" name="content" content="Troubleshooting | Elasticsearch Ruby Client [master]">

<link rel="home" href="index.html" title="Elasticsearch Ruby Client [master]"/>
<link rel="up" href="index.html" title="Elasticsearch Ruby Client [master]"/>
<link rel="prev" href="examples.html" title="Examples"/>
<link rel="next" href="Helpers.html" title="Client Helpers"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Clients"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Clients/Ruby/master"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Ruby Client [master]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="examples.html">« Examples</a>
</span>
<span class="next">
<a href="Helpers.html">Client Helpers »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="troubleshooting"></a>Troubleshooting<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-ruby/edit/main/docs/troubleshooting.asciidoc">edit</a></h1>
</div></div></div>
<p>The client provides several options for logging that can help when things go wrong. Check out the extensive documentation on <a class="xref" href="advanced-config.html#logging" title="Logging">Logging</a>.</p>
<p>If you are having trouble sending a request to Elasticsearch with the client, we suggest enabling <code class="literal">tracing</code> on the client and testing the cURL command that appears in your terminal:</p>
<div class="pre_wrapper lang-rb">
<pre class="programlisting prettyprint lang-rb">client = Elasticsearch::Client.new(trace: true)
client.info
curl -X GET -H 'x-elastic-client-meta: es=8.9.0,rb=3.2.2,t=8.2.1,fd=2.7.4,nh=0.3.2, User-Agent: elastic-t
ransport-ruby/8.2.1 (RUBY_VERSION: 3.2.2; linux x86_64; Faraday v2.7.4), Content-Type: application/json' 'http://localhost:9200//?pretty'</pre>
</div>
<p>Testing the cURL command can help find out if there&#8217;s a connection issue or if the issue is in the client code.</p>
<h3><a id="_connection"></a>Connection<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-ruby/edit/main/docs/troubleshooting.asciidoc">edit</a></h3>
<p>When working with multiple hosts, you might want to enable the <code class="literal">retry_on_failure</code> or <code class="literal">retry_on_status</code> options to perform a failed request on another node (refer to <a class="xref" href="advanced-config.html#retry-failures" title="Retrying on Failures">Retrying on Failures</a>).</p>
<p>For optimal performance, use a HTTP library which supports persistent ("keep-alive") connections, such as <a href="https://github.com/toland/patron" class="ulink" target="_top">patron</a> or <a href="https://github.com/typhoeus/typhoeus" class="ulink" target="_top">Typhoeus</a>. Require the library (<code class="literal">require 'patron'</code>) in your code for Faraday 1.x or the adapter (<code class="literal">require 'faraday/patron'</code>) for Faraday 2.x, and it will be automatically used.</p>
<h3><a id="_more_help"></a>More Help<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-ruby/edit/main/docs/troubleshooting.asciidoc">edit</a></h3>
<p>If you need more help, you can hop on our <a href="https://discuss.elastic.co/" class="ulink" target="_top">Elastic community forums</a> and get answers from the experts in the community, including people from Elastic.</p>
<p>If you find a bug, have feedback, or find any other issue using the client, please <a href="https://github.com/elastic/elasticsearch-ruby/issues/new/choose" class="ulink" target="_top">submit an issue</a> on GitHub.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="examples.html">« Examples</a>
</span>
<span class="next">
<a href="Helpers.html">Client Helpers »</a>
</span>
</div>
</div>
</body>
</html>
