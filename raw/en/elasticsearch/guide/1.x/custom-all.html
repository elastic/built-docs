<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Custom _all Fields | Elasticsearch: The Definitive Guide [1.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]"/>
<link rel="up" href="multi-field-search.html" title="Multifield Search"/>
<link rel="prev" href="field-centric.html" title="Field-Centric Queries"/>
<link rel="next" href="_cross_fields_queries.html" title="cross-fields Queries"/>
<meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="1.x"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide [1.x]</a></span>
»
<span class="breadcrumb-link"><a href="search-in-depth.html">Search in Depth</a></span>
»
<span class="breadcrumb-link"><a href="multi-field-search.html">Multifield Search</a></span>
»
<span class="breadcrumb-node">Custom _all Fields</span>
</div>
<div class="navheader">
<span class="prev">
<a href="field-centric.html">« Field-Centric Queries</a>
</span>
<span class="next">
<a href="_cross_fields_queries.html">cross-fields Queries »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="custom-all"></a>Custom _all Fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/110_Multi_Field_Search/45_Custom_all.asciidoc">edit</a></h2>
</div></div></div>
<p>In <a class="xref" href="root-object.html#all-field" title="Metadata: _all Field">Metadata: _all Field</a>, we explained that the special <code class="literal">_all</code> field indexes the values
from all other fields as one big string. Having all fields indexed into one
field is not terribly flexible, though.  It would be nice to have one custom
<code class="literal">_all</code> field for the person&#8217;s name, and another custom <code class="literal">_all</code> field for the
address.</p>
<p>Elasticsearch provides us with this functionality via the <code class="literal">copy_to</code> parameter
in a field mapping:</p>
<div class="pre_wrapper lang-sense">
<pre class="programlisting prettyprint lang-sense">PUT /my_index
{
    "mappings": {
        "person": {
            "properties": {
                "first_name": {
                    "type":     "string",
                    "copy_to":  "full_name" <a id="CO77-1"></a><i class="conum" data-value="1"></i>
                },
                "last_name": {
                    "type":     "string",
                    "copy_to":  "full_name" <a id="CO77-2"></a><i class="conum" data-value="1"></i>
                },
                "full_name": {
                    "type":     "string"
                }
            }
        }
    }
}</pre>
</div>
<div class="sense_widget" data-snippet="snippets/110_Multi_Field_Search/45_Custom_all.json"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO77-1"><i class="conum" data-value="1"></i></a><a href="#CO77-2"></a></p>
</td>
<td align="left" valign="top">
<p>The values in the <code class="literal">first_name</code> and <code class="literal">last_name</code> fields
are also copied to the <code class="literal">full_name</code> field.</p>
</td>
</tr>
</table>
</div>
<p>With this mapping in place, we can query the <code class="literal">first_name</code> field for first
names, the <code class="literal">last_name</code> field for last name, or the <code class="literal">full_name</code> field for first
and last names.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Mappings of the <code class="literal">first_name</code> and <code class="literal">last_name</code> fields have no bearing
on how the <code class="literal">full_name</code> field is indexed. The <code class="literal">full_name</code> field copies the
string values from the other two fields, then indexes them according to the
mapping of the <code class="literal">full_name</code> field only.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="field-centric.html">« Field-Centric Queries</a>
</span>
<span class="next">
<a href="_cross_fields_queries.html">cross-fields Queries »</a>
</span>
</div>
</div>
</body>
</html>
