<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configuration properties | Elasticsearch Plugins and Integrations [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Configuration properties | Elasticsearch Plugins and Integrations [8.15]">

<link rel="home" href="index.html" title="Elasticsearch Plugins and Integrations [8.15]"/>
<link rel="up" href="repository-hdfs.html" title="Hadoop HDFS repository plugin"/>
<link rel="prev" href="repository-hdfs-usage.html" title="Getting started with HDFS"/>
<link rel="next" href="repository-hdfs-security.html" title="Hadoop security"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Plugins/8.15"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="repository-hdfs-usage.html">« Getting started with HDFS</a>
</span>
<span class="next">
<a href="repository-hdfs-security.html">Hadoop security »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Plugins and Integrations [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="repository.html">Snapshot/restore repository plugins</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="repository-hdfs.html">Hadoop HDFS repository plugin</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configuration properties</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/plugins/repository-hdfs.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="repository-hdfs-config"></a>Configuration properties<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/plugins/repository-hdfs.asciidoc">edit</a></h3>
</div></div></div>
<p>Once installed, define the configuration for the <code class="literal">hdfs</code> repository through the
<a href="/guide/en/elasticsearch/reference/8.15/snapshot-restore.html" class="ulink" target="_top">REST API</a>:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _snapshot/my_hdfs_repository
{
  "type": "hdfs",
  "settings": {
    "uri": "hdfs://namenode:8020/",
    "path": "elasticsearch/repositories/my_hdfs_repository",
    "conf.dfs.client.read.shortcircuit": "true"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/40.console"></div>
<p>The following settings are supported:</p>
<div class="informaltable">
<table border="0" cellpadding="4px">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody valign="top">
<tr>
<td valign="top">
<p>
<code class="literal">uri</code>
</p>
</td>
<td valign="top">
<p>
The uri address for hdfs. ex: "hdfs://&lt;host&gt;:&lt;port&gt;/". (Required)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">path</code>
</p>
</td>
<td valign="top">
<p>
The file path within the filesystem where data is stored/loaded. ex: "path/to/file". (Required)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">load_defaults</code>
</p>
</td>
<td valign="top">
<p>
Whether to load the default Hadoop configuration or not. (Enabled by default)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">conf.&lt;key&gt;</code>
</p>
</td>
<td valign="top">
<p>
Inlined configuration parameter to be added to Hadoop configuration. (Optional)
Only client oriented properties from the hadoop <a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/core-default.xml" class="ulink" target="_top">core</a> and <a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml" class="ulink" target="_top">hdfs</a> configuration files will be recognized by the plugin.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">compress</code>
</p>
</td>
<td valign="top">
<p>
Whether to compress the metadata or not. (Enabled by default)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">max_restore_bytes_per_sec</code>
</p>
</td>
<td valign="top">
<p>
Throttles per node restore rate. Defaults to unlimited.
Note that restores are also throttled through <a href="/guide/en/elasticsearch/reference/8.15/recovery.html" class="ulink" target="_top">recovery settings</a>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">max_snapshot_bytes_per_sec</code>
</p>
</td>
<td valign="top">
<p>
Throttles per node snapshot rate. Defaults to <code class="literal">40mb</code> per second.
Note that if the <a href="/guide/en/elasticsearch/reference/8.15/recovery.html" class="ulink" target="_top">recovery settings for managed services</a>
are set, then it defaults to unlimited, and the rate is additionally
throttled through <a href="/guide/en/elasticsearch/reference/8.15/recovery.html" class="ulink" target="_top">recovery settings</a>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">readonly</code>
</p>
</td>
<td valign="top">
<p>
Makes repository read-only. Defaults to <code class="literal">false</code>.
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">chunk_size</code>
</p>
</td>
<td valign="top">
<p>
Override the chunk size. (Disabled by default)
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">security.principal</code>
</p>
</td>
<td valign="top">
<p>
Kerberos principal to use when connecting to a secured HDFS cluster.
If you are using a service principal for your elasticsearch node, you may
use the <code class="literal">_HOST</code> pattern in the principal name and the plugin will replace
the pattern with the hostname of the node at runtime (see
<a href="repository-hdfs-security-runtime" class="ulink" target="_top">Creating the Secure Repository</a>).
</p>
</td>
</tr>
<tr>
<td valign="top">
<p>
<code class="literal">replication_factor</code>
</p>
</td>
<td valign="top">
<p>
The replication factor for all new HDFS files created by this repository.
Must be greater or equal to <code class="literal">dfs.replication.min</code> and less or equal to <code class="literal">dfs.replication.max</code> HDFS option.
Defaults to using HDFS cluster setting.
</p>
</td>
</tr>
</tbody>
</table>
</div>
<h5><a id="repository-hdfs-availability"></a>A note on HDFS availability<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/plugins/repository-hdfs.asciidoc">edit</a></h5>
<p>When you initialize a repository, its settings are persisted in the cluster state. When a node comes online, it will
attempt to initialize all repositories for which it has settings. If your cluster has an HDFS repository configured, then
all nodes in the cluster must be able to reach HDFS when starting. If not, then the node will fail to initialize the
repository at start up and the repository will be unusable. If this happens, you will need to remove and re-add the
repository or restart the offending node.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="repository-hdfs-usage.html">« Getting started with HDFS</a>
</span>
<span class="next">
<a href="repository-hdfs-security.html">Hadoop security »</a>
</span>
</div>
</body>
</html>
