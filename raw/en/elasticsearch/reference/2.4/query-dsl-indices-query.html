<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Indices Query | Elasticsearch Guide [2.4] | Elastic</title>
<meta class="elastic" name="content" content="Indices Query | Elasticsearch Guide [2.4]">

<link rel="home" href="index.html" title="Elasticsearch Guide [2.4]"/>
<link rel="up" href="compound-queries.html" title="Compound queries"/>
<link rel="prev" href="query-dsl-boosting-query.html" title="Boosting Query"/>
<link rel="next" href="query-dsl-and-query.html" title="And Query"/>
<meta class="elastic" name="product_version" content="2.4"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/2.4"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="2.4"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<p>
  <strong>WARNING</strong>: Version 2.4 of Elasticsearch has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div class="navheader">
<span class="prev">
<a href="query-dsl-boosting-query.html">« Boosting Query</a>
</span>
<span class="next">
<a href="query-dsl-and-query.html">And Query »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [2.4]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="compound-queries.html">Compound queries</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Indices Query</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/2.4/docs/reference/query-dsl/indices-query.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="query-dsl-indices-query"></a>Indices Query</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/2.4/docs/reference/query-dsl/indices-query.asciidoc">edit</a></div>
</div></div></div>
<p>The <code class="literal">indices</code> query is useful in cases where a search is executed across
multiple indices. It allows to specify a list of index names and an inner
query that is only executed for indices matching names on that list.
For other indices that are searched, but that don&#8217;t match entries
on the list, the alternative <code class="literal">no_match_query</code> is executed.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">{
    "indices" : {
        "indices" : ["index1", "index2"],
        "query" : {
            "term" : { "tag" : "wow" }
        },
        "no_match_query" : {
            "term" : { "tag" : "kow" }
        }
    }
}</pre>
</div>
<p>You can use the <code class="literal">index</code> field to provide a single index.</p>
<p><code class="literal">no_match_query</code> can also have "string" value of <code class="literal">none</code> (to match no
documents), and <code class="literal">all</code> (to match all). Defaults to <code class="literal">all</code>.</p>
<p><code class="literal">query</code> is mandatory, as well as <code class="literal">indices</code> (or <code class="literal">index</code>).</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>The fields order is important: if the <code class="literal">indices</code> are provided before <code class="literal">query</code>
or <code class="literal">no_match_query</code>, the related queries get parsed only against the indices
that they are going to be executed on. This is useful to avoid parsing queries
when it is not necessary and prevent potential mapping errors.</p>
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="query-dsl-boosting-query.html">« Boosting Query</a>
</span>
<span class="next">
<a href="query-dsl-and-query.html">And Query »</a>
</span>
</div>
</body>
</html>
