<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Total Shards Per Node | Elasticsearch Reference [5.6] | Elastic</title>
<meta class="elastic" name="content" content="Total Shards Per Node | Elasticsearch Reference [5.6]">

<link rel="home" href="index.html" title="Elasticsearch Reference [5.6]"/>
<link rel="up" href="index-modules-allocation.html" title="Index Shard Allocation"/>
<link rel="prev" href="recovery-prioritization.html" title="Index recovery prioritization"/>
<link rel="next" href="index-modules-mapper.html" title="Mapper"/>
<meta class="elastic" name="product_version" content="5.6"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/5.6"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="5.6"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>WARNING</strong>: Version 5.6 of Elasticsearch has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [5.6]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index-modules-allocation.html">Index Shard Allocation</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="recovery-prioritization.html">« Index recovery prioritization</a>
</span>
<span class="next">
<a href="index-modules-mapper.html">Mapper »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="allocation-total-shards"></a>Total Shards Per Node<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/5.6/docs/reference/index-modules/allocation/total_shards.asciidoc">edit</a></h2>
</div></div></div>
<p>The cluster-level shard allocator tries to spread the shards of a single index
across as many nodes as possible.  However, depending on how many shards and
indices you have, and how big they are, it may not always be possible to spread
shards evenly.</p>
<p>The following <em>dynamic</em> setting allows you to specify a hard limit on the total
number of shards from a single index allowed per node:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index.routing.allocation.total_shards_per_node</code>
</span>
</dt>
<dd>
The maximum number of shards (replicas and primaries) that will be
allocated to a single node.  Defaults to unbounded.
</dd>
</dl>
</div>
<p>You can also limit the amount of shards a node can have regardless of the index:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.routing.allocation.total_shards_per_node</code>
</span>
</dt>
<dd>
The maximum number of shards (replicas and primaries) that will be
allocated to a single node globally.  Defaults to unbounded (-1).
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings impose a hard limit which can result in some shards not being
allocated.</p>
<p>Use with caution.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="recovery-prioritization.html">« Index recovery prioritization</a>
</span>
<span class="next">
<a href="index-modules-mapper.html">Mapper »</a>
</span>
</div>
</div>
</body>
</html>
