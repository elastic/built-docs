<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Job Resources | Elasticsearch Reference [5.6] | Elastic</title>
<meta class="elastic" name="content" content="Job Resources | Elasticsearch Reference [5.6]">

<link rel="home" href="index.html" title="Elasticsearch Reference [5.6]"/>
<link rel="up" href="ml-api-definitions.html" title="Definitions"/>
<link rel="prev" href="ml-datafeed-resource.html" title="Datafeed Resources"/>
<link rel="next" href="ml-jobstats.html" title="Job Statistics"/>
<meta class="elastic" name="product_version" content="5.6"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/5.6"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="5.6"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>WARNING</strong>: Version 5.6 of Elasticsearch has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [5.6]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="xpack-api.html">X-Pack APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-api-definitions.html">Definitions</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-datafeed-resource.html">« Datafeed Resources</a>
</span>
<span class="next">
<a href="ml-jobstats.html">Job Statistics »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-job-resource"></a>Job Resources<a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>A job resource has the following properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">analysis_config</code>
</span>
</dt>
<dd>
(object) The analysis configuration, which specifies how to analyze the data.
See <a class="xref" href="ml-job-resource.html#ml-analysisconfig" title="Analysis Configuration Objects">analysis configuration objects</a>.
</dd>
<dt>
<span class="term">
<code class="literal">analysis_limits</code>
</span>
</dt>
<dd>
(object) Defines approximate limits on the memory resource requirements for the job.
See <a class="xref" href="ml-job-resource.html#ml-apilimits" title="Analysis Limits">analysis limits</a>.
</dd>
<dt>
<span class="term">
<code class="literal">background_persist_interval</code>
</span>
</dt>
<dd>
<p>
(time units) Advanced configuration option.
The time between each periodic persistence of the model.
The default value is a randomized value between 3 to 4 hours, which avoids
all jobs persisting at exactly the same time. The smallest allowed value is
1 hour.
</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>For very large models (several GB), persistence could take 10-20 minutes,
so do not set the <code class="literal">background_persist_interval</code> value too low.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">create_time</code>
</span>
</dt>
<dd>
(string) The time the job was created. For example, <code class="literal">1491007356077</code>.
</dd>
<dt>
<span class="term">
<code class="literal">custom_settings</code>
</span>
</dt>
<dd>
(object) Advanced configuration option. Contains custom meta data about the
job. For example, it can contain custom URL information as shown in
<a href="/guide/en/x-pack/5.6/ml-configuring-url.html" class="ulink" target="_top">Adding Custom URLs to Machine Learning Results</a>.
</dd>
<dt>
<span class="term">
<code class="literal">data_description</code>
</span>
</dt>
<dd>
(object) Describes the data format and how APIs parse timestamp fields.
See <a class="xref" href="ml-job-resource.html#ml-datadescription" title="Data Description Objects">data description objects</a>.
</dd>
<dt>
<span class="term">
<code class="literal">description</code>
</span>
</dt>
<dd>
(string) An optional description of the job.
</dd>
<dt>
<span class="term">
<code class="literal">finished_time</code>
</span>
</dt>
<dd>
(string) If the job closed or failed, this is the time the job finished,
otherwise it is <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">job_id</code>
</span>
</dt>
<dd>
(string) The unique identifier for the job.
</dd>
<dt>
<span class="term">
<code class="literal">job_type</code>
</span>
</dt>
<dd>
(string) Reserved for future use, currently set to <code class="literal">anomaly_detector</code>.
</dd>
<dt>
<span class="term">
<code class="literal">model_plot_config</code>
</span>
</dt>
<dd>
(object) Configuration properties for storing additional model information.
See <a class="xref" href="ml-job-resource.html#ml-apimodelplotconfig" title="Model Plot Config">model plot configuration</a>.
</dd>
<dt>
<span class="term">
<code class="literal">model_snapshot_id</code>
</span>
</dt>
<dd>
(string) A numerical character string that uniquely identifies the model
snapshot. For example, <code class="literal">1491007364</code>.
For more information about model snapshots, see <a class="xref" href="ml-snapshot-resource.html" title="Model Snapshot Resources">Model Snapshot Resources</a>.
</dd>
<dt>
<span class="term">
<code class="literal">model_snapshot_retention_days</code>
</span>
</dt>
<dd>
(long) The time in days that model snapshots are retained for the job.
Older snapshots are deleted. The default value is <code class="literal">1</code>, which means snapshots
are retained for one day (twenty-four hours).
</dd>
<dt>
<span class="term">
<code class="literal">renormalization_window_days</code>
</span>
</dt>
<dd>
(long) Advanced configuration option.
The period over which adjustments to the score are applied, as new data is seen.
The default value is the longer of 30 days or 100 <code class="literal">bucket_spans</code>.
</dd>
<dt>
<span class="term">
<code class="literal">results_index_name</code>
</span>
</dt>
<dd>
(string) The name of the index in which to store the machine learning results.
The default value is <code class="literal">shared</code>,
which corresponds to the index name <code class="literal">.ml-anomalies-shared</code>
</dd>
<dt>
<span class="term">
<code class="literal">results_retention_days</code>
</span>
</dt>
<dd>
(long) Advanced configuration option.
The number of days for which job results are retained.
Once per day at 00:30 (server time), results older than this period are
deleted from Elasticsearch. The default value is null, which means results
are retained.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-analysisconfig"></a>Analysis Configuration Objects</h3>
</div></div></div>
<p>An analysis configuration object has the following properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">bucket_span</code>
</span>
</dt>
<dd>
(time units) The size of the interval that the analysis is aggregated into,
typically between <code class="literal">5m</code> and <code class="literal">1h</code>. The default value is <code class="literal">5m</code>.
</dd>
<dt>
<span class="term">
<code class="literal">categorization_field_name</code>
</span>
</dt>
<dd>
(string) If this property is specified, the values of the specified field will
be categorized. The resulting categories must be used in a detector by setting
<code class="literal">by_field_name</code>, <code class="literal">over_field_name</code>, or <code class="literal">partition_field_name</code> to the keyword
<code class="literal">mlcategory</code>. For more information, see
<a href="/guide/en/x-pack/5.6/ml-configuring-categories.html" class="ulink" target="_top">Categorizing Log Messages</a>.
</dd>
<dt>
<span class="term">
<code class="literal">categorization_filters</code>
</span>
</dt>
<dd>
(array of strings) If <code class="literal">categorization_field_name</code> is specified,
you can also define optional filters. This property expects an array of
regular expressions. The expressions are used to filter out matching sequences
off the categorization field values. This functionality is useful to fine tune
categorization by excluding sequences that should not be taken into
consideration for defining categories. For example, you can exclude SQL
statements that appear in your log files. For more information, see
<a href="/guide/en/x-pack/5.6/ml-configuring-categories.html" class="ulink" target="_top">Categorizing Log Messages</a>.
</dd>
<dt>
<span class="term">
<code class="literal">detectors</code>
</span>
</dt>
<dd>
<p>
(array) An array of detector configuration objects,
which describe the anomaly detectors that are used in the job.
See <a class="xref" href="ml-job-resource.html#ml-detectorconfig" title="Detector Configuration Objects">detector configuration objects</a>.<br>
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the <code class="literal">detectors</code> array does not contain at least one detector,
no analysis can occur and an error is returned.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">influencers</code>
</span>
</dt>
<dd>
(array of strings) A comma separated list of influencer field names.
Typically these can be the by, over, or partition fields that are used in the
detector configuration. You might also want to use a field name that is not
specifically named in a detector, but is available as part of the input data.
When you use multiple detectors, the use of influencers is recommended as it
aggregates results for each influencer entity.
</dd>
<dt>
<span class="term">
<code class="literal">latency</code>
</span>
</dt>
<dd>
<p>
(time units) The size of the window in which to expect data that is out of
time order. The default value is 0 (no latency). If you specify a non-zero
value, it must be greater than or equal to one second. For more information
about time units, see
<a href="/guide/en/elasticsearch/reference/5.6/common-options.html#time-units" class="ulink" target="_top">Time Units</a>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Latency is only applicable when you send data by using
the <a class="xref" href="ml-post-data.html" title="Post Data to Jobs API">post data</a> API.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">multivariate_by_fields</code>
</span>
</dt>
<dd>
<p>
(boolean) This functionality is reserved for internal use. It is not supported
for use in customer environments and is not subject to the support SLA of
official GA features.
</p>
<p>If set to <code class="literal">true</code>, the analysis will automatically find correlations
between metrics for a given <code class="literal">by</code> field value and report anomalies when those
correlations cease to hold. For example, suppose CPU and memory usage on host A
is usually highly correlated with the same metrics on host B. Perhaps this
correlation occurs because they are running a load-balanced application.
If you enable this property, then anomalies will be reported when, for example,
CPU usage on host A is high and the value of CPU usage on host B is low.
That is to say, you&#8217;ll see an anomaly when the CPU of host A is unusual given
the CPU of host B.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To use the <code class="literal">multivariate_by_fields</code> property, you must also specify
<code class="literal">by_field_name</code> in your detector.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">summary_count_field_name</code>
</span>
</dt>
<dd>
<p>
(string) If this property is specified, the data that is fed to the job is
expected to be pre-summarized. This property value is the name of the field
that contains the count of raw data points that have been summarized. The same
<code class="literal">summary_count_field_name</code> applies to all detectors in the job.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">summary_count_field_name</code> property cannot be used with the <code class="literal">metric</code>
function.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4><a id="ml-detectorconfig"></a>Detector Configuration Objects</h4>
<p>Detector configuration objects specify which data fields a job analyzes.
They also specify which analytical functions are used.
You can specify multiple detectors for a job.
Each detector has the following properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">by_field_name</code>
</span>
</dt>
<dd>
(string) The field used to split the data.
In particular, this property is used for analyzing the splits with respect to their own history.
It is used for finding unusual values in the context of the split.
</dd>
<dt>
<span class="term">
<code class="literal">detector_description</code>
</span>
</dt>
<dd>
(string) A description of the detector. For example, <code class="literal">Low event rate</code>.
</dd>
<dt>
<span class="term">
<code class="literal">exclude_frequent</code>
</span>
</dt>
<dd>
(string) Contains one of the following values: <code class="literal">all</code>, <code class="literal">none</code>, <code class="literal">by</code>, or <code class="literal">over</code>.
If set, frequent entities are excluded from influencing the anomaly results.
Entities can be considered frequent over time or frequent in a population.
If you are working with both over and by fields, then you can set <code class="literal">exclude_frequent</code>
to <code class="literal">all</code> for both fields, or to <code class="literal">by</code> or <code class="literal">over</code> for those specific fields.
</dd>
<dt>
<span class="term">
<code class="literal">field_name</code>
</span>
</dt>
<dd>
<p>
(string) The field that the detector uses in the function. If you use an event rate
function such as <code class="literal">count</code> or <code class="literal">rare</code>, do not specify this field.<br>
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">field_name</code> cannot contain double quotes or backslashes.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">function</code>
</span>
</dt>
<dd>
(string) The analysis function that is used.
For example, <code class="literal">count</code>, <code class="literal">rare</code>, <code class="literal">mean</code>, <code class="literal">min</code>, <code class="literal">max</code>, and <code class="literal">sum</code>. For more
information, see <a href="/guide/en/x-pack/5.6/ml-functions.html" class="ulink" target="_top">Function Reference</a>.
</dd>
<dt>
<span class="term">
<code class="literal">over_field_name</code>
</span>
</dt>
<dd>
(string) The field used to split the data.
In particular, this property is used for analyzing the splits with respect to
the history of all splits. It is used for finding unusual values in the
population of all splits. For more information, see
<a href="/guide/en/x-pack/5.6/ml-configuring-pop.html" class="ulink" target="_top">Performing Population Analysis</a>.
</dd>
<dt>
<span class="term">
<code class="literal">partition_field_name</code>
</span>
</dt>
<dd>
(string) The field used to segment the analysis.
When you use this property, you have completely independent baselines for each value of this field.
</dd>
<dt>
<span class="term">
<code class="literal">use_null</code>
</span>
</dt>
<dd>
<p>
(boolean) Defines whether a new series is used as the null series
when there is no value for the by or partition fields. The default value is <code class="literal">false</code>.<br>
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Field names are case sensitive, for example a field named <em>Bytes</em>
is different from one named <em>bytes</em>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">detector_index</code>
</span>
</dt>
<dd>
(integer) Unique ID for the detector, used when updating it.
Based on the order of detectors within the <code class="literal">analysis_config</code>, starting at zero.
</dd>
</dl>
</div>
<h4><a id="ml-datadescription"></a>Data Description Objects</h4>
<p>The data description defines the format of the input data when you send data to
the job by using the <a class="xref" href="ml-post-data.html" title="Post Data to Jobs API">post data</a> API. Note that when configure
a datafeed, these properties are automatically set.</p>
<p>When data is received via the <a class="xref" href="ml-post-data.html" title="Post Data to Jobs API">post data</a> API, it is not stored
in Elasticsearch. Only the results for anomaly detection are retained.</p>
<p>A data description object has the following properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">format</code>
</span>
</dt>
<dd>
(string) Only <code class="literal">JSON</code> format is supported at this time.
</dd>
<dt>
<span class="term">
<code class="literal">time_field</code>
</span>
</dt>
<dd>
(string) The name of the field that contains the timestamp.
The default value is <code class="literal">time</code>.
</dd>
<dt>
<span class="term">
<code class="literal">time_format</code>
</span>
</dt>
<dd>
<p>
(string) The time format, which can be <code class="literal">epoch</code>, <code class="literal">epoch_ms</code>, or a custom pattern.
The default value is <code class="literal">epoch</code>, which refers to UNIX or Epoch time (the number of seconds
since 1 Jan 1970).
The value <code class="literal">epoch_ms</code> indicates that time is measured in milliseconds since the epoch.
The <code class="literal">epoch</code> and <code class="literal">epoch_ms</code> time formats accept either integer or real values.<br>
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Custom patterns must conform to the Java <code class="literal">DateTimeFormatter</code> class.
When you use date-time formatting patterns, it is recommended that you provide
the full date, time and time zone. For example: <code class="literal">yyyy-MM-dd'T'HH:mm:ssX</code>.
If the pattern that you specify is not sufficient to produce a complete timestamp,
job creation fails.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4><a id="ml-apilimits"></a>Analysis Limits</h4>
<p>Limits can be applied for the resources required to hold the mathematical models in memory.
These limits are approximate and can be set per job. They do not control the
memory used by other processes, for example the Elasticsearch Java processes.
If necessary, you can increase the limits after the job is created.</p>
<p>The <code class="literal">analysis_limits</code> object has the following properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">categorization_examples_limit</code>
</span>
</dt>
<dd>
<p>
(long) The maximum number of examples stored per category in memory and
in the results data store. The default value is 4.  If you increase this value,
more examples are available, however it requires that you have more storage available.
If you set this value to <code class="literal">0</code>, no examples are stored.<br>
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">categorization_examples_limit</code> only applies to analysis that uses categorization.
For more information, see
<a href="/guide/en/x-pack/5.6/ml-configuring-categories.html" class="ulink" target="_top">Categorizing Log Messages</a>.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">model_memory_limit</code>
</span>
</dt>
<dd>
(long or string) The approximate maximum amount of memory resources that are
required for analytical processing. Once this limit is approached, data pruning
becomes more aggressive. Upon exceeding this limit, new entities are not
modeled. The default value is <code class="literal">4096mb</code>. If you specify a number instead of a
string, the units are assumed to be MiB. Specifying a string is recommended
for clarity. If you specify a byte size unit of <code class="literal">b</code> or <code class="literal">kb</code> and the number
does not equate to a discrete number of megabytes, it is rounded down to the
closest MiB. The minimum valid value is 1 MiB. If you specify a value less
than 1 MiB, an error occurs. For more information about supported byte size
units, see
<a href="/guide/en/elasticsearch/reference/5.6/common-options.html#byte-units" class="ulink" target="_top">Byte size units</a>.
</dd>
</dl>
</div>
<h4><a id="ml-apimodelplotconfig"></a>Model Plot Config</h4>
<p>This advanced configuration option stores model information along with the
results. It provides a more detailed view into anomaly detection.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you enable model plot it can add considerable overhead to the performance
of the system; it is not feasible for jobs with many entities.</p>
</div>
</div>
<p>Model plot provides a simplified and indicative view of the model and its bounds.
It does not display complex features such as multivariate correlations or multimodal data.
As such, anomalies may occasionally be reported which cannot be seen in the model plot.</p>
<p>Model plot config can be configured when the job is created or updated later. It must be
disabled if performance issues are experienced.</p>
<p>The <code class="literal">model_plot_config</code> object has the following properties:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">enabled</code>
</span>
</dt>
<dd>
(boolean) If true, enables calculation and storage of the model bounds for
each entity that is being analyzed. By default, this is not enabled.
</dd>
<dt>
<span class="term">
<code class="literal">terms</code>
</span>
</dt>
<dd>
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> (string) Limits data collection to this comma separated list of
partition or by field values. If terms are not specified or it is an empty
string, no filtering is applied. For example, "CPU,NetworkIn,DiskWrites".
Wildcards are not supported. Only the specified <code class="literal">terms</code> can be viewed when
using the Single Metric Viewer.
</dd>
</dl>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="ml-datafeed-resource.html">« Datafeed Resources</a>
</span>
<span class="next">
<a href="ml-jobstats.html">Job Statistics »</a>
</span>
</div>
</div>
</body>
</html>
