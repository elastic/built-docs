<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Plugins changes | Elasticsearch Reference [6.1] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [6.1]"/>
<link rel="up" href="breaking-changes-6.0.html" title="Breaking changes in 6.0"/>
<link rel="prev" href="breaking_60_percolator_changes.html" title="Percolator changes"/>
<link rel="next" href="breaking_60_reindex_changes.html" title="Reindex changes"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.1"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="6.1"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>WARNING</strong>: Version 6.1 of Elasticsearch has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [6.1]</a></span>
»
<span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>
»
<span class="breadcrumb-link"><a href="breaking-changes-6.0.html">Breaking changes in 6.0</a></span>
»
<span class="breadcrumb-node">Plugins changes</span>
</div>
<div class="navheader">
<span class="prev">
<a href="breaking_60_percolator_changes.html">« Percolator changes</a>
</span>
<span class="next">
<a href="breaking_60_reindex_changes.html">Reindex changes »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="breaking_60_plugins_changes"></a>Plugins changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h2>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_mapper_attachments_plugin"></a>Mapper attachments plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The mapper attachments plugin has been deprecated in elasticsearch 5.0 and is now removed.
You can use <a href="/guide/en/elasticsearch/plugins/6.1/ingest-attachment.html" class="ulink" target="_top">ingest attachment plugin</a> instead.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_s3_repository_plugin"></a>S3 Repository plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The bucket an s3 repository is configured with will no longer be created automatically.
It must exist before the s3 repository is created.
</li>
<li class="listitem">
Support for specifying s3 credentials through environment variables and
system properties has been removed. Use the <code class="literal">elasticsearch-keystore</code> tool
to securely store the credentials.
</li>
<li class="listitem">
Specifying region has been removed. This includes the settings <code class="literal">cloud.aws.region</code>,
<code class="literal">cloud.aws.s3.region</code>, <code class="literal">repositories.s3.region</code>, and specifying
region inside the repository settings. Instead, specify the full endpoint if a custom
s3 location is needed, or rely on the default behavior which automatically locates
the region of the configured bucket.
</li>
<li class="listitem">
Specifying s3 signer type has been removed, including <code class="literal">cloud.aws.signer</code> and <code class="literal">cloud.aws.s3.signer</code>.
</li>
<li class="listitem">
Global repositories settings have been removed. This includes <code class="literal">repositories.s3.bucket</code>,
<code class="literal">repositories.s3.server_side_encryption</code>, <code class="literal">repositories.s3.buffer_size</code>,
<code class="literal">repositories.s3.max_retries</code>, <code class="literal">repositories.s3.use_throttle_retries</code>,
<code class="literal">repositories.s3.chunk_size</code>, <code class="literal">repositories.s3.compress</code>, <code class="literal">repositories.s3.storage_class</code>,
<code class="literal">repositories.s3.canned_acl</code>, <code class="literal">repositories.s3.base_path</code>, and
<code class="literal">repositories.s3.path_style_access</code>. Instead, these settings should be set directly in the
 settings per repository.
 See <a href="/guide/en/elasticsearch/plugins/6.1/repository-s3-repository.html" class="ulink" target="_top">S3 Repository settings</a>.
</li>
<li class="listitem">
Shared client settings have been removed. This includes  <code class="literal">cloud.aws.access_key</code>,
 <code class="literal">cloud.aws.secret_key</code>, <code class="literal">cloud.aws.protocol</code>, <code class="literal">cloud.aws.proxy.host</code>,
 <code class="literal">cloud.aws.proxy.port</code>, <code class="literal">cloud.aws.proxy.username</code>, <code class="literal">cloud.aws.proxy.password</code>,
 <code class="literal">cloud.aws.signer</code>, <code class="literal">cloud.aws.read_timeout</code>, <code class="literal">cloud.aws.s3.access_key</code>,
 <code class="literal">cloud.aws.s3.secret_key</code>, <code class="literal">cloud.aws.s3.protocol</code>, <code class="literal">cloud.aws.s3.proxy.host</code>,
 <code class="literal">cloud.aws.s3.proxy.port</code>, <code class="literal">cloud.aws.s3.proxy.username</code>, <code class="literal">cloud.aws.s3.proxy.password</code>,
 <code class="literal">cloud.aws.s3.signer</code>, <code class="literal">cloud.aws.s3.read_timeout</code>, <code class="literal">repositories.s3.access_key</code>,
 <code class="literal">repositories.s3.secret_key</code>, <code class="literal">repositories.s3.endpoint</code> and <code class="literal">repositories.s3.protocol</code>.
Instead, use the new named client settings under <code class="literal">s3.client.CLIENT_NAME.*</code>.
</li>
<li class="listitem">
The <code class="literal">path_style_access</code> setting has been removed. The repository will use the appropriate path style access based on the configured endpoint.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_azure_repository_plugin"></a>Azure Repository plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The container an azure repository is configured with will no longer be created automatically.
It must exist before the azure repository is created.
</li>
<li class="listitem">
Global repositories settings you are able to set in elasticsearch config file under <code class="literal">repositories.azure</code>
name space have been removed. This includes <code class="literal">repositories.azure.account</code>, <code class="literal">repositories.azure.container</code>,
<code class="literal">repositories.azure.base_path</code>, <code class="literal">repositories.azure.location_mode</code>, <code class="literal">repositories.azure.chunk_size</code> and
<code class="literal">repositories.azure.compress</code>.
You must set those settings per repository instead. Respectively <code class="literal">account</code>, <code class="literal">container</code>, <code class="literal">base_path</code>,
<code class="literal">location_mode</code>, <code class="literal">chunk_size</code> and <code class="literal">compress</code>.
See <a href="/guide/en/elasticsearch/plugins/6.1/repository-azure-usage.html#repository-azure-repository-settings" class="ulink" target="_top">Azure Repository settings</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_gcs_repository_plugin"></a>GCS Repository plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">service_account</code> setting has been removed. A service account json credential file must now be
specified in the <a class="xref" href="secure-settings.html" title="Secure Settings">elasticsearch keystore</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_ec2_discovery_plugin"></a>EC2 Discovery plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Specifying ec2 signer type has been removed, including <code class="literal">cloud.aws.signer</code> and <code class="literal">cloud.aws.ec2.signer</code>.
</li>
<li class="listitem">
The region setting has been removed. This includes the settings <code class="literal">cloud.aws.region</code>
and <code class="literal">cloud.aws.ec2.region</code>. Instead, specify the full endpoint.
</li>
<li class="listitem">
All <code class="literal">cloud.aws.*</code> and <code class="literal">cloud.aws.ec2.*</code> settings have been removed. Use <code class="literal">discovery.ec2.*</code> settings instead.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_ignoring_hidden_folders"></a>Ignoring hidden folders<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<p>Previous versions of Elasticsearch would skip hidden files and directories when
scanning the plugins folder. This leniency has been removed.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_icu_analysis_plugin"></a>ICU Analysis plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<p>The icu4j library has been upgraded to 59.1,
Indices created in the previous major version will need to be reindexed
in order to return correct (and correctly ordered) results,
and to take advantage of new characters.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_plugins_should_not_construct_literal_environment_literal_instances_from_literal_settings_literal"></a>Plugins should not construct <code class="literal">Environment</code> instances from <code class="literal">Settings</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/migration/migrate_6_0/plugins.asciidoc">edit</a></h3>
</div></div></div>
<p>Previously, plugins could construct an <code class="literal">Environment</code> instance from <code class="literal">Settings</code> to
discover the path to plugin-specific config files. This will no longer work in
all situations as the <code class="literal">Settings</code> object does not carry the necessary information
for the config path to be set correctly. Instead, plugins that need to know the
config path should have a single constructor that accepts a pair of <code class="literal">Settings</code>
and <code class="literal">Path</code> instances, and construct an <code class="literal">Environment</code> using the corresponding
constructor on <code class="literal">Environment</code>.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="breaking_60_percolator_changes.html">« Percolator changes</a>
</span>
<span class="next">
<a href="breaking_60_reindex_changes.html">Reindex changes »</a>
</span>
</div>
</div>
</body>
</html>
