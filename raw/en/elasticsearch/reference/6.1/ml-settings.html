<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Machine Learning Settings in Elasticsearch | Elasticsearch Reference [6.1] | Elastic</title>
<meta class="elastic" name="content" content="Machine Learning Settings in Elasticsearch | Elasticsearch Reference [6.1]">

<link rel="home" href="index.html" title="Elasticsearch Reference [6.1]"/>
<link rel="up" href="settings-xpack.html" title="X-Pack Settings in Elasticsearch"/>
<link rel="prev" href="license-settings.html" title="X-Pack License Settings"/>
<link rel="next" href="notification-settings.html" title="Watcher Settings in Elasticsearch"/>
<meta class="elastic" name="product_version" content="6.1"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.1"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="6.1"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>WARNING</strong>: Version 6.1 of Elasticsearch has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [6.1]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup-xpack.html">Set up X-Pack</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="settings-xpack.html">X-Pack Settings in Elasticsearch</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="license-settings.html">« X-Pack License Settings</a>
</span>
<span class="next">
<a href="notification-settings.html">Watcher Settings in Elasticsearch »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-settings"></a>Machine Learning Settings in Elasticsearch<a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>You do not need to configure any settings to use machine learning. It is enabled by default.</p>
<h4><a id="general-ml-settings"></a>General Machine Learning Settings</h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">node.ml</code>
</span>
</dt>
<dd>
<p>
Set to <code class="literal">true</code> (default) to identify the node as a <em>machine learning node</em>.<br>
</p>
<p>If set to <code class="literal">false</code> in <code class="literal">elasticsearch.yml</code>, the node cannot run jobs. If set to
<code class="literal">true</code> but <code class="literal">xpack.ml.enabled</code> is set to <code class="literal">false</code>, the <code class="literal">node.ml</code> setting is
ignored and the node cannot run jobs. If you want to run jobs, there must be at
least one machine learning node in your cluster.<br></p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>On dedicated coordinating nodes or dedicated master nodes, disable
the <code class="literal">node.ml</code> role.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.enabled</code>
</span>
</dt>
<dd>
<p>
Set to <code class="literal">true</code> (default) to enable machine learning on the node.<br>
</p>
<p>If set to <code class="literal">false</code> in <code class="literal">elasticsearch.yml</code>, the machine learning APIs are disabled on the node.
Therefore the node cannot open jobs, start datafeeds, or receive transport (internal)
communication requests related to machine learning APIs. It also affects all Kibana instances
that connect to this Elasticsearch instance; you do not need to disable machine learning in those
<code class="literal">kibana.yml</code> files. For more information about disabling machine learning in specific Kibana
instances, see
<a href="/guide/en/kibana/6.1/ml-settings-kb.html" class="ulink" target="_top">Kibana Machine Learning Settings</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you want to use machine learning features in your cluster, you must have
<code class="literal">xpack.ml.enabled</code> set to <code class="literal">true</code> on all master-eligible nodes. This is the
default behavior.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_open_jobs</code>
</span>
</dt>
<dd>
The maximum number of jobs that can run on a node. Defaults to <code class="literal">20</code>.
The maximum number of jobs is also constrained by memory usage, so fewer
jobs than specified by this setting will run on a node if the estimated
memory use of the jobs would be higher than allowed.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_machine_memory_percent</code>
</span>
</dt>
<dd>
The maximum percentage of the machine&#8217;s memory that machine learning may use for running
analytics processes. (These processes are separate to the Elasticsearch JVM.) Defaults to
<code class="literal">30</code> percent. The limit is based on the total memory of the machine, not current
free memory. Jobs will not be allocated to a node if doing so would cause the
estimated memory use of machine learning jobs to exceed the limit.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.max_model_memory_limit</code>
</span>
</dt>
<dd>
The maximum <code class="literal">model_memory_limit</code> property value that can be set for any job on
this node. If you try to create a job with a <code class="literal">model_memory_limit</code> property value
that is greater than this setting value, an error occurs. Existing jobs are not
affected when you update this setting. For more information about the
<code class="literal">model_memory_limit</code> property, see <a class="xref" href="ml-job-resource.html#ml-apilimits" title="Analysis Limits">Analysis Limits</a>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.ml.node_concurrent_job_allocations</code>
</span>
</dt>
<dd>
The maximum number of jobs that can concurrently be in the <code class="literal">opening</code> state on
each node. Typically, jobs spend a small amount of time in this state before
they move to <code class="literal">open</code> state. Jobs that must restore large models when they are
opening spend more time in the <code class="literal">opening</code> state. Defaults to <code class="literal">2</code>.
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="license-settings.html">« X-Pack License Settings</a>
</span>
<span class="next">
<a href="notification-settings.html">Watcher Settings in Elasticsearch »</a>
</span>
</div>
</div>
</body>
</html>
