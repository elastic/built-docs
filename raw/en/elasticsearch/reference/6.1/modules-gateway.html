<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Local Gateway | Elasticsearch Reference [6.1] | Elastic</title>
<meta class="elastic" name="content" content="Local Gateway | Elasticsearch Reference [6.1]">

<link rel="home" href="index.html" title="Elasticsearch Reference [6.1]"/>
<link rel="up" href="modules.html" title="Modules"/>
<link rel="prev" href="modules-discovery-zen.html" title="Zen Discovery"/>
<link rel="next" href="modules-http.html" title="HTTP"/>
<meta class="elastic" name="product_version" content="6.1"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.1"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="6.1"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>WARNING</strong>: Version 6.1 of Elasticsearch has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [6.1]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="modules.html">Modules</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="modules-discovery-zen.html">« Zen Discovery</a>
</span>
<span class="next">
<a href="modules-http.html">HTTP »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-gateway"></a>Local Gateway<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.1/docs/reference/modules/gateway.asciidoc">edit</a></h2>
</div></div></div>
<p>The local gateway module stores the cluster state and shard data across full
cluster restarts.</p>
<p>The following <em>static</em> settings, which must be set on every master node,
control how long a freshly elected master should wait before it tries to
recover the cluster state and the cluster&#8217;s data:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">gateway.expected_nodes</code>
</span>
</dt>
<dd>
The number of (data or master) nodes that are expected to be in the cluster.
Recovery of local shards will start as soon as the expected number of
nodes have joined the cluster. Defaults to <code class="literal">0</code>
</dd>
<dt>
<span class="term">
<code class="literal">gateway.expected_master_nodes</code>
</span>
</dt>
<dd>
The number of master nodes that are expected to be in the cluster.
Recovery of local shards will start as soon as the expected number of
master nodes have joined the cluster. Defaults to <code class="literal">0</code>
</dd>
<dt>
<span class="term">
<code class="literal">gateway.expected_data_nodes</code>
</span>
</dt>
<dd>
The number of data nodes that are expected to be in the cluster.
Recovery of local shards will start as soon as the expected number of
data nodes have joined the cluster. Defaults to <code class="literal">0</code>
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_time</code>
</span>
</dt>
<dd>
If the expected number of nodes is not achieved, the recovery process waits
for the configured amount of time before trying to recover regardless.
Defaults to <code class="literal">5m</code> if one of the <code class="literal">expected_nodes</code> settings is configured.
</dd>
</dl>
</div>
<p>Once the <code class="literal">recover_after_time</code> duration has timed out, recovery will start
as long as the following conditions are met:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">gateway.recover_after_nodes</code>
</span>
</dt>
<dd>
Recover as long as this many data or master nodes have joined the cluster.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_master_nodes</code>
</span>
</dt>
<dd>
Recover as long as this many master nodes have joined the cluster.
</dd>
<dt>
<span class="term">
<code class="literal">gateway.recover_after_data_nodes</code>
</span>
</dt>
<dd>
Recover as long as this many data nodes have joined the cluster.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These settings only take effect on a full cluster restart.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="modules-discovery-zen.html">« Zen Discovery</a>
</span>
<span class="next">
<a href="modules-http.html">HTTP »</a>
</span>
</div>
</div>
</body>
</html>
