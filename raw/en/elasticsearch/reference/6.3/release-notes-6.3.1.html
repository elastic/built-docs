<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elasticsearch version 6.3.1 | Elasticsearch Guide [6.3] | Elastic</title>
<meta class="elastic" name="content" content="Elasticsearch version 6.3.1 | Elasticsearch Guide [6.3]">

<link rel="home" href="index.html" title="Elasticsearch Guide [6.3]"/>
<link rel="up" href="es-release-notes.html" title="Release Notes"/>
<link rel="prev" href="release-notes-6.3.2.html" title="Elasticsearch version 6.3.2"/>
<link rel="next" href="release-notes-6.3.0.html" title="Elasticsearch version 6.3.0"/>
<meta class="elastic" name="product_version" content="6.3"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.3"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="6.3"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-6.3.2.html">« Elasticsearch version 6.3.2</a>
</span>
<span class="next">
<a href="release-notes-6.3.0.html">Elasticsearch version 6.3.0 »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [6.3]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="es-release-notes.html">Release Notes</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Elasticsearch version 6.3.1</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.3/docs/reference/release-notes/6.3.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="release-notes-6.3.1"></a>Elasticsearch version 6.3.1</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.3/docs/reference/release-notes/6.3.asciidoc">edit</a></div>
</div></div></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Known issue with Elasticsearch 6.3.x on JDK 10</h3>
<p>There appears to be a bug in JDK 10 impacting Elasticsearch 6.3.x (note that the
official Docker images are based on JDK 10). The issue appears to impact the C2
compiler on hardware that supports
<a href="https://en.wikipedia.org/wiki/AVX-512" class="ulink" target="_top">AVX-512 instructions</a> (e.g., Skylake-X
CPUs). The issue manifests as a segmentation fault in Java code executing
<code class="literal">org.apache.lucene.util.MergedIterator#pullTop</code>:</p>
<div class="pre_wrapper lang-txt">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-txt">#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007fc7ebc050eb, pid=1, tid=151
#
# JRE version: OpenJDK Runtime Environment (10.0.1+10) (build 10.0.1+10)
# Java VM: OpenJDK 64-Bit Server VM (10.0.1+10, mixed mode, tiered, compressed oops, concurrent mark sweep gc, linux-amd64)
# Problematic frame:
# J 14088 c2 org.apache.lucene.util.MergedIterator.pullTop()V (135 bytes) @ 0x00007fc7ebc050eb [0x00007fc7ebc041e0+0x0000000000000f0b]</pre>
</div>
<p>or executing <code class="literal">org.apache.lucene.util.MergedIterator#pushTop</code>:</p>
<div class="pre_wrapper lang-txt">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-txt">#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f8c43de5371, pid=1, tid=140
#
# JRE version: OpenJDK Runtime Environment (10.0.1+10) (build 10.0.1+10)
# Java VM: OpenJDK 64-Bit Server VM (10.0.1+10, mixed mode, tiered, compressed oops, concurrent mark sweep gc, linux-amd64)
# Problematic frame:
# J 13039 c2 org.apache.lucene.util.MergedIterator.pushTop()V (92 bytes) @ 0x00007f8c43de5371 [0x00007f8c43de4c40+0x0000000000000731]</pre>
</div>
<p>A workaround is to disable the C2 compiler from using AVX-512 instructions via
the <a class="xref" href="jvm-options.html" title="Setting JVM options">JVM option</a> <code class="literal">-XX:UseAVX=2</code>. This issue has been taken
upstream to the JDK maintainers and the workaround will be necessary until a
version of the JDK that is not prone to this issue is released. For additional
background, see <a href="https://github.com/elastic/elasticsearch/issues/31425" class="ulink" target="_top">#31425</a>.</p>
</div>
</div>
<p>Also see <a class="xref" href="breaking-changes-6.3.html" title="Breaking changes in 6.3"><em>6.3</em></a>.</p>
<div class="position-relative"><h3><a id="bug-6.3.1"></a>Bug fixes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.3/docs/reference/release-notes/6.3.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Authentication
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Security: fix joining cluster with production license <a href="https://github.com/elastic/elasticsearch/pull/31341" class="ulink" target="_top">#31341</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/31332" class="ulink" target="_top">#31332</a>)
</li>
<li class="listitem">
Security: fix token bwc with pre 6.0.0-beta2 <a href="https://github.com/elastic/elasticsearch/pull/31254" class="ulink" target="_top">#31254</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/30743" class="ulink" target="_top">#30743</a>, <a href="https://github.com/elastic/elasticsearch/issues/31195" class="ulink" target="_top">#31195</a>)
</li>
<li class="listitem">
Compliant SAML Response destination check <a href="https://github.com/elastic/elasticsearch/pull/31175" class="ulink" target="_top">#31175</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Ingest Attachment: Upgrade Tika to 1.18 <a href="https://github.com/elastic/elasticsearch/pull/31252" class="ulink" target="_top">#31252</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Java High Level REST Client
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Change bulk&#8217;s retry condition to be based on RestStatus <a href="https://github.com/elastic/elasticsearch/pull/29329" class="ulink" target="_top">#29329</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/28885" class="ulink" target="_top">#28885</a>, <a href="https://github.com/elastic/elasticsearch/issues/29254" class="ulink" target="_top">#29254</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Java Low Level REST Client
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Avoid setting connection request timeout <a href="https://github.com/elastic/elasticsearch/pull/30384" class="ulink" target="_top">#30384</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/24069" class="ulink" target="_top">#24069</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fixes a bug introduced in 6.3.0 which may cause the a node to hang and drop out of the cluster if Machine Learning is enabled and has been actively used. The issue can be redressed in 6.3.0 by disabling Machine Learning on all nodes <a href="https://github.com/elastic/elasticsearch/pull/31691" class="ulink" target="_top">#31691</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/31683" class="ulink" target="_top">#31683</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Network
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Ensure we don&#8217;t use a remote profile if cluster name matches <a href="https://github.com/elastic/elasticsearch/pull/31331" class="ulink" target="_top">#31331</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/29321" class="ulink" target="_top">#29321</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Packaging
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add package pre-install check for java binary <a href="https://github.com/elastic/elasticsearch/pull/31343" class="ulink" target="_top">#31343</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/29665" class="ulink" target="_top">#29665</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Recovery
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix missing historyUUID in peer recovery when rolling upgrade 5.x to 6.3 <a href="https://github.com/elastic/elasticsearch/pull/31506" class="ulink" target="_top">#31506</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/31482" class="ulink" target="_top">#31482</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Rollup
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
[Rollup] Metric config parser must use builder so validation runs <a href="https://github.com/elastic/elasticsearch/pull/31159" class="ulink" target="_top">#31159</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
SQL
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
JDBC: Fix stackoverflow on getObject and timestamp conversion <a href="https://github.com/elastic/elasticsearch/pull/31735" class="ulink" target="_top">#31735</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/31734" class="ulink" target="_top">#31734</a>)
</li>
<li class="listitem">
SQL: Preserve scoring in bool queries <a href="https://github.com/elastic/elasticsearch/pull/30730" class="ulink" target="_top">#30730</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/29685" class="ulink" target="_top">#29685</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Scripting
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Painless: Fix bug for static method calls on interfaces <a href="https://github.com/elastic/elasticsearch/pull/31348" class="ulink" target="_top">#31348</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix race in clear scroll <a href="https://github.com/elastic/elasticsearch/pull/31259" class="ulink" target="_top">#31259</a>
</li>
<li class="listitem">
Cross-cluster search: preserve remote status code <a href="https://github.com/elastic/elasticsearch/pull/30976" class="ulink" target="_top">#30976</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/27461" class="ulink" target="_top">#27461</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Security
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Preserve thread context when connecting to remote cluster <a href="https://github.com/elastic/elasticsearch/pull/31574" class="ulink" target="_top">#31574</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/31241" class="ulink" target="_top">#31241</a>, <a href="https://github.com/elastic/elasticsearch/issues/31462" class="ulink" target="_top">#31462</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Watcher
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Watcher: Fix put watch action <a href="https://github.com/elastic/elasticsearch/pull/31524" class="ulink" target="_top">#31524</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="release-notes-6.3.2.html">« Elasticsearch version 6.3.2</a>
</span>
<span class="next">
<a href="release-notes-6.3.0.html">Elasticsearch version 6.3.0 »</a>
</span>
</div>
</body>
</html>
