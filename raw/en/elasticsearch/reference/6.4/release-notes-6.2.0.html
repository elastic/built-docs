<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Elasticsearch version 6.2.0
        | Elasticsearch Reference [6.4]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [6.4]" /><link rel="up" href="es-release-notes.html" title="Release Notes" /><link rel="prev" href="release-notes-6.2.1.html" title="Elasticsearch version 6.2.1" /><link rel="next" href="release-notes-6.1.4.html" title="Elasticsearch version 6.1.4" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.4" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="6.4" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.4]
    </a></span> » <span class="breadcrumb-link"><a href="es-release-notes.html">Release Notes</a></span> » <span class="breadcrumb-node">Elasticsearch version 6.2.0</span></div><div class="navheader"><span class="prev"><a href="release-notes-6.2.1.html">
              « 
              Elasticsearch version 6.2.1</a>
           
        </span><span class="next">
           
          <a href="release-notes-6.1.4.html">Elasticsearch version 6.1.4
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="release-notes-6.2.0"></a>Elasticsearch version 6.2.0<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><h3><a id="breaking-6.2.0"></a>Breaking Changes<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Aggregations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add a new cluster setting to limit the total number of buckets returned by a request <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27581" target="_top">#27581</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26012" target="_top">#26012</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27452" target="_top">#27452</a>)</li></ul></div></dd><dt><span class="term">Core</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Forbid granting the all permission in production <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27548" target="_top">#27548</a></li></ul></div></dd><dt><span class="term">Highlighting</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Limit the analyzed text for highlighting <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27934" target="_top">#27934</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27517" target="_top">#27517</a>)</li></ul></div></dd><dt><span class="term">Rollover</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fail rollover if duplicated alias found in templates <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28110" target="_top">#28110</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26976" target="_top">#26976</a>)</li></ul></div></dd><dt><span class="term">Search</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Introduce limit to the number of terms in Terms Query <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27968" target="_top">#27968</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18829" target="_top">#18829</a>)</li></ul></div></dd></dl></div><h3><a id="_breaking_java_changes"></a>Breaking Java Changes<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Java API</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Remove <code class="literal">operationThreaded</code> from Java API <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27836" target="_top">#27836</a></li></ul></div></dd><dt><span class="term">Java High Level REST Client</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">REST high-level client: remove index suffix from indices client method names <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28263" target="_top">#28263</a></li></ul></div></dd></dl></div><h3><a id="_deprecations_2"></a>Deprecations<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Analysis</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Backport delimited payload filter renaming <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27535" target="_top">#27535</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26625" target="_top">#26625</a>)</li></ul></div></dd><dt><span class="term">Suggesters</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">deprecating <code class="literal">jarowinkler</code> in favor of <code class="literal">jaro_winkler</code> <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27526" target="_top">#27526</a></li><li class="listitem">Deprecating <code class="literal">levenstein</code> in favor of <code class="literal">levensHtein</code> <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27409" target="_top">#27409</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27325" target="_top">#27325</a>)</li></ul></div></dd></dl></div><h3><a id="_new_features"></a>New Features<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Machine Learning</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Added the ability to identify scheduled events and prevent anomaly detection
during these periods. For more information, see
<a class="ulink" href="/guide/en/elastic-stack-overview/6.4/ml-calendars.html" target="_top">Calendars and Scheduled Events</a>.</li></ul></div></dd><dt><span class="term">Plugin Ingest GeoIp</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Enable ASN support for Ingest GeoIP plugin.  <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27958" target="_top">#27958</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27849" target="_top">#27849</a>)</li></ul></div></dd><dt><span class="term">Plugin Lang Painless</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Painless: Add spi jar that will be published for extending whitelists <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28302" target="_top">#28302</a></li><li class="listitem">Painless: Add a simple cache for whitelist methods and fields. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28142" target="_top">#28142</a></li></ul></div></dd><dt><span class="term">Plugins</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add the ability to bundle multiple plugins into a meta plugin <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28022" target="_top">#28022</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27316" target="_top">#27316</a>)</li></ul></div></dd><dt><span class="term">Rank Evaluation</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Backport of ranking evaluation API (#27478) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27844" target="_top">#27844</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27478" target="_top">#27478</a>)</li></ul></div></dd><dt><span class="term">Recovery</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Backport for using lastSyncedGlobalCheckpoint in deletion policy <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27866" target="_top">#27866</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27826" target="_top">#27826</a>)</li></ul></div></dd><dt><span class="term">Reindex API</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add scroll parameter to _reindex API <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28041" target="_top">#28041</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27555" target="_top">#27555</a>)</li></ul></div></dd><dt><span class="term">Security</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">X-Pack security now supports user authentication using SAML Single Sign on. For
more information, see <a class="ulink" href="/guide/en/elastic-stack-overview/6.4/saml-realm.html" target="_top">SAML authentication</a>.</li></ul></div></dd><dt><span class="term">Watcher</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Added a transform input for chained input. For more information, see
<a class="xref" href="input-chain.html#_transforming_chained_input_data" title="Transforming chained input data">Transforming chained input data</a>.</li></ul></div></dd></dl></div><h3><a id="_enhancements_3"></a>Enhancements<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Allocation</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix cluster.routing.allocation.enable and cluster.routing.rebalance.enable case <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28037" target="_top">#28037</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28007" target="_top">#28007</a>)</li><li class="listitem">Add node id to shard failure message <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28024" target="_top">#28024</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28018" target="_top">#28018</a>)</li></ul></div></dd><dt><span class="term">Analysis</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Limit the analyzed text for highlighting (#27934) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28176" target="_top">#28176</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27517" target="_top">#27517</a>)</li><li class="listitem">Allow TrimFilter to be used in custom normalizers <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27758" target="_top">#27758</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27310" target="_top">#27310</a>)</li></ul></div></dd><dt><span class="term">Circuit Breakers</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add accounting circuit breaker and track segment memory usage <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27116" target="_top">#27116</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27044" target="_top">#27044</a>)</li></ul></div></dd><dt><span class="term">Cluster</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Adds wait_for_no_initializing_shards to cluster health API <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27489" target="_top">#27489</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25623" target="_top">#25623</a>)</li></ul></div></dd><dt><span class="term">Core</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Introduce elasticsearch-core jar <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28191" target="_top">#28191</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27933" target="_top">#27933</a>)</li><li class="listitem">Rename core module to server <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28190" target="_top">#28190</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27933" target="_top">#27933</a>)</li><li class="listitem">Rename core module to server <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28180" target="_top">#28180</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27933" target="_top">#27933</a>)</li><li class="listitem">Introduce elasticsearch-core jar <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28178" target="_top">#28178</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27933" target="_top">#27933</a>)</li><li class="listitem">Add Writeable.Reader support to TransportResponseHandler <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28010" target="_top">#28010</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26315" target="_top">#26315</a>)</li><li class="listitem">Simplify rejected execution exception <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27664" target="_top">#27664</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27663" target="_top">#27663</a>)</li><li class="listitem">Add node name to thread pool executor name <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27663" target="_top">#27663</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26007" target="_top">#26007</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26835" target="_top">#26835</a>)</li></ul></div></dd><dt><span class="term">Discovery</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add information when master node left to DiscoveryNodes' shortSummary() <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28197" target="_top">#28197</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28169" target="_top">#28169</a>)</li></ul></div></dd><dt><span class="term">Engine</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Move uid lock into LiveVersionMap <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27905" target="_top">#27905</a></li><li class="listitem">Optimize version map for append-only indexing <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27752" target="_top">#27752</a></li></ul></div></dd><dt><span class="term">Geo</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">[GEO] Add WKT Support to GeoBoundingBoxQueryBuilder <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27692" target="_top">#27692</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27690" target="_top">#27690</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9120" target="_top">#9120</a>)</li><li class="listitem">[Geo] Add Well Known Text (WKT) Parsing Support to ShapeBuilders <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27417" target="_top">#27417</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9120" target="_top">#9120</a>)</li></ul></div></dd><dt><span class="term">Highlighting</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Include all sentences smaller than fragment_size in the unified highlighter <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28132" target="_top">#28132</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28089" target="_top">#28089</a>)</li></ul></div></dd><dt><span class="term">Ingest</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Enable convert processor to support Long and Double <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27891" target="_top">#27891</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/23085" target="_top">#23085</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/23423" target="_top">#23423</a>)</li></ul></div></dd><dt><span class="term">Internal</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Make KeyedLock reentrant <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27920" target="_top">#27920</a></li><li class="listitem">Make AbstractQueryBuilder.declareStandardFields to be protected (#27865) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27894" target="_top">#27894</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27865" target="_top">#27865</a>)</li><li class="listitem">Tighten the CountedBitSet class <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27632" target="_top">#27632</a></li><li class="listitem">Avoid doing redundant work when checking for self references. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26927" target="_top">#26927</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26907" target="_top">#26907</a>)</li></ul></div></dd><dt><span class="term">Java API</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add missing delegate methods to NodeIndicesStats <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28092" target="_top">#28092</a></li><li class="listitem">Java api clean-up : consistency for <code class="literal">shards_acknowledged</code> getters  <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27819" target="_top">#27819</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27784" target="_top">#27784</a>)</li></ul></div></dd><dt><span class="term">Java High Level REST Client</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">add toString implementation for UpdateRequest. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27997" target="_top">#27997</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27986" target="_top">#27986</a>)</li><li class="listitem">Add Close Index API to the high level REST client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27734" target="_top">#27734</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27205" target="_top">#27205</a>)</li><li class="listitem">Add Open Index API to the high level REST client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27574" target="_top">#27574</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27205" target="_top">#27205</a>)</li><li class="listitem">Added Create Index support to high-level REST client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27351" target="_top">#27351</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27205" target="_top">#27205</a>)</li><li class="listitem">Add multi get api to the high level rest client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27337" target="_top">#27337</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27205" target="_top">#27205</a>)</li><li class="listitem">Add msearch api to high level client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27274" target="_top">#27274</a></li></ul></div></dd><dt><span class="term">Machine Learning</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Increased tokenization flexibility for categorization. Now all Elasticsearch analyzer
functionality is available, which opens up the possibility of sensibly
categorizing non-English log messages. For more information, see <a class="ulink" href="/guide/en/elastic-stack-overview/6.4/ml-configuring-categories.html#ml-configuring-analyzer" target="_top">Customizing the Categorization Analyzer</a>.</li><li class="listitem">Improved the sensitivity of the analysis to high variance data with lots of
values near zero.</li><li class="listitem">Improved the decay rate of the model memory by using a weighted moving average.</li><li class="listitem">Machine learning indices created after upgrading to 6.2 have the
<code class="literal">auto_expand_replicas: 0-1</code> setting rather than a fixed setting of 1 replica.
As a result, machine learning indices created after upgrading to 6.2 can have a green
status on single node clusters. There is no impact in multi-node clusters.</li><li class="listitem">Changed the credentials that are used by datafeeds. When X-Pack security is enabled,
a datafeed stores the roles of the user who created or updated the datafeed
<span class="strong strong"><strong>at that time</strong></span>. This means that if those roles are updated, the datafeed
subsequently runs with the new permissions that are associated with the roles.
However, if the user’s roles are adjusted after creating or updating the datafeed
then the datafeed continues to run with the permissions that are associated with
the original roles. For more information, see
<a class="ulink" href="/guide/en/elastic-stack-overview/6.4/ml-dfeeds.html" target="_top">Datafeeds</a>.</li><li class="listitem">Added a new <code class="literal">scheduled</code> forecast status, which indicates that the forecast
has not started yet.</li></ul></div></dd><dt><span class="term">Mapping</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Allow <code class="literal">_doc</code> as a type. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27816" target="_top">#27816</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27750" target="_top">#27750</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27751" target="_top">#27751</a>)</li></ul></div></dd><dt><span class="term">Monitoring</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">X-Pack monitoring indices (<code class="literal">.monitoring</code>) created after upgrading to 6.2 have the
<code class="literal">auto_expand_replicas: 0-1</code> setting rather than a fixed setting of 1 replica.
As a result, monitoring indices created after upgrading to 6.2 can have a green
status on single node clusters. There is no impact in multi-node clusters.</li><li class="listitem">Added a cluster alert that triggers whenever a node is added, removed, or
restarted.</li></ul></div></dd><dt><span class="term">Network</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add NioGroup for use in different transports <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27737" target="_top">#27737</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27260" target="_top">#27260</a>)</li><li class="listitem">Add read timeouts to http module <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27713" target="_top">#27713</a></li><li class="listitem">Implement byte array reusage in <code class="literal">NioTransport</code> <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27696" target="_top">#27696</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27563" target="_top">#27563</a>)</li><li class="listitem">Introduce resizable inbound byte buffer <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27551" target="_top">#27551</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27563" target="_top">#27563</a>)</li><li class="listitem">Decouple nio constructs from the tcp transport <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27484" target="_top">#27484</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27260" target="_top">#27260</a>)</li></ul></div></dd><dt><span class="term">Packaging</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Extend JVM options to support multiple versions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27675" target="_top">#27675</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27646" target="_top">#27646</a>)</li><li class="listitem">Add explicit coreutils dependency <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27660" target="_top">#27660</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27609" target="_top">#27609</a>)</li><li class="listitem">Detect mktemp from coreutils <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27659" target="_top">#27659</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27609" target="_top">#27609</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27643" target="_top">#27643</a>)</li><li class="listitem">Enable GC logs by default <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27610" target="_top">#27610</a></li><li class="listitem">Use private directory for temporary files <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27609" target="_top">#27609</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/14372" target="_top">#14372</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27144" target="_top">#27144</a>)</li></ul></div></dd><dt><span class="term">Percolator</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">also extract match_all queries when indexing percolator queries <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27585" target="_top">#27585</a></li></ul></div></dd><dt><span class="term">Plugin Lang Painless</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Painless: Add whitelist extensions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28161" target="_top">#28161</a></li><li class="listitem">Painless: Modify Loader to Load Classes Directly from Definition <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28088" target="_top">#28088</a></li><li class="listitem">Clean Up Painless Cast Object <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27794" target="_top">#27794</a></li><li class="listitem">Painless: Only allow Painless type names to be the same as the equivalent Java class. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27264" target="_top">#27264</a></li></ul></div></dd><dt><span class="term">Plugins</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add client actions to action plugin <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28280" target="_top">#28280</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27759" target="_top">#27759</a>)</li><li class="listitem">Plugins: Add validation to plugin descriptor parsing <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27951" target="_top">#27951</a></li><li class="listitem">Plugins: Add plugin extension capabilities <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27881" target="_top">#27881</a></li><li class="listitem">Add support for filtering mappings fields <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27603" target="_top">#27603</a></li></ul></div></dd><dt><span class="term">Rank Evaluation</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Simplify RankEvalResponse output <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28266" target="_top">#28266</a></li></ul></div></dd><dt><span class="term">Recovery</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Truncate tlog cli should assign global checkpoint <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28192" target="_top">#28192</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28181" target="_top">#28181</a>)</li><li class="listitem">Replica starts peer recovery with safe commit <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28181" target="_top">#28181</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10708" target="_top">#10708</a>)</li><li class="listitem">Primary send safe commit in file-based recovery <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28038" target="_top">#28038</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10708" target="_top">#10708</a>)</li><li class="listitem">Fail resync-failed shards in subsequent writes <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28005" target="_top">#28005</a></li><li class="listitem">Introduce promoting index shard state <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28004" target="_top">#28004</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/24841" target="_top">#24841</a>)</li><li class="listitem">Non-peer recovery should set the global checkpoint <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27965" target="_top">#27965</a></li><li class="listitem">Persist global checkpoint when finalizing a peer recovery <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27947" target="_top">#27947</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27861" target="_top">#27861</a>)</li><li class="listitem">Rollback a primary before recovering from translog <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27804" target="_top">#27804</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10708" target="_top">#10708</a>)</li></ul></div></dd><dt><span class="term">Search</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use typeName() to check field type in GeoShapeQueryBuilder <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27730" target="_top">#27730</a></li><li class="listitem">Optimize search_after when sorting in index sort order <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26401" target="_top">#26401</a></li></ul></div></dd><dt><span class="term">Security</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Added the ability to refresh tokens that were created by the token API. The
API provides information about a refresh token, which you can use within 24
hours of its creation to extend the life of a token. For more information, see
<a class="xref" href="security-api-tokens.html" title="Token management APIs">Token management APIs</a>.</li><li class="listitem">Added principal and role information to <code class="literal">access_granted</code>, <code class="literal">access_denied</code>,
<code class="literal">run_as_granted</code>, and <code class="literal">run_as_denied</code> audit events. For more information about
these events, see <a class="ulink" href="/guide/en/elastic-stack-overview/6.4/auditing.html" target="_top">Auditing Security Events</a>.</li><li class="listitem">Added audit event ignore policies, which are a way to tune the verbosity of an
audit trail. These policies define rules for ignoring audit events that match
specific attribute values. For more information, see
<a class="ulink" href="/guide/en/elastic-stack-overview/6.4/audit-log-output.html#audit-log-ignore-policy" target="_top">Logfile Audit Events Ignore Policies</a>.</li><li class="listitem">Added a certificates API, which enables you to retrieve information about the
X.509 certificates that are used to encrypt communications in your Elasticsearch cluster.
For more information, see <a class="xref" href="security-api-ssl.html" title="SSL Certificate API">SSL Certificate API</a>.</li></ul></div></dd><dt><span class="term">Sequence IDs</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Do not keep 5.x commits when having 6.x commits <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28188" target="_top">#28188</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27606" target="_top">#27606</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28038" target="_top">#28038</a>)</li><li class="listitem">Use lastSyncedGlobalCheckpoint in deletion policy <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27826" target="_top">#27826</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27606" target="_top">#27606</a>)</li><li class="listitem">Use CountedBitSet in LocalCheckpointTracker <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27793" target="_top">#27793</a></li><li class="listitem">Only fsync global checkpoint if needed <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27652" target="_top">#27652</a></li><li class="listitem">Keep commits and translog up to the global checkpoint <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27606" target="_top">#27606</a></li><li class="listitem">Adjust CombinedDeletionPolicy for multiple commits <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27456" target="_top">#27456</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10708" target="_top">#10708</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27367" target="_top">#27367</a>)</li><li class="listitem">Keeps index commits up to the current global checkpoint <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27367" target="_top">#27367</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10708" target="_top">#10708</a>)</li><li class="listitem">Dedup translog operations by reading in reverse <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27268" target="_top">#27268</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10708" target="_top">#10708</a>)</li></ul></div></dd><dt><span class="term">Settings</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add validation of keystore setting names <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27626" target="_top">#27626</a></li></ul></div></dd><dt><span class="term">Snapshot/Restore</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use AmazonS3.doesObjectExist() method in S3BlobContainer <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27723" target="_top">#27723</a></li><li class="listitem">Remove XContentType auto detection in BlobStoreRepository <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27480" target="_top">#27480</a></li><li class="listitem">Include include_global_state in Snapshot status API (#22423) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26853" target="_top">#26853</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/22423" target="_top">#22423</a>)</li></ul></div></dd><dt><span class="term">Task Manager</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add ability to associate an ID with tasks  <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27764" target="_top">#27764</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/23250" target="_top">#23250</a>)</li></ul></div></dd><dt><span class="term">Translog</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Simplify MultiSnapshot#SeqNoset <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27547" target="_top">#27547</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27268" target="_top">#27268</a>)</li><li class="listitem">Enclose CombinedDeletionPolicy in SnapshotDeletionPolicy <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27528" target="_top">#27528</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27367" target="_top">#27367</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27456" target="_top">#27456</a>)</li></ul></div></dd><dt><span class="term">Watcher</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Added the ability to set the <code class="literal">index</code> and <code class="literal">doc_type</code> dynamically in an index
action. For more information, see <a class="ulink" href="/guide/en/elastic-stack-overview/6.4/actions-index.html" target="_top">Index Action</a>.</li><li class="listitem">Added a <code class="literal">refresh</code> index action attribute, which enables you to set the
refresh policy of the write request. For more information, see
<a class="ulink" href="/guide/en/elastic-stack-overview/6.4/actions-index.html" target="_top">Index Action</a>.</li><li class="listitem">Added support for actions in slack attachments, which enables you to add
buttons that can be clicked in slack messages. For more information, see
<a class="ulink" href="/guide/en/elastic-stack-overview/6.4/actions-slack.html" target="_top">Slack Action</a>.</li><li class="listitem">Watcher indices (<code class="literal">.watch*</code> and <code class="literal">triggered_watches</code>) created after upgrading
to 6.2 have the <code class="literal">auto_expand_replicas: 0-1</code> setting rather than a fixed setting
of 1 replica. As a result, Watcher indices created after upgrading to 6.2 can
have a green status on single node clusters. There is no impact in multi-node
clusters.</li></ul></div></dd></dl></div><h3><a id="_bug_fixes_6"></a>Bug Fixes<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Aggregations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Adds metadata to rewritten aggregations <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28185" target="_top">#28185</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28170" target="_top">#28170</a>)</li><li class="listitem">Fix NPE on composite aggregation with sub-aggregations that need scores <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28129" target="_top">#28129</a></li><li class="listitem">StringTerms.Bucket.getKeyAsNumber detection type <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28118" target="_top">#28118</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28012" target="_top">#28012</a>)</li><li class="listitem">Fix incorrect results for aggregations nested under a nested aggregation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27946" target="_top">#27946</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27912" target="_top">#27912</a>)</li><li class="listitem">Fix global aggregation that requires breadth first and scores <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27942" target="_top">#27942</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/22321" target="_top">#22321</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27928" target="_top">#27928</a>)</li><li class="listitem">Fix composite aggregation when after term is missing in the shard <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27936" target="_top">#27936</a></li><li class="listitem">Fix preserving FiltersAggregationBuilder#keyed field on rewrite <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27900" target="_top">#27900</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27841" target="_top">#27841</a>)</li><li class="listitem">Using DocValueFormat::parseBytesRef for parsing missing value parameter <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27855" target="_top">#27855</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27788" target="_top">#27788</a>)</li><li class="listitem">Fix illegal cast of the "low cardinality" optimization of the <code class="literal">terms</code> aggregation. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27543" target="_top">#27543</a></li><li class="listitem">Always include the _index and _id for nested search hits. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27201" target="_top">#27201</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27053" target="_top">#27053</a>)</li></ul></div></dd><dt><span class="term">Allocation</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Do not open indices with broken settings <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26995" target="_top">#26995</a></li></ul></div></dd><dt><span class="term">Core</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix lock accounting in releasable lock <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28202" target="_top">#28202</a></li><li class="listitem">Fixes ByteSizeValue to serialise correctly <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27702" target="_top">#27702</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27568" target="_top">#27568</a>)</li><li class="listitem">Do not set data paths on no local storage required <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27587" target="_top">#27587</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27572" target="_top">#27572</a>)</li><li class="listitem">Ensure threadcontext is preserved when refresh listeners are invoked <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27565" target="_top">#27565</a></li><li class="listitem">Ensure logging is configured for CLI commands <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27523" target="_top">#27523</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27521" target="_top">#27521</a>)</li></ul></div></dd><dt><span class="term">Engine</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Replica recovery could go into an endless flushing loop <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28350" target="_top">#28350</a></li><li class="listitem">Use <code class="literal">_refresh</code> to shrink the version map on inactivity <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27918" target="_top">#27918</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27852" target="_top">#27852</a>)</li><li class="listitem">Allow resize version map under lock even if there are pending operations <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27870" target="_top">#27870</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27852" target="_top">#27852</a>)</li><li class="listitem">Reset LiveVersionMap on sync commit <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27534" target="_top">#27534</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27516" target="_top">#27516</a>)</li></ul></div></dd><dt><span class="term">Geo</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Correct two equality checks on incomparable types <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27688" target="_top">#27688</a></li><li class="listitem">Handle case where the hole vertex is south of the containing polygon(s) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27685" target="_top">#27685</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25933" target="_top">#25933</a>)</li></ul></div></dd><dt><span class="term">Highlighting</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix highlighting on a keyword field that defines a normalizer <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27604" target="_top">#27604</a></li></ul></div></dd><dt><span class="term">Inner Hits</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Add version support for inner hits in field collapsing (#27822) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27833" target="_top">#27833</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27822" target="_top">#27822</a>)</li></ul></div></dd><dt><span class="term">Internal</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Never return null from Strings.tokenizeToStringArray <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28224" target="_top">#28224</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28213" target="_top">#28213</a>)</li><li class="listitem">Fallback to TransportMasterNodeAction for cluster health retries <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28195" target="_top">#28195</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28169" target="_top">#28169</a>)</li><li class="listitem">Retain originalIndex info when rewriting FieldCapabilities requests <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27761" target="_top">#27761</a></li></ul></div></dd><dt><span class="term">Java REST Client</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Do not use system properties when building the HttpAsyncClient <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27829" target="_top">#27829</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27827" target="_top">#27827</a>)</li></ul></div></dd><dt><span class="term">Machine Learning</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Improved error reporting for crashes and resource problems on Linux.</li><li class="listitem">Improved the detection of seasonal trends in bucket spans longer than 1 hour.</li><li class="listitem">Updated the forecast API to wait for validation and return an error if the
validation fails.</li><li class="listitem">Set the actual bucket value to 0 in model plots for empty buckets for count
and sum functions. The count and sum functions treat empty buckets as 0 rather
than unknown for anomaly detection, so it was inconsistent not to do the same
for model plots. This inconsistency resulted in problems plotting these buckets
in Kibana.</li></ul></div></dd><dt><span class="term">Mapping</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Ignore null value for range field (#27845) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28116" target="_top">#28116</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27845" target="_top">#27845</a>)</li><li class="listitem">Pass <code class="literal">java.locale.providers=COMPAT</code> to Java 9 onwards <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28080" target="_top">#28080</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10984" target="_top">#10984</a>)</li><li class="listitem">Allow update of <code class="literal">eager_global_ordinals</code> on <code class="literal">_parent</code>. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28014" target="_top">#28014</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/24407" target="_top">#24407</a>)</li><li class="listitem">Fix merging of _meta field <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27352" target="_top">#27352</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27323" target="_top">#27323</a>)</li></ul></div></dd><dt><span class="term">Network</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Only bind loopback addresses when binding to local <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28029" target="_top">#28029</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/1877" target="_top">#1877</a>)</li><li class="listitem">Remove potential nio selector leak <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27825" target="_top">#27825</a></li><li class="listitem">Fix issue where the incorrect buffers are written <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27695" target="_top">#27695</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27551" target="_top">#27551</a>)</li><li class="listitem">Throw UOE from compressible bytes stream reset <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27564" target="_top">#27564</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/24927" target="_top">#24927</a>)</li><li class="listitem">Bubble exceptions when closing compressible streams <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27542" target="_top">#27542</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27540" target="_top">#27540</a>)</li></ul></div></dd><dt><span class="term">Packaging</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Allow custom service names when installing on windows <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/25255" target="_top">#25255</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25231" target="_top">#25231</a>)</li></ul></div></dd><dt><span class="term">Percolator</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Avoid TooManyClauses exception if number of terms / ranges is exactly equal to 1024 <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27519" target="_top">#27519</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/1" target="_top">#1</a>)</li></ul></div></dd><dt><span class="term">Plugin Analysis ICU</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Catch InvalidPathException in IcuCollationTokenFilterFactory <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27202" target="_top">#27202</a></li></ul></div></dd><dt><span class="term">Plugin Analysis Phonetic</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix daitch_mokotoff phonetic filter to use the dedicated Lucene filter <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28225" target="_top">#28225</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28211" target="_top">#28211</a>)</li></ul></div></dd><dt><span class="term">Plugin Lang Painless</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Painless: Fix variable scoping issue in lambdas <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27571" target="_top">#27571</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26760" target="_top">#26760</a>)</li><li class="listitem">Painless: Fix errors allowing void to be assigned to def. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27460" target="_top">#27460</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27210" target="_top">#27210</a>)</li></ul></div></dd><dt><span class="term">Plugin Repository HDFS</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix SecurityException when HDFS Repository used against HA Namenodes <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27196" target="_top">#27196</a></li></ul></div></dd><dt><span class="term">Plugins</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Make sure that we don’t detect files as maven coordinate when installing a plugin <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28163" target="_top">#28163</a></li><li class="listitem">Fix upgrading indices which use a custom similarity plugin. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26985" target="_top">#26985</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25350" target="_top">#25350</a>)</li></ul></div></dd><dt><span class="term">Recovery</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Open engine should keep only starting commit <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28228" target="_top">#28228</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27804" target="_top">#27804</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28181" target="_top">#28181</a>)</li><li class="listitem">Allow shrinking of indices from a previous major <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28076" target="_top">#28076</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28061" target="_top">#28061</a>)</li><li class="listitem">Set global checkpoint before open engine from store <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27972" target="_top">#27972</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27965" target="_top">#27965</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27970" target="_top">#27970</a>)</li><li class="listitem">Check and repair index under the store metadata lock <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27768" target="_top">#27768</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/24481" target="_top">#24481</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/24787" target="_top">#24787</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27731" target="_top">#27731</a>)</li><li class="listitem">Flush old indices on primary promotion and relocation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27580" target="_top">#27580</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27536" target="_top">#27536</a>)</li></ul></div></dd><dt><span class="term">Rollover</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Make index rollover action atomic <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28039" target="_top">#28039</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26976" target="_top">#26976</a>)</li></ul></div></dd><dt><span class="term">Scripting</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Ensure we protect Collections obtained from scripts from self-referencing <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28335" target="_top">#28335</a></li></ul></div></dd><dt><span class="term">Scroll</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Reject scroll query if size is 0 (#22552) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27842" target="_top">#27842</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/22552" target="_top">#22552</a>)</li><li class="listitem">Fix scroll query with a sort that is a prefix of the index sort <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27498" target="_top">#27498</a></li></ul></div></dd><dt><span class="term">Search</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix simple_query_string on invalid input <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28219" target="_top">#28219</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28204" target="_top">#28204</a>)</li><li class="listitem">Use the underlying connection version for CCS connections  <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28093" target="_top">#28093</a></li><li class="listitem">Fix synonym phrase query expansion for cross_fields parsing <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28045" target="_top">#28045</a></li><li class="listitem">Carry forward weights, etc on rescore rewrite <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27981" target="_top">#27981</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27979" target="_top">#27979</a>)</li><li class="listitem">Fix routing with leading or trailing whitespace <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27712" target="_top">#27712</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27708" target="_top">#27708</a>)</li></ul></div></dd><dt><span class="term">Security</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Updated the <code class="literal">setup-passwords</code> command to generate passwords with characters
<code class="literal">A-Z</code>, <code class="literal">a-z</code>, and <code class="literal">0-9</code>, so that they are safe to use in shell scripts. For more
information about this command, see <a class="xref" href="setup-passwords.html" title="elasticsearch-setup-passwords"><em>elasticsearch-setup-passwords</em></a>.</li><li class="listitem">Improved the error messages that occur if the <code class="literal">x-pack</code> directory is missing
when you run <a class="link" href="users-command.html" title="elasticsearch-users"><code class="literal">users</code> commands</a>.</li><li class="listitem">Fixed the ordering of realms in a realm chain, which determines the order in
which the realms are consulted. For more information, see
<a class="ulink" href="/guide/en/elastic-stack-overview/6.4/realms.html" target="_top">Realms</a>.</li></ul></div></dd><dt><span class="term">Sequence IDs</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Recovery from snapshot may leave seq# gaps <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27850" target="_top">#27850</a></li><li class="listitem">No longer unidle shard during recovery <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27757" target="_top">#27757</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26591" target="_top">#26591</a>)</li><li class="listitem">Obey translog durability in global checkpoint sync <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27641" target="_top">#27641</a></li></ul></div></dd><dt><span class="term">Settings</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Settings: Introduce settings updater for a list of settings <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28338" target="_top">#28338</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28047" target="_top">#28047</a>)</li><li class="listitem">Fix setting notification for complex setting (affixMap settings) that could cause transient settings to be ignored <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28317" target="_top">#28317</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28316" target="_top">#28316</a>)</li><li class="listitem">Fix environment variable substitutions in list setting <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28106" target="_top">#28106</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27926" target="_top">#27926</a>)</li><li class="listitem">Allow index settings to be reset by wildcards <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27671" target="_top">#27671</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27537" target="_top">#27537</a>)</li></ul></div></dd><dt><span class="term">Snapshot/Restore</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Consistent updates of IndexShardSnapshotStatus <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28130" target="_top">#28130</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26480" target="_top">#26480</a>)</li><li class="listitem">Avoid concurrent snapshot finalizations when deleting an INIT snapshot <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28078" target="_top">#28078</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27214" target="_top">#27214</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27931" target="_top">#27931</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27974" target="_top">#27974</a>)</li><li class="listitem">Do not start snapshots that are deleted during initialization <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27931" target="_top">#27931</a></li><li class="listitem">Do not swallow exception in ChecksumBlobStoreFormat.writeAtomic() <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27597" target="_top">#27597</a></li><li class="listitem">Consistent update of stage and failure message in IndexShardSnapshotStatus <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27557" target="_top">#27557</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26480" target="_top">#26480</a>)</li><li class="listitem">Fail restore when the shard allocations max retries count is reached <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27493" target="_top">#27493</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26865" target="_top">#26865</a>)</li><li class="listitem">Delete shard store files before restoring a snapshot <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27476" target="_top">#27476</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/20220" target="_top">#20220</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26865" target="_top">#26865</a>)</li></ul></div></dd><dt><span class="term">Stats</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fixes DocStats to properly deal with shards that report -1 index size <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27863" target="_top">#27863</a></li><li class="listitem">Include internal refreshes in refresh stats <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27615" target="_top">#27615</a></li></ul></div></dd><dt><span class="term">Term Vectors</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix term vectors generator with keyword and normalizer <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27608" target="_top">#27608</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/27320" target="_top">#27320</a>)</li></ul></div></dd><dt><span class="term">Watcher</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Replaced group settings with affix key settings where filters are needed.
For more information, see <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28338" target="_top">https://github.com/elastic/elasticsearch/pull/28338</a>.</li></ul></div></dd></dl></div><h3><a id="_upgrades"></a>Upgrades<a href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/release-notes/6.2.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Core</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Dependencies: Update joda time to 2.9.9 <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28261" target="_top">#28261</a></li><li class="listitem">upgrade to lucene 7.2.1 <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28218" target="_top">#28218</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28044" target="_top">#28044</a>)</li><li class="listitem">Upgrade jna from 4.4.0-1 to 4.5.1 <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/28183" target="_top">#28183</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28172" target="_top">#28172</a>)</li></ul></div></dd><dt><span class="term">Ingest</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">update ingest-attachment to use Tika 1.17 and newer deps <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/27824" target="_top">#27824</a></li></ul></div></dd></dl></div></div><div class="navfooter"><span class="prev"><a href="release-notes-6.2.1.html">
              « 
              Elasticsearch version 6.2.1</a>
           
        </span><span class="next">
           
          <a href="release-notes-6.1.4.html">Elasticsearch version 6.1.4
               »
            </a></span></div></body></html>
