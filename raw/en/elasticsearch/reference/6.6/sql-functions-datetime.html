<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Date/Time and Interval Functions and Operators | Elasticsearch Reference [6.6] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [6.6]"/>
<link rel="up" href="sql-functions.html" title="Functions and Operators"/>
<link rel="prev" href="sql-functions-grouping.html" title="Grouping Functions"/>
<link rel="next" href="sql-functions-search.html" title="Full-Text Search Functions"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.6"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="6.6"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [6.6]</a></span>
»
<span class="breadcrumb-link"><a href="xpack-sql.html">SQL Access</a></span>
»
<span class="breadcrumb-link"><a href="sql-functions.html">Functions and Operators</a></span>
»
<span class="breadcrumb-node">Date/Time and Interval Functions and Operators</span>
</div>
<div class="navheader">
<span class="prev">
<a href="sql-functions-grouping.html">« Grouping Functions</a>
</span>
<span class="next">
<a href="sql-functions-search.html">Full-Text Search Functions »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="sql-functions-datetime"></a>Date/Time and Interval Functions and Operators<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Elasticsearch SQL offers a wide range of facilities for performing date/time manipulations.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-interval"></a>Intervals<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p>A common requirement when dealing with date/time in general revolves around
the notion of <code class="literal">interval</code>, a topic that is worth exploring in the context of Elasticsearch and Elasticsearch SQL.</p>
<p>Elasticsearch has comprehensive support for <a class="xref" href="common-options.html#date-math" title="Date Math">date math</a> both inside <a class="xref" href="date-math-index-names.html" title="Date math support in index names">index names</a> and <a class="xref" href="mapping-date-format.html" title="format">queries</a>.
Inside Elasticsearch SQL the former is supported as is by passing the expression in the table name, while the latter is supported through the standard SQL <code class="literal">INTERVAL</code>.</p>
<p>The table below shows the mapping between Elasticsearch and Elasticsearch SQL:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Elasticsearch</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>Elasticsearch SQL</strong></span></p></td>
</tr>
<tr>
<td align="center" colspan="2" valign="top"><p><span class="strong strong"><strong>Index/Table date math</strong></span></p></td>
</tr>
<tr>
<td align="center" colspan="2" valign="top"><p><code class="literal">&lt;index-{now/M{YYYY.MM}}&gt;</code></p></td>
</tr>
<tr>
<td align="center" colspan="2" valign="top"><p><span class="strong strong"><strong>Query date math</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">1y</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 1 YEAR</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">2M</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 2 MONTH</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">3w</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 21 DAY</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">4d</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 4 DAY</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">5h</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 5 HOUR</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">6m</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 6 MINUTE</code></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">7s</code></p></td>
<td align="center" valign="top"><p><code class="literal">INTERVAL 7 SECOND</code></p></td>
</tr>
</tbody>
</table>
</div>
<p><code class="literal">INTERVAL</code> allows either <code class="literal">YEAR</code> and <code class="literal">MONTH</code> to be mixed together <em>or</em> <code class="literal">DAY</code>, <code class="literal">HOUR</code>, <code class="literal">MINUTE</code> and <code class="literal">SECOND</code>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch SQL accepts also the plural for each time unit (e.g. both <code class="literal">YEAR</code> and <code class="literal">YEARS</code> are valid).</p>
</div>
</div>
<p>Example of the possible combinations below:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Interval</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>Description</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '1-2' YEAR TO MONTH</code></p></td>
<td align="center" valign="top"><p>1 year and 2 months</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '3 4' DAYS TO HOURS</code></p></td>
<td align="center" valign="top"><p>3 days and 4 hours</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '5 6:12' DAYS TO MINUTES</code></p></td>
<td align="center" valign="top"><p>5 days, 6 hours and 12 minutes</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '3 4:56:01' DAY TO SECOND</code></p></td>
<td align="center" valign="top"><p>3 days, 4 hours, 56 minutes and 1 second</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '2 3:45:01.23456789' DAY TO SECOND</code></p></td>
<td align="center" valign="top"><p>2 days, 3 hours, 45 minutes, 1 second and 234567890 nanoseconds</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '123:45' HOUR TO MINUTES</code></p></td>
<td align="center" valign="top"><p>123 hours and 45 minutes</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '65:43:21.0123' HOUR TO SECONDS</code></p></td>
<td align="center" valign="top"><p>65 hours, 43 minutes, 21 seconds and 12300000 nanoseconds</p></td>
</tr>
<tr>
<td align="center" valign="top"><p><code class="literal">INTERVAL '45:01.23' MINUTES TO SECONDS</code></p></td>
<td align="center" valign="top"><p>45 minutes, 1 second and 230000000 nanoseconds</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_operators"></a>Operators<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p>Basic arithmetic operators (<code class="literal">+</code>, <code class="literal">-</code>, etc) support date-time parameters as indicated below:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT INTERVAL 1 DAY + INTERVAL 53 MINUTES AS result;

    result
---------------
+1 00:53:00.0</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CAST('1969-05-13T12:34:56' AS DATE) + INTERVAL 49 YEARS AS result;

       result
--------------------
2018-05-13T12:34:56Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT - INTERVAL '49-1' YEAR TO MONTH result;

    result
---------------
-49-1</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT INTERVAL '1' DAY - INTERVAL '2' HOURS AS result;

    result
---------------
+0 22:00:00.0</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CAST('2018-05-13T12:34:56' AS DATE) - INTERVAL '2-8' YEAR TO MONTH AS result;

       result
--------------------
2015-09-13T12:34:56Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT -2 * INTERVAL '3' YEARS AS result;

    result
---------------
-6-0</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_functions"></a>Functions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-current-timestamp"></a><code class="literal">CURRENT_TIMESTAMP</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">CURRENT_TIMESTAMP
CURRENT_TIMESTAMP([precision]) <a id="CO411-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO411-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>fractional digits; optional</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: date/time</p>
<p><strong>Description:</strong>Returns the date/time when the current query reached the server.
As a function, <code class="literal">CURRENT_TIMESTAMP()</code> accepts <em>precision</em> as an optional
parameter for rounding the second fractional digits (nanoseconds).</p>
<p>This method always returns the same value within a query.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIMESTAMP AS result;

         result
------------------------
2018-12-12T14:48:52.448Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIMESTAMP() AS result;

         result
------------------------
2018-12-12T14:48:52.448Z</pre>
</div>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT CURRENT_TIMESTAMP(1) AS result;

         result
------------------------
2018-12-12T14:48:52.4Z</pre>
</div>
<p>Typically, this function (as well as its twin <a class="xref" href="sql-functions-datetime.html#sql-functions-now" title="NOW">NOW())</a> function is used for
relative date/time filtering:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT first_name FROM emp WHERE hire_date &gt; NOW() - INTERVAL 100 YEARS ORDER BY first_name ASC LIMIT 5;

  first_name
---------------
Alejandro
Amabile
Anneke
Anoosh
Arumugam</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Currently, using a <em>precision</em> greater than 3 doesn&#8217;t make any difference to the output of the
function as the maximum number of second fractional digits returned is 3 (milliseconds).</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-day"></a><code class="literal">DAY_OF_MONTH/DOM/DAY</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_OF_MONTH(date_exp) <a id="CO412-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO412-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the day of the month from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_MONTH(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
19</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-dow"></a><code class="literal">DAY_OF_WEEK/DAYOFWEEK/DOW</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_OF_WEEK(date_exp) <a id="CO413-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO413-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the day of the week from a date. Sunday is <code class="literal">1</code>, Monday is <code class="literal">2</code>, etc.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_WEEK(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
2</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-doy"></a><code class="literal">DAY_OF_YEAR/DOY</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_OF_YEAR(date_exp) <a id="CO414-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO414-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the day of the year from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
50</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-dayname"></a><code class="literal">DAY_NAME/DAYNAME</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">DAY_NAME(date_exp) <a id="CO415-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO415-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><strong>Description:</strong>Extract the day of the week from a datetime in text format (<code class="literal">Monday</code>, <code class="literal">Tuesday</code>&#8230;&#8203;).</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_NAME(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
Monday</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-hour"></a><code class="literal">HOUR_OF_DAY/HOUR</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">HOUR_OF_DAY(date_exp) <a id="CO416-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO416-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the hour of the day from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT HOUR_OF_DAY(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS hour;

     hour
---------------
10</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-isodow"></a><code class="literal">ISO_DAY_OF_WEEK/ISODAYOFWEEK/ISODOW/IDOW</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ISO_DAY_OF_WEEK(date_exp) <a id="CO417-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO417-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the day of the week from a date, following the <a href="https://en.wikipedia.org/wiki/ISO_week_date" class="ulink" target="_top">ISO 8601 standard</a>.
Monday is <code class="literal">1</code>, Tuesday is <code class="literal">2</code>, etc.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ISO_DAY_OF_WEEK(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-isoweek"></a><code class="literal">ISO_WEEK_OF_YEAR/ISOWEEKOFYEAR/ISOWEEK/IWOY/IW</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">ISO_WEEK_OF_YEAR(date_exp) <a id="CO418-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO418-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the week of the year from a date, following <a href="https://en.wikipedia.org/wiki/ISO_week_date" class="ulink" target="_top">ISO 8601 standard</a>. The first week
of a year is the first week with a majority (4 or more) of its days in January.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT ISO_WEEK_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS week;

     week
---------------
8</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-minuteofday"></a><code class="literal">MINUTE_OF_DAY</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MINUTE_OF_DAY(date_exp) <a id="CO419-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO419-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the minute of the day from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MINUTE_OF_DAY(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS minute;

    minute
---------------
623</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-minute"></a><code class="literal">MINUTE_OF_HOUR/MINUTE</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MINUTE_OF_HOUR(date_exp) <a id="CO420-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO420-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the minute of the hour from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MINUTE_OF_HOUR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS minute;

    minute
---------------
23</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-month"></a><code class="literal">MONTH_OF_YEAR/MONTH</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MONTH(date_exp) <a id="CO421-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO421-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the month of the year from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MONTH_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS month;

     month
---------------
2</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-monthname"></a><code class="literal">MONTH_NAME/MONTHNAME</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">MONTH_NAME(date_exp) <a id="CO422-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO422-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: string</p>
<p><strong>Description:</strong>Extract the month from a datetime in text format (<code class="literal">January</code>, <code class="literal">February</code>&#8230;&#8203;).</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT MONTH_NAME(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS month;

     month
---------------
February</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-now"></a><code class="literal">NOW</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">NOW()</pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>: <em>none</em></p>
<p><span class="strong strong"><strong>Output</strong></span>: date/time</p>
<p><strong>Description:</strong>This function offers the same functionality as <a class="xref" href="sql-functions-datetime.html#sql-functions-current-timestamp" title="CURRENT_TIMESTAMP">CURRENT_TIMESTAMP()</a> function: returns the date/time
when the current query reached the server. This method always returns the same value within a query.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT NOW() AS result;

         result
------------------------
2018-12-12T14:48:52.448Z</pre>
</div>
<p>Typically, this function (as well as its twin <a class="xref" href="sql-functions-datetime.html#sql-functions-current-timestamp" title="CURRENT_TIMESTAMP">CURRENT_TIMESTAMP())</a> function is used for
relative date/time filtering:</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT first_name FROM emp WHERE hire_date &gt; NOW() - INTERVAL 100 YEARS ORDER BY first_name ASC LIMIT 5;

  first_name
---------------
Alejandro
Amabile
Anneke
Anoosh
Arumugam</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-second"></a><code class="literal">SECOND_OF_MINUTE/SECOND</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SECOND_OF_MINUTE(date_exp) <a id="CO423-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO423-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the second of the minute from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT SECOND_OF_MINUTE(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS second;

    second
---------------
27</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-quarter"></a><code class="literal">QUARTER</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">QUARTER(date_exp) <a id="CO424-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO424-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the year quarter the date falls in.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT QUARTER(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS quarter;

    quarter
---------------
1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-week"></a><code class="literal">WEEK_OF_YEAR/WEEK</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">WEEK_OF_YEAR(date_exp) <a id="CO425-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO425-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the week of the year from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT WEEK(CAST('1988-01-05T09:22:10Z' AS TIMESTAMP)) AS week, ISOWEEK(CAST('1988-01-05T09:22:10Z' AS TIMESTAMP)) AS isoweek;

      week     |   isoweek
---------------+---------------
2              |1</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-year"></a><code class="literal">YEAR</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">YEAR(date_exp) <a id="CO426-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO426-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract the year from a date.</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS year;

     year
---------------
2018</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="sql-functions-datetime-extract"></a><code class="literal">EXTRACT</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/sql/functions/date-time.asciidoc">edit</a></h3>
</div></div></div>
<p><strong>Synopsis:</strong></p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">EXTRACT(
    datetime_function <a id="CO427-1"></a><i class="conum" data-value="1"></i>
    FROM date_exp)    <a id="CO427-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<p><span class="strong strong"><strong>Input</strong></span>:</p>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO427-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>datetime function name</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO427-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>date expression</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Output</strong></span>: integer</p>
<p><strong>Description:</strong>Extract fields from a datetime by specifying the name of a <a class="xref" href="sql-functions-datetime.html" title="Date/Time and Interval Functions and Operators">datetime function</a>.
The following</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT EXTRACT(DAY_OF_YEAR FROM CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
50</pre>
</div>
<p>is the equivalent to</p>
<div class="pre_wrapper lang-sql">
<pre class="programlisting prettyprint lang-sql">SELECT DAY_OF_YEAR(CAST('2018-02-19T10:23:27Z' AS TIMESTAMP)) AS day;

      day
---------------
50</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="sql-functions-grouping.html">« Grouping Functions</a>
</span>
<span class="next">
<a href="sql-functions-search.html">Full-Text Search Functions »</a>
</span>
</div>
</div>
</body>
</html>
