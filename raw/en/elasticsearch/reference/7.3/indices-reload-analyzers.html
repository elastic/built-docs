<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Reload Search Analyzers
        | Elasticsearch Reference [7.3]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [7.3]" /><link rel="up" href="rest-apis.html" title="REST APIs" /><link rel="prev" href="migration-api-deprecation.html" title="Deprecation info APIs" /><link rel="next" href="rollup-apis.html" title="Rollup APIs" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.3" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="7.3" /></head><body><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.3]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-node">Reload Search Analyzers</span></div><div class="navheader"><span class="prev"><a href="migration-api-deprecation.html">
              « 
              Deprecation info APIs</a>
           
        </span><span class="next">
           
          <a href="rollup-apis.html">Rollup APIs
               »
            </a></span></div><div class="xpack chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-reload-analyzers"></a>Reload Search Analyzers<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/indices/apis/reload-analyzers.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>Reloads search analyzers and its resources.</p><p>Synonym filters (both <code class="literal">synonym</code> and <code class="literal">synonym_graph</code>) can be declared as
updateable if they are only used in <a class="link" href="search-analyzer.html" title="search_analyzer">search analyzers</a>
with the <code class="literal">updateable</code> flag:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">PUT /my_index
{
    "settings": {
        "index" : {
            "analysis" : {
                "analyzer" : {
                    "my_synonyms" : {
                        "tokenizer" : "whitespace",
                        "filter" : ["synonym"]
                    }
                },
                "filter" : {
                    "synonym" : {
                        "type" : "synonym",
                        "synonyms_path" : "analysis/synonym.txt",
                        "updateable" : true <a id="CO522-1"></a><i class="conum" data-value="1"></i>
                    }
                }
            }
        }
    },
    "mappings": {
        "properties": {
            "text": {
                "type": "text",
                "analyzer" : "standard",
                "search_analyzer": "my_synonyms" <a id="CO522-2"></a><i class="conum" data-value="2"></i>
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/1518.console"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO522-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Mark the synonym filter as updateable.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO522-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Synonym analyzer is usable as a search_analyzer.</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Trying to use the above analyzer as an index analyzer will result in an error.</p></div></div><p>Using the <a class="link" href="indices-reload-analyzers.html" title="Reload Search Analyzers">analyzer reload API</a>, you can trigger reloading of the
synonym definition. The contents of the configured synonyms file will be reloaded and the
synonyms definition the filter uses will be updated.</p><p>The <code class="literal">_reload_search_analyzers</code> API can be run on one or more indices and will trigger
reloading of the synonyms from the configured file.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Reloading will happen on every node the index has shards, so its important
to update the synonym file contents on every data node (even the ones that don’t currently
hold shard copies; shards might be relocated there in the future) before calling
reload to ensure the new state of the file is reflected everywhere in the cluster.</p></div></div><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">POST /my_index/_reload_search_analyzers</pre></div><div class="console_widget" data-snippet="snippets/1519.console"></div><p>The reload request returns information about the nodes it was executed on and the
analyzers that were reloaded:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "_shards" : {
        "total" : 2,
        "successful" : 2,
        "failed" : 0
    },
    "reload_details" : [
        {
            "index" : "my_index",
            "reloaded_analyzers" : [
                "my_synonyms"
            ],
            "reloaded_node_ids" : [
                "mfdqTXn_T7SGr2Ho2KT8uw"
            ]
        }
    ]
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Reloading does not happen on each shard of an index, but once on each node
the index has shards on. The total shard count can therefore differ from the number
of index shards.</p></div></div></div><div class="navfooter"><span class="prev"><a href="migration-api-deprecation.html">
              « 
              Deprecation info APIs</a>
           
        </span><span class="next">
           
          <a href="rollup-apis.html">Rollup APIs
               »
            </a></span></div></body></html>
