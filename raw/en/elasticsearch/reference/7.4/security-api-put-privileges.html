<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create or update application privileges API
        | Elasticsearch Reference [7.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [7.4]" /><link rel="up" href="security-api.html" title="Security APIs" /><link rel="prev" href="security-api-create-api-key.html" title="Create API key API" /><link rel="next" href="security-api-put-role-mapping.html" title="Create or update role mappings API" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.4" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="7.4" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.4]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-link"><a href="security-api.html">Security APIs</a></span> » <span class="breadcrumb-node">Create or update application privileges API</span></div><div class="navheader"><span class="prev"><a href="security-api-create-api-key.html">
              « 
              Create API key API</a>
           
        </span><span class="next">
           
          <a href="security-api-put-role-mapping.html">Create or update role mappings API
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="security-api-put-privileges"></a>Create or update application privileges API<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Adds or updates
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.4/security-privileges.html#application-privileges" target="_top">application privileges</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security-api-put-privileges-request"></a>Request<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><code class="literal">POST /_security/privilege</code></p><p><code class="literal">PUT /_security/privilege</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security-api-put-privileges-prereqs"></a>Prerequisites<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>To use this API, you must have either:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the <code class="literal">manage_security</code> cluster privilege (or a greater privilege such as <code class="literal">all</code>); <span class="emphasis"><em>or</em></span></li><li class="listitem">the <span class="emphasis"><em>"Manage Application Privileges"</em></span> global privilege for the application
being referenced in the request</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security-api-put-privileges-desc"></a>Description<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>This API creates or updates privileges. To remove privileges, use the
<a class="link" href="security-api-delete-privilege.html" title="Delete application privileges API">delete application privilege API</a>.</p><p>For more information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.4/defining-roles.html#roles-application-priv" target="_top">Application privileges</a>.</p><p>To check a user’s application privileges, use the
<a class="link" href="security-api-has-privileges.html" title="Has privileges API">has privileges API</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security-api-put-privileges-request-body"></a>Request body<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The body is a JSON object where the names of the fields are the application
names and the value of each field is an object. The fields in this inner
object are the names of the privileges and each value is a JSON object that
includes the following fields:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">actions</code></span></dt><dd>(array-of-string) A list of action names that are granted by this
privilege. This field must exist and cannot be an empty array.</dd><dt><span class="term"><code class="literal">metadata</code></span></dt><dd>(object) Optional meta-data. Within the <code class="literal">metadata</code> object, keys
that begin with <code class="literal">_</code> are reserved for system usage.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security-api-app-privileges-validation"></a>Validation<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Application names</span></dt><dd><p class="simpara">Application names are formed from a <span class="emphasis"><em>prefix</em></span>, with an optional <span class="emphasis"><em>suffix</em></span> that
conform to the following rules:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The prefix must begin with a lowercase ASCII letter</li><li class="listitem">The prefix must contain only ASCII letters or digits</li><li class="listitem">The prefix must be at least 3 characters long</li><li class="listitem">If the suffix exists, it must begin with either <code class="literal">-</code> or <code class="literal">_</code></li><li class="listitem">The suffix cannot contain any of the following characters:
<code class="literal">\\</code>, <code class="literal">/</code>, <code class="literal">*</code>, <code class="literal">?</code>, <code class="literal">"</code>, <code class="literal">&lt;</code>, <code class="literal">&gt;</code>, <code class="literal">|</code>, <code class="literal">,</code>, <code class="literal">*</code></li><li class="listitem">No part of the name can contain whitespace.</li></ul></div></dd><dt><span class="term">Privilege names</span></dt><dd>Privilege names must begin with a lowercase ASCII letter and must contain
only ASCII letters and digits along with the characters <code class="literal">_</code>, <code class="literal">-</code> and <code class="literal">.</code></dd><dt><span class="term">Action names</span></dt><dd>Action names can contain any number of printable ASCII characters and must
contain at least one of the following characters: <code class="literal">/</code> <code class="literal">*</code>, <code class="literal">:</code></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security-api-put-privileges-response-body"></a>Response body<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A successful call returns a JSON structure that shows whether the privilege has
been created or updated.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="security-api-put-privileges-example"></a>Examples<a href="https://github.com/elastic/elasticsearch/edit/7.4/x-pack/docs/en/rest-api/security/put-app-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>To add a single privilege, submit a PUT or POST request to the
<code class="literal">/_security/privilege/&lt;application&gt;/&lt;privilege&gt;</code> endpoint. For example:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">PUT /_security/privilege
{
  "myapp": {
    "read": {
      "actions": [ <a id="CO565-1"></a><i class="conum" data-value="1"></i>
        "data:read/*" , <a id="CO565-2"></a><i class="conum" data-value="2"></i>
        "action:login" ],
        "metadata": { <a id="CO565-3"></a><i class="conum" data-value="3"></i>
          "description": "Read access to myapp"
        }
      }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/1750.console"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO565-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>These strings have significance within the "myapp" application. Elasticsearch does not
assign any meaning to them.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO565-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The use of a wildcard here (<code class="literal">*</code>) means that this privilege grants access to
all actions that start with <code class="literal">data:read/</code>. Elasticsearch does not assign any meaning
to these actions. However, if the request includes an application privilege
such as <code class="literal">data:read/users</code> or <code class="literal">data:read/settings</code>, the
<a class="link" href="security-api-has-privileges.html" title="Has privileges API">has privileges API</a> respects the use of a
wildcard and returns <code class="literal">true</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO565-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>The metadata object is optional.</p></td></tr></table></div><div class="pre_wrapper lang-console-result"><pre class="programlisting prettyprint lang-console-result">{
  "myapp": {
    "read": {
      "created": true <a id="CO566-1"></a><i class="conum" data-value="1"></i>
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO566-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>When an existing privilege is updated, <code class="literal">created</code> is set to false.</p></td></tr></table></div><p>To add multiple privileges, submit a POST request to the
<code class="literal">/_security/privilege/</code> endpoint. For example:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">PUT /_security/privilege
{
  "app01": {
    "read": {
      "actions": [ "action:login", "data:read/*" ]
    },
    "write": {
      "actions": [ "action:login", "data:write/*" ]
    }
  },
  "app02": {
    "all": {
      "actions": [ "*" ]
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/1751.console"></div><p>A successful call returns a JSON structure that shows whether the privileges
have been created or updated.</p><div class="pre_wrapper lang-console-result"><pre class="programlisting prettyprint lang-console-result">{
  "app02": {
    "all": {
      "created": true
    }
  },
  "app01": {
    "read": {
      "created": true
    },
    "write": {
      "created": true
    }
  }
}</pre></div></div></div><div class="navfooter"><span class="prev"><a href="security-api-create-api-key.html">
              « 
              Create API key API</a>
           
        </span><span class="next">
           
          <a href="security-api-put-role-mapping.html">Create or update role mappings API
               »
            </a></span></div></body></html>
