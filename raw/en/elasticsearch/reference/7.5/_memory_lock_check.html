<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Memory lock check | Elasticsearch Reference [7.5] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.5]"/>
<link rel="up" href="bootstrap-checks.html" title="Bootstrap Checks"/>
<link rel="prev" href="_file_descriptor_check.html" title="File descriptor check"/>
<link rel="next" href="max-number-threads-check.html" title="Maximum number of threads check"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.5"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.5"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.5]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
»
<span class="breadcrumb-link"><a href="bootstrap-checks.html">Bootstrap Checks</a></span>
»
<span class="breadcrumb-node">Memory lock check</span>
</div>
<div class="navheader">
<span class="prev">
<a href="_file_descriptor_check.html">« File descriptor check</a>
</span>
<span class="next">
<a href="max-number-threads-check.html">Maximum number of threads check »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_memory_lock_check"></a>Memory lock check<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/setup/bootstrap-checks.asciidoc">edit</a></h2>
</div></div></div>
<p>When the JVM does a major garbage collection it touches every page of
the heap. If any of those pages are swapped out to disk they will have
to be swapped back in to memory. That causes lots of disk thrashing that
Elasticsearch would much rather use to service requests. There are
several ways to configure a system to disallow swapping. One way is by
requesting the JVM to lock the heap in memory through <code class="literal">mlockall</code> (Unix)
or virtual lock (Windows). This is done via the Elasticsearch setting
<a class="xref" href="setup-configuration-memory.html#bootstrap-memory_lock" title="Enable bootstrap.memory_lock"><code class="literal">bootstrap.memory_lock</code></a>. However, there are
cases where this setting can be passed to Elasticsearch but
Elasticsearch is not able to lock the heap (e.g., if the <code class="literal">elasticsearch</code>
user does not have <code class="literal">memlock unlimited</code>). The memory lock check verifies
that <span class="strong strong"><strong>if</strong></span> the <code class="literal">bootstrap.memory_lock</code> setting is enabled, that the JVM
was successfully able to lock the heap. To pass the memory lock check,
you might have to configure <a class="xref" href="setup-configuration-memory.html#bootstrap-memory_lock" title="Enable bootstrap.memory_lock"><code class="literal">bootstrap.memory_lock</code></a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="_file_descriptor_check.html">« File descriptor check</a>
</span>
<span class="next">
<a href="max-number-threads-check.html">Maximum number of threads check »</a>
</span>
</div>
</div>
</body>
</html>
