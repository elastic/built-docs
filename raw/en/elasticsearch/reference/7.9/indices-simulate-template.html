<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Simulate index template API | Elasticsearch Guide [7.9] | Elastic</title>
<meta class="elastic" name="content" content="Simulate index template API | Elasticsearch Guide [7.9]">

<link rel="home" href="index.html" title="Elasticsearch Guide [7.9]"/>
<link rel="up" href="indices.html" title="Index APIs"/>
<link rel="prev" href="indices-simulate-index.html" title="Simulate index API"/>
<link rel="next" href="indices-split-index.html" title="Split index API"/>
<meta class="elastic" name="product_version" content="7.9"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.9"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [7.9]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="indices-simulate-index.html">« Simulate index API</a>
</span>
<span class="next">
<a href="indices-split-index.html">Split index API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-simulate-template"></a>Simulate index template API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Returns the index configuration that would be applied by a particular
<a class="xref" href="indices-templates.html" title="Index templates">index template</a>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1938.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-request"></a>Request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_index_template/_simulate/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-path-params"></a>Path parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Name of the index template to simulate.
To test a template configuration before you add it to the cluster,
omit this parameter and specify the template configuration in the request body.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-query-params"></a>Query parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the template passed in the body is
only used if no existing templates match the same index patterns.
If <code class="literal">false</code>, the simulation uses the template with the highest priority.
Note that the template is not permanently added or updated in either case;
it is only used for the simulation.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="common-options.html#time-units" title="Time units">time units</a>) Specifies the period of time to wait for
a connection to the master node. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">composed_of</code>
</span>
</dt>
<dd>
(Optional, array of strings)
Ordered list of component template names. Component templates are merged in the order
specified, meaning that the last component template specified has the highest precedence.
For an example, see
<a class="xref" href="indices-put-template.html#multiple-component-templates" title="Composing aliases, mappings, and settings">Composing multiple component templates</a>.
</dd>
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(Required, array of strings)
Array of wildcard (<code class="literal">*</code>) expressions
used to match the names of indices during creation.
</dd>
<dt>
<span class="term">
<code class="literal">priority</code>
</span>
</dt>
<dd>
(Optional, integer)
Priority that determines what template is applied if there are multiple templates
that match the name of a new index.
The highest priority template takes precedence. Defaults to <code class="literal">0</code> (lowest priority).
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(Optional, object)
Template to apply.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices-aliases.html" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices-aliases.html" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage index templates externally.
This version is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">_meta</code>
</span>
</dt>
<dd>
(Optional, object)
User-specified metadata for the index template.
This information is not generated or used by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-response-body"></a>Response body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overlapping</code>
</span>
</dt>
<dd>
<p>
(array) Any templates that were superseded by the specified template.
</p>
<details open>
<summary class="title">Properties of <code class="literal">overlapping</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(array) Index patterns that the superseded template applies to.
</dd>
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(string) Name of the superseded template.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(object)
The settings, mappings, and aliases that would be applied to matching indices.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices-aliases.html" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices-aliases.html" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-example"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="simulate-existing-template-ex"></a>Simulating an existing template<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h4>
</div></div></div>
<p>The following example creates and simulates a composed template:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/ct1                   <a id="CO622-1"></a><i class="conum" data-value="1"></i>
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/ct2                    <a id="CO622-2"></a><i class="conum" data-value="2"></i>
{
  "template": {
    "settings": {
      "index.number_of_replicas": 0
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT /_index_template/final-template            <a id="CO622-3"></a><i class="conum" data-value="3"></i>
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct1", "ct2"],
  "priority": 5
}

POST /_index_template/_simulate/final-template <a id="CO622-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/1939.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO622-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a component template (<code class="literal">ct1</code>) that sets the number of shards to 2</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO622-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a component template (<code class="literal">ct2</code>) that sets the number of replicas to 0 and defines a mapping</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO622-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create an index template (<code class="literal">final-template</code>) that uses the component templates</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO622-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Show the configuration applied by the <code class="literal">final-template</code></p>
</td>
</tr>
</table>
</div>
<p>The response shows the index settings, mappings, and aliases applied by the <code class="literal">final-template</code>:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_shards" : "2",  <a id="CO623-1"></a><i class="conum" data-value="1"></i>
        "number_of_replicas" : "0" <a id="CO623-2"></a><i class="conum" data-value="2"></i>
      }
    },
    "mappings" : {                 <a id="CO623-3"></a><i class="conum" data-value="3"></i>
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [ ]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Number of shards from <code class="literal">ct1</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Number of replicas from <code class="literal">ct2</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO623-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Mappings from <code class="literal">ct1</code></p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="simulate-template-config-ex"></a>Simulating an arbitrary template configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/docs/reference/indices/simulate-template.asciidoc">edit</a></h4>
</div></div></div>
<p>To see what settings will be applied by a template before you add it to the cluster,
you can pass a template configuration in the request body.
The specified template is used for the simulation if it has a higher priority than existing templates.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct2"],
  "priority": 10,
  "template": {
    "settings": {
      "index.number_of_replicas": 1
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1940.console"></div>
<p>The response shows any overlapping templates with a lower priority.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_replicas" : "1"
      }
    },
    "mappings" : {
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [
    {
      "name" : "final-template",
      "index_patterns" : [
        "my-index-*"
      ]
    }
  ]
}</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="indices-simulate-index.html">« Simulate index API</a>
</span>
<span class="next">
<a href="indices-split-index.html">Split index API »</a>
</span>
</div>
</div>
</body>
</html>
