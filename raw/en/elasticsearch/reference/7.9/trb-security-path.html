<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Failures due to relocation of the configuration files | Elasticsearch Reference [7.9] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.9]"/>
<link rel="up" href="security-troubleshooting.html" title="Troubleshooting security"/>
<link rel="prev" href="trb-security-setup.html" title="Setup-passwords command fails due to connection failure"/>
<link rel="next" href="security-limitations.html" title="Security limitations"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.9"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.9]</a></span>
»
<span class="breadcrumb-link"><a href="secure-cluster.html">Secure a cluster</a></span>
»
<span class="breadcrumb-link"><a href="security-troubleshooting.html">Troubleshooting security</a></span>
»
<span class="breadcrumb-node">Failures due to relocation of the configuration files</span>
</div>
<div class="navheader">
<span class="prev">
<a href="trb-security-setup.html">« Setup-passwords command fails due to connection failure</a>
</span>
<span class="next">
<a href="security-limitations.html">Security limitations »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="trb-security-path"></a>Failures due to relocation of the configuration files<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/7.9/x-pack/docs/en/security/troubleshooting.asciidoc">edit</a></h2>
</div></div></div>
<p><span class="strong strong"><strong>Symptoms:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Active Directory or LDAP realms might stop working after upgrading to Elasticsearch 6.3
or later releases. In 6.4 or later releases, you might see messages in the Elasticsearch
log that indicate a config file is in a deprecated location.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Resolution:</strong></span></p>
<p>By default, in 6.2 and earlier releases, the security configuration files are
located in the <code class="literal">ES_PATH_CONF/x-pack</code> directory, where <code class="literal">ES_PATH_CONF</code> is an
environment variable that defines the location of the
<a href="/guide/en/elasticsearch/reference/7.9/settings.html#config-files-location" class="ulink" target="_top">config directory</a>.</p>
<p>In 6.3 and later releases, the config directory no longer contains an <code class="literal">x-pack</code>
directory. The files that were stored in this folder, such as the
<code class="literal">log4j2.properties</code>, <code class="literal">role_mapping.yml</code>, <code class="literal">roles.yml</code>, <code class="literal">users</code>, and <code class="literal">users_roles</code>
files, now exist directly in the config directory.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you upgraded to 6.3 or later releases, your old security
configuration files still exist in an <code class="literal">x-pack</code> folder. That file path is
deprecated, however, and you should move your files out of that folder.</p>
</div>
</div>
<p>In 6.3 and later releases, settings such as <code class="literal">files.role_mapping</code> default to
<code class="literal">ES_PATH_CONF/role_mapping.yml</code>. If you do not want to use the default locations,
you must update the settings appropriately. See
<a href="/guide/en/elasticsearch/reference/7.9/security-settings.html" class="ulink" target="_top">Security settings in Elasticsearch</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="trb-security-setup.html">« Setup-passwords command fails due to connection failure</a>
</span>
<span class="next">
<a href="security-limitations.html">Security limitations »</a>
</span>
</div>
</div>
</body>
</html>
