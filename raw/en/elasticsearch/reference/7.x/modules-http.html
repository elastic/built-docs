<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>HTTP | Elasticsearch Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="up" href="settings.html" title="Configuring Elasticsearch"/>
<link rel="prev" href="modules-fielddata.html" title="Field data cache settings"/>
<link rel="next" href="ilm-settings.html" title="Index lifecycle management settings in Elasticsearch"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
»
<span class="breadcrumb-link"><a href="settings.html">Configuring Elasticsearch</a></span>
»
<span class="breadcrumb-node">HTTP</span>
</div>
<div class="navheader">
<span class="prev">
<a href="modules-fielddata.html">« Field data cache settings</a>
</span>
<span class="next">
<a href="ilm-settings.html">Index lifecycle management settings in Elasticsearch »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-http"></a>HTTP<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/modules/http.asciidoc">edit</a></h2>
</div></div></div>
<p><a id="modules-http-description"></a>The HTTP layer exposes Elasticsearch&#8217;s REST APIs over HTTP. Clients send HTTP requests
to a node in the cluster which either handles it locally or else passes it on
to other nodes for further processing using the <a class="xref" href="modules-transport.html" title="Transport">Transport
layer</a>.</p>
<p>When possible, consider using <a href="https://en.wikipedia.org/wiki/Keepalive#HTTP_Keepalive" class="ulink" target="_top">HTTP keep
alive</a> when connecting for better performance and try to get your favorite
client not to do <a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding" class="ulink" target="_top">HTTP chunking</a>.</p>
<div class="http-settings">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_http_settings"></a>HTTP settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/modules/http.asciidoc">edit</a></h3>
</div></div></div>
<p>The following settings can be configured for HTTP. These settings also use the common <a class="xref" href="modules-network.html" title="Network settings">network settings</a>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
A bind port range. Defaults to <code class="literal">9200-9300</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.publish_port</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The port that HTTP clients should use when
communicating with this node. Useful when a cluster node is behind a
proxy or firewall and the <code class="literal">http.port</code> is not directly addressable
from the outside. Defaults to the actual port assigned via <code class="literal">http.port</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.bind_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The host address to bind the HTTP service to. Defaults to <code class="literal">http.host</code> (if set) or <code class="literal">network.bind_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.publish_host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The host address to publish for HTTP clients to connect to. Defaults to <code class="literal">http.host</code> (if set) or <code class="literal">network.publish_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.host</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Used to set the <code class="literal">http.bind_host</code> and the <code class="literal">http.publish_host</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_content_length</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Maximum size of an HTTP request body. Defaults to <code class="literal">100mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_initial_line_length</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Maximum size of an HTTP URL. Defaults to <code class="literal">4kb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_header_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Maximum size of allowed headers. Defaults to <code class="literal">8kb</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-compression"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.compression</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Support for compression when possible (with Accept-Encoding). If HTTPS is enabled, defaults to <code class="literal">false</code>. Otherwise, defaults to <code class="literal">true</code>.
</p>
<p>Disabling compression for HTTPS mitigates potential security risks, such as a
<a href="https://en.wikipedia.org/wiki/BREACH" class="ulink" target="_top">BREACH attack</a>. To compress HTTPS traffic,
you must explicitly set <code class="literal">http.compression</code> to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.compression_level</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Defines the compression level to use for HTTP responses. Valid values are in the range of 1 (minimum compression) and 9 (maximum compression). Defaults to <code class="literal">3</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-enabled"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.enabled</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enable or disable cross-origin resource sharing, which determines whether a browser on another origin can execute requests against Elasticsearch. Set to <code class="literal">true</code> to enable Elasticsearch to process pre-flight
<a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" class="ulink" target="_top">CORS</a> requests.
Elasticsearch will respond to those requests with the <code class="literal">Access-Control-Allow-Origin</code> header if the <code class="literal">Origin</code> sent in the request is permitted by the <code class="literal">http.cors.allow-origin</code> list. Set to <code class="literal">false</code> (the default) to make Elasticsearch ignore the <code class="literal">Origin</code> request header, effectively disabling CORS requests because Elasticsearch will never respond with the <code class="literal">Access-Control-Allow-Origin</code> response header.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the client does not send a pre-flight request with an <code class="literal">Origin</code> header or it does not check the response headers from the server to validate the
<code class="literal">Access-Control-Allow-Origin</code> response header, then cross-origin security is
compromised. If CORS is not enabled on Elasticsearch, the only way for the client to know is to send a pre-flight request and realize the required response headers are missing.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-origin"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-origin</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Which origins to allow. If you prepend and append a forward slash (<code class="literal">/</code>) to the value, this will be treated as a regular expression, allowing you to support HTTP and HTTPs. For example, using <code class="literal">/https?:\/\/localhost(:[0-9]+)?/</code> would return the request header appropriately in both cases. Defaults to no origins allowed.
</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>A wildcard (<code class="literal">*</code>) is a valid value but is considered a security risk, as your Elasticsearch instance is open to cross origin requests from <span class="strong strong"><strong>anywhere</strong></span>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-max-age"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.max-age</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Browsers send a "preflight" OPTIONS-request to determine CORS settings. <code class="literal">max-age</code> defines how long the result should be cached for. Defaults to <code class="literal">1728000</code> (20 days).
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-methods"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-methods</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Which methods to allow. Defaults to <code class="literal">OPTIONS, HEAD, GET, POST, PUT, DELETE</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-headers"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-headers</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Which headers to allow. Defaults to <code class="literal">X-Requested-With, Content-Type, Content-Length</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="http-cors-allow-credentials"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.cors.allow-credentials</code> <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Whether the <code class="literal">Access-Control-Allow-Credentials</code> header should be returned. Defaults to <code class="literal">false</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This header is only returned when the setting is set to <code class="literal">true</code>.</p>
</div>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">http.detailed_errors.enabled</code>
</span>
</dt>
<dd>
<p>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
If <code class="literal">true</code>, enables the output of detailed error messages and stack traces in the response output. Defaults to <code class="literal">true</code>.
</p>
<p>If <code class="literal">false</code>, use the <code class="literal">error_trace</code> parameter to <a class="xref" href="common-options.html#common-options-error-options" title="Enabling stack traces">enable stack traces</a> and return detailed error messages. Otherwise, only a simple message will be returned.</p>
</dd>
<dt>
<span class="term">
<code class="literal">http.pipelining.max_events</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of events to be queued up in memory before an HTTP connection is closed, defaults to <code class="literal">10000</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_warning_header_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum number of warning headers in client HTTP responses. Defaults to <code class="literal">unbounded</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.max_warning_header_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The maximum total size of warning headers in client HTTP responses. Defaults to <code class="literal">unbounded</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.no_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Enable or disable the <a href="https://en.wikipedia.org/wiki/Nagle%27s_algorithm" class="ulink" target="_top">TCP no delay</a>
setting. Defaults to <code class="literal">network.tcp.no_delay</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_alive</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Configures the <code class="literal">SO_KEEPALIVE</code> option for this socket, which
determines whether it sends TCP keepalive probes.
Defaults to <code class="literal">network.tcp.keep_alive</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_idle</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures the <code class="literal">TCP_KEEPIDLE</code> option for this socket, which
determines the time in seconds that a connection must be idle before
starting to send TCP keepalive probes. Defaults to <code class="literal">network.tcp.keep_idle</code>, which
uses the system default. This value cannot exceed <code class="literal">300</code> seconds. Only applicable on
Linux and macOS, and requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures the <code class="literal">TCP_KEEPINTVL</code> option for this socket,
which determines the time in seconds between sending TCP keepalive probes.
Defaults to <code class="literal">network.tcp.keep_interval</code>, which uses the system default.
This value cannot exceed <code class="literal">300</code> seconds. Only applicable on Linux and macOS, and requires
Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.keep_count</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>) Configures the <code class="literal">TCP_KEEPCNT</code> option for this socket, which
determines the number of unacknowledged TCP keepalive probes that may be
sent on a connection before it is dropped. Defaults to <code class="literal">network.tcp.keep_count</code>,
which uses the system default. Only applicable on Linux and macOS, and
requires Java 11 or newer.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.reuse_address</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
Should an address be reused or not. Defaults to <code class="literal">network.tcp.reuse_address</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.send_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP send buffer (specified with <a class="xref" href="common-options.html#size-units" title="Unit-less quantities">size units</a>).
Defaults to <code class="literal">network.tcp.send_buffer_size</code>.
</dd>
<dt>
<span class="term">
<code class="literal">http.tcp.receive_buffer_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="settings.html#static-cluster-setting">Static</a>)
The size of the TCP receive buffer (specified with <a class="xref" href="common-options.html#size-units" title="Unit-less quantities">size units</a>).
Defaults to <code class="literal">network.tcp.receive_buffer_size</code>.
</dd>
</dl>
</div>
</div>

<div class="http-rest-request-tracer">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_rest_request_tracer"></a>REST request tracer<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/modules/http.asciidoc">edit</a></h3>
</div></div></div>
<p>The HTTP layer has a dedicated tracer logger which, when activated, logs incoming requests. The log can be dynamically activated
by setting the level of the <code class="literal">org.elasticsearch.http.HttpTracer</code> logger to <code class="literal">TRACE</code>:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "transient" : {
      "logger.org.elasticsearch.http.HttpTracer" : "TRACE"
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/25.console"></div>
<p>You can also control which uris will be traced, using a set of include and exclude wildcard patterns. By default every request will be
traced.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
   "transient" : {
      "http.tracer.include" : "*",
      "http.tracer.exclude" : ""
   }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/26.console"></div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="modules-fielddata.html">« Field data cache settings</a>
</span>
<span class="next">
<a href="ilm-settings.html">Index lifecycle management settings in Elasticsearch »</a>
</span>
</div>
</div>
</body>
</html>
