<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Search across clusters | Elasticsearch Guide [8.11] | Elastic</title>
<meta class="elastic" name="content" content="Search across clusters | Elasticsearch Guide [8.11]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.11]"/>
<link rel="up" href="search-with-elasticsearch.html" title="Search your data"/>
<link rel="prev" href="semantic-search-elser.html" title="Tutorial: semantic search with ELSER"/>
<link rel="next" href="search-with-synonyms.html" title="Search with synonyms"/>
<meta class="elastic" name="product_version" content="8.11"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.11"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.11"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="semantic-search-elser.html">« Tutorial: semantic search with ELSER</a>
</span>
<span class="next">
<a href="search-with-synonyms.html">Search with synonyms »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.11]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="search-with-elasticsearch.html">Search your data</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Search across clusters</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="modules-cross-cluster-search"></a>Search across clusters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h2>
</div></div></div>
<p><span class="strong strong"><strong>Cross-cluster search</strong></span> lets you run a single search request against one or more remote
clusters. For example, you can use a cross-cluster search to filter and analyze log data stored
on clusters in different data centers.</p>
<h3><a id="ccs-supported-apis"></a>Supported APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>The following APIs support cross-cluster search:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="search-search.html" title="Search API">Search</a>
</li>
<li class="listitem">
<a class="xref" href="async-search.html" title="Async search">Async search</a>
</li>
<li class="listitem">
<a class="xref" href="search-multi-search.html" title="Multi search API">Multi search</a>
</li>
<li class="listitem">
<a class="xref" href="search-template.html" title="Search templates">Search template</a>
</li>
<li class="listitem">
<a class="xref" href="multi-search-template.html" title="Multi search template API">Multi search template</a>
</li>
<li class="listitem">
<a class="xref" href="search-field-caps.html" title="Field capabilities API">Field capabilities</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/painless/8.11/painless-execute-api.html" class="ulink" target="_top">Painless execute API</a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="eql-search-api.html" title="EQL search API">EQL search</a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="sql-search-api.html" title="SQL search API">SQL search</a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="search-vector-tile-api.html" title="Vector tile search API">Vector tile search</a>
</li>
</ul>
</div>
<h3><a id="ccs-prereqs"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Cross-cluster search requires remote clusters. To set up remote clusters on Elasticsearch Service,
see <a href="/guide/en/cloud/current/ec-enable-ccs.html" class="ulink" target="_top">configure remote clusters on Elasticsearch Service</a>. If you
run Elasticsearch on your own hardware, see <a class="xref" href="remote-clusters.html" title="Remote clusters"><em>Remote clusters</em></a>.</p>
<p>To ensure your remote cluster configuration supports cross-cluster search, see
<a class="xref" href="modules-cross-cluster-search.html#ccs-supported-configurations" title="Supported cross-cluster search configurations">Supported cross-cluster search configurations</a>.</p>
</li>
<li class="listitem">
For full cross-cluster search capabilities, the local and remote cluster must be on the same
<a href="/subscriptions" class="ulink" target="_top">subscription level</a>.
</li>
<li class="listitem">
The local coordinating node must have the
<a class="xref" href="modules-node.html#remote-node" title="Remote-eligible node"><code class="literal">remote_cluster_client</code></a> node role.
</li>
</ul>
</div>
<div id="ccs-gateway-seed-nodes" class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>If you use <a class="xref" href="remote-clusters.html#sniff-mode">sniff mode</a>, the local coordinating node
must be able to connect to seed and gateway nodes on the remote cluster.</p>
<p>We recommend using gateway nodes capable of serving as coordinating nodes.
The seed nodes can be a subset of these gateway nodes.</p>
</li>
</ul>
</div>
<div id="ccs-proxy-mode" class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you use <a class="xref" href="remote-clusters.html#proxy-mode">proxy mode</a>, the local coordinating node must be able
to connect to the configured <code class="literal">proxy_address</code>. The proxy at this address must be
able to route connections to gateway and coordinating nodes on the remote
cluster.
</li>
<li class="listitem">
Cross-cluster search requires different security privileges on the local cluster and
remote cluster. See <a class="xref" href="remote-clusters-cert.html#remote-clusters-privileges-ccs" title="Configure privileges for cross-cluster search">Configure privileges for cross-cluster search</a> and
<a class="xref" href="remote-clusters.html" title="Remote clusters"><em>Remote clusters</em></a>.
</li>
</ul>
</div>
<h3><a id="ccs-example"></a>Cross-cluster search examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<h4><a id="ccs-remote-cluster-setup"></a>Remote cluster setup<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>The following <a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">cluster update settings</a> API request
adds three remote clusters: <code class="literal">cluster_one</code>, <code class="literal">cluster_two</code>, and <code class="literal">cluster_three</code>.</p>
<a id="72a3668ddc95d9aec47cc679d1e7afc5"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_one": {
          "seeds": [
            "35.238.149.1:9300"
          ],
          "skip_unavailable": true
        },
        "cluster_two": {
          "seeds": [
            "35.238.149.2:9300"
          ],
          "skip_unavailable": false
        },
        "cluster_three": {  <a id="CO236-1"></a><i class="conum" data-value="1"></i>
          "seeds": [
            "35.238.149.3:9300"
          ]
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1018.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO236-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Since <code class="literal">skip_unavailable</code> was not set on <code class="literal">cluster_three</code>, it uses
the default of <code class="literal">false</code>. See the <a class="xref" href="modules-cross-cluster-search.html#skip-unavailable-clusters" title="Optional remote clusters">Optional remote clusters</a>
section for details.</p>
</td>
</tr>
</table>
</div>
<h4><a id="ccs-search-remote-cluster"></a>Search a single remote cluster<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>In the search request, you specify data streams and indices on a remote cluster
as <code class="literal">&lt;remote_cluster_name&gt;:&lt;target&gt;</code>.</p>
<p>The following <a class="xref" href="search-search.html" title="Search API">search</a> API request searches the
<code class="literal">my-index-000001</code> index on a single remote cluster, <code class="literal">cluster_one</code>.</p>
<a id="e4de6035653e8202c43631f02d244661"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET /cluster_one:my-index-000001/_search
{
  "size": 1,
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  },
  "_source": ["user.id", "message", "http.response.status_code"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1019.console"></div>
<p>The API returns the following response. Note that when you
search one or more remote clusters, a <code class="literal">_clusters</code> section is
included to provide information about the search on each cluster.</p>
<a id="5388f0632fc39d050f64d4eb66f74f93"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "took": 150,
  "timed_out": false,
  "_shards": {
    "total": 12,
    "successful": 12,
    "failed": 0,
    "skipped": 0
  },
  "_clusters": {
    "total": 1,  <a id="CO237-1"></a><i class="conum" data-value="1"></i>
    "successful": 1,
    "skipped": 0,
    "running": 0,
    "partial": 0,
    "failed": 0,
    "details": {
      "cluster_one": {  <a id="CO237-2"></a><i class="conum" data-value="2"></i>
        "status": "successful",
        "indices": "my-index-000001", <a id="CO237-3"></a><i class="conum" data-value="3"></i>
        "took": 148,  <a id="CO237-4"></a><i class="conum" data-value="4"></i>
        "timed_out": false,
        "_shards": {  <a id="CO237-5"></a><i class="conum" data-value="5"></i>
          "total": 12,
          "successful": 12,
          "skipped": 0,
          "failed": 0
        }
      }
    }
  },
  "hits": {
    "total" : {
        "value": 1,
        "relation": "eq"
    },
    "max_score": 1,
    "hits": [
      {
        "_index": "cluster_one:my-index-000001", <a id="CO237-6"></a><i class="conum" data-value="6"></i>
        "_id": "0",
        "_score": 1,
        "_source": {
          "user": {
            "id": "kimchy"
          },
          "message": "GET /search HTTP/1.1 200 1070000",
          "http": {
            "response":
              {
                "status_code": 200
              }
          }
        }
      }
    ]
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO237-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>This section of counters shows all possible cluster search states and how many cluster
searches are currently in that state. The clusters can be one of the following statuses: <span class="strong strong"><strong>running</strong></span>,
<span class="strong strong"><strong>successful</strong></span> (searches on all shards were successful), <span class="strong strong"><strong>partial</strong></span> (searches on at least
one shard of the cluster was successful and at least one failed), <span class="strong strong"><strong>skipped</strong></span> (the search
failed on a cluster marked with <code class="literal">skip_unavailable</code>=<code class="literal">true</code>) or <span class="strong strong"><strong>failed</strong></span> (the search
failed on a cluster marked with <code class="literal">skip_unavailable</code>=<code class="literal">false</code>).</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO237-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">_clusters/details</code> section shows metadata about the search on each cluster.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO237-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The index expression supplied by the user. If you provide a wildcard such as <code class="literal">logs-*</code>,
this section will show the value with the wildcard, not the concrete indices being searched.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO237-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>How long (in milliseconds) the sub-search took on that cluster.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO237-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The shard details for the sub-search on that cluster.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO237-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The search response body includes the name of the remote cluster in the
<code class="literal">_index</code> parameter.</p>
</td>
</tr>
</table>
</div>
<h4><a id="ccs-search-multi-remote-cluster"></a>Search multiple remote clusters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>The following <a class="xref" href="search.html" title="Search APIs">search</a> API request searches the <code class="literal">my-index-000001</code> index on
three clusters:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The local ("querying") cluster, with 10 shards
</li>
<li class="listitem">
Two remote clusters, <code class="literal">cluster_one</code>, with 12 shards and <code class="literal">cluster_two</code>
with 6 shards.
</li>
</ul>
</div>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.search(
  index: 'my-index-000001,cluster_one:my-index-000001,cluster_two:my-index-000001',
  body: {
    query: {
      match: {
        'user.id' =&gt; 'kimchy'
      }
    },
    _source: [
      'user.id',
      'message',
      'http.response.status_code'
    ]
  }
)
puts response</pre>
</div>
<a id="819e00cc6547d925d80090b94e0650d7"></a>
<div class="pre_wrapper lang-console default has-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby">GET /my-index-000001,cluster_one:my-index-000001,cluster_two:my-index-000001/_search
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  },
  "_source": ["user.id", "message", "http.response.status_code"]
}</pre>
</div>
<div class="console_widget has-ruby" data-snippet="snippets/1020.console"></div>
<p>The API returns the following response:</p>
<a id="8eebbde9aeb5f2e981864dd9fc7d82cc"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "took": 150,
  "timed_out": false,
  "num_reduce_phases": 4,
  "_shards": {
    "total": 28,
    "successful": 28,
    "failed": 0,
    "skipped": 0
  },
  "_clusters": {
    "total": 3,
    "successful": 3,
    "skipped": 0,
    "running": 0,
    "partial": 0,
    "failed": 0,
    "details": {
      "(local)": {            <a id="CO238-1"></a><i class="conum" data-value="1"></i>
        "status": "successful",
        "indices": "my-index-000001",
        "took": 21,
        "timed_out": false,
        "_shards": {
          "total": 10,
          "successful": 10,
          "skipped": 0,
          "failed": 0
        }
      },
      "cluster_one": {
        "status": "successful",
        "indices": "my-index-000001",
        "took": 48,
        "timed_out": false,
        "_shards": {
          "total": 12,
          "successful": 12,
          "skipped": 0,
          "failed": 0
        }
      },
      "cluster_two": {
        "status": "successful",
        "indices": "my-index-000001",
        "took": 141,
        "timed_out": false,
        "_shards": {
          "total" : 6,
          "successful" : 6,
          "skipped": 0,
          "failed": 0
        }
      }
    }
  },
  "hits": {
    "total" : {
        "value": 3,
        "relation": "eq"
    },
    "max_score": 1,
    "hits": [
      {
        "_index": "my-index-000001", <a id="CO238-2"></a><i class="conum" data-value="2"></i>
        "_id": "0",
        "_score": 2,
        "_source": {
          "user": {
            "id": "kimchy"
          },
          "message": "GET /search HTTP/1.1 200 1070000",
          "http": {
            "response":
              {
                "status_code": 200
              }
          }
        }
      },
      {
        "_index": "cluster_one:my-index-000001", <a id="CO238-3"></a><i class="conum" data-value="3"></i>
        "_id": "0",
        "_score": 1,
        "_source": {
          "user": {
            "id": "kimchy"
          },
          "message": "GET /search HTTP/1.1 200 1070000",
          "http": {
            "response":
              {
                "status_code": 200
              }
          }
        }
      },
      {
        "_index": "cluster_two:my-index-000001", <a id="CO238-4"></a><i class="conum" data-value="4"></i>
        "_id": "0",
        "_score": 1,
        "_source": {
          "user": {
            "id": "kimchy"
          },
          "message": "GET /search HTTP/1.1 200 1070000",
          "http": {
            "response":
              {
                "status_code": 200
              }
          }
        }
      }
    ]
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO238-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The local (querying) cluster is identified as "(local)".</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO238-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>This document&#8217;s <code class="literal">_index</code> parameter doesn&#8217;t include a cluster name. This
means the document came from the local cluster.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO238-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>This document came from <code class="literal">cluster_one</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO238-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>This document came from <code class="literal">cluster_two</code>.</p>
</td>
</tr>
</table>
</div>
<h3><a id="ccs-async-search-minimize-roundtrips-true"></a>Using async search for cross-cluster search with ccs_minimize_roundtrips=true<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>Remote clusters can be queried asynchronously using the <a class="xref" href="async-search.html" title="Async search">async search</a> API.
A cross-cluster search accepts a <a class="xref" href="search-search.html#ccs-minimize-roundtrips"><code class="literal">ccs_minimize_roundtrips</code></a> parameter. For
asynchronous searches it defaults to <code class="literal">false</code>. (Note: for synchronous searches it defaults to <code class="literal">true</code>.)
See <a class="xref" href="modules-cross-cluster-search.html#ccs-min-roundtrips" title="Considerations for choosing whether to minimize roundtrips in a cross-cluster search">Considerations for choosing whether to minimize roundtrips in a cross-cluster search</a> to learn more about this option.</p>
<p>The following request does an asynchronous search of the <code class="literal">my-index-000001</code> index using
<code class="literal">ccs_minimize_roundtrips=true</code> against three clusters (same ones as the previous example).</p>
<a id="ab1372270c11bcd6f36d1a13e6c69276"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,cluster_one:my-index-000001,cluster_two:my-index-000001/_async_search?ccs_minimize_roundtrips=true
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  },
  "_source": ["user.id", "message", "http.response.status_code"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1021.console"></div>
<p>The API returns the following response:</p>
<a id="1f887455ce067d4e546ce18f0705dab1"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "id": "FklQYndoTDJ2VEFlMEVBTzFJMGhJVFEaLVlKYndBWWZSMUdicUc4WVlEaFl4ZzoxNTU=", <a id="CO239-1"></a><i class="conum" data-value="1"></i>
  "is_partial": true,
  "is_running": true,
  "start_time_in_millis": 1685563581380,
  "expiration_time_in_millis": 1685995581380,
  "response": {
    "took": 1020,
    "timed_out": false,
    "num_reduce_phases": 0,
    "_shards": {
      "total": 10,     <a id="CO239-2"></a><i class="conum" data-value="2"></i>
      "successful": 0,
      "failed": 0,
      "skipped": 0
    },
    "_clusters": {    <a id="CO239-3"></a><i class="conum" data-value="3"></i>
      "total" : 3,
      "successful" : 0,
      "skipped": 0,
      "running": 3,
      "partial": 0,
      "failed": 0,
      "details": {
        "(local)": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false
        },
        "cluster_one": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false
        },
        "cluster_one": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false
        }
      }
    },
    "hits": {
      "total" : {
          "value": 0,
          "relation": "eq"
      },
      "max_score": null,
      "hits": []
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO239-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The async search id.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO239-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>When <code class="literal">ccs_minimize_roundtrips</code> = <code class="literal">true</code> and searches on the remote clusters
are still running, this section indicates the number of shards in scope for the
local cluster only. This will be updated to include the total number of shards
across all clusters only when the search is completed. When
<code class="literal">ccs_minimize_roundtrips</code>= <code class="literal">false</code>, the total shard count is known up front and
will be correct.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO239-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">_clusters</code> section indicates that 3 clusters are in scope for the search
and all are currently in the "running" state.</p>
</td>
</tr>
</table>
</div>
<p>If you query the <a class="xref" href="async-search.html#get-async-search" title="Get async search">get async search</a> endpoint while the query is
still running, you will see an update in the <code class="literal">_clusters</code> and <code class="literal">_shards</code> section of
the response when the local search has finished.</p>
<a id="2897ccc2a3bf3d0cd89328ee4413fae5"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET /_async_search/FklQYndoTDJ2VEFlMEVBTzFJMGhJVFEaLVlKYndBWWZSMUdicUc4WVlEaFl4ZzoxNTU=</pre>
</div>
<div class="console_widget" data-snippet="snippets/1022.console"></div>
<p>Response:</p>
<a id="cb1b0d43e4a7f095070c97e538ed8901"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "id": "FklQYndoTDJ2VEFlMEVBTzFJMGhJVFEaLVlKYndBWWZSMUdicUc4WVlEaFl4ZzoxNTU=",
  "is_partial": true,
  "is_running": true,
  "start_time_in_millis": 1685564911108,
  "expiration_time_in_millis": 1685996911108,
  "response": {
    "took": 11164,
    "timed_out": false,
    "terminated_early": false,
    "_shards": {
      "total": 10,
      "successful": 10,  <a id="CO240-1"></a><i class="conum" data-value="1"></i>
      "skipped": 0,
      "failed": 0
    },
    "_clusters": {
      "total": 3,
      "successful": 1,  <a id="CO240-2"></a><i class="conum" data-value="2"></i>
      "skipped": 0,
      "running": 2,
      "partial": 0,
      "failed": 0,
      "details": {
        "(local)": {
          "status": "successful",
          "indices": "my-index-000001",
          "took": 2034,
          "timed_out": false,
          "_shards": {
            "total": 10,
            "successful": 10,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_one": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false
        },
        "cluster_two": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false
        }
      }
    },
    "hits": {
      "total": {
        "value": 167,  <a id="CO240-3"></a><i class="conum" data-value="3"></i>
        "relation": "eq"
      },
      "max_score": null,
      "hits": []
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>All the local cluster shards have completed.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The local cluster search has completed, so the "successful" clusters entry
is set to 1 and "running" clusters entry reduced to 2. The <code class="literal">_clusters</code> response metadata will be updated as each cluster
finishes.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Number of hits from the local cluster search. Final hits are not
shown until searches on all clusters have been completed and merged.</p>
</td>
</tr>
</table>
</div>
<p>After searches on all the clusters have completed, querying the
<a class="xref" href="async-search.html#get-async-search" title="Get async search">get async search</a> endpoint will show the final
status of the <code class="literal">_clusters</code> and <code class="literal">_shards</code> section as well as the hits
and any aggregation results.</p>
<a id="2897ccc2a3bf3d0cd89328ee4413fae5"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET /_async_search/FklQYndoTDJ2VEFlMEVBTzFJMGhJVFEaLVlKYndBWWZSMUdicUc4WVlEaFl4ZzoxNTU=</pre>
</div>
<div class="console_widget" data-snippet="snippets/1023.console"></div>
<p>Response:</p>
<a id="6cd7d7def4f8a1a821ba3d42519bf972"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "id": "FklQYndoTDJ2VEFlMEVBTzFJMGhJVFEaLVlKYndBWWZSMUdicUc4WVlEaFl4ZzoxNTU=",
  "is_partial": false,
  "is_running": false,
  "start_time_in_millis": 1685564911108,
  "expiration_time_in_millis": 1685996911108,
  "completion_time_in_millis": 1685564938727,  <a id="CO241-1"></a><i class="conum" data-value="1"></i>
  "response": {
    "took": 27619,
    "timed_out": false,
    "num_reduce_phases": 4,
    "_shards": {
      "total": 28,
      "successful": 28,  <a id="CO241-2"></a><i class="conum" data-value="2"></i>
      "skipped": 0,
      "failed": 0
    },
    "_clusters": {
      "total": 3,
      "successful": 3,   <a id="CO241-3"></a><i class="conum" data-value="3"></i>
      "skipped": 0,
      "running": 0,
      "partial": 0,
      "failed": 0,
      "details": {
        "(local)": {
          "status": "successful",
          "indices": "my-index-000001",
          "took": 14382,
          "timed_out": false,
          "_shards": {
            "total": 10,
            "successful": 10,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_one": {
          "status": "successful",
          "indices": "my-index-000001",
          "took": 22193,
          "timed_out": false,
          "_shards": {
            "total": 12,
            "successful": 12,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_two": {
          "status": "successful",
          "indices": "my-index-000001",
          "took": 27550,
          "timed_out": false,
          "_shards": {
            "total": 6,
            "successful": 6,
            "skipped": 0,
            "failed": 0
          }
        }
      }
    },
    "hits": {
      "total": {
        "value": 1067,
        "relation": "eq"
      },
      "max_score": 1.8293576,
      "hits": [...list of hits here...]
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO241-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Once the search has finished, the completion_time is present.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO241-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">_shards</code> section is now updated to show that 28 total shards
were searched across all clusters and that all were successful.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO241-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">_clusters</code> section shows that searches on all 3 clusters were successful.</p>
</td>
</tr>
</table>
</div>
<h3><a id="cross-cluster-search-failures"></a>Cross-cluster search failures<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>Failures during a cross-cluster search can result in one of two conditions:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
partial results (2xx HTTP status code)
</li>
<li class="listitem">
a failed search (4xx or 5xx HTTP status code)
</li>
</ol>
</div>
<p>Failure details will be present in the search response in both cases.</p>
<p>A search will be failed if a cluster marked with <code class="literal">skip_unavailable</code>=<code class="literal">false</code>
is unavailable, disconnects during the search, or has search failures on
all shards. In all other cases, failures will result in partial results.</p>
<p>Search failures on individual shards will be present in both the <code class="literal">_shards</code>
section and the <code class="literal">_clusters</code> section of the response.</p>
<p>A failed search will have an additional top-level <code class="literal">errors</code> entry in the response.</p>
<p>Here is an example of a search with partial results due to a failure on one shard
of one cluster. The search would be similar to ones shown previously. The
<code class="literal">_async_search/status</code> endpoint is used here to show the completion status and
not show the hits.</p>
<a id="8f7936f219500305e5b2518dbbf949ea"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET /_async_search/status/FmpwbThueVB4UkRDeUxqb1l4akIza3cbWEJyeVBPQldTV3FGZGdIeUVabXBldzoyMDIw</pre>
</div>
<div class="console_widget" data-snippet="snippets/1024.console"></div>
<p>Response:</p>
<a id="b82e746762d085085b111c9f08e19932"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "id": "FmpwbThueVB4UkRDeUxqb1l4akIza3cbWEJyeVBPQldTV3FGZGdIeUVabXBldzoyMDIw",
  "is_partial": true,  <a id="CO242-1"></a><i class="conum" data-value="1"></i>
  "is_running": false,
  "start_time_in_millis": 1692106901478,
  "expiration_time_in_millis": 1692538901478,
  "completion_time_in_millis": 1692106903547,
  "response": {
    "took": 2069,
    "timed_out": false,
    "num_reduce_phases": 4,
    "_shards": {
      "total": 28,
      "successful": 27,
      "skipped": 0,
      "failed": 1,
      "failures": [   <a id="CO242-2"></a><i class="conum" data-value="2"></i>
        {
          "shard": 1,
          "index": "cluster_two:my-index-000001",
          "node": "LMpUnAu0QEeCUMfg_56sAg",
          "reason": {
            "type": "query_shard_exception",
            "reason": "failed to create query: [my-index-000001][1] exception message here",
            "index_uuid": "4F2VWx8RQSeIhUE-nksvCQ",
            "index": "cluster_two:my-index-000001",
            "caused_by": {
              "type": "runtime_exception",
              "reason": "runtime_exception: [my-index-000001][1] exception message here"
            }
          }
        }
      ]
    },
    "_clusters": {
      "total": 3,
      "successful": 2,
      "skipped": 0,
      "running": 0,
      "partial": 1,   <a id="CO242-3"></a><i class="conum" data-value="3"></i>
      "failed": 0,
      "details": {
        "(local)": {
          "status": "successful",
          "indices": "my-index-000001",
          "took": 1753,
          "timed_out": false,
          "_shards": {
            "total": 10,
            "successful": 10,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_one": {
          "status": "successful",
          "indices": "my-index-000001",
          "took": 2054,
          "timed_out": false,
          "_shards": {
            "total": 12,
            "successful": 12,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_two": {
          "status": "partial",   <a id="CO242-4"></a><i class="conum" data-value="4"></i>
          "indices": "my-index-000001",
          "took": 2039,
          "timed_out": false,
          "_shards": {
            "total": 6,
            "successful": 5,
            "skipped": 0,
            "failed": 1   <a id="CO242-5"></a><i class="conum" data-value="5"></i>
          },
          "failures": [  <a id="CO242-6"></a><i class="conum" data-value="6"></i>
            {
              "shard": 1,
              "index": "cluster_two:my-index-000001",
              "node": "LMpUnAu0QEeCUMfg_56sAg",
              "reason": {
                "type": "query_shard_exception",
                "reason": "failed to create query: [my-index-000001][1] exception message here",
                "index_uuid": "4F2VWx8RQSeIhUE-nksvCQ",
                "index": "cluster_two:my-index-000001",
                "caused_by": {
                  "type": "runtime_exception",
                  "reason": "runtime_exception: [my-index-000001][1] exception message here"
                }
              }
            }
          ]
        }
      }
    },
    "hits": {
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The search results are marked as partial, since at least one shard search failed.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">_shards</code> section includes shard failure info.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Clusters that have partial results are still marked as "partial". They are
marked with status "skipped" (or "failed") only if no data was returned from the search.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">partial</code> status has been applied to the cluster with partial results.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The failed shard count is shown.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The shard failures are listed under the cluster/details entry also.</p>
</td>
</tr>
</table>
</div>
<p>Here is an example where both <code class="literal">cluster_one</code> and <code class="literal">cluster_two</code> lost connectivity
during a cross-cluster search. Since <code class="literal">cluster_one</code> is marked as <code class="literal">skip_unavailable</code>=<code class="literal">true</code>,
its status is <code class="literal">skipped</code> and since <code class="literal">cluster_two</code> is marked as <code class="literal">skip_unavailable</code>=<code class="literal">false</code>,
its status is <code class="literal">failed</code>. Since there was a <code class="literal">failed</code> cluster, a top level <code class="literal">error</code>
is also present and this returns an HTTP status of 500 (not shown).</p>
<p>If you want the search to still return results even when a cluster is
unavailable, set <code class="literal">skip_unavailable</code>=<code class="literal">true</code> for all the remote clusters.</p>
<a id="571314a948e49f1f9614d36fcf79392a"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET /_async_search/FjktRGJ1Y2w1U0phLTRhZnVyeUZ2MVEbWEJyeVBPQldTV3FGZGdIeUVabXBldzo5NzA4</pre>
</div>
<div class="console_widget" data-snippet="snippets/1025.console"></div>
<p>Response:</p>
<a id="1d9e4a0fd9830db82d96742e887d7e91"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "id": "FjktRGJ1Y2w1U0phLTRhZnVyeUZ2MVEbWEJyeVBPQldTV3FGZGdIeUVabXBldzo5NzA4",
  "is_partial": true,
  "is_running": false,
  "start_time_in_millis": 1692112102650,
  "expiration_time_in_millis": 1692544102650,
  "completion_time_in_millis": 1692112106177,
  "response": {
    "took": 3527,
    "timed_out": false,
    "terminated_early": false,
    "_shards": {
      "total": 10,   <a id="CO243-1"></a><i class="conum" data-value="1"></i>
      "successful": 10,
      "skipped": 0,
      "failed": 0
    },
    "_clusters": {
      "total": 3,
      "successful": 1,
      "skipped": 1,
      "running": 0,
      "partial": 0,
      "failed": 1,
      "details": {
        "(local)": {
          "status": "successful",
          "indices": "my-index-000001",
          "took": 1473,
          "timed_out": false,
          "_shards": {
            "total": 10,
            "successful": 10,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_one": {
          "status": "skipped",   <a id="CO243-2"></a><i class="conum" data-value="2"></i>
          "indices": "my-index-000001",
          "timed_out": false,
          "failures": [
            {
              "shard": -1,
              "index": null,
              "reason": {
                "type": "node_disconnected_exception",   <a id="CO243-3"></a><i class="conum" data-value="3"></i>
                "reason": "[myhostname1][35.238.149.1:9300][indices:data/read/search] disconnected"
              }
            }
          ]
        },
        "cluster_two": {
          "status": "failed",   <a id="CO243-4"></a><i class="conum" data-value="4"></i>
          "indices": "my-index-000001",
          "timed_out": false,
          "failures": [
            {
              "shard": -1,
              "index": null,
              "reason": {
                "type": "node_disconnected_exception",
                "reason": "[myhostname2][35.238.149.2:9300][indices:data/read/search] disconnected"
              }
            }
          ]
        }
      }
    },
    "hits": {
    },
  }
  "error": {  <a id="CO243-5"></a><i class="conum" data-value="5"></i>
    "type": "status_exception",
    "reason": "error while executing search",
    "caused_by": {
      "type": "node_disconnected_exception",
      "reason": "[myhostname2][35.238.149.2:9300][indices:data/read/search] disconnected"
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The shard accounting will often be only partial when errors like this occur,
since we need to be able to get shard info from remote clusters on each search.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">cluster_one</code> disconnected during the search and it returned no results.
Since it is marked in the remote cluster configuration as <code class="literal">skip_unavailable</code>=<code class="literal">true</code>,
its status is "skipped", which will not fail the entire search.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The failures list shows that the remote cluster node disconnected from the
querying cluster.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">cluster_two</code> status is "failed", since it is marked in the remote cluster
configuration as <code class="literal">skip_unavailable</code>=<code class="literal">false</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>A top level <code class="literal">error</code> entry is included when there is a "failed" cluster.</p>
</td>
</tr>
</table>
</div>
<h3><a id="exclude-problematic-clusters"></a>Excluding clusters or indices from a cross-cluster search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>If you use a wildcard to include a large list of clusters and/or indices,
you can explicitly exclude one or more clusters or indices with a <code class="literal">-</code> minus
sign in front of the cluster or index.</p>
<p>To exclude an entire cluster, you would put the minus sign in front of the
cluster alias, such as: <code class="literal">-mycluster:*</code>. When excluding a cluster, you must
use <code class="literal">*</code> in the index position or an error will be returned.</p>
<p>To exclude a specific remote index, you would put the minus sign in front
of the index, such as <code class="literal">mycluster:-myindex</code>.</p>
<p><span class="strong strong"><strong>Exclude a remote cluster</strong></span></p>
<p>Here&#8217;s how you would exclude <code class="literal">cluster_three</code> from a
cross-cluster search that uses a wildcard to specify a list of clusters:</p>
<a id="0ca6aae1ab2f0be6127beea8a245374e"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,cluster*:my-index-000001,-cluster_three:*/_async_search  <a id="CO244-1"></a><i class="conum" data-value="1"></i>
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  },
  "_source": ["user.id", "message", "http.response.status_code"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1026.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO244-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">cluster*</code> notation would naturally include <code class="literal">cluster_one</code>, <code class="literal">cluster_two</code> and <code class="literal">cluster_three</code>.
To exclude <code class="literal">cluster_three</code> use a <code class="literal">-</code> before the cluster name along with a simple wildcard <code class="literal">*</code> in
the index position. This indicates that you do not want the search to make any contact with
<code class="literal">cluster_three</code>.</p>
</td>
</tr>
</table>
</div>
<p><span class="strong strong"><strong>Exclude a remote index</strong></span></p>
<p>Suppose you want to search all indices matching <code class="literal">my-index-*</code> but you want to exclude
<code class="literal">my-index-000001</code> on <code class="literal">cluster_three</code>. Here&#8217;s how you could do that:</p>
<a id="55d349ccb0efd5e1c06c6dd383a593cf"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,cluster*:my-index-*,cluster_three:-my-index-000001/_async_search  <a id="CO245-1"></a><i class="conum" data-value="1"></i>
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  },
  "_source": ["user.id", "message", "http.response.status_code"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1027.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO245-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>This will <span class="strong strong"><strong>not</strong></span> exclude <code class="literal">cluster_three</code> from the search. It will still be
contacted and told to search any indexes matching <code class="literal">my-index-*</code> except for
<code class="literal">my-index-000001</code>.</p>
</td>
</tr>
</table>
</div>
<h3><a id="ccs-async-search-minimize-roundtrips-false"></a>Using async search for cross-cluster search with ccs_minimize_roundtrips=false<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>The <code class="literal">_shards</code> and <code class="literal">_clusters</code> section of the response behave
differently when <code class="literal">ccs_minimize_roundtrips</code> is <code class="literal">false</code>.</p>
<p>Key differences are:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
The <code class="literal">_shards</code> section total count will be accurate immediately as the total number
of shards is gathered from all clusters before the search starts.
</li>
<li class="listitem">
The <code class="literal">_shards</code> section will be incrementally updated as searches on individual
shards complete, so you will get a more accurate accounting of progress during a
long-running search compared to when minimize roundtrips is used.
</li>
<li class="listitem">
The <code class="literal">_cluster</code> section starts off listing all of its shard counts, since
they are also obtained before the query phase begins.
</li>
</ol>
</div>
<p>Example using the same setup as in the previous section (<code class="literal">ccs_minimize_roundtrips=true</code>):</p>
<a id="5597eeb8f43b5d47bd07f27122c24194"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /my-index-000001,cluster_one:my-index-000001,cluster_two:my-index-000001/_async_search?ccs_minimize_roundtrips=false
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  },
  "_source": ["user.id", "message", "http.response.status_code"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1028.console"></div>
<p>The API returns the following response if the query takes longer than
the <code class="literal">wait_for_completion_timeout</code> duration (see <a class="xref" href="async-search.html" title="Async search">Async search</a>).</p>
<a id="939932cf4a4d55c1e1d91859252586ca"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "id": "FklQYndoTDJ2VEFlMEVBTzFJMGhJVFEaLVlKYndBWWZSMUdicUc4WVlEaFl4ZzoxNTU=",
  "is_partial": true,
  "is_running": true,
  "start_time_in_millis": 1685563581380,
  "expiration_time_in_millis": 1685995581380,
  "response": {
    "took": 1020,
    "timed_out": false,
    "_shards": {
      "total": 28,     <a id="CO246-1"></a><i class="conum" data-value="1"></i>
      "successful": 0,
      "failed": 0,
      "skipped": 0
    },
    "_clusters": {
      "total" : 3,
      "successful": 0,
      "skipped": 0,
      "running": 3,    <a id="CO246-2"></a><i class="conum" data-value="2"></i>
      "partial": 0,
      "failed": 0,
      "details": {    <a id="CO246-3"></a><i class="conum" data-value="3"></i>
        "(local)": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false,
          "_shards": {
            "total": 10,
            "successful": 0,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_one": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false,
          "_shards": {
            "total": 12,
            "successful": 0,
            "skipped": 0,
            "failed": 0
          }
        },
        "cluster_two": {
          "status": "running",
          "indices": "my-index-000001",
          "timed_out": false,
          "_shards": {
            "total": 6,
            "successful": 0,
            "skipped": 0,
            "failed": 0
          }
        }
      }
    },
    "hits": {
      "total" : {
          "value": 0,
          "relation": "eq"
      },
      "max_score": null,
      "hits": []
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>All shards from all clusters in scope for the search are listed here. Watch this
section and/or the _clusters section for updates to monitor search progress.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>From the <code class="literal">_clusters</code> section we can see that all the clusters are in "running" state.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">_clusters</code> section shows that shard information was successfully
gathered from all 3 clusters and the total shard count on each cluster is listed.</p>
</td>
</tr>
</table>
</div>
<h3><a id="skip-unavailable-clusters"></a>Optional remote clusters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>By default, a cross-cluster search fails if a remote cluster in the request is unavailable
or returns an error where the search on all shards failed. Use the
<code class="literal">skip_unavailable</code> cluster setting to mark a specific remote cluster as
optional for cross-cluster search.</p>
<p>If <code class="literal">skip_unavailable</code> is <code class="literal">true</code>, a cross-cluster search:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Skips the remote cluster if its nodes are unavailable during the search. The
response&#8217;s <code class="literal">_clusters.skipped</code> value contains a count of any skipped clusters
and the <code class="literal">_clusters.details</code> section of the response will show a <code class="literal">skipped</code> status.
</li>
<li class="listitem">
Ignores errors returned by the remote cluster, such as errors related to
unavailable shards or indices. This can include errors related to search
parameters such as <a class="xref" href="api-conventions.html#api-multi-index" title="Multi-target syntax"><code class="literal">allow_no_indices</code></a> and
<a class="xref" href="api-conventions.html#api-multi-index" title="Multi-target syntax"><code class="literal">ignore_unavailable</code></a>.
</li>
<li class="listitem">
Ignores the <a class="xref" href="search-search.html#search-partial-responses"><code class="literal">allow_partial_search_results</code></a>
parameter and the related <code class="literal">search.default_allow_partial_results</code> cluster setting
when searching the remote cluster. This means searches on the remote cluster may
return partial results.
</li>
</ul>
</div>
<p>The following <a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">cluster update settings</a>
API request changes <code class="literal">skip_unavailable</code> setting to <code class="literal">true</code> for <code class="literal">cluster_two</code>.</p>
<a id="9949bcc64c9cd6f4041819546d7fce78"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster.remote.cluster_two.skip_unavailable": true
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1029.console"></div>
<p>If <code class="literal">cluster_two</code> is disconnected or unavailable during a cross-cluster search, Elasticsearch won&#8217;t
include matching documents from that cluster in the final results. If at
least one shard provides results, those results will be used and the
search will return partial data. (If doing cross-cluster search using async search,
the <code class="literal">is_partial</code> field will be set to <code class="literal">true</code> to indicate partial results.)</p>
<h3><a id="ccs-network-delays"></a>How cross-cluster search handles network delays<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>Because cross-cluster search involves sending requests to remote clusters, any network delays
can impact search speed. To avoid slow searches, cross-cluster search offers two options for
handling network delays:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a class="xref" href="modules-cross-cluster-search.html#ccs-min-roundtrips" title="Considerations for choosing whether to minimize roundtrips in a cross-cluster search">Minimize network roundtrips</a>
</span>
</dt>
<dd>
<p>
By default, Elasticsearch reduces the number of network roundtrips between remote
clusters. This reduces the impact of network delays on search speed. However,
Elasticsearch can&#8217;t reduce network roundtrips for large search requests, such as those
including a <a class="xref" href="paginate-search-results.html#scroll-search-results" title="Scroll search results">scroll</a> or
<a class="xref" href="inner-hits.html" title="Retrieve inner hits">inner hits</a>.
</p>
<p>See <a class="xref" href="modules-cross-cluster-search.html#ccs-min-roundtrips" title="Considerations for choosing whether to minimize roundtrips in a cross-cluster search">Considerations for choosing whether to minimize roundtrips in a cross-cluster search</a> to learn how this option works.</p>
</dd>
<dt>
<span class="term">
<a class="xref" href="modules-cross-cluster-search.html#ccs-unmin-roundtrips" title="Don&#8217;t minimize network roundtrips">Don&#8217;t minimize network roundtrips</a>
</span>
</dt>
<dd>
<p>
For search
requests that include a scroll or inner hits, Elasticsearch sends multiple outgoing and
ingoing requests to each remote cluster. You can also choose this option by
setting the <a class="xref" href="search-search.html#ccs-minimize-roundtrips"><code class="literal">ccs_minimize_roundtrips</code></a> parameter to
<code class="literal">false</code>. While typically slower, this approach may work well for networks with
low latency.
</p>
<p>See <a class="xref" href="modules-cross-cluster-search.html#ccs-unmin-roundtrips" title="Don&#8217;t minimize network roundtrips">Don&#8217;t minimize network roundtrips</a> to learn how this option works.</p>
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <a class="xref" href="search-vector-tile-api.html" title="Vector tile search API">vector tile search API</a> always minimizes
network roundtrips and doesn&#8217;t include the <code class="literal">ccs_minimize_roundtrips</code> parameter.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <a class="xref" href="knn-search.html#approximate-knn" title="Approximate kNN">Approximate kNN search</a> doesn&#8217;t support minimizing
network roundtrips, and sets the parameter <code class="literal">ccs_minimize_roundtrips</code> to <code class="literal">false</code>.</p>
</div>
</div>
<h4><a id="ccs-min-roundtrips"></a>Considerations for choosing whether to minimize roundtrips in a cross-cluster search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>For cross-cluster searches that query a large number of shards, the minimize roundtrips
option typically provides much better performance. This is especially true if the clusters
being searched have high network latency (e.g., distant geographic regions).</p>
<p>However, not minimizing roundtrips allows you to get back incremental results of
any aggregations in your query when using async-search while the search is still
running.</p>
<p>By default, synchronous searches minimize roundtrips, while asynchronous searches
do not. You can override the default by using the <code class="literal">ccs_minimize_roundtrips</code> parameter,
setting it to either <code class="literal">true</code> or <code class="literal">false</code>, as shown in several examples earlier in this
document.</p>
<h4><a id="ccs-min-roundtrips-true"></a>Minimize network roundtrips<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>Here&#8217;s how cross-cluster search works when you minimize network roundtrips.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>You send a cross-cluster search request to your local cluster. A coordinating node in that
cluster receives and parses the request.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-client-request.svg" alt="ccs min roundtrip client request"></span></p>
</li>
<li class="listitem">
<p>The coordinating node sends a single search request to each cluster, including
the local cluster. Each cluster performs the search request independently,
applying its own cluster-level settings to the request.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-cluster-search.svg" alt="ccs min roundtrip cluster search"></span></p>
</li>
<li class="listitem">
<p>Each remote cluster sends its search results back to the coordinating node.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-cluster-results.svg" alt="ccs min roundtrip cluster results"></span></p>
</li>
<li class="listitem">
<p>After collecting results from each cluster, the coordinating node returns the
final results in the cross-cluster search response.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-client-response.svg" alt="ccs min roundtrip client response"></span></p>
</li>
</ol>
</div>
<h4><a id="ccs-unmin-roundtrips"></a>Don&#8217;t minimize network roundtrips<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>Here&#8217;s how cross-cluster search works when you don&#8217;t minimize network roundtrips.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>You send a cross-cluster search request to your local cluster. A coordinating node in that
cluster receives and parses the request.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-client-request.svg" alt="ccs min roundtrip client request"></span></p>
</li>
<li class="listitem">
<p>The coordinating node sends a "search shards" transport layer request
to each remote cluster to have them to perform a "can match" search to determine
which shards on each cluster should be searched.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-cluster-search.svg" alt="ccs min roundtrip cluster search"></span></p>
</li>
<li class="listitem">
<p>Each remote cluster sends its response back to the coordinating node.
This response contains information about the indices and shards the cross-cluster search
request will be executed on.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-cluster-results.svg" alt="ccs min roundtrip cluster results"></span></p>
</li>
<li class="listitem">
<p>The coordinating node sends a search request to each shard, including those in
its own cluster. Each shard performs the search request independently.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>When network roundtrips aren&#8217;t minimized, the search is executed as if all data
were in the coordinating node&#8217;s cluster. We recommend updating cluster-level
settings that limit searches, such as <code class="literal">action.search.shard_count.limit</code>,
<code class="literal">pre_filter_shard_size</code>, and <code class="literal">max_concurrent_shard_requests</code>, to account for
this. If these limits are too low, the search may be rejected.</p>
</div>
</div>
<p><span class="image"><img src="images/ccs/ccs-dont-min-roundtrip-shard-search.svg" alt="ccs dont min roundtrip shard search"></span></p>
</li>
<li class="listitem">
<p>Each shard sends its search results back to the coordinating node.</p>
<p><span class="image"><img src="images/ccs/ccs-dont-min-roundtrip-shard-results.svg" alt="ccs dont min roundtrip shard results"></span></p>
</li>
<li class="listitem">
<p>After collecting results from each cluster, the coordinating node returns the
final results in the cross-cluster search response.</p>
<p><span class="image"><img src="images/ccs/ccs-min-roundtrip-client-response.svg" alt="ccs min roundtrip client response"></span></p>
</li>
</ol>
</div>
<h3><a id="ccs-supported-configurations"></a>Supported cross-cluster search configurations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h3>
<p>In 8.0+, Elastic supports searches from a local cluster to a remote cluster
running:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The previous minor version.
</li>
<li class="listitem">
The same version.
</li>
<li class="listitem">
A newer minor version in the same major version.
</li>
</ul>
</div>
<p>Elastic also supports searches from a local cluster running the last minor
version of a major version to a remote cluster running any minor version in the
following major version. For example, a local 7.17 cluster can search any
remote 8.x cluster.</p>
<div class="informaltable">
<a id="ccs-version-compatibility"></a>
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
<col class="col_7"/>
<col class="col_8"/>
<col class="col_9"/>
<col class="col_10"/>
<col class="col_11"/>
<col class="col_12"/>
<col class="col_13"/>
<col class="col_14"/>
<col class="col_15"/>
<col class="col_16"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p></p></td>
<td align="center" colspan="15" valign="top"><p><span class="strong strong"><strong>Remote cluster version</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Local cluster version</strong></span></p></td>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p>8.0</p></td>
<td align="center" valign="top"><p>8.1</p></td>
<td align="center" valign="top"><p>8.2</p></td>
<td align="center" valign="top"><p>8.3</p></td>
<td align="center" valign="top"><p>8.4</p></td>
<td align="center" valign="top"><p>8.5</p></td>
<td align="center" valign="top"><p>8.6</p></td>
<td align="center" valign="top"><p>8.7</p></td>
<td align="center" valign="top"><p>8.8</p></td>
<td align="center" valign="top"><p>8.9</p></td>
<td align="center" valign="top"><p>8.10</p></td>
<td align="center" valign="top"><p>8.11</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.0</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.1</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.2</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.3</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.4</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.5</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.6</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.7</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.8</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.9</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.10</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.11</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>For the <a class="xref" href="eql-search-api.html" title="EQL search API">EQL search API</a>, the local and remote
clusters must use the same Elasticsearch version if they have versions prior to 7.17.7 (included) or prior to 8.5.1 (included).</p>
</div>
</div>
<p>For example, a local 8.0 cluster can search a remote 7.17 or any remote 8.x
cluster. However, a search from a local 8.0 cluster to a remote 7.16 or 6.8
cluster is not supported.</p>
<p>Only features that exist across all searched clusters are supported. Using a
feature with a remote cluster where the feature is not supported will result in
undefined behavior.</p>
<p>A cross-cluster search using an unsupported configuration may still work. However, such
searches aren&#8217;t tested by Elastic, and their behavior isn&#8217;t guaranteed.</p>
<h4><a id="ensure-ccs-support"></a>Ensure cross-cluster search support<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>The simplest way to ensure your clusters support cross-cluster search is to keep each cluster
on the same version of Elasticsearch. If you need to maintain clusters with different
versions, you can:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Maintain a dedicated cluster for cross-cluster search. Keep this cluster on the earliest
version needed to search the other clusters. For example, if you have 7.17 and 8.x clusters,
you can maintain a dedicated 7.17 cluster to use as the local cluster for cross-cluster search.
</li>
<li class="listitem">
Keep each cluster no more than one minor version apart. This lets you use any
cluster as the local cluster when running a cross-cluster search.
</li>
</ul>
</div>
<h4><a id="ccs-during-upgrade"></a>Cross-cluster search during an upgrade<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.11/docs/reference/search/search-your-data/search-across-clusters.asciidoc">edit</a></h4>
<p>You can still search a remote cluster while performing a
rolling upgrade on the local cluster. However, the local
coordinating node&#8217;s "upgrade from" and "upgrade to" version must be compatible
with the remote cluster&#8217;s gateway node.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Running multiple versions of Elasticsearch in the same cluster beyond the
duration of an upgrade is not supported.</p>
</div>
</div>
<p>For more information about upgrades, see
<a href="/guide/en/elastic-stack/8.11/upgrading-elasticsearch.html" class="ulink" target="_top">Upgrading Elasticsearch</a>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="semantic-search-elser.html">« Tutorial: semantic search with ELSER</a>
</span>
<span class="next">
<a href="search-with-synonyms.html">Search with synonyms »</a>
</span>
</div>
</body>
</html>
