<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ES|QL limitations | Elasticsearch Guide [8.12] | Elastic</title>
<meta class="elastic" name="content" content="ES|QL limitations | Elasticsearch Guide [8.12]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.12]"/>
<link rel="up" href="esql.html" title="ES|QL"/>
<link rel="prev" href="esql-task-management.html" title="ES|QL task management"/>
<link rel="next" href="esql-examples.html" title="ES|QL examples"/>
<meta class="elastic" name="product_version" content="8.12"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.12"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.12"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.12]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql.html">ES|QL</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="esql-task-management.html">« ES|QL task management</a>
</span>
<span class="next">
<a href="esql-examples.html">ES|QL examples »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="esql-limitations"></a>ES|QL limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h2>
</div></div></div>

<h3><a id="esql-max-rows"></a>Result set size limit<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>By default, an ES|QL query returns up to 500 rows. You can increase the number
of rows up to 10,000 using the <a class="xref" href="esql-commands.html#esql-limit" title="LIMIT"><code class="literal">LIMIT</code></a> command.
Queries do not return more than 10,000 rows, regardless of the <code class="literal">LIMIT</code> command&#8217;s
value.</p>
<p>This limit only applies to the number of rows that are retrieved by the query.
Queries and aggregations run on the full data set.</p>
<p>To overcome this limitation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Reduce the result set size by modifying the query to only return relevant
data. Use <a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> to select a smaller subset of the data.
</li>
<li class="listitem">
Shift any post-query processing to the query itself. You can use the ES|QL
<a class="xref" href="esql-commands.html#esql-stats-by" title="STATS ... BY"><code class="literal">STATS ... BY</code></a> command to aggregate data in the query.
</li>
</ul>
</div>
<p>The default and maximum limits can be changed using these dynamic cluster
settings:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">esql.query.result_truncation_default_size</code>
</li>
<li class="listitem">
<code class="literal">esql.query.result_truncation_max_size</code>
</li>
</ul>
</div>
<h3><a id="esql-supported-types"></a>Field types<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<h4><a id="_supported_types"></a>Supported types<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h4>
<p>ES|QL currently supports the following <a class="xref" href="mapping-types.html" title="Field data types">field types</a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">alias</code>
</li>
<li class="listitem">
<code class="literal">boolean</code>
</li>
<li class="listitem">
<code class="literal">date</code>
</li>
<li class="listitem">
<code class="literal">double</code> (<code class="literal">float</code>, <code class="literal">half_float</code>, <code class="literal">scaled_float</code> are represented as <code class="literal">double</code>)
</li>
<li class="listitem">
<code class="literal">ip</code>
</li>
<li class="listitem">
<code class="literal">keyword</code> family including <code class="literal">keyword</code>, <code class="literal">constant_keyword</code>, and <code class="literal">wildcard</code>
</li>
<li class="listitem">
<code class="literal">int</code> (<code class="literal">short</code> and <code class="literal">byte</code> are represented as <code class="literal">int</code>)
</li>
<li class="listitem">
<code class="literal">long</code>
</li>
<li class="listitem">
<code class="literal">null</code>
</li>
<li class="listitem">
<code class="literal">text</code>
</li>
<li class="listitem">
<code class="literal">unsigned_long</code>
</li>
<li class="listitem">
<code class="literal">version</code>
</li>
<li class="listitem">
<p>Spatial types</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">geo_point</code>
</li>
<li class="listitem">
<code class="literal">point</code>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h4><a id="_unsupported_types"></a>Unsupported types<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h4>
<p>ES|QL does not yet support the following field types:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>TSDB metrics</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">counter</code>
</li>
<li class="listitem">
<code class="literal">position</code>
</li>
<li class="listitem">
<code class="literal">aggregate_metric_double</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Spatial types</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">geo_shape</code>
</li>
<li class="listitem">
<code class="literal">shape</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Date/time</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">date_nanos</code>
</li>
<li class="listitem">
<code class="literal">date_range</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Other types</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">binary</code>
</li>
<li class="listitem">
<code class="literal">completion</code>
</li>
<li class="listitem">
<code class="literal">dense_vector</code>
</li>
<li class="listitem">
<code class="literal">double_range</code>
</li>
<li class="listitem">
<code class="literal">flattened</code>
</li>
<li class="listitem">
<code class="literal">float_range</code>
</li>
<li class="listitem">
<code class="literal">histogram</code>
</li>
<li class="listitem">
<code class="literal">integer_range</code>
</li>
<li class="listitem">
<code class="literal">ip_range</code>
</li>
<li class="listitem">
<code class="literal">long_range</code>
</li>
<li class="listitem">
<code class="literal">nested</code>
</li>
<li class="listitem">
<code class="literal">rank_feature</code>
</li>
<li class="listitem">
<code class="literal">rank_features</code>
</li>
<li class="listitem">
<code class="literal">search_as_you_type</code>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>Querying a column with an unsupported type returns an error. If a column with an
unsupported type is not explicitly used in a query, it is returned with <code class="literal">null</code>
values, with the exception of nested fields. Nested fields are not returned at
all.</p>
<h3><a id="esql-limitations-full-text-search"></a>Full-text search is not supported<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>Because of <a class="xref" href="esql-limitations.html#esql-limitations-text-fields" title="text fields behave like keyword fields">the way ES|QL treats <code class="literal">text</code> values</a>,
full-text search is not yet supported. Queries on <code class="literal">text</code> fields are like queries
on <code class="literal">keyword</code> fields: they are case-sensitive and need to match the full string.</p>
<p>For example, after indexing a field of type <code class="literal">text</code> with the value <code class="literal">Elasticsearch
query language</code>, the following <code class="literal">WHERE</code> clause does not match because the <code class="literal">LIKE</code>
operator is case-sensitive:</p>
<div class="pre_wrapper lang-esql">
<pre class="programlisting prettyprint lang-esql">| WHERE field LIKE "elasticsearch query language"</pre>
</div>
<p>The following <code class="literal">WHERE</code> clause does not match either, because the <code class="literal">LIKE</code> operator
tries to match the whole string:</p>
<div class="pre_wrapper lang-esql">
<pre class="programlisting prettyprint lang-esql">| WHERE field LIKE "Elasticsearch"</pre>
</div>
<p>As a workaround, use wildcards and regular expressions. For example:</p>
<div class="pre_wrapper lang-esql">
<pre class="programlisting prettyprint lang-esql">| WHERE field RLIKE "[Ee]lasticsearch.*"</pre>
</div>
<h3><a id="esql-limitations-text-fields"></a><code class="literal">text</code> fields behave like <code class="literal">keyword</code> fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>While ES|QL supports <a class="xref" href="text.html" title="Text type family"><code class="literal">text</code></a> fields, ES|QL does not treat these fields
like the Search API does. ES|QL queries do not query or aggregate the
<a class="xref" href="analysis.html" title="Text analysis">analyzed string</a>. Instead, an ES|QL query will try to get a <code class="literal">text</code>
field&#8217;s subfield of the <a class="xref" href="keyword.html" title="Keyword type family">keyword family type</a> and query/aggregate
that. If it&#8217;s not possible to retrieve a <code class="literal">keyword</code> subfield, ES|QL will get the
string from a document&#8217;s <code class="literal">_source</code>. If the <code class="literal">_source</code> cannot be retrieved, for
example when using synthetic source, <code class="literal">null</code> is returned.</p>
<p>Note that ES|QL&#8217;s retrieval of <code class="literal">keyword</code> subfields may have unexpected
consequences. An ES|QL query on a <code class="literal">text</code> field is case-sensitive. Furthermore,
a subfield may have been mapped with a <a class="xref" href="normalizer.html" title="normalizer">normalizer</a>, which can
transform the original string. Or it may have been mapped with <a class="xref" href="ignore-above.html" title="ignore_above"><code class="literal">ignore_above</code></a>,
which can truncate the string. None of these mapping operations are applied to
an ES|QL query, which may lead to false positives or negatives.</p>
<p>To avoid these issues, a best practice is to be explicit about the field that
you query, and query <code class="literal">keyword</code> sub-fields instead of <code class="literal">text</code> fields.</p>
<h3><a id="esql-tsdb"></a>Time series data streams are not supported<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>ES|QL does not support querying time series data streams (TSDS).</p>
<h3><a id="esql-limitations-ccs"></a>Cross-cluster search is not supported<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>ES|QL does not support cross-cluster search.</p>
<h3><a id="esql-limitations-date-math"></a>Date math limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>Date math expressions work well when the leftmost expression is a datetime, for
example:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">now() + 1 year - 2hour + ...</pre>
</div>
<p>But using parentheses or putting the datetime to the right is not always supported yet. For example, the following expressions fail:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">1year + 2hour + now()
now() + (1year + 2hour)</pre>
</div>
<p>Date math does not allow subtracting two datetimes, for example:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">now() - 2023-10-26</pre>
</div>
<h3><a id="esql-limitations-enrich"></a>Enrich limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>The ES|QL <code class="literal">ENRICH</code> command only supports enrich policies of type <code class="literal">match</code>.
Furthermore, <code class="literal">ENRICH</code> only supports enriching on a column of type <code class="literal">keyword</code>.</p>
<h3><a id="esql-limitations-dissect"></a>Dissect limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>The <code class="literal">DISSECT</code> command does not support reference keys.</p>
<h3><a id="esql-limitations-grok"></a>Grok limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>The <code class="literal">GROK</code> command does not support configuring <a class="xref" href="grok-processor.html#custom-patterns" title="Custom Patterns">custom
patterns</a>, or <a class="xref" href="grok-processor.html#trace-match" title="Providing Multiple Match Patterns">multiple patterns</a>. The <code class="literal">GROK</code> command is not
subject to <a class="xref" href="grok-processor.html#grok-watchdog" title="Grok watchdog">Grok watchdog settings</a>.</p>
<h3><a id="esql-limitations-mv"></a>Multivalue limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>ES|QL <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">supports multivalued fields</a>, but functions
return <code class="literal">null</code> when applied to a multivalued field, unless documented otherwise.
Work around this limitation by converting the field to single value with one of
the <a class="xref" href="esql-functions-operators.html#esql-mv-functions" title="ES|QL multivalue functions">multivalue functions</a>.</p>
<h3><a id="esql-limitations-timezone"></a>Timezone support<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<p>ES|QL only supports the UTC timezone.</p>
<h3><a id="esql-limitations-kibana"></a>Kibana limitations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.12/docs/reference/esql/esql-limitations.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The user interface to filter data is not enabled when Discover is in ES|QL
mode. To filter data, write a query that uses the <a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> command
instead.
</li>
<li class="listitem">
In ES|QL mode, clicking a field in the field list in Discover does not show
quick statistics for that field.
</li>
<li class="listitem">
Discover shows no more than 10,000 rows. This limit only applies to the number
of rows that are retrieved by the query and displayed in Discover. Queries and
aggregations run on the full data set.
</li>
<li class="listitem">
Discover shows no more than 50 columns. If a query returns
more than 50 columns, Discover only shows the first 50.
</li>
<li class="listitem">
Querying many many indices at once without any filters can cause an error in
kibana which looks like <code class="literal">[esql] &gt; Unexpected error from Elasticsearch: The
content length (536885793) is bigger than the maximum allowed string
(536870888)</code>. The response from ES|QL is too long. Use <a class="xref" href="esql-commands.html#esql-drop" title="DROP"><code class="literal">DROP</code></a> or
<a class="xref" href="esql-commands.html#esql-keep" title="KEEP"><code class="literal">KEEP</code></a> to limit the number of fields returned.
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="esql-task-management.html">« ES|QL task management</a>
</span>
<span class="next">
<a href="esql-examples.html">ES|QL examples »</a>
</span>
</div>
</div>
</body>
</html>
