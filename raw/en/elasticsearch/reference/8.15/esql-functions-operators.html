<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ES|QL functions and operators | Elasticsearch Guide [8.15] | Elastic</title>
<meta class="elastic" name="content" content="ES|QL functions and operators | Elasticsearch Guide [8.15]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.15]"/>
<link rel="up" href="esql-language.html" title="ES|QL reference"/>
<link rel="prev" href="esql-commands.html" title="ES|QL commands"/>
<link rel="next" href="esql-metadata-fields.html" title="ES|QL metadata fields"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.15"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="esql-commands.html">« ES|QL commands</a>
</span>
<span class="next">
<a href="esql-metadata-fields.html">ES|QL metadata fields »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql.html">ES|QL</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql-language.html">ES|QL reference</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>ES|QL functions and operators</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/esql-functions-operators.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="esql-functions-operators"></a>ES|QL functions and operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/esql-functions-operators.asciidoc">edit</a></h2>
</div></div></div>

<p>ES|QL provides a comprehensive set of functions and operators for working with data.
The reference documentation is divided into the following categories:</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-functions"></a>Functions overview<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/esql-functions-operators.asciidoc">edit</a></h3>
</div></div></div>
<details>
<summary class="title"><span class="strong strong"><strong>Aggregate functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-avg" title="AVG"><code class="literal">AVG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-count" title="COUNT"><code class="literal">COUNT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-count-distinct" title="COUNT_DISTINCT"><code class="literal">COUNT_DISTINCT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-max" title="MAX"><code class="literal">MAX</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-median" title="MEDIAN"><code class="literal">MEDIAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-median-absolute-deviation" title="MEDIAN_ABSOLUTE_DEVIATION"><code class="literal">MEDIAN_ABSOLUTE_DEVIATION</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-min" title="MIN"><code class="literal">MIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-percentile" title="PERCENTILE"><code class="literal">PERCENTILE</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-agg-st-centroid" title="ST_CENTROID_AGG"><code class="literal">ST_CENTROID_AGG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-sum" title="SUM"><code class="literal">SUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-top" title="TOP"><code class="literal">TOP</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-values" title="VALUES"><code class="literal">VALUES</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-agg-weighted-avg" title="WEIGHTED_AVG"><code class="literal">WEIGHTED_AVG</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Grouping functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-bucket" title="BUCKET"><code class="literal">BUCKET</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Conditional functions and expressions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-case" title="CASE"><code class="literal">CASE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-coalesce" title="COALESCE"><code class="literal">COALESCE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-greatest" title="GREATEST"><code class="literal">GREATEST</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-least" title="LEAST"><code class="literal">LEAST</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Date and time functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_diff" title="DATE_DIFF"><code class="literal">DATE_DIFF</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_extract" title="DATE_EXTRACT"><code class="literal">DATE_EXTRACT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_format" title="DATE_FORMAT"><code class="literal">DATE_FORMAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_parse" title="DATE_PARSE"><code class="literal">DATE_PARSE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_trunc" title="DATE_TRUNC"><code class="literal">DATE_TRUNC</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-now" title="NOW"><code class="literal">NOW</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>IP functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cidr_match" title="CIDR_MATCH"><code class="literal">CIDR_MATCH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ip_prefix" title="IP_PREFIX"><code class="literal">IP_PREFIX</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Math functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-abs" title="ABS"><code class="literal">ABS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-acos" title="ACOS"><code class="literal">ACOS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-asin" title="ASIN"><code class="literal">ASIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-atan" title="ATAN"><code class="literal">ATAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-atan2" title="ATAN2"><code class="literal">ATAN2</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cbrt" title="CBRT"><code class="literal">CBRT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ceil" title="CEIL"><code class="literal">CEIL</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cos" title="COS"><code class="literal">COS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cosh" title="COSH"><code class="literal">COSH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-e" title="E"><code class="literal">E</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-floor" title="FLOOR"><code class="literal">FLOOR</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-log" title="LOG"><code class="literal">LOG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-log10" title="LOG10"><code class="literal">LOG10</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-pi" title="PI"><code class="literal">PI</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-pow" title="POW"><code class="literal">POW</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-round" title="ROUND"><code class="literal">ROUND</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-signum" title="SIGNUM"><code class="literal">SIGNUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-sin" title="SIN"><code class="literal">SIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-sinh" title="SINH"><code class="literal">SINH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-sqrt" title="SQRT"><code class="literal">SQRT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-tan" title="TAN"><code class="literal">TAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-tanh" title="TANH"><code class="literal">TANH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-tau" title="TAU"><code class="literal">TAU</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Spatial functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_intersects" title="ST_INTERSECTS"><code class="literal">ST_INTERSECTS</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_disjoint" title="ST_DISJOINT"><code class="literal">ST_DISJOINT</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_contains" title="ST_CONTAINS"><code class="literal">ST_CONTAINS</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_within" title="ST_WITHIN"><code class="literal">ST_WITHIN</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_x" title="ST_X"><code class="literal">ST_X</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_y" title="ST_Y"><code class="literal">ST_Y</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_distance" title="ST_DISTANCE"><code class="literal">ST_DISTANCE</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>String functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-concat" title="CONCAT"><code class="literal">CONCAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ends_with" title="ENDS_WITH"><code class="literal">ENDS_WITH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-from_base64" title="FROM_BASE64"><code class="literal">FROM_BASE64</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-left" title="LEFT"><code class="literal">LEFT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-length" title="LENGTH"><code class="literal">LENGTH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-locate" title="LOCATE"><code class="literal">LOCATE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ltrim" title="LTRIM"><code class="literal">LTRIM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-repeat" title="REPEAT"><code class="literal">REPEAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-replace" title="REPLACE"><code class="literal">REPLACE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-right" title="RIGHT"><code class="literal">RIGHT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-rtrim" title="RTRIM"><code class="literal">RTRIM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-split" title="SPLIT"><code class="literal">SPLIT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-starts_with" title="STARTS_WITH"><code class="literal">STARTS_WITH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-substring" title="SUBSTRING"><code class="literal">SUBSTRING</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_base64" title="TO_BASE64"><code class="literal">TO_BASE64</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_lower" title="TO_LOWER"><code class="literal">TO_LOWER</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_upper" title="TO_UPPER"><code class="literal">TO_UPPER</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-trim" title="TRIM"><code class="literal">TRIM</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Type conversion functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_boolean" title="TO_BOOLEAN"><code class="literal">TO_BOOLEAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_cartesianpoint" title="TO_CARTESIANPOINT"><code class="literal">TO_CARTESIANPOINT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_cartesianshape" title="TO_CARTESIANSHAPE"><code class="literal">TO_CARTESIANSHAPE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_datetime" title="TO_DATETIME"><code class="literal">TO_DATETIME</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_degrees" title="TO_DEGREES"><code class="literal">TO_DEGREES</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_double" title="TO_DOUBLE"><code class="literal">TO_DOUBLE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_geopoint" title="TO_GEOPOINT"><code class="literal">TO_GEOPOINT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_geoshape" title="TO_GEOSHAPE"><code class="literal">TO_GEOSHAPE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_integer" title="TO_INTEGER"><code class="literal">TO_INTEGER</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_ip" title="TO_IP"><code class="literal">TO_IP</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_long" title="TO_LONG"><code class="literal">TO_LONG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_radians" title="TO_RADIANS"><code class="literal">TO_RADIANS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_string" title="TO_STRING"><code class="literal">TO_STRING</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-to_unsigned_long" title="TO_UNSIGNED_LONG"><code class="literal">TO_UNSIGNED_LONG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_version" title="TO_VERSION"><code class="literal">TO_VERSION</code></a>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Multi value functions</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_append" title="MV_APPEND"><code class="literal">MV_APPEND</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_avg" title="MV_AVG"><code class="literal">MV_AVG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_concat" title="MV_CONCAT"><code class="literal">MV_CONCAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_count" title="MV_COUNT"><code class="literal">MV_COUNT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_dedupe" title="MV_DEDUPE"><code class="literal">MV_DEDUPE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_first" title="MV_FIRST"><code class="literal">MV_FIRST</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_last" title="MV_LAST"><code class="literal">MV_LAST</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_max" title="MV_MAX"><code class="literal">MV_MAX</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_median" title="MV_MEDIAN"><code class="literal">MV_MEDIAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_min" title="MV_MIN"><code class="literal">MV_MIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_sort" title="MV_SORT"><code class="literal">MV_SORT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_slice" title="MV_SLICE"><code class="literal">MV_SLICE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_sum" title="MV_SUM"><code class="literal">MV_SUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_zip" title="MV_ZIP"><code class="literal">MV_ZIP</code></a>
</li>
</ul>
</div>
</div>
</details>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-operators-overview"></a>Operators overview<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/esql-functions-operators.asciidoc">edit</a></h3>
</div></div></div>
<details>
<summary class="title"><span class="strong strong"><strong>Operators</strong></span></summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-binary-operators" title="Binary operators">Binary operators</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-unary-operators" title="Unary operators">Unary operators</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-logical-operators" title="Logical operators">Logical operators</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-predicates" title="IS NULL and IS NOT NULL predicates"><code class="literal">IS NULL</code> and <code class="literal">IS NOT NULL</code> predicates</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cast-operator" title="Cast (::)"><code class="literal">Cast (::)</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-in-operator" title="IN"><code class="literal">IN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-like-operator" title="LIKE"><code class="literal">LIKE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-rlike-operator" title="RLIKE"><code class="literal">RLIKE</code></a>
</li>
</ul>
</div>
</div>
</details>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-agg-functions"></a>ES|QL aggregate functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/aggregation-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>The <a class="xref" href="esql-commands.html#esql-stats-by" title="STATS ... BY"><code class="literal">STATS ... BY</code></a> command supports these aggregate functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-avg" title="AVG"><code class="literal">AVG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-count" title="COUNT"><code class="literal">COUNT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-count-distinct" title="COUNT_DISTINCT"><code class="literal">COUNT_DISTINCT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-max" title="MAX"><code class="literal">MAX</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-median" title="MEDIAN"><code class="literal">MEDIAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-median-absolute-deviation" title="MEDIAN_ABSOLUTE_DEVIATION"><code class="literal">MEDIAN_ABSOLUTE_DEVIATION</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-min" title="MIN"><code class="literal">MIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-percentile" title="PERCENTILE"><code class="literal">PERCENTILE</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-agg-st-centroid" title="ST_CENTROID_AGG"><code class="literal">ST_CENTROID_AGG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-sum" title="SUM"><code class="literal">SUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-top" title="TOP"><code class="literal">TOP</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-agg-values" title="VALUES"><code class="literal">VALUES</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-agg-weighted-avg" title="WEIGHTED_AVG"><code class="literal">WEIGHTED_AVG</code></a>
</li>
</ul>
</div>
<h3><a id="esql-agg-avg"></a><code class="literal">AVG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/avg.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">AVG(expression)</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Numeric expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>The average of a numeric expression.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<p>The result is always a <code class="literal">double</code> no matter the input type.</p>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS AVG(height)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">AVG(height):double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.7682</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. For example, to calculate the average
over a multivalued column, first use <code class="literal">MV_AVG</code> to average the multiple values per
row, and use the result with the <code class="literal">AVG</code> function:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS avg_salary_change = ROUND(AVG(MV_AVG(salary_change)), 10)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">avg_salary_change:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.3904535865</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-count"></a><code class="literal">COUNT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/count.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">COUNT([expression])</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression that outputs values to be counted.
If omitted, equivalent to <code class="literal">COUNT(*)</code> (the number of rows).
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the total number (count) of input values.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<p>Can take any field type as input.</p>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS COUNT(height)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">COUNT(height):long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>100</p></td>
</tr>
</tbody>
</table>
</div>
<p>To count the number of rows, use <code class="literal">COUNT()</code> or <code class="literal">COUNT(*)</code>:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS count = COUNT(*) BY languages
| SORT languages DESC</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">count:long</th>
<th align="left" valign="top">languages:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>21</p></td>
<td align="left" valign="top"><p>5</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>18</p></td>
<td align="left" valign="top"><p>4</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>17</p></td>
<td align="left" valign="top"><p>3</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>19</p></td>
<td align="left" valign="top"><p>2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. This example splits a string into
multiple values using the <code class="literal">SPLIT</code> function and counts the values:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW words="foo;bar;baz;qux;quux;foo"
| STATS word_count = COUNT(SPLIT(words, ";"))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">word_count:long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>6</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-count-distinct"></a><code class="literal">COUNT_DISTINCT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/count-distinct.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">COUNT_DISTINCT(expression[, precision_threshold])</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression that outputs the values on which to perform a distinct count.
</dd>
<dt>
<span class="term">
<code class="literal">precision_threshold</code>
</span>
</dt>
<dd>
Precision threshold. Refer to <a class="xref" href="esql-functions-operators.html#esql-agg-count-distinct-approximate" title="Counts are approximate">Counts are approximate</a>. The
maximum supported value is 40000. Thresholds above this number will have the
same effect as a threshold of 40000. The default value is 3000.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the approximate number of distinct values.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<p>Can take any field type as input.</p>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM hosts
| STATS COUNT_DISTINCT(ip0), COUNT_DISTINCT(ip1)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">COUNT_DISTINCT(ip0):long</th>
<th align="left" valign="top">COUNT_DISTINCT(ip1):long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>7</p></td>
<td align="left" valign="top"><p>8</p></td>
</tr>
</tbody>
</table>
</div>
<p>With the optional second parameter to configure the precision threshold:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM hosts
| STATS COUNT_DISTINCT(ip0, 80000), COUNT_DISTINCT(ip1, 5)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">COUNT_DISTINCT(ip0, 80000):long</th>
<th align="left" valign="top">COUNT_DISTINCT(ip1, 5):long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>7</p></td>
<td align="left" valign="top"><p>9</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. This example splits a string into
multiple values using the <code class="literal">SPLIT</code> function and counts the unique values:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW words="foo;bar;baz;qux;quux;foo"
| STATS distinct_word_count = COUNT_DISTINCT(SPLIT(words, ";"))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">distinct_word_count:long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>5</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="esql-agg-count-distinct-approximate"></a>Counts are approximate<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/count-distinct.asciidoc">edit</a></h4>
<p>Computing exact counts requires loading values into a set and returning its
size. This doesn&#8217;t scale when working on high-cardinality sets and/or large
values as the required memory usage and the need to communicate those
per-shard sets between nodes would utilize too many resources of the cluster.</p>
<p>This <code class="literal">COUNT_DISTINCT</code> function is based on the
<a href="https://static.googleusercontent.com/media/research.google.com/fr//pubs/archive/40671.pdf" class="ulink" target="_top">HyperLogLog++</a>
algorithm, which counts based on the hashes of the values with some interesting
properties:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
configurable precision, which decides on how to trade memory for accuracy,
</li>
<li class="listitem">
excellent accuracy on low-cardinality sets,
</li>
<li class="listitem">
fixed memory usage: no matter if there are tens or billions of unique values,
memory usage only depends on the configured precision.
</li>
</ul>
</div>
<p>For a precision threshold of <code class="literal">c</code>, the implementation that we are using requires
about <code class="literal">c * 8</code> bytes.</p>
<p>The following chart shows how the error varies before and after the threshold:</p>
<p><span class="image"><img src="images/cardinality_error.png" alt="cardinality error"></span></p>
<p>For all 3 thresholds, counts have been accurate up to the configured threshold.
Although not guaranteed, this is likely to be the case. Accuracy in practice depends
on the dataset in question. In general, most datasets show consistently good
accuracy. Also note that even with a threshold as low as 100, the error
remains very low (1-6% as seen in the above graph) even when counting millions of items.</p>
<p>The HyperLogLog++ algorithm depends on the leading zeros of hashed
values, the exact distributions of hashes in a dataset can affect the
accuracy of the cardinality.</p>
<p>The <code class="literal">COUNT_DISTINCT</code> function takes an optional second parameter to configure
the precision threshold. The precision_threshold options allows to trade memory
for accuracy, and defines a unique count below which counts are expected to be
close to accurate. Above this value, counts might become a bit more fuzzy. The
maximum supported value is 40000, thresholds above this number will have the
same effect as a threshold of 40000. The default value is <code class="literal">3000</code>.</p>
<h3><a id="esql-agg-max"></a><code class="literal">MAX</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/max.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">MAX(expression)</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression from which to return the maximum value.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the maximum value of a numeric expression.</p>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS MAX(languages)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">MAX(languages):integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>5</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. For example, to calculate the maximum
over an average of a multivalued column, use <code class="literal">MV_AVG</code> to first average the
multiple values per row, and use the result with the <code class="literal">MAX</code> function:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS max_avg_salary_change = MAX(MV_AVG(salary_change))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">max_avg_salary_change:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>13.75</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-median"></a><code class="literal">MEDIAN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/median.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">MEDIAN(expression)</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression from which to return the median value.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the value that is greater than half of all values and less than half of
all values, also known as the 50% <a class="xref" href="esql-functions-operators.html#esql-agg-percentile" title="PERCENTILE"><code class="literal">PERCENTILE</code></a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Like <a class="xref" href="esql-functions-operators.html#esql-agg-percentile" title="PERCENTILE"><code class="literal">PERCENTILE</code></a>, <code class="literal">MEDIAN</code> is <a class="xref" href="esql-functions-operators.html#esql-agg-percentile-approximate" title="PERCENTILE is (usually) approximate">usually approximate</a>.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">MEDIAN</code> is also <a href="https://en.wikipedia.org/wiki/Nondeterministic_algorithm" class="ulink" target="_top">non-deterministic</a>.
This means you can get slightly different results using the same data.</p>
</div>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS MEDIAN(salary), PERCENTILE(salary, 50)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">MEDIAN(salary):double</th>
<th align="left" valign="top">PERCENTILE(salary, 50):double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>47003</p></td>
<td align="left" valign="top"><p>47003</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. For example, to calculate the median of
the maximum values of a multivalued column, first use <code class="literal">MV_MAX</code> to get the
maximum value per row, and use the result with the <code class="literal">MEDIAN</code> function:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS median_max_salary_change = MEDIAN(MV_MAX(salary_change))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">median_max_salary_change:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>7.69</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-median-absolute-deviation"></a><code class="literal">MEDIAN_ABSOLUTE_DEVIATION</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/median-absolute-deviation.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">MEDIAN_ABSOLUTE_DEVIATION(expression)</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression from which to return the median absolute deviation.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the median absolute deviation, a measure of variability. It is a robust
statistic, meaning that it is useful for describing data that may have outliers,
or may not be normally distributed. For such data it can be more descriptive
than standard deviation.</p>
<p>It is calculated as the median of each data point&#8217;s deviation from the median of
the entire sample. That is, for a random variable <code class="literal">X</code>, the median absolute
deviation is <code class="literal">median(|median(X) - X|)</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Like <a class="xref" href="esql-functions-operators.html#esql-agg-percentile" title="PERCENTILE"><code class="literal">PERCENTILE</code></a>, <code class="literal">MEDIAN_ABSOLUTE_DEVIATION</code> is
      <a class="xref" href="esql-functions-operators.html#esql-agg-percentile-approximate" title="PERCENTILE is (usually) approximate">usually approximate</a>.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">MEDIAN_ABSOLUTE_DEVIATION</code> is also <a href="https://en.wikipedia.org/wiki/Nondeterministic_algorithm" class="ulink" target="_top">non-deterministic</a>.
This means you can get slightly different results using the same data.</p>
</div>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS MEDIAN(salary), MEDIAN_ABSOLUTE_DEVIATION(salary)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">MEDIAN(salary):double</th>
<th align="left" valign="top">MEDIAN_ABSOLUTE_DEVIATION(salary):double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>47003</p></td>
<td align="left" valign="top"><p>10096.5</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. For example, to calculate the the
median absolute deviation of the maximum values of a multivalued column, first
use <code class="literal">MV_MAX</code> to get the maximum value per row, and use the result with the
<code class="literal">MEDIAN_ABSOLUTE_DEVIATION</code> function:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS m_a_d_max_salary_change = MEDIAN_ABSOLUTE_DEVIATION(MV_MAX(salary_change))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">m_a_d_max_salary_change:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>5.69</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-min"></a><code class="literal">MIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/min.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">MIN(expression)</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression from which to return the minimum value.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the minimum value of a numeric expression.</p>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS MIN(languages)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">MIN(languages):integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. For example, to calculate the minimum
over an average of a multivalued column, use <code class="literal">MV_AVG</code> to first average the
multiple values per row, and use the result with the <code class="literal">MIN</code> function:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS min_avg_salary_change = MIN(MV_AVG(salary_change))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">min_avg_salary_change:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>-8.46</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-percentile"></a><code class="literal">PERCENTILE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/percentile.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">PERCENTILE(expression, percentile)</pre>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression from which to return a percentile.
</dd>
<dt>
<span class="term">
<code class="literal">percentile</code>
</span>
</dt>
<dd>
A constant numeric expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the value at which a certain percentage of observed values occur. For
example, the 95th percentile is the value which is greater than 95% of the
observed values and the 50th percentile is the <a class="xref" href="esql-functions-operators.html#esql-agg-median" title="MEDIAN"><code class="literal">MEDIAN</code></a>.</p>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS p0 = PERCENTILE(salary,  0)
     , p50 = PERCENTILE(salary, 50)
     , p99 = PERCENTILE(salary, 99)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">p0:double</th>
<th align="left" valign="top">p50:double</th>
<th align="left" valign="top">p99:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>25324</p></td>
<td align="left" valign="top"><p>47003</p></td>
<td align="left" valign="top"><p>74970.29</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. For example, to calculate a percentile
of the maximum values of a multivalued column, first use <code class="literal">MV_MAX</code> to get the
maximum value per row, and use the result with the <code class="literal">PERCENTILE</code> function:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS p80_max_salary_change = PERCENTILE(MV_MAX(salary_change), 80)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">p80_max_salary_change:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>12.132</p></td>
</tr>
</tbody>
</table>
</div>
<h4><a id="esql-agg-percentile-approximate"></a><code class="literal">PERCENTILE</code> is (usually) approximate<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/percentile.asciidoc">edit</a></h4>
<p>There are many different algorithms to calculate percentiles. The naive
implementation simply stores all the values in a sorted array. To find the 50th
percentile, you simply find the value that is at <code class="literal">my_array[count(my_array) * 0.5]</code>.</p>
<p>Clearly, the naive implementation does not scale&#8201;&#8212;&#8201;the sorted array grows
linearly with the number of values in your dataset. To calculate percentiles
across potentially billions of values in an Elasticsearch cluster, <em>approximate</em>
percentiles are calculated.</p>
<p>The algorithm used by the <code class="literal">percentile</code> metric is called TDigest (introduced by
Ted Dunning in
<a href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf" class="ulink" target="_top">Computing Accurate Quantiles using T-Digests</a>).</p>
<p>When using this metric, there are a few guidelines to keep in mind:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Accuracy is proportional to <code class="literal">q(1-q)</code>. This means that extreme percentiles (e.g. 99%)
are more accurate than less extreme percentiles, such as the median
</li>
<li class="listitem">
For small sets of values, percentiles are highly accurate (and potentially
100% accurate if the data is small enough).
</li>
<li class="listitem">
As the quantity of values in a bucket grows, the algorithm begins to approximate
the percentiles. It is effectively trading accuracy for memory savings. The
exact level of inaccuracy is difficult to generalize, since it depends on your
data distribution and volume of data being aggregated
</li>
</ul>
</div>
<p>The following chart shows the relative error on a uniform distribution depending
on the number of collected values and the requested percentile:</p>
<p><span class="image"><img src="images/percentiles_error.png" alt="percentiles error"></span></p>
<p>It shows how precision is better for extreme percentiles. The reason why error diminishes
for large number of values is that the law of large numbers makes the distribution of
values more and more uniform and the t-digest tree can do a better job at summarizing
it. It would not be the case on more skewed distributions.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">PERCENTILE</code> is also <a href="https://en.wikipedia.org/wiki/Nondeterministic_algorithm" class="ulink" target="_top">non-deterministic</a>.
This means you can get slightly different results using the same data.</p>
</div>
</div>
<h3><a id="esql-agg-st-centroid"></a><code class="literal">ST_CENTROID_AGG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/st_centroid_agg.asciidoc">edit</a></h3>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Calculate the spatial centroid over a field with spatial point geometry type.</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM airports
| STATS centroid=ST_CENTROID_AGG(location)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">centroid:geo_point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>POINT(-0.030548143003023033 24.37553649504829)</p></td>
</tr>
</tbody>
</table>
</div>
<p>Supported types:</p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">v</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-sum"></a><code class="literal">SUM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/sum.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">SUM(expression)</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Numeric expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the sum of a numeric expression.</p>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS SUM(languages)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">SUM(languages):long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>281</p></td>
</tr>
</tbody>
</table>
</div>
<p>The expression can use inline functions. For example, to calculate
the sum of each employee&#8217;s maximum salary changes, apply the
<code class="literal">MV_MAX</code> function to each row and then sum the results:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS total_salary_changes = SUM(MV_MAX(salary_change))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">total_salary_changes:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>446.75</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-top"></a><code class="literal">TOP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/top.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="504" height="46" viewbox="0 0 504 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">TOP</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="80" height="36" rx="7"/><text class="k" x="123" y="31">field</text><rect class="s" x="203" y="5" width="32" height="36" rx="7"/><text class="syn" x="213" y="31">,</text><rect class="s" x="245" y="5" width="80" height="36" rx="7"/><text class="k" x="255" y="31">limit</text><rect class="s" x="335" y="5" width="32" height="36" rx="7"/><text class="syn" x="345" y="31">,</text><rect class="s" x="377" y="5" width="80" height="36" rx="7"/><text class="k" x="387" y="31">order</text><rect class="s" x="467" y="5" width="32" height="36" rx="7"/><text class="syn" x="477" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
The field to collect the top values for.
</dd>
<dt>
<span class="term">
<code class="literal">limit</code>
</span>
</dt>
<dd>
The maximum number of values to collect.
</dd>
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
The order to calculate the top values. Either <code class="literal">asc</code> or <code class="literal">desc</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Collects the top values for a field. Includes repeated values.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">limit</th>
<th align="left" valign="top">order</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS top_salaries = TOP(salary, 3, "desc"), top_salary = MAX(salary)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">top_salaries:integer</th>
<th align="left" valign="top">top_salary:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[74999, 74970, 74572]</p></td>
<td align="left" valign="top"><p>74999</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-values"></a><code class="literal">VALUES</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/values.asciidoc">edit</a></h3>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not use <code class="literal">VALUES</code> on production environments. This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">VALUES(expression)</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Expression of any type except <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code>, or <code class="literal">cartesian_shape</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns all values in a group as a multivalued field. The order of the returned values isn&#8217;t guaranteed.
If you need the values returned in order use <a class="xref" href="esql-functions-operators.html#esql-mv_sort" title="MV_SORT"><code class="literal">MV_SORT</code></a>.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This can use a significant amount of memory and ES|QL doesn&#8217;t yet
         grow aggregations beyond memory. So this aggregation will work until
         it is used to collect more values than can fit into memory. Once it
         collects too many values it will fail the query with
         a <a class="xref" href="circuit-breaker-errors.html" title="Circuit breaker errors">Circuit Breaker Error</a>.</p>
</div>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">  FROM employees
| EVAL first_letter = SUBSTRING(first_name, 0, 1)
| STATS first_name=MV_SORT(VALUES(first_name)) BY first_letter
| SORT first_letter</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">first_letter:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[Alejandro, Amabile, Anneke, Anoosh, Arumugam]</p></td>
<td align="left" valign="top"><p>A</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Basil, Berhard, Berni, Bezalel, Bojan, Breannda, Brendon]</p></td>
<td align="left" valign="top"><p>B</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Charlene, Chirstian, Claudi, Cristinel]</p></td>
<td align="left" valign="top"><p>C</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Danel, Divier, Domenick, Duangkaew]</p></td>
<td align="left" valign="top"><p>D</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Ebbe, Eberhardt, Erez]</p></td>
<td align="left" valign="top"><p>E</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Florian</p></td>
<td align="left" valign="top"><p>F</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Gao, Georgi, Georgy, Gino, Guoxiang]</p></td>
<td align="left" valign="top"><p>G</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Heping, Hidefumi, Hilari, Hironobu, Hironoby, Hisao]</p></td>
<td align="left" valign="top"><p>H</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Jayson, Jungsoon]</p></td>
<td align="left" valign="top"><p>J</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Kazuhide, Kazuhito, Kendra, Kenroku, Kshitij, Kwee, Kyoichi]</p></td>
<td align="left" valign="top"><p>K</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Lillian, Lucien]</p></td>
<td align="left" valign="top"><p>L</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Magy, Margareta, Mary, Mayuko, Mayumi, Mingsen, Mokhtar, Mona, Moss]</p></td>
<td align="left" valign="top"><p>M</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Otmar</p></td>
<td align="left" valign="top"><p>O</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Parto, Parviz, Patricio, Prasadram, Premal]</p></td>
<td align="left" valign="top"><p>P</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Ramzi, Remzi, Reuven]</p></td>
<td align="left" valign="top"><p>R</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Sailaja, Saniya, Sanjiv, Satosi, Shahaf, Shir, Somnath, Sreekrishna, Sudharsan, Sumant, Suzette]</p></td>
<td align="left" valign="top"><p>S</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Tse, Tuval, Tzvetan]</p></td>
<td align="left" valign="top"><p>T</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Udi, Uri]</p></td>
<td align="left" valign="top"><p>U</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Valdiodio, Valter, Vishv]</p></td>
<td align="left" valign="top"><p>V</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Weiyi</p></td>
<td align="left" valign="top"><p>W</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Xinglin</p></td>
<td align="left" valign="top"><p>X</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Yinghua, Yishay, Yongqiao]</p></td>
<td align="left" valign="top"><p>Y</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[Zhongwei, Zvonko]</p></td>
<td align="left" valign="top"><p>Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>null</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-agg-weighted-avg"></a><code class="literal">WEIGHTED_AVG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/weighted-avg.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">WEIGHTED_AVG(expression, weight)</pre>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">expression</code>
</span>
</dt>
<dd>
Numeric expression.
</dd>
<dt>
<span class="term">
<code class="literal">weight</code>
</span>
</dt>
<dd>
Numeric weight.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>The weighted average of a numeric expression.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<p>The result is always a <code class="literal">double</code> no matter the input type.</p>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS w_avg = WEIGHTED_AVG(salary, height) by languages
| EVAL w_avg = ROUND(w_avg)
| KEEP w_avg, languages
| SORT languages</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">w_avg:double</th>
<th align="left" valign="top">languages:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>51464.0</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>48477.0</p></td>
<td align="left" valign="top"><p>2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>52379.0</p></td>
<td align="left" valign="top"><p>3</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>47990.0</p></td>
<td align="left" valign="top"><p>4</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>42119.0</p></td>
<td align="left" valign="top"><p>5</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>52142.0</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-group-functions"></a>ES|QL grouping functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/grouping-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>The <a class="xref" href="esql-commands.html#esql-stats-by" title="STATS ... BY"><code class="literal">STATS ... BY</code></a> command supports these grouping functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-bucket" title="BUCKET"><code class="literal">BUCKET</code></a>
</li>
</ul>
</div>
<h3><a id="esql-bucket"></a><code class="literal">BUCKET</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/bucket.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="648" height="46" viewbox="0 0 648 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m80 0h10m32 0h10m104 0h10m32 0h10m68 0h10m32 0h10m44 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">BUCKET</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="80" height="36" rx="7"/><text class="k" x="159" y="31">field</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">,</text><rect class="s" x="281" y="5" width="104" height="36" rx="7"/><text class="k" x="291" y="31">buckets</text><rect class="s" x="395" y="5" width="32" height="36" rx="7"/><text class="syn" x="405" y="31">,</text><rect class="s" x="437" y="5" width="68" height="36" rx="7"/><text class="k" x="447" y="31">from</text><rect class="s" x="515" y="5" width="32" height="36" rx="7"/><text class="syn" x="525" y="31">,</text><rect class="s" x="557" y="5" width="44" height="36" rx="7"/><text class="k" x="567" y="31">to</text><rect class="s" x="611" y="5" width="32" height="36" rx="7"/><text class="syn" x="621" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Numeric or date expression from which to derive buckets.
</dd>
<dt>
<span class="term">
<code class="literal">buckets</code>
</span>
</dt>
<dd>
Target number of buckets.
</dd>
<dt>
<span class="term">
<code class="literal">from</code>
</span>
</dt>
<dd>
Start of the range. Can be a number or a date expressed as a string.
</dd>
<dt>
<span class="term">
<code class="literal">to</code>
</span>
</dt>
<dd>
End of the range. Can be a number or a date expressed as a string.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Creates groups of values - buckets - out of a datetime or numeric input. The size of the buckets can either be provided directly, or chosen based on a recommended count and values range.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">buckets</th>
<th align="left" valign="top">from</th>
<th align="left" valign="top">to</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<p><code class="literal">BUCKET</code> can work in two modes: one in which the size of the bucket is computed
based on a buckets count recommendation (four parameters) and a range, and
another in which the bucket size is provided directly (two parameters).</p>
<p>Using a target number of buckets, a start of a range, and an end of a range,
<code class="literal">BUCKET</code> picks an appropriate bucket size to generate the target number of buckets or fewer.
For example, asking for at most 20 buckets over a year results in monthly buckets:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE hire_date &gt;= "1985-01-01T00:00:00Z" AND hire_date &lt; "1986-01-01T00:00:00Z"
| STATS hire_date = MV_SORT(VALUES(hire_date)) BY month = BUCKET(hire_date, 20, "1985-01-01T00:00:00Z", "1986-01-01T00:00:00Z")
| SORT hire_date</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">hire_date:date</th>
<th align="left" valign="top">month:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[1985-02-18T00:00:00.000Z, 1985-02-24T00:00:00.000Z]</p></td>
<td align="left" valign="top"><p>1985-02-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1985-05-13T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1985-05-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1985-07-09T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1985-07-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1985-09-17T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1985-09-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[1985-10-14T00:00:00.000Z, 1985-10-20T00:00:00.000Z]</p></td>
<td align="left" valign="top"><p>1985-10-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>[1985-11-19T00:00:00.000Z, 1985-11-20T00:00:00.000Z, 1985-11-21T00:00:00.000Z]</p></td>
<td align="left" valign="top"><p>1985-11-01T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<p>The goal isn&#8217;t to provide <span class="strong strong"><strong>exactly</strong></span> the target number of buckets,
it&#8217;s to pick a range that people are comfortable with that provides at most the target number of buckets.</p>
<p>Combine <code class="literal">BUCKET</code> with an <a class="xref" href="esql-functions-operators.html#esql-agg-functions" title="ES|QL aggregate functions">aggregation</a> to create a histogram:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE hire_date &gt;= "1985-01-01T00:00:00Z" AND hire_date &lt; "1986-01-01T00:00:00Z"
| STATS hires_per_month = COUNT(*) BY month = BUCKET(hire_date, 20, "1985-01-01T00:00:00Z", "1986-01-01T00:00:00Z")
| SORT month</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">hires_per_month:long</th>
<th align="left" valign="top">month:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>1985-02-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-05-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-07-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-09-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>1985-10-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>1985-11-01T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">BUCKET</code> does not create buckets that don&#8217;t match any documents.
That&#8217;s why this example is missing <code class="literal">1985-03-01</code> and other dates.</p>
</div>
</div>
<p>Asking for more buckets can result in a smaller range.
For example, asking for at most 100 buckets in a year results in weekly buckets:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE hire_date &gt;= "1985-01-01T00:00:00Z" AND hire_date &lt; "1986-01-01T00:00:00Z"
| STATS hires_per_week = COUNT(*) BY week = BUCKET(hire_date, 100, "1985-01-01T00:00:00Z", "1986-01-01T00:00:00Z")
| SORT week</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">hires_per_week:long</th>
<th align="left" valign="top">week:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>1985-02-18T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-05-13T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-07-08T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-09-16T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>1985-10-14T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>1985-11-18T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">BUCKET</code> does not filter any rows. It only uses the provided range to pick a good bucket size.
For rows with a value outside of the range, it returns a bucket value that corresponds to a bucket outside the range.
Combine`BUCKET` with <a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> to filter rows.</p>
</div>
</div>
<p>If the desired bucket size is known in advance, simply provide it as the second
argument, leaving the range out:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE hire_date &gt;= "1985-01-01T00:00:00Z" AND hire_date &lt; "1986-01-01T00:00:00Z"
| STATS hires_per_week = COUNT(*) BY week = BUCKET(hire_date, 1 week)
| SORT week</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">hires_per_week:long</th>
<th align="left" valign="top">week:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>1985-02-18T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-05-13T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-07-08T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1985-09-16T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>1985-10-14T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>1985-11-18T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When providing the bucket size as the second parameter, it must be a time
duration or date period.</p>
</div>
</div>
<p><code class="literal">BUCKET</code> can also operate on numeric fields. For example, to create a salary histogram:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS COUNT(*) by bs = BUCKET(salary, 20, 25324, 74999)
| SORT bs</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">COUNT(*):long</th>
<th align="left" valign="top">bs:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>9</p></td>
<td align="left" valign="top"><p>25000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>9</p></td>
<td align="left" valign="top"><p>30000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>18</p></td>
<td align="left" valign="top"><p>35000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>11</p></td>
<td align="left" valign="top"><p>40000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>11</p></td>
<td align="left" valign="top"><p>45000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>50000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>7</p></td>
<td align="left" valign="top"><p>55000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>9</p></td>
<td align="left" valign="top"><p>60000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>8</p></td>
<td align="left" valign="top"><p>65000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>8</p></td>
<td align="left" valign="top"><p>70000.0</p></td>
</tr>
</tbody>
</table>
</div>
<p>Unlike the earlier example that intentionally filters on a date range, you rarely want to filter on a numeric range.
You have to find the <code class="literal">min</code> and <code class="literal">max</code> separately. ES|QL doesn&#8217;t yet have an easy way to do that automatically.</p>
<p>The range can be omitted if the desired bucket size is known in advance. Simply
provide it as the second argument:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE hire_date &gt;= "1985-01-01T00:00:00Z" AND hire_date &lt; "1986-01-01T00:00:00Z"
| STATS c = COUNT(1) BY b = BUCKET(salary, 5000.)
| SORT b</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">c:long</th>
<th align="left" valign="top">b:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>25000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>30000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>40000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>45000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>50000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>55000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>60000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>65000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>70000.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When providing the bucket size as the second parameter, it must be
of a floating point type.</p>
</div>
</div>
<p>Create hourly buckets for the last 24 hours, and calculate the number of events per hour:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM sample_data
| WHERE @timestamp &gt;= NOW() - 1 day and @timestamp &lt; NOW()
| STATS COUNT(*) BY bucket = BUCKET(@timestamp, 25, NOW() - 1 day, NOW())</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">COUNT(*):long</th>
<th align="left" valign="top">bucket:date</th>
</tr>
</thead>
</table>
</div>
<p>Create monthly buckets for the year 1985, and calculate the average salary by hiring month</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE hire_date &gt;= "1985-01-01T00:00:00Z" AND hire_date &lt; "1986-01-01T00:00:00Z"
| STATS AVG(salary) BY bucket = BUCKET(hire_date, 20, "1985-01-01T00:00:00Z", "1986-01-01T00:00:00Z")
| SORT bucket</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">AVG(salary):double</th>
<th align="left" valign="top">bucket:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>46305.0</p></td>
<td align="left" valign="top"><p>1985-02-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>44817.0</p></td>
<td align="left" valign="top"><p>1985-05-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>62405.0</p></td>
<td align="left" valign="top"><p>1985-07-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>49095.0</p></td>
<td align="left" valign="top"><p>1985-09-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>51532.0</p></td>
<td align="left" valign="top"><p>1985-10-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>54539.75</p></td>
<td align="left" valign="top"><p>1985-11-01T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<p><code class="literal">BUCKET</code> may be used in both the aggregating and grouping part of the
<a class="xref" href="esql-commands.html#esql-stats-by" title="STATS ... BY">STATS &#8230;&#8203; BY &#8230;&#8203;</a> command provided that in the aggregating
part the function is referenced by an alias defined in the
grouping part, or that it is invoked with the exact same expression:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| STATS s1 = b1 + 1, s2 = BUCKET(salary / 1000 + 999, 50.) + 2 BY b1 = BUCKET(salary / 100 + 99, 50.), b2 = BUCKET(salary / 1000 + 999, 50.)
| SORT b1, b2
| KEEP s1, b1, s2, b2</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">s1:double</th>
<th align="left" valign="top">b1:double</th>
<th align="left" valign="top">s2:double</th>
<th align="left" valign="top">b2:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>351.0</p></td>
<td align="left" valign="top"><p>350.0</p></td>
<td align="left" valign="top"><p>1002.0</p></td>
<td align="left" valign="top"><p>1000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>401.0</p></td>
<td align="left" valign="top"><p>400.0</p></td>
<td align="left" valign="top"><p>1002.0</p></td>
<td align="left" valign="top"><p>1000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>451.0</p></td>
<td align="left" valign="top"><p>450.0</p></td>
<td align="left" valign="top"><p>1002.0</p></td>
<td align="left" valign="top"><p>1000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>501.0</p></td>
<td align="left" valign="top"><p>500.0</p></td>
<td align="left" valign="top"><p>1002.0</p></td>
<td align="left" valign="top"><p>1000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>551.0</p></td>
<td align="left" valign="top"><p>550.0</p></td>
<td align="left" valign="top"><p>1002.0</p></td>
<td align="left" valign="top"><p>1000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>601.0</p></td>
<td align="left" valign="top"><p>600.0</p></td>
<td align="left" valign="top"><p>1002.0</p></td>
<td align="left" valign="top"><p>1000.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>601.0</p></td>
<td align="left" valign="top"><p>600.0</p></td>
<td align="left" valign="top"><p>1052.0</p></td>
<td align="left" valign="top"><p>1050.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>651.0</p></td>
<td align="left" valign="top"><p>650.0</p></td>
<td align="left" valign="top"><p>1052.0</p></td>
<td align="left" valign="top"><p>1050.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>701.0</p></td>
<td align="left" valign="top"><p>700.0</p></td>
<td align="left" valign="top"><p>1052.0</p></td>
<td align="left" valign="top"><p>1050.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>751.0</p></td>
<td align="left" valign="top"><p>750.0</p></td>
<td align="left" valign="top"><p>1052.0</p></td>
<td align="left" valign="top"><p>1050.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>801.0</p></td>
<td align="left" valign="top"><p>800.0</p></td>
<td align="left" valign="top"><p>1052.0</p></td>
<td align="left" valign="top"><p>1050.0</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-conditional-functions-and-expressions"></a>ES|QL conditional functions and expressions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/conditional-functions-and-expressions.asciidoc">edit</a></h3>
</div></div></div>

<p>Conditional functions return one of their arguments by evaluating in an if-else
manner. ES|QL supports these conditional functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-case" title="CASE"><code class="literal">CASE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-coalesce" title="COALESCE"><code class="literal">COALESCE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-greatest" title="GREATEST"><code class="literal">GREATEST</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-least" title="LEAST"><code class="literal">LEAST</code></a>
</li>
</ul>
</div>
<h3><a id="esql-case"></a><code class="literal">CASE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/case.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="480" height="46" viewbox="0 0 480 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m128 0h10m32 0h10m128 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">CASE</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="128" height="36" rx="7"/><text class="k" x="135" y="31">condition</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="128" height="36" rx="7"/><text class="k" x="315" y="31">trueValue</text><rect class="s" x="443" y="5" width="32" height="36" rx="7"/><text class="syn" x="453" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">condition</code>
</span>
</dt>
<dd>
A condition.
</dd>
<dt>
<span class="term">
<code class="literal">trueValue</code>
</span>
</dt>
<dd>
The value that&#8217;s returned when the corresponding condition is the first to evaluate to <code class="literal">true</code>. The default value is returned when no condition matches.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Accepts pairs of conditions and values. The function returns the value that belongs to the first condition that evaluates to <code class="literal">true</code>.  If the number of arguments is odd, the last argument is the default value which is returned when no condition matches. If the number of arguments is even, and no condition matches, the function returns <code class="literal">null</code>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">condition</th>
<th align="left" valign="top">trueValue</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<p>Determine whether employees are monolingual, bilingual, or polyglot:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| EVAL type = CASE(
    languages &lt;= 1, "monolingual",
    languages &lt;= 2, "bilingual",
     "polyglot")
| KEEP emp_no, languages, type</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">emp_no:integer</th>
<th align="left" valign="top">languages:integer</th>
<th align="left" valign="top">type:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10001</p></td>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>bilingual</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10002</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>polyglot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10003</p></td>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>polyglot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10004</p></td>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>polyglot</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10005</p></td>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>monolingual</p></td>
</tr>
</tbody>
</table>
</div>
<p>Calculate the total connection success rate based on log messages:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM sample_data
| EVAL successful = CASE(
    STARTS_WITH(message, "Connected to"), 1,
    message == "Connection error", 0
  )
| STATS success_rate = AVG(successful)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">success_rate:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>0.5</p></td>
</tr>
</tbody>
</table>
</div>
<p>Calculate an hourly error rate as a percentage of the total number of log messages:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM sample_data
| EVAL error = CASE(message LIKE "*error*", 1, 0)
| EVAL hour = DATE_TRUNC(1 hour, @timestamp)
| STATS error_rate = AVG(error) by hour
| SORT hour</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">error_rate:double</th>
<th align="left" valign="top">hour:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>0.0</p></td>
<td align="left" valign="top"><p>2023-10-23T12:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>0.6</p></td>
<td align="left" valign="top"><p>2023-10-23T13:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-coalesce"></a><code class="literal">COALESCE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/coalesce.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="420" height="46" viewbox="0 0 420 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m80 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">COALESCE</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="80" height="36" rx="7"/><text class="k" x="183" y="31">first</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="68" height="36" rx="7"/><text class="k" x="315" y="31">rest</text><rect class="s" x="383" y="5" width="32" height="36" rx="7"/><text class="syn" x="393" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">first</code>
</span>
</dt>
<dd>
Expression to evaluate.
</dd>
<dt>
<span class="term">
<code class="literal">rest</code>
</span>
</dt>
<dd>
Other expression to evaluate.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the first of its arguments that is not null. If all arguments are null, it returns <code class="literal">null</code>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first</th>
<th align="left" valign="top">rest</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=null, b="b"
| EVAL COALESCE(a, b)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:null</th>
<th align="left" valign="top">b:keyword</th>
<th align="left" valign="top">COALESCE(a, b):keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>null</p></td>
<td align="left" valign="top"><p>b</p></td>
<td align="left" valign="top"><p>b</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-greatest"></a><code class="literal">GREATEST</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/greatest.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="420" height="46" viewbox="0 0 420 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m80 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">GREATEST</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="80" height="36" rx="7"/><text class="k" x="183" y="31">first</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="68" height="36" rx="7"/><text class="k" x="315" y="31">rest</text><rect class="s" x="383" y="5" width="32" height="36" rx="7"/><text class="syn" x="393" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">first</code>
</span>
</dt>
<dd>
First of the columns to evaluate.
</dd>
<dt>
<span class="term">
<code class="literal">rest</code>
</span>
</dt>
<dd>
The rest of the columns to evaluate.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the maximum value from multiple columns. This is similar to <a class="xref" href="esql-functions-operators.html#esql-mv_max" title="MV_MAX"><code class="literal">MV_MAX</code></a> except it is intended to run on multiple columns at once.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When run on <code class="literal">keyword</code> or <code class="literal">text</code> fields, this returns the last string in alphabetical order. When run on <code class="literal">boolean</code> columns this will return <code class="literal">true</code> if any values are <code class="literal">true</code>.</p>
</div>
</div>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first</th>
<th align="left" valign="top">rest</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = 10, b = 20
| EVAL g = GREATEST(a, b)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">b:integer</th>
<th align="left" valign="top">g:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>20</p></td>
<td align="left" valign="top"><p>20</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-least"></a><code class="literal">LEAST</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/least.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="384" height="46" viewbox="0 0 384 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m80 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">LEAST</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="80" height="36" rx="7"/><text class="k" x="147" y="31">first</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">,</text><rect class="s" x="269" y="5" width="68" height="36" rx="7"/><text class="k" x="279" y="31">rest</text><rect class="s" x="347" y="5" width="32" height="36" rx="7"/><text class="syn" x="357" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">first</code>
</span>
</dt>
<dd>
First of the columns to evaluate.
</dd>
<dt>
<span class="term">
<code class="literal">rest</code>
</span>
</dt>
<dd>
The rest of the columns to evaluate.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the minimum value from multiple columns. This is similar to <a class="xref" href="esql-functions-operators.html#esql-mv_min" title="MV_MIN"><code class="literal">MV_MIN</code></a> except it is intended to run on multiple columns at once.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first</th>
<th align="left" valign="top">rest</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = 10, b = 20
| EVAL l = LEAST(a, b)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">b:integer</th>
<th align="left" valign="top">l:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>20</p></td>
<td align="left" valign="top"><p>10</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-date-time-functions"></a>ES|QL date-time functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/date-time-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>ES|QL supports these date-time functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_diff" title="DATE_DIFF"><code class="literal">DATE_DIFF</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_extract" title="DATE_EXTRACT"><code class="literal">DATE_EXTRACT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_format" title="DATE_FORMAT"><code class="literal">DATE_FORMAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_parse" title="DATE_PARSE"><code class="literal">DATE_PARSE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-date_trunc" title="DATE_TRUNC"><code class="literal">DATE_TRUNC</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-now" title="NOW"><code class="literal">NOW</code></a>
</li>
</ul>
</div>
<h3><a id="esql-date_diff"></a><code class="literal">DATE_DIFF</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/date_diff.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="756" height="46" viewbox="0 0 756 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m68 0h10m32 0h10m188 0h10m32 0h10m164 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">DATE_DIFF</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="68" height="36" rx="7"/><text class="k" x="195" y="31">unit</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="188" height="36" rx="7"/><text class="k" x="315" y="31">startTimestamp</text><rect class="s" x="503" y="5" width="32" height="36" rx="7"/><text class="syn" x="513" y="31">,</text><rect class="s" x="545" y="5" width="164" height="36" rx="7"/><text class="k" x="555" y="31">endTimestamp</text><rect class="s" x="719" y="5" width="32" height="36" rx="7"/><text class="syn" x="729" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">unit</code>
</span>
</dt>
<dd>
Time difference unit
</dd>
<dt>
<span class="term">
<code class="literal">startTimestamp</code>
</span>
</dt>
<dd>
A string representing a start timestamp
</dd>
<dt>
<span class="term">
<code class="literal">endTimestamp</code>
</span>
</dt>
<dd>
A string representing an end timestamp
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Subtracts the <code class="literal">startTimestamp</code> from the <code class="literal">endTimestamp</code> and returns the difference in multiples of <code class="literal">unit</code>. If <code class="literal">startTimestamp</code> is later than the <code class="literal">endTimestamp</code>, negative values are returned.</p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="center" colspan="2" valign="top">Datetime difference units</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>unit</strong></span></p></td>
<td align="center" valign="top"><p><span class="strong strong"><strong>abbreviations</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>year</p></td>
<td align="center" valign="top"><p>years, yy, yyyy</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>quarter</p></td>
<td align="center" valign="top"><p>quarters, qq, q</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>month</p></td>
<td align="center" valign="top"><p>months, mm, m</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>dayofyear</p></td>
<td align="center" valign="top"><p>dy, y</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>day</p></td>
<td align="center" valign="top"><p>days, dd, d</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>week</p></td>
<td align="center" valign="top"><p>weeks, wk, ww</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>weekday</p></td>
<td align="center" valign="top"><p>weekdays, dw</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>hour</p></td>
<td align="center" valign="top"><p>hours, hh</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>minute</p></td>
<td align="center" valign="top"><p>minutes, mi, n</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>second</p></td>
<td align="center" valign="top"><p>seconds, ss, s</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>millisecond</p></td>
<td align="center" valign="top"><p>milliseconds, ms</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>microsecond</p></td>
<td align="center" valign="top"><p>microseconds, mcs</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>nanosecond</p></td>
<td align="center" valign="top"><p>nanoseconds, ns</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that while there is an overlap between the function&#8217;s supported units and
ES|QL&#8217;s supported time span literals, these sets are distinct and not
interchangeable. Similarly, the supported abbreviations are conveniently shared
with implementations of this function in other established products and not
necessarily common with the date-time nomenclature used by Elasticsearch.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">unit</th>
<th align="left" valign="top">startTimestamp</th>
<th align="left" valign="top">endTimestamp</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW date1 = TO_DATETIME("2023-12-02T11:00:00.000Z"), date2 = TO_DATETIME("2023-12-02T11:00:00.001Z")
| EVAL dd_ms = DATE_DIFF("microseconds", date1, date2)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">date1:date</th>
<th align="left" valign="top">date2:date</th>
<th align="left" valign="top">dd_ms:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2023-12-02T11:00:00.000Z</p></td>
<td align="left" valign="top"><p>2023-12-02T11:00:00.001Z</p></td>
<td align="left" valign="top"><p>1000</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-date_extract"></a><code class="literal">DATE_EXTRACT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/date_extract.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="504" height="46" viewbox="0 0 504 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m164 0h10m32 0h10m116 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="164" height="36"/><text class="k" x="15" y="31">DATE_EXTRACT</text><rect class="s" x="179" y="5" width="32" height="36" rx="7"/><text class="syn" x="189" y="31">(</text><rect class="s" x="221" y="5" width="116" height="36" rx="7"/><text class="k" x="231" y="31">datePart</text><rect class="s" x="347" y="5" width="32" height="36" rx="7"/><text class="syn" x="357" y="31">,</text><rect class="s" x="389" y="5" width="68" height="36" rx="7"/><text class="k" x="399" y="31">date</text><rect class="s" x="467" y="5" width="32" height="36" rx="7"/><text class="syn" x="477" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">datePart</code>
</span>
</dt>
<dd>
Part of the date to extract.  Can be: <code class="literal">aligned_day_of_week_in_month</code>, <code class="literal">aligned_day_of_week_in_year</code>, <code class="literal">aligned_week_of_month</code>, <code class="literal">aligned_week_of_year</code>, <code class="literal">ampm_of_day</code>, <code class="literal">clock_hour_of_ampm</code>, <code class="literal">clock_hour_of_day</code>, <code class="literal">day_of_month</code>, <code class="literal">day_of_week</code>, <code class="literal">day_of_year</code>, <code class="literal">epoch_day</code>, <code class="literal">era</code>, <code class="literal">hour_of_ampm</code>, <code class="literal">hour_of_day</code>, <code class="literal">instant_seconds</code>, <code class="literal">micro_of_day</code>, <code class="literal">micro_of_second</code>, <code class="literal">milli_of_day</code>, <code class="literal">milli_of_second</code>, <code class="literal">minute_of_day</code>, <code class="literal">minute_of_hour</code>, <code class="literal">month_of_year</code>, <code class="literal">nano_of_day</code>, <code class="literal">nano_of_second</code>, <code class="literal">offset_seconds</code>, <code class="literal">proleptic_month</code>, <code class="literal">second_of_day</code>, <code class="literal">second_of_minute</code>, <code class="literal">year</code>, or <code class="literal">year_of_era</code>. Refer to <a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoField.html" class="ulink" target="_top">java.time.temporal.ChronoField</a> for a description of these values.  If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">date</code>
</span>
</dt>
<dd>
Date expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Extracts parts of a date, like year, month, day, hour.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">datePart</th>
<th align="left" valign="top">date</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW date = DATE_PARSE("yyyy-MM-dd", "2022-05-06")
| EVAL year = DATE_EXTRACT("year", date)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">date:date</th>
<th align="left" valign="top">year:long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2022-05-06T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>2022</p></td>
</tr>
</tbody>
</table>
</div>
<p>Find all events that occurred outside of business hours (before 9 AM or after 5PM), on any given date:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM sample_data
| WHERE DATE_EXTRACT("hour_of_day", @timestamp) &lt; 9 AND DATE_EXTRACT("hour_of_day", @timestamp) &gt;= 17</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">@timestamp:date</th>
<th align="left" valign="top">client_ip:ip</th>
<th align="left" valign="top">event_duration:long</th>
<th align="left" valign="top">message:keyword</th>
</tr>
</thead>
</table>
</div>
<h3><a id="esql-date_format"></a><code class="literal">DATE_FORMAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/date_format.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="516" height="46" viewbox="0 0 516 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m140 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">DATE_FORMAT</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="140" height="36" rx="7"/><text class="k" x="219" y="31">dateFormat</text><rect class="s" x="359" y="5" width="32" height="36" rx="7"/><text class="syn" x="369" y="31">,</text><rect class="s" x="401" y="5" width="68" height="36" rx="7"/><text class="k" x="411" y="31">date</text><rect class="s" x="479" y="5" width="32" height="36" rx="7"/><text class="syn" x="489" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">dateFormat</code>
</span>
</dt>
<dd>
Date format (optional).  If no format is specified, the <code class="literal">yyyy-MM-dd'T'HH:mm:ss.SSSZ</code> format is used. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">date</code>
</span>
</dt>
<dd>
Date expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a string representation of a date, in the provided format.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">dateFormat</th>
<th align="left" valign="top">date</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP first_name, last_name, hire_date
| EVAL hired = DATE_FORMAT("YYYY-MM-dd", hire_date)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">hire_date:date</th>
<th align="left" valign="top">hired:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Alejandro</p></td>
<td align="left" valign="top"><p>McAlpine</p></td>
<td align="left" valign="top"><p>1991-06-26T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1991-06-26</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Amabile</p></td>
<td align="left" valign="top"><p>Gomatam</p></td>
<td align="left" valign="top"><p>1992-11-18T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1992-11-18</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Anneke</p></td>
<td align="left" valign="top"><p>Preusig</p></td>
<td align="left" valign="top"><p>1989-06-02T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1989-06-02</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-date_parse"></a><code class="literal">DATE_PARSE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/date_parse.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="588" height="46" viewbox="0 0 588 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m152 0h10m32 0h10m140 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">DATE_PARSE</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="152" height="36" rx="7"/><text class="k" x="207" y="31">datePattern</text><rect class="s" x="359" y="5" width="32" height="36" rx="7"/><text class="syn" x="369" y="31">,</text><rect class="s" x="401" y="5" width="140" height="36" rx="7"/><text class="k" x="411" y="31">dateString</text><rect class="s" x="551" y="5" width="32" height="36" rx="7"/><text class="syn" x="561" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">datePattern</code>
</span>
</dt>
<dd>
The date format. Refer to the <a href="https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/time/format/DateTimeFormatter.html" class="ulink" target="_top"><code class="literal">DateTimeFormatter</code> documentation</a> for the syntax. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">dateString</code>
</span>
</dt>
<dd>
Date expression as a string. If <code class="literal">null</code> or an empty string, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a date by parsing the second argument using the format specified in the first argument.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">datePattern</th>
<th align="left" valign="top">dateString</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW date_string = "2022-05-06"
| EVAL date = DATE_PARSE("yyyy-MM-dd", date_string)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">date_string:keyword</th>
<th align="left" valign="top">date:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2022-05-06</p></td>
<td align="left" valign="top"><p>2022-05-06T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-date_trunc"></a><code class="literal">DATE_TRUNC</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/date_trunc.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="480" height="46" viewbox="0 0 480 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m116 0h10m32 0h10m68 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">DATE_TRUNC</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="116" height="36" rx="7"/><text class="k" x="207" y="31">interval</text><rect class="s" x="323" y="5" width="32" height="36" rx="7"/><text class="syn" x="333" y="31">,</text><rect class="s" x="365" y="5" width="68" height="36" rx="7"/><text class="k" x="375" y="31">date</text><rect class="s" x="443" y="5" width="32" height="36" rx="7"/><text class="syn" x="453" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">interval</code>
</span>
</dt>
<dd>
Interval; expressed using the timespan literal syntax.
</dd>
<dt>
<span class="term">
<code class="literal">date</code>
</span>
</dt>
<dd>
Date expression
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Rounds down a date to the closest interval.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">interval</th>
<th align="left" valign="top">date</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP first_name, last_name, hire_date
| EVAL year_hired = DATE_TRUNC(1 year, hire_date)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">hire_date:date</th>
<th align="left" valign="top">year_hired:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Alejandro</p></td>
<td align="left" valign="top"><p>McAlpine</p></td>
<td align="left" valign="top"><p>1991-06-26T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1991-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Amabile</p></td>
<td align="left" valign="top"><p>Gomatam</p></td>
<td align="left" valign="top"><p>1992-11-18T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1992-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Anneke</p></td>
<td align="left" valign="top"><p>Preusig</p></td>
<td align="left" valign="top"><p>1989-06-02T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>1989-01-01T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<p>Combine <code class="literal">DATE_TRUNC</code> with <a class="xref" href="esql-commands.html#esql-stats-by" title="STATS ... BY"><code class="literal">STATS ... BY</code></a> to create date histograms. For
example, the number of hires per year:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| EVAL year = DATE_TRUNC(1 year, hire_date)
| STATS hires = COUNT(emp_no) BY year
| SORT year</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">hires:long</th>
<th align="left" valign="top">year:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>11</p></td>
<td align="left" valign="top"><p>1985-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>11</p></td>
<td align="left" valign="top"><p>1986-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>15</p></td>
<td align="left" valign="top"><p>1987-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>9</p></td>
<td align="left" valign="top"><p>1988-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>13</p></td>
<td align="left" valign="top"><p>1989-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>12</p></td>
<td align="left" valign="top"><p>1990-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>6</p></td>
<td align="left" valign="top"><p>1991-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>8</p></td>
<td align="left" valign="top"><p>1992-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>3</p></td>
<td align="left" valign="top"><p>1993-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>1994-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p>1995-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1996-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1997-01-01T00:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>1999-01-01T00:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<p>Or an hourly error rate:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM sample_data
| EVAL error = CASE(message LIKE "*error*", 1, 0)
| EVAL hour = DATE_TRUNC(1 hour, @timestamp)
| STATS error_rate = AVG(error) by hour
| SORT hour</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">error_rate:double</th>
<th align="left" valign="top">hour:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>0.0</p></td>
<td align="left" valign="top"><p>2023-10-23T12:00:00.000Z</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>0.6</p></td>
<td align="left" valign="top"><p>2023-10-23T13:00:00.000Z</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-now"></a><code class="literal">NOW</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/now.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="150" height="46" viewbox="0 0 150 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">NOW</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="32" height="36" rx="7"/><text class="syn" x="123" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns current date and time.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW current_date = NOW()</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">y:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>20</p></td>
</tr>
</tbody>
</table>
</div>
<p>To retrieve logs from the last hour:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM sample_data
| WHERE @timestamp &gt; NOW() - 1 hour</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">@timestamp:date</th>
<th align="left" valign="top">client_ip:ip</th>
<th align="left" valign="top">event_duration:long</th>
<th align="left" valign="top">message:keyword</th>
</tr>
</thead>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-ip-functions"></a>ES|QL IP functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/ip-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>ES|QL supports these IP functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cidr_match" title="CIDR_MATCH"><code class="literal">CIDR_MATCH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ip_prefix" title="IP_PREFIX"><code class="literal">IP_PREFIX</code></a>
</li>
</ul>
</div>
<h3><a id="esql-cidr_match"></a><code class="literal">CIDR_MATCH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/cidr_match.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="432" height="46" viewbox="0 0 432 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m44 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">CIDR_MATCH</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="44" height="36" rx="7"/><text class="k" x="207" y="31">ip</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">,</text><rect class="s" x="293" y="5" width="92" height="36" rx="7"/><text class="k" x="303" y="31">blockX</text><rect class="s" x="395" y="5" width="32" height="36" rx="7"/><text class="syn" x="405" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ip</code>
</span>
</dt>
<dd>
IP address of type <code class="literal">ip</code> (both IPv4 and IPv6 are supported).
</dd>
<dt>
<span class="term">
<code class="literal">blockX</code>
</span>
</dt>
<dd>
CIDR block to test the IP against.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns true if the provided IP is contained in one of the provided CIDR blocks.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">ip</th>
<th align="left" valign="top">blockX</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM hosts
| WHERE CIDR_MATCH(ip1, "127.0.0.2/32", "127.0.0.3/32")
| KEEP card, host, ip0, ip1</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">card:keyword</th>
<th align="left" valign="top">host:keyword</th>
<th align="left" valign="top">ip0:ip</th>
<th align="left" valign="top">ip1:ip</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>eth1</p></td>
<td align="left" valign="top"><p>beta</p></td>
<td align="left" valign="top"><p>127.0.0.1</p></td>
<td align="left" valign="top"><p>127.0.0.2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>eth0</p></td>
<td align="left" valign="top"><p>gamma</p></td>
<td align="left" valign="top"><p>fe80::cae2:65ff:fece:feb9</p></td>
<td align="left" valign="top"><p>127.0.0.3</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-ip_prefix"></a><code class="literal">IP_PREFIX</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/ip_prefix.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="756" height="46" viewbox="0 0 756 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m44 0h10m32 0h10m188 0h10m32 0h10m188 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">IP_PREFIX</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="44" height="36" rx="7"/><text class="k" x="195" y="31">ip</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">,</text><rect class="s" x="281" y="5" width="188" height="36" rx="7"/><text class="k" x="291" y="31">prefixLengthV4</text><rect class="s" x="479" y="5" width="32" height="36" rx="7"/><text class="syn" x="489" y="31">,</text><rect class="s" x="521" y="5" width="188" height="36" rx="7"/><text class="k" x="531" y="31">prefixLengthV6</text><rect class="s" x="719" y="5" width="32" height="36" rx="7"/><text class="syn" x="729" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ip</code>
</span>
</dt>
<dd>
IP address of type <code class="literal">ip</code> (both IPv4 and IPv6 are supported).
</dd>
<dt>
<span class="term">
<code class="literal">prefixLengthV4</code>
</span>
</dt>
<dd>
Prefix length for IPv4 addresses.
</dd>
<dt>
<span class="term">
<code class="literal">prefixLengthV6</code>
</span>
</dt>
<dd>
Prefix length for IPv6 addresses.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Truncates an IP to a given prefix length.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">ip</th>
<th align="left" valign="top">prefixLengthV4</th>
<th align="left" valign="top">prefixLengthV6</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">row ip4 = to_ip("1.2.3.4"), ip6 = to_ip("fe80::cae2:65ff:fece:feb9")
| eval ip4_prefix = ip_prefix(ip4, 24, 0), ip6_prefix = ip_prefix(ip6, 0, 112);</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">ip4:ip</th>
<th align="left" valign="top">ip6:ip</th>
<th align="left" valign="top">ip4_prefix:ip</th>
<th align="left" valign="top">ip6_prefix:ip</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.2.3.4</p></td>
<td align="left" valign="top"><p>fe80::cae2:65ff:fece:feb9</p></td>
<td align="left" valign="top"><p>1.2.3.0</p></td>
<td align="left" valign="top"><p>fe80::cae2:65ff:fece:0000</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-math-functions"></a>ES|QL mathematical functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/math-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>ES|QL supports these mathematical functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-abs" title="ABS"><code class="literal">ABS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-acos" title="ACOS"><code class="literal">ACOS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-asin" title="ASIN"><code class="literal">ASIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-atan" title="ATAN"><code class="literal">ATAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-atan2" title="ATAN2"><code class="literal">ATAN2</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cbrt" title="CBRT"><code class="literal">CBRT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ceil" title="CEIL"><code class="literal">CEIL</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cos" title="COS"><code class="literal">COS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cosh" title="COSH"><code class="literal">COSH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-e" title="E"><code class="literal">E</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-floor" title="FLOOR"><code class="literal">FLOOR</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-log" title="LOG"><code class="literal">LOG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-log10" title="LOG10"><code class="literal">LOG10</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-pi" title="PI"><code class="literal">PI</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-pow" title="POW"><code class="literal">POW</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-round" title="ROUND"><code class="literal">ROUND</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-signum" title="SIGNUM"><code class="literal">SIGNUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-sin" title="SIN"><code class="literal">SIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-sinh" title="SINH"><code class="literal">SINH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-sqrt" title="SQRT"><code class="literal">SQRT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-tan" title="TAN"><code class="literal">TAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-tanh" title="TANH"><code class="literal">TANH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-tau" title="TAU"><code class="literal">TAU</code></a>
</li>
</ul>
</div>
<h3><a id="esql-abs"></a><code class="literal">ABS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/abs.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="252" height="46" viewbox="0 0 252 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">ABS</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="92" height="36" rx="7"/><text class="k" x="123" y="31">number</text><rect class="s" x="215" y="5" width="32" height="36" rx="7"/><text class="syn" x="225" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the absolute value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW number = -1.0
| EVAL abs_number = ABS(number)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number:double</th>
<th align="left" valign="top">abs_number:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>-1.0</p></td>
<td align="left" valign="top"><p>1.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP first_name, last_name, height
| EVAL abs_height = ABS(0.0 - height)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">height:double</th>
<th align="left" valign="top">abs_height:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Alejandro</p></td>
<td align="left" valign="top"><p>McAlpine</p></td>
<td align="left" valign="top"><p>1.48</p></td>
<td align="left" valign="top"><p>1.48</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Amabile</p></td>
<td align="left" valign="top"><p>Gomatam</p></td>
<td align="left" valign="top"><p>2.09</p></td>
<td align="left" valign="top"><p>2.09</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Anneke</p></td>
<td align="left" valign="top"><p>Preusig</p></td>
<td align="left" valign="top"><p>1.56</p></td>
<td align="left" valign="top"><p>1.56</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-acos"></a><code class="literal">ACOS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/acos.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">ACOS</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">number</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Number between -1 and 1. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" class="ulink" target="_top">arccosine</a> of <code class="literal">n</code> as an angle, expressed in radians.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=.9
| EVAL acos=ACOS(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">acos:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>.9</p></td>
<td align="left" valign="top"><p>0.45102681179626236</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-asin"></a><code class="literal">ASIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/asin.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">ASIN</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">number</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Number between -1 and 1. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" class="ulink" target="_top">arcsine</a> of the input numeric expression as an angle, expressed in radians.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=.9
| EVAL asin=ASIN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">asin:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>.9</p></td>
<td align="left" valign="top"><p>1.1197695149986342</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-atan"></a><code class="literal">ATAN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/atan.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">ATAN</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">number</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" class="ulink" target="_top">arctangent</a> of the input numeric expression as an angle, expressed in radians.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=12.9
| EVAL atan=ATAN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">atan:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>12.9</p></td>
<td align="left" valign="top"><p>1.4934316673669235</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-atan2"></a><code class="literal">ATAN2</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/atan2.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="564" height="46" viewbox="0 0 564 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m164 0h10m32 0h10m164 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">ATAN2</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="164" height="36" rx="7"/><text class="k" x="147" y="31">y_coordinate</text><rect class="s" x="311" y="5" width="32" height="36" rx="7"/><text class="syn" x="321" y="31">,</text><rect class="s" x="353" y="5" width="164" height="36" rx="7"/><text class="k" x="363" y="31">x_coordinate</text><rect class="s" x="527" y="5" width="32" height="36" rx="7"/><text class="syn" x="537" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">y_coordinate</code>
</span>
</dt>
<dd>
y coordinate. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">x_coordinate</code>
</span>
</dt>
<dd>
x coordinate. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>The <a href="https://en.wikipedia.org/wiki/Atan2" class="ulink" target="_top">angle</a> between the positive x-axis and the ray from the origin to the point (x , y) in the Cartesian plane, expressed in radians.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">y_coordinate</th>
<th align="left" valign="top">x_coordinate</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW y=12.9, x=.6
| EVAL atan2=ATAN2(y, x)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">y:double</th>
<th align="left" valign="top">x:double</th>
<th align="left" valign="top">atan2:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>12.9</p></td>
<td align="left" valign="top"><p>0.6</p></td>
<td align="left" valign="top"><p>1.5243181954438936</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-cbrt"></a><code class="literal">CBRT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/cbrt.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">CBRT</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">number</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the cube root of a number. The input can be any numeric value, the return value is always a double. Cube roots of infinities are null.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW d = 1000.0
| EVAL c = cbrt(d)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">d: double</th>
<th align="left" valign="top">c:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1000.0</p></td>
<td align="left" valign="top"><p>10.0</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-ceil"></a><code class="literal">CEIL</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/ceil.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">CEIL</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">number</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Round a number up to the nearest integer.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is a noop for <code class="literal">long</code> (including unsigned) and <code class="literal">integer</code>. For <code class="literal">double</code> this picks the closest <code class="literal">double</code> value to the integer similar to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html#ceil(double)" class="ulink" target="_top">Math.ceil</a>.</p>
</div>
</div>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL a=CEIL(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-cos"></a><code class="literal">COS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/cos.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="240" height="46" viewbox="0 0 240 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">COS</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="80" height="36" rx="7"/><text class="k" x="123" y="31">angle</text><rect class="s" x="203" y="5" width="32" height="36" rx="7"/><text class="syn" x="213" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">angle</code>
</span>
</dt>
<dd>
An angle, in radians. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Sine_and_cosine" class="ulink" target="_top">cosine</a> of an angle.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">angle</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL cos=COS(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">cos:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.8</p></td>
<td align="left" valign="top"><p>-0.2272020946930871</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-cosh"></a><code class="literal">COSH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/cosh.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="252" height="46" viewbox="0 0 252 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">COSH</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="80" height="36" rx="7"/><text class="k" x="135" y="31">angle</text><rect class="s" x="215" y="5" width="32" height="36" rx="7"/><text class="syn" x="225" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">angle</code>
</span>
</dt>
<dd>
An angle, in radians. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Hyperbolic_functions" class="ulink" target="_top">hyperbolic cosine</a> of an angle.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">angle</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL cosh=COSH(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">cosh:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.8</p></td>
<td align="left" valign="top"><p>3.1074731763172667</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-e"></a><code class="literal">E</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/e.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="126" height="46" viewbox="0 0 126 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m32 0h10m32 0h10m32 0h5"/><rect class="s" x="5" y="5" width="32" height="36"/><text class="k" x="15" y="31">E</text><rect class="s" x="47" y="5" width="32" height="36" rx="7"/><text class="syn" x="57" y="31">(</text><rect class="s" x="89" y="5" width="32" height="36" rx="7"/><text class="syn" x="99" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns <a href="https://en.wikipedia.org/wiki/E_(mathematical_constant)" class="ulink" target="_top">Euler&#8217;s number</a>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW E()</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">E():double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2.718281828459045</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-floor"></a><code class="literal">FLOOR</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/floor.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">FLOOR</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="92" height="36" rx="7"/><text class="k" x="147" y="31">number</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Round a number down to the nearest integer.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is a noop for <code class="literal">long</code> (including unsigned) and <code class="literal">integer</code>.
For <code class="literal">double</code> this picks the closest <code class="literal">double</code> value to the integer
similar to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html#floor(double)" class="ulink" target="_top">Math.floor</a>.</p>
</div>
</div>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL a=FLOOR(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-log"></a><code class="literal">LOG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/log.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="372" height="46" viewbox="0 0 372 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">LOG</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="68" height="36" rx="7"/><text class="k" x="123" y="31">base</text><rect class="s" x="191" y="5" width="32" height="36" rx="7"/><text class="syn" x="201" y="31">,</text><rect class="s" x="233" y="5" width="92" height="36" rx="7"/><text class="k" x="243" y="31">number</text><rect class="s" x="335" y="5" width="32" height="36" rx="7"/><text class="syn" x="345" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">base</code>
</span>
</dt>
<dd>
Base of logarithm. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. If not provided, this function returns the natural logarithm (base e) of a value.
</dd>
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the logarithm of a value to a base. The input can be any numeric value, the return value is always a double.  Logs of zero, negative numbers, and base of one return <code class="literal">null</code> as well as a warning.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">base</th>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW base = 2.0, value = 8.0
| EVAL s = LOG(base, value)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">base: double</th>
<th align="left" valign="top">value: double</th>
<th align="left" valign="top">s:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2.0</p></td>
<td align="left" valign="top"><p>8.0</p></td>
<td align="left" valign="top"><p>3.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">row value = 100
| EVAL s = LOG(value);</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">value: integer</th>
<th align="left" valign="top">s:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>100</p></td>
<td align="left" valign="top"><p>4.605170185988092</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-log10"></a><code class="literal">LOG10</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/log10.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">LOG10</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="92" height="36" rx="7"/><text class="k" x="147" y="31">number</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the logarithm of a value to base 10. The input can be any numeric value, the return value is always a double.  Logs of 0 and negative numbers return <code class="literal">null</code> as well as a warning.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW d = 1000.0
| EVAL s = LOG10(d)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">d: double</th>
<th align="left" valign="top">s:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1000.0</p></td>
<td align="left" valign="top"><p>3.0</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-pi"></a><code class="literal">PI</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/pi.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="138" height="46" viewbox="0 0 138 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m44 0h10m32 0h10m32 0h5"/><rect class="s" x="5" y="5" width="44" height="36"/><text class="k" x="15" y="31">PI</text><rect class="s" x="59" y="5" width="32" height="36" rx="7"/><text class="syn" x="69" y="31">(</text><rect class="s" x="101" y="5" width="32" height="36" rx="7"/><text class="syn" x="111" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns <a href="https://en.wikipedia.org/wiki/Pi" class="ulink" target="_top">Pi</a>, the ratio of a circle&#8217;s circumference to its diameter.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW PI()</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">PI():double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>3.141592653589793</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-pow"></a><code class="literal">POW</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/pow.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="396" height="46" viewbox="0 0 396 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m68 0h10m32 0h10m116 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">POW</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="68" height="36" rx="7"/><text class="k" x="123" y="31">base</text><rect class="s" x="191" y="5" width="32" height="36" rx="7"/><text class="syn" x="201" y="31">,</text><rect class="s" x="233" y="5" width="116" height="36" rx="7"/><text class="k" x="243" y="31">exponent</text><rect class="s" x="359" y="5" width="32" height="36" rx="7"/><text class="syn" x="369" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">base</code>
</span>
</dt>
<dd>
Numeric expression for the base. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">exponent</code>
</span>
</dt>
<dd>
Numeric expression for the exponent. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the value of <code class="literal">base</code> raised to the power of <code class="literal">exponent</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It is still possible to overflow a double result here; in that case, null will be returned.</p>
</div>
</div>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">base</th>
<th align="left" valign="top">exponent</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW base = 2.0, exponent = 2
| EVAL result = POW(base, exponent)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">base:double</th>
<th align="left" valign="top">exponent:integer</th>
<th align="left" valign="top">result:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2.0</p></td>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>4.0</p></td>
</tr>
</tbody>
</table>
</div>
<p>The exponent can be a fraction, which is similar to performing a root.
For example, the exponent of <code class="literal">0.5</code> will give the square root of the base:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW base = 4, exponent = 0.5
| EVAL s = POW(base, exponent)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">base:integer</th>
<th align="left" valign="top">exponent:double</th>
<th align="left" valign="top">s:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>0.5</p></td>
<td align="left" valign="top"><p>2.0</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-round"></a><code class="literal">ROUND</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/round.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="444" height="46" viewbox="0 0 444 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m92 0h10m32 0h10m116 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">ROUND</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="92" height="36" rx="7"/><text class="k" x="147" y="31">number</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">,</text><rect class="s" x="281" y="5" width="116" height="36" rx="7"/><text class="k" x="291" y="31">decimals</text><rect class="s" x="407" y="5" width="32" height="36" rx="7"/><text class="syn" x="417" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
The numeric value to round. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">decimals</code>
</span>
</dt>
<dd>
The number of decimal places to round to. Defaults to 0. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Rounds a number to the specified number of decimal places. Defaults to 0, which returns the nearest integer. If the precision is a negative number, rounds to the number of digits left of the decimal point.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">decimals</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP first_name, last_name, height
| EVAL height_ft = ROUND(height * 3.281, 1)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">height:double</th>
<th align="left" valign="top">height_ft:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Arumugam</p></td>
<td align="left" valign="top"><p>Ossenbruggen</p></td>
<td align="left" valign="top"><p>2.1</p></td>
<td align="left" valign="top"><p>6.9</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Kwee</p></td>
<td align="left" valign="top"><p>Schusler</p></td>
<td align="left" valign="top"><p>2.1</p></td>
<td align="left" valign="top"><p>6.9</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Saniya</p></td>
<td align="left" valign="top"><p>Kalloufi</p></td>
<td align="left" valign="top"><p>2.1</p></td>
<td align="left" valign="top"><p>6.9</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-signum"></a><code class="literal">SIGNUM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/signum.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="288" height="46" viewbox="0 0 288 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">SIGNUM</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="92" height="36" rx="7"/><text class="k" x="159" y="31">number</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the sign of the given number. It returns <code class="literal">-1</code> for negative numbers, <code class="literal">0</code> for <code class="literal">0</code> and <code class="literal">1</code> for positive numbers.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW d = 100.0
| EVAL s = SIGNUM(d)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">d: double</th>
<th align="left" valign="top">s:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>100</p></td>
<td align="left" valign="top"><p>1.0</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-sin"></a><code class="literal">SIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/sin.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="240" height="46" viewbox="0 0 240 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">SIN</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="80" height="36" rx="7"/><text class="k" x="123" y="31">angle</text><rect class="s" x="203" y="5" width="32" height="36" rx="7"/><text class="syn" x="213" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">angle</code>
</span>
</dt>
<dd>
An angle, in radians. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns ths <a href="https://en.wikipedia.org/wiki/Sine_and_cosine" class="ulink" target="_top">Sine</a> trigonometric function of an angle.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">angle</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL sin=SIN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">sin:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.8</p></td>
<td align="left" valign="top"><p>0.9738476308781951</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-sinh"></a><code class="literal">SINH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/sinh.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="252" height="46" viewbox="0 0 252 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">SINH</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="80" height="36" rx="7"/><text class="k" x="135" y="31">angle</text><rect class="s" x="215" y="5" width="32" height="36" rx="7"/><text class="syn" x="225" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">angle</code>
</span>
</dt>
<dd>
An angle, in radians. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Hyperbolic_functions" class="ulink" target="_top">hyperbolic sine</a> of an angle.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">angle</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL sinh=SINH(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">sinh:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.8</p></td>
<td align="left" valign="top"><p>2.94217428809568</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-sqrt"></a><code class="literal">SQRT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/sqrt.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">SQRT</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">number</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Numeric expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the square root of a number. The input can be any numeric value, the return value is always a double. Square roots of negative numbers and infinities are null.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW d = 100.0
| EVAL s = SQRT(d)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">d: double</th>
<th align="left" valign="top">s:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>100.0</p></td>
<td align="left" valign="top"><p>10.0</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-tan"></a><code class="literal">TAN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/tan.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="240" height="46" viewbox="0 0 240 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">TAN</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="80" height="36" rx="7"/><text class="k" x="123" y="31">angle</text><rect class="s" x="203" y="5" width="32" height="36" rx="7"/><text class="syn" x="213" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">angle</code>
</span>
</dt>
<dd>
An angle, in radians. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Sine_and_cosine" class="ulink" target="_top">Tangent</a> trigonometric function of an angle.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">angle</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL tan=TAN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">tan:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.8</p></td>
<td align="left" valign="top"><p>-4.286261674628062</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-tanh"></a><code class="literal">TANH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/tanh.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="252" height="46" viewbox="0 0 252 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">TANH</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="80" height="36" rx="7"/><text class="k" x="135" y="31">angle</text><rect class="s" x="215" y="5" width="32" height="36" rx="7"/><text class="syn" x="225" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">angle</code>
</span>
</dt>
<dd>
An angle, in radians. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://en.wikipedia.org/wiki/Hyperbolic_functions" class="ulink" target="_top">Tangent</a> hyperbolic function of an angle.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">angle</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=1.8
| EVAL tanh=TANH(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:double</th>
<th align="left" valign="top">tanh:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.8</p></td>
<td align="left" valign="top"><p>0.9468060128462683</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-tau"></a><code class="literal">TAU</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/tau.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="150" height="46" viewbox="0 0 150 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m32 0h5"/><rect class="s" x="5" y="5" width="56" height="36"/><text class="k" x="15" y="31">TAU</text><rect class="s" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">(</text><rect class="s" x="113" y="5" width="32" height="36" rx="7"/><text class="syn" x="123" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the <a href="https://tauday.com/tau-manifesto" class="ulink" target="_top">ratio</a> of a circle&#8217;s circumference to its radius.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW TAU()</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">TAU():double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>6.283185307179586</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-spatial-functions"></a>ES|QL spatial functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/spatial-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>ES|QL supports these spatial functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_intersects" title="ST_INTERSECTS"><code class="literal">ST_INTERSECTS</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_disjoint" title="ST_DISJOINT"><code class="literal">ST_DISJOINT</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_contains" title="ST_CONTAINS"><code class="literal">ST_CONTAINS</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_within" title="ST_WITHIN"><code class="literal">ST_WITHIN</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_x" title="ST_X"><code class="literal">ST_X</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_y" title="ST_Y"><code class="literal">ST_Y</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-st_distance" title="ST_DISTANCE"><code class="literal">ST_DISTANCE</code></a>
</li>
</ul>
</div>
<h3><a id="esql-st_intersects"></a><code class="literal">ST_INTERSECTS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/st_intersects.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="492" height="46" viewbox="0 0 492 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m176 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="176" height="36"/><text class="k" x="15" y="31">ST_INTERSECTS</text><rect class="s" x="191" y="5" width="32" height="36" rx="7"/><text class="syn" x="201" y="31">(</text><rect class="s" x="233" y="5" width="80" height="36" rx="7"/><text class="k" x="243" y="31">geomA</text><rect class="s" x="323" y="5" width="32" height="36" rx="7"/><text class="syn" x="333" y="31">,</text><rect class="s" x="365" y="5" width="80" height="36" rx="7"/><text class="k" x="375" y="31">geomB</text><rect class="s" x="455" y="5" width="32" height="36" rx="7"/><text class="syn" x="465" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">geomA</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">geomB</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. The second parameter must also have the same coordinate system as the first. This means it is not possible to combine <code class="literal">geo_*</code> and <code class="literal">cartesian_*</code> parameters.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns true if two geometries intersect. They intersect if they have any point in common, including their interior points (points along lines or within polygons). This is the inverse of the <a class="xref" href="esql-functions-operators.html#esql-st_disjoint" title="ST_DISJOINT">ST_DISJOINT</a> function. In mathematical terms: ST_Intersects(A, B) ⇔ A ⋂ B ≠ ∅</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">geomA</th>
<th align="left" valign="top">geomB</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM airports
| WHERE ST_INTERSECTS(location, TO_GEOSHAPE("POLYGON((42 14, 43 14, 43 15, 42 15, 42 14))"))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
<col class="col_7"/>
<col class="col_8"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">abbrev:keyword</th>
<th align="left" valign="top">city:keyword</th>
<th align="left" valign="top">city_location:geo_point</th>
<th align="left" valign="top">country:keyword</th>
<th align="left" valign="top">location:geo_point</th>
<th align="left" valign="top">name:text</th>
<th align="left" valign="top">scalerank:i</th>
<th align="left" valign="top">type:k</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>HOD</p></td>
<td align="left" valign="top"><p>Al Ḩudaydah</p></td>
<td align="left" valign="top"><p>POINT(42.9511 14.8022)</p></td>
<td align="left" valign="top"><p>Yemen</p></td>
<td align="left" valign="top"><p>POINT(42.97109630194 14.7552534413725)</p></td>
<td align="left" valign="top"><p>Hodeidah Int&#8217;l</p></td>
<td align="left" valign="top"><p>9</p></td>
<td align="left" valign="top"><p>mid</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-st_disjoint"></a><code class="literal">ST_DISJOINT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/st_disjoint.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="468" height="46" viewbox="0 0 468 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">ST_DISJOINT</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="80" height="36" rx="7"/><text class="k" x="219" y="31">geomA</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">,</text><rect class="s" x="341" y="5" width="80" height="36" rx="7"/><text class="k" x="351" y="31">geomB</text><rect class="s" x="431" y="5" width="32" height="36" rx="7"/><text class="syn" x="441" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">geomA</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">geomB</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. The second parameter must also have the same coordinate system as the first. This means it is not possible to combine <code class="literal">geo_*</code> and <code class="literal">cartesian_*</code> parameters.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns whether the two geometries or geometry columns are disjoint. This is the inverse of the <a class="xref" href="esql-functions-operators.html#esql-st_intersects" title="ST_INTERSECTS">ST_INTERSECTS</a> function. In mathematical terms: ST_Disjoint(A, B) ⇔ A ⋂ B = ∅</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">geomA</th>
<th align="left" valign="top">geomB</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM airport_city_boundaries
| WHERE ST_DISJOINT(city_boundary, TO_GEOSHAPE("POLYGON((-10 -60, 120 -60, 120 60, -10 60, -10 -60))"))
| KEEP abbrev, airport, region, city, city_location</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">abbrev:keyword</th>
<th align="left" valign="top">airport:text</th>
<th align="left" valign="top">region:text</th>
<th align="left" valign="top">city:keyword</th>
<th align="left" valign="top">city_location:geo_point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>ACA</p></td>
<td align="left" valign="top"><p>General Juan N Alvarez Int&#8217;l</p></td>
<td align="left" valign="top"><p>Acapulco de Juárez</p></td>
<td align="left" valign="top"><p>Acapulco de Juárez</p></td>
<td align="left" valign="top"><p>POINT (-99.8825 16.8636)</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-st_contains"></a><code class="literal">ST_CONTAINS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/st_contains.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="468" height="46" viewbox="0 0 468 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">ST_CONTAINS</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="80" height="36" rx="7"/><text class="k" x="219" y="31">geomA</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">,</text><rect class="s" x="341" y="5" width="80" height="36" rx="7"/><text class="k" x="351" y="31">geomB</text><rect class="s" x="431" y="5" width="32" height="36" rx="7"/><text class="syn" x="441" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">geomA</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">geomB</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. The second parameter must also have the same coordinate system as the first. This means it is not possible to combine <code class="literal">geo_*</code> and <code class="literal">cartesian_*</code> parameters.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns whether the first geometry contains the second geometry. This is the inverse of the <a class="xref" href="esql-functions-operators.html#esql-st_within" title="ST_WITHIN">ST_WITHIN</a> function.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">geomA</th>
<th align="left" valign="top">geomB</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM airport_city_boundaries
| WHERE ST_CONTAINS(city_boundary, TO_GEOSHAPE("POLYGON((109.35 18.3, 109.45 18.3, 109.45 18.4, 109.35 18.4, 109.35 18.3))"))
| KEEP abbrev, airport, region, city, city_location</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">abbrev:keyword</th>
<th align="left" valign="top">airport:text</th>
<th align="left" valign="top">region:text</th>
<th align="left" valign="top">city:keyword</th>
<th align="left" valign="top">city_location:geo_point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>SYX</p></td>
<td align="left" valign="top"><p>Sanya Phoenix Int&#8217;l</p></td>
<td align="left" valign="top"><p>天涯区</p></td>
<td align="left" valign="top"><p>Sanya</p></td>
<td align="left" valign="top"><p>POINT(109.5036 18.2533)</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-st_within"></a><code class="literal">ST_WITHIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/st_within.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="444" height="46" viewbox="0 0 444 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">ST_WITHIN</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="80" height="36" rx="7"/><text class="k" x="195" y="31">geomA</text><rect class="s" x="275" y="5" width="32" height="36" rx="7"/><text class="syn" x="285" y="31">,</text><rect class="s" x="317" y="5" width="80" height="36" rx="7"/><text class="k" x="327" y="31">geomB</text><rect class="s" x="407" y="5" width="32" height="36" rx="7"/><text class="syn" x="417" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">geomA</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">geomB</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code>, <code class="literal">cartesian_point</code>, <code class="literal">geo_shape</code> or <code class="literal">cartesian_shape</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. The second parameter must also have the same coordinate system as the first. This means it is not possible to combine <code class="literal">geo_*</code> and <code class="literal">cartesian_*</code> parameters.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns whether the first geometry is within the second geometry. This is the inverse of the <a class="xref" href="esql-functions-operators.html#esql-st_contains" title="ST_CONTAINS">ST_CONTAINS</a> function.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">geomA</th>
<th align="left" valign="top">geomB</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM airport_city_boundaries
| WHERE ST_WITHIN(city_boundary, TO_GEOSHAPE("POLYGON((109.1 18.15, 109.6 18.15, 109.6 18.65, 109.1 18.65, 109.1 18.15))"))
| KEEP abbrev, airport, region, city, city_location</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">abbrev:keyword</th>
<th align="left" valign="top">airport:text</th>
<th align="left" valign="top">region:text</th>
<th align="left" valign="top">city:keyword</th>
<th align="left" valign="top">city_location:geo_point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>SYX</p></td>
<td align="left" valign="top"><p>Sanya Phoenix Int&#8217;l</p></td>
<td align="left" valign="top"><p>天涯区</p></td>
<td align="left" valign="top"><p>Sanya</p></td>
<td align="left" valign="top"><p>POINT(109.5036 18.2533)</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-st_x"></a><code class="literal">ST_X</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/st_x.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="252" height="46" viewbox="0 0 252 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">ST_X</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="80" height="36" rx="7"/><text class="k" x="135" y="31">point</text><rect class="s" x="215" y="5" width="32" height="36" rx="7"/><text class="syn" x="225" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">point</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code> or <code class="literal">cartesian_point</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Extracts the <code class="literal">x</code> coordinate from the supplied point. If the points is of type <code class="literal">geo_point</code> this is equivalent to extracting the <code class="literal">longitude</code> value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">point</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW point = TO_GEOPOINT("POINT(42.97109629958868 14.7552534006536)")
| EVAL x =  ST_X(point), y = ST_Y(point)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">point:geo_point</th>
<th align="left" valign="top">x:double</th>
<th align="left" valign="top">y:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>POINT(42.97109629958868 14.7552534006536)</p></td>
<td align="left" valign="top"><p>42.97109629958868</p></td>
<td align="left" valign="top"><p>14.7552534006536</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-st_y"></a><code class="literal">ST_Y</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/st_y.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="252" height="46" viewbox="0 0 252 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">ST_Y</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="80" height="36" rx="7"/><text class="k" x="135" y="31">point</text><rect class="s" x="215" y="5" width="32" height="36" rx="7"/><text class="syn" x="225" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">point</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code> or <code class="literal">cartesian_point</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Extracts the <code class="literal">y</code> coordinate from the supplied point. If the points is of type <code class="literal">geo_point</code> this is equivalent to extracting the <code class="literal">latitude</code> value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">point</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW point = TO_GEOPOINT("POINT(42.97109629958868 14.7552534006536)")
| EVAL x =  ST_X(point), y = ST_Y(point)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">point:geo_point</th>
<th align="left" valign="top">x:double</th>
<th align="left" valign="top">y:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>POINT(42.97109629958868 14.7552534006536)</p></td>
<td align="left" valign="top"><p>42.97109629958868</p></td>
<td align="left" valign="top"><p>14.7552534006536</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-st_distance"></a><code class="literal">ST_DISTANCE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/st_distance.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="468" height="46" viewbox="0 0 468 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">ST_DISTANCE</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="80" height="36" rx="7"/><text class="k" x="219" y="31">geomA</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">,</text><rect class="s" x="341" y="5" width="80" height="36" rx="7"/><text class="k" x="351" y="31">geomB</text><rect class="s" x="431" y="5" width="32" height="36" rx="7"/><text class="syn" x="441" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">geomA</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code> or <code class="literal">cartesian_point</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">geomB</code>
</span>
</dt>
<dd>
Expression of type <code class="literal">geo_point</code> or <code class="literal">cartesian_point</code>. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. The second parameter must also have the same coordinate system as the first. This means it is not possible to combine <code class="literal">geo_point</code> and <code class="literal">cartesian_point</code> parameters.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Computes the distance between two points. For cartesian geometries, this is the pythagorean distance in the same units as the original coordinates. For geographic geometries, this is the circular distance along the great circle in meters.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">geomA</th>
<th align="left" valign="top">geomB</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM airports
| WHERE abbrev == "CPH"
| EVAL distance = ST_DISTANCE(location, city_location)
| KEEP abbrev, name, location, city_location, distance</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">abbrev:k</th>
<th align="left" valign="top">name:text</th>
<th align="left" valign="top">location:geo_point</th>
<th align="left" valign="top">city_location:geo_point</th>
<th align="left" valign="top">distance:d</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>CPH</p></td>
<td align="left" valign="top"><p>Copenhagen</p></td>
<td align="left" valign="top"><p>POINT(12.6493508684508 55.6285017221528)</p></td>
<td align="left" valign="top"><p>POINT(12.5683 55.6761)</p></td>
<td align="left" valign="top"><p>7339.573896618216</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-string-functions"></a>ES|QL string functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/string-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>ES|QL supports these string functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-concat" title="CONCAT"><code class="literal">CONCAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ends_with" title="ENDS_WITH"><code class="literal">ENDS_WITH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-from_base64" title="FROM_BASE64"><code class="literal">FROM_BASE64</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-left" title="LEFT"><code class="literal">LEFT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-length" title="LENGTH"><code class="literal">LENGTH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-locate" title="LOCATE"><code class="literal">LOCATE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-ltrim" title="LTRIM"><code class="literal">LTRIM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-repeat" title="REPEAT"><code class="literal">REPEAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-replace" title="REPLACE"><code class="literal">REPLACE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-right" title="RIGHT"><code class="literal">RIGHT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-rtrim" title="RTRIM"><code class="literal">RTRIM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-split" title="SPLIT"><code class="literal">SPLIT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-starts_with" title="STARTS_WITH"><code class="literal">STARTS_WITH</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-substring" title="SUBSTRING"><code class="literal">SUBSTRING</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_base64" title="TO_BASE64"><code class="literal">TO_BASE64</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_lower" title="TO_LOWER"><code class="literal">TO_LOWER</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_upper" title="TO_UPPER"><code class="literal">TO_UPPER</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-trim" title="TRIM"><code class="literal">TRIM</code></a>
</li>
</ul>
</div>
<h3><a id="esql-concat"></a><code class="literal">CONCAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/concat.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="456" height="46" viewbox="0 0 456 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m104 0h10m32 0h10m104 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">CONCAT</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="104" height="36" rx="7"/><text class="k" x="159" y="31">string1</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="104" height="36" rx="7"/><text class="k" x="315" y="31">string2</text><rect class="s" x="419" y="5" width="32" height="36" rx="7"/><text class="syn" x="429" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string1</code>
</span>
</dt>
<dd>
Strings to concatenate.
</dd>
<dt>
<span class="term">
<code class="literal">string2</code>
</span>
</dt>
<dd>
Strings to concatenate.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Concatenates two or more strings.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string1</th>
<th align="left" valign="top">string2</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP first_name, last_name
| EVAL fullname = CONCAT(first_name, " ", last_name)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">fullname:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Alejandro</p></td>
<td align="left" valign="top"><p>McAlpine</p></td>
<td align="left" valign="top"><p>Alejandro McAlpine</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Amabile</p></td>
<td align="left" valign="top"><p>Gomatam</p></td>
<td align="left" valign="top"><p>Amabile Gomatam</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Anneke</p></td>
<td align="left" valign="top"><p>Preusig</p></td>
<td align="left" valign="top"><p>Anneke Preusig</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-ends_with"></a><code class="literal">ENDS_WITH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/ends_with.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="432" height="46" viewbox="0 0 432 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m56 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">ENDS_WITH</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="56" height="36" rx="7"/><text class="k" x="195" y="31">str</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">,</text><rect class="s" x="293" y="5" width="92" height="36" rx="7"/><text class="k" x="303" y="31">suffix</text><rect class="s" x="395" y="5" width="32" height="36" rx="7"/><text class="syn" x="405" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">str</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">suffix</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a boolean that indicates whether a keyword string ends with another string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str</th>
<th align="left" valign="top">suffix</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP last_name
| EVAL ln_E = ENDS_WITH(last_name, "d")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">ln_E:boolean</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Awdeh</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Azuma</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Baek</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bamford</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bernatsky</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-from_base64"></a><code class="literal">FROM_BASE64</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/from_base64.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="348" height="46" viewbox="0 0 348 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">FROM_BASE64</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="92" height="36" rx="7"/><text class="k" x="219" y="31">string</text><rect class="s" x="311" y="5" width="32" height="36" rx="7"/><text class="syn" x="321" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
A base64 string.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Decode a base64 string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">row a = "ZWxhc3RpYw=="
| eval d = from_base64(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">d:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>ZWxhc3RpYw==</p></td>
<td align="left" valign="top"><p>elastic</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-left"></a><code class="literal">LEFT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/left.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="408" height="46" viewbox="0 0 408 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">LEFT</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">string</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">,</text><rect class="s" x="269" y="5" width="92" height="36" rx="7"/><text class="k" x="279" y="31">length</text><rect class="s" x="371" y="5" width="32" height="36" rx="7"/><text class="syn" x="381" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
The string from which to return a substring.
</dd>
<dt>
<span class="term">
<code class="literal">length</code>
</span>
</dt>
<dd>
The number of characters to return.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the substring that extracts <em>length</em> chars from <em>string</em> starting from the left.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">length</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP last_name
| EVAL left = LEFT(last_name, 3)
| SORT last_name ASC
| LIMIT 5</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">left:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Awdeh</p></td>
<td align="left" valign="top"><p>Awd</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Azuma</p></td>
<td align="left" valign="top"><p>Azu</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Baek</p></td>
<td align="left" valign="top"><p>Bae</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bamford</p></td>
<td align="left" valign="top"><p>Bam</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bernatsky</p></td>
<td align="left" valign="top"><p>Ber</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-length"></a><code class="literal">LENGTH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/length.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="288" height="46" viewbox="0 0 288 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">LENGTH</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="92" height="36" rx="7"/><text class="k" x="159" y="31">string</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns the character length of a string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP first_name, last_name
| EVAL fn_length = LENGTH(first_name)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">fn_length:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Alejandro</p></td>
<td align="left" valign="top"><p>McAlpine</p></td>
<td align="left" valign="top"><p>9</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Amabile</p></td>
<td align="left" valign="top"><p>Gomatam</p></td>
<td align="left" valign="top"><p>7</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Anneke</p></td>
<td align="left" valign="top"><p>Preusig</p></td>
<td align="left" valign="top"><p>6</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-locate"></a><code class="literal">LOCATE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/locate.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="600" height="46" viewbox="0 0 600 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m92 0h10m32 0h10m128 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">LOCATE</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="92" height="36" rx="7"/><text class="k" x="159" y="31">string</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">,</text><rect class="s" x="293" y="5" width="128" height="36" rx="7"/><text class="k" x="303" y="31">substring</text><rect class="s" x="431" y="5" width="32" height="36" rx="7"/><text class="syn" x="441" y="31">,</text><rect class="s" x="473" y="5" width="80" height="36" rx="7"/><text class="k" x="483" y="31">start</text><rect class="s" x="563" y="5" width="32" height="36" rx="7"/><text class="syn" x="573" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
An input string
</dd>
<dt>
<span class="term">
<code class="literal">substring</code>
</span>
</dt>
<dd>
A substring to locate in the input string
</dd>
<dt>
<span class="term">
<code class="literal">start</code>
</span>
</dt>
<dd>
The start index
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns an integer that indicates the position of a keyword substring within another string</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">substring</th>
<th align="left" valign="top">start</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">row a = "hello"
| eval a_ll = locate(a, "ll")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">a_ll:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>hello</p></td>
<td align="left" valign="top"><p>3</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-ltrim"></a><code class="literal">LTRIM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/ltrim.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">LTRIM</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="92" height="36" rx="7"/><text class="k" x="147" y="31">string</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Removes leading whitespaces from a string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW message = "   some text  ",  color = " red "
| EVAL message = LTRIM(message)
| EVAL color = LTRIM(color)
| EVAL message = CONCAT("'", message, "'")
| EVAL color = CONCAT("'", color, "'")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">message:keyword</th>
<th align="left" valign="top">color:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>'some text  '</p></td>
<td align="left" valign="top"><p>'red '</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-repeat"></a><code class="literal">REPEAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/repeat.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="432" height="46" viewbox="0 0 432 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">REPEAT</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="92" height="36" rx="7"/><text class="k" x="159" y="31">string</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">,</text><rect class="s" x="293" y="5" width="92" height="36" rx="7"/><text class="k" x="303" y="31">number</text><rect class="s" x="395" y="5" width="32" height="36" rx="7"/><text class="syn" x="405" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression.
</dd>
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Number times to repeat.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a string constructed by concatenating <code class="literal">string</code> with itself the specified <code class="literal">number</code> of times.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = "Hello!"
| EVAL triple_a = REPEAT(a, 3);</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">triple_a:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Hello!</p></td>
<td align="left" valign="top"><p>Hello!Hello!Hello!</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-replace"></a><code class="literal">REPLACE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/replace.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="612" height="46" viewbox="0 0 612 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m104 0h10m32 0h10m92 0h10m32 0h10m80 0h10m32 0h10m128 0h10m32 0h5"/><rect class="s" x="5" y="5" width="104" height="36"/><text class="k" x="15" y="31">REPLACE</text><rect class="s" x="119" y="5" width="32" height="36" rx="7"/><text class="syn" x="129" y="31">(</text><rect class="s" x="161" y="5" width="92" height="36" rx="7"/><text class="k" x="171" y="31">string</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="80" height="36" rx="7"/><text class="k" x="315" y="31">regex</text><rect class="s" x="395" y="5" width="32" height="36" rx="7"/><text class="syn" x="405" y="31">,</text><rect class="s" x="437" y="5" width="128" height="36" rx="7"/><text class="k" x="447" y="31">newString</text><rect class="s" x="575" y="5" width="32" height="36" rx="7"/><text class="syn" x="585" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression.
</dd>
<dt>
<span class="term">
<code class="literal">regex</code>
</span>
</dt>
<dd>
Regular expression.
</dd>
<dt>
<span class="term">
<code class="literal">newString</code>
</span>
</dt>
<dd>
Replacement string.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>The function substitutes in the string <code class="literal">str</code> any match of the regular expression <code class="literal">regex</code> with the replacement string <code class="literal">newStr</code>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">regex</th>
<th align="left" valign="top">newString</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<p>This example replaces any occurrence of the word "World" with the word "Universe":</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW str = "Hello World"
| EVAL str = REPLACE(str, "World", "Universe")
| KEEP str</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Hello Universe</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-right"></a><code class="literal">RIGHT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/right.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="420" height="46" viewbox="0 0 420 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">RIGHT</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="92" height="36" rx="7"/><text class="k" x="147" y="31">string</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">,</text><rect class="s" x="281" y="5" width="92" height="36" rx="7"/><text class="k" x="291" y="31">length</text><rect class="s" x="383" y="5" width="32" height="36" rx="7"/><text class="syn" x="393" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
The string from which to returns a substring.
</dd>
<dt>
<span class="term">
<code class="literal">length</code>
</span>
</dt>
<dd>
The number of characters to return.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Return the substring that extracts <em>length</em> chars from <em>str</em> starting from the right.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">length</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP last_name
| EVAL right = RIGHT(last_name, 3)
| SORT last_name ASC
| LIMIT 5</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">right:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Awdeh</p></td>
<td align="left" valign="top"><p>deh</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Azuma</p></td>
<td align="left" valign="top"><p>uma</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Baek</p></td>
<td align="left" valign="top"><p>aek</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bamford</p></td>
<td align="left" valign="top"><p>ord</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bernatsky</p></td>
<td align="left" valign="top"><p>sky</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-rtrim"></a><code class="literal">RTRIM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/rtrim.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">RTRIM</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="92" height="36" rx="7"/><text class="k" x="147" y="31">string</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Removes trailing whitespaces from a string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW message = "   some text  ",  color = " red "
| EVAL message = RTRIM(message)
| EVAL color = RTRIM(color)
| EVAL message = CONCAT("'", message, "'")
| EVAL color = CONCAT("'", color, "'")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">message:keyword</th>
<th align="left" valign="top">color:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>'   some text'</p></td>
<td align="left" valign="top"><p>' red'</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-split"></a><code class="literal">SPLIT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/split.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="408" height="46" viewbox="0 0 408 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m92 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">SPLIT</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="92" height="36" rx="7"/><text class="k" x="147" y="31">string</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">,</text><rect class="s" x="281" y="5" width="80" height="36" rx="7"/><text class="k" x="291" y="31">delim</text><rect class="s" x="371" y="5" width="32" height="36" rx="7"/><text class="syn" x="381" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">delim</code>
</span>
</dt>
<dd>
Delimiter. Only single byte delimiters are currently supported.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Split a single valued string into multiple strings.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">delim</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW words="foo;bar;baz;qux;quux;corge"
| EVAL word = SPLIT(words, ";")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">words:keyword</th>
<th align="left" valign="top">word:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>foo;bar;baz;qux;quux;corge</p></td>
<td align="left" valign="top"><p>[foo,bar,baz,qux,quux,corge]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-starts_with"></a><code class="literal">STARTS_WITH</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/starts_with.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="456" height="46" viewbox="0 0 456 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m56 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">STARTS_WITH</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="56" height="36" rx="7"/><text class="k" x="219" y="31">str</text><rect class="s" x="275" y="5" width="32" height="36" rx="7"/><text class="syn" x="285" y="31">,</text><rect class="s" x="317" y="5" width="92" height="36" rx="7"/><text class="k" x="327" y="31">prefix</text><rect class="s" x="419" y="5" width="32" height="36" rx="7"/><text class="syn" x="429" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">str</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">prefix</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a boolean that indicates whether a keyword string starts with another string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str</th>
<th align="left" valign="top">prefix</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP last_name
| EVAL ln_S = STARTS_WITH(last_name, "B")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">ln_S:boolean</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Awdeh</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Azuma</p></td>
<td align="left" valign="top"><p>false</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Baek</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bamford</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bernatsky</p></td>
<td align="left" valign="top"><p>true</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-substring"></a><code class="literal">SUBSTRING</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/substring.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="600" height="46" viewbox="0 0 600 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m92 0h10m32 0h10m80 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">SUBSTRING</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="92" height="36" rx="7"/><text class="k" x="195" y="31">string</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">,</text><rect class="s" x="329" y="5" width="80" height="36" rx="7"/><text class="k" x="339" y="31">start</text><rect class="s" x="419" y="5" width="32" height="36" rx="7"/><text class="syn" x="429" y="31">,</text><rect class="s" x="461" y="5" width="92" height="36" rx="7"/><text class="k" x="471" y="31">length</text><rect class="s" x="563" y="5" width="32" height="36" rx="7"/><text class="syn" x="573" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">start</code>
</span>
</dt>
<dd>
Start position.
</dd>
<dt>
<span class="term">
<code class="literal">length</code>
</span>
</dt>
<dd>
Length of the substring from the start position. Optional; if omitted, all positions after <code class="literal">start</code> are returned.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a substring of a string, specified by a start position and an optional length</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">start</th>
<th align="left" valign="top">length</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<p>This example returns the first three characters of every last name:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP last_name
| EVAL ln_sub = SUBSTRING(last_name, 1, 3)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">ln_sub:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Awdeh</p></td>
<td align="left" valign="top"><p>Awd</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Azuma</p></td>
<td align="left" valign="top"><p>Azu</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Baek</p></td>
<td align="left" valign="top"><p>Bae</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bamford</p></td>
<td align="left" valign="top"><p>Bam</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bernatsky</p></td>
<td align="left" valign="top"><p>Ber</p></td>
</tr>
</tbody>
</table>
</div>
<p>A negative start position is interpreted as being relative to the end of the string.
This example returns the last three characters of of every last name:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP last_name
| EVAL ln_sub = SUBSTRING(last_name, -3, 3)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">ln_sub:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Awdeh</p></td>
<td align="left" valign="top"><p>deh</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Azuma</p></td>
<td align="left" valign="top"><p>uma</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Baek</p></td>
<td align="left" valign="top"><p>aek</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bamford</p></td>
<td align="left" valign="top"><p>ord</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bernatsky</p></td>
<td align="left" valign="top"><p>sky</p></td>
</tr>
</tbody>
</table>
</div>
<p>If length is omitted, substring returns the remainder of the string.
This example returns all characters except for the first:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| KEEP last_name
| EVAL ln_sub = SUBSTRING(last_name, 2)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">last_name:keyword</th>
<th align="left" valign="top">ln_sub:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Awdeh</p></td>
<td align="left" valign="top"><p>wdeh</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Azuma</p></td>
<td align="left" valign="top"><p>zuma</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Baek</p></td>
<td align="left" valign="top"><p>aek</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bamford</p></td>
<td align="left" valign="top"><p>amford</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Bernatsky</p></td>
<td align="left" valign="top"><p>ernatsky</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_base64"></a><code class="literal">TO_BASE64</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_base64.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="324" height="46" viewbox="0 0 324 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">TO_BASE64</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="92" height="36" rx="7"/><text class="k" x="195" y="31">string</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
A string.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Encode a string to a base64 string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">row a = "elastic"
| eval e = to_base64(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">e:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>elastic</p></td>
<td align="left" valign="top"><p>ZWxhc3RpYw==</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_lower"></a><code class="literal">TO_LOWER</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_lower.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m56 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">TO_LOWER</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="56" height="36" rx="7"/><text class="k" x="183" y="31">str</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">str</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a new string representing the input string converted to lower case.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW message = "Some Text"
| EVAL message_lower = TO_LOWER(message)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">message:keyword</th>
<th align="left" valign="top">message_lower:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Some Text</p></td>
<td align="left" valign="top"><p>some text</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_upper"></a><code class="literal">TO_UPPER</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_upper.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m56 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">TO_UPPER</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="56" height="36" rx="7"/><text class="k" x="183" y="31">str</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">str</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a new string representing the input string converted to upper case.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW message = "Some Text"
| EVAL message_upper = TO_UPPER(message)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">message:keyword</th>
<th align="left" valign="top">message_upper:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Some Text</p></td>
<td align="left" valign="top"><p>SOME TEXT</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-trim"></a><code class="literal">TRIM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/trim.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m68 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="68" height="36"/><text class="k" x="15" y="31">TRIM</text><rect class="s" x="83" y="5" width="32" height="36" rx="7"/><text class="syn" x="93" y="31">(</text><rect class="s" x="125" y="5" width="92" height="36" rx="7"/><text class="k" x="135" y="31">string</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
String expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Removes leading and trailing whitespaces from a string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW message = "   some text  ",  color = " red "
| EVAL message = TRIM(message)
| EVAL color = TRIM(color)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">message:s</th>
<th align="left" valign="top">color:s</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>some text</p></td>
<td align="left" valign="top"><p>red</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-type-conversion-functions"></a>ES|QL type conversion functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/type-conversion-functions.asciidoc">edit</a></h3>
</div></div></div>

<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>ES|QL supports implicit casting from string literals to certain data types. Refer to <a class="xref" href="esql-implicit-casting.html" title="ES|QL implicit casting">implicit casting</a> for details.</p>
</div>
</div>
<p>ES|QL supports these type conversion functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_boolean" title="TO_BOOLEAN"><code class="literal">TO_BOOLEAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_cartesianpoint" title="TO_CARTESIANPOINT"><code class="literal">TO_CARTESIANPOINT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_cartesianshape" title="TO_CARTESIANSHAPE"><code class="literal">TO_CARTESIANSHAPE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_datetime" title="TO_DATETIME"><code class="literal">TO_DATETIME</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_degrees" title="TO_DEGREES"><code class="literal">TO_DEGREES</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_double" title="TO_DOUBLE"><code class="literal">TO_DOUBLE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_geopoint" title="TO_GEOPOINT"><code class="literal">TO_GEOPOINT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_geoshape" title="TO_GEOSHAPE"><code class="literal">TO_GEOSHAPE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_integer" title="TO_INTEGER"><code class="literal">TO_INTEGER</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_ip" title="TO_IP"><code class="literal">TO_IP</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_long" title="TO_LONG"><code class="literal">TO_LONG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_radians" title="TO_RADIANS"><code class="literal">TO_RADIANS</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_string" title="TO_STRING"><code class="literal">TO_STRING</code></a>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <a class="xref" href="esql-functions-operators.html#esql-to_unsigned_long" title="TO_UNSIGNED_LONG"><code class="literal">TO_UNSIGNED_LONG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-to_version" title="TO_VERSION"><code class="literal">TO_VERSION</code></a>
</li>
</ul>
</div>
<h3><a id="esql-to_boolean"></a><code class="literal">TO_BOOLEAN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_boolean.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="324" height="46" viewbox="0 0 324 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">TO_BOOLEAN</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="80" height="36" rx="7"/><text class="k" x="207" y="31">field</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a boolean value. A string value of <span class="strong strong"><strong>true</strong></span> will be case-insensitive converted to the Boolean <span class="strong strong"><strong>true</strong></span>. For anything else, including the empty string, the function will return <span class="strong strong"><strong>false</strong></span>. The numerical value of <span class="strong strong"><strong>0</strong></span> will be converted to <span class="strong strong"><strong>false</strong></span>, anything else will be converted to <span class="strong strong"><strong>true</strong></span>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW str = ["true", "TRuE", "false", "", "yes", "1"]
| EVAL bool = TO_BOOLEAN(str)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str:keyword</th>
<th align="left" valign="top">bool:boolean</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>["true", "TRuE", "false", "", "yes", "1"]</p></td>
<td align="left" valign="top"><p>[true, true, false, false, false, false]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_cartesianpoint"></a><code class="literal">TO_CARTESIANPOINT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_cartesianpoint.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="408" height="46" viewbox="0 0 408 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m224 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="224" height="36"/><text class="k" x="15" y="31">TO_CARTESIANPOINT</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">(</text><rect class="s" x="281" y="5" width="80" height="36" rx="7"/><text class="k" x="291" y="31">field</text><rect class="s" x="371" y="5" width="32" height="36" rx="7"/><text class="syn" x="381" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a <code class="literal">cartesian_point</code> value. A string will only be successfully converted if it respects the <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" class="ulink" target="_top">WKT Point</a> format.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW wkt = ["POINT(4297.11 -1475.53)", "POINT(7580.93 2272.77)"]
| MV_EXPAND wkt
| EVAL pt = TO_CARTESIANPOINT(wkt)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">wkt:keyword</th>
<th align="left" valign="top">pt:cartesian_point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>"POINT(4297.11 -1475.53)"</p></td>
<td align="left" valign="top"><p>POINT(4297.11 -1475.53)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>"POINT(7580.93 2272.77)"</p></td>
<td align="left" valign="top"><p>POINT(7580.93 2272.77)</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_cartesianshape"></a><code class="literal">TO_CARTESIANSHAPE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_cartesianshape.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="408" height="46" viewbox="0 0 408 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m224 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="224" height="36"/><text class="k" x="15" y="31">TO_CARTESIANSHAPE</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">(</text><rect class="s" x="281" y="5" width="80" height="36" rx="7"/><text class="k" x="291" y="31">field</text><rect class="s" x="371" y="5" width="32" height="36" rx="7"/><text class="syn" x="381" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a <code class="literal">cartesian_shape</code> value. A string will only be successfully converted if it respects the <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" class="ulink" target="_top">WKT</a> format.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW wkt = ["POINT(4297.11 -1475.53)", "POLYGON ((3339584.72 1118889.97, 4452779.63 4865942.27, 2226389.81 4865942.27, 1113194.90 2273030.92, 3339584.72 1118889.97))"]
| MV_EXPAND wkt
| EVAL geom = TO_CARTESIANSHAPE(wkt)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">wkt:keyword</th>
<th align="left" valign="top">geom:cartesian_shape</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>"POINT(4297.11 -1475.53)"</p></td>
<td align="left" valign="top"><p>POINT(4297.11 -1475.53)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>"POLYGON 3339584.72 1118889.97, 4452779.63 4865942.27, 2226389.81 4865942.27, 1113194.90 2273030.92, 3339584.72 1118889.97"</p></td>
<td align="left" valign="top"><p>POLYGON 3339584.72 1118889.97, 4452779.63 4865942.27, 2226389.81 4865942.27, 1113194.90 2273030.92, 3339584.72 1118889.97</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_datetime"></a><code class="literal">TO_DATETIME</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_datetime.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="336" height="46" viewbox="0 0 336 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">TO_DATETIME</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="80" height="36" rx="7"/><text class="k" x="219" y="31">field</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a date value. A string will only be successfully converted if it&#8217;s respecting the format <code class="literal">yyyy-MM-dd'T'HH:mm:ss.SSS'Z'</code>. To convert dates in other formats, use <a class="xref" href="esql-functions-operators.html#esql-date_parse" title="DATE_PARSE"><code class="literal">DATE_PARSE</code></a>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW string = ["1953-09-02T00:00:00.000Z", "1964-06-02T00:00:00.000Z", "1964-06-02 00:00:00"]
| EVAL datetime = TO_DATETIME(string)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string:keyword</th>
<th align="left" valign="top">datetime:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>["1953-09-02T00:00:00.000Z", "1964-06-02T00:00:00.000Z", "1964-06-02 00:00:00"]</p></td>
<td align="left" valign="top"><p>[1953-09-02T00:00:00.000Z, 1964-06-02T00:00:00.000Z]</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that in this example, the last value in the source multi-valued field has not been converted.
The reason being that if the date format is not respected, the conversion will result in a <span class="strong strong"><strong>null</strong></span> value.
When this happens a <em>Warning</em> header is added to the response.
The header will provide information on the source of the failure:</p>
<p><code class="literal">"Line 1:112: evaluation of [TO_DATETIME(string)] failed, treating result as null. "Only first 20 failures recorded."</code></p>
<p>A following header will contain the failure reason and the offending value:</p>
<p><code class="literal">"java.lang.IllegalArgumentException: failed to parse date field [1964-06-02 00:00:00]
with format [yyyy-MM-dd'T'HH:mm:ss.SSS'Z']"</code></p>
<p>If the input parameter is of a numeric type,
its value will be interpreted as milliseconds since the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix epoch</a>. For example:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW int = [0, 1]
| EVAL dt = TO_DATETIME(int)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">int:integer</th>
<th align="left" valign="top">dt:date</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[0, 1]</p></td>
<td align="left" valign="top"><p>[1970-01-01T00:00:00.000Z, 1970-01-01T00:00:00.001Z]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_degrees"></a><code class="literal">TO_DEGREES</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_degrees.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="336" height="46" viewbox="0 0 336 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">TO_DEGREES</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="92" height="36" rx="7"/><text class="k" x="207" y="31">number</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a number in <a href="https://en.wikipedia.org/wiki/Radian" class="ulink" target="_top">radians</a> to <a href="https://en.wikipedia.org/wiki/Degree_(angle)" class="ulink" target="_top">degrees</a>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW rad = [1.57, 3.14, 4.71]
| EVAL deg = TO_DEGREES(rad)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">rad:double</th>
<th align="left" valign="top">deg:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[1.57, 3.14, 4.71]</p></td>
<td align="left" valign="top"><p>[89.95437383553924, 179.9087476710785, 269.86312150661774]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_double"></a><code class="literal">TO_DOUBLE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_double.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="312" height="46" viewbox="0 0 312 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">TO_DOUBLE</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="80" height="36" rx="7"/><text class="k" x="195" y="31">field</text><rect class="s" x="275" y="5" width="32" height="36" rx="7"/><text class="syn" x="285" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a double value. If the input parameter is of a date type, its value will be interpreted as milliseconds since the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix epoch</a>, converted to double. Boolean <span class="strong strong"><strong>true</strong></span> will be converted to double <span class="strong strong"><strong>1.0</strong></span>, <span class="strong strong"><strong>false</strong></span> to <span class="strong strong"><strong>0.0</strong></span>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>counter_double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>counter_integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>counter_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW str1 = "5.20128E11", str2 = "foo"
| EVAL dbl = TO_DOUBLE("520128000000"), dbl1 = TO_DOUBLE(str1), dbl2 = TO_DOUBLE(str2)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str1:keyword</th>
<th align="left" valign="top">str2:keyword</th>
<th align="left" valign="top">dbl:double</th>
<th align="left" valign="top">dbl1:double</th>
<th align="left" valign="top">dbl2:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>5.20128E11</p></td>
<td align="left" valign="top"><p>foo</p></td>
<td align="left" valign="top"><p>5.20128E11</p></td>
<td align="left" valign="top"><p>5.20128E11</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that in this example, the last conversion of the string isn&#8217;t possible.
When this happens, the result is a <span class="strong strong"><strong>null</strong></span> value. In this case a <em>Warning</em> header is added to the response.
The header will provide information on the source of the failure:</p>
<p><code class="literal">"Line 1:115: evaluation of [TO_DOUBLE(str2)] failed, treating result as null. Only first 20 failures recorded."</code></p>
<p>A following header will contain the failure reason and the offending value:
<code class="literal">"java.lang.NumberFormatException: For input string: "foo""</code></p>
<h3><a id="esql-to_geopoint"></a><code class="literal">TO_GEOPOINT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_geopoint.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="336" height="46" viewbox="0 0 336 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">TO_GEOPOINT</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="80" height="36" rx="7"/><text class="k" x="219" y="31">field</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a <code class="literal">geo_point</code> value. A string will only be successfully converted if it respects the <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" class="ulink" target="_top">WKT Point</a> format.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW wkt = "POINT(42.97109630194 14.7552534413725)"
| EVAL pt = TO_GEOPOINT(wkt)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">wkt:keyword</th>
<th align="left" valign="top">pt:geo_point</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>"POINT(42.97109630194 14.7552534413725)"</p></td>
<td align="left" valign="top"><p>POINT(42.97109630194 14.7552534413725)</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_geoshape"></a><code class="literal">TO_GEOSHAPE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_geoshape.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="336" height="46" viewbox="0 0 336 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m152 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="152" height="36"/><text class="k" x="15" y="31">TO_GEOSHAPE</text><rect class="s" x="167" y="5" width="32" height="36" rx="7"/><text class="syn" x="177" y="31">(</text><rect class="s" x="209" y="5" width="80" height="36" rx="7"/><text class="k" x="219" y="31">field</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a <code class="literal">geo_shape</code> value. A string will only be successfully converted if it respects the <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" class="ulink" target="_top">WKT</a> format.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW wkt = "POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))"
| EVAL geom = TO_GEOSHAPE(wkt)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">wkt:keyword</th>
<th align="left" valign="top">geom:geo_shape</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>"POLYGON 30 10, 40 40, 20 40, 10 20, 30 10"</p></td>
<td align="left" valign="top"><p>POLYGON 30 10, 40 40, 20 40, 10 20, 30 10</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_integer"></a><code class="literal">TO_INTEGER</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_integer.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="324" height="46" viewbox="0 0 324 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">TO_INTEGER</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="80" height="36" rx="7"/><text class="k" x="207" y="31">field</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to an integer value. If the input parameter is of a date type, its value will be interpreted as milliseconds since the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix epoch</a>, converted to integer. Boolean <span class="strong strong"><strong>true</strong></span> will be converted to integer <span class="strong strong"><strong>1</strong></span>, <span class="strong strong"><strong>false</strong></span> to <span class="strong strong"><strong>0</strong></span>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>counter_integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW long = [5013792, 2147483647, 501379200000]
| EVAL int = TO_INTEGER(long)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">long:long</th>
<th align="left" valign="top">int:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[5013792, 2147483647, 501379200000]</p></td>
<td align="left" valign="top"><p>[5013792, 2147483647]</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that in this example, the last value of the multi-valued field cannot be converted as an integer.
When this happens, the result is a <span class="strong strong"><strong>null</strong></span> value. In this case a <em>Warning</em> header is added to the response.
The header will provide information on the source of the failure:</p>
<p><code class="literal">"Line 1:61: evaluation of [TO_INTEGER(long)] failed, treating result as null. Only first 20 failures recorded."</code></p>
<p>A following header will contain the failure reason and the offending value:</p>
<p><code class="literal">"org.elasticsearch.xpack.esql.core.InvalidArgumentException: [501379200000] out of [integer] range"</code></p>
<h3><a id="esql-to_ip"></a><code class="literal">TO_IP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_ip.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="264" height="46" viewbox="0 0 264 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="80" height="36"/><text class="k" x="15" y="31">TO_IP</text><rect class="s" x="95" y="5" width="32" height="36" rx="7"/><text class="syn" x="105" y="31">(</text><rect class="s" x="137" y="5" width="80" height="36" rx="7"/><text class="k" x="147" y="31">field</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input string to an IP value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW str1 = "1.1.1.1", str2 = "foo"
| EVAL ip1 = TO_IP(str1), ip2 = TO_IP(str2)
| WHERE CIDR_MATCH(ip1, "1.0.0.0/8")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str1:keyword</th>
<th align="left" valign="top">str2:keyword</th>
<th align="left" valign="top">ip1:ip</th>
<th align="left" valign="top">ip2:ip</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.1.1.1</p></td>
<td align="left" valign="top"><p>foo</p></td>
<td align="left" valign="top"><p>1.1.1.1</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that in this example, the last conversion of the string isn&#8217;t possible.
When this happens, the result is a <span class="strong strong"><strong>null</strong></span> value. In this case a <em>Warning</em> header is added to the response.
The header will provide information on the source of the failure:</p>
<p><code class="literal">"Line 1:68: evaluation of [TO_IP(str2)] failed, treating result as null. Only first 20 failures recorded."</code></p>
<p>A following header will contain the failure reason and the offending value:</p>
<p><code class="literal">"java.lang.IllegalArgumentException: 'foo' is not an IP string literal."</code></p>
<h3><a id="esql-to_long"></a><code class="literal">TO_LONG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_long.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="288" height="46" viewbox="0 0 288 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m104 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="104" height="36"/><text class="k" x="15" y="31">TO_LONG</text><rect class="s" x="119" y="5" width="32" height="36" rx="7"/><text class="syn" x="129" y="31">(</text><rect class="s" x="161" y="5" width="80" height="36" rx="7"/><text class="k" x="171" y="31">field</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to a long value. If the input parameter is of a date type, its value will be interpreted as milliseconds since the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix epoch</a>, converted to long. Boolean <span class="strong strong"><strong>true</strong></span> will be converted to long <span class="strong strong"><strong>1</strong></span>, <span class="strong strong"><strong>false</strong></span> to <span class="strong strong"><strong>0</strong></span>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>counter_integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>counter_long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW str1 = "2147483648", str2 = "2147483648.2", str3 = "foo"
| EVAL long1 = TO_LONG(str1), long2 = TO_LONG(str2), long3 = TO_LONG(str3)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str1:keyword</th>
<th align="left" valign="top">str2:keyword</th>
<th align="left" valign="top">str3:keyword</th>
<th align="left" valign="top">long1:long</th>
<th align="left" valign="top">long2:long</th>
<th align="left" valign="top">long3:long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2147483648</p></td>
<td align="left" valign="top"><p>2147483648.2</p></td>
<td align="left" valign="top"><p>foo</p></td>
<td align="left" valign="top"><p>2147483648</p></td>
<td align="left" valign="top"><p>2147483648</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that in this example, the last conversion of the string isn&#8217;t possible.
When this happens, the result is a <span class="strong strong"><strong>null</strong></span> value. In this case a <em>Warning</em> header is added to the response.
The header will provide information on the source of the failure:</p>
<p><code class="literal">"Line 1:113: evaluation of [TO_LONG(str3)] failed, treating result as null. Only first 20 failures recorded."</code></p>
<p>A following header will contain the failure reason and the offending value:</p>
<p><code class="literal">"java.lang.NumberFormatException: For input string: "foo""</code></p>
<h3><a id="esql-to_radians"></a><code class="literal">TO_RADIANS</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_radians.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="336" height="46" viewbox="0 0 336 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">TO_RADIANS</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="92" height="36" rx="7"/><text class="k" x="207" y="31">number</text><rect class="s" x="299" y="5" width="32" height="36" rx="7"/><text class="syn" x="309" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a number in <a href="https://en.wikipedia.org/wiki/Degree_(angle)" class="ulink" target="_top">degrees</a> to <a href="https://en.wikipedia.org/wiki/Radian" class="ulink" target="_top">radians</a>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW deg = [90.0, 180.0, 270.0]
| EVAL rad = TO_RADIANS(deg)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">deg:double</th>
<th align="left" valign="top">rad:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[90.0, 180.0, 270.0]</p></td>
<td align="left" valign="top"><p>[1.5707963267948966, 3.141592653589793, 4.71238898038469]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_string"></a><code class="literal">TO_STRING</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_string.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="312" height="46" viewbox="0 0 312 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">TO_STRING</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="80" height="36" rx="7"/><text class="k" x="195" y="31">field</text><rect class="s" x="275" y="5" width="32" height="36" rx="7"/><text class="syn" x="285" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value into a string.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=10
| EVAL j = TO_STRING(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">j:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10</p></td>
<td align="left" valign="top"><p>"10"</p></td>
</tr>
</tbody>
</table>
</div>
<p>It also works fine on multivalued fields:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[10, 9, 8]
| EVAL j = TO_STRING(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">j:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[10, 9, 8]</p></td>
<td align="left" valign="top"><p>["10", "9", "8"]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-to_unsigned_long"></a><code class="literal">TO_UNSIGNED_LONG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_unsigned_long.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="396" height="46" viewbox="0 0 396 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m212 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="212" height="36"/><text class="k" x="15" y="31">TO_UNSIGNED_LONG</text><rect class="s" x="227" y="5" width="32" height="36" rx="7"/><text class="syn" x="237" y="31">(</text><rect class="s" x="269" y="5" width="80" height="36" rx="7"/><text class="k" x="279" y="31">field</text><rect class="s" x="359" y="5" width="32" height="36" rx="7"/><text class="syn" x="369" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input value to an unsigned long value. If the input parameter is of a date type, its value will be interpreted as milliseconds since the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix epoch</a>, converted to unsigned long. Boolean <span class="strong strong"><strong>true</strong></span> will be converted to unsigned long <span class="strong strong"><strong>1</strong></span>, <span class="strong strong"><strong>false</strong></span> to <span class="strong strong"><strong>0</strong></span>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW str1 = "2147483648", str2 = "2147483648.2", str3 = "foo"
| EVAL long1 = TO_UNSIGNED_LONG(str1), long2 = TO_ULONG(str2), long3 = TO_UL(str3)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str1:keyword</th>
<th align="left" valign="top">str2:keyword</th>
<th align="left" valign="top">str3:keyword</th>
<th align="left" valign="top">long1:unsigned_long</th>
<th align="left" valign="top">long2:unsigned_long</th>
<th align="left" valign="top">long3:unsigned_long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>2147483648</p></td>
<td align="left" valign="top"><p>2147483648.2</p></td>
<td align="left" valign="top"><p>foo</p></td>
<td align="left" valign="top"><p>2147483648</p></td>
<td align="left" valign="top"><p>2147483648</p></td>
<td align="left" valign="top"><p>null</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that in this example, the last conversion of the string isn&#8217;t possible.
When this happens, the result is a <span class="strong strong"><strong>null</strong></span> value. In this case a <em>Warning</em> header is added to the response.
The header will provide information on the source of the failure:</p>
<p><code class="literal">"Line 1:133: evaluation of [TO_UL(str3)] failed, treating result as null. Only first 20 failures recorded."</code></p>
<p>A following header will contain the failure reason and the offending value:</p>
<p><code class="literal">"java.lang.NumberFormatException: Character f is neither a decimal digit number, decimal point,
+ "nor "e" notation exponential mark."</code></p>
<h3><a id="esql-to_version"></a><code class="literal">TO_VERSION</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/to_version.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="324" height="46" viewbox="0 0 324 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m140 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="140" height="36"/><text class="k" x="15" y="31">TO_VERSION</text><rect class="s" x="155" y="5" width="32" height="36" rx="7"/><text class="syn" x="165" y="31">(</text><rect class="s" x="197" y="5" width="80" height="36" rx="7"/><text class="k" x="207" y="31">field</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Input value. The input can be a single- or multi-valued column or an expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts an input string to a version value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW v = TO_VERSION("1.2.3")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">v:version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.2.3</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-mv-functions"></a>ES|QL multivalue functions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/mv-functions.asciidoc">edit</a></h3>
</div></div></div>

<p>ES|QL supports these multivalue functions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_append" title="MV_APPEND"><code class="literal">MV_APPEND</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_avg" title="MV_AVG"><code class="literal">MV_AVG</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_concat" title="MV_CONCAT"><code class="literal">MV_CONCAT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_count" title="MV_COUNT"><code class="literal">MV_COUNT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_dedupe" title="MV_DEDUPE"><code class="literal">MV_DEDUPE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_first" title="MV_FIRST"><code class="literal">MV_FIRST</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_last" title="MV_LAST"><code class="literal">MV_LAST</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_max" title="MV_MAX"><code class="literal">MV_MAX</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_median" title="MV_MEDIAN"><code class="literal">MV_MEDIAN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_min" title="MV_MIN"><code class="literal">MV_MIN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_sort" title="MV_SORT"><code class="literal">MV_SORT</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_slice" title="MV_SLICE"><code class="literal">MV_SLICE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_sum" title="MV_SUM"><code class="literal">MV_SUM</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-mv_zip" title="MV_ZIP"><code class="literal">MV_ZIP</code></a>
</li>
</ul>
</div>
<h3><a id="esql-mv_append"></a><code class="literal">MV_APPEND</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_append.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="468" height="46" viewbox="0 0 468 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">MV_APPEND</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="92" height="36" rx="7"/><text class="k" x="195" y="31">field1</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">,</text><rect class="s" x="329" y="5" width="92" height="36" rx="7"/><text class="k" x="339" y="31">field2</text><rect class="s" x="431" y="5" width="32" height="36" rx="7"/><text class="syn" x="441" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field1</code>
</span>
</dt>
<dt>
<span class="term">
<code class="literal">field2</code>
</span>
</dt>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Concatenates values of two multi-value fields.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field1</th>
<th align="left" valign="top">field2</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_avg"></a><code class="literal">MV_AVG</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_avg.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="288" height="46" viewbox="0 0 288 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">MV_AVG</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="92" height="36" rx="7"/><text class="k" x="159" y="31">number</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued field into a single valued field containing the average of all of the values.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[3, 5, 1, 6]
| EVAL avg_a = MV_AVG(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">avg_a:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[3, 5, 1, 6]</p></td>
<td align="left" valign="top"><p>3.75</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_concat"></a><code class="literal">MV_CONCAT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_concat.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="456" height="46" viewbox="0 0 456 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m92 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">MV_CONCAT</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="92" height="36" rx="7"/><text class="k" x="195" y="31">string</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">,</text><rect class="s" x="329" y="5" width="80" height="36" rx="7"/><text class="k" x="339" y="31">delim</text><rect class="s" x="419" y="5" width="32" height="36" rx="7"/><text class="syn" x="429" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
<dt>
<span class="term">
<code class="literal">delim</code>
</span>
</dt>
<dd>
Delimiter.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued string expression into a single valued column containing the concatenation of all values separated by a delimiter.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string</th>
<th align="left" valign="top">delim</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=["foo", "zoo", "bar"]
| EVAL j = MV_CONCAT(a, ", ")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">j:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>["foo", "zoo", "bar"]</p></td>
<td align="left" valign="top"><p>"foo, zoo, bar"</p></td>
</tr>
</tbody>
</table>
</div>
<p>To concat non-string columns, call <a class="xref" href="esql-functions-operators.html#esql-to_string" title="TO_STRING"><code class="literal">TO_STRING</code></a> first:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[10, 9, 8]
| EVAL j = MV_CONCAT(TO_STRING(a), ", ")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">j:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[10, 9, 8]</p></td>
<td align="left" valign="top"><p>"10, 9, 8"</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_count"></a><code class="literal">MV_COUNT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_count.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="300" height="46" viewbox="0 0 300 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">MV_COUNT</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="80" height="36" rx="7"/><text class="k" x="183" y="31">field</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued expression into a single valued column containing a count of the number of values.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=["foo", "zoo", "bar"]
| EVAL count_a = MV_COUNT(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">count_a:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>["foo", "zoo", "bar"]</p></td>
<td align="left" valign="top"><p>3</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_dedupe"></a><code class="literal">MV_DEDUPE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_dedupe.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="312" height="46" viewbox="0 0 312 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">MV_DEDUPE</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="80" height="36" rx="7"/><text class="k" x="195" y="31">field</text><rect class="s" x="275" y="5" width="32" height="36" rx="7"/><text class="syn" x="285" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Remove duplicate values from a multivalued field.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p><code class="literal">MV_DEDUPE</code> may, but won&#8217;t always, sort the values in the column.</p>
</div>
</div>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=["foo", "foo", "bar", "foo"]
| EVAL dedupe_a = MV_DEDUPE(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">dedupe_a:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>["foo", "foo", "bar", "foo"]</p></td>
<td align="left" valign="top"><p>["foo", "bar"]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_first"></a><code class="literal">MV_FIRST</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_first.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="300" height="46" viewbox="0 0 300 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">MV_FIRST</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="80" height="36" rx="7"/><text class="k" x="183" y="31">field</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued expression into a single valued column containing the first value. This is most useful when reading from a function that emits multivalued columns in a known order like <a class="xref" href="esql-functions-operators.html#esql-split" title="SPLIT"><code class="literal">SPLIT</code></a>.  The order that <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued fields</a> are read from underlying storage is not guaranteed. It is <span class="strong strong"><strong>frequently</strong></span> ascending, but don&#8217;t rely on that. If you need the minimum value use <a class="xref" href="esql-functions-operators.html#esql-mv_min" title="MV_MIN"><code class="literal">MV_MIN</code></a> instead of <code class="literal">MV_FIRST</code>. <code class="literal">MV_MIN</code> has optimizations for sorted values so there isn&#8217;t a performance benefit to <code class="literal">MV_FIRST</code>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a="foo;bar;baz"
| EVAL first_a = MV_FIRST(SPLIT(a, ";"))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">first_a:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>foo;bar;baz</p></td>
<td align="left" valign="top"><p>"foo"</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_last"></a><code class="literal">MV_LAST</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_last.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="288" height="46" viewbox="0 0 288 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m104 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="104" height="36"/><text class="k" x="15" y="31">MV_LAST</text><rect class="s" x="119" y="5" width="32" height="36" rx="7"/><text class="syn" x="129" y="31">(</text><rect class="s" x="161" y="5" width="80" height="36" rx="7"/><text class="k" x="171" y="31">field</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalue expression into a single valued column containing the last value. This is most useful when reading from a function that emits multivalued columns in a known order like <a class="xref" href="esql-functions-operators.html#esql-split" title="SPLIT"><code class="literal">SPLIT</code></a>.  The order that <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued fields</a> are read from underlying storage is not guaranteed. It is <span class="strong strong"><strong>frequently</strong></span> ascending, but don&#8217;t rely on that. If you need the maximum value use <a class="xref" href="esql-functions-operators.html#esql-mv_max" title="MV_MAX"><code class="literal">MV_MAX</code></a> instead of <code class="literal">MV_LAST</code>. <code class="literal">MV_MAX</code> has optimizations for sorted values so there isn&#8217;t a performance benefit to <code class="literal">MV_LAST</code>.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a="foo;bar;baz"
| EVAL last_a = MV_LAST(SPLIT(a, ";"))</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">last_a:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>foo;bar;baz</p></td>
<td align="left" valign="top"><p>"baz"</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_max"></a><code class="literal">MV_MAX</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_max.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">MV_MAX</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="80" height="36" rx="7"/><text class="k" x="159" y="31">field</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued expression into a single valued column containing the maximum value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[3, 5, 1]
| EVAL max_a = MV_MAX(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">max_a:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[3, 5, 1]</p></td>
<td align="left" valign="top"><p>5</p></td>
</tr>
</tbody>
</table>
</div>
<p>It can be used by any column type, including <code class="literal">keyword</code> columns. In that case it picks the last string, comparing their utf-8 representation byte by byte:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=["foo", "zoo", "bar"]
| EVAL max_a = MV_MAX(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">max_a:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>["foo", "zoo", "bar"]</p></td>
<td align="left" valign="top"><p>"zoo"</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_median"></a><code class="literal">MV_MEDIAN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_median.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="324" height="46" viewbox="0 0 324 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m128 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="128" height="36"/><text class="k" x="15" y="31">MV_MEDIAN</text><rect class="s" x="143" y="5" width="32" height="36" rx="7"/><text class="syn" x="153" y="31">(</text><rect class="s" x="185" y="5" width="92" height="36" rx="7"/><text class="k" x="195" y="31">number</text><rect class="s" x="287" y="5" width="32" height="36" rx="7"/><text class="syn" x="297" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued field into a single valued field containing the median value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[3, 5, 1]
| EVAL median_a = MV_MEDIAN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">median_a:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[3, 5, 1]</p></td>
<td align="left" valign="top"><p>3</p></td>
</tr>
</tbody>
</table>
</div>
<p>If the row has an even number of values for a column, the result will be the average of the middle two entries. If the column is not floating point, the average rounds <span class="strong strong"><strong>down</strong></span>:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[3, 7, 1, 6]
| EVAL median_a = MV_MEDIAN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">median_a:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[3, 7, 1, 6]</p></td>
<td align="left" valign="top"><p>4</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_min"></a><code class="literal">MV_MIN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_min.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="276" height="46" viewbox="0 0 276 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">MV_MIN</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="80" height="36" rx="7"/><text class="k" x="159" y="31">field</text><rect class="s" x="239" y="5" width="32" height="36" rx="7"/><text class="syn" x="249" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued expression into a single valued column containing the minimum value.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[2, 1]
| EVAL min_a = MV_MIN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">min_a:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[2, 1]</p></td>
<td align="left" valign="top"><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<p>It can be used by any column type, including <code class="literal">keyword</code> columns. In that case, it picks the first string, comparing their utf-8 representation byte by byte:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=["foo", "bar"]
| EVAL min_a = MV_MIN(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">min_a:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>["foo", "bar"]</p></td>
<td align="left" valign="top"><p>"bar"</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_slice"></a><code class="literal">MV_SLICE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_slice.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="540" height="46" viewbox="0 0 540 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m116 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h10m56 0h10m32 0h5"/><rect class="s" x="5" y="5" width="116" height="36"/><text class="k" x="15" y="31">MV_SLICE</text><rect class="s" x="131" y="5" width="32" height="36" rx="7"/><text class="syn" x="141" y="31">(</text><rect class="s" x="173" y="5" width="80" height="36" rx="7"/><text class="k" x="183" y="31">field</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="80" height="36" rx="7"/><text class="k" x="315" y="31">start</text><rect class="s" x="395" y="5" width="32" height="36" rx="7"/><text class="syn" x="405" y="31">,</text><rect class="s" x="437" y="5" width="56" height="36" rx="7"/><text class="k" x="447" y="31">end</text><rect class="s" x="503" y="5" width="32" height="36" rx="7"/><text class="syn" x="513" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">start</code>
</span>
</dt>
<dd>
Start position. If <code class="literal">null</code>, the function returns <code class="literal">null</code>. The start argument can be negative. An index of -1 is used to specify the last value in the list.
</dd>
<dt>
<span class="term">
<code class="literal">end</code>
</span>
</dt>
<dd>
End position(included). Optional; if omitted, the position at <code class="literal">start</code> is returned. The end argument can be negative. An index of -1 is used to specify the last value in the list.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Returns a subset of the multivalued field using the start and end index values.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">start</th>
<th align="left" valign="top">end</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">row a = [1, 2, 2, 3]
| eval a1 = mv_slice(a, 1), a2 = mv_slice(a, 2, 3)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">a1:integer</th>
<th align="left" valign="top">a2:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[1, 2, 2, 3]</p></td>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>[2, 3]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">row a = [1, 2, 2, 3]
| eval a1 = mv_slice(a, -2), a2 = mv_slice(a, -3, -1)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">a1:integer</th>
<th align="left" valign="top">a2:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[1, 2, 2, 3]</p></td>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p>[2, 2, 3]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_sort"></a><code class="literal">MV_SORT</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_sort.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="420" height="46" viewbox="0 0 420 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m104 0h10m32 0h10m80 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="104" height="36"/><text class="k" x="15" y="31">MV_SORT</text><rect class="s" x="119" y="5" width="32" height="36" rx="7"/><text class="syn" x="129" y="31">(</text><rect class="s" x="161" y="5" width="80" height="36" rx="7"/><text class="k" x="171" y="31">field</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">,</text><rect class="s" x="293" y="5" width="80" height="36" rx="7"/><text class="k" x="303" y="31">order</text><rect class="s" x="383" y="5" width="32" height="36" rx="7"/><text class="syn" x="393" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field</code>
</span>
</dt>
<dd>
Multivalue expression. If <code class="literal">null</code>, the function returns <code class="literal">null</code>.
</dd>
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
Sort order. The valid options are ASC and DESC, the default is ASC.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Sorts a multivalued field in lexicographical order.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">field</th>
<th align="left" valign="top">order</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>version</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = [4, 2, -3, 2]
| EVAL sa = mv_sort(a), sd = mv_sort(a, "DESC")</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">sa:integer</th>
<th align="left" valign="top">sd:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[4, 2, -3, 2]</p></td>
<td align="left" valign="top"><p>[-3, 2, 2, 4]</p></td>
<td align="left" valign="top"><p>[4, 2, 2, -3]</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_sum"></a><code class="literal">MV_SUM</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_sum.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="288" height="46" viewbox="0 0 288 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m92 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">MV_SUM</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="92" height="36" rx="7"/><text class="k" x="159" y="31">number</text><rect class="s" x="251" y="5" width="32" height="36" rx="7"/><text class="syn" x="261" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">number</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Converts a multivalued field into a single valued field containing the sum of all of the values.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">number</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a=[3, 5, 6]
| EVAL sum_a = MV_SUM(a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">sum_a:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[3, 5, 6]</p></td>
<td align="left" valign="top"><p>14</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-mv_zip"></a><code class="literal">MV_ZIP</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/layout/mv_zip.asciidoc">edit</a></h3>
<p><span class="strong strong"><strong>Syntax</strong></span></p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="588" height="46" viewbox="0 0 588 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .k{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .s{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m92 0h10m32 0h10m104 0h10m32 0h10m104 0h10m32 0h10m80 0h10m32 0h5"/><rect class="s" x="5" y="5" width="92" height="36"/><text class="k" x="15" y="31">MV_ZIP</text><rect class="s" x="107" y="5" width="32" height="36" rx="7"/><text class="syn" x="117" y="31">(</text><rect class="s" x="149" y="5" width="104" height="36" rx="7"/><text class="k" x="159" y="31">string1</text><rect class="s" x="263" y="5" width="32" height="36" rx="7"/><text class="syn" x="273" y="31">,</text><rect class="s" x="305" y="5" width="104" height="36" rx="7"/><text class="k" x="315" y="31">string2</text><rect class="s" x="419" y="5" width="32" height="36" rx="7"/><text class="syn" x="429" y="31">,</text><rect class="s" x="461" y="5" width="80" height="36" rx="7"/><text class="k" x="471" y="31">delim</text><rect class="s" x="551" y="5" width="32" height="36" rx="7"/><text class="syn" x="561" y="31">)</text></svg>
</div>
</div>
<p><span class="strong strong"><strong>Parameters</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">string1</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
<dt>
<span class="term">
<code class="literal">string2</code>
</span>
</dt>
<dd>
Multivalue expression.
</dd>
<dt>
<span class="term">
<code class="literal">delim</code>
</span>
</dt>
<dd>
Delimiter. Optional; if omitted, <code class="literal">,</code> is used as a default delimiter.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Description</strong></span></p>
<p>Combines the values from two multivalued fields with a delimiter that joins them together.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">string1</th>
<th align="left" valign="top">string2</th>
<th align="left" valign="top">delim</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Example</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = ["x", "y", "z"], b = ["1", "2"]
| EVAL c = mv_zip(a, b, "-")
| KEEP a, b, c</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:keyword</th>
<th align="left" valign="top">b:keyword</th>
<th align="left" valign="top">c:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>[x, y, z]</p></td>
<td align="left" valign="top"><p>[1 ,2]</p></td>
<td align="left" valign="top"><p>[x-1, y-2, z]</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-operators"></a>ES|QL operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/operators.asciidoc">edit</a></h3>
</div></div></div>

<p>Boolean operators for comparing against one or multiple expressions.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-binary-operators" title="Binary operators">Binary operators</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-unary-operators" title="Unary operators">Unary operators</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-logical-operators" title="Logical operators">Logical operators</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-predicates" title="IS NULL and IS NOT NULL predicates"><code class="literal">IS NULL</code> and <code class="literal">IS NOT NULL</code> predicates</a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-cast-operator" title="Cast (::)"><code class="literal">Cast (::)</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-in-operator" title="IN"><code class="literal">IN</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-like-operator" title="LIKE"><code class="literal">LIKE</code></a>
</li>
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-rlike-operator" title="RLIKE"><code class="literal">RLIKE</code></a>
</li>
</ul>
</div>
<h3><a id="esql-binary-operators"></a>Binary operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-binary-operators-equality"></a>Equality<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="186" height="46" viewbox="0 0 186 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m44 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="44" height="36" rx="7"/><text class="syn" x="81" y="31">==</text><rect class="l" x="125" y="5" width="56" height="36" rx="7"/><text class="j" x="135" y="31">rhs</text></svg>
</div>
</div>
<p>Check if two fields are equal. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a> then
the result is <code class="literal">null</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is pushed to the underlying search index if one side of the comparison is constant
      and the other side is a field in the index that has both an <a class="xref" href="mapping-index.html" title="index"><code class="literal">index</code></a> and <a class="xref" href="doc-values.html" title="doc_values"><code class="literal">doc_values</code></a>.</p>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_inequality"></a>Inequality <code class="literal">!=</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="186" height="46" viewbox="0 0 186 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m44 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="44" height="36" rx="7"/><text class="syn" x="81" y="31">!=</text><rect class="l" x="125" y="5" width="56" height="36" rx="7"/><text class="j" x="135" y="31">rhs</text></svg>
</div>
</div>
<p>Check if two fields are unequal. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a> then
the result is <code class="literal">null</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is pushed to the underlying search index if one side of the comparison is constant
      and the other side is a field in the index that has both an <a class="xref" href="mapping-index.html" title="index"><code class="literal">index</code></a> and <a class="xref" href="doc-values.html" title="doc_values"><code class="literal">doc_values</code></a>.</p>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>cartesian_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>cartesian_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>geo_shape</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_less_than"></a>Less than <code class="literal">&lt;</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="174" height="46" viewbox="0 0 174 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">&lt;</text><rect class="l" x="113" y="5" width="56" height="36" rx="7"/><text class="j" x="123" y="31">rhs</text></svg>
</div>
</div>
<p>Check if one field is less than another. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is pushed to the underlying search index if one side of the comparison is constant
      and the other side is a field in the index that has both an <a class="xref" href="mapping-index.html" title="index"><code class="literal">index</code></a> and <a class="xref" href="doc-values.html" title="doc_values"><code class="literal">doc_values</code></a>.</p>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_less_than_or_equal_to"></a>Less than or equal to <code class="literal">&lt;=</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="186" height="46" viewbox="0 0 186 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m44 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="44" height="36" rx="7"/><text class="syn" x="81" y="31">&lt;=</text><rect class="l" x="125" y="5" width="56" height="36" rx="7"/><text class="j" x="135" y="31">rhs</text></svg>
</div>
</div>
<p>Check if one field is less than or equal to another. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is pushed to the underlying search index if one side of the comparison is constant
      and the other side is a field in the index that has both an <a class="xref" href="mapping-index.html" title="index"><code class="literal">index</code></a> and <a class="xref" href="doc-values.html" title="doc_values"><code class="literal">doc_values</code></a>.</p>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_greater_than"></a>Greater than <code class="literal">&gt;</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="174" height="46" viewbox="0 0 174 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">&gt;</text><rect class="l" x="113" y="5" width="56" height="36" rx="7"/><text class="j" x="123" y="31">rhs</text></svg>
</div>
</div>
<p>Check if one field is greater than another. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is pushed to the underlying search index if one side of the comparison is constant
      and the other side is a field in the index that has both an <a class="xref" href="mapping-index.html" title="index"><code class="literal">index</code></a> and <a class="xref" href="doc-values.html" title="doc_values"><code class="literal">doc_values</code></a>.</p>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_greater_than_or_equal_to"></a>Greater than or equal to <code class="literal">&gt;=</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="186" height="46" viewbox="0 0 186 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m44 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="44" height="36" rx="7"/><text class="syn" x="81" y="31">&gt;=</text><rect class="l" x="125" y="5" width="56" height="36" rx="7"/><text class="j" x="135" y="31">rhs</text></svg>
</div>
</div>
<p>Check if one field is greater than or equal to another. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is pushed to the underlying search index if one side of the comparison is constant
      and the other side is a field in the index that has both an <a class="xref" href="mapping-index.html" title="index"><code class="literal">index</code></a> and <a class="xref" href="doc-values.html" title="doc_values"><code class="literal">doc_values</code></a>.</p>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>ip</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>version</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_add"></a>Add <code class="literal">+</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="174" height="46" viewbox="0 0 174 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">+</text><rect class="l" x="113" y="5" width="56" height="36" rx="7"/><text class="j" x="123" y="31">rhs</text></svg>
</div>
</div>
<p>Add two numbers together. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>date_period</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_subtract"></a>Subtract <code class="literal">-</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="174" height="46" viewbox="0 0 174 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">-</text><rect class="l" x="113" y="5" width="56" height="36" rx="7"/><text class="j" x="123" y="31">rhs</text></svg>
</div>
</div>
<p>Subtract one number from another. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>date_period</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>datetime</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>datetime</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_multiply"></a>Multiply <code class="literal">*</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="174" height="46" viewbox="0 0 174 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">*</text><rect class="l" x="113" y="5" width="56" height="36" rx="7"/><text class="j" x="123" y="31">rhs</text></svg>
</div>
</div>
<p>Multiply two numbers together. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_divide"></a>Divide <code class="literal">/</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="174" height="46" viewbox="0 0 174 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">/</text><rect class="l" x="113" y="5" width="56" height="36" rx="7"/><text class="j" x="123" y="31">rhs</text></svg>
</div>
</div>
<p>Divide one number by another. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Division of two integer types will yield an integer result, rounding towards 0.
      If you need floating point division, <a class="xref" href="esql-functions-operators.html#esql-cast-operator" title="Cast (::)"><code class="literal">Cast (::)</code></a> one of the arguments to a <code class="literal">DOUBLE</code>.</p>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_modulus"></a>Modulus <code class="literal">%</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/binary.asciidoc">edit</a></h3>
</div></div></div>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="174" height="46" viewbox="0 0 174 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m56 0h10m32 0h10m56 0h5"/><rect class="l" x="5" y="5" width="56" height="36" rx="7"/><text class="j" x="15" y="31">lhs</text><rect class="l" x="71" y="5" width="32" height="36" rx="7"/><text class="syn" x="81" y="31">%</text><rect class="l" x="113" y="5" width="56" height="36" rx="7"/><text class="j" x="123" y="31">rhs</text></svg>
</div>
</div>
<p>Divide one number by another and return the remainder. If either field is <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">multivalued</a>
then the result is <code class="literal">null</code>.</p>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">lhs</th>
<th align="left" valign="top">rhs</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
<td align="left" valign="top"><p>unsigned_long</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-unary-operators"></a>Unary operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/unary.asciidoc">edit</a></h3>
<p>The only unary operators is negation (<code class="literal">-</code>):</p>
<div class="imageblock text-center">
<div class="content">
<svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="84" height="46" viewbox="0 0 84 46"><defs><style type="text/css">#guide .c{fill:none;stroke:#222222;}#guide .j{fill:#000000;font-family:Roboto Mono,Sans-serif;font-size:20px;}#guide .l{fill:#e4f4ff;stroke:#222222;}#guide .syn{fill:#8D8D8D;font-family:Roboto Mono,Sans-serif;font-size:20px;}</style></defs><path class="c" d="M0 31h5m32 0h10m32 0h5"/><rect class="l" x="5" y="5" width="32" height="36" rx="7"/><text class="syn" x="15" y="31">-</text><rect class="l" x="47" y="5" width="32" height="36" rx="7"/><text class="j" x="57" y="31">v</text></svg>
</div>
</div>
<p>Supported types:</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">v</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>date_period</p></td>
<td align="left" valign="top"><p>date_period</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>double</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>integer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>long</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>time_duration</p></td>
<td align="left" valign="top"><p>time_duration</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-logical-operators"></a>Logical operators<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/logical.asciidoc">edit</a></h3>
<p>The following logical operators are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">AND</code>
</li>
<li class="listitem">
<code class="literal">OR</code>
</li>
<li class="listitem">
<code class="literal">NOT</code>
</li>
</ul>
</div>
<h3><a id="esql-predicates"></a><code class="literal">IS NULL</code> and <code class="literal">IS NOT NULL</code> predicates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/predicates.asciidoc">edit</a></h3>
<p>For NULL comparison, use the <code class="literal">IS NULL</code> and <code class="literal">IS NOT NULL</code> predicates:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE birth_date IS NULL
| KEEP first_name, last_name
| SORT first_name
| LIMIT 3</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Basil</p></td>
<td align="left" valign="top"><p>Tramer</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Florian</p></td>
<td align="left" valign="top"><p>Syrotiuk</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Lucien</p></td>
<td align="left" valign="top"><p>Rosenbaum</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE is_rehired IS NOT NULL
| STATS COUNT(emp_no)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">COUNT(emp_no):long</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>84</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="discete">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-cast-operator"></a><code class="literal">Cast (::)</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/cast.asciidoc">edit</a></h3>
</div></div></div>
<p>The <code class="literal">::</code> operator provides a convenient alternative syntax to the TO_&lt;type&gt;
<a class="xref" href="esql-functions-operators.html#esql-type-conversion-functions" title="ES|QL type conversion functions">conversion functions</a>.</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW ver = CONCAT(("0"::INT + 1)::STRING, ".2.3")::VERSION</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">ver:version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1.2.3</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-in-operator"></a><code class="literal">IN</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/in.asciidoc">edit</a></h3>
<p>The <code class="literal">IN</code> operator allows testing whether a field or expression equals
an element in a list of literals, fields or expressions:</p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">ROW a = 1, b = 4, c = 3
| WHERE c-a IN (3, b / 2, a)</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">a:integer</th>
<th align="left" valign="top">b:integer</th>
<th align="left" valign="top">c:integer</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p>3</p></td>
</tr>
</tbody>
</table>
</div>
<h3><a id="esql-like-operator"></a><code class="literal">LIKE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/like.asciidoc">edit</a></h3>
<p>Use <code class="literal">LIKE</code> to filter data based on string patterns using wildcards. <code class="literal">LIKE</code>
usually acts on a field placed on the left-hand side of the operator, but it can
also act on a constant (literal) expression. The right-hand side of the operator
represents the pattern.</p>
<p>The following wildcard characters are supported:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">*</code> matches zero or more characters.
</li>
<li class="listitem">
<code class="literal">?</code> matches one character.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str</th>
<th align="left" valign="top">pattern</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE first_name LIKE "?b*"
| KEEP first_name, last_name</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Ebbe</p></td>
<td align="left" valign="top"><p>Callaway</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Eberhardt</p></td>
<td align="left" valign="top"><p>Terkki</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="discete">
<div class="titlepage"><div><div>
<h3 class="title"><a id="esql-rlike-operator"></a><code class="literal">RLIKE</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/esql/functions/rlike.asciidoc">edit</a></h3>
</div></div></div>
<p>Use <code class="literal">RLIKE</code> to filter data based on string patterns using using
<a class="xref" href="regexp-syntax.html" title="Regular expression syntax">regular expressions</a>. <code class="literal">RLIKE</code> usually acts on a field placed on
the left-hand side of the operator, but it can also act on a constant (literal)
expression. The right-hand side of the operator represents the pattern.</p>
<p><span class="strong strong"><strong>Supported types</strong></span></p>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">str</th>
<th align="left" valign="top">pattern</th>
<th align="left" valign="top">result</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>keyword</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>boolean</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">FROM employees
| WHERE first_name RLIKE ".leja.*"
| KEEP first_name, last_name</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">first_name:keyword</th>
<th align="left" valign="top">last_name:keyword</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Alejandro</p></td>
<td align="left" valign="top"><p>McAlpine</p></td>
</tr>
</tbody>
</table>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="esql-commands.html">« ES|QL commands</a>
</span>
<span class="next">
<a href="esql-metadata-fields.html">ES|QL metadata fields »</a>
</span>
</div>
</body>
</html>
