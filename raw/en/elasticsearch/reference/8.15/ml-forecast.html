<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Forecast jobs API | Elasticsearch Guide [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Forecast jobs API | Elasticsearch Guide [8.15]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.15]"/>
<link rel="up" href="ml-ad-apis.html" title="Machine learning anomaly detection APIs"/>
<link rel="prev" href="ml-flush-job.html" title="Flush jobs API"/>
<link rel="next" href="ml-get-bucket.html" title="Get buckets API"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.15"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.15"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="ml-flush-job.html">« Flush jobs API</a>
</span>
<span class="next">
<a href="ml-get-bucket.html">Get buckets API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-ad-apis.html">Machine learning anomaly detection APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Forecast jobs API</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-forecast"></a>Forecast jobs API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h2>
</div></div></div>

<p>Predicts the future behavior of a time series by using its historical behavior.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-forecast-request"></a>Request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST _ml/anomaly_detectors/&lt;job_id&gt;/_forecast</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-forecast-prereqs"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h3>
</div></div></div>
<p>Requires the <code class="literal">manage_ml</code> cluster privilege. This privilege is included in the
<code class="literal">machine_learning_admin</code> built-in role.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-forecast-desc"></a>Description<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h3>
</div></div></div>
<p>You can create a forecast job based on an anomaly detection job to extrapolate future
behavior. Refer to
<a href="/guide/en/machine-learning/8.15/ml-ad-forecast.html" class="ulink" target="_top">Forecasting the future</a>
and
<a href="/guide/en/machine-learning/8.15/ml-limitations.html#ml-forecast-limitations" class="ulink" target="_top">Forecast limitations</a> to
learn more.</p>
<p>You can delete a forecast by using the
<a class="xref" href="ml-delete-forecast.html" title="Delete forecasts API">Delete forecast API</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Forecasts are not supported for jobs that perform population analysis; an
error occurs if you try to create a forecast for a job that has an
<code class="literal">over_field_name</code> property in its configuration.
</li>
<li class="listitem">
The job must be open when you create a forecast. Otherwise, an error occurs.
</li>
</ul>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-forecast-path-parms"></a>Path parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;job_id&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Identifier for the anomaly detection job.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-forecast-query-parms"></a>Query parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">duration</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>) A period of time that indicates how far
into the future to forecast. For example, <code class="literal">30d</code> corresponds to 30 days. The
default value is 1 day. The forecast starts at the last record that was
processed.
</dd>
<dt>
<span class="term">
<code class="literal">expires_in</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>) The period of time that forecast
results are retained. After a forecast expires, the results are deleted. The
default value is 14 days. If set to a value of <code class="literal">0</code>, the forecast is never
automatically deleted.
</dd>
<dt>
<span class="term">
<code class="literal">max_model_memory</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#byte-units" title="Byte size units">byte value</a>) The maximum memory the forecast can use.
If the forecast needs to use more than the provided amount, it will spool to
disk. Default is 20mb, maximum is 500mb and minimum is 1mb. If set to 40% or
more of the job&#8217;s configured memory limit, it is automatically reduced to
below that amount.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-forecast-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h3>
</div></div></div>
<p>You can also specify the query parameters (such as <code class="literal">duration</code> and
<code class="literal">expires_in</code>) in the request body.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-forecast-example"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/ml/anomaly-detection/apis/forecast.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.ml.forecast({
  job_id: "low_request_rate",
  duration: "10d",
});
console.log(response);</pre>
</div>
<a id="591c7fb7451069829a14bba593136f1f"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">POST _ml/anomaly_detectors/low_request_rate/_forecast
{
  "duration": "10d"
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/2931.console"></div>
<p>When the forecast is created, you receive the following results:</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">{
  "acknowledged": true,
  "forecast_id": "wkCWa2IB2lF8nSE_TzZo"
}</pre>
</div>
<p>You can subsequently see the forecast in the <span class="strong strong"><strong>Single Metric Viewer</strong></span> in Kibana.</p>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ml-flush-job.html">« Flush jobs API</a>
</span>
<span class="next">
<a href="ml-get-bucket.html">Get buckets API »</a>
</span>
</div>
</body>
</html>
