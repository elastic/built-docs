<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cluster fault detection | Elasticsearch Guide [8.16] | Elastic</title>
<meta class="elastic" name="content" content="Cluster fault detection | Elasticsearch Guide [8.16]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.16]"/>
<link rel="up" href="modules-discovery.html" title="Discovery and cluster formation"/>
<link rel="prev" href="cluster-state-publishing.html" title="Publishing the cluster state"/>
<link rel="next" href="add-elasticsearch-nodes.html" title="Add and remove nodes in your cluster"/>
<meta class="elastic" name="product_version" content="8.16"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.16"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="cluster-state-publishing.html">« Publishing the cluster state</a>
</span>
<span class="next">
<a href="add-elasticsearch-nodes.html">Add and remove nodes in your cluster »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="modules-discovery.html">Discovery and cluster formation</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Cluster fault detection</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="cluster-fault-detection"></a>Cluster fault detection</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
</div></div></div>
<p>The elected master periodically checks each of the nodes in the cluster to
ensure that they are still connected and healthy. Each node in the cluster also
periodically checks the health of the elected master. These checks are known
respectively as <em>follower checks</em> and <em>leader checks</em>.</p>
<p>Elasticsearch allows these checks to occasionally fail or timeout without
taking any action. It considers a node to be faulty only after a number of
consecutive checks have failed. You can control fault detection behavior with
<a class="xref" href="modules-discovery-settings.html" title="Discovery and cluster formation settings"><code class="literal">cluster.fault_detection.*</code> settings</a>.</p>
<p>If the elected master detects that a node has disconnected, however, this
situation is treated as an immediate failure. The master bypasses the timeout
and retry setting values and attempts to remove the node from the cluster.
Similarly, if a node detects that the elected master has disconnected, this
situation is treated as an immediate failure. The node bypasses the timeout and
retry settings and restarts its discovery phase to try and find or elect a new
master.</p>
<p><a id="cluster-fault-detection-filesystem-health"></a>Additionally, each node periodically verifies that its data path is healthy by
writing a small file to disk and then deleting it again. If a node discovers
its data path is unhealthy then it is removed from the cluster until the data
path recovers. You can control this behavior with the
<a class="xref" href="modules-discovery-settings.html" title="Discovery and cluster formation settings"><code class="literal">monitor.fs.health</code> settings</a>.</p>
<p><a id="cluster-fault-detection-cluster-state-publishing"></a>The elected master node
will also remove nodes from the cluster if nodes are unable to apply an updated
cluster state within a reasonable time. The timeout defaults to 2 minutes
starting from the beginning of the cluster state update. Refer to
<a class="xref" href="cluster-state-publishing.html" title="Publishing the cluster state">Publishing the cluster state</a> for a more detailed description.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="cluster-fault-detection-troubleshooting"></a>Troubleshooting an unstable cluster</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
</div></div></div>
<p>See <a class="xref" href="troubleshooting-unstable-cluster.html" title="Troubleshooting an unstable cluster"><em>Troubleshooting an unstable cluster</em></a>.</p>
<div class="position-relative"><h5><a id="_diagnosing_disconnected_nodes"></a>Diagnosing <code class="literal">disconnected</code> nodes</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
<p>See <a class="xref" href="troubleshooting-unstable-cluster.html#troubleshooting-unstable-cluster-disconnected" title="Diagnosing disconnected nodes">Diagnosing <code class="literal">disconnected</code> nodes</a>.</p>
<div class="position-relative"><h5><a id="_diagnosing_lagging_nodes"></a>Diagnosing <code class="literal">lagging</code> nodes</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
<p>See <a class="xref" href="troubleshooting-unstable-cluster.html#troubleshooting-unstable-cluster-lagging" title="Diagnosing lagging nodes">Diagnosing <code class="literal">lagging</code> nodes</a>.</p>
<div class="position-relative"><h5><a id="_diagnosing_follower_check_retry_count_exceeded_nodes"></a>Diagnosing <code class="literal">follower check retry count exceeded</code> nodes</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
<p>See <a class="xref" href="troubleshooting-unstable-cluster.html#troubleshooting-unstable-cluster-follower-check" title="Diagnosing follower check retry count exceeded nodes">Diagnosing <code class="literal">follower check retry count exceeded</code> nodes</a>.</p>
<div class="position-relative"><h5><a id="_diagnosing_shardlockobtainfailedexception_failures"></a>Diagnosing <code class="literal">ShardLockObtainFailedException</code> failures</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
<p>See <a class="xref" href="troubleshooting-unstable-cluster.html#troubleshooting-unstable-cluster-shardlockobtainfailedexception" title="Diagnosing ShardLockObtainFailedException failures">Diagnosing <code class="literal">ShardLockObtainFailedException</code> failures</a>.</p>
<div class="position-relative"><h5><a id="_diagnosing_other_network_disconnections"></a>Diagnosing other network disconnections</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/modules/discovery/fault-detection.asciidoc">edit</a></div>
<p>See <a class="xref" href="troubleshooting-unstable-cluster.html#troubleshooting-unstable-cluster-network" title="Diagnosing other network disconnections">Diagnosing other network disconnections</a>.</p>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="cluster-state-publishing.html">« Publishing the cluster state</a>
</span>
<span class="next">
<a href="add-elasticsearch-nodes.html">Add and remove nodes in your cluster »</a>
</span>
</div>
</body>
</html>
