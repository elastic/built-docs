<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Migrating to 8.15 | Elasticsearch Guide [8.16] | Elastic</title>
<meta class="elastic" name="content" content="Migrating to 8.15 | Elasticsearch Guide [8.16]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.16]"/>
<link rel="up" href="breaking-changes.html" title="Migration guide"/>
<link rel="prev" href="migrating-8.16.html" title="Migrating to 8.16"/>
<link rel="next" href="migrating-8.14.html" title="Migrating to 8.14"/>
<meta class="elastic" name="product_version" content="8.16"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.16"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="migrating-8.16.html">« Migrating to 8.16</a>
</span>
<span class="next">
<a href="migrating-8.14.html">Migrating to 8.14 »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="breaking-changes.html">Migration guide</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Migrating to 8.15</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="migrating-8.15"></a>Migrating to 8.15</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
</div></div></div>

<p>This section discusses the changes that you need to be aware of when migrating
your application to Elasticsearch 8.15.</p>
<p>See also <a class="xref" href="release-highlights.html" title="What&#8217;s new in 8.16"><em>What&#8217;s new in 8.16</em></a> and <a class="xref" href="es-release-notes.html" title="Release notes">Release notes</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Coming in 8.15.0.</p>
</div>
</div>
<div class="position-relative"><h3><a id="breaking-changes-8.15"></a>Breaking changes</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
<p>The following changes in Elasticsearch 8.15 might affect your applications
and prevent them from operating normally.
Before upgrading to 8.15, review these changes and take the described steps
to mitigate the impact.</p>
<div class="position-relative"><h4><a id="breaking_815_cluster_and_node_setting_changes"></a>Cluster and node setting changes</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
<details id="change_skip_unavailable_remote_cluster_setting_default_value_to_true">
<summary class="title">Change <code class="literal">skip_unavailable</code> remote cluster setting default value to true</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The default value of the <code class="literal">skip_unavailable</code> setting is now set to true. All existing and future remote clusters that do not define this setting will use the new default. This setting only affects cross-cluster searches using the _search or _async_search API.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Unavailable remote clusters in a cross-cluster search will no longer cause the search to fail unless skip_unavailable is configured to be <code class="literal">false</code> in elasticsearch.yml or via the <code class="literal">_cluster/settings</code> API. Unavailable clusters with <code class="literal">skip_unavailable</code>=<code class="literal">true</code> (either explicitly or by using the new default) are marked as SKIPPED in the search response metadata section and do not fail the entire search. If users want to ensure that a search returns a failure when a particular remote cluster is not available, <code class="literal">skip_unavailable</code> must be now be set explicitly.</p>
</div>
</details>
<div class="position-relative"><h4><a id="breaking_815_rollup_changes"></a>Rollup changes</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
<details id="disallow_new_rollup_jobs_in_clusters_with_no_rollup_usage">
<summary class="title">Disallow new rollup jobs in clusters with no rollup usage</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The put rollup API will fail with an error when a rollup job is created in a cluster with no rollup usage</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Clusters with no rollup usage (either no rollup job or index) can not create new rollup jobs</p>
</div>
</details>
<div class="position-relative"><h4><a id="breaking_815_rest_api_changes"></a>REST API changes</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
<details id="interpret_timeout_1_as_infinite_ack_timeout">
<summary class="title">Interpret <code class="literal">?timeout=-1</code> as infinite ack timeout</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Today Elasticsearch accepts the parameter <code class="literal">?timeout=-1</code> in many APIs, but interprets
this to mean the same as <code class="literal">?timeout=0</code>. From 8.15 onwards <code class="literal">?timeout=-1</code> will
mean to wait indefinitely, aligning the behaviour of this parameter with
other similar parameters such as <code class="literal">?master_timeout</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use <code class="literal">?timeout=0</code> to force relevant operations to time out immediately
instead of <code class="literal">?timeout=-1</code></p>
</div>
</details>
<details id="replace_model_id_with_inference_id">
<summary class="title">Replace <code class="literal">model_id</code> with <code class="literal">inference_id</code> in GET inference API</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
From 8.15 onwards the <a class="xref" href="get-inference-api.html" title="Get inference API">Get inference API</a> response will return an
<code class="literal">inference_id</code> field instead of a <code class="literal">model_id</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If your application uses the <code class="literal">model_id</code> in a GET inference API response,
switch it to use <code class="literal">inference_id</code> instead.</p>
</div>
</details>
<div class="position-relative"><h3><a id="deprecated-8.15"></a>Deprecations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
<p>The following functionality has been deprecated in Elasticsearch 8.15
and will be removed in a future version.
While this won&#8217;t have an immediate impact on your applications,
we strongly encourage you to take the described steps to update your code
after upgrading to 8.15.</p>
<p>To find out if you are using any deprecated functionality,
enable <a class="xref" href="logging.html#deprecation-logging" title="Deprecation logging">deprecation logging</a>.</p>
<div class="position-relative"><h4><a id="deprecations_815_cluster_and_node_setting"></a>Cluster and node setting deprecations</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
<details id="deprecate_absolute_size_values_for_indices_breaker_total_limit_setting">
<summary class="title">Deprecate absolute size values for <code class="literal">indices.breaker.total.limit</code> setting</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, the value of <code class="literal">indices.breaker.total.limit</code> could be specified as an absolute size in bytes. This setting controls the overal amount of memory the server is allowed to use before taking remedial actions. Setting this to a specific number of bytes led to strange behaviour when the node maximum heap size changed because the circut breaker limit would remain unchanged. This would either leave the value too low, causing part of the heap to remain unused; or it would leave the value too high, causing the circuit breaker to be ineffective at preventing OOM errors.  The only reasonable behaviour for this setting is that it scales with the size of the heap, and so absolute byte limits are now deprecated.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Users must change their configuration to specify a percentage instead of an absolute number of bytes for <code class="literal">indices.breaker.total.limit</code>, or else accept the default, which is already specified as a percentage.</p>
</div>
</details>
<div class="position-relative"><h4><a id="deprecations_815_rest_api"></a>REST API deprecations</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/migration/migrate_8_15.asciidoc">edit</a></div>
<details id="deprecate_text_expansion_weighted_tokens_queries">
<summary class="title">Deprecate <code class="literal">text_expansion</code> and <code class="literal">weighted_tokens</code> queries</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">text_expansion</code> and <code class="literal">weighted_tokens</code> queries have been replaced by <code class="literal">sparse_vector</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Please update your existing <code class="literal">text_expansion</code> and <code class="literal">weighted_tokens</code> queries to use <code class="literal">sparse_vector.</code></p>
</div>
</details>
<details id="deprecate_using_slm_privileges_to_access_ilm">
<summary class="title">Deprecate using slm privileges to access ilm</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">read_slm</code> privilege can get the ILM status, and the <code class="literal">manage_slm</code> privilege can start and stop ILM. Access to these APIs should be granted using the <code class="literal">read_ilm</code> and <code class="literal">manage_ilm</code> privileges instead. Access to ILM APIs will be removed from SLM privileges in a future major release, and is now deprecated.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Users that need access to the ILM status API should now use the <code class="literal">read_ilm</code> privilege. Users that need to start and stop ILM, should use the <code class="literal">manage_ilm</code> privilege.</p>
</div>
</details>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="migrating-8.16.html">« Migrating to 8.16</a>
</span>
<span class="next">
<a href="migrating-8.14.html">Migrating to 8.14 »</a>
</span>
</div>
</body>
</html>
