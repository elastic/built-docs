<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tutorial: semantic search with the inference API | Elasticsearch Guide [8.16] | Elastic</title>
<meta class="elastic" name="content" content="Tutorial: semantic search with the inference API | Elasticsearch Guide [8.16]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.16]"/>
<link rel="up" href="semantic-search.html" title="Semantic search"/>
<link rel="prev" href="semantic-search-semantic-text.html" title="Tutorial: semantic search with semantic_text"/>
<link rel="next" href="semantic-search-elser.html" title="Tutorial: semantic search with ELSER"/>
<meta class="elastic" name="product_version" content="8.16"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.16"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="semantic-search-semantic-text.html">« Tutorial: semantic search with <code class="literal">semantic_text</code></a>
</span>
<span class="next">
<a href="semantic-search-elser.html">Tutorial: semantic search with ELSER »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="search-with-elasticsearch.html">Search your data</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="semantic-search.html">Semantic search</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Tutorial: semantic search with the inference API</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="semantic-search-inference"></a>Tutorial: semantic search with the inference API</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
</div></div></div>

<p>The instructions in this tutorial shows you how to use the inference API workflow with various services to perform semantic search on your data.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>For the easiest way to perform semantic search in the Elastic Stack, refer to the <a class="xref" href="semantic-search-semantic-text.html" title="Tutorial: semantic search with semantic_text"><code class="literal">semantic_text</code></a> end-to-end tutorial.</p>
</div>
</div>
<p>The following examples use the:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">embed-english-v3.0</code> model for <a href="https://docs.cohere.com/docs/cohere-embed" class="ulink" target="_top">Cohere</a>
</li>
<li class="listitem">
<code class="literal">all-mpnet-base-v2</code> model from <a href="https://huggingface.co/sentence-transformers/all-mpnet-base-v2" class="ulink" target="_top">HuggingFace</a>
</li>
<li class="listitem">
<code class="literal">text-embedding-ada-002</code> second generation embedding model for OpenAI
</li>
<li class="listitem">
models available through <a href="https://ai.azure.com/explore/models?selectedTask=embeddings" class="ulink" target="_top">Azure AI Studio</a> or <a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models" class="ulink" target="_top">Azure OpenAI</a>
</li>
<li class="listitem">
<code class="literal">text-embedding-004</code> model for <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text-embeddings-api" class="ulink" target="_top">Google Vertex AI</a>
</li>
<li class="listitem">
<code class="literal">mistral-embed</code> model for <a href="https://docs.mistral.ai/getting-started/models/" class="ulink" target="_top">Mistral</a>
</li>
<li class="listitem">
<code class="literal">amazon.titan-embed-text-v1</code> model for <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/model-ids.html" class="ulink" target="_top">Amazon Bedrock</a>
</li>
<li class="listitem">
<code class="literal">ops-text-embedding-zh-001</code> model for <a href="https://help.aliyun.com/zh/open-search/search-platform/developer-reference/text-embedding-api-details" class="ulink" target="_top">AlibabaCloud AI</a>
</li>
</ul>
</div>
<p>You can use any Cohere and OpenAI models, they are all supported by the inference API.
For a list of recommended models available on HuggingFace, refer to <a class="xref" href="infer-service-hugging-face.html#inference-example-hugging-face-supported-models">the supported model list</a>.</p>
<p>Click the name of the service you want to use on any of the widgets below to review the corresponding instructions.</p>
<div class="position-relative"><h4><a id="infer-service-requirements"></a>Requirements</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<div class="tabs" data-tab-group="model">
  <div role="tablist" aria-label="model">
    <button role="tab"
            aria-selected="true"
            aria-controls="infer-api-requirements-cohere-tab"
            id="infer-api-requirements-cohere">
      Cohere
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-elser-tab"
            id="infer-api-requirements-elser">
      ELSER
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-hf-tab"
            id="infer-api-requirements-hf">
      HuggingFace
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-openai-tab"
            id="infer-api-requirements-openai">
      OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-azure-openai-tab"
            id="infer-api-requirements-azure-openai">
      Azure OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-azure-ai-studio-tab"
            id="infer-api-requirements-azure-ai-studio">
      Azure AI Studio
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-google-vertex-ai-tab"
            id="infer-api-requirements-google-vertex-ai">
      Google Vertex AI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-mistral-tab"
            id="infer-api-requirements-mistral">
      Mistral
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-amazon-bedrock-tab"
            id="infer-api-requirements-amazon-bedrock">
      Amazon Bedrock
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-requirements-alibabacloud-ai-search-tab"
            id="infer-api-requirements-alibabacloud-ai-search">
      AlibabaCloud AI Search
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-cohere-tab"
       aria-labelledby="infer-api-requirements-cohere">
<p>A <a href="https://cohere.com/" class="ulink" target="_top">Cohere account</a> is required to use the inference API with
the Cohere service.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-elser-tab"
       aria-labelledby="infer-api-requirements-elser"
       hidden="">
<p>ELSER is a model trained by Elastic. If you have an Elasticsearch deployment, there is no
further requirement for using the inference API with the <code class="literal">elser</code> service.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-hf-tab"
       aria-labelledby="infer-api-requirements-hf"
       hidden="">
<p>A <a href="https://huggingface.co/" class="ulink" target="_top">HuggingFace account</a> is required to use the inference
API with the HuggingFace service.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-openai-tab"
       aria-labelledby="infer-api-requirements-openai"
       hidden="">
<p>An <a href="https://openai.com/" class="ulink" target="_top">OpenAI account</a> is required to use the inference API with
the OpenAI service.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-azure-openai-tab"
       aria-labelledby="infer-api-requirements-azure-openai"
       hidden="">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An <a href="https://azure.microsoft.com/free/cognitive-services?azure-portal=true" class="ulink" target="_top">Azure subscription</a>
</li>
<li class="listitem">
Access granted to Azure OpenAI in the desired Azure subscription.
You can apply for access to Azure OpenAI by completing the form at <a href="https://aka.ms/oai/access" class="ulink" target="_top">https://aka.ms/oai/access</a>.
</li>
<li class="listitem">
An embedding model deployed in <a href="https://oai.azure.com/" class="ulink" target="_top">Azure OpenAI Studio</a>.
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-azure-ai-studio-tab"
       aria-labelledby="infer-api-requirements-azure-ai-studio"
       hidden="">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An <a href="https://azure.microsoft.com/free/cognitive-services?azure-portal=true" class="ulink" target="_top">Azure subscription</a>
</li>
<li class="listitem">
Access to <a href="https://ai.azure.com/" class="ulink" target="_top">Azure AI Studio</a>
</li>
<li class="listitem">
A deployed <a href="https://ai.azure.com/explore/models?selectedTask=embeddings" class="ulink" target="_top">embeddings</a> or <a href="https://ai.azure.com/explore/models?selectedTask=chat-completion" class="ulink" target="_top">chat completion</a> model.
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-google-vertex-ai-tab"
       aria-labelledby="infer-api-requirements-google-vertex-ai"
       hidden="">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A <a href="https://console.cloud.google.com/" class="ulink" target="_top">Google Cloud account</a>
</li>
<li class="listitem">
A project in Google Cloud
</li>
<li class="listitem">
The Vertex AI API enabled in your project
</li>
<li class="listitem">
A valid service account for the Google Vertex AI API
</li>
<li class="listitem">
The service account must have the Vertex AI User role and the <code class="literal">aiplatform.endpoints.predict</code> permission.
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-mistral-tab"
       aria-labelledby="infer-api-requirements-mistral"
       hidden="">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A Mistral Account on <a href="https://console.mistral.ai/" class="ulink" target="_top">La Plateforme</a>
</li>
<li class="listitem">
An API key generated for your account
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-amazon-bedrock-tab"
       aria-labelledby="infer-api-requirements-amazon-bedrock"
       hidden="">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An AWS Account with <a href="https://aws.amazon.com/bedrock/" class="ulink" target="_top">Amazon Bedrock</a> access
</li>
<li class="listitem">
A pair of access and secret keys used to access Amazon Bedrock
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-requirements-alibabacloud-ai-search-tab"
       aria-labelledby="infer-api-requirements-alibabacloud-ai-search"
       hidden="">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An AlibabaCloud Account with <a href="https://console.aliyun.com" class="ulink" target="_top">AlibabaCloud</a> access
</li>
<li class="listitem">
An API key generated for your account from the <a href="https://opensearch.console.aliyun.com/cn-shanghai/rag/api-key" class="ulink" target="_top">API keys section</a>
</li>
</ul>
</div>
  </div>
</div>
<div class="position-relative"><h4><a id="infer-text-embedding-task"></a>Create an inference endpoint</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<p>Create an inference endpoint by using the <a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>:</p>
<div class="tabs" data-tab-group="model">
  <div role="tablist" aria-label="model">
    <button role="tab"
            aria-selected="true"
            aria-controls="infer-api-task-cohere-tab"
            id="infer-api-task-cohere">
      Cohere
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-elser-tab"
            id="infer-api-task-elser">
      ELSER
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-hf-tab"
            id="infer-api-task-hf">
      HuggingFace
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-openai-tab"
            id="infer-api-task-openai">
      OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-azure-openai-tab"
            id="infer-api-task-azure-openai">
      Azure OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-azure-ai-studio-tab"
            id="infer-api-task-azure-ai-studio">
      Azure AI Studio
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-google-vertex-ai-tab"
            id="infer-api-task-google-vertex-ai">
      Google Vertex AI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-mistral-tab"
            id="infer-api-task-mistral">
      Mistral
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-amazon-bedrock-tab"
            id="infer-api-task-amazon-bedrock">
      Amazon Bedrock
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-task-alibabacloud-ai-search-tab"
            id="infer-api-task-alibabacloud-ai-search">
      AlibabaCloud AI Search
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-cohere-tab"
       aria-labelledby="infer-api-task-cohere">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/cohere_embeddings <a id="CO240-1"></a><i class="conum" data-value="1"></i>
{
    "service": "cohere",
    "service_settings": {
        "api_key": "&lt;api_key&gt;", <a id="CO240-2"></a><i class="conum" data-value="2"></i>
        "model_id": "embed-english-v3.0", <a id="CO240-3"></a><i class="conum" data-value="3"></i>
        "embedding_type": "byte"
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1029.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which
is the unique identifier of the inference endpoint is <code class="literal">cohere_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The API key of your Cohere account. You can find your API keys in your
Cohere dashboard under the
<a href="https://dashboard.cohere.com/api-keys" class="ulink" target="_top">API keys section</a>. You need to provide
your API key only once. The <a class="xref" href="get-inference-api.html" title="Get inference API">Get inference API</a> does not return your API
key.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO240-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the embedding model to use. You can find the list of Cohere
embedding models <a href="https://docs.cohere.com/reference/embed" class="ulink" target="_top">here</a>.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When using this model the recommended similarity measure to use in the
<code class="literal">dense_vector</code> field mapping is <code class="literal">dot_product</code>. In the case of Cohere models, the
embeddings are normalized to unit length in which case the <code class="literal">dot_product</code> and
the <code class="literal">cosine</code> measures are equivalent.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-elser-tab"
       aria-labelledby="infer-api-task-elser"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/sparse_embedding/elser_embeddings <a id="CO241-1"></a><i class="conum" data-value="1"></i>
{
  "service": "elser",
  "service_settings": {
    "num_allocations": 1,
    "num_threads": 1
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1030.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO241-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">sparse_embedding</code> in the path and the <code class="literal">inference_id</code> which
is the unique identifier of the inference endpoint is <code class="literal">elser_embeddings</code>.</p>
</td>
</tr>
</table>
</div>
<p>You don&#8217;t need to download and deploy the ELSER model upfront, the API request
above will download the model if it&#8217;s not downloaded yet and then deploy it.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You might see a 502 bad gateway error in the response when using the Kibana Console.
This error usually just reflects a timeout, while the model downloads in the background.
You can check the download progress in the Machine Learning UI.
If using the Python client, you can set the <code class="literal">timeout</code> parameter to a higher value.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-hf-tab"
       aria-labelledby="infer-api-task-hf"
       hidden="">
<p>First, you need to create a new inference endpoint on
<a href="https://ui.endpoints.huggingface.co/" class="ulink" target="_top">the Hugging Face endpoint page</a> to get an
endpoint URL. Select the model <code class="literal">all-mpnet-base-v2</code> on the new endpoint creation
page, then select the <code class="literal">Sentence Embeddings</code> task under the Advanced
configuration section. Create the endpoint. Copy the URL after the endpoint
initialization has been finished, you need the URL in the following inference API
call.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/hugging_face_embeddings <a id="CO242-1"></a><i class="conum" data-value="1"></i>
{
  "service": "hugging_face",
  "service_settings": {
    "api_key": "&lt;access_token&gt;", <a id="CO242-2"></a><i class="conum" data-value="2"></i>
    "url": "&lt;url_endpoint&gt;" <a id="CO242-3"></a><i class="conum" data-value="3"></i>
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1031.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which
is the unique identifier of the inference endpoint is <code class="literal">hugging_face_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>A valid HuggingFace access token. You can find on the
<a href="https://huggingface.co/settings/tokens" class="ulink" target="_top">settings page of your account</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO242-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The inference endpoint URL you created on Hugging Face.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-openai-tab"
       aria-labelledby="infer-api-task-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/openai_embeddings <a id="CO243-1"></a><i class="conum" data-value="1"></i>
{
    "service": "openai",
    "service_settings": {
        "api_key": "&lt;api_key&gt;", <a id="CO243-2"></a><i class="conum" data-value="2"></i>
        "model_id": "text-embedding-ada-002" <a id="CO243-3"></a><i class="conum" data-value="3"></i>
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1032.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which
is the unique identifier of the inference endpoint is <code class="literal">openai_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The API key of your OpenAI account. You can find your OpenAI API keys in
your OpenAI account under the
<a href="https://platform.openai.com/api-keys" class="ulink" target="_top">API keys section</a>. You need to provide
your API key only once. The <a class="xref" href="get-inference-api.html" title="Get inference API">Get inference API</a> does not return your API
key.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO243-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the embedding model to use. You can find the list of OpenAI
embedding models
<a href="https://platform.openai.com/docs/guides/embeddings/embedding-models" class="ulink" target="_top">here</a>.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When using this model the recommended similarity measure to use in the
<code class="literal">dense_vector</code> field mapping is <code class="literal">dot_product</code>. In the case of OpenAI models, the
embeddings are normalized to unit length in which case the <code class="literal">dot_product</code> and
the <code class="literal">cosine</code> measures are equivalent.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-azure-openai-tab"
       aria-labelledby="infer-api-task-azure-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/azure_openai_embeddings <a id="CO244-1"></a><i class="conum" data-value="1"></i>
{
    "service": "azureopenai",
    "service_settings": {
        "api_key": "&lt;api_key&gt;", <a id="CO244-2"></a><i class="conum" data-value="2"></i>
        "resource_name": "&lt;resource_name&gt;", <a id="CO244-3"></a><i class="conum" data-value="3"></i>
        "deployment_id": "&lt;deployment_id&gt;", <a id="CO244-4"></a><i class="conum" data-value="4"></i>
        "api_version": "2024-02-01"
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1033.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO244-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which is the unique identifier of the inference endpoint is <code class="literal">azure_openai_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO244-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The API key for accessing your Azure OpenAI services.
Alternately, you can provide an <code class="literal">entra_id</code> instead of an <code class="literal">api_key</code> here.
The <a class="xref" href="get-inference-api.html" title="Get inference API">Get inference API</a> does not return this information.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO244-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name our your Azure resource.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO244-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The id of your deployed model.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It may take a few minutes for your model&#8217;s deployment to become available
after it is created. If you try and create the model as above and receive a
<code class="literal">404</code> error message, wait a few minutes and try again.
Also, when using this model the recommended similarity measure to use in the
<code class="literal">dense_vector</code> field mapping is <code class="literal">dot_product</code>.
In the case of Azure OpenAI models, the embeddings are normalized to unit
length in which case the <code class="literal">dot_product</code> and the <code class="literal">cosine</code> measures are equivalent.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-azure-ai-studio-tab"
       aria-labelledby="infer-api-task-azure-ai-studio"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/azure_ai_studio_embeddings <a id="CO245-1"></a><i class="conum" data-value="1"></i>
{
    "service": "azureaistudio",
    "service_settings": {
        "api_key": "&lt;api_key&gt;", <a id="CO245-2"></a><i class="conum" data-value="2"></i>
        "target": "&lt;target_uri&gt;", <a id="CO245-3"></a><i class="conum" data-value="3"></i>
        "provider": "&lt;provider&gt;", <a id="CO245-4"></a><i class="conum" data-value="4"></i>
        "endpoint_type": "&lt;endpoint_type&gt;" <a id="CO245-5"></a><i class="conum" data-value="5"></i>
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1034.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO245-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which is the unique identifier of the inference endpoint is <code class="literal">azure_ai_studio_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO245-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The API key for accessing your Azure AI Studio deployed model. You can find this on your model deployment&#8217;s overview page.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO245-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The target URI for accessing your Azure AI Studio deployed model. You can find this on your model deployment&#8217;s overview page.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO245-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The model provider, such as <code class="literal">cohere</code> or <code class="literal">openai</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO245-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The deployed endpoint type. This can be <code class="literal">token</code> (for "pay as you go" deployments), or <code class="literal">realtime</code> for real-time deployment endpoints.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It may take a few minutes for your model&#8217;s deployment to become available
after it is created. If you try and create the model as above and receive a
<code class="literal">404</code> error message, wait a few minutes and try again.
Also, when using this model the recommended similarity measure to use in the
<code class="literal">dense_vector</code> field mapping is <code class="literal">dot_product</code>.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-google-vertex-ai-tab"
       aria-labelledby="infer-api-task-google-vertex-ai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/google_vertex_ai_embeddings <a id="CO246-1"></a><i class="conum" data-value="1"></i>
{
    "service": "googlevertexai",
    "service_settings": {
        "service_account_json": "&lt;service_account_json&gt;", <a id="CO246-2"></a><i class="conum" data-value="2"></i>
        "model_id": "text-embedding-004", <a id="CO246-3"></a><i class="conum" data-value="3"></i>
        "location": "&lt;location&gt;", <a id="CO246-4"></a><i class="conum" data-value="4"></i>
        "project_id": "&lt;project_id&gt;" <a id="CO246-5"></a><i class="conum" data-value="5"></i>
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1035.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> per the path. <code class="literal">google_vertex_ai_embeddings</code> is the unique identifier of the inference endpoint (its <code class="literal">inference_id</code>).</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>A valid service account in JSON format for the Google Vertex AI API.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>For the list of the available models, refer to the <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text-embeddings-api" class="ulink" target="_top">Text embeddings API</a> page.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the location to use for the inference task. Refer to <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations" class="ulink" target="_top">Generative AI on Vertex AI locations</a> for available locations.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO246-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the project to use for the inference task.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-mistral-tab"
       aria-labelledby="infer-api-task-mistral"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/mistral_embeddings <a id="CO247-1"></a><i class="conum" data-value="1"></i>
{
    "service": "mistral",
    "service_settings": {
        "api_key": "&lt;api_key&gt;", <a id="CO247-2"></a><i class="conum" data-value="2"></i>
        "model": "&lt;model_id&gt;" <a id="CO247-3"></a><i class="conum" data-value="3"></i>
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1036.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO247-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which is the unique identifier of the inference endpoint is <code class="literal">mistral_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO247-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The API key for accessing the Mistral API. You can find this in your Mistral account&#8217;s API Keys page.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO247-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The Mistral embeddings model name, for example <code class="literal">mistral-embed</code>.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-amazon-bedrock-tab"
       aria-labelledby="infer-api-task-amazon-bedrock"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/amazon_bedrock_embeddings <a id="CO248-1"></a><i class="conum" data-value="1"></i>
{
    "service": "amazonbedrock",
    "service_settings": {
        "access_key": "&lt;aws_access_key&gt;", <a id="CO248-2"></a><i class="conum" data-value="2"></i>
        "secret_key": "&lt;aws_secret_key&gt;", <a id="CO248-3"></a><i class="conum" data-value="3"></i>
        "region": "&lt;region&gt;", <a id="CO248-4"></a><i class="conum" data-value="4"></i>
        "provider": "&lt;provider&gt;", <a id="CO248-5"></a><i class="conum" data-value="5"></i>
        "model": "&lt;model_id&gt;" <a id="CO248-6"></a><i class="conum" data-value="6"></i>
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1037.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO248-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which is the unique identifier of the inference endpoint is <code class="literal">amazon_bedrock_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO248-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The access key can be found on your AWS IAM management page for the user account to access Amazon Bedrock.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO248-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The secret key should be the paired key for the specified access key.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO248-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify the region that your model is hosted in.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO248-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify the model provider.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO248-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The model ID or ARN of the model to use.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-task-alibabacloud-ai-search-tab"
       aria-labelledby="infer-api-task-alibabacloud-ai-search"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _inference/text_embedding/alibabacloud_ai_search_embeddings <a id="CO249-1"></a><i class="conum" data-value="1"></i>
{
    "service": "alibabacloud-ai-search",
    "service_settings": {
        "api_key": "&lt;api_key&gt;", <a id="CO249-2"></a><i class="conum" data-value="2"></i>
        "service_id": "&lt;service_id&gt;", <a id="CO249-3"></a><i class="conum" data-value="3"></i>
        "host": "&lt;host&gt;", <a id="CO249-4"></a><i class="conum" data-value="4"></i>
        "workspace": "&lt;workspace&gt;" <a id="CO249-5"></a><i class="conum" data-value="5"></i>
    }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1038.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO249-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The task type is <code class="literal">text_embedding</code> in the path and the <code class="literal">inference_id</code> which is the unique identifier of the inference endpoint is <code class="literal">alibabacloud_ai_search_embeddings</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO249-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The API key for accessing the AlibabaCloud AI Search API. You can find your API keys in
your AlibabaCloud account under the
<a href="https://opensearch.console.aliyun.com/cn-shanghai/rag/api-key" class="ulink" target="_top">API keys section</a>. You need to provide
your API key only once. The <a class="xref" href="get-inference-api.html" title="Get inference API">Get inference API</a> does not return your API
key.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO249-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The AlibabaCloud AI Search embeddings model name, for example <code class="literal">ops-text-embedding-zh-001</code>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO249-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name our your AlibabaCloud AI Search host address.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO249-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name our your AlibabaCloud AI Search workspace.</p>
</td>
</tr>
</table>
</div>
  </div>
</div>
<div class="position-relative"><h4><a id="infer-service-mappings"></a>Create the index mapping</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<p>The mapping of the destination index - the index that contains the embeddings that the model will create based on your input text - must be created.
The destination index must have a field with the <a class="xref" href="dense-vector.html" title="Dense vector field type"><code class="literal">dense_vector</code></a> field type for most models and the <a class="xref" href="sparse-vector.html" title="Sparse vector field type"><code class="literal">sparse_vector</code></a> field type for the sparse vector models like in the case of the <code class="literal">elser</code> service to index the output of the used model.</p>
<div class="tabs" data-tab-group="model">
  <div role="tablist" aria-label="model">
    <button role="tab"
            aria-selected="true"
            aria-controls="infer-api-mapping-cohere-tab"
            id="infer-api-mapping-cohere">
      Cohere
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-elser-tab"
            id="infer-api-mapping-elser">
      ELSER
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-hf-tab"
            id="infer-api-mapping-hf">
      HuggingFace
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-openai-tab"
            id="infer-api-mapping-openai">
      OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-azure-openai-tab"
            id="infer-api-mapping-azure-openai">
      Azure OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-azure-ai-studio-tab"
            id="infer-api-mapping-azure-ai-studio">
      Azure AI Studio
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-google-vertex-ai-tab"
            id="infer-api-mapping-google-vertex-ai">
      Google Vertex AI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-mistral-tab"
            id="infer-api-mapping-mistral">
      Mistral
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-amazon-bedrock-tab"
            id="infer-api-mapping-amazon-bedrock">
      Amazon Bedrock
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-mapping-alibabacloud-ai-search-tab"
            id="infer-api-mapping-alibabacloud-ai-search">
      AlibabaCloud AI Search
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-cohere-tab"
       aria-labelledby="infer-api-mapping-cohere">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT cohere-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO250-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO250-2"></a><i class="conum" data-value="2"></i>
        "dims": 1024, <a id="CO250-3"></a><i class="conum" data-value="3"></i>
        "element_type": "byte"
      },
      "content": { <a id="CO250-4"></a><i class="conum" data-value="4"></i>
        "type": "text" <a id="CO250-5"></a><i class="conum" data-value="5"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1039.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO250-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be refrenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO250-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO250-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. Find this value in the
<a href="https://docs.cohere.com/reference/embed" class="ulink" target="_top">Cohere documentation</a> of the model you
use.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO250-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO250-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-elser-tab"
       aria-labelledby="infer-api-mapping-elser"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT elser-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO251-1"></a><i class="conum" data-value="1"></i>
        "type": "sparse_vector" <a id="CO251-2"></a><i class="conum" data-value="2"></i>
      },
      "content": { <a id="CO251-3"></a><i class="conum" data-value="3"></i>
        "type": "text" <a id="CO251-4"></a><i class="conum" data-value="4"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1040.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO251-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be refrenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO251-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">sparse_vector</code> field for ELSER.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO251-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO251-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-hf-tab"
       aria-labelledby="infer-api-mapping-hf"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT hugging-face-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO252-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO252-2"></a><i class="conum" data-value="2"></i>
        "dims": 768, <a id="CO252-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float"
      },
      "content": { <a id="CO252-4"></a><i class="conum" data-value="4"></i>
        "type": "text" <a id="CO252-5"></a><i class="conum" data-value="5"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1041.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO252-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be referenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO252-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO252-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. Find this value in the
<a href="https://huggingface.co/sentence-transformers/all-mpnet-base-v2" class="ulink" target="_top">HuggingFace model documentation</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO252-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO252-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-openai-tab"
       aria-labelledby="infer-api-mapping-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT openai-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO253-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO253-2"></a><i class="conum" data-value="2"></i>
        "dims": 1536, <a id="CO253-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float",
        "similarity": "dot_product" <a id="CO253-4"></a><i class="conum" data-value="4"></i>
      },
      "content": { <a id="CO253-5"></a><i class="conum" data-value="5"></i>
        "type": "text" <a id="CO253-6"></a><i class="conum" data-value="6"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1042.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO253-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be referenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO253-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO253-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. Find this value in the
<a href="https://platform.openai.com/docs/guides/embeddings/embedding-models" class="ulink" target="_top">OpenAI documentation</a>
of the model you use.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO253-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The faster` dot_product` function can be used to calculate similarity
because OpenAI embeddings are normalised to unit length. You can check the
<a href="https://platform.openai.com/docs/guides/embeddings/which-distance-function-should-i-use" class="ulink" target="_top">OpenAI docs</a>
about which similarity function to use.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO253-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO253-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-azure-openai-tab"
       aria-labelledby="infer-api-mapping-azure-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT azure-openai-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO254-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO254-2"></a><i class="conum" data-value="2"></i>
        "dims": 1536, <a id="CO254-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float",
        "similarity": "dot_product" <a id="CO254-4"></a><i class="conum" data-value="4"></i>
      },
      "content": { <a id="CO254-5"></a><i class="conum" data-value="5"></i>
        "type": "text" <a id="CO254-6"></a><i class="conum" data-value="6"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1043.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO254-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be referenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO254-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO254-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. Find this value in the
<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#embeddings-models" class="ulink" target="_top">Azure OpenAI documentation</a>
of the model you use.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO254-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>For Azure OpenAI embeddings, the <code class="literal">dot_product</code> function should be used to
calculate similarity as Azure OpenAI embeddings are normalised to unit length.
See the
<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/understand-embeddings" class="ulink" target="_top">Azure OpenAI embeddings</a>
documentation for more information on the model specifications.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO254-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO254-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-azure-ai-studio-tab"
       aria-labelledby="infer-api-mapping-azure-ai-studio"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT azure-ai-studio-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO255-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO255-2"></a><i class="conum" data-value="2"></i>
        "dims": 1536, <a id="CO255-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float",
        "similarity": "dot_product" <a id="CO255-4"></a><i class="conum" data-value="4"></i>
      },
      "content": { <a id="CO255-5"></a><i class="conum" data-value="5"></i>
        "type": "text" <a id="CO255-6"></a><i class="conum" data-value="6"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1044.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO255-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be referenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO255-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO255-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. This value may be found on the model card in your Azure AI Studio deployment.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO255-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>For Azure AI Studio embeddings, the <code class="literal">dot_product</code> function should be used to
calculate similarity.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO255-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO255-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-google-vertex-ai-tab"
       aria-labelledby="infer-api-mapping-google-vertex-ai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT google-vertex-ai-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO256-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO256-2"></a><i class="conum" data-value="2"></i>
        "dims": 768, <a id="CO256-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float",
        "similarity": "dot_product" <a id="CO256-4"></a><i class="conum" data-value="4"></i>
      },
      "content": { <a id="CO256-5"></a><i class="conum" data-value="5"></i>
        "type": "text" <a id="CO256-6"></a><i class="conum" data-value="6"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1045.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO256-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated embeddings. It must be referenced in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO256-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the embeddings is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO256-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. This value may be found on the <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text-embeddings-api" class="ulink" target="_top">Google Vertex AI model reference</a>.
The inference API attempts to calculate the output dimensions automatically if <code class="literal">dims</code> are not specified.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO256-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>For Google Vertex AI embeddings, the <code class="literal">dot_product</code> function should be used to calculate similarity.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO256-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO256-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is <code class="literal">text</code> in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-mistral-tab"
       aria-labelledby="infer-api-mapping-mistral"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT mistral-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO257-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO257-2"></a><i class="conum" data-value="2"></i>
        "dims": 1024, <a id="CO257-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float",
        "similarity": "dot_product" <a id="CO257-4"></a><i class="conum" data-value="4"></i>
      },
      "content": { <a id="CO257-5"></a><i class="conum" data-value="5"></i>
        "type": "text" <a id="CO257-6"></a><i class="conum" data-value="6"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1046.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO257-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be referenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO257-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO257-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. This value may be found on the <a href="https://docs.mistral.ai/getting-started/models/" class="ulink" target="_top">Mistral model reference</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO257-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>For Mistral embeddings, the <code class="literal">dot_product</code> function should be used to
calculate similarity.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO257-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO257-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-amazon-bedrock-tab"
       aria-labelledby="infer-api-mapping-amazon-bedrock"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT amazon-bedrock-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO258-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO258-2"></a><i class="conum" data-value="2"></i>
        "dims": 1024, <a id="CO258-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float",
        "similarity": "dot_product" <a id="CO258-4"></a><i class="conum" data-value="4"></i>
      },
      "content": { <a id="CO258-5"></a><i class="conum" data-value="5"></i>
        "type": "text" <a id="CO258-6"></a><i class="conum" data-value="6"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1047.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO258-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be referenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO258-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO258-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. This value may be different depending on the underlying model used.
See the <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/titan-multiemb-models.html" class="ulink" target="_top">Amazon Titan model</a> or the <a href="https://docs.cohere.com/reference/embed" class="ulink" target="_top">Cohere Embeddings model</a> documentation.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO258-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>For Amazon Bedrock embeddings, the <code class="literal">dot_product</code> function should be used to
calculate similarity for Amazon titan models, or <code class="literal">cosine</code> for Cohere models.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO258-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO258-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-mapping-alibabacloud-ai-search-tab"
       aria-labelledby="infer-api-mapping-alibabacloud-ai-search"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT alibabacloud-ai-search-embeddings
{
  "mappings": {
    "properties": {
      "content_embedding": { <a id="CO259-1"></a><i class="conum" data-value="1"></i>
        "type": "dense_vector", <a id="CO259-2"></a><i class="conum" data-value="2"></i>
        "dims": 1024, <a id="CO259-3"></a><i class="conum" data-value="3"></i>
        "element_type": "float"
      },
      "content": { <a id="CO259-4"></a><i class="conum" data-value="4"></i>
        "type": "text" <a id="CO259-5"></a><i class="conum" data-value="5"></i>
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1048.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO259-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field to contain the generated tokens. It must be referenced
in the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO259-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field to contain the tokens is a <code class="literal">dense_vector</code> field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO259-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>The output dimensions of the model. This value may be different depending on the underlying model used.
See the <a href="https://help.aliyun.com/zh/open-search/search-platform/developer-reference/text-embedding-api-details" class="ulink" target="_top">AlibabaCloud AI Search embedding model</a> documentation.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO259-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the field from which to create the dense vector representation.
In this example, the name of the field is <code class="literal">content</code>. It must be referenced in
the inference pipeline configuration in the next step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO259-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The field type which is text in this example.</p>
</td>
</tr>
</table>
</div>
  </div>
</div>
<div class="position-relative"><h4><a id="infer-service-inference-ingest-pipeline"></a>Create an ingest pipeline with an inference processor</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<p>Create an <a class="xref" href="ingest.html" title="Ingest pipelines">ingest pipeline</a> with an <a class="xref" href="inference-processor.html" title="Inference processor">inference processor</a> and use the model you created above to infer against the data that is being ingested in the pipeline.</p>
<div class="tabs" data-tab-group="model">
  <div role="tablist" aria-label="model">
    <button role="tab"
            aria-selected="true"
            aria-controls="infer-api-ingest-cohere-tab"
            id="infer-api-ingest-cohere">
      Cohere
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-elser-tab"
            id="infer-api-ingest-elser">
      ELSER
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-hf-tab"
            id="infer-api-ingest-hf">
      HuggingFace
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-openai-tab"
            id="infer-api-ingest-openai">
      OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-azure-openai-tab"
            id="infer-api-ingest-azure-openai">
      Azure OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-azure-ai-studio-tab"
            id="infer-api-ingest-azure-ai-studio">
      Azure AI Studio
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-google-vertex-ai-tab"
            id="infer-api-ingest-google-vertex-ai">
      Google Vertex AI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-mistral-tab"
            id="infer-api-ingest-mistral">
      Mistral
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-amazon-bedrock-tab"
            id="infer-api-ingest-amazon-bedrock">
      Amazon Bedrock
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-ingest-alibabacloud-ai-search-tab"
            id="infer-api-ingest-alibabacloud-ai-search">
      AlibabaCloud AI Search
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-cohere-tab"
       aria-labelledby="infer-api-ingest-cohere">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/cohere_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "cohere_embeddings", <a id="CO260-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO260-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1049.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO260-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO260-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-elser-tab"
       aria-labelledby="infer-api-ingest-elser"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/elser_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "elser_embeddings", <a id="CO261-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO261-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1050.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO261-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO261-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-hf-tab"
       aria-labelledby="infer-api-ingest-hf"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/hugging_face_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "hugging_face_embeddings", <a id="CO262-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO262-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1051.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO262-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO262-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-openai-tab"
       aria-labelledby="infer-api-ingest-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/openai_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "openai_embeddings", <a id="CO263-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO263-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1052.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO263-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO263-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-azure-openai-tab"
       aria-labelledby="infer-api-ingest-azure-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/azure_openai_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "azure_openai_embeddings", <a id="CO264-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO264-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1053.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO264-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO264-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-azure-ai-studio-tab"
       aria-labelledby="infer-api-ingest-azure-ai-studio"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/azure_ai_studio_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "azure_ai_studio_embeddings", <a id="CO265-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO265-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1054.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO265-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO265-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-google-vertex-ai-tab"
       aria-labelledby="infer-api-ingest-google-vertex-ai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/google_vertex_ai_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "google_vertex_ai_embeddings", <a id="CO266-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO266-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1055.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO266-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO266-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-mistral-tab"
       aria-labelledby="infer-api-ingest-mistral"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/mistral_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "mistral_embeddings", <a id="CO267-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO267-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1056.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO267-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO267-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-amazon-bedrock-tab"
       aria-labelledby="infer-api-ingest-amazon-bedrock"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/amazon_bedrock_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "amazon_bedrock_embeddings", <a id="CO268-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO268-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1057.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO268-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO268-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-ingest-alibabacloud-ai-search-tab"
       aria-labelledby="infer-api-ingest-alibabacloud-ai-search"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT _ingest/pipeline/alibabacloud_ai_search_embeddings_pipeline
{
  "processors": [
    {
      "inference": {
        "model_id": "alibabacloud_ai_search_embeddings", <a id="CO269-1"></a><i class="conum" data-value="1"></i>
        "input_output": { <a id="CO269-2"></a><i class="conum" data-value="2"></i>
          "input_field": "content",
          "output_field": "content_embedding"
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1058.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO269-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The name of the inference endpoint you created by using the
<a class="xref" href="put-inference-api.html" title="Create inference API">Create inference API</a>, it&#8217;s referred to as <code class="literal">inference_id</code> in that step.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO269-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Configuration object that defines the <code class="literal">input_field</code> for the inference process
and the <code class="literal">output_field</code> that will contain the inference results.</p>
</td>
</tr>
</table>
</div>
  </div>
</div>
<div class="position-relative"><h4><a id="infer-load-data"></a>Load data</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<p>In this step, you load the data that you later use in the inference ingest pipeline to create embeddings from it.</p>
<p>Use the <code class="literal">msmarco-passagetest2019-top1000</code> data set, which is a subset of the MS MARCO Passage Ranking data set.
It consists of 200 queries, each accompanied by a list of relevant text passages.
All unique passages, along with their IDs, have been extracted from that data set and compiled into a
<a href="https://github.com/elastic/stack-docs/blob/main/docs/en/stack/ml/nlp/data/msmarco-passagetest2019-unique.tsv" class="ulink" target="_top">tsv file</a>.</p>
<p>Download the file and upload it to your cluster using the
<a href="/guide/en/kibana/8.16/connect-to-elasticsearch.html#upload-data-kibana" class="ulink" target="_top">Data Visualizer</a>
in the Machine Learning UI.
Assign the name <code class="literal">id</code> to the first column and <code class="literal">content</code> to the second column.
The index name is <code class="literal">test-data</code>.
Once the upload is complete, you can see an index named <code class="literal">test-data</code> with 182469 documents.</p>
<div class="position-relative"><h4><a id="reindexing-data-infer"></a>Ingest the data through the inference ingest pipeline</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<p>Create embeddings from the text by reindexing the data through the inference pipeline that uses your chosen model.
This step uses the <a href="/guide/en/elasticsearch/reference/8.16/docs-reindex.html" class="ulink" target="_top">reindex API</a> to simulate data ingestion through a pipeline.</p>
<div class="tabs" data-tab-group="model">
  <div role="tablist" aria-label="model">
    <button role="tab"
            aria-selected="true"
            aria-controls="infer-api-reindex-cohere-tab"
            id="infer-api-reindex-cohere">
      Cohere
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-elser-tab"
            id="infer-api-reindex-elser">
      ELSER
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-hf-tab"
            id="infer-api-reindex-hf">
      HuggingFace
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-openai-tab"
            id="infer-api-reindex-openai">
      OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-azure-openai-tab"
            id="infer-api-reindex-azure-openai">
      Azure OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-azure-ai-studio-tab"
            id="infer-api-reindex-azure-ai-studio">
      Azure AI Studio
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-google-vertex-ai-tab"
            id="infer-api-reindex-google-vertex-ai">
      Google Vertex AI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-mistral-tab"
            id="infer-api-reindex-mistral">
      Mistral
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-amazon-bedrock-tab"
            id="infer-api-reindex-amazon-bedrock">
      Amazon Bedrock
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-reindex-alibabacloud-ai-search-tab"
            id="infer-api-reindex-alibabacloud-ai-search">
      AlibabaCloud AI Search
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-cohere-tab"
       aria-labelledby="infer-api-reindex-cohere">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO270-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "cohere-embeddings",
    "pipeline": "cohere_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1059.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO270-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The
<a href="https://dashboard.cohere.com/billing" class="ulink" target="_top">rate limit of your Cohere account</a>
may affect the throughput of the reindexing process.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-elser-tab"
       aria-labelledby="infer-api-reindex-elser"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO271-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "elser-embeddings",
    "pipeline": "elser_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1060.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO271-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-hf-tab"
       aria-labelledby="infer-api-reindex-hf"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO272-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "hugging-face-embeddings",
    "pipeline": "hugging_face_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1061.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO272-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-openai-tab"
       aria-labelledby="infer-api-reindex-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO273-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "openai-embeddings",
    "pipeline": "openai_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1062.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO273-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The
<a href="https://platform.openai.com/account/limits" class="ulink" target="_top">rate limit of your OpenAI account</a>
may affect the throughput of the reindexing process. If this happens, change
<code class="literal">size</code> to <code class="literal">3</code> or a similar value in magnitude.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-azure-openai-tab"
       aria-labelledby="infer-api-reindex-azure-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO274-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "azure-openai-embeddings",
    "pipeline": "azure_openai_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1063.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO274-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The
<a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/quotas-limits#quotas-and-limits-reference" class="ulink" target="_top">rate limit of your Azure OpenAI account</a>
may affect the throughput of the reindexing process. If this happens, change
<code class="literal">size</code> to <code class="literal">3</code> or a similar value in magnitude.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-azure-ai-studio-tab"
       aria-labelledby="infer-api-reindex-azure-ai-studio"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO275-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "azure-ai-studio-embeddings",
    "pipeline": "azure_ai_studio_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1064.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO275-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Your Azure AI Studio model deployment may have rate limits in place that
might affect the throughput of the reindexing process. If this happens, change
<code class="literal">size</code> to <code class="literal">3</code> or a similar value in magnitude.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-google-vertex-ai-tab"
       aria-labelledby="infer-api-reindex-google-vertex-ai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO276-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "google-vertex-ai-embeddings",
    "pipeline": "google_vertex_ai_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1065.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO276-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> will make updates to the reindexing process faster. This enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-mistral-tab"
       aria-labelledby="infer-api-reindex-mistral"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO277-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "mistral-embeddings",
    "pipeline": "mistral_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1066.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO277-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-amazon-bedrock-tab"
       aria-labelledby="infer-api-reindex-amazon-bedrock"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO278-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "amazon-bedrock-embeddings",
    "pipeline": "amazon_bedrock_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1067.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO278-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-reindex-alibabacloud-ai-search-tab"
       aria-labelledby="infer-api-reindex-alibabacloud-ai-search"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _reindex?wait_for_completion=false
{
  "source": {
    "index": "test-data",
    "size": 50 <a id="CO279-1"></a><i class="conum" data-value="1"></i>
  },
  "dest": {
    "index": "alibabacloud-ai-search-embeddings",
    "pipeline": "alibabacloud_ai_search_embeddings_pipeline"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1068.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO279-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The default batch size for reindexing is 1000. Reducing <code class="literal">size</code> to a smaller
number makes the update of the reindexing process quicker which enables you to
follow the progress closely and detect errors early.</p>
</td>
</tr>
</table>
</div>
  </div>
</div>
<p>The call returns a task ID to monitor the progress:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET _tasks/&lt;task_id&gt;</pre>
</div>
<div class="console_widget" data-snippet="snippets/1069.console"></div>
<p>You can also cancel the reindexing process if you don&#8217;t want to wait until the reindexing process is fully complete which might take hours for large data sets:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST _tasks/&lt;task_id&gt;/_cancel</pre>
</div>
<div class="console_widget" data-snippet="snippets/1070.console"></div>
<div class="position-relative"><h4><a id="infer-semantic-search"></a>Semantic search</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<p>After the data set has been enriched with the embeddings, you can query the data using <a href="/guide/en/elasticsearch/reference/8.16/knn-search.html#knn-semantic-search" class="ulink" target="_top">semantic search</a>.
In case of dense vector models, pass a <code class="literal">query_vector_builder</code> to the k-nearest neighbor (kNN) vector search API, and provide the query text and the model you have used to create the embeddings.
In case of a sparse vector model like ELSER, use a <code class="literal">sparse_vector</code> query, and provide the query text with the model you have used to create the embeddings.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you cancelled the reindexing process, you run the query only a part of the data which affects the quality of your results.</p>
</div>
</div>
<div class="tabs" data-tab-group="model">
  <div role="tablist" aria-label="model">
    <button role="tab"
            aria-selected="true"
            aria-controls="infer-api-search-cohere-tab"
            id="infer-api-search-cohere">
      Cohere
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-elser-tab"
            id="infer-api-search-elser">
      ELSER
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-hf-tab"
            id="infer-api-search-hf">
      HuggingFace
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-openai-tab"
            id="infer-api-search-openai">
      OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-azure-openai-tab"
            id="infer-api-search-azure-openai">
      Azure OpenAI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-azure-ai-studio-tab"
            id="infer-api-search-azure-ai-studio">
      Azure AI Studio
    </button>
     <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-google-vertex-ai-tab"
            id="infer-api-search-google-vertex-ai">
      Google Vertex AI
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-mistral-tab"
            id="infer-api-search-mistral">
      Mistral
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-amazon-bedrock-tab"
            id="infer-api-search-amazon-bedrock">
      Amazon Bedrock
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="infer-api-search-alibabacloud-ai-search-tab"
            id="infer-api-search-alibabacloud-ai-search">
      AlibabaCloud AI Search
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-cohere-tab"
       aria-labelledby="infer-api-search-cohere">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET cohere-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "cohere_embeddings",
        "model_text": "Muscles in human body"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1071.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">cohere-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "cohere-embeddings",
        "_id": "-eFWCY4BECzWLnMZuI78",
        "_score": 0.737484,
        "_source": {
          "id": 1690948,
          "content": "Oxygen is supplied to the muscles via red blood cells. Red blood cells carry hemoglobin which oxygen bonds with as the hemoglobin rich blood cells pass through the blood vessels of the lungs.The now oxygen rich blood cells carry that oxygen to the cells that are demanding it, in this case skeletal muscle cells.ther ways in which muscles are supplied with oxygen include: 1  Blood flow from the heart is increased. 2  Blood flow to your muscles in increased. 3  Blood flow from nonessential organs is transported to working muscles."
        }
      },
      {
        "_index": "cohere-embeddings",
        "_id": "HuFWCY4BECzWLnMZuI_8",
        "_score": 0.7176013,
        "_source": {
          "id": 1692482,
          "content": "The thoracic cavity is separated from the abdominal cavity by the  diaphragm. This is a broad flat muscle.    (muscular) diaphragm The diaphragm is a muscle that separat…e the thoracic from the abdominal cavity. The pelvis is the lowest part of the abdominal cavity and it has no physical separation from it    Diaphragm."
        }
      },
      {
        "_index": "cohere-embeddings",
        "_id": "IOFWCY4BECzWLnMZuI_8",
        "_score": 0.7154432,
        "_source": {
          "id": 1692489,
          "content": "Muscular Wall Separating the Abdominal and Thoracic Cavities; Thoracic Cavity of a Fetal Pig; In Mammals the Diaphragm Separates the Abdominal Cavity from the"
        }
      },
      {
        "_index": "cohere-embeddings",
        "_id": "C-FWCY4BECzWLnMZuI_8",
        "_score": 0.695313,
        "_source": {
          "id": 1691493,
          "content": "Burning, aching, tenderness and stiffness are just some descriptors of the discomfort you may feel in the muscles you exercised one to two days ago.For the most part, these sensations you experience after exercise are collectively known as delayed onset muscle soreness.urning, aching, tenderness and stiffness are just some descriptors of the discomfort you may feel in the muscles you exercised one to two days ago."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-elser-tab"
       aria-labelledby="infer-api-search-elser"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET elser-embeddings/_search
{
  "query":{
    "sparse_vector":{
      "field": "content_embedding",
      "inference_id": "elser_embeddings",
      "query": "How to avoid muscle soreness after running?"
    }
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1072.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">cohere-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "elser-embeddings",
        "_id": "ZLGc_pABZbBmsu5_eCoH",
        "_score": 21.472063,
        "_source": {
          "id": 2258240,
          "content": "You may notice some muscle aches while you are exercising. This is called acute soreness. More often, you may begin to feel sore about 12 hours after exercising, and the discomfort usually peaks at 48 to 72 hours after exercise. This is called delayed-onset muscle soreness.It is thought that, during this time, your body is repairing the muscle, making it stronger and bigger.You may also notice the muscles feel better if you exercise lightly. This is normal.his is called delayed-onset muscle soreness. It is thought that, during this time, your body is repairing the muscle, making it stronger and bigger. You may also notice the muscles feel better if you exercise lightly. This is normal."
        }
      },
      {
        "_index": "elser-embeddings",
        "_id": "ZbGc_pABZbBmsu5_eCoH",
        "_score": 21.421381,
        "_source": {
          "id": 2258242,
          "content": "Photo Credit Jupiterimages/Stockbyte/Getty Images. That stiff, achy feeling you get in the days after exercise is a normal physiological response known as delayed onset muscle soreness. You can take it as a positive sign that your muscles have felt the workout, but the pain may also turn you off to further exercise.ou are more likely to develop delayed onset muscle soreness if you are new to working out, if you’ve gone a long time without exercising and start up again, if you have picked up a new type of physical activity or if you have recently boosted the intensity, length or frequency of your exercise sessions."
        }
      },
      {
        "_index": "elser-embeddings",
        "_id": "ZrGc_pABZbBmsu5_eCoH",
        "_score": 20.542095,
        "_source": {
          "id": 2258248,
          "content": "They found that stretching before and after exercise has no effect on muscle soreness. Exercise might cause inflammation, which leads to an increase in the production of immune cells (comprised mostly of macrophages and neutrophils). Levels of these immune cells reach a peak 24-48 hours after exercise.These cells, in turn, produce bradykinins and prostaglandins, which make the pain receptors in your body more sensitive. Whenever you move, these pain receptors are stimulated.hey found that stretching before and after exercise has no effect on muscle soreness. Exercise might cause inflammation, which leads to an increase in the production of immune cells (comprised mostly of macrophages and neutrophils). Levels of these immune cells reach a peak 24-48 hours after exercise."
        }
      },
    (...)
  ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-hf-tab"
       aria-labelledby="infer-api-search-hf"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET hugging-face-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "hugging_face_embeddings",
        "model_text": "What's margin of error?"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1073.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">hugging-face-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "hugging-face-embeddings",
        "_id": "ljEfo44BiUQvMpPgT20E",
        "_score": 0.8522128,
        "_source": {
          "id": 7960255,
          "content": "The margin of error can be defined by either of the following equations. Margin of error = Critical value x Standard deviation of the statistic. Margin of error = Critical value x Standard error of the statistic. If you know the standard deviation of the statistic, use the first equation to compute the margin of error. Otherwise, use the second equation. Previously, we described how to compute the standard deviation and standard error."
        }
      },
      {
        "_index": "hugging-face-embeddings",
        "_id": "lzEfo44BiUQvMpPgT20E",
        "_score": 0.7865497,
        "_source": {
          "id": 7960259,
          "content": "1 y ou are told only the size of the sample and are asked to provide the margin of error for percentages which are not (yet) known. 2  This is typically the case when you are computing the margin of error for a survey which is going to be conducted in the future."
        }
      },
      {
        "_index": "hugging-face-embeddings1",
        "_id": "DjEfo44BiUQvMpPgT20E",
        "_score": 0.6229427,
        "_source": {
          "id": 2166183,
          "content": "1. In general, the point at which gains equal losses. 2. In options, the market price that a stock must reach for option buyers to avoid a loss if they exercise. For a call, it is the strike price plus the premium paid. For a put, it is the strike price minus the premium paid."
        }
      },
      {
        "_index": "hugging-face-embeddings1",
        "_id": "VzEfo44BiUQvMpPgT20E",
        "_score": 0.6034223,
        "_source": {
          "id": 2173417,
          "content": "How do you find the area of a circle? Can you measure the area of a circle and use that to find a value for Pi?"
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-openai-tab"
       aria-labelledby="infer-api-search-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET openai-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "openai_embeddings",
        "model_text": "Calculate fuel cost"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1074.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">openai-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "openai-embeddings",
        "_id": "DDd5OowBHxQKHyc3TDSC",
        "_score": 0.83704096,
        "_source": {
          "id": 862114,
          "body": "How to calculate fuel cost for a road trip. By Tara Baukus Mello • Bankrate.com. Dear Driving for Dollars, My family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost.It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes.y family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost. It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes."
        }
      },
      {
        "_index": "openai-embeddings",
        "_id": "ajd5OowBHxQKHyc3TDSC",
        "_score": 0.8345704,
        "_source": {
          "id": 820622,
          "body": "Home Heating Calculator. Typically, approximately 50% of the energy consumed in a home annually is for space heating. When deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important.This calculator can help you estimate the cost of fuel for different heating appliances.hen deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important. This calculator can help you estimate the cost of fuel for different heating appliances."
        }
      },
      {
        "_index": "openai-embeddings",
        "_id": "Djd5OowBHxQKHyc3TDSC",
        "_score": 0.8327426,
        "_source": {
          "id": 8202683,
          "body": "Fuel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel.If you are paying $4 per gallon, the trip would cost you $200.Most boats have much larger gas tanks than cars.uel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-azure-openai-tab"
       aria-labelledby="infer-api-search-azure-openai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET azure-openai-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "azure_openai_embeddings",
        "model_text": "Calculate fuel cost"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1075.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">azure-openai-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "azure-openai-embeddings",
        "_id": "DDd5OowBHxQKHyc3TDSC",
        "_score": 0.83704096,
        "_source": {
          "id": 862114,
          "body": "How to calculate fuel cost for a road trip. By Tara Baukus Mello • Bankrate.com. Dear Driving for Dollars, My family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost.It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes.y family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost. It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes."
        }
      },
      {
        "_index": "azure-openai-embeddings",
        "_id": "ajd5OowBHxQKHyc3TDSC",
        "_score": 0.8345704,
        "_source": {
          "id": 820622,
          "body": "Home Heating Calculator. Typically, approximately 50% of the energy consumed in a home annually is for space heating. When deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important.This calculator can help you estimate the cost of fuel for different heating appliances.hen deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important. This calculator can help you estimate the cost of fuel for different heating appliances."
        }
      },
      {
        "_index": "azure-openai-embeddings",
        "_id": "Djd5OowBHxQKHyc3TDSC",
        "_score": 0.8327426,
        "_source": {
          "id": 8202683,
          "body": "Fuel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel.If you are paying $4 per gallon, the trip would cost you $200.Most boats have much larger gas tanks than cars.uel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-azure-ai-studio-tab"
       aria-labelledby="infer-api-search-azure-ai-studio"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET azure-ai-studio-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "azure_ai_studio_embeddings",
        "model_text": "Calculate fuel cost"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1076.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">azure-ai-studio-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "azure-ai-studio-embeddings",
        "_id": "DDd5OowBHxQKHyc3TDSC",
        "_score": 0.83704096,
        "_source": {
          "id": 862114,
          "body": "How to calculate fuel cost for a road trip. By Tara Baukus Mello • Bankrate.com. Dear Driving for Dollars, My family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost.It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes.y family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost. It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes."
        }
      },
      {
        "_index": "azure-ai-studio-embeddings",
        "_id": "ajd5OowBHxQKHyc3TDSC",
        "_score": 0.8345704,
        "_source": {
          "id": 820622,
          "body": "Home Heating Calculator. Typically, approximately 50% of the energy consumed in a home annually is for space heating. When deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important.This calculator can help you estimate the cost of fuel for different heating appliances.hen deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important. This calculator can help you estimate the cost of fuel for different heating appliances."
        }
      },
      {
        "_index": "azure-ai-studio-embeddings",
        "_id": "Djd5OowBHxQKHyc3TDSC",
        "_score": 0.8327426,
        "_source": {
          "id": 8202683,
          "body": "Fuel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel.If you are paying $4 per gallon, the trip would cost you $200.Most boats have much larger gas tanks than cars.uel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-google-vertex-ai-tab"
       aria-labelledby="infer-api-search-google-vertex-ai"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET google-vertex-ai-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "google_vertex_ai_embeddings",
        "model_text": "Calculate fuel cost"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1077.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">mistral-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">"hits": [
      {
        "_index": "google-vertex-ai-embeddings",
        "_id": "Ryv0nZEBBFPLbFsdCbGn",
        "_score": 0.86815524,
        "_source": {
          "id": 3041038,
          "content": "For example, the cost of the fuel could be 96.9, the amount could be 10 pounds, and the distance covered could be 80 miles. To convert between Litres per 100KM and Miles Per Gallon, please provide a value and click on the required button.o calculate how much fuel you'll need for a given journey, please provide the distance in miles you will be covering on your journey, and the estimated MPG of your vehicle. To work out what MPG you are really getting, please provide the cost of the fuel, how much you spent on the fuel, and how far it took you."
        }
      },
      {
        "_index": "google-vertex-ai-embeddings",
        "_id": "w4j0nZEBZ1nFq1oiHQvK",
        "_score": 0.8676357,
        "_source": {
          "id": 1541469,
          "content": "This driving cost calculator takes into consideration the fuel economy of the vehicle that you are travelling in as well as the fuel cost. This road trip gas calculator will give you an idea of how much would it cost to drive before you actually travel.his driving cost calculator takes into consideration the fuel economy of the vehicle that you are travelling in as well as the fuel cost. This road trip gas calculator will give you an idea of how much would it cost to drive before you actually travel."
        }
      },
      {
        "_index": "google-vertex-ai-embeddings",
        "_id": "Hoj0nZEBZ1nFq1oiHQjJ",
        "_score": 0.80510974,
        "_source": {
          "id": 7982559,
          "content": "What's that light cost you? 1  Select your electric rate (or click to enter your own). 2  You can calculate results for up to four types of lights. 3  Select the type of lamp (i.e. 4  Select the lamp wattage (lamp lumens). 5  Enter the number of lights in use. 6  Select how long the lamps are in use (or click to enter your own; enter hours on per year). 7  Finally, ..."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-mistral-tab"
       aria-labelledby="infer-api-search-mistral"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET mistral-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "mistral_embeddings",
        "model_text": "Calculate fuel cost"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1078.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">mistral-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "mistral-embeddings",
        "_id": "DDd5OowBHxQKHyc3TDSC",
        "_score": 0.83704096,
        "_source": {
          "id": 862114,
          "body": "How to calculate fuel cost for a road trip. By Tara Baukus Mello • Bankrate.com. Dear Driving for Dollars, My family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost.It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes.y family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost. It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes."
        }
      },
      {
        "_index": "mistral-embeddings",
        "_id": "ajd5OowBHxQKHyc3TDSC",
        "_score": 0.8345704,
        "_source": {
          "id": 820622,
          "body": "Home Heating Calculator. Typically, approximately 50% of the energy consumed in a home annually is for space heating. When deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important.This calculator can help you estimate the cost of fuel for different heating appliances.hen deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important. This calculator can help you estimate the cost of fuel for different heating appliances."
        }
      },
      {
        "_index": "mistral-embeddings",
        "_id": "Djd5OowBHxQKHyc3TDSC",
        "_score": 0.8327426,
        "_source": {
          "id": 8202683,
          "body": "Fuel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel.If you are paying $4 per gallon, the trip would cost you $200.Most boats have much larger gas tanks than cars.uel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-amazon-bedrock-tab"
       aria-labelledby="infer-api-search-amazon-bedrock"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET amazon-bedrock-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "amazon_bedrock_embeddings",
        "model_text": "Calculate fuel cost"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1079.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">amazon-bedrock-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "amazon-bedrock-embeddings",
        "_id": "DDd5OowBHxQKHyc3TDSC",
        "_score": 0.83704096,
        "_source": {
          "id": 862114,
          "body": "How to calculate fuel cost for a road trip. By Tara Baukus Mello • Bankrate.com. Dear Driving for Dollars, My family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost.It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes.y family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost. It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes."
        }
      },
      {
        "_index": "amazon-bedrock-embeddings",
        "_id": "ajd5OowBHxQKHyc3TDSC",
        "_score": 0.8345704,
        "_source": {
          "id": 820622,
          "body": "Home Heating Calculator. Typically, approximately 50% of the energy consumed in a home annually is for space heating. When deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important.This calculator can help you estimate the cost of fuel for different heating appliances.hen deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important. This calculator can help you estimate the cost of fuel for different heating appliances."
        }
      },
      {
        "_index": "amazon-bedrock-embeddings",
        "_id": "Djd5OowBHxQKHyc3TDSC",
        "_score": 0.8327426,
        "_source": {
          "id": 8202683,
          "body": "Fuel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel.If you are paying $4 per gallon, the trip would cost you $200.Most boats have much larger gas tanks than cars.uel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="infer-api-search-alibabacloud-ai-search-tab"
       aria-labelledby="infer-api-search-alibabacloud-ai-search"
       hidden="">
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET alibabacloud-ai-search-embeddings/_search
{
  "knn": {
    "field": "content_embedding",
    "query_vector_builder": {
      "text_embedding": {
        "model_id": "alibabacloud_ai_search_embeddings",
        "model_text": "Calculate fuel cost"
      }
    },
    "k": 10,
    "num_candidates": 100
  },
  "_source": [
    "id",
    "content"
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1080.console"></div>
<p>As a result, you receive the top 10 documents that are closest in meaning to the
query from the <code class="literal">alibabacloud-ai-search-embeddings</code> index sorted by their proximity to the query:</p>
<div class="pre_wrapper lang-consol-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-consol-result">"hits": [
      {
        "_index": "alibabacloud-ai-search-embeddings",
        "_id": "DDd5OowBHxQKHyc3TDSC",
        "_score": 0.83704096,
        "_source": {
          "id": 862114,
          "body": "How to calculate fuel cost for a road trip. By Tara Baukus Mello • Bankrate.com. Dear Driving for Dollars, My family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost.It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes.y family is considering taking a long road trip to finish off the end of the summer, but I'm a little worried about gas prices and our overall fuel cost. It doesn't seem easy to calculate since we'll be traveling through many states and we are considering several routes."
        }
      },
      {
        "_index": "alibabacloud-ai-search-embeddings",
        "_id": "ajd5OowBHxQKHyc3TDSC",
        "_score": 0.8345704,
        "_source": {
          "id": 820622,
          "body": "Home Heating Calculator. Typically, approximately 50% of the energy consumed in a home annually is for space heating. When deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important.This calculator can help you estimate the cost of fuel for different heating appliances.hen deciding on a heating system, many factors will come into play: cost of fuel, installation cost, convenience and life style are all important. This calculator can help you estimate the cost of fuel for different heating appliances."
        }
      },
      {
        "_index": "alibabacloud-ai-search-embeddings",
        "_id": "Djd5OowBHxQKHyc3TDSC",
        "_score": 0.8327426,
        "_source": {
          "id": 8202683,
          "body": "Fuel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel.If you are paying $4 per gallon, the trip would cost you $200.Most boats have much larger gas tanks than cars.uel is another important cost. This cost will depend on your boat, how far you travel, and how fast you travel. A 33-foot sailboat traveling at 7 knots should be able to travel 300 miles on 50 gallons of diesel fuel."
        }
      },
      (...)
    ]</pre>
</div>
  </div>
</div>
<div class="position-relative"><h4><a id="infer-interactive-tutorials"></a>Interactive tutorials</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/search/search-your-data/semantic-search-inference.asciidoc">edit</a></div>
<p>You can also find tutorials in an interactive Colab notebook format using the
Elasticsearch Python client:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://colab.research.google.com/github/elastic/elasticsearch-labs/blob/main/notebooks/integrations/cohere/inference-cohere.ipynb" class="ulink" target="_top">Cohere inference tutorial notebook</a>
</li>
<li class="listitem">
<a href="https://colab.research.google.com/github/elastic/elasticsearch-labs/blob/main/notebooks/search/07-inference.ipynb" class="ulink" target="_top">OpenAI inference tutorial notebook</a>
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="semantic-search-semantic-text.html">« Tutorial: semantic search with <code class="literal">semantic_text</code></a>
</span>
<span class="next">
<a href="semantic-search-elser.html">Tutorial: semantic search with ELSER »</a>
</span>
</div>
</body>
</html>
