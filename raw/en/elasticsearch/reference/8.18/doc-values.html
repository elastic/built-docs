<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>doc_values | Elasticsearch Guide [8.18] | Elastic</title>
<meta class="elastic" name="content" content="doc_values | Elasticsearch Guide [8.18]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.18]"/>
<link rel="up" href="mapping-params.html" title="Mapping parameters"/>
<link rel="prev" href="copy-to.html" title="copy_to"/>
<link rel="next" href="dynamic.html" title="dynamic"/>
<meta class="elastic" name="product_version" content="8.18"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.18"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.18"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="copy-to.html">« <code class="literal">copy_to</code></a>
</span>
<span class="next">
<a href="dynamic.html"><code class="literal">dynamic</code> »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.18]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="mapping-params.html">Mapping parameters</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>doc_values</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/mapping/params/doc-values.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    A newer version is available. Check out the <a href="https://www.elastic.co/docs/reference/elasticsearch/mapping-reference/doc-values">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="doc-values"></a><code class="literal">doc_values</code></h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/mapping/params/doc-values.asciidoc">edit</a></div>
</div></div></div>
<p>Most fields are <a class="xref" href="mapping-index.html" title="index">indexed</a> by default, which makes them
searchable. The inverted index allows queries to look up the search term in
unique sorted list of terms, and from that immediately have access to the list
of documents that contain the term.</p>
<p>Sorting, aggregations, and access to field values in scripts requires a
different data access pattern. Instead of looking up the term and finding
documents, we need to be able to look up the document and find the terms that
it has in a field.</p>
<p>The <code class="literal">doc_values</code> field is an on-disk data structure that is built at index time and
enables efficient data access. It stores the same values as
<code class="literal">_source</code>, but in a column-oriented format that is more efficient for
sorting and aggregations.</p>
<p>Doc values are supported on most field types,
excluding <code class="literal">text</code> and <code class="literal">annotated_text</code> fields. See also <a class="xref" href="doc-values.html#doc-values-disable" title="Disabling doc values">Disabling doc values</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="doc-value-only-fields"></a>Doc-value-only fields</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/mapping/params/doc-values.asciidoc">edit</a></div>
</div></div></div>
<p><a class="xref" href="number.html" title="Numeric field types">Numeric types</a>, <a class="xref" href="date.html" title="Date field type">date types</a>, the <a class="xref" href="boolean.html" title="Boolean field type">boolean type</a>,
<a class="xref" href="ip.html" title="IP field type">ip type</a>, <a class="xref" href="geo-point.html" title="Geopoint field type">geo_point type</a> and the <a class="xref" href="keyword.html" title="Keyword type family">keyword type</a>
can also be queried when they are not <a class="xref" href="mapping-index.html" title="index">indexed</a> but only
have doc values enabled.
Query performance on doc values is much slower than on index structures, but
offers an interesting tradeoff between disk usage and query performance for
fields that are only rarely queried and where query performance is not as
important. This makes doc-value-only fields a good fit for fields that are
not expected to be normally used for filtering, for example gauges or
counters on metric data.</p>
<p>Doc-value-only fields can be configured as follows:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="my-index-000001",
    mappings={
        "properties": {
            "status_code": {
                "type": "long"
            },
            "session_id": {
                "type": "long",
                "index": False
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.create(
  index: 'my-index-000001',
  body: {
    mappings: {
      properties: {
        status_code: {
          type: 'long'
        },
        session_id: {
          type: 'long',
          index: false
        }
      }
    }
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "my-index-000001",
  mappings: {
    properties: {
      status_code: {
        type: "long",
      },
      session_id: {
        type: "long",
        index: false,
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="b87438263ccd68624b1d69d8750f9432"></a>
<div class="pre_wrapper lang-console default has-python has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-ruby has-js">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "status_code": { <a id="CO150-1"></a><i class="conum" data-value="1"></i>
        "type":  "long"
      },
      "session_id": { <a id="CO150-2"></a><i class="conum" data-value="2"></i>
        "type":  "long",
        "index": false
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-python has-ruby has-js" data-snippet="snippets/406.console"></div>
<div class="calloutlist default has-python has-ruby has-js lang-console">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO150-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">status_code</code> field is a regular long field.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO150-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">session_id</code> field has <code class="literal">index</code> disabled, and is therefore a
doc-value-only long field as doc values are enabled by default.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="doc-values-disable"></a>Disabling doc values</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/mapping/params/doc-values.asciidoc">edit</a></div>
</div></div></div>
<p>For all fields that support them, <code class="literal">doc_values</code> are enabled by default. In
some field types, such as <a class="xref" href="search-as-you-type.html" title="Search-as-you-type field type"><code class="literal">search_as_you_type</code></a>,
<code class="literal">doc_values</code> appear in API responses but can&#8217;t be configured. Setting
<code class="literal">doc_values</code> for these fields might result in an error or have no effect.</p>
<p>If you&#8217;re
certain you don&#8217;t need to sort or aggregate on a field or access its
value from a script, you can disable <code class="literal">doc_values</code> in order to save disk space:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.create(
    index="my-index-000001",
    mappings={
        "properties": {
            "status_code": {
                "type": "keyword"
            },
            "session_id": {
                "type": "keyword",
                "doc_values": False
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.create(
  index: 'my-index-000001',
  body: {
    mappings: {
      properties: {
        status_code: {
          type: 'keyword'
        },
        session_id: {
          type: 'keyword',
          doc_values: false
        }
      }
    }
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "my-index-000001",
  mappings: {
    properties: {
      status_code: {
        type: "keyword",
      },
      session_id: {
        type: "keyword",
        doc_values: false,
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="2f9574fee2ebecd6f7d917ee99b26bcc"></a>
<div class="pre_wrapper lang-console default has-python has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-ruby has-js">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "status_code": { <a id="CO151-1"></a><i class="conum" data-value="1"></i>
        "type":       "keyword"
      },
      "session_id": { <a id="CO151-2"></a><i class="conum" data-value="2"></i>
        "type":       "keyword",
        "doc_values": false
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-python has-ruby has-js" data-snippet="snippets/407.console"></div>
<div class="calloutlist default has-python has-ruby has-js lang-console">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO151-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">status_code</code> field has <code class="literal">doc_values</code> enabled by default.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO151-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">session_id</code> has <code class="literal">doc_values</code> disabled, but can still be queried.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot disable doc values for <a class="xref" href="keyword.html#wildcard-field-type" title="Wildcard field type"><code class="literal">wildcard</code></a>
fields.</p>
</div>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="copy-to.html">« <code class="literal">copy_to</code></a>
</span>
<span class="next">
<a href="dynamic.html"><code class="literal">dynamic</code> »</a>
</span>
</div>
</body>
</html>
