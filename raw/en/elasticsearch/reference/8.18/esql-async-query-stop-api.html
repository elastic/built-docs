<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ES|QL async query stop API | Elasticsearch Guide [8.18] | Elastic</title>
<meta class="elastic" name="content" content="ES|QL async query stop API | Elasticsearch Guide [8.18]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.18]"/>
<link rel="up" href="esql-apis.html" title="ES|QL APIs"/>
<link rel="prev" href="esql-async-query-delete-api.html" title="ES|QL async query delete API"/>
<link rel="next" href="features-apis.html" title="Features APIs"/>
<meta class="elastic" name="product_version" content="8.18"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.18"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.18"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="esql-async-query-delete-api.html">« ES|QL async query delete API</a>
</span>
<span class="next">
<a href="features-apis.html">Features APIs »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.18]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql-apis.html">ES|QL APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>ES|QL async query stop API</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-async-query-stop-api.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="esql-async-query-stop-api"></a>ES|QL async query stop API</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-async-query-stop-api.asciidoc">edit</a></div>
</div></div></div>

<div class="sidebar">
<div class="titlepage"><div><div>
<p class="title"><strong>New API reference</strong></p>
</div></div></div>
<p>For the most up-to-date API details, refer to <a href="/docs/api/doc/elasticsearch/v8/group/endpoint-esql" class="ulink" target="_top">ES|QL APIs</a>.</p>
</div>
<p>The <a class="xref" href="esql.html" title="ES|QL">ES|QL</a> async query stop API is used to manually stop an async query. Once the stop command is issued,
the query stops processing new data and returns the results that have been already processed. Note that due to the pipelined
nature of ES|QL queries, the stop operation is not immediate and may take time to return results.</p>
<p>The results are returned in <a class="xref" href="esql-query-api.html#esql-query-api-response-body" title="Response body">the same format</a> as the
<a class="xref" href="esql-async-query-get-api.html" title="ES|QL async query get API">ES|QL async query get API</a>.
If the query has been finished by the time the stop command is issued, the results are returned immediately.</p>
<p>If the query processing has not finished by the time the stop command is issued, the response will have the <code class="literal">is_partial</code>
field set to <code class="literal">true</code>.</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.esql.async_query_stop(
    id="FkpMRkJGS1gzVDRlM3g4ZzMyRGlLbkEaTXlJZHdNT09TU2VTZVBoNDM3cFZMUToxMDM=",
)
print(resp)</pre>
</div>
<a id="b1e81b70b874a1f0cf75a0ec6e430ddc"></a>
<div class="pre_wrapper lang-console default has-python">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python">POST /_query/async/FkpMRkJGS1gzVDRlM3g4ZzMyRGlLbkEaTXlJZHdNT09TU2VTZVBoNDM3cFZMUToxMDM=/stop</pre>
</div>
<div class="console_widget has-python" data-snippet="snippets/2737.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="esql-async-query-stop-api-request"></a>Request</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-async-query-stop-api.asciidoc">edit</a></div>
</div></div></div>
<p><code class="literal">POST /_query/async/&lt;query_id&gt;/stop</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="esql-async-query-stop-api-prereqs"></a>Prerequisites</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-async-query-stop-api.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, only the authenticated user that submitted the original query request
can stop the query.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="esql-async-query-stop-api-path-params"></a>Path parameters</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-async-query-stop-api.asciidoc">edit</a></div>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;query_id&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Identifier for the query to stop.
</p>
<p>A query ID is provided in the <a class="xref" href="esql-async-query-api.html" title="ES|QL async query API">ES|QL async query API</a>'s
response for a query that does not complete in the awaited time.</p>
</dd>
</dl>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="esql-async-query-delete-api.html">« ES|QL async query delete API</a>
</span>
<span class="next">
<a href="features-apis.html">Features APIs »</a>
</span>
</div>
</body>
</html>
