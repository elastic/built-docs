<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ES|QL limitations | Elasticsearch Guide [8.18] | Elastic</title>
<meta class="elastic" name="content" content="ES|QL limitations | Elasticsearch Guide [8.18]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.18]"/>
<link rel="up" href="esql.html" title="ES|QL"/>
<link rel="prev" href="esql-task-management.html" title="ES|QL task management"/>
<link rel="next" href="esql-examples.html" title="ES|QL examples"/>
<meta class="elastic" name="product_version" content="8.18"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.18"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.18"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="esql-task-management.html">« ES|QL task management</a>
</span>
<span class="next">
<a href="esql-examples.html">ES|QL examples »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.18]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql.html">ES|QL</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>ES|QL limitations</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="esql-limitations"></a>ES|QL limitations</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
</div></div></div>

<div class="position-relative"><h3><a id="esql-max-rows"></a>Result set size limit</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>By default, an ES|QL query returns up to 1000 rows. You can increase the number
of rows up to 10,000 using the <a class="xref" href="esql-commands.html#esql-limit" title="LIMIT"><code class="literal">LIMIT</code></a> command.
Queries do not return more than 10,000 rows, regardless of the <code class="literal">LIMIT</code> command&#8217;s
value.</p>
<p>This limit only applies to the number of rows that are retrieved by the query.
Queries and aggregations run on the full data set.</p>
<p>To overcome this limitation:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Reduce the result set size by modifying the query to only return relevant
data. Use <a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> to select a smaller subset of the data.
</li>
<li class="listitem">
Shift any post-query processing to the query itself. You can use the ES|QL
<a class="xref" href="esql-commands.html#esql-stats-by" title="STATS"><code class="literal">STATS</code></a> command to aggregate data in the query.
</li>
</ul>
</div>
<p>The default and maximum limits can be changed using these dynamic cluster
settings:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">esql.query.result_truncation_default_size</code>
</li>
<li class="listitem">
<code class="literal">esql.query.result_truncation_max_size</code>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="esql-supported-types"></a>Field types</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="_supported_types"></a>Supported types</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>ES|QL currently supports the following <a class="xref" href="mapping-types.html" title="Field data types">field types</a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">alias</code>
</li>
<li class="listitem">
<code class="literal">boolean</code>
</li>
<li class="listitem">
<code class="literal">date</code>
</li>
<li class="listitem">
<p><code class="literal">date_nanos</code> (Tech Preview)</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The following functions don&#8217;t yet support date nanos: <code class="literal">bucket</code>, <code class="literal">date_format</code>, <code class="literal">date_parse</code>, <code class="literal">date_diff</code>, <code class="literal">date_extract</code>
</li>
<li class="listitem">
You can use <code class="literal">to_datetime</code> to cast to millisecond dates to use unsupported functions
</li>
</ul>
</div>
</li>
<li class="listitem">
<code class="literal">double</code> (<code class="literal">float</code>, <code class="literal">half_float</code>, <code class="literal">scaled_float</code> are represented as <code class="literal">double</code>)
</li>
<li class="listitem">
<code class="literal">ip</code>
</li>
<li class="listitem">
<code class="literal">keyword</code> <a class="xref" href="keyword.html" title="Keyword type family">family</a> including <code class="literal">keyword</code>, <code class="literal">constant_keyword</code>, and <code class="literal">wildcard</code>
</li>
<li class="listitem">
<code class="literal">int</code> (<code class="literal">short</code> and <code class="literal">byte</code> are represented as <code class="literal">int</code>)
</li>
<li class="listitem">
<code class="literal">long</code>
</li>
<li class="listitem">
<code class="literal">null</code>
</li>
<li class="listitem">
<code class="literal">text</code> <a class="xref" href="text.html" title="Text type family">family</a> including <code class="literal">text</code>, <code class="literal">semantic_text</code> and <code class="literal">match_only_text</code>
</li>
<li class="listitem">
<span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> <code class="literal">unsigned_long</code>
</li>
<li class="listitem">
<code class="literal">version</code>
</li>
<li class="listitem">
<p>Spatial types</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">geo_point</code>
</li>
<li class="listitem">
<code class="literal">geo_shape</code>
</li>
<li class="listitem">
<code class="literal">point</code>
</li>
<li class="listitem">
<code class="literal">shape</code>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="_unsupported_types"></a>Unsupported types</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>ES|QL does not yet support the following field types:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>TSDB metrics</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">counter</code>
</li>
<li class="listitem">
<code class="literal">position</code>
</li>
<li class="listitem">
<code class="literal">aggregate_metric_double</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Date/time</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">date_range</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Other types</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">binary</code>
</li>
<li class="listitem">
<code class="literal">completion</code>
</li>
<li class="listitem">
<code class="literal">dense_vector</code>
</li>
<li class="listitem">
<code class="literal">double_range</code>
</li>
<li class="listitem">
<code class="literal">flattened</code>
</li>
<li class="listitem">
<code class="literal">float_range</code>
</li>
<li class="listitem">
<code class="literal">histogram</code>
</li>
<li class="listitem">
<code class="literal">integer_range</code>
</li>
<li class="listitem">
<code class="literal">ip_range</code>
</li>
<li class="listitem">
<code class="literal">long_range</code>
</li>
<li class="listitem">
<code class="literal">nested</code>
</li>
<li class="listitem">
<code class="literal">rank_feature</code>
</li>
<li class="listitem">
<code class="literal">rank_features</code>
</li>
<li class="listitem">
<code class="literal">search_as_you_type</code>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>Querying a column with an unsupported type returns an error. If a column with an
unsupported type is not explicitly used in a query, it is returned with <code class="literal">null</code>
values, with the exception of nested fields. Nested fields are not returned at
all.</p>
<div class="position-relative"><h4><a id="_limitations_on_supported_types"></a>Limitations on supported types</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>Some <a class="xref" href="mapping-types.html" title="Field data types">field types</a> are not supported in all contexts:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Spatial types are not supported in the <a class="xref" href="esql-commands.html#esql-sort" title="SORT">SORT</a> processing command.
Specifying a column of one of these types as a sort parameter will result in an error:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">geo_point</code>
</li>
<li class="listitem">
<code class="literal">geo_shape</code>
</li>
<li class="listitem">
<code class="literal">cartesian_point</code>
</li>
<li class="listitem">
<code class="literal">cartesian_shape</code>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>In addition, when <a class="xref" href="esql-multi-index.html" title="Using ES|QL to query multiple indices">querying multiple indexes</a>,
it&#8217;s possible for the same field to be mapped to multiple types.
These fields cannot be directly used in queries or returned in results,
unless they&#8217;re <a class="xref" href="esql-multi-index.html#esql-multi-index-union-types" title="Union types">explicitly converted to a single type</a>.</p>
<div class="position-relative"><h3><a id="esql-_source-availability"></a>_source availability</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>ES|QL does not support configurations where the
<a class="xref" href="mapping-source-field.html" title="_source field">_source field</a> is <a class="xref" href="mapping-source-field.html#disable-source-field" title="Disabling the _source field">disabled</a>.</p>
<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> ES|QL&#8217;s support for <a class="xref" href="mapping-source-field.html#synthetic-source" title="Synthetic _source">synthetic <code class="literal">_source</code></a>
is currently experimental.</p>
<div class="position-relative"><h3><a id="esql-limitations-full-text-search"></a>Full-text search</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> ES|QL&#8217;s support for <a class="xref" href="esql-functions-operators.html#esql-search-functions" title="ES|QL Full-text search functions">full-text search</a>
is currently in Technical Preview. One limitation of full-text search is that
it is necessary to use the search function, like <a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH"><code class="literal">MATCH</code></a>, in a <a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> command
directly after the <a class="xref" href="esql-commands.html#esql-from" title="FROM"><code class="literal">FROM</code></a> source command, or close enough to it.
Otherwise, the query will fail with a validation error.
Another limitation is that any <a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> command containing a full-text search function
cannot use disjunctions (<code class="literal">OR</code>), unless:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
All functions used in the OR clauses are full-text functions themselves, or scoring is not used
</li>
</ul>
</div>
<p>For example, this query is valid:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM books
| WHERE MATCH(author, "Faulkner") AND MATCH(author, "Tolkien")</pre>
</div>
<p>But this query will fail due to the <a class="xref" href="esql-commands.html#esql-stats-by" title="STATS">STATS</a> command:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM books
| STATS AVG(price) BY author
| WHERE MATCH(author, "Faulkner")</pre>
</div>
<p>And this query that uses a disjunction will succeed:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM books
| WHERE MATCH(author, "Faulkner") OR QSTR("author: Hemingway")</pre>
</div>
<p>However using scoring will fail because it uses a non full text function as part of the disjunction:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM books METADATA _score
| WHERE MATCH(author, "Faulkner") OR author LIKE "Hemingway"</pre>
</div>
<p>Scoring will work in the following query, as it uses full text functions on both <code class="literal">OR</code> clauses:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM books METADATA _score
| WHERE MATCH(author, "Faulkner") OR QSTR("author: Hemingway")</pre>
</div>
<p>Note that, because of <a class="xref" href="esql-limitations.html#esql-limitations-text-fields" title="text fields behave like keyword fields">the way ES|QL treats <code class="literal">text</code> values</a>,
any queries on <code class="literal">text</code> fields that do not explicitly use the full-text functions,
<a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH"><code class="literal">MATCH</code></a>, <a class="xref" href="esql-functions-operators.html#esql-qstr" title="QSTR"><code class="literal">QSTR</code></a> or <a class="xref" href="esql-functions-operators.html#esql-kql" title="KQL"><code class="literal">KQL</code></a>, will behave as if the fields are actually <code class="literal">keyword</code> fields:
they are case-sensitive and need to match the full string.</p>
<div class="position-relative"><h3><a id="esql-limitations-text-fields"></a><code class="literal">text</code> fields behave like <code class="literal">keyword</code> fields</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>While ES|QL supports <a class="xref" href="text.html" title="Text type family"><code class="literal">text</code></a> fields, ES|QL does not treat these fields
like the Search API does. ES|QL queries do not query or aggregate the
<a class="xref" href="analysis.html" title="Text analysis">analyzed string</a>. Instead, an ES|QL query will try to get a <code class="literal">text</code>
field&#8217;s subfield of the <a class="xref" href="keyword.html" title="Keyword type family">keyword family type</a> and query/aggregate
that. If it&#8217;s not possible to retrieve a <code class="literal">keyword</code> subfield, ES|QL will get the
string from a document&#8217;s <code class="literal">_source</code>. If the <code class="literal">_source</code> cannot be retrieved, for
example when using synthetic source, <code class="literal">null</code> is returned.</p>
<p>Once a <code class="literal">text</code> field is retrieved, if the query touches it in any way, for example passing
it into a function, the type will be converted to <code class="literal">keyword</code>. In fact, functions that operate on both
<code class="literal">text</code> and <code class="literal">keyword</code> fields will perform as if the <code class="literal">text</code> field was a <code class="literal">keyword</code> field all along.</p>
<p>For example, the following query will return a column <code class="literal">greatest</code> of type <code class="literal">keyword</code> no matter
whether any or all of <code class="literal">field1</code>, <code class="literal">field2</code>, and <code class="literal">field3</code> are of type <code class="literal">text</code>:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">| FROM index
| EVAL greatest = GREATEST(field1, field2, field3)</pre>
</div>
<p>Note that ES|QL&#8217;s retrieval of <code class="literal">keyword</code> subfields may have unexpected
consequences. Other than when explicitly using the full-text functions, <a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH"><code class="literal">MATCH</code></a> and <a class="xref" href="esql-functions-operators.html#esql-qstr" title="QSTR"><code class="literal">QSTR</code></a>,
any ES|QL query on a <code class="literal">text</code> field is case-sensitive.</p>
<p>For example, after indexing a field of type <code class="literal">text</code> with the value <code class="literal">Elasticsearch
query language</code>, the following <code class="literal">WHERE</code> clause does not match because the <code class="literal">LIKE</code>
operator is case-sensitive:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">| WHERE field LIKE "elasticsearch query language"</pre>
</div>
<p>The following <code class="literal">WHERE</code> clause does not match either, because the <code class="literal">LIKE</code> operator
tries to match the whole string:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">| WHERE field LIKE "Elasticsearch"</pre>
</div>
<p>As a workaround, use wildcards and regular expressions. For example:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">| WHERE field RLIKE "[Ee]lasticsearch.*"</pre>
</div>
<p>Furthermore, a subfield may have been mapped with a <a class="xref" href="normalizer.html" title="normalizer">normalizer</a>, which can
transform the original string. Or it may have been mapped with <a class="xref" href="ignore-above.html" title="ignore_above"><code class="literal">ignore_above</code></a>,
which can truncate the string. None of these mapping operations are applied to
an ES|QL query, which may lead to false positives or negatives.</p>
<p>To avoid these issues, a best practice is to be explicit about the field that
you query, and query <code class="literal">keyword</code> sub-fields instead of <code class="literal">text</code> fields.
Or consider using one of the <a class="xref" href="esql-functions-operators.html#esql-search-functions" title="ES|QL Full-text search functions">full-text search</a> functions.</p>
<div class="position-relative"><h3><a id="esql-multi-index-limitations"></a>Using ES|QL to query multiple indices</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>As discussed in more detail in <a class="xref" href="esql-multi-index.html" title="Using ES|QL to query multiple indices">Using ES|QL to query multiple indices</a>, ES|QL can execute a single query across multiple indices,
data streams, or aliases. However, there are some limitations to be aware of:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
All underlying indexes and shards must be active. Using admin commands or UI,
it is possible to pause an index or shard, for example by disabling a frozen tier instance,
but then any ES|QL query that includes that index or shard will fail, even if the query uses
<a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> to filter out the results from the paused index.
If you see an error of type <code class="literal">search_phase_execution_exception</code>,
with the message <code class="literal">Search rejected due to missing shards</code>, you likely have an index or shard in <code class="literal">UNASSIGNED</code> state.
</li>
<li class="listitem">
The same field must have the same type across all indexes. If the same field is mapped to different types
it is still possible to query the indexes,
but the field must be <a class="xref" href="esql-multi-index.html#esql-multi-index-union-types" title="Union types">explicitly converted to a single type</a>.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="esql-tsdb"></a>Time series data streams are not supported</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>ES|QL does not support querying time series data streams (TSDS).</p>
<div class="position-relative"><h3><a id="esql-limitations-date-math"></a>Date math limitations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>Date math expressions work well when the leftmost expression is a datetime, for
example:</p>
<div class="pre_wrapper lang-txt">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-txt">now() + 1 year - 2hour + ...</pre>
</div>
<p>But using parentheses or putting the datetime to the right is not always supported yet. For example, the following expressions fail:</p>
<div class="pre_wrapper lang-txt">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-txt">1year + 2hour + now()
now() + (1year + 2hour)</pre>
</div>
<p>Date math does not allow subtracting two datetimes, for example:</p>
<div class="pre_wrapper lang-txt">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-txt">now() - 2023-10-26</pre>
</div>
<div class="position-relative"><h3><a id="esql-limitations-enrich"></a>Enrich limitations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>While all three enrich policy types are supported, there are some limitations to be aware of:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">geo_match</code> enrich policy type only supports the <code class="literal">intersects</code> spatial relation.
</li>
<li class="listitem">
It is required that the <code class="literal">match_field</code> in the <code class="literal">ENRICH</code> command is of the correct type.
For example, if the enrich policy is of type <code class="literal">geo_match</code>, the <code class="literal">match_field</code> in the <code class="literal">ENRICH</code>
command must be of type <code class="literal">geo_point</code> or <code class="literal">geo_shape</code>.
Likewise, a <code class="literal">range</code> enrich policy requires a <code class="literal">match_field</code> of type <code class="literal">integer</code>, <code class="literal">long</code>, <code class="literal">date</code>, or <code class="literal">ip</code>,
depending on the type of the range field in the original enrich index.
</li>
<li class="listitem">
However, this constraint is relaxed for <code class="literal">range</code> policies when the <code class="literal">match_field</code> is of type <code class="literal">KEYWORD</code>.
In this case the field values will be parsed during query execution, row by row.
If any value fails to parse, the output values for that row will be set to <code class="literal">null</code>,
an appropriate warning will be produced and the query will continue to execute.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="esql-limitations-dissect"></a>Dissect limitations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>The <code class="literal">DISSECT</code> command does not support reference keys.</p>
<div class="position-relative"><h3><a id="esql-limitations-grok"></a>Grok limitations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>The <code class="literal">GROK</code> command does not support configuring <a class="xref" href="grok-processor.html#custom-patterns" title="Custom Patterns">custom
patterns</a>, or <a class="xref" href="grok-processor.html#trace-match" title="Providing Multiple Match Patterns">multiple patterns</a>. The <code class="literal">GROK</code> command is not
subject to <a class="xref" href="grok-processor.html#grok-watchdog" title="Grok watchdog">Grok watchdog settings</a>.</p>
<div class="position-relative"><h3><a id="esql-limitations-mv"></a>Multivalue limitations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>ES|QL <a class="xref" href="esql-multivalued-fields.html" title="ES|QL multivalued fields">supports multivalued fields</a>, but functions
return <code class="literal">null</code> when applied to a multivalued field, unless documented otherwise.
Work around this limitation by converting the field to single value with one of
the <a class="xref" href="esql-functions-operators.html#esql-mv-functions" title="ES|QL multivalue functions">multivalue functions</a>.</p>
<div class="position-relative"><h3><a id="esql-limitations-timezone"></a>Timezone support</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<p>ES|QL only supports the UTC timezone.</p>
<div class="position-relative"><h3><a id="esql-limitations-kibana"></a>Kibana limitations</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-limitations.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The user interface to filter data is not enabled when Discover is in ES|QL
mode. To filter data, write a query that uses the <a class="xref" href="esql-commands.html#esql-where" title="WHERE"><code class="literal">WHERE</code></a> command
instead.
</li>
<li class="listitem">
Discover shows no more than 10,000 rows. This limit only applies to the number
of rows that are retrieved by the query and displayed in Discover. Queries and
aggregations run on the full data set.
</li>
<li class="listitem">
Discover shows no more than 50 columns. If a query returns
more than 50 columns, Discover only shows the first 50.
</li>
<li class="listitem">
CSV export from Discover shows no more than 10,000 rows. This limit only applies to the number
of rows that are retrieved by the query and displayed in Discover. Queries and
aggregations run on the full data set.
</li>
<li class="listitem">
Querying many indices at once without any filters can cause an error in
kibana which looks like <code class="literal">[esql] &gt; Unexpected error from Elasticsearch: The
content length (536885793) is bigger than the maximum allowed string
(536870888)</code>. The response from ES|QL is too long. Use <a class="xref" href="esql-commands.html#esql-drop" title="DROP"><code class="literal">DROP</code></a> or
<a class="xref" href="esql-commands.html#esql-keep" title="KEEP"><code class="literal">KEEP</code></a> to limit the number of fields returned.
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="esql-task-management.html">« ES|QL task management</a>
</span>
<span class="next">
<a href="esql-examples.html">ES|QL examples »</a>
</span>
</div>
</body>
</html>
