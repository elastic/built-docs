<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ES|QL syntax reference | Elasticsearch Guide [8.18] | Elastic</title>
<meta class="elastic" name="content" content="ES|QL syntax reference | Elasticsearch Guide [8.18]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.18]"/>
<link rel="up" href="esql-language.html" title="ES|QL reference"/>
<link rel="prev" href="esql-language.html" title="ES|QL reference"/>
<link rel="next" href="esql-commands.html" title="ES|QL commands"/>
<meta class="elastic" name="product_version" content="8.18"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.18"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.18"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="esql-language.html">« ES|QL reference</a>
</span>
<span class="next">
<a href="esql-commands.html">ES|QL commands »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.18]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql.html">ES|QL</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql-language.html">ES|QL reference</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>ES|QL syntax reference</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="esql-syntax"></a>ES|QL syntax reference</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
</div></div></div>

<div class="position-relative"><h3><a id="esql-basic-syntax"></a>Basic syntax</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>An ES|QL query is composed of a <a class="xref" href="esql-commands.html" title="ES|QL commands">source command</a> followed
by an optional series of <a class="xref" href="esql-commands.html" title="ES|QL commands">processing commands</a>,
separated by a pipe character: <code class="literal">|</code>. For example:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">source-command
| processing-command1
| processing-command2</pre>
</div>
<p>The result of a query is the table produced by the final processing command.</p>
<p>For an overview of all supported commands, functions, and operators, refer to <a class="xref" href="esql-commands.html" title="ES|QL commands">Commands</a> and <a class="xref" href="esql-functions-operators.html" title="ES|QL functions and operators">Functions and operators</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For readability, this documentation puts each processing command on a new
line. However, you can write an ES|QL query as a single line. The following
query is identical to the previous one:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">source-command | processing-command1 | processing-command2</pre>
</div>
</div>
</div>
<div class="position-relative"><h4><a id="esql-identifiers"></a>Identifiers</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>Identifiers need to be quoted with backticks (<code class="literal">`</code>) if:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
they don&#8217;t start with a letter, <code class="literal">_</code> or <code class="literal">@</code>
</li>
<li class="listitem">
any of the other characters is not a letter, number, or <code class="literal">_</code>
</li>
</ul>
</div>
<p>For example:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM index
| KEEP `1.field`</pre>
</div>
<p>When referencing a function alias that itself uses a quoted identifier, the
backticks of the quoted identifier need to be escaped with another backtick. For
example:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM index
| STATS COUNT(`1.field`)
| EVAL my_count = `COUNT(``1.field``)`</pre>
</div>
<div class="position-relative"><h4><a id="esql-literals"></a>Literals</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>ES|QL currently supports numeric and string literals.</p>
<div class="position-relative"><h5><a id="esql-string-literals"></a>String literals</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>A string literal is a sequence of unicode characters delimited by double
quotes (<code class="literal">"</code>).</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">// Filter by a string value
FROM index
| WHERE first_name == "Georgi"</pre>
</div>
<p>If the literal string itself contains quotes, these need to be escaped (<code class="literal">\\"</code>).
ES|QL also supports the triple-quotes (<code class="literal">"""</code>) delimiter, for convenience:</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">ROW name = """Indiana "Indy" Jones"""</pre>
</div>
<p>The special characters CR, LF and TAB can be provided with the usual escaping:
<code class="literal">\r</code>, <code class="literal">\n</code>, <code class="literal">\t</code>, respectively.</p>
<div class="position-relative"><h5><a id="esql-numeric-literals"></a>Numerical literals</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>The numeric literals are accepted in decimal and in the scientific notation
with the exponent marker (<code class="literal">e</code> or <code class="literal">E</code>), starting either with a digit, decimal
point <code class="literal">.</code> or the negative sign <code class="literal">-</code>:</p>
<div class="pre_wrapper lang-sql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sql">1969    -- integer notation
3.14    -- decimal notation
.1234   -- decimal notation starting with decimal point
4E5     -- scientific notation (with exponent marker)
1.2e-3  -- scientific notation with decimal point
-.1e2   -- scientific notation starting with the negative sign</pre>
</div>
<p>The integer numeric literals are implicitly converted to the <code class="literal">integer</code>, <code class="literal">long</code>
or the <code class="literal">double</code> type, whichever can first accommodate the literal&#8217;s value.</p>
<p>The floating point literals are implicitly converted the <code class="literal">double</code> type.</p>
<p>To obtain constant values of different types, use one of the numeric
<a class="xref" href="esql-functions-operators.html#esql-type-conversion-functions" title="ES|QL type conversion functions">conversion functions</a>.</p>
<div class="position-relative"><h4><a id="esql-comments"></a>Comments</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>ES|QL uses C++ style comments:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
double slash <code class="literal">//</code> for single line comments
</li>
<li class="listitem">
<code class="literal">/*</code> and <code class="literal">*/</code> for block comments
</li>
</ul>
</div>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">// Query the employees index
FROM employees
| WHERE height &gt; 2</pre>
</div>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM /* Query the employees index */ employees
| WHERE height &gt; 2</pre>
</div>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM employees
/* Query the
 * employees
 * index */
| WHERE height &gt; 2</pre>
</div>
<div class="position-relative"><h4><a id="esql-timespan-literals"></a>Timespan literals</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>Datetime intervals and timespans can be expressed using timespan literals.
Timespan literals are a combination of a number and a temporal unit. The
supported temporal units are listed in <a class="xref" href="esql-time-spans.html#esql-time-spans-table" title="Supported temporal units">time span unit</a>.
More examples of the usages of time spans can be found in
<a class="xref" href="esql-time-spans.html" title="ES|QL time spans">Use time spans in ES|QL</a>.</p>
<p>Timespan literals are not whitespace sensitive. These expressions are all valid:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">1day</code>
</li>
<li class="listitem">
<code class="literal">1 day</code>
</li>
<li class="listitem">
<code class="literal">1       day</code>
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="esql-function-named-params"></a>Function named parameters</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/esql/esql-syntax.asciidoc">edit</a></div>
<p>Some functions like <a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH">match</a> use named parameters to provide additional options.</p>
<p>Named parameters allow specifying name value pairs, using the following syntax:</p>
<p><code class="literal">{"option_name": option_value, "another_option_name": another_value}</code></p>
<p>Valid value types are strings, numbers and booleans.</p>
<p>An example using <a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH">match</a>:</p>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.esql.query({
  query:
    '\nFROM library\n| WHERE match(author, "Frank Herbert", {"minimum_should_match": 2, "operator": "AND"})\n| LIMIT 5\n',
});
console.log(response);</pre>
</div>
<a id="c3b77e11b16e37e9e37e28dec922432e"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">POST /_query
{
"query": """
FROM library
| WHERE match(author, "Frank Herbert", {"minimum_should_match": 2, "operator": "AND"})
| LIMIT 5
"""
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/1981.console"></div>
<p>You can also use <a class="xref" href="esql-rest.html#esql-rest-params" title="Passing parameters to a query">query parameters</a> in function named parameters:</p>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.esql.query({
  query:
    '\nFROM library\n| EVAL year = DATE_EXTRACT("year", release_date)\n| WHERE page_count &gt; ? AND match(author, ?, {"minimum_should_match": ?})\n| LIMIT 5\n',
  params: [300, "Frank Herbert", 2],
});
console.log(response);</pre>
</div>
<a id="89f547649895176c246bb8c41313ff21"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">POST /_query
{
"query": """
FROM library
| EVAL year = DATE_EXTRACT("year", release_date)
| WHERE page_count &gt; ? AND match(author, ?, {"minimum_should_match": ?})
| LIMIT 5
""",
"params": [300, "Frank Herbert", 2]
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/1982.console"></div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="esql-language.html">« ES|QL reference</a>
</span>
<span class="next">
<a href="esql-commands.html">ES|QL commands »</a>
</span>
</div>
</body>
</html>
