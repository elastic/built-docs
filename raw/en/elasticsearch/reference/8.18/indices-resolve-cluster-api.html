<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Resolve cluster API | Elasticsearch Guide [8.18] | Elastic</title>
<meta class="elastic" name="content" content="Resolve cluster API | Elasticsearch Guide [8.18]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.18]"/>
<link rel="up" href="indices.html" title="Index APIs"/>
<link rel="prev" href="indices-resolve-index-api.html" title="Resolve index API"/>
<link rel="next" href="_advantages_of_using_this_endpoint_before_a_cross_cluster_search.html" title="Advantages of using this endpoint before a cross-cluster search"/>
<meta class="elastic" name="product_version" content="8.18"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.18"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.18"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="indices-resolve-index-api.html">« Resolve index API</a>
</span>
<span class="next">
<a href="_advantages_of_using_this_endpoint_before_a_cross_cluster_search.html">Advantages of using this endpoint before a cross-cluster search »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.18]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Resolve cluster API</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/indices/resolve-cluster.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="indices-resolve-cluster-api"></a>Resolve cluster API</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/indices/resolve-cluster.asciidoc">edit</a></div>
</div></div></div>

<div class="sidebar">
<div class="titlepage"><div><div>
<p class="title"><strong>New API reference</strong></p>
</div></div></div>
<p>For the most up-to-date API details, refer to <a href="/docs/api/doc/elasticsearch/v8/group/endpoint-indices" class="ulink" target="_top">Index APIs</a>.</p>
</div>
<p>Resolves the specified index expressions to return information about
each cluster, including the local "querying" cluster, if included. If no index expression
is provided, this endpoint will return information about all the remote
clusters that are configured on the querying cluster.</p>
<p>This endpoint is useful before doing a <a class="xref" href="modules-cross-cluster-search.html" title="Search across clusters">cross-cluster search</a> in
order to determine which remote clusters should be included in a search.</p>
<p>You use the same index expression with this endpoint as you would for cross-cluster
search. Index and <a class="xref" href="modules-cross-cluster-search.html#exclude-problematic-clusters" title="Excluding clusters or indices from a cross-cluster search">cluster exclusions</a> are also supported
with this endpoint.</p>
<p>For each cluster in scope, information is returned about:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
whether the querying ("local") cluster was able to connect to each remote cluster
specified in the index expression. Note that this endpoint actively attempts to
contact the remote clusters, unlike the <a class="xref" href="cluster-remote-info.html" title="Remote cluster info API">remote/info</a> endpoint.
</li>
<li class="listitem">
whether each remote cluster is configured with <code class="literal">skip_unavailable</code> as <code class="literal">true</code> or <code class="literal">false</code>
</li>
<li class="listitem">
whether there are any indices, aliases or data streams on that cluster that match
the index expression (if one provided)
</li>
<li class="listitem">
whether the search is likely to have errors returned when you do a cross-cluster search (including any
authorization errors if your user does not have permission to query a remote cluster or
the indices on that cluster)
</li>
<li class="listitem">
(in some cases) cluster version information, including the Elasticsearch server version
</li>
</ol>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Whenever a security exception is returned for a remote cluster, that remote
will always be marked as connected=false in the response, since your user does not have
permissions to access that cluster (or perhaps the remote index) you are querying.
Once the proper security permissions are obtained, then you can rely on the <code class="literal">connected</code> field
in the response to determine whether the remote cluster is available and ready for querying.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The ability to query without an index expression was added in 8.18, so when
querying remote clusters older than that, the local cluster will send the index
expression <code class="literal">dummy*</code> to those remote clusters. Thus, if an errors occur, you may see a reference
to that index expression even though you didn&#8217;t request it. If it causes a problem, you can
instead include an index expression like <code class="literal">*:*</code> to bypass the issue.</p>
</div>
</div>
<a id="947efe87db7f8813c0878f8affc3e2d1"></a>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">GET /_resolve/cluster</pre>
</div>
<div class="console_widget" data-snippet="snippets/2870.console"></div>
<p>Returns information about all remote clusters configured on the local cluster
without doing any index matching.</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.resolve_cluster(
    name="my-index-*,cluster*:my-index-*",
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.resolve_cluster(
  name: 'my-index-*,cluster*:my-index-*'
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.resolveCluster({
  name: "my-index-*,cluster*:my-index-*",
});
console.log(response);</pre>
</div>
<a id="43e86fbaeed068dcc981214338559b5a"></a>
<div class="pre_wrapper lang-console default has-python has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-ruby has-js">GET /_resolve/cluster/my-index-*,cluster*:my-index-*</pre>
</div>
<div class="console_widget has-python has-ruby has-js" data-snippet="snippets/2871.console"></div>
<p>Returns information about the local cluster and all remote clusters that
start with the alias <code class="literal">cluster*</code>. Each cluster will return information
about whether it has any indices, aliases or data streams that match <code class="literal">my-index-*</code>.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="resolve-cluster-api-request"></a>Request</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/indices/resolve-cluster.asciidoc">edit</a></div>
</div></div></div>
<p><code class="literal">GET /_resolve/cluster</code></p>
<p>or</p>
<p><code class="literal">GET /_resolve/cluster/&lt;index_expression&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="resolve-cluster-api-prereqs"></a>Prerequisites</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/indices/resolve-cluster.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">view_index_metadata</code>, <code class="literal">read</code>, or <code class="literal">manage</code> <a class="xref" href="security-privileges.html#privileges-list-indices" title="Indices privileges">index
privilege</a> for the target data stream, index, or alias.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="resolve-cluster-api-path-params"></a>Path parameters</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/indices/resolve-cluster.asciidoc">edit</a></div>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index_expression&gt;</code>
</span>
</dt>
<dd>
<p>(Optional, string) Comma-separated name(s) or index pattern(s) of the
indices, aliases, and data streams to resolve, using <a class="xref" href="api-conventions.html#api-multi-index" title="Multi-target syntax">Multi-target syntax</a>.
Resources on <a class="xref" href="remote-clusters.html" title="Remote clusters">remote clusters</a> can be specified using the
<code class="literal">&lt;cluster&gt;:&lt;name&gt;</code> syntax.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="resolve-cluster-api-query-params"></a>Query parameters</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/indices/resolve-cluster.asciidoc">edit</a></div>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, TimeValue) Specify a max wait time for remote clusters to respond.
If a remote cluster does not respond within this timeout period, the API response
will show the cluster as not connected and include an error message that the
request timed out. The default timeout is unset and the query can take
as long as the networking layer is configured to wait for remote clusters that are
not responding (typically 30 seconds).
</dd>
<dt>
<span class="term">
<code class="literal">expand_wildcards</code>
</span>
</dt>
<dd>
<p>(Optional, string)
Type of index that wildcard patterns can match. If the request can target data
streams, this argument determines whether wildcard expressions match hidden data
streams. Supports comma-separated values, such as <code class="literal">open,hidden</code>. Valid values
are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">all</code>
</span>
</dt>
<dd>
Match any data stream or index, including <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a> ones.
</dd>
<dt>
<span class="term">
<code class="literal">open</code>
</span>
</dt>
<dd>
Match open, non-hidden indices. Also matches any non-hidden data stream.
</dd>
<dt>
<span class="term">
<code class="literal">closed</code>
</span>
</dt>
<dd>
Match closed, non-hidden indices. Also matches any non-hidden data stream. Data
streams cannot be closed.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
Match hidden data streams and hidden indices. Must be combined with <code class="literal">open</code>,
<code class="literal">closed</code>, or both.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Wildcard patterns are not accepted.
</dd>
</dl>
</div>
<p>Defaults to <code class="literal">open</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index. Defaults to <code class="literal">false</code>.
</p>
<p>Defaults to <code class="literal">false</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="aliases.html" title="Aliases">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed indices.
This behavior applies even if the request targets other open indices. For
example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index starts
with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">ignore_throttled</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean) If <code class="literal">true</code>, concrete, expanded or aliased indices are
ignored when frozen. Defaults to <code class="literal">false</code>.
</p>
<p><span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono u-strikethrough">7.16.0</span>]
<span class="Admonishment-detail">
Deprecated in 7.16.0.
</span>
</span></p>
</dd>
</dl>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>The index options above are only allowed when specifying an index expression.
You will get an error if you specify index options to the _resolve/cluster API
that takes no index expression.</p>
</div>
</div>
<div class="position-relative"><h3><a id="usecases-for-resolve-cluster"></a>Test availability of remote clusters</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.18/docs/reference/indices/resolve-cluster.asciidoc">edit</a></div>
<p>The <a class="xref" href="cluster-remote-info.html" title="Remote cluster info API">remote/info</a> endpoint is commonly used to test whether the "local"
cluster (the cluster being queried) is connected to its remote clusters, but it does not
necessarily reflect whether the remote cluster is available or not. The remote cluster may
be available, while the local cluster is not currently connected to it.</p>
<p>You can use the resolve-cluster API to attempt to reconnect to remote clusters
(for example with <code class="literal">GET _resolve/cluster</code> or <code class="literal">GET _resolve/cluster/*:*</code> ).
The <code class="literal">connected</code> field in the response will indicate whether it was successful.
If a connection was (re-)established, this will also cause the
<a class="xref" href="cluster-remote-info.html" title="Remote cluster info API">remote/info</a> endpoint to now indicate a connected status.</p>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="indices-resolve-index-api.html">« Resolve index API</a>
</span>
<span class="next">
<a href="_advantages_of_using_this_endpoint_before_a_cross_cluster_search.html">Advantages of using this endpoint before a cross-cluster search »</a>
</span>
</div>
</body>
</html>
