<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Connect to a remote cluster | Elasticsearch Guide [8.x] | Elastic</title>
<meta class="elastic" name="content" content="Connect to a remote cluster | Elasticsearch Guide [8.x]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.x]"/>
<link rel="up" href="ccr-getting-started-tutorial.html" title="Tutorial: Set up cross-cluster replication"/>
<link rel="prev" href="ccr-getting-started-prerequisites.html" title="Prerequisites"/>
<link rel="next" href="_configure_privileges_for_cross_cluster_replication_2.html" title="Configure privileges for cross-cluster replication"/>
<meta class="elastic" name="product_version" content="8.x"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.x"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="ccr-getting-started-prerequisites.html">« Prerequisites</a>
</span>
<span class="next">
<a href="_configure_privileges_for_cross_cluster_replication_2.html">Configure privileges for cross-cluster replication »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.x]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="xpack-ccr.html">Cross-cluster replication</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ccr-getting-started-tutorial.html">Tutorial: Set up cross-cluster replication</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Connect to a remote cluster</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/ccr/getting-started.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="_connect_to_a_remote_cluster"></a>Connect to a remote cluster</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/ccr/getting-started.asciidoc">edit</a></div>
</div></div></div>
<p>To replicate an index on a remote cluster (Cluster A) to a local cluster (Cluster B), you configure Cluster A as a remote on Cluster B.</p>
<div class="imageblock">
<div class="content">
<img src="images/ccr-tutorial-clusters.png" alt="ClusterA contains the leader index and ClusterB contains the follower index">
</div>
</div>
<p>To configure a remote cluster from Stack Management in Kibana:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Set up a <a class="xref" href="remote-clusters.html#add-remote-clusters" title="Add remote clusters">secure connection</a> as needed.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Remote Clusters</strong></span> from the side navigation.
</li>
<li class="listitem">
Specify the Elasticsearch endpoint URL, or the IP address or host name of the remote
cluster (<code class="literal">ClusterA</code>) followed by the transport port (defaults to <code class="literal">9300</code>). For
example, <code class="literal">cluster.es.eastus2.staging.azure.foundit.no:9400</code> or
<code class="literal">192.168.1.1:9300</code>.
</li>
</ol>
</div>
<details open>
<summary class="title">API example</summary>
<div class="content">
<p>You can also use the <a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">cluster update settings API</a> to
add a remote cluster:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.cluster.put_settings(
    persistent={
        "cluster": {
            "remote": {
                "leader": {
                    "seeds": [
                        "127.0.0.1:9300"
                    ]
                }
            }
        }
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.cluster.put_settings(
  body: {
    persistent: {
      cluster: {
        remote: {
          leader: {
            seeds: [
              '127.0.0.1:9300'
            ]
          }
        }
      }
    }
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.cluster.putSettings({
  persistent: {
    cluster: {
      remote: {
        leader: {
          seeds: ["127.0.0.1:9300"],
        },
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="9ad38ab4d9c3983e97e8c38fec611f10"></a>
<div class="pre_wrapper lang-console default has-python has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-ruby has-js">PUT /_cluster/settings
{
  "persistent" : {
    "cluster" : {
      "remote" : {
        "leader" : {
          "seeds" : [
            "127.0.0.1:9300" <a id="CO763-1"></a><i class="conum" data-value="1"></i>
          ]
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-python has-ruby has-js" data-snippet="snippets/2339.console"></div>
<div class="calloutlist default has-python has-ruby has-js lang-console">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO763-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specifies the hostname and transport port of a seed node in the remote
cluster.</p>
</td>
</tr>
</table>
</div>
<p>You can verify that the local cluster is successfully connected to the remote
cluster.</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.cluster.remote_info()
print(resp)</pre>
</div>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.cluster.remote_info
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.cluster.remoteInfo();
console.log(response);</pre>
</div>
<a id="cc0cca5556ec6224c7134c233734beed"></a>
<div class="pre_wrapper lang-console default has-python has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-ruby has-js">GET /_remote/info</pre>
</div>
<div class="console_widget has-python has-ruby has-js" data-snippet="snippets/2340.console"></div>
<p>The API response indicates that the local cluster is connected to the remote
cluster with cluster alias <code class="literal">leader</code>.</p>
<a id="aefefa057d7d37e187f3968b47479493"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "leader" : {
    "seeds" : [
      "127.0.0.1:9300"
    ],
    "connected" : true,
    "num_nodes_connected" : 1, <a id="CO764-1"></a><i class="conum" data-value="1"></i>
    "max_connections_per_cluster" : 3,
    "initial_connect_timeout" : "30s",
    "skip_unavailable" : true,
    "mode" : "sniff"
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO764-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The number of nodes in the remote cluster the local cluster is
connected to.</p>
</td>
</tr>
</table>
</div>
</div>
</details>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ccr-getting-started-prerequisites.html">« Prerequisites</a>
</span>
<span class="next">
<a href="_configure_privileges_for_cross_cluster_replication_2.html">Configure privileges for cross-cluster replication »</a>
</span>
</div>
</body>
</html>
