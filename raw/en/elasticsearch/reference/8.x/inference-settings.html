<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Inference API settings in Elasticsearch | Elasticsearch Guide [8.x] | Elastic</title>
<meta class="elastic" name="content" content="Inference API settings in Elasticsearch | Elasticsearch Guide [8.x]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.x]"/>
<link rel="up" href="settings.html" title="Configuring Elasticsearch"/>
<link rel="prev" href="indexing-buffer.html" title="Indexing buffer settings"/>
<link rel="next" href="license-settings.html" title="License settings"/>
<meta class="elastic" name="product_version" content="8.x"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.x"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="indexing-buffer.html">« Indexing buffer settings</a>
</span>
<span class="next">
<a href="license-settings.html">License settings »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.x]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="settings.html">Configuring Elasticsearch</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Inference API settings in Elasticsearch</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/settings/inference-settings.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/reference/elasticsearch/configuration-reference/inference-settings">latest documentation</a>.
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="inference-settings"></a>Inference API settings in Elasticsearch</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/settings/inference-settings.asciidoc">edit</a></div>
</div></div></div>

<p><a id="inference-settings-description"></a>You do not need to configure any settings to use the inference APIs. Each setting has a default.</p>
<div class="position-relative"><h4><a id="xpack-inference-logging"></a>Inference API logging settings</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/settings/inference-settings.asciidoc">edit</a></div>
<p>When certain failures occur, a log message is emitted. In the case of a
reoccurring failure the logging throttler restricts repeated messages from being logged.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.inference.logging.reset_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the interval for when a cleanup thread will clear an internal
cache of the previously logged messages. Defaults to one day (<code class="literal">1d</code>).
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.logging.wait_duration</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the amount of time to wait after logging a message before that
message can be logged again. Defaults to one hour (<code class="literal">1h</code>).
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="xpack-inference-http-settings"></a>Inference API HTTP settings</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/settings/inference-settings.asciidoc">edit</a></div>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.inference.http.max_response_size</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the maximum size in bytes an HTTP response is allowed to have,
defaults to <code class="literal">50mb</code>, the maximum configurable value is <code class="literal">100mb</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.http.max_total_connections</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the maximum number of connections the internal connection pool can
lease. Defaults to <code class="literal">50</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.http.max_route_connections</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the maximum number of connections a single route can lease from
the internal connection pool. If this setting is set to a value equal to or greater than
<code class="literal">xpack.inference.http.max_total_connections</code>, then a single third party service could lease all available
connections and other third party services would be unable to lease connections. Defaults to <code class="literal">20</code>.
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.http.connection_eviction_interval</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the interval that an eviction thread will run to remove expired and
stale connections from the internal connection pool. Decreasing this time value can help improve throughput if
multiple third party service are contending for the available connections in the pool. Defaults to one minute (<code class="literal">1m</code>).
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.http.connection_eviction_max_idle_time</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the maximum duration a connection can be unused before it is marked as
idle and can be closed and removed from the shared connection pool. Defaults to one minute (<code class="literal">1m</code>).
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.http.request_executor.queue_capacity</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the size of the internal queue for requests waiting to be sent. If
the queue is full and a request is sent to the inference API, it will be rejected. Defaults to <code class="literal">2000</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="xpack-inference-http-retry-settings"></a>Inference API HTTP Retry settings</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/settings/inference-settings.asciidoc">edit</a></div>
</div></div></div>
<p>When a third-party service returns a transient failure code (for example, 429), the request is retried by the inference
API. These settings govern the retry behavior. When a request is retried, exponential backoff is used.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.inference.http.retry.initial_delay</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the initial delay before retrying a request. Defaults to one second
(<code class="literal">1s</code>).
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.http.retry.max_delay_bound</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the maximum delay for a request. Defaults to five seconds (<code class="literal">5s</code>).
</dd>
<dt>
<span class="term">
<code class="literal">xpack.inference.http.retry.timeout</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the maximum amount of time a request can be retried.
Once the request exceeds this time, the request will no longer be retried and a failure will be returned.
Defaults to 30 seconds (<code class="literal">30s</code>).
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="xpack-inference-input-text"></a>Inference API Input text</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/8.x/docs/reference/settings/inference-settings.asciidoc">edit</a></div>
</div></div></div>
<p>For certain third-party service integrations, when the service returns an error indicating that the request
input was too large, the input will be truncated and the request is retried. These settings govern
how the truncation is performed.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">xpack.inference.truncator.reduction_percentage</code>
</span>
</dt>
<dd>
(<a class="xref" href="cluster-update-settings.html" title="Cluster update settings API">Dynamic</a>) Specifies the percentage to reduce the input text by if the 3rd party service
responds with an error indicating it is too long. Defaults to 50 percent (<code class="literal">0.5</code>).
</dd>
</dl>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="indexing-buffer.html">« Indexing buffer settings</a>
</span>
<span class="next">
<a href="license-settings.html">License settings »</a>
</span>
</div>
</body>
</html>
