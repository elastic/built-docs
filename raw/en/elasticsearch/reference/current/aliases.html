<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Aliases | Elasticsearch Guide [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Aliases | Elasticsearch Guide [8.15]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.15]"/>
<link rel="up" href="index.html" title="Elasticsearch Guide [8.15]"/>
<link rel="prev" href="nlp-example.html" title="Tutorial: Natural language processing (NLP)"/>
<link rel="next" href="search-with-elasticsearch.html" title="Search your data"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.15"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="nlp-example.html">« Tutorial: Natural language processing (NLP)</a>
</span>
<span class="next">
<a href="search-with-elasticsearch.html">Search your data »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.15]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Aliases</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="aliases"></a>Aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h2>
</div></div></div>
<p>An alias is a secondary name for a group of data streams or indices. Most Elasticsearch
APIs accept an alias in place of a data stream or index name.</p>
<p>You can change the data streams or indices of an alias at any time. If you use
aliases in your application&#8217;s Elasticsearch requests, you can reindex data with no
downtime or changes to your app&#8217;s code.</p>
<h3><a id="alias-types"></a>Alias types<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>There are two types of aliases:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A <span class="strong strong"><strong>data stream alias</strong></span> points to one or more data streams.
</li>
<li class="listitem">
An <span class="strong strong"><strong>index alias</strong></span> points to one or more indices.
</li>
</ul>
</div>
<p>An alias cannot point to both data streams and indices. You also cannot add a
data stream&#8217;s backing index to an index alias.</p>
<h3><a id="add-alias"></a>Add an alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>To add an existing data stream or index to an alias, use the
<a class="xref" href="indices-aliases.html" title="Aliases API">aliases API</a>'s <code class="literal">add</code> action. If the alias doesn&#8217;t exist, the
request creates it.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        add: {
          index: 'logs-nginx.access-prod',
          alias: 'logs'
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      add: {
        index: "logs-nginx.access-prod",
        alias: "logs",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="bf3f520b47581d861e802730aaf2a519"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "add": {
        "index": "logs-nginx.access-prod",
        "alias": "logs"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/830.console"></div>
<p>The API&#8217;s <code class="literal">index</code> and <code class="literal">indices</code> parameters support wildcards (<code class="literal">*</code>). Wildcard
patterns that match both data streams and indices return an error.</p>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      add: {
        index: "logs-*",
        alias: "logs",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="016f3147dae9ff2c3e831257ae470361"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">POST _aliases
{
  "actions": [
    {
      "add": {
        "index": "logs-*",
        "alias": "logs"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/831.console"></div>
<h3><a id="remove-alias"></a>Remove an alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>To remove an alias, use the aliases API&#8217;s <code class="literal">remove</code> action.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        remove: {
          index: 'logs-nginx.access-prod',
          alias: 'logs'
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      remove: {
        index: "logs-nginx.access-prod",
        alias: "logs",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="84465de841fe5c6099a0382f786f2cb8"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "remove": {
        "index": "logs-nginx.access-prod",
        "alias": "logs"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/832.console"></div>
<h3><a id="multiple-actions"></a>Multiple actions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>You can use the aliases API to perform multiple actions in a single atomic
operation.</p>
<p>For example, the <code class="literal">logs</code> alias points to a single data stream. The following
request swaps the stream for the alias. During this swap, the <code class="literal">logs</code> alias has
no downtime and never points to both streams at the same time.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        remove: {
          index: 'logs-nginx.access-prod',
          alias: 'logs'
        }
      },
      {
        add: {
          index: 'logs-my_app-default',
          alias: 'logs'
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      remove: {
        index: "logs-nginx.access-prod",
        alias: "logs",
      },
    },
    {
      add: {
        index: "logs-my_app-default",
        alias: "logs",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="650a0fb27c66a790c4687267423af1da"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "remove": {
        "index": "logs-nginx.access-prod",
        "alias": "logs"
      }
    },
    {
      "add": {
        "index": "logs-my_app-default",
        "alias": "logs"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/833.console"></div>
<h3><a id="multiple-action-results"></a>Multiple action results<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>When using multiple actions, if some succeed and some fail, a list of per-action results will be returned.</p>
<p>Consider a similar action list to the previous example, but now with an alias <code class="literal">log-non-existing</code>, which does not yet exist.
In this case, the <code class="literal">remove</code> action will fail, but the <code class="literal">add</code> action will succeed.
The response will contain the list <code class="literal">action_results</code>, with a result for every requested action.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        remove: {
          index: 'index1',
          alias: 'logs-non-existing'
        }
      },
      {
        add: {
          index: 'index2',
          alias: 'logs-non-existing'
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      remove: {
        index: "index1",
        alias: "logs-non-existing",
      },
    },
    {
      add: {
        index: "index2",
        alias: "logs-non-existing",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="78e20b4cff470ed7357de1fd74bcfeb7"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "remove": {
        "index": "index1",
        "alias": "logs-non-existing"
      }
    },
    {
      "add": {
        "index": "index2",
        "alias": "logs-non-existing"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/834.console"></div>
<p>The API returns the following result:</p>
<a id="c7c9e56f89bfa7adf46675fad3581e7f"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "acknowledged": true,
  "errors": true,
  "action_results": [
    {
      "action": {
        "type": "remove",
        "indices": [ "index1" ],
        "aliases": [ "logs-non-existing" ],
      },
      "status": 404,
      "error": {
        "type": "aliases_not_found_exception",
        "reason": "aliases [logs-non-existing] missing",
        "resource.type": "aliases",
        "resource.id": "logs-non-existing"
      }
    },
    {
      "action": {
        "type": "add",
        "indices": [ "index2" ],
        "aliases": [ "logs-non-existing" ],
      },
      "status": 200
    }
  ]
}</pre>
</div>
<p>Allowing the action list to succeed partially may not provide the desired result.
It may be more appropriate to set <code class="literal">must_exist</code> to <code class="literal">true</code>, which will cause the entire action
list to fail if a single action fails.</p>
<h3><a id="add-alias-at-creation"></a>Add an alias at index creation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>You can also use a <a class="xref" href="indices-component-template.html" title="Create or update component template API">component</a> or
<a class="xref" href="indices-put-template.html" title="Create or update index template API">index template</a> to add index or data stream aliases
when they are created.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.cluster.put_component_template(
  name: 'my-aliases',
  body: {
    template: {
      aliases: {
        "my-alias": {}
      }
    }
  }
)
puts response

response = client.indices.put_index_template(
  name: 'my-index-template',
  body: {
    index_patterns: [
      'my-index-*'
    ],
    composed_of: [
      'my-aliases',
      'my-mappings',
      'my-settings'
    ],
    template: {
      aliases: {
        "yet-another-alias": {}
      }
    }
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.cluster.putComponentTemplate({
  name: "my-aliases",
  template: {
    aliases: {
      "my-alias": {},
    },
  },
});
console.log(response);

const response1 = await client.indices.putIndexTemplate({
  name: "my-index-template",
  index_patterns: ["my-index-*"],
  composed_of: ["my-aliases", "my-mappings", "my-settings"],
  template: {
    aliases: {
      "yet-another-alias": {},
    },
  },
});
console.log(response1);</pre>
</div>
<a id="d93d52b6057a7aff3d0766ca44c505e0"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js"># Component template with index aliases
PUT _component_template/my-aliases
{
  "template": {
    "aliases": {
      "my-alias": {}
    }
  }
}

# Index template with index aliases
PUT _index_template/my-index-template
{
  "index_patterns": [
    "my-index-*"
  ],
  "composed_of": [
    "my-aliases",
    "my-mappings",
    "my-settings"
  ],
  "template": {
    "aliases": {
      "yet-another-alias": {}
    }
  }
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/835.console"></div>
<p>You can also specify index aliases in <a class="xref" href="indices-create-index.html" title="Create index API">create index API</a>
requests.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.create(
  index: '&lt;my-index-{now/d}-000001&gt;',
  body: {
    aliases: {
      "my-alias": {}
    }
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.create({
  index: "&lt;my-index-{now/d}-000001&gt;",
  aliases: {
    "my-alias": {},
  },
});
console.log(response);</pre>
</div>
<a id="6ce8334def48552ba7d44025580d9105"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js"># PUT &lt;my-index-{now/d}-000001&gt;
PUT %3Cmy-index-%7Bnow%2Fd%7D-000001%3E
{
  "aliases": {
    "my-alias": {}
  }
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/836.console"></div>
<h3><a id="view-aliases"></a>View aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>To get a list of your cluster&#8217;s aliases, use the <a class="xref" href="indices-get-alias.html" title="Get alias API">get alias
API</a> with no argument.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.get_alias
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.getAlias();
console.log(response);</pre>
</div>
<a id="e6ccd979c34ba03007e625c6ec3e71a9"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">GET _alias</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/837.console"></div>
<p>Specify a data stream or index before <code class="literal">_alias</code> to view its aliases.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.get_alias(
  index: 'my-data-stream'
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.getAlias({
  index: "my-data-stream",
});
console.log(response);</pre>
</div>
<a id="a34e758e019f563d323ca90ad9fd6e3e"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">GET my-data-stream/_alias</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/838.console"></div>
<p>Specify an alias after <code class="literal">_alias</code> to view its data streams or indices.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.get_alias(
  name: 'logs'
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.getAlias({
  name: "logs",
});
console.log(response);</pre>
</div>
<a id="ee08328cd157d547de19b4abe867b23e"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">GET _alias/logs</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/839.console"></div>
<h3><a id="write-index"></a>Write index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>You can use <code class="literal">is_write_index</code> to specify a write index or data stream for an
alias. Elasticsearch routes any write requests for the alias to this index or data
stream.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        add: {
          index: 'logs-nginx.access-prod',
          alias: 'logs'
        }
      },
      {
        add: {
          index: 'logs-my_app-default',
          alias: 'logs',
          is_write_index: true
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      add: {
        index: "logs-nginx.access-prod",
        alias: "logs",
      },
    },
    {
      add: {
        index: "logs-my_app-default",
        alias: "logs",
        is_write_index: true,
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="4301cb9d970ec65778f91ce1f438e0d5"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "add": {
        "index": "logs-nginx.access-prod",
        "alias": "logs"
      }
    },
    {
      "add": {
        "index": "logs-my_app-default",
        "alias": "logs",
        "is_write_index": true
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/840.console"></div>
<p>If an alias points to multiple indices or data streams and <code class="literal">is_write_index</code>
isn&#8217;t set, the alias rejects write requests. If an index alias points to one
index and <code class="literal">is_write_index</code> isn&#8217;t set, the index automatically acts as the write
index. Data stream aliases don&#8217;t automatically set a write data stream, even if
the alias points to one data stream.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend using data streams to store append-only time series data. If
you need to update or delete existing time series data, you can perform update or delete operations
directly on the data stream backing index. If you frequently send multiple documents using the same
<code class="literal">_id</code> expecting last-write-wins, you may want to use an index alias with a write index instead. See
<a class="xref" href="getting-started-index-lifecycle-management.html#manage-time-series-data-without-data-streams" title="Manage time series data without data streams">Manage time series data without data streams</a>.</p>
</div>
</div>
<h3><a id="filter-alias"></a>Filter an alias<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>The <code class="literal">filter</code> option uses <a class="xref" href="query-dsl.html" title="Query DSL">Query DSL</a> to limit the documents an alias
can access.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        add: {
          index: 'my-index-2099.05.06-000001',
          alias: 'my-alias',
          filter: {
            bool: {
              filter: [
                {
                  range: {
                    "@timestamp": {
                      gte: 'now-1d/d',
                      lt: 'now/d'
                    }
                  }
                },
                {
                  term: {
                    'user.id' =&gt; 'kimchy'
                  }
                }
              ]
            }
          }
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      add: {
        index: "my-index-2099.05.06-000001",
        alias: "my-alias",
        filter: {
          bool: {
            filter: [
              {
                range: {
                  "@timestamp": {
                    gte: "now-1d/d",
                    lt: "now/d",
                  },
                },
              },
              {
                term: {
                  "user.id": "kimchy",
                },
              },
            ],
          },
        },
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="a9554396506888e392a1aee0ca28e6fc"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "add": {
        "index": "my-index-2099.05.06-000001",
        "alias": "my-alias",
        "filter": {
          "bool": {
            "filter": [
              {
                "range": {
                  "@timestamp": {
                    "gte": "now-1d/d",
                    "lt": "now/d"
                  }
                }
              },
              {
                "term": {
                  "user.id": "kimchy"
                }
              }
            ]
          }
        }
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/841.console"></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Filters are only applied when using the <a class="xref" href="query-dsl.html" title="Query DSL">Query DSL</a>, and are not applied when <a class="xref" href="docs-get.html" title="Get API">retrieving a document by ID</a>.</p>
</div>
</div>
<h3><a id="alias-routing"></a>Routing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/alias.asciidoc">edit</a></h3>
<p>Use the <code class="literal">routing</code> option to <a class="xref" href="mapping-routing-field.html" title="_routing field">route</a> requests for an
alias to a specific shard. This lets you take advantage of
<a class="xref" href="shard-request-cache.html" title="Shard request cache settings">shard caches</a> to speed up searches. Data stream aliases
do not support routing options.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        add: {
          index: 'my-index-2099.05.06-000001',
          alias: 'my-alias',
          routing: '1'
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      add: {
        index: "my-index-2099.05.06-000001",
        alias: "my-alias",
        routing: "1",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="2ee002e60bd7a38d466e5f0eb0c38946"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "add": {
        "index": "my-index-2099.05.06-000001",
        "alias": "my-alias",
        "routing": "1"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/842.console"></div>
<p>Use <code class="literal">index_routing</code> and <code class="literal">search_routing</code> to specify different routing values for
indexing and search. If specified, these options overwrite the <code class="literal">routing</code> value
for their respective operations.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.update_aliases(
  body: {
    actions: [
      {
        add: {
          index: 'my-index-2099.05.06-000001',
          alias: 'my-alias',
          search_routing: '1',
          index_routing: '2'
        }
      }
    ]
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.updateAliases({
  actions: [
    {
      add: {
        index: "my-index-2099.05.06-000001",
        alias: "my-alias",
        search_routing: "1",
        index_routing: "2",
      },
    },
  ],
});
console.log(response);</pre>
</div>
<a id="433cf45a23decdf3a096016ffaaf26ba"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST _aliases
{
  "actions": [
    {
      "add": {
        "index": "my-index-2099.05.06-000001",
        "alias": "my-alias",
        "search_routing": "1",
        "index_routing": "2"
      }
    }
  ]
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/843.console"></div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="nlp-example.html">« Tutorial: Natural language processing (NLP)</a>
</span>
<span class="next">
<a href="search-with-elasticsearch.html">Search your data »</a>
</span>
</div>
</body>
</html>
