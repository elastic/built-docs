<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Using ES|QL for search | Elasticsearch Guide [8.19] | Elastic</title>
<meta class="elastic" name="content" content="Using ES|QL for search | Elasticsearch Guide [8.19]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.19]"/>
<link rel="up" href="esql-using.html" title="Using ES|QL"/>
<link rel="prev" href="esql-rest.html" title="ES|QL REST API"/>
<link rel="next" href="esql-kibana.html" title="Using ES|QL in Kibana"/>
<meta class="elastic" name="product_version" content="8.19"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.19"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.19"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="esql-rest.html">« ES|QL REST API</a>
</span>
<span class="next">
<a href="esql-kibana.html">Using ES|QL in Kibana »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.19]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql.html">ES|QL</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql-using.html">Using ES|QL</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Using ES|QL for search</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="esql-for-search"></a>Using ES|QL for search</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>This page provides an overview of how to use ES|QL for search use cases.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>For a hands-on tutorial check out <a class="xref" href="esql-search-tutorial.html" title="Tutorial: Search and filter with ES|QL"><em>Tutorial: Search and filter with ES|QL</em></a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="esql-search-quick-reference"></a>ES|QL search quick reference</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>The following table summarizes the key search features available in ES|QL and when they were introduced, organized chronologically by release.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Feature</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Available since</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="esql-for-search.html#esql-for-search-match-function-operator" title="MATCH function and operator">Match function/operator</a></p></td>
<td align="left" valign="top"><p>Perform basic text searches with <code class="literal">MATCH</code> function or match operator (<code class="literal">:</code>)</p></td>
<td align="left" valign="top"><p>8.17</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="esql-for-search.html#esql-for-search-query-string" title="Query string (QSTR) function">Query string function</a></p></td>
<td align="left" valign="top"><p>Execute complex queries with <code class="literal">QSTR</code> using Query String syntax</p></td>
<td align="left" valign="top"><p>8.17</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="esql-for-search.html#esql-for-search-scoring" title="Relevance scoring">Relevance scoring</a></p></td>
<td align="left" valign="top"><p>Calculate and sort by relevance with <code class="literal">METADATA _score</code></p></td>
<td align="left" valign="top"><p>8.18/9.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="esql-for-search.html#esql-for-search-semantic" title="Semantic search">Semantic search</a></p></td>
<td align="left" valign="top"><p>Perform semantic searches on <code class="literal">semantic_text</code> field types</p></td>
<td align="left" valign="top"><p>8.18/9.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="esql-for-search.html#esql-for-search-hybrid" title="Hybrid search">Hybrid search</a></p></td>
<td align="left" valign="top"><p>Combine lexical and semantic search approaches with custom weights</p></td>
<td align="left" valign="top"><p>8.18/9.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="esql-for-search.html#esql-for-search-kql" title="KQL function">Kibana Query Language</a></p></td>
<td align="left" valign="top"><p>Use Kibana Query Language with the <code class="literal">KQL</code> function</p></td>
<td align="left" valign="top"><p>8.18/9.0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="esql-for-search.html#esql-match-phrase-function" title="MATCH_PHRASE function">Match phrase function</a></p></td>
<td align="left" valign="top"><p>Perform phrase matching with <code class="literal">MATCH_PHRASE</code> function</p></td>
<td align="left" valign="top"><p>8.19/9.1</p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="how-search-works-in-esql"></a>How search works in ES|QL</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>ES|QL provides two distinct approaches for finding documents: filtering and searching. Understanding the difference is crucial for building effective queries and choosing the right approach for your use case.</p>
<p><span class="strong strong"><strong>Filtering</strong></span> removes documents that don&#8217;t meet your criteria. It&#8217;s a binary yes/no decision - documents either match your conditions or they don&#8217;t. Filtering is faster because it doesn&#8217;t calculate relevance scores and leverages efficient index structures for exact matches, ranges, and boolean logic.</p>
<p><span class="strong strong"><strong>Searching</strong></span> both filters documents and ranks them by relevance. It calculates a score for each matching document based on how well the content matches your query, allowing you to sort results from most relevant to least relevant. Search functions use advanced text analysis including stemming, synonyms, and fuzzy matching.</p>
<p><span class="strong strong"><strong>When to choose filtering:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Exact category matches (<code class="literal">category.keyword == "Electronics"</code>)
</li>
<li class="listitem">
Date ranges (<code class="literal">date &gt;= "2023-01-01"</code>)
</li>
<li class="listitem">
Numerical comparisons (<code class="literal">price &lt; 100</code>)
</li>
<li class="listitem">
Any scenario where you want all matching results without ranking
</li>
</ul>
</div>
<p><span class="strong strong"><strong>When to choose searching:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Text queries where some results are more relevant than others
</li>
<li class="listitem">
Finding documents similar to a search phrase
</li>
<li class="listitem">
Any scenario where you want the "best" matches first
</li>
<li class="listitem">
You want to use <a class="xref" href="analysis.html" title="Text analysis">analyzers</a> or <a class="xref" href="search-with-synonyms.html" title="Search with synonyms">synonyms</a>
</li>
</ul>
</div>
<p>ES|QL&#8217;s search functions address several key limitations that existed for text filtering: they work directly on multivalued fields, leverage analyzers for proper text analysis, and use optimized Lucene index structures for better performance.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-scoring"></a>Relevance scoring</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>To get relevance-ranked results, you must explicitly request scoring with <code class="literal">METADATA _score</code> and sort by the score. Without this, even search functions like <code class="literal">MATCH</code> will only filter documents without ranking them.</p>
<p><span class="strong strong"><strong>Without <code class="literal">METADATA _score</code></strong></span>: All operations are filtering-only, even <code class="literal">MATCH</code>, <code class="literal">QSTR</code>, and <code class="literal">KQL</code> functions. Documents either match or don&#8217;t match - no ranking occurs.</p>
<p><span class="strong strong"><strong>With <code class="literal">METADATA _score</code></strong></span>: <a class="xref" href="esql-functions-operators.html#esql-search-functions" title="ES|QL Full-text search functions">Search functions</a> contribute to relevance scores, while filtering operations (range conditions, exact matches) don&#8217;t affect scoring. You must explicitly use <code class="literal">SORT _score DESC</code> to see the most relevant results first.</p>
<p>This gives you full control over when to use fast filtering versus slower but more powerful relevance-based searching.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="search-functions"></a>Search functions</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>The following functions provide text-based search capabilities in ES|QL with different levels of precision and control.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-match-function-operator"></a><code class="literal">MATCH</code> function and operator</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>ES|QL offers two syntax options for match, which replicate the functionality of <a class="xref" href="query-dsl-match-query.html" title="Match query"><code class="literal">match</code></a> queries in Query DSL.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the compact <a class="xref" href="esql-functions-operators.html#esql-search-operators" title="Search operators">match operator (:)</a> for simple text matching with default parameters.
</li>
<li class="listitem">
Use the <a class="xref" href="esql-functions-operators.html#esql-match" title="MATCH">MATCH function syntax</a> for more control over the query, such as specifying analyzers, fuzziness, and other parameters.
</li>
</ul>
</div>
<p>Refer to the <a class="xref" href="esql-search-tutorial.html" title="Tutorial: Search and filter with ES|QL">tutorial</a> for examples of both syntaxes.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-match-phrase-function"></a><code class="literal">MATCH_PHRASE</code> function</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>Use the <a class="xref" href="esql-functions-operators.html#esql-match_phrase" title="MATCH_PHRASE"><code class="literal">MATCH_PHRASE</code> function</a> to perform a <code class="literal">match_phrase</code> query on the specified field. This is equivalent to using the <a class="xref" href="query-dsl-match-query-phrase.html" title="Match phrase query">match_phrase query</a> in Query DSL.</p>
<p>For exact phrase matching rather than individual word matching, use <code class="literal">MATCH_PHRASE</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-query-string"></a>Query string (<code class="literal">QSTR</code>) function</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>The <a class="xref" href="esql-functions-operators.html#esql-qstr" title="QSTR"><code class="literal">qstr</code> function</a> provides the same functionality as the Query DSL&#8217;s <code class="literal">query_string</code> query. This enables advanced search patterns with wildcards, boolean logic, and multi-field searches.</p>
<p>For complete details, refer to the <a class="xref" href="query-dsl-query-string-query.html" title="Query string query">Query DSL <code class="literal">query_string</code> docs</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-kql"></a><code class="literal">KQL</code> function</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>Use the <a class="xref" href="esql-functions-operators.html#esql-kql" title="KQL">KQL function</a> to use the <a href="/guide/en/kibana/8.19/kuery-query.html" class="ulink" target="_top">Kibana Query Language</a> in your ES|QL queries.</p>
<p>For migrating queries from other Kibana interfaces, the <code class="literal">KQL</code> function preserves existing query syntax and allows gradual migration to ES|QL without rewriting existing Kibana queries.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="advanced-search-capabilities"></a>Advanced search capabilities</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-semantic"></a>Semantic search</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p><a class="xref" href="semantic-search.html" title="Semantic search">Semantic search</a> leverages machine learning models to understand the meaning of text, enabling more accurate and context-aware search results.</p>
<p>In ES|QL, you can perform semantic searches on <a class="xref" href="semantic-text.html" title="Semantic text field type"><code class="literal">semantic_text</code></a> field types using the same match syntax as full-text search.</p>
<p>Refer to <a class="xref" href="semantic-search-semantic-text.html" title="Tutorial: semantic search with semantic_text">semantic search with semantic_text</a> for an example or follow the <a class="xref" href="esql-search-tutorial.html" title="Tutorial: Search and filter with ES|QL">tutorial</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-hybrid"></a>Hybrid search</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<p>Hybrid search combines lexical and semantic search with custom weights to leverage both exact keyword matching and semantic understanding.</p>
<p>Refer to <a class="xref" href="semantic-text-hybrid-search.html" title="Tutorial: hybrid search with semantic_text">hybrid search with semantic_text</a> for an example or follow the <a class="xref" href="esql-search-tutorial.html" title="Tutorial: Search and filter with ES|QL">tutorial</a>.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="esql-for-search-next-steps"></a>Next steps</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-tutorials"></a>Tutorials and how-to guides</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-search-tutorial.html" title="Tutorial: Search and filter with ES|QL"><em>Tutorial: Search and filter with ES|QL</em></a>: Hands-on tutorial for getting started with search tools in ES|QL, with concrete examples of the functionalities described in this page
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-reference"></a>Technical reference</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="esql-functions-operators.html#esql-search-functions" title="ES|QL Full-text search functions">Full-text Search functions</a>: Complete reference for all search functions
</li>
<li class="listitem">
<a class="xref" href="esql-limitations.html#esql-limitations-full-text-search" title="Full-text search">Limitations</a>: Current limitations for search functions in ES|QL
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="esql-for-search-blogs"></a>Related blog posts</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/esql/esql-for-search.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/search-labs/blog/esql-introducing-scoring-semantic-search" class="ulink" target="_top">ES|QL, you know for Search</a>: Introducing scoring and semantic search
</li>
<li class="listitem">
<a href="/search-labs/blog/filtering-in-esql-full-text-search-match-qstr" class="ulink" target="_top">Introducing full text filtering in ES|QL</a>: Overview of text filtering capabilities
</li>
</ul>
</div>
</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="esql-rest.html">« ES|QL REST API</a>
</span>
<span class="next">
<a href="esql-kibana.html">Using ES|QL in Kibana »</a>
</span>
</div>
</body>
</html>
