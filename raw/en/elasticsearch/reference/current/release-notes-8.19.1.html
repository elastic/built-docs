<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Elasticsearch version 8.19.1 | Elasticsearch Guide [8.19] | Elastic</title>
<meta class="elastic" name="content" content="Elasticsearch version 8.19.1 | Elasticsearch Guide [8.19]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.19]"/>
<link rel="up" href="es-release-notes.html" title="Release notes"/>
<link rel="prev" href="es-release-notes.html" title="Release notes"/>
<link rel="next" href="release-notes-8.19.0.html" title="Elasticsearch version 8.19.0"/>
<meta class="elastic" name="product_version" content="8.19"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.19"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.19"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="es-release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-8.19.0.html">Elasticsearch version 8.19.0 »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.19]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="es-release-notes.html">Release notes</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Elasticsearch version 8.19.1</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.1.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="release-notes-8.19.1"></a>Elasticsearch version 8.19.1</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.1.asciidoc">edit</a></div>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Coming in 8.19.1.</p>
</div>
</div>
<p>Also see <a class="xref" href="migrating-8.19.html#breaking-changes-8.19" title="Breaking changes">Breaking changes in 8.19</a>.</p>
<div class="position-relative"><h3><a id="bug-8.19.1"></a>Bug fixes</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.1.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Data streams
</span>
</dt>
<dd>
<details>
<summary class="title">Disables auto-sharding for LOOKUP index mode</summary>
<div class="content">
<p>Auto-sharding for data streams caused unsupported replica scaling when the index mode was set to <code class="literal">LOOKUP</code>.
This happened because lookup mappers do not support scaling beyond one replica.
<a href="https://github.com/elastic/elasticsearch/pull/131429" class="ulink" target="_top">#131429</a> resolves this issue by disabling auto-sharding for data streams with <code class="literal">LOOKUP</code> index mode, avoiding unsupported replica settings.</p>
</div>
</details>
</dd>
<dt>
<span class="term">
EQL
</span>
</dt>
<dd>
<details>
<summary class="title">Resolves EQL parsing failure for IP-mapped fields in <code class="literal">OR</code> expressions</summary>
<div class="content">
<p>Parsing EQL queries failed when comparing the same IP-mapped field to multiple values joined by an <code class="literal">OR</code> expression.
This occurred because lookup operators were internally rewritten into <code class="literal">IN</code> expressions, which are unsupported for IP-type fields.
<a href="https://github.com/elastic/elasticsearch/pull/132167" class="ulink" target="_top">#132167</a> resolves the issue and ensures EQL can now successfully parse and execute such or queries involving IP fields. (issue: <a href="https://github.com/elastic/elasticsearch/issues/118621" class="ulink" target="_top">#118621</a>)</p>
</div>
</details>
</dd>
<dt>
<span class="term">
ES|QL
</span>
</dt>
<dd>
<details>
<summary class="title">Fixes inconsistent equality and hashcode behavior for <code class="literal">ConstantNullBlock</code></summary>
<div class="content">
<p>Inconsistent equality checks caused <code class="literal">constantNullBlock.equals(anyDoubleBlock)</code> to return false, even when <code class="literal">doubleBlock.equals(constantNullBlock)</code> returned true.
This asymmetry led to unreliable comparisons and mismatched hashcodes when <code class="literal">ConstantNullBlock</code> was functionally equivalent to other standard blocks.
<a href="https://github.com/elastic/elasticsearch/pull/131817" class="ulink" target="_top">#131817</a> resolves the issue and ensures both equality and hashcode functions are symmetric for these block types.</p>
</div>
</details>
<details>
<summary class="title">Fixes <code class="literal">ConcurrentModificationException</code> caused by live operator list</summary>
<div class="content">
<p>A <code class="literal">ConcurrentModificationException</code> caused test failures in <code class="literal">CrossClusterAsyncEnrichStopIT.testEnrichAfterStop</code> under certain conditions.
This happened because the ES|QL driver added a live operator list to the <code class="literal">DriverStatus</code> object, which could be modified while the status was being serialized.
<a href="https://github.com/elastic/elasticsearch/pull/132260" class="ulink" target="_top">#132260</a> fixes the issue by copying the operator list before storing it, preventing concurrent changes during status reads.
(issue: <a href="https://github.com/elastic/elasticsearch/issues/131564" class="ulink" target="_top">#131564</a>)</p>
</div>
</details>
<details>
<summary class="title">Prevents null pointer exception for <code class="literal">to_lower</code> and <code class="literal">to_upper</code> with no parameters</summary>
<div class="content">
<p>Calling the <code class="literal">to_lower</code> or <code class="literal">to_upper</code> functions with no parameters caused a null pointer exception (NPE), instead of returning a clear error.
This behavior was a result of an older implementation of these functions.
<a href="https://github.com/elastic/elasticsearch/pull/131917" class="ulink" target="_top">#131917</a> resolves the issue and ensures that empty parameter calls now return the correct error message. (issue: <a href="https://github.com/elastic/elasticsearch/issues/131913" class="ulink" target="_top">#131913</a>)</p>
</div>
</details>
<details>
<summary class="title">Fixes <code class="literal">aggregate_metric_double</code> decoding and <code class="literal">mv_expand</code> behavior on multi-index queries</summary>
<div class="content">
<p>Sorting across multiple indices failed when one index contained an <code class="literal">aggregate_metric_double</code> field and another did not.
In this case, the missing field was encoded as <code class="literal">NullBlock</code> but later incorrectly decoded as <code class="literal">AggregateMetricDoubleBlock</code>, which expects four values. This mismatch caused decoding errors.
<a href="https://github.com/elastic/elasticsearch/pull/131658" class="ulink" target="_top">#131658</a> resolves the issue and also improves <code class="literal">mv_expand</code> by returning the input block unchanged for unsupported <code class="literal">AggregateMetricDoubleBlock</code> values, avoiding unnecessary errors.</p>
</div>
</details>
<details>
<summary class="title">Fixes incorrect <code class="literal">ingest_took</code> value when combining bulk responses</summary>
<div class="content">
<p>Combining two <code class="literal">BulkResponse</code> objects with <code class="literal">ingest_took</code> set to <code class="literal">NO_INGEST_TOOK</code> resulted in a combined <code class="literal">ingest_took</code> value of <code class="literal">-2</code>, which was invalid.
This occurred because the combination logic failed to preserve the sentinel <code class="literal">NO_INGEST_TOOK</code> constant.
<a href="https://github.com/elastic/elasticsearch/pull/132088" class="ulink" target="_top">#132088</a> resolves the issue and ensures the result is correctly set to <code class="literal">NO_INGEST_TOOK</code> when applicable.</p>
</div>
</details>
<details>
<summary class="title">Adds support for splitting large pages on load to avoid memory pressure</summary>
<div class="content">
<p>Loading large rows from a single segment occasionally created oversized pages when decoding values row-by-row, particularly for text and geo fields.
This could cause memory pressure or degraded performance.
<a href="https://github.com/elastic/elasticsearch/pull/131053" class="ulink" target="_top">#131053</a> resolves the issue by estimating the size of each page as rows are loaded.
If the estimated size exceeds a configurable <code class="literal">jumbo</code> threshold (defaulting to one megabyte), row loading stops early, the page is returned, and remaining rows are processed in subsequent iterations.
This prevents loading incomplete or oversized pages during data aggregation.</p>
</div>
</details>
</dd>
<dt>
<span class="term">
Infra/Core
</span>
</dt>
<dd>
<details>
<summary class="title">Grants server module read/write permissions for deprecated <code class="literal">path.shared_data</code> setting</summary>
<div class="content">
<p>Grants the server module read/write access to the deprecated <code class="literal">path.shared_data</code> setting.
<a href="https://github.com/elastic/elasticsearch/pull/131680" class="ulink" target="_top">#131680</a> resolves issues surfaced in internal testing and ensures compatibility with legacy configurations.</p>
</div>
</details>
</dd>
<dt>
<span class="term">
Ingest Node
</span>
</dt>
<dd>
<details>
<summary class="title">Fixes incorrect mapping resolution in simulate ingest API when <code class="literal">mapping_addition</code> is provided</summary>
<div class="content">
<p>When using the simulate ingest API with a <code class="literal">mapping_addition</code>, the system incorrectly ignored the existing mapping of the target index and instead applied the mapping from a matching index template, if one existed.
This caused mismatches between the index and simulation behavior.
<a href="https://github.com/elastic/elasticsearch/pull/132101" class="ulink" target="_top">#132101</a> resolves the issue and ensures that the index’s actual mapping is used when available, preserving consistency between simulation and execution.</p>
</div>
</details>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<details>
<summary class="title">Prevents double-counting of allocations in trained model deployment memory estimation</summary>
<div class="content">
<p>A recent refactor introduced a bug that caused the trained model memory estimation to double-count the number of allocations, leading to inflated memory usage projections.
<a href="https://github.com/elastic/elasticsearch/pull/131990" class="ulink" target="_top">#131990</a> resolves the issue by reverting the change and restoring accurate memory estimation for trained model deployments.</p>
</div>
</details>
</dd>
<dt>
<span class="term">
Mapping
</span>
</dt>
<dd>
<details>
<summary class="title">Fixes decoding failure for non-ASCII field names in <code class="literal">_ignored_source</code></summary>
<div class="content">
<p>A decoding error occurred when field names in <code class="literal">_ignored_source</code> contained non-ASCII characters.
This happened because <code class="literal">String.length()</code> was used to calculate the byte length of the field name, which only works correctly for ASCII characters.
<a href="https://github.com/elastic/elasticsearch/pull/132018" class="ulink" target="_top">#132018</a> resolves the issue by using the actual byte array length of the encoded field name, ensuring proper decoding regardless of character encoding.</p>
</div>
</details>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<details>
<summary class="title">Fixes index sort compatibility for <code class="literal">date_nanos</code> fields in indices created before 7.14</summary>
<div class="content">
<p>Indices created prior to version 7.14 that used an index sort on a <code class="literal">date_nanos</code> field could not be opened in more recent versions due to a mismatch in the default <code class="literal">index.sort.missing</code> value.
A change in version 7.14 modified the default from <code class="literal">Long.MIN_VALUE</code> to <code class="literal">0L</code>, which caused newer versions to reject those older indices.
<a href="https://github.com/elastic/elasticsearch/pull/132162" class="ulink" target="_top">#132162</a> resolves the issue by restoring the expected default value for indices created before 7.14, allowing them to open successfully in newer versions. (issue: <a href="https://github.com/elastic/elasticsearch/issues/132040" class="ulink" target="_top">#132040</a>)</p>
</div>
</details>
<details>
<summary class="title">Fix missing removal of query cancellation callback in QueryPhase</summary>
<div class="content">
<p>The timeout cancellation callback registered in <code class="literal">QueryPhase</code> via <code class="literal">addQueryCancellation</code> was not removed after the query phase completed.
This caused unintended timeouts or cancellations during subsequent phases under specific conditions (such as large datasets, low timeouts, and partial search results enabled).
<a href="https://github.com/elastic/elasticsearch/pull/130279" class="ulink" target="_top">#130279</a> resolves the issue and ensures predictable behavior by reintroducing the cleanup logic. (issue: <a href="https://github.com/elastic/elasticsearch/issues/130071" class="ulink" target="_top">#130071</a>)</p>
</div>
</details>
</dd>
</dl>
</div>
<div class="position-relative"><h3><a id="enhancement-8.19.1"></a>Enhancements</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.1.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Engine
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Available disk space is now recorded when merge tasks are scheduled, helping to diagnose issues caused by running merges despite low disk space on nodes. This information appears in heap dumps and can inform adjustments to <code class="literal">indices.merge.disk.watermark.high</code> or inspire future enhancements such as aborting already running merges. <a href="https://github.com/elastic/elasticsearch/pull/131711" class="ulink" target="_top">#131711</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="es-release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-8.19.0.html">Elasticsearch version 8.19.0 »</a>
</span>
</div>
</body>
</html>
