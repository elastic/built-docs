<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Elasticsearch version 8.19.2 | Elasticsearch Guide [8.19] | Elastic</title>
<meta class="elastic" name="content" content="Elasticsearch version 8.19.2 | Elasticsearch Guide [8.19]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.19]"/>
<link rel="up" href="es-release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes-8.19.3.html" title="Elasticsearch version 8.19.3"/>
<link rel="next" href="release-notes-8.19.1.html" title="Elasticsearch version 8.19.1"/>
<meta class="elastic" name="product_version" content="8.19"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.19"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.19"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="release-notes-8.19.3.html">« Elasticsearch version 8.19.3</a>
</span>
<span class="next">
<a href="release-notes-8.19.1.html">Elasticsearch version 8.19.1 »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.19]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="es-release-notes.html">Release notes</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Elasticsearch version 8.19.2</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.2.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="release-notes-8.19.2"></a>Elasticsearch version 8.19.2</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.2.asciidoc">edit</a></div>
</div></div></div>
<p>Also see <a class="xref" href="migrating-8.19.html#breaking-changes-8.19" title="Breaking changes">Breaking changes in 8.19</a>.</p>
<div class="position-relative"><h3><a id="bug-8.19.2"></a>Bug fixes</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.2.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<details>
<summary class="title">Validate parent aggregation type in <code class="literal">bucket_script</code></summary>
<div class="content">
<p>The <code class="literal">bucket_script</code> pipeline aggregation didn’t validate that its parent aggregation was a multi-bucket aggregation.
This caused a <code class="literal">ClassCastException</code> at runtime when the parent was not multi-bucket.
<a href="https://github.com/elastic/elasticsearch/pull/132320" class="ulink" target="_top">#132320</a> adds a validation step so the aggregation fails early, preventing the runtime error. (issue: <a href="https://github.com/elastic/elasticsearch/issues/132272" class="ulink" target="_top">#132272</a>)</p>
</div>
</details>
</dd>
<dt>
<span class="term">
Codec
</span>
</dt>
<dd>
<details>
<summary class="title">Use local segment <code class="literal">fieldInfos</code> for TSDB merge stats</summary>
<div class="content">
<p>Merging shrink TSDB or LogsDB indices in versions 8.19 or 9.1+ could fail when using addIndexes to combine Lucene segments directly.
In these cases, fieldInfos could differ between shards and the merged segment, causing incorrect merge statistics.
PR <a href="https://github.com/elastic/elasticsearch/pull/132597" class="ulink" target="_top">#132597</a> updates the process to use <code class="literal">fieldInfos</code> from each segment instead of the merged segment, ensuring accurate stats and preventing merge failures.</p>
</div>
</details>
<details>
<summary class="title">Remove unused <code class="literal">tsdb_doc_values_optimized_merge</code> feature flag in 8.19</summary>
<div class="content">
<p>In 8.19, the <code class="literal">tsdb_doc_values_optimized_merge</code> optimization was unintentionally disabled because its feature flag was not removed as planned.
This happened when the original change failed to merge due to CI issues.
<a href="https://github.com/elastic/elasticsearch/pull/128459" class="ulink" target="_top">#128459</a> removes the leftover flag, enabling the optimization as intended.</p>
</div>
</details>
</dd>
<dt>
<span class="term">
Mapping
</span>
</dt>
<dd>
<details>
<summary class="title">Calculate text string length correctly for code points outside BMP</summary>
<div class="content">
<p>Strings parsed with the optimized UTF-8 parsing path had incorrect length calculations for characters outside the basic multilingual plane (BMP).
These characters require two UTF-16 code units, but the optimized path did not account for this, causing mismatches with the non-optimized path.
<a href="https://github.com/elastic/elasticsearch/pull/132593" class="ulink" target="_top">#132593</a> fixes the calculation to ensure consistent and correct string lengths.</p>
</div>
</details>
</dd>
</dl>
</div>
<div class="position-relative"><h3><a id="enhancement-8.19.2"></a>Enhancements</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.19/docs/reference/release-notes/8.19.2.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Authorization
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Adds <code class="literal">manage</code>, <code class="literal">create_index</code>, <code class="literal">read</code>, <code class="literal">index</code>, <code class="literal">write</code>, and <code class="literal">delete</code> privileges for the <code class="literal">kibana_system</code> role on third-party agent indices used by ExtraHop (logs-extrahop.investigation-<span class="strong strong"><strong>) and Qualys GAV (logs-qualys_gav.asset-</strong></span>). This ensures ILM policies can delete these indices without permission errors. <a href="https://github.com/elastic/elasticsearch/pull/132387" class="ulink" target="_top">#132387</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/131825" class="ulink" target="_top">#131825</a>)
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="release-notes-8.19.3.html">« Elasticsearch version 8.19.3</a>
</span>
<span class="next">
<a href="release-notes-8.19.1.html">Elasticsearch version 8.19.1 »</a>
</span>
</div>
</body>
</html>
