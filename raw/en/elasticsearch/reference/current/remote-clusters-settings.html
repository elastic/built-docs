<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Remote cluster settings | Elasticsearch Guide [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Remote cluster settings | Elasticsearch Guide [8.15]">

<link rel="home" href="index.html" title="Elasticsearch Guide [8.15]"/>
<link rel="up" href="remote-clusters.html" title="Remote clusters"/>
<link rel="prev" href="remote-clusters-migrate.html" title="Migrate remote clusters from certificate to API key authentication"/>
<link rel="next" href="remote-clusters-troubleshooting.html" title="Troubleshooting remote clusters"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/8.15"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="remote-clusters-migrate.html">« Migrate remote clusters from certificate to API key authentication</a>
</span>
<span class="next">
<a href="remote-clusters-troubleshooting.html">Troubleshooting remote clusters »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="remote-clusters.html">Remote clusters</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Remote cluster settings</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/cluster/remote-clusters-settings.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="remote-clusters-settings"></a>Remote cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/cluster/remote-clusters-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>The following settings apply to both <a class="xref" href="remote-clusters.html#sniff-mode">sniff mode</a> and
<a class="xref" href="remote-clusters.html#proxy-mode">proxy mode</a>. Settings that are specific to sniff mode and proxy
mode are described separately.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.mode</code>
</span>
</dt>
<dd>
The mode used for a remote cluster connection. The only supported modes are
<code class="literal">sniff</code> and <code class="literal">proxy</code>. The default is <code class="literal">sniff</code>. See <a class="xref" href="remote-clusters.html#sniff-proxy-modes" title="Connection modes">Connection modes</a> for
further information about these modes, and <a class="xref" href="remote-clusters-settings.html#remote-cluster-sniff-settings" title="Sniff mode remote cluster settings">Sniff mode remote cluster settings</a>
and <a class="xref" href="remote-clusters-settings.html#remote-cluster-proxy-settings" title="Proxy mode remote cluster settings">Proxy mode remote cluster settings</a> for further information about their
settings.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.initial_connect_timeout</code>
</span>
</dt>
<dd>
The time to wait for remote connections to be established when the node
starts. The default is <code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">remote_cluster_client</code> <a class="xref" href="modules-node.html#node-roles" title="Node roles">role</a>
</span>
</dt>
<dd>
By default, any node in the cluster can act as a cross-cluster client and
connect to remote clusters. To prevent a node from connecting to remote
clusters, specify the <a class="xref" href="modules-node.html#node-roles" title="Node roles">node.roles</a> setting in <code class="literal">elasticsearch.yml</code>
and exclude <code class="literal">remote_cluster_client</code> from the listed roles. Search requests
targeting remote clusters must be sent to a node that is allowed to act as a
cross-cluster client. Other features such as machine learning <a class="xref" href="ml-settings.html#general-ml-settings" title="General machine learning settings">data
feeds</a>, <a class="xref" href="transform-settings.html#general-transform-settings" title="General transforms settings">transforms</a>, and
<a class="xref" href="ccr-getting-started-tutorial.html" title="Tutorial: Set up cross-cluster replication">cross-cluster replication</a> require the <code class="literal">remote_cluster_client</code> role.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.skip_unavailable</code>
</span>
</dt>
<dd>
Per cluster boolean setting that allows to skip specific clusters when no
nodes belonging to them are available and they are the target of a remote
cluster request.
</dd>
</dl>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>In Elasticsearch 8.15, the default value for <code class="literal">skip_unavailable</code> was
changed from <code class="literal">false</code> to <code class="literal">true</code>. Before Elasticsearch 8.15, if you want a cluster
to be treated as optional for a cross-cluster search, then you need to set that configuration.
From Elasticsearch 8.15 forward, you need to set the configuration in order to
make a cluster required for the cross-cluster search. Once you upgrade the local ("querying")
cluster search coordinator node (the node you send CCS requests to) to 8.15 or later,
any remote clusters that do not have an explicit setting for <code class="literal">skip_unavailable</code> will
immediately change over to using the new default of true. This is true regardless of
whether you have upgraded the remote clusters to 8.15, as the <code class="literal">skip_unavailable</code>
search behavior is entirely determined by the setting on the local cluster where
you configure the remotes.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.ping_schedule</code>
</span>
</dt>
<dd>
Sets the time interval between regular application-level ping messages that
are sent to try and keep remote cluster connections alive. If set to <code class="literal">-1</code>,
application-level ping messages to this remote cluster are not sent. If
unset, application-level ping messages are sent according to the global
<code class="literal">transport.ping_schedule</code> setting, which defaults to <code class="literal">-1</code> meaning that pings
are not sent. It is preferable to correctly configure TCP keep-alives instead
of configuring a <code class="literal">ping_schedule</code>, because TCP keep-alives are handled by the
operating system and not by Elasticsearch. By default Elasticsearch enables TCP keep-alives on
remote cluster connections. Remote cluster connections are transport
connections so the <code class="literal">transport.tcp.*</code> <a class="xref" href="modules-network.html#transport-settings" title="Advanced transport settings">advanced settings</a>
regarding TCP keep-alives apply to them.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compress</code>
</span>
</dt>
<dd>
Per-cluster setting that enables you to configure compression for requests to
a specific remote cluster. The handling cluster will automatically compress
responses to compressed requests. The setting options are <code class="literal">true</code>,
<code class="literal">indexing_data</code>, and <code class="literal">false</code>. If unset, defaults to the behaviour specified
by the node-wide <code class="literal">transport.compress</code> setting. See the
<a class="xref" href="modules-network.html#transport-settings-compress">documentation for the <code class="literal">transport.compress</code>
setting</a> for further information.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compression_scheme</code>
</span>
</dt>
<dd>
Per-cluster setting that enables you to configure the compression scheme for
requests to a specific cluster if those requests are selected to be
compressed by to the <code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compress</code>
setting. The handling cluster will automatically use the same compression
scheme for responses as for the corresponding requests. The setting options
are <code class="literal">deflate</code> and <code class="literal">lz4</code>. If unset, defaults to the behaviour specified by the
node-wide <code class="literal">transport.compression_scheme</code> setting. See the
<a class="xref" href="modules-network.html#transport-settings-compression-scheme">documentation for the
<code class="literal">transport.compression_scheme</code> setting</a> for further information.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="remote-cluster-credentials-setting"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.credentials</code>
</span>
</dt>
<dd>
(<a class="xref" href="secure-settings.html" title="Secure settings">Secure</a>, <a class="xref" href="secure-settings.html#reloadable-secure-settings" title="Reloadable secure settings">Reloadable</a>)
Per-cluster setting for configuring <a class="xref" href="remote-clusters-api-key.html" title="Add remote clusters using API key authentication">remote clusters
with the API Key based model</a>. This setting takes the encoded value of a
<a class="xref" href="security-api-create-cross-cluster-api-key.html" title="Create Cross-Cluster API key API">cross-cluster API key</a> and must
be set in the <a class="xref" href="secure-settings.html" title="Secure settings">Elasticsearch keystore</a> on each node in the cluster.
The presence (or not) of this setting determines which model a remote cluster
uses. If present, the remote cluster uses the API key based model. Otherwise,
it uses the certificate based model. If the setting is added, removed, or
updated in the <a class="xref" href="secure-settings.html" title="Secure settings">Elasticsearch keystore</a> and reloaded via the
<a class="xref" href="cluster-nodes-reload-secure-settings.html" title="Nodes reload secure settings API">Nodes reload secure settings</a> API, the cluster will automatically
rebuild its connection to the remote.
</dd>
</dl>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-cluster-sniff-settings"></a>Sniff mode remote cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/cluster/remote-clusters-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>To use <a class="xref" href="remote-clusters.html#sniff-mode">sniff mode</a> to connect to a remote cluster, set
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.mode: sniff</code> and then configure the following
settings. You may also leave <code class="literal">cluster.remote.&lt;cluster_alias&gt;.mode</code> unset since
<code class="literal">sniff</code> is the default mode.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.seeds</code>
</span>
</dt>
<dd>
The list of seed nodes used to sniff the remote cluster state.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.node_connections</code>
</span>
</dt>
<dd>
The number of gateway nodes to connect to for this remote cluster. The default
is <code class="literal">3</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<a id="cluster-remote-node-attr"></a>
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.node.attr</code>
</span>
</dt>
<dd>
A node attribute to filter out nodes that are eligible as a gateway node in
the remote cluster. For instance a node can have a node attribute
<code class="literal">node.attr.gateway: true</code> such that only nodes with this attribute will be
connected to if <code class="literal">cluster.remote.node.attr</code> is set to <code class="literal">gateway</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-cluster-proxy-settings"></a>Proxy mode remote cluster settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/8.15/docs/reference/modules/cluster/remote-clusters-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>To use <a class="xref" href="remote-clusters.html#proxy-mode">proxy mode</a> to connect to a remote cluster, set
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.mode: proxy</code> and then configure the following
settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.proxy_address</code>
</span>
</dt>
<dd>
The address used for all remote connections.
</dd>
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.proxy_socket_connections</code>
</span>
</dt>
<dd>
The number of socket connections to open per remote cluster. The default is
<code class="literal">18</code>.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.server_name</code>
</span>
</dt>
<dd>
An optional hostname string which is sent in the <code class="literal">server_name</code> field of
the TLS Server Name Indication extension if
<a class="xref" href="security-basic-setup.html#encrypt-internode-communication" title="Encrypt internode communications with TLS">TLS is enabled</a>. The TLS transport will fail to open
remote connections if this field is not a valid hostname as defined by the
TLS SNI specification.
</dd>
</dl>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="remote-clusters-migrate.html">« Migrate remote clusters from certificate to API key authentication</a>
</span>
<span class="next">
<a href="remote-clusters-troubleshooting.html">Troubleshooting remote clusters »</a>
</span>
</div>
</body>
</html>
