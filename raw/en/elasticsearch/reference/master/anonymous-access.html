<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Enabling anonymous access | Elasticsearch Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="up" href="setting-up-authentication.html" title="User authentication"/>
<link rel="prev" href="custom-realms.html" title="Integrating with other authentication systems"/>
<link rel="next" href="controlling-user-cache.html" title="Controlling the user cache"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="secure-cluster.html">Secure a cluster</a></span>
»
<span class="breadcrumb-link"><a href="setting-up-authentication.html">User authentication</a></span>
»
<span class="breadcrumb-node">Enabling anonymous access</span>
</div>
<div class="navheader">
<span class="prev">
<a href="custom-realms.html">« Integrating with other authentication systems</a>
</span>
<span class="next">
<a href="controlling-user-cache.html">Controlling the user cache »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="anonymous-access"></a>Enabling anonymous access<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/x-pack/docs/en/security/authentication/anonymous-access.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>Incoming requests are considered to be <em>anonymous</em> if no authentication token
can be extracted from the incoming request. By default, anonymous requests are rejected and an authentication error is returned (status code <code class="literal">401</code>).</p>
<p>To enable anonymous access, you assign one or more roles to anonymous
users in the <code class="literal">elasticsearch.yml</code> configuration file. For example, the following
configuration assigns anonymous users <code class="literal">role1</code> and <code class="literal">role2</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc:
  anonymous:
    username: anonymous_user <a id="CO515-1"></a><i class="conum" data-value="1"></i>
    roles: role1, role2 <a id="CO515-2"></a><i class="conum" data-value="2"></i>
    authz_exception: true <a id="CO515-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO515-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The username/principal of the anonymous user. Defaults to
<code class="literal">_es_anonymous_user</code> if not specified.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO515-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The roles to associate with the anonymous user. If no roles are specified, anonymous access is disabled&#8212;&#8203;anonymous requests will be rejected and return an authentication error.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO515-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>When <code class="literal">true</code>, a 403 HTTP status code is returned if the anonymous user
does not have the permissions needed to perform the requested action and the
user will NOT be prompted to provide credentials to access the requested
resource. When <code class="literal">false</code>, a 401 HTTP status code is returned if the anonymous user
does not have the necessary permissions and the user is prompted for
credentials to access the requested resource. If you are using anonymous access
in combination with HTTP, you might need to set <code class="literal">authz_exception</code> to <code class="literal">false</code>
if your client does not support preemptive basic authentication. Defaults to
<code class="literal">true</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="custom-realms.html">« Integrating with other authentication systems</a>
</span>
<span class="next">
<a href="controlling-user-cache.html">Controlling the user cache »</a>
</span>
</div>
</div>
</body>
</html>
