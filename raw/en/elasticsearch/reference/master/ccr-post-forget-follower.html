<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Forget follower API | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Forget follower API | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="ccr-apis.html" title="Cross-cluster replication APIs"/>
<link rel="prev" href="ccr-post-unfollow.html" title="Unfollow API"/>
<link rel="next" href="ccr-get-follow-stats.html" title="Get follower stats API"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="ccr-post-unfollow.html">« Unfollow API</a>
</span>
<span class="next">
<a href="ccr-get-follow-stats.html">Get follower stats API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ccr-apis.html">Cross-cluster replication APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Forget follower API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ccr-post-forget-follower"></a>Forget follower API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h2>
</div></div></div>

<p>Removes the follower retention leases from the leader.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ccr-post-forget-follower-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.ccr.forgetFollower({
  index: "&lt;leader_index&gt;",
  follower_cluster: "&lt;follower_cluster&gt;",
  follower_index: "&lt;follower_index&gt;",
  follower_index_uuid: "&lt;follower_index_uuid&gt;",
  leader_remote_cluster: "&lt;leader_remote_cluster&gt;",
});
console.log(response);</pre>
</div>
<a id="f4fdfe52ecba65eec6beb30d8deb8bbf"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">POST /&lt;leader_index&gt;/_ccr/forget_follower
{
  "follower_cluster" : "&lt;follower_cluster&gt;",
  "follower_index" : "&lt;follower_index&gt;",
  "follower_index_uuid" : "&lt;follower_index_uuid&gt;",
  "leader_remote_cluster" : "&lt;leader_remote_cluster&gt;"
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/2434.console"></div>
<a id="8e4318a6e2029efb28ad4cf97bbb5b95"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0,
    "failures" : [ ]
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ccr-post-forget-follower-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have <code class="literal">manage_leader_index</code>
index privileges for the leader index. For more information, see
<a class="xref" href="security-privileges.html" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ccr-post-forget-follower-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h3>
</div></div></div>
<p>A following index takes out retention leases on its leader index. These
retention leases are used to increase the likelihood that the shards of the
leader index retain the history of operations that the shards of the following
index need to execute replication. When a follower index is converted to a
regular index via the <a class="xref" href="ccr-post-unfollow.html" title="Unfollow API">unfollow API</a> (either via explicit
execution of this API, or implicitly via index lifecycle management), these retention leases are
removed. However, removing these retention leases can fail (e.g., if the remote
cluster containing the leader index is unavailable). While these retention
leases will eventually expire on their own, their extended existence can cause
the leader index to hold more history than necessary, and prevent index lifecycle management from
performing some operations on the leader index. This API exists to enable
manually removing these retention leases when the unfollow API was unable to do
so.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API does not stop replication by a following index. If you use this
API targeting a follower index that is still actively following, the following
index will add back retention leases on the leader. The only purpose of this API
is to handle the case of failure to remove the following retention leases after
the <a class="xref" href="ccr-post-unfollow.html" title="Unfollow API">unfollow API</a> is invoked.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ccr-post-forget-follower-path-parms"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;leader_index&gt;</code>
</span>
</dt>
<dd>
(Required, string) The name of the leader index.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ccr-post-forget-follower-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">timeout</code>
</span>
</dt>
<dd>
(Optional, time) Controls the amount of time to wait for results. Defaults to unlimited.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ccr-post-forget-follower-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">follower_cluster</code>
</span>
</dt>
<dd>
(Required, string) The name of the cluster containing the follower index.
</dd>
<dt>
<span class="term">
<code class="literal">follower_index</code>
</span>
</dt>
<dd>
(Required, string) The name of the follower index.
</dd>
<dt>
<span class="term">
<code class="literal">follower_index_uuid</code>
</span>
</dt>
<dd>
(Required, string) The UUID of the follower index.
</dd>
<dt>
<span class="term">
<code class="literal">leader_remote_cluster</code>
</span>
</dt>
<dd>
(Required, string) The alias (from the perspective of the cluster containing
the follower index) of the <a class="xref" href="remote-clusters.html" title="Remote clusters">remote cluster</a>
containing the leader index.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ccr-post-forget-follower-examples"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc">edit</a></h3>
</div></div></div>
<p>This example removes the follower retention leases for <code class="literal">follower_index</code> from
<code class="literal">leader_index</code>.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.ccr.forget_follower(
  index: 'leader_index',
  body: {
    follower_cluster: 'follower_cluster',
    follower_index: 'follower_index',
    follower_index_uuid: 'vYpnaWPRQB6mNspmoCeYyA',
    leader_remote_cluster: 'leader_cluster'
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.ccr.forgetFollower({
  index: "leader_index",
  follower_cluster: "follower_cluster",
  follower_index: "follower_index",
  follower_index_uuid: "vYpnaWPRQB6mNspmoCeYyA",
  leader_remote_cluster: "leader_cluster",
});
console.log(response);</pre>
</div>
<a id="07c07f6d497b1a3012aa4320f830e09e"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">POST /leader_index/_ccr/forget_follower
{
  "follower_cluster" : "follower_cluster",
  "follower_index" : "follower_index",
  "follower_index_uuid" : "vYpnaWPRQB6mNspmoCeYyA",
  "leader_remote_cluster" : "leader_cluster"
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/2435.console"></div>
<p>The API returns the following result:</p>
<a id="8e4318a6e2029efb28ad4cf97bbb5b95"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0,
    "failures" : [ ]
  }
}</pre>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ccr-post-unfollow.html">« Unfollow API</a>
</span>
<span class="next">
<a href="ccr-get-follow-stats.html">Get follower stats API »</a>
</span>
</div>
</body>
</html>
