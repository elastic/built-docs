<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Clear trained model deployment cache API | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Clear trained model deployment cache API | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="ml-df-trained-models-apis.html" title="Machine learning trained model APIs"/>
<link rel="prev" href="ml-df-trained-models-apis.html" title="Machine learning trained model APIs"/>
<link rel="next" href="put-trained-models-aliases.html" title="Create or update trained model aliases API"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="ml-df-trained-models-apis.html">« Machine learning trained model APIs</a>
</span>
<span class="next">
<a href="put-trained-models-aliases.html">Create or update trained model aliases API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-df-trained-models-apis.html">Machine learning trained model APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Clear trained model deployment cache API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ml/trained-models/apis/clear-trained-model-deployment-cache.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="clear-trained-model-deployment-cache"></a>Clear trained model deployment cache API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ml/trained-models/apis/clear-trained-model-deployment-cache.asciidoc">edit</a></h2>
</div></div></div>

<p>Clears the inference cache on all nodes where the deployment is assigned.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-trained-model-deployment-cache-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ml/trained-models/apis/clear-trained-model-deployment-cache.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST _ml/trained_models/&lt;deployment_id&gt;/deployment/cache/_clear</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-trained-model-deployment-cache-prereq"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ml/trained-models/apis/clear-trained-model-deployment-cache.asciidoc">edit</a></h3>
</div></div></div>
<p>Requires the <code class="literal">manage_ml</code> cluster privilege. This privilege is included in the
<code class="literal">machine_learning_admin</code> built-in role.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-trained-model-deployment-cache-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ml/trained-models/apis/clear-trained-model-deployment-cache.asciidoc">edit</a></h3>
</div></div></div>
<p>A trained model deployment may have an inference cache enabled. As requests are
handled by each allocated node, their responses may be cached on that individual
node. Calling this API clears the caches without restarting the deployment.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-trained-model-deployment-cache-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ml/trained-models/apis/clear-trained-model-deployment-cache.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">deployment_id</code>
</span>
</dt>
<dd>
(Required, string)
A unique identifier for the deployment of the model.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="clear-trained-model-deployment-cache-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/ml/trained-models/apis/clear-trained-model-deployment-cache.asciidoc">edit</a></h3>
</div></div></div>
<p>The following example clears the cache for the new deployment for the
<code class="literal">elastic__distilbert-base-uncased-finetuned-conll03-english</code> trained model:</p>
<div class="pre_wrapper lang-python alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-python alternative">resp = client.ml.clear_trained_model_deployment_cache(
    model_id="elastic__distilbert-base-uncased-finetuned-conll03-english",
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.ml.clear_trained_model_deployment_cache(
  model_id: 'elastic__distilbert-base-uncased-finetuned-conll03-english'
)
puts response</pre>
</div>
<a id="7e4cb3de3e3c75646b60f9f81ddc59cc"></a>
<div class="pre_wrapper lang-console default has-python has-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-python has-ruby">POST _ml/trained_models/elastic__distilbert-base-uncased-finetuned-conll03-english/deployment/cache/_clear</pre>
</div>
<div class="console_widget has-python has-ruby" data-snippet="snippets/2972.console"></div>
<p>The API returns the following results:</p>
<a id="b29fb7982a289c9a23d34cba02cf123c"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
   "cleared": true
}</pre>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ml-df-trained-models-apis.html">« Machine learning trained model APIs</a>
</span>
<span class="next">
<a href="put-trained-models-aliases.html">Create or update trained model aliases API »</a>
</span>
</div>
</body>
</html>
