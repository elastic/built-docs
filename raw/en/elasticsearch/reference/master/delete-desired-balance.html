<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Reset desired balance API | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Reset desired balance API | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="cluster.html" title="Cluster APIs"/>
<link rel="prev" href="get-desired-balance.html" title="Get desired balance API"/>
<link rel="next" href="ccr-apis.html" title="Cross-cluster replication APIs"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="get-desired-balance.html">« Get desired balance API</a>
</span>
<span class="next">
<a href="ccr-apis.html">Cross-cluster replication APIs »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Reset desired balance API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/cluster/delete-desired-balance.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="delete-desired-balance"></a>Reset desired balance API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/cluster/delete-desired-balance.asciidoc">edit</a></h2>
</div></div></div>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This feature is designed for indirect use by <a href="/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elasticsearch Service</a>, <a href="/guide/en/cloud-enterprise/current" class="ulink" target="_top">Elastic Cloud Enterprise</a>, and <a href="/guide/en/cloud-on-k8s/current" class="ulink" target="_top">Elastic Cloud on Kubernetes</a>. Direct use is not supported.</p>
</div>
</div>
<p>Discards the current desired balance and computes a new desired balance starting from the current allocation of shards.
This can sometimes help Elasticsearch find a desired balance which needs fewer shard movements to achieve, especially if the
cluster has experienced changes so substantial that the current desired balance is no longer optimal without Elasticsearch having
detected that the current desired balance will take more shard movements to achieve than needed. However, this API
imposes a heavy load on the elected master node and may not always have the expected effect. Calling this API should
never be necessary. Consider instead <a class="xref" href="modules-cluster.html#shards-rebalancing-heuristics" title="Shard balancing heuristics settings">increasing the value of
<code class="literal">cluster.routing.allocation.balance.threshold</code></a> to avoid excessive shard movements.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="delete-desired-balance-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/cluster/delete-desired-balance.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.transport.request({
  method: "DELETE",
  path: "/_internal/desired_balance",
});
console.log(response);</pre>
</div>
<a id="b3756e700d0f6c7e8919003bdf26bc8f"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">DELETE /_internal/desired_balance</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/2422.console"></div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="get-desired-balance.html">« Get desired balance API</a>
</span>
<span class="next">
<a href="ccr-apis.html">Cross-cluster replication APIs »</a>
</span>
</div>
</body>
</html>
