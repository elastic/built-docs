<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ES|QL index options | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="ES|QL index options | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="esql-language.html" title="Learning ES|QL"/>
<link rel="prev" href="esql-metadata-fields.html" title="ES|QL metadata fields"/>
<link rel="next" href="esql-multivalued-fields.html" title="ES|QL multivalued fields"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql.html">ES|QL</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="esql-language.html">Learning ES|QL</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="esql-metadata-fields.html">« ES|QL metadata fields</a>
</span>
<span class="next">
<a href="esql-multivalued-fields.html">ES|QL multivalued fields »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="esql-index-options"></a>ES|QL index options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/esql/esql-index-options.asciidoc">edit</a></h2>
</div></div></div>

<p>The <code class="literal">OPTIONS</code> directive of the <a class="xref" href="esql-commands.html#esql-from" title="FROM">FROM</a> command allows configuring
the way ES|QL accesses the data to be queried. The argument passed to this
directive is a comma-separated list of option name-value pairs, with the option
name and the corresponding value double-quoted.</p>
<div class="pre_wrapper lang-esql">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql">FROM index_pattern [OPTIONS "option1"="value1"[,...[,"optionN"="valueN"]]]</pre>
</div>
<p>These options can only be provided as part of a <a class="xref" href="esql-commands.html#esql-from" title="FROM">FROM</a> command,
and they apply to all the indices provided or matched by an index pattern.</p>
<p>The option names and their values are the same as used by the
<a class="xref" href="search-search.html#search-search-api-query-params" title="Query parameters">Search API</a>, however note that the default
values may differ.</p>
<p>The currently supported options are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_no_indices</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean)
If <code class="literal">false</code>, the request returns an error if any wildcard expression,
<a class="xref" href="aliases.html" title="Aliases">index alias</a>, or <code class="literal">_all</code> value targets only missing or closed indices.
This behavior applies even if the request targets other open indices. For
example, a request targeting <code class="literal">foo*,bar*</code> returns an error if an index starts
with <code class="literal">foo</code> but no index starts with <code class="literal">bar</code>.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ignore_unavailable</code>
</span>
</dt>
<dd>
<p>
(Optional, Boolean) If <code class="literal">false</code>, the request returns an error if it targets a
missing or closed index.
</p>
<p>Defaults to <code class="literal">true</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">preference</code>
</span>
</dt>
<dd>
<p>
(Optional, string)
Nodes and shards used for the search. By default, Elasticsearch selects from eligible
nodes and shards using <a class="xref" href="search-shard-routing.html#search-adaptive-replica" title="Adaptive replica selection">adaptive replica selection</a>,
accounting for <a class="xref" href="modules-cluster.html#shard-allocation-awareness" title="Shard allocation awareness">allocation awareness</a>.
</p>
<details open>
<summary class="title">Valid values for <code class="literal">preference</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_only_local</code>
</span>
</dt>
<dd>
Run the search only on shards on the local node.
</dd>
<dt>
<span class="term">
<code class="literal">_local</code>
</span>
</dt>
<dd>
If possible, run the search on shards on the local node. If not, select shards
using the default method.
</dd>
<dt>
<span class="term">
<code class="literal">_only_nodes:&lt;node-id&gt;,&lt;node-id&gt;</code>
</span>
</dt>
<dd>
Run the search on only the specified nodes IDs. If suitable shards exist on more
than one selected node, use shards on those nodes using the default method. If
none of the specified nodes are available, select shards from any available node
using the default method.
</dd>
<dt>
<span class="term">
<code class="literal">_prefer_nodes:&lt;node-id&gt;,&lt;node-id&gt;</code>
</span>
</dt>
<dd>
If possible, run the search on the specified nodes IDs. If not, select shards
using the default method.
</dd>
<dt>
<span class="term">
<code class="literal">_shards:&lt;shard&gt;,&lt;shard&gt;</code>
</span>
</dt>
<dd>
Run the search only on the specified shards. You can combine this value with
other <code class="literal">preference</code> values. However, the <code class="literal">_shards</code>
value must come first. For example: <code class="literal">_shards:2,3|_local</code>.
</dd>
<dt>
<span class="term">
<code class="literal">&lt;custom-string&gt;</code>
</span>
</dt>
<dd>
Any string that does not start with <code class="literal">_</code>. If the cluster state and selected
shards do not change, searches using the same <code class="literal">&lt;custom-string&gt;</code> value are routed
to the same shards in the same order.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-esql merge styled">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-esql merge styled">  FROM employees OPTIONS "allow_no_indices"="false","preference"="_shards:0"
| SORT emp_no
| EVAL hire_double = to_double(hire_date)
| KEEP emp_no, hire_date, hire_double
| LIMIT 3</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px" class="monospaced styled">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">emp_no:integer</th>
<th align="left" valign="top">hire_date:date</th>
<th align="left" valign="top">hire_double:double</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>10001</p></td>
<td align="left" valign="top"><p>1986-06-26T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>5.20128E11</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10002</p></td>
<td align="left" valign="top"><p>1985-11-21T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>5.013792E11</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10003</p></td>
<td align="left" valign="top"><p>1986-08-28T00:00:00.000Z</p></td>
<td align="left" valign="top"><p>5.255712E11</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="esql-metadata-fields.html">« ES|QL metadata fields</a>
</span>
<span class="next">
<a href="esql-multivalued-fields.html">ES|QL multivalued fields »</a>
</span>
</div>
</div>
</body>
</html>
