<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Get repositories metering information | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Get repositories metering information | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="repositories-metering-apis.html" title="Repositories metering APIs"/>
<link rel="prev" href="repositories-metering-apis.html" title="Repositories metering APIs"/>
<link rel="next" href="clear-repositories-metering-archive-api.html" title="Clear repositories metering archive"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="repositories-metering-apis.html">« Repositories metering APIs</a>
</span>
<span class="next">
<a href="clear-repositories-metering-archive-api.html">Clear repositories metering archive »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="repositories-metering-apis.html">Repositories metering APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Get repositories metering information</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/repositories-metering-api/apis/get-repositories-metering.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="get-repositories-metering-api"></a>Get repositories metering information<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/repositories-metering-api/apis/get-repositories-metering.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns cluster repositories metering information.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-repositories-metering-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/repositories-metering-api/apis/get-repositories-metering.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_nodes/&lt;node_id&gt;/_repositories_metering</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-repositories-metering-api-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/repositories-metering-api/apis/get-repositories-metering.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the <code class="literal">monitor</code> or
<code class="literal">manage</code> <a class="xref" href="security-privileges.html#privileges-list-cluster" title="Cluster privileges">cluster privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-repositories-metering-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/repositories-metering-api/apis/get-repositories-metering.asciidoc">edit</a></h3>
</div></div></div>
<p>You can use the cluster repositories metering API to retrieve repositories metering information in a cluster.</p>
<p>This API exposes monotonically non-decreasing counters and it&#8217;s expected that clients would durably store
the information needed to compute aggregations over a period of time. Additionally, the information
exposed by this API is volatile, meaning that it won&#8217;t be present after node restarts.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-repositories-metering-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/repositories-metering-api/apis/get-repositories-metering.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;node_id&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Comma-separated list of node IDs or names used to limit
returned information.
</dd>
</dl>
</div>
<p>All the nodes selective options are explained <a class="xref" href="cluster.html#cluster-nodes" title="Node specification">here</a>.</p>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-repositories-metering-api-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/repositories-metering-api/apis/repositories-meterings-body.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">_nodes</code>
</span>
</dt>
<dd>
<p>
(object)
Contains statistics about the number of nodes selected by the request.
</p>
<details open>
<summary class="title">Properties of <code class="literal">_nodes</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">total</code>
</span>
</dt>
<dd>
(integer)
Total number of nodes selected by the request.
</dd>
<dt>
<span class="term">
<code class="literal">successful</code>
</span>
</dt>
<dd>
(integer)
Number of nodes that responded successfully to the request.
</dd>
<dt>
<span class="term">
<code class="literal">failed</code>
</span>
</dt>
<dd>
(integer)
Number of nodes that rejected the request or failed to respond. If this value
is not <code class="literal">0</code>, a reason for the rejection or failure is included in the response.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">cluster_name</code>
</span>
</dt>
<dd>
(string)
Name of the cluster. Based on the <a class="xref" href="important-settings.html#cluster-name" title="Cluster name setting">Cluster name setting</a> setting.
</dd>
<dt>
<span class="term">
<code class="literal">nodes</code>
</span>
</dt>
<dd>
<p>
(object)
Contains repositories metering information for the nodes selected by the request.
</p>
<details open>
<summary class="title">Properties of <code class="literal">nodes</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;node_id&gt;</code>
</span>
</dt>
<dd>
<p>
(array)
An array of repository metering information for the node.
</p>
<details open>
<summary class="title">Properties of objects in <code class="literal">node_id</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">repository_name</code>
</span>
</dt>
<dd>
(string)
Repository name.
</dd>
<dt>
<span class="term">
<code class="literal">repository_type</code>
</span>
</dt>
<dd>
(string)
Repository type.
</dd>
<dt>
<span class="term">
<code class="literal">repository_location</code>
</span>
</dt>
<dd>
<p>
(object)
Represents an unique location within the repository.
</p>
<details open>
<summary class="title">Properties of <code class="literal">repository_location</code> for repository type <code class="literal">Azure</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">base_path</code>
</span>
</dt>
<dd>
(string)
The path within the container where the repository stores data.
</dd>
<dt>
<span class="term">
<code class="literal">container</code>
</span>
</dt>
<dd>
(string)
Container name.
</dd>
</dl>
</div>
</div>
</details>
<details open>
<summary class="title">Properties of <code class="literal">repository_location</code> for repository type <code class="literal">GCP</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">base_path</code>
</span>
</dt>
<dd>
(string)
The path within the bucket where the repository stores data.
</dd>
<dt>
<span class="term">
<code class="literal">bucket</code>
</span>
</dt>
<dd>
(string)
Bucket name.
</dd>
</dl>
</div>
</div>
</details>
<details open>
<summary class="title">Properties of <code class="literal">repository_location</code> for repository type <code class="literal">S3</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">base_path</code>
</span>
</dt>
<dd>
(string)
The path within the bucket where the repository stores data.
</dd>
<dt>
<span class="term">
<code class="literal">bucket</code>
</span>
</dt>
<dd>
(string)
Bucket name.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">repository_ephemeral_id</code>
</span>
</dt>
<dd>
(string)
An identifier that changes every time the repository is updated.
</dd>
<dt>
<span class="term">
<code class="literal">repository_started_at</code>
</span>
</dt>
<dd>
(long)
Time the repository was created or updated. Recorded in milliseconds
since the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix Epoch</a>.
</dd>
<dt>
<span class="term">
<code class="literal">repository_stopped_at</code>
</span>
</dt>
<dd>
(Optional, long)
Time the repository was deleted or updated. Recorded in milliseconds
since the <a href="https://en.wikipedia.org/wiki/Unix_time" class="ulink" target="_top">Unix Epoch</a>.
</dd>
<dt>
<span class="term">
<code class="literal">archived</code>
</span>
</dt>
<dd>
(Boolean)
A flag that tells whether or not this object has been archived.
When a repository is closed or updated the repository metering information
is archived and kept for a certain period of time. This allows retrieving
the repository metering information of previous repository instantiations.
</dd>
<dt>
<span class="term">
<code class="literal">cluster_version</code>
</span>
</dt>
<dd>
(Optional, long)
The cluster state version when this object was archived, this field
can be used as a logical timestamp to delete all the archived metrics up
to an observed version. This field is only present for archived
repository metering information objects. The main purpose of this
field is to avoid possible race conditions during repository metering
information deletions, i.e. deleting archived repositories metering
information that we haven&#8217;t observed yet.
</dd>
<dt>
<span class="term">
<code class="literal">request_counts</code>
</span>
</dt>
<dd>
<p>
(object)
An object with the number of request performed against the repository
grouped by request type.
</p>
<details open>
<summary class="title">Properties of <code class="literal">request_counts</code> for repository type <code class="literal">Azure</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">GetBlobProperties</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/get-blob-properties" class="ulink" target="_top">Get Blob Properties</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">GetBlob</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/get-blob" class="ulink" target="_top">Get Blob</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">ListBlobs</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/list-blobs" class="ulink" target="_top">List Blobs</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">PutBlob</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/put-blob" class="ulink" target="_top">Put Blob</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">PutBlock</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/put-block" class="ulink" target="_top">Put Block</a>.
</dd>
<dt>
<span class="term">
<code class="literal">PutBlockList</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/put-block-list" class="ulink" target="_top">Put Block List</a> requests.
</dd>
</dl>
</div>
<p>Azure storage <a href="https://azure.microsoft.com/en-us/pricing/details/storage/blobs/" class="ulink" target="_top">pricing</a>.</p>
</div>
</details>
<details open>
<summary class="title">Properties of <code class="literal">request_counts</code> for repository type <code class="literal">GCP</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">GetObject</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://cloud.google.com/storage/docs/json_api/v1/objects/get" class="ulink" target="_top">get object</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">ListObjects</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://cloud.google.com/storage/docs/json_api/v1/objects/list" class="ulink" target="_top">list objects</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">InsertObject</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://cloud.google.com/storage/docs/json_api/v1/objects/insert" class="ulink" target="_top">insert object</a> requests,
including <a href="https://cloud.google.com/storage/docs/uploading-objects" class="ulink" target="_top">simple</a>, <a href="https://cloud.google.com/storage/docs/json_api/v1/how-tos/multipart-upload" class="ulink" target="_top">multipart</a> and
<a href="https://cloud.google.com/storage/docs/resumable-uploads" class="ulink" target="_top">resumable</a> uploads. Resumable uploads can perform multiple http requests to
insert a single object but they are considered as a single request since they are <a href="https://cloud.google.com/storage/docs/resumable-uploads#introduction" class="ulink" target="_top">billed</a> as an individual operation.
</dd>
</dl>
</div>
<p>Google Cloud storage <a href="https://cloud.google.com/storage/pricing" class="ulink" target="_top">pricing</a>.</p>
</div>
</details>
<details open>
<summary class="title">Properties of <code class="literal">request_counts</code> for repository type <code class="literal">S3</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">GetObject</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetObject.html" class="ulink" target="_top">GetObject</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">ListObjects</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html" class="ulink" target="_top">ListObjects</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">PutObject</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html" class="ulink" target="_top">PutObject</a> requests.
</dd>
<dt>
<span class="term">
<code class="literal">PutMultipartObject</code>
</span>
</dt>
<dd>
(long) Number of <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html" class="ulink" target="_top">Multipart</a> requests,
including <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_CreateMultipartUpload.html" class="ulink" target="_top">CreateMultipartUpload</a>,
<a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_UploadPart.html" class="ulink" target="_top">UploadPart</a> and <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_CompleteMultipartUpload.html" class="ulink" target="_top">CompleteMultipartUpload</a>
requests.
</dd>
</dl>
</div>
<p>Amazon Web Services Simple Storage Service <a href="https://aws.amazon.com/s3/pricing/" class="ulink" target="_top">pricing</a>.</p>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="repositories-metering-apis.html">« Repositories metering APIs</a>
</span>
<span class="next">
<a href="clear-repositories-metering-archive-api.html">Clear repositories metering archive »</a>
</span>
</div>
</body>
</html>
