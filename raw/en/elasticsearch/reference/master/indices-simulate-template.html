<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="hot-spotting, hotspot, hot-spot, hot spot, hotspots, hotspotting">
<title>Simulate index template API | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Simulate index template API | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="indices.html" title="Index APIs"/>
<link rel="prev" href="indices-simulate-index.html" title="Simulate index API"/>
<link rel="next" href="indices-split-index.html" title="Split index API"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="indices-simulate-index.html">« Simulate index API</a>
</span>
<span class="next">
<a href="indices-split-index.html">Split index API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-simulate-template"></a>Simulate index template API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns the index configuration that would be applied by a particular
<a class="xref" href="index-templates.html" title="Index templates">index template</a>.</p>
<a id="0f7aa40ad26d59a9268630b980a3d594"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/2533.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-request"></a>Request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_index_template/_simulate/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-prereqs"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have the
<code class="literal">manage_index_templates</code> or <code class="literal">manage</code> <a class="xref" href="security-privileges.html#privileges-list-cluster" title="Cluster privileges">cluster
privilege</a> to use this API.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-path-params"></a>Path parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Optional, string)
Name of the index template to simulate.
To test a template configuration before you add it to the cluster,
omit this parameter and specify the template configuration in the request body.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-query-params"></a>Query parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the template passed in the body is
only used if no existing templates match the same index patterns.
If <code class="literal">false</code>, the simulation uses the template with the highest priority.
Note that the template is not permanently added or updated in either case;
it is only used for the simulation.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="api-conventions.html#time-units" title="Time units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code class="literal">30s</code>.
</dd>
<dt>
<span class="term">
<code class="literal">include_defaults</code>
</span>
</dt>
<dd>
(Optional, Boolean) Functionality in <span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span>. If <code class="literal">true</code>, return all default settings in the response.
Defaults to <code class="literal">false</code>.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data_stream</code>
</span>
</dt>
<dd>
<p>
(Optional, object)
If this object is included, the template is used to create data streams and
their backing indices. Supports an empty object.
</p>
<p>Data streams require a matching index template with a <code class="literal">data_stream</code> object.
See <a class="xref" href="set-up-a-data-stream.html#create-index-template" title="Create an index template">create an index template</a>.</p>
<details open>
<summary class="title">Properties of <code class="literal">data_stream</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">allow_custom_routing</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the data stream supports
<a class="xref" href="mapping-routing-field.html" title="_routing field">custom routing</a>. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">hidden</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the data stream is <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a>. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">index_mode</code>
</span>
</dt>
<dd>
<p>
(Optional, string) Type of data stream to create. Valid values are <code class="literal">null</code>
(regular data stream) and <code class="literal">time_series</code> (<a class="xref" href="tsds.html" title="Time series data stream (TSDS)">time series data stream</a>).
</p>
<p>If <code class="literal">time_series</code>, each backing index has an <code class="literal">index.mode</code> index setting of
<code class="literal">time_series</code>.</p>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
<p>
(Required, array of strings)
Array of wildcard (<code class="literal">*</code>) expressions
used to match the names of data streams and indices during creation.
</p>
<p>Elasticsearch includes several built-in index templates. To avoid naming collisions with
these templates, see <a class="xref" href="index-templates.html#avoid-index-pattern-collisions" title="Avoid index pattern collisions">Avoid index pattern collisions</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">_meta</code>
</span>
</dt>
<dd>
(Optional, object)
Optional user metadata about the index template. May have any contents.
This map is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">priority</code>
</span>
</dt>
<dd>
(Optional, integer)
Priority to determine index template precedence when a new data stream or index is created. The index template with
the highest priority is chosen. If no priority is specified the template is treated as though it is
of priority 0 (lowest priority).
This number is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(Optional, object)
Template to be applied. It may optionally include an <code class="literal">aliases</code>, <code class="literal">mappings</code>, or
<code class="literal">settings</code> configuration.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
<p>
(Optional, object of objects) Aliases to add.
</p>
<p>If the index template includes a <code class="literal">data_stream</code> object, these are data stream
aliases. Otherwise, these are index aliases. Data stream aliases ignore the
<code class="literal">index_routing</code>, <code class="literal">routing</code>, and <code class="literal">search_routing</code> options.</p>
<details open>
<summary class="title">Properties of <code class="literal">aliases</code> objects</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;alias&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, object) The key is the alias name. Index alias names support
<a class="xref" href="api-conventions.html#api-date-math-index-names" title="Date math support in index and index alias names">date math</a>.
</p>
<p>The object body contains options for the alias. Supports an empty object.</p>
<details open>
<summary class="title">Properties of <code class="literal">&lt;alias&gt;</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filter</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="query-dsl.html" title="Query DSL">Query DSL object</a>) Query used to limit documents the
alias can access.
</dd>
<dt>
<span class="term">
<code class="literal">index_routing</code>
</span>
</dt>
<dd>
(Optional, string) Value used to route indexing operations to a specific shard.
If specified, this overwrites the <code class="literal">routing</code> value for indexing operations.
</dd>
<dt>
<span class="term">
<code class="literal">is_hidden</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the alias is <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a>. Defaults to
<code class="literal">false</code>. All indices for the alias must have the same <code class="literal">is_hidden</code> value.
</dd>
<dt>
<span class="term">
<code class="literal">is_write_index</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the index is the <a class="xref" href="aliases.html#write-index" title="Write index">write index</a> for
the alias. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">routing</code>
</span>
</dt>
<dd>
(Optional, string) Value used to route indexing and search operations to a
specific shard.
</dd>
<dt>
<span class="term">
<code class="literal">search_routing</code>
</span>
</dt>
<dd>
(Optional, string) Value used to route search operations to a specific shard. If
specified, this overwrites the <code class="literal">routing</code> value for search operations.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage index templates externally.
This number is not automatically generated by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-response-body"></a>Response body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">overlapping</code>
</span>
</dt>
<dd>
<p>
(array) Any templates that were superseded by the specified template.
</p>
<details open>
<summary class="title">Properties of <code class="literal">overlapping</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(array) Index patterns that the superseded template applies to.
</dd>
<dt>
<span class="term">
<code class="literal">name</code>
</span>
</dt>
<dd>
(string) Name of the superseded template.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
<p>
(object)
The settings, mappings, and aliases that would be applied to matching indices.
</p>
<details open>
<summary class="title">Properties of <code class="literal">template</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
<p>
(Optional, object of objects) Aliases for the index. If the index template
includes <code class="literal">data_stream</code>, this parameter is not supported.
</p>
<details open>
<summary class="title">Properties of <code class="literal">aliases</code> objects</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;alias&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, object) The key is the alias name. Index alias names support
<a class="xref" href="api-conventions.html#api-date-math-index-names" title="Date math support in index and index alias names">date math</a>.
</p>
<p>The object body contains options for the alias. Supports an empty object.</p>
<details open>
<summary class="title">Properties of <code class="literal">&lt;alias&gt;</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">filter</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="query-dsl.html" title="Query DSL">Query DSL object</a>) Query used to limit documents the
alias can access.
</dd>
<dt>
<span class="term">
<code class="literal">index_routing</code>
</span>
</dt>
<dd>
(Optional, string) Value used to route indexing operations to a specific shard.
If specified, this overwrites the <code class="literal">routing</code> value for indexing operations.
</dd>
<dt>
<span class="term">
<code class="literal">is_hidden</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the alias is <a class="xref" href="api-conventions.html#multi-hidden" title="Hidden data streams and indices">hidden</a>. Defaults to
<code class="literal">false</code>. All indices for the alias must have the same <code class="literal">is_hidden</code> value.
</dd>
<dt>
<span class="term">
<code class="literal">is_write_index</code>
</span>
</dt>
<dd>
(Optional, Boolean) If <code class="literal">true</code>, the index is the <a class="xref" href="aliases.html#write-index" title="Write index">write index</a> for
the alias. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">routing</code>
</span>
</dt>
<dd>
(Optional, string) Value used to route indexing and search operations to a
specific shard.
</dd>
<dt>
<span class="term">
<code class="literal">search_routing</code>
</span>
</dt>
<dd>
(Optional, string) Value used to route search operations to a specific shard. If
specified, this overwrites the <code class="literal">routing</code> value for search operations.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="simulate-template-api-example"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="simulate-existing-template-ex"></a>Simulating an existing template<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h4>
</div></div></div>
<p>The following example creates and simulates a composed template:</p>
<div class="pre_wrapper lang-ruby alternative">
<pre class="programlisting prettyprint lang-ruby alternative">response = client.cluster.put_component_template(
  name: 'ct1',
  body: {
    template: {
      settings: {
        "index.number_of_shards": 2
      }
    }
  }
)
puts response

response = client.cluster.put_component_template(
  name: 'ct2',
  body: {
    template: {
      settings: {
        "index.number_of_replicas": 0
      },
      mappings: {
        properties: {
          "@timestamp": {
            type: 'date'
          }
        }
      }
    }
  }
)
puts response

response = client.indices.put_index_template(
  name: 'final-template',
  body: {
    index_patterns: [
      'my-index-*'
    ],
    composed_of: [
      'ct1',
      'ct2'
    ],
    priority: 5
  }
)
puts response

response = client.indices.simulate_template(
  name: 'final-template'
)
puts response</pre>
</div>
<a id="3c7621a81fa982b79f040a6d2611530e"></a>
<div class="pre_wrapper lang-console default has-ruby">
<pre class="programlisting prettyprint lang-console default has-ruby">PUT /_component_template/ct1                   <a id="CO711-1"></a><i class="conum" data-value="1"></i>
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/ct2                    <a id="CO711-2"></a><i class="conum" data-value="2"></i>
{
  "template": {
    "settings": {
      "index.number_of_replicas": 0
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT /_index_template/final-template            <a id="CO711-3"></a><i class="conum" data-value="3"></i>
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct1", "ct2"],
  "priority": 5
}

POST /_index_template/_simulate/final-template <a id="CO711-4"></a><i class="conum" data-value="4"></i></pre>
</div>
<div class="console_widget has-ruby" data-snippet="snippets/2534.console"></div>
<div class="calloutlist default has-ruby lang-console">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO711-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a component template (<code class="literal">ct1</code>) that sets the number of shards to 2</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO711-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create a component template (<code class="literal">ct2</code>) that sets the number of replicas to 0 and defines a mapping</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO711-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Create an index template (<code class="literal">final-template</code>) that uses the component templates</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO711-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Show the configuration applied by the <code class="literal">final-template</code></p>
</td>
</tr>
</table>
</div>
<p>The response shows the index settings, mappings, and aliases applied by the <code class="literal">final-template</code>:</p>
<a id="ceb8689343501db5e946d25db0db1d2b"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_shards" : "2",  <a id="CO712-1"></a><i class="conum" data-value="1"></i>
        "number_of_replicas" : "0", <a id="CO712-2"></a><i class="conum" data-value="2"></i>
        "routing" : {
          "allocation" : {
            "include" : {
              "_tier_preference" : "data_content"
            }
          }
        }
      }
    },
    "mappings" : {                 <a id="CO712-3"></a><i class="conum" data-value="3"></i>
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [ ]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO712-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Number of shards from <code class="literal">ct1</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO712-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Number of replicas from <code class="literal">ct2</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO712-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Mappings from <code class="literal">ct1</code></p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="simulate-template-config-ex"></a>Simulating an arbitrary template configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/indices/simulate-template.asciidoc">edit</a></h4>
</div></div></div>
<p>To see what settings will be applied by a template before you add it to the cluster,
you can pass a template configuration in the request body.
The specified template is used for the simulation if it has a higher priority than existing templates.</p>
<div class="pre_wrapper lang-ruby alternative">
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.simulate_template(
  body: {
    index_patterns: [
      'my-index-*'
    ],
    composed_of: [
      'ct2'
    ],
    priority: 10,
    template: {
      settings: {
        "index.number_of_replicas": 1
      }
    }
  }
)
puts response</pre>
</div>
<a id="9feff356f302ea4915347ab71cc4887a"></a>
<div class="pre_wrapper lang-console default has-ruby">
<pre class="programlisting prettyprint lang-console default has-ruby">POST /_index_template/_simulate
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct2"],
  "priority": 10,
  "template": {
    "settings": {
      "index.number_of_replicas": 1
    }
  }
}</pre>
</div>
<div class="console_widget has-ruby" data-snippet="snippets/2535.console"></div>
<p>The response shows any overlapping templates with a lower priority.</p>
<a id="2b06332affcb6458cbafb44b28d8f9ec"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_replicas" : "1",
        "routing" : {
          "allocation" : {
            "include" : {
              "_tier_preference" : "data_content"
            }
          }
        }
      }
    },
    "mappings" : {
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [
    {
      "name" : "final-template",
      "index_patterns" : [
        "my-index-*"
      ]
    }
  ]
}</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="indices-simulate-index.html">« Simulate index API</a>
</span>
<span class="next">
<a href="indices-split-index.html">Split index API »</a>
</span>
</div>
</div>
</body>
</html>
