<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Put index template API | Elasticsearch Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="up" href="indices.html" title="Index APIs"/>
<link rel="prev" href="indices-put-template.html" title="Put index template API"/>
<link rel="next" href="indices-component-template.html" title="Put component template API"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
»
<span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span>
»
<span class="breadcrumb-node">Put index template API</span>
</div>
<div class="navheader">
<span class="prev">
<a href="indices-put-template.html">« Put index template API</a>
</span>
<span class="next">
<a href="indices-component-template.html">Put component template API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-templates-v1"></a>Put index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h2>
</div></div></div>

<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This documentation is about legacy index templates,
which are deprecated and will be replaced by the composable templates introduced in Elasticsearch 7.8.
For information about composable templates, <a class="xref" href="indices-templates.html" title="Index templates">Index templates <a id="getting"></a></a>.</p>
</div>
</div>
<p>Creates or updates an index template.</p>
<div class="pre_wrapper lang-php alternative">
<pre class="programlisting prettyprint lang-php alternative">$params = [
    'name' =&gt; 'template_1',
    'body' =&gt; [
        'index_patterns' =&gt; [
            'te*',
            'bar*',
        ],
        'settings' =&gt; [
            'number_of_shards' =&gt; 1,
        ],
        'mappings' =&gt; [
            '_source' =&gt; [
                'enabled' =&gt; false,
            ],
            'properties' =&gt; [
                'host_name' =&gt; [
                    'type' =&gt; 'keyword',
                ],
                'created_at' =&gt; [
                    'type' =&gt; 'date',
                    'format' =&gt; 'EEE MMM dd HH:mm:ss Z yyyy',
                ],
            ],
        ],
    ],
];
$response = $client-&gt;indices()-&gt;putTemplate($params);</pre>
</div>
<div class="pre_wrapper lang-csharp alternative">
<pre class="programlisting prettyprint lang-csharp alternative">var putIndexTemplateResponse = client.Indices.PutTemplate("template_1", t =&gt; t
    .IndexPatterns("te*", "bar*")
    .Settings(s =&gt; s
        .NumberOfShards(1)
    )
    .Map(m =&gt; m
        .SourceField(s =&gt; s.Enabled(false))
        .Properties(p =&gt; p
            .Keyword(k =&gt; k.Name("host_name"))
            .Date(d =&gt; d.Name("created_at").Format("EEE MMM dd HH:mm:ss Z yyyy"))
        )
    )
);</pre>
</div>
<div class="pre_wrapper lang-python alternative">
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.put_template(
    name="template_1",
    body={
        "index_patterns": ["te*", "bar*"],
        "settings": {"number_of_shards": 1},
        "mappings": {
            "_source": {"enabled": False},
            "properties": {
                "host_name": {"type": "keyword"},
                "created_at": {
                    "type": "date",
                    "format": "EEE MMM dd HH:mm:ss Z yyyy",
                },
            },
        },
    },
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.putTemplate({
  name: 'template_1',
  body: {
    index_patterns: [
      'te*',
      'bar*'
    ],
    settings: {
      number_of_shards: 1
    },
    mappings: {
      _source: {
        enabled: false
      },
      properties: {
        host_name: {
          type: 'keyword'
        },
        created_at: {
          type: 'date',
          format: 'EEE MMM dd HH:mm:ss Z yyyy'
        }
      }
    }
  }
})
console.log(response)</pre>
</div>
<a id="e5f50b31f165462d883ecbff45f74985"></a>
<div class="pre_wrapper lang-console default has-php has-csharp has-python has-js">
<pre class="programlisting prettyprint lang-console default has-php has-csharp has-python has-js">PUT _template/template_1
{
  "index_patterns": ["te*", "bar*"],
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "_source": {
      "enabled": false
    },
    "properties": {
      "host_name": {
        "type": "keyword"
      },
      "created_at": {
        "type": "date",
        "format": "EEE MMM dd HH:mm:ss Z yyyy"
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-php has-csharp has-python has-js" data-snippet="snippets/1863.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<p>Use the PUT index template API
to create or update an index template.</p>
<p>Index templates define <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a> and <a class="xref" href="mapping.html" title="Mapping">mappings</a>
that you can automatically apply when creating new indices.
Elasticsearch applies templates to new indices
based on an index pattern that matches the index name.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Composable templates always take precedence over legacy templates.
If no composable template matches a new index,
matching legacy templates are applied according to their order.</p>
</div>
</div>
<p>Index templates are only applied during index creation.
Changes to index templates do not affect existing indices.
Settings and mappings specified in <a class="xref" href="indices-create-index.html" title="Create index API">create index</a> API requests
override any settings or mappings specified in an index template.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_comments_in_index_templates_2"></a>Comments in index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use C-style /* */ block comments in index templates.
You can include comments anywhere in the request body,
except before the opening curly bracket.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="getting-v1"></a>Getting templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>See <a class="xref" href="indices-get-template-v1.html" title="Get index template API">Get index template (legacy)</a>.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the index template to create.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, boolean)
If <code class="literal">true</code>, this request cannot replace or update existing index templates.
Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">order</code>
</span>
</dt>
<dd>
<p>
(Optional,integer)
Order in which Elasticsearch applies this template
if index matches multiple templates.
</p>
<p>Templates with lower <code class="literal">order</code> values are merged first.
Templates with higher <code class="literal">order</code> values are merged later,
overriding templates with lower values.</p>
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="common-options.html#time-units" title="Time units">time units</a>) Specifies the period of time to wait for
a connection to the master node. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(Required, array of strings)
Array of wildcard expressions
used to match the names of indices during creation.
</dd>
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices-aliases.html" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices-aliases.html" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field data types">Field data types</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage index templates externally.
This number is not automatically generated by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-v1-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_index_template_with_index_aliases_2"></a>Index template with index aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>You can include <a class="xref" href="indices-aliases.html" title="Update index alias API">index aliases</a> in an index template.</p>
<a id="0fc4b589df5388da784c6d981e769e31"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _template/template_1
{
  "index_patterns" : ["te*"],
  "settings" : {
    "number_of_shards" : 1
  },
  "aliases" : {
    "alias1" : {},
    "alias2" : {
      "filter" : {
        "term" : {"user.id" : "kimchy" }
      },
      "routing" : "shard-1"
    },
    "{index}-alias" : {} <a id="CO595-1"></a><i class="conum" data-value="1"></i>
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1864.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO595-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>the <code class="literal">{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="multiple-templates-v1"></a>Indices matching multiple templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>Multiple index templates can potentially match an index, in this case,
both the settings and mappings are merged into the final configuration
of the index. The order of the merging can be controlled using the
<code class="literal">order</code> parameter, with lower order being applied first, and higher
orders overriding them. For example:</p>
<a id="6ba332596f5eb29660c90ab2d480e7dc"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_template/template_1
{
  "index_patterns" : ["te*"],
  "order" : 0,
  "settings" : {
    "number_of_shards" : 1
  },
  "mappings" : {
    "_source" : { "enabled" : false }
  }
}

PUT /_template/template_2
{
  "index_patterns" : ["tes*"],
  "order" : 1,
  "settings" : {
    "number_of_shards" : 1
  },
  "mappings" : {
    "_source" : { "enabled" : true }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1865.console"></div>
<p>The above will disable storing the <code class="literal">_source</code>, but
for indices that start with <code class="literal">tes*</code>, <code class="literal">_source</code> will still be enabled.
Note, for mappings, the merging is "deep", meaning that specific
object/property based mappings can easily be added/overridden on higher
order templates, with lower order templates providing the basis.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Multiple matching templates with the same order value will
result in a non-deterministic merging order.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="versioning-templates-v1"></a>Template versioning<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/put-index-template-v1.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">version</code> parameter
to add an optional version number to an index template.
External systems can use these version numbers
to simplify template management.</p>
<p>The <code class="literal">version</code>	parameter is completely optional
and not automatically generated by Elasticsearch.</p>
<p>To unset a <code class="literal">version</code>,
replace the template without specifying	one.</p>
<a id="488f6df1df71972392b670ce557f7ff3"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_template/template_1
{
  "index_patterns" : ["my-index-*"],
  "order" : 0,
  "settings" : {
    "number_of_shards" : 1
  },
  "version": 123
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1866.console"></div>
<p>To check the <code class="literal">version</code>,
you can	use the <a class="xref" href="indices-get-template.html" title="Get index template API">get index template</a> API
with the <a class="xref" href="common-options.html#common-options-response-filtering" title="Response Filtering"><code class="literal">filter_path</code></a> query parameter
to return only the version number:</p>
<div class="pre_wrapper lang-php alternative">
<pre class="programlisting prettyprint lang-php alternative">$params = [
    'name' =&gt; 'template_1',
];
$response = $client-&gt;indices()-&gt;getTemplate($params);</pre>
</div>
<div class="pre_wrapper lang-csharp alternative">
<pre class="programlisting prettyprint lang-csharp alternative">var getIndexTemplateResponse = client.Indices.GetTemplate("template_1", t =&gt; t.FilterPath(new[] { "*.version" }));</pre>
</div>
<div class="pre_wrapper lang-python alternative">
<pre class="programlisting prettyprint lang-python alternative">resp = client.indices.get_template(
    name="template_1", filter_path="*.version",
)
print(resp)</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<pre class="programlisting prettyprint lang-js alternative">const response = await client.indices.getTemplate({
  name: 'template_1',
  filter_path: '*.version'
})
console.log(response)</pre>
</div>
<a id="46658f00edc4865dfe472a392374cd0f"></a>
<div class="pre_wrapper lang-console default has-php has-csharp has-python has-js">
<pre class="programlisting prettyprint lang-console default has-php has-csharp has-python has-js">GET /_template/template_1?filter_path=*.version</pre>
</div>
<div class="console_widget has-php has-csharp has-python has-js" data-snippet="snippets/1867.console"></div>
<p>The API returns the following response:</p>
<a id="a2e618c0a7ef9368e0b39e7ece15e27e"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template_1" : {
    "version" : 123
  }
}</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="indices-put-template.html">« Put index template API</a>
</span>
<span class="next">
<a href="indices-component-template.html">Put component template API »</a>
</span>
</div>
</div>
</body>
</html>
