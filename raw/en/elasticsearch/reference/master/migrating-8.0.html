<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="hot-spotting, hotspot, hot-spot, hot spot, hotspots, hotspotting">
<title>Migrating to 8.0 | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Migrating to 8.0 | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="breaking-changes.html" title="Migration guide"/>
<link rel="prev" href="migrating-8.1.html" title="Migrating to 8.1"/>
<link rel="next" href="migrate-to-java-time.html" title="Java time migration guide"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="breaking-changes.html">Migration guide</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="migrating-8.1.html">« Migrating to 8.1</a>
</span>
<span class="next">
<a href="migrate-to-java-time.html">Java time migration guide »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="migrating-8.0"></a>Migrating to 8.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0.asciidoc">edit</a></h2>
</div></div></div>

<p>This section discusses the changes that you need to be aware of when migrating
your application to Elasticsearch 8.0.</p>
<p>See also <a class="xref" href="release-highlights.html" title="What&#8217;s new in 8.10"><em>What&#8217;s new in 8.10</em></a> and <a class="xref" href="es-release-notes.html" title="Release notes">Release notes</a>.</p>
<h3><a id="breaking-changes-8.0"></a>Breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0.asciidoc">edit</a></h3>
<p>The following changes in Elasticsearch 8.0 might affect your applications
and prevent them from operating normally.
Before upgrading to 8.0, review these changes and take the described steps
to mitigate the impact.</p>
<h4><a id="breaking_80_cluster_node_setting_changes"></a>Cluster and node setting changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/cluster-node-setting-changes.asciidoc">edit</a></h4>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span> indicates a change to a supported <a href="/guide/en/cloud/current/ec-add-user-settings.html" class="ulink" target="_top">user setting</a> for Elasticsearch Service.</p>
</div>
</div>
<details>
<summary class="title"><code class="literal">action.destructive_requires_name</code> now defaults to <code class="literal">true</code>. <span class="image"><a class="image" href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/logo_cloud.svg" alt="logo cloud" title="Supported on Elasticsearch Service"></a></span></summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The default for the <code class="literal">action.destructive_requires_name</code> setting changes from <code class="literal">false</code>
to <code class="literal">true</code> in Elasticsearch 8.0.0.</p>
<p>Previously, defaulting to <code class="literal">false</code> allowed users to use wildcard
patterns to delete, close, or change index blocks on indices.
To prevent the accidental deletion of indices that happen to match a
wildcard pattern, we now default to requiring that destructive
operations explicitly name the indices to be modified.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To use wildcard patterns for destructive actions, set
<code class="literal">action.destructive_requires_name</code> to <code class="literal">false</code> using the
<a href="/guide/en/elasticsearch/reference/master/cluster-update-settings.html" class="ulink" target="_top">https://www.elastic.co/guide/en/elasticsearch/reference/master/cluster-update-settings.html</a> cluster settings API].</p>
</div>
</details>
<details>
<summary class="title">You can no longer set <code class="literal">xpack.searchable.snapshot.shared_cache.size</code> on non-frozen nodes.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
You can no longer set
<a href="/guide/en/elasticsearch/reference/master/searchable-snapshots.html#searchable-snapshots-shared-cache" class="ulink" target="_top"><code class="literal">xpack.searchable.snapshot.shared_cache.size</code></a>
on a node that doesn&#8217;t have the <code class="literal">data_frozen</code> node role. This setting reserves
disk space for the shared cache of partially mounted indices. Elasticsearch only
allocates partially mounted indices to nodes with the <code class="literal">data_frozen</code> role.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove <code class="literal">xpack.searchable.snapshot.shared_cache.size</code> from <code class="literal">elasticsearch.yml</code>
for nodes that don&#8217;t have the <code class="literal">data_frozen</code> role. Specifying the setting on a
non-frozen node will result in an error on startup.</p>
</div>
</details>
<details id="max_clause_count_change">
<summary class="title"><code class="literal">indices.query.bool.max_clause_count</code> is deprecated and has no effect.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch will now dynamically set the maximum number of allowed clauses
in a query, using a heuristic based on the size of the search thread pool and
the size of the heap allocated to the JVM. This limit has a minimum value of
1024 and will in most cases be larger (for example, a node with 30Gb RAM and
48 CPUs will have a maximum clause count of around 27,000). Larger heaps lead
to higher values, and larger thread pools result in lower values.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Queries with many clauses should be avoided whenever possible.
If you previously bumped this setting to accommodate heavy queries,
you might need to increase the amount of memory available to Elasticsearch,
or to reduce the size of your search thread pool so that more memory is
available to each concurrent search.</p>
<p>In previous versions of Lucene you could get around this limit by nesting
boolean queries within each other, but the limit is now based on the total
number of leaf queries within the query as a whole and this workaround will
no longer help.</p>
<p>Specifying <code class="literal">indices.query.bool.max_clause_count</code> will have no effect
but will generate deprecation warnings. To avoid these warnings, remove the
setting from <code class="literal">elasticsearch.yml</code> during an upgrade or node restart.</p>
</div>
</details>
<details id="ilm-poll-interval-limit">
<summary class="title"><code class="literal">indices.lifecycle.poll_interval</code> must be greater than <code class="literal">1s</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Setting <code class="literal">indices.lifecycle.poll_interval</code> too low can cause
excessive load on a cluster. The poll interval must now be at least <code class="literal">1s</code> (one second).</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Set <code class="literal">indices.lifecycle.poll_interval</code> setting to <code class="literal">1s</code> or
greater in <code class="literal">elasticsearch.yml</code> or through the
<a href="/guide/en/elasticsearch/reference/master/cluster-update-settings.html" class="ulink" target="_top">cluster update settings API</a>.</p>
<p>Setting <code class="literal">indices.lifecycle.poll_interval</code> to less than <code class="literal">1s</code> in
<code class="literal">elasticsearch.yml</code> will result in an error on startup.
<a href="/guide/en/elasticsearch/reference/master/cluster-update-settings.html" class="ulink" target="_top">Cluster update settings API</a> requests that
set <code class="literal">indices.lifecycle.poll_interval</code> to less than <code class="literal">1s</code> will return an error.</p>
</div>
</details>
<details>
<summary class="title">The file and native realms are now enabled unless explicitly disabled.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The file and native realms are now enabled unless explicitly disabled. If
explicitly disabled, the file and native realms remain disabled at all times.</p>
<p>Previously, the file and native realms had the following implicit behaviors:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the file and native realms were not configured, they were implicitly disabled
if any other realm was configured.
</li>
<li class="listitem">
If no other realm was available because realms were either not configured,
not permitted by license, or explicitly disabled, the file and native realms
were enabled, even if explicitly disabled.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To explicitly disable the file or native realm, set the respective
<code class="literal">file.&lt;realm-name&gt;.enabled</code> or <code class="literal">native.&lt;realm-name&gt;.enabled</code> setting to <code class="literal">false</code>
under the <code class="literal">xpack.security.authc.realms</code> namespace in <code class="literal">elasticsearch.yml</code>.</p>
<p>The following configuration example disables the native realm and the file realm.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.realms:

  native.realm1.enabled: false
  file.realm2.enabled: false

  ...</pre>
</div>
</div>
</details>
<details>
<summary class="title">The realm <code class="literal">order</code> setting is now required.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">xpack.security.authc.realms.{type}.{name}.order</code> setting is now required and must be
specified for each explicitly configured realm. Each value must be unique.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
The cluster will fail to start if the requirements are not met.</p>
<p>For example, the following configuration is invalid:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.realms.kerberos.kerb1:
  keytab.path: es.keytab
  remove_realm_name: false</pre>
</div>
<p>And must be configured as:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.authc.realms.kerberos.kerb1:
  order: 0
  keytab.path: es.keytab
  remove_realm_name: false</pre>
</div>
</div>
</details>
<details id="breaking_80_allocation_change_include_relocations_removed">
<summary class="title"><code class="literal">cluster.routing.allocation.disk.include_relocations</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch now always accounts for the sizes of relocating shards when making
allocation decisions based on the disk usage of the nodes in the cluster. In
earlier versions, you could disable this by setting <code class="literal">cluster.routing.allocation.disk.include_relocations</code> to <code class="literal">false</code>.
That could result in poor allocation decisions that could overshoot watermarks and require significant
extra work to correct. The <code class="literal">cluster.routing.allocation.disk.include_relocations</code> setting has been removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove the <code class="literal">cluster.routing.allocation.disk.include_relocations</code>
setting. Specifying this setting in <code class="literal">elasticsearch.yml</code> will result in an error
on startup.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">cluster.join.timeout</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">cluster.join.timeout</code> setting has been removed. Join attempts no longer
time out.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove <code class="literal">cluster.join.timeout</code> from <code class="literal">elasticsearch.yml</code>.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">discovery.zen</code> settings have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
All settings under the <code class="literal">discovery.zen</code> namespace are no longer supported. They existed only only for BWC reasons in 7.x. This includes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">discovery.zen.minimum_master_nodes</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.no_master_block</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.hosts_provider</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.publish_timeout</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.commit_timeout</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.publish_diff.enable</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.ping.unicast.concurrent_connects</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.ping.unicast.hosts.resolve_timeout</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.ping.unicast.hosts</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.ping_timeout</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.unsafe_rolling_upgrades_enabled</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.fd.connect_on_network_disconnect</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.fd.ping_interval</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.fd.ping_timeout</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.fd.ping_retries</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.fd.register_connection_listener</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.join_retry_attempts</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.join_retry_delay</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.join_timeout</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.max_pings_from_another_master</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.send_leave_request</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.master_election.wait_for_joins_timeout</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.master_election.ignore_non_master_pings</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.publish.max_pending_cluster_states</code>
</li>
<li class="listitem">
<code class="literal">discovery.zen.bwc_ping_timeout</code>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove the <code class="literal">discovery.zen</code> settings from <code class="literal">elasticsearch.yml</code>. Specifying these settings will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">http.content_type.required</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">http.content_type.required</code> setting was deprecated in Elasticsearch 6.0
and has been removed in Elasticsearch 8.0. The setting was introduced in
Elasticsearch 5.3 to prepare users for Elasticsearch 6.0, where content type
auto detection was removed for HTTP requests.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove the <code class="literal">http.content_type.required</code> setting from <code class="literal">elasticsearch.yml</code>. Specifying this setting  will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">http.tcp_no_delay</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">http.tcp_no_delay</code> setting was deprecated in 7.x and has been removed in 8.0. Use`http.tcp.no_delay` instead.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Replace the <code class="literal">http.tcp_no_delay</code> setting with <code class="literal">http.tcp.no_delay</code>.
Specifying  <code class="literal">http.tcp_no_delay</code> in <code class="literal">elasticsearch.yml</code> will
result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">network.tcp.connect_timeout</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">network.tcp.connect_timeout</code> setting was deprecated in 7.x and has been removed in 8.0. This setting
was a fallback setting for <code class="literal">transport.connect_timeout</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove the`network.tcp.connect_timeout` setting.
Use the <code class="literal">transport.connect_timeout</code> setting to change the default connection
timeout for client connections. Specifying
<code class="literal">network.tcp.connect_timeout</code> in <code class="literal">elasticsearch.yml</code> will result in an
error on startup.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">node.max_local_storage_nodes</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">node.max_local_storage_nodes</code> setting was deprecated in 7.x and
has been removed in 8.0. Nodes should be run on separate data paths
to ensure that each node is consistently assigned to the same data path.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove the <code class="literal">node.max_local_storage_nodes</code> setting. Specifying this
setting in <code class="literal">elasticsearch.yml</code> will result in an error on startup.</p>
</div>
</details>
<details id="accept-default-password-removed">
<summary class="title">The <code class="literal">accept_default_password</code> setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">xpack.security.authc.accept_default_password</code> setting has not had any affect
since the 6.0 release of Elasticsearch and is no longer allowed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove  the <code class="literal">xpack.security.authc.accept_default_password</code> setting from <code class="literal">elasticsearch.yml</code>.
Specifying this setting will result in an error on startup.</p>
</div>
</details>
<details id="roles-index-cache-removed">
<summary class="title">The <code class="literal">roles.index.cache.*</code> settings have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">xpack.security.authz.store.roles.index.cache.max_size</code> and
<code class="literal">xpack.security.authz.store.roles.index.cache.ttl</code> settings have
been removed. These settings have been redundant and deprecated
since the 5.2 release of Elasticsearch.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove the <code class="literal">xpack.security.authz.store.roles.index.cache.max_size</code>
and <code class="literal">xpack.security.authz.store.roles.index.cache.ttl</code> settings from <code class="literal">elasticsearch.yml</code> .
Specifying these settings will result in an error on startup.</p>
</div>
</details>
<details id="separating-node-and-client-traffic">
<summary class="title">The <code class="literal">transport.profiles.*.xpack.security.type</code> setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">transport.profiles.*.xpack.security.type</code> setting is no longer supported.
The Transport Client has been removed and all client traffic now uses
the HTTP transport. Transport profiles using this setting should be removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove the <code class="literal">transport.profiles.*.xpack.security.type</code> setting from <code class="literal">elasticsearch.yml</code>.
Specifying this setting in a transport profile will result in an error on startup.</p>
</div>
</details>
<details id="saml-realm-nameid-changes">
<summary class="title">The <code class="literal">nameid_format</code> SAML realm setting no longer has a default value.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In SAML, Identity Providers (IdPs) can either be explicitly configured to
release a <code class="literal">NameID</code> with a specific format, or configured to attempt to conform
with the requirements of a Service Provider (SP). The SP declares its
requirements in the <code class="literal">NameIDPolicy</code> element of a SAML Authentication Request.
In Elasticsearch, the <code class="literal">nameid_format</code> SAML realm setting controls the <code class="literal">NameIDPolicy</code>
value.</p>
<p>Previously, the default value for <code class="literal">nameid_format</code> was
<code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code>. This setting created
authentication requests that required the IdP to release <code class="literal">NameID</code> with a
<code class="literal">transient</code> format.</p>
<p>The default value has been removed, which means that Elasticsearch will create SAML Authentication Requests by default that don&#8217;t put this requirement on the
IdP. If you want to retain the previous behavior, set <code class="literal">nameid_format</code> to
<code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If you currently don&#8217;t configure <code class="literal">nameid_format</code> explicitly, it&#8217;s possible
that your IdP will reject authentication requests from Elasticsearch because the requests
do not specify a <code class="literal">NameID</code> format (and your IdP is configured to expect one).
This mismatch can result in a broken SAML configuration. If you&#8217;re unsure whether
your IdP is explicitly configured to use a certain <code class="literal">NameID</code> format and you want to retain current behavior
, try setting <code class="literal">nameid_format</code> to <code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code> explicitly.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">xpack.security.transport.ssl.enabled</code> setting is now required to configure <code class="literal">xpack.security.transport.ssl</code> settings.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
It is now an error to configure any SSL settings for
<code class="literal">xpack.security.transport.ssl</code> without also configuring
<code class="literal">xpack.security.transport.ssl.enabled</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If using other <code class="literal">xpack.security.transport.ssl</code> settings, you must explicitly
specify the <code class="literal">xpack.security.transport.ssl.enabled</code> setting.</p>
<p>If you do not want to enable SSL and are currently using other
<code class="literal">xpack.security.transport.ssl</code> settings, do one of the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Explicitly specify <code class="literal">xpack.security.transport.ssl.enabled</code> as <code class="literal">false</code>
</li>
<li class="listitem">
Discontinue use of other <code class="literal">xpack.security.transport.ssl</code> settings
</li>
</ul>
</div>
<p>If you want to enable SSL, follow the instructions in
<a href="/guide/en/elasticsearch/reference/master/configuring-tls.html#tls-transport" class="ulink" target="_top">Encrypting communications between nodes
in a cluster</a>. As part of this configuration, explicitly specify
<code class="literal">xpack.security.transport.ssl.enabled</code> as <code class="literal">true</code>.</p>
<p>For example, the following configuration is invalid:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.transport.ssl.keystore.path: elastic-certificates.p12
xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</pre>
</div>
<p>And must be configured as:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.transport.ssl.enabled: true <a id="CO814-1"></a><i class="conum" data-value="1"></i>
xpack.security.transport.ssl.keystore.path: elastic-certificates.p12
xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO814-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>or <code class="literal">false</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">The <code class="literal">xpack.security.http.ssl.enabled</code> setting is now required to configure <code class="literal">xpack.security.http.ssl</code> settings.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
It is now an error to configure any SSL settings for
<code class="literal">xpack.security.http.ssl</code> without also configuring
<code class="literal">xpack.security.http.ssl.enabled</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If using other <code class="literal">xpack.security.http.ssl</code> settings, you must explicitly
specify the <code class="literal">xpack.security.http.ssl.enabled</code> setting.</p>
<p>If you do not want to enable SSL and are currently using other
<code class="literal">xpack.security.http.ssl</code> settings, do one of the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Explicitly specify <code class="literal">xpack.security.http.ssl.enabled</code> as <code class="literal">false</code>
</li>
<li class="listitem">
Discontinue use of other <code class="literal">xpack.security.http.ssl</code> settings
</li>
</ul>
</div>
<p>If you want to enable SSL, follow the instructions in
<a href="/guide/en/elasticsearch/reference/master/security-basic-setup-https.html#encrypt-http-communication" class="ulink" target="_top">Encrypting HTTP client communications</a>. As part
of this configuration, explicitly specify <code class="literal">xpack.security.http.ssl.enabled</code>
as <code class="literal">true</code>.</p>
<p>For example, the following configuration is invalid:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.http.ssl.certificate: elasticsearch.crt
xpack.security.http.ssl.key: elasticsearch.key
xpack.security.http.ssl.certificate_authorities: [ "corporate-ca.crt" ]</pre>
</div>
<p>And must be configured as either:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.http.ssl.enabled: true <a id="CO815-1"></a><i class="conum" data-value="1"></i>
xpack.security.http.ssl.certificate: elasticsearch.crt
xpack.security.http.ssl.key: elasticsearch.key
xpack.security.http.ssl.certificate_authorities: [ "corporate-ca.crt" ]</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO815-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>or <code class="literal">false</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">A <code class="literal">xpack.security.transport.ssl</code> certificate and key are now required to enable SSL for the transport interface.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
It is now an error to enable SSL for the transport interface without also configuring
a certificate and key through use of the <code class="literal">xpack.security.transport.ssl.keystore.path</code>
setting or the <code class="literal">xpack.security.transport.ssl.certificate</code> and
<code class="literal">xpack.security.transport.ssl.key</code> settings.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If <code class="literal">xpack.security.transport.ssl.enabled</code> is set to <code class="literal">true</code>, provide a
certificate and key using the <code class="literal">xpack.security.transport.ssl.keystore.path</code>
setting or the <code class="literal">xpack.security.transport.ssl.certificate</code> and
<code class="literal">xpack.security.transport.ssl.key</code> settings. If a certificate and key is not
provided, Elasticsearch will return in an error on startup.</p>
</div>
</details>
<details>
<summary class="title">A <code class="literal">xpack.security.http.ssl</code> certificate and key are now required to enable SSL for the HTTP server.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
It is now an error to enable SSL for the HTTP (Rest) server without also configuring
a certificate and key through use of the <code class="literal">xpack.security.http.ssl.keystore.path</code>
setting or the <code class="literal">xpack.security.http.ssl.certificate</code> and
<code class="literal">xpack.security.http.ssl.key</code> settings.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If <code class="literal">xpack.security.http.ssl.enabled</code> is set to <code class="literal">true</code>, provide a certificate and
key using the <code class="literal">xpack.security.http.ssl.keystore.path</code> setting or the
<code class="literal">xpack.security.http.ssl.certificate</code> and <code class="literal">xpack.security.http.ssl.key</code>
settings. If certificate and key is not provided, Elasticsearch will return in an error
on startup.</p>
</div>
</details>
<details>
<summary class="title">PKCS#11 keystores and trustores cannot be configured in <code class="literal">elasticsearch.yml</code></summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The settings <code class="literal">*.ssl.keystore.type</code> and <code class="literal">*.ssl.truststore.type</code> no longer accept "PKCS11" as a valid type.
This applies to all SSL settings in Elasticsearch, including</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">xpack.security.http.keystore.type</code>
</li>
<li class="listitem">
<code class="literal">xpack.security.transport.keystore.type</code>
</li>
<li class="listitem">
<code class="literal">xpack.security.http.truststore.type</code>
</li>
<li class="listitem">
<code class="literal">xpack.security.transport.truststore.type</code>
</li>
</ul>
</div>
<p>As well as SSL settings for security realms, watcher and monitoring.</p>
<p>Use of a PKCS#11 keystore or truststore as the JRE&#8217;s default store is not affected.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If you have a PKCS#11 keystore configured within your <code class="literal">elasticsearch.yml</code> file, you must remove that
configuration and switch to a supported keystore type, or configure your PKCS#11 keystore as the
JRE default store.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">kibana</code> user has been replaced by <code class="literal">kibana_system</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">kibana</code> user was historically used to authenticate Kibana to Elasticsearch.
The name of this user was confusing, and was often mistakenly used to login to Kibana.
This has been renamed to <code class="literal">kibana_system</code> in order to reduce confusion, and to better
align with other built-in system accounts.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Replace any use of the <code class="literal">kibana</code> user with the <code class="literal">kibana_system</code> user. Specifying
the <code class="literal">kibana</code> user in <code class="literal">kibana.yml</code> will result in an error on startup.</p>
<p>If your <code class="literal">kibana.yml</code> used to contain:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">elasticsearch.username: kibana</pre>
</div>
<p>then you should update to use the new <code class="literal">kibana_system</code> user instead:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">elasticsearch.username: kibana_system</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The new <code class="literal">kibana_system</code> user does not preserve the previous <code class="literal">kibana</code>
user password. You must explicitly set a password for the <code class="literal">kibana_system</code> user.</p>
</div>
</div>
</div>
</details>
<details id="search-remote-settings-removed">
<summary class="title">The <code class="literal">search.remote.*</code> settings have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 6.5 these settings were deprecated in favor of <code class="literal">cluster.remote</code>. In 7.x we
provided automatic upgrading of these settings to their <code class="literal">cluster.remote</code>
counterparts. In 8.0.0, these settings have been removed. Elasticsearch will
refuse to start if you have these settings in your configuration or cluster
state.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the replacement <code class="literal">cluster.remote</code> settings. Discontinue use of the
<code class="literal">search.remote.*</code> settings. Specifying these settings in <code class="literal">elasticsearch.yml</code>
will result in an error on startup.</p>
</div>
</details>
<details id="remove-pidfile">
<summary class="title">The <code class="literal">pidfile</code> setting has been replaced by <code class="literal">node.pidfile</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
To ensure that all settings are in a proper namespace, the <code class="literal">pidfile</code> setting was
previously deprecated in version 7.4.0 of Elasticsearch, and is removed in
version 8.0.0. Instead, use <code class="literal">node.pidfile</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <code class="literal">node.pidfile</code> setting. Discontinue use of the <code class="literal">pidfile</code> setting.
Specifying the <code class="literal">pidfile</code> setting in <code class="literal">elasticsearch.yml</code> will result in an error
on startup.</p>
</div>
</details>
<details id="remove-processors">
<summary class="title">The <code class="literal">processors</code> setting has been replaced by <code class="literal">node.processors</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
To ensure that all settings are in a proper namespace, the <code class="literal">processors</code> setting
was previously deprecated in version 7.4.0 of Elasticsearch, and is removed in
version 8.0.0. Instead, use <code class="literal">node.processors</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <code class="literal">node.processors</code> setting. Discontinue use of the <code class="literal">processors</code> setting.
Specifying the <code class="literal">processors</code> setting in <code class="literal">elasticsearch.yml</code> will result in an
error on startup.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">node.processors</code> setting can no longer exceed the available number of processors.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously it was possible to set the number of processors used to set the
default sizes for the thread pools to be more than the number of available
processors. As this leads to more context switches and more threads but without
an increase in the number of physical CPUs on which to schedule these additional
threads, the <code class="literal">node.processors</code> setting is now bounded by the number of available
processors.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If specified, ensure the value of <code class="literal">node.processors</code> setting does not exceed the
number of available processors. Setting the <code class="literal">node.processors</code> value greater than
the number of available processors in <code class="literal">elasticsearch.yml</code> will result in an
error on startup.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">cluster.remote.connect</code> setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In Elasticsearch 7.7.0, the setting <code class="literal">cluster.remote.connect</code> was deprecated in
favor of setting <code class="literal">node.remote_cluster_client</code>. In Elasticsearch 8.0.0, the
setting <code class="literal">cluster.remote.connect</code> is removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <code class="literal">node.remote_cluster_client</code> setting. Discontinue use of the
<code class="literal">cluster.remote.connect</code> setting. Specifying the <code class="literal">cluster.remote.connect</code>
setting in <code class="literal">elasticsearch.yml</code> will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">node.local_storage</code> setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In Elasticsearch 7.8.0, the setting <code class="literal">node.local_storage</code> was deprecated and
beginning in Elasticsearch 8.0.0 all nodes will require local storage. Therefore,
the <code class="literal">node.local_storage</code> setting has been removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">node.local_storage</code> setting. Specifying this setting in
<code class="literal">elasticsearch.yml</code> will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">auth.password</code> setting for HTTP monitoring has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In Elasticsearch 7.7.0, the setting <code class="literal">xpack.monitoring.exporters.&lt;exporterName&gt;.auth.password</code>
was deprecated in favor of setting <code class="literal">xpack.monitoring.exporters.&lt;exporterName&gt;.auth.secure_password</code>.
In Elasticsearch 8.0.0, the setting <code class="literal">xpack.monitoring.exporters.&lt;exporterName&gt;.auth.password</code> is
removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <code class="literal">xpack.monitoring.exporters.&lt;exporterName&gt;.auth.secure_password</code>
setting. Discontinue use of the
<code class="literal">xpack.monitoring.exporters.&lt;exporterName&gt;.auth.password</code> setting. Specifying
the <code class="literal">xpack.monitoring.exporters.&lt;exporterName&gt;.auth.password</code> setting in
<code class="literal">elasticsearch.yml</code> will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title">Settings used to disable basic license features have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The following settings were deprecated in Elasticsearch 7.8.0 and have been removed
in Elasticsearch 8.0.0:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">xpack.enrich.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.flattened.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.ilm.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.monitoring.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.rollup.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.slm.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.sql.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.transform.enabled</code>
</li>
<li class="listitem">
<code class="literal">xpack.vectors.enabled</code>
</li>
</ul>
</div>
<p>These basic license features are now always enabled.</p>
<p>If you have disabled ILM so that you can use another tool to manage Watcher
indices, the newly introduced <code class="literal">xpack.watcher.use_ilm_index_management</code> setting
may be set to false.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the removed settings. Specifying these settings in
<code class="literal">elasticsearch.yml</code> will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title">Settings used to defer cluster recovery pending a certain number of master nodes have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The following cluster settings have been removed:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">gateway.expected_nodes</code>
</li>
<li class="listitem">
<code class="literal">gateway.expected_master_nodes</code>
</li>
<li class="listitem">
<code class="literal">gateway.recover_after_nodes</code>
</li>
<li class="listitem">
<code class="literal">gateway.recover_after_master_nodes</code>
</li>
</ul>
</div>
<p>It is safe to recover the cluster as soon as a majority of master-eligible
nodes have joined so there is no benefit in waiting for any additional
master-eligible nodes to start.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the removed settings. If needed, use
<code class="literal">gateway.expected_data_nodes</code> or <code class="literal">gateway.recover_after_data_nodes</code> to defer
cluster recovery pending a certain number of data nodes.</p>
</div>
</details>
<details>
<summary class="title">Legacy role settings have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The legacy role settings:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">node.data</code>
</li>
<li class="listitem">
<code class="literal">node.ingest</code>
</li>
<li class="listitem">
<code class="literal">node.master</code>
</li>
<li class="listitem">
<code class="literal">node.ml</code>
</li>
<li class="listitem">
<code class="literal">node.remote_cluster_client</code>
</li>
<li class="listitem">
<code class="literal">node.transform</code>
</li>
<li class="listitem">
<code class="literal">node.voting_only</code>
</li>
</ul>
</div>
<p>have been removed. Instead, use the <code class="literal">node.roles</code> setting. If you were previously
using the legacy role settings on a 7.13 or later cluster, you will have a
deprecation log message on each of your nodes indicating the exact replacement
value for <code class="literal">node.roles</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the removed settings. Specifying these settings in
<code class="literal">elasticsearch.yml</code> will result in an error on startup.</p>
</div>
</details>
<details id="system-call-filter-setting">
<summary class="title">The system call filter setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch uses system call filters to remove its ability to fork another
process. This is useful to mitigate remote code exploits. These system call
filters are enabled by default, and were previously controlled via the setting
<code class="literal">bootstrap.system_call_filter</code>. Starting in Elasticsearch 8.0, system call
filters will be required. As such, the setting <code class="literal">bootstrap.system_call_filter</code>
was deprecated in Elasticsearch 7.13.0, and is removed as of Elasticsearch
8.0.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the removed setting. Specifying this setting in Elasticsearch
configuration will result in an error on startup.</p>
</div>
</details>
<details id="tier-filter-setting">
<summary class="title">Tier filtering settings have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The cluster and index level settings ending in <code class="literal">._tier</code> used for filtering the allocation of a shard
to a particular set of nodes have been removed. Instead, the
<a href="/guide/en/elasticsearch/reference/master/data-tier-shard-filtering.html#tier-preference-allocation-filter" class="ulink" target="_top">tier
preference setting</a>, <code class="literal">index.routing.allocation.include._tier_preference</code> should
be used. The removed settings are:</p>
<p>Cluster level settings:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">cluster.routing.allocation.include._tier</code>
</li>
<li class="listitem">
<code class="literal">cluster.routing.allocation.exclude._tier</code>
</li>
<li class="listitem">
<code class="literal">cluster.routing.allocation.require._tier</code>
</li>
</ul>
</div>
<p>Index settings:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">index.routing.allocation.include._tier</code>
</li>
<li class="listitem">
<code class="literal">index.routing.allocation.exclude._tier</code>
</li>
<li class="listitem">
<code class="literal">index.routing.allocation.require._tier</code>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the removed settings. Specifying any of these cluster settings in Elasticsearch
configuration will result in an error on startup. Any indices using these settings will have the
settings archived (and they will have no effect) when the index metadata is loaded.</p>
</div>
</details>
<details id="shared-data-path-setting">
<summary class="title">Shared data path and per index data path settings are deprecated.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch uses the shared data path as the base path of per index data
paths. This feature was previously used with shared replicas. Starting in
7.13.0, these settings are deprecated. Starting in 8.0 only existing
indices created in 7.x will be capable of using the shared data path and
per index data path settings.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the deprecated settings.</p>
</div>
</details>
<details id="single-data-node-watermark-setting">
<summary class="title">The single data node watermark setting is deprecated and now only accepts <code class="literal">true</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 7.14, setting <code class="literal">cluster.routing.allocation.disk.watermark.enable_for_single_data_node</code>
to false was deprecated. Starting in 8.0, the only legal value will be
true. In a future release, the setting will be removed completely, with same
behavior as if the setting was <code class="literal">true</code>.</p>
<p>If the old behavior is desired for a single data node cluster, disk based
allocation can be disabled by setting
<code class="literal">cluster.routing.allocation.disk.threshold_enabled: false</code></p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the deprecated setting.</p>
</div>
</details>
<details id="auto-import-dangling-indices-removed">
<summary class="title">The <code class="literal">gateway.auto_import_dangling_indices</code> setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">gateway.auto_import_dangling_indices</code> cluster setting has been removed.
Previously, you could use this setting to automatically import
<a href="/guide/en/elasticsearch/reference/master/modules-gateway.html#dangling-indices" class="ulink" target="_top">dangling indices</a>. However,
automatically importing dangling indices is unsafe. Use the
<a href="/guide/en/elasticsearch/reference/master/indices.html#dangling-indices-api" class="ulink" target="_top">dangling indices APIs</a> to manage and
import dangling indices instead.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the removed setting. Specifying the setting in
<code class="literal">elasticsearch.yml</code> will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">listener</code> thread pool has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, the transport client used the thread pool to ensure listeners aren&#8217;t
called back on network threads. The transport client has been removed
in 8.0, and the thread pool is no longer needed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove <code class="literal">listener</code> thread pool settings from <code class="literal">elasticsearch.yml</code> for any nodes.
Specifying <code class="literal">listener</code> thread pool settings in <code class="literal">elasticsearch.yml</code> will result in
an error on startup.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">fixed_auto_queue_size</code> thread pool type has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">fixed_auto_queue_size</code> thread pool type, previously marked as an
experimental feature, was deprecated in 7.x and has been removed in 8.0.
The <code class="literal">search</code> and <code class="literal">search_throttled</code> thread pools have the <code class="literal">fixed</code> type now.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
No action needed.</p>
</div>
</details>
<details>
<summary class="title">Several <code class="literal">transport</code> settings have been replaced.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The following settings have been deprecated in 7.x and removed in 8.0. Each setting has a replacement
setting that was introduced in 6.7.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">transport.tcp.port</code> replaced by <code class="literal">transport.port</code>
</li>
<li class="listitem">
<code class="literal">transport.tcp.compress</code> replaced by <code class="literal">transport.compress</code>
</li>
<li class="listitem">
<code class="literal">transport.tcp.connect_timeout</code> replaced by <code class="literal">transport.connect_timeout</code>
</li>
<li class="listitem">
<code class="literal">transport.tcp_no_delay</code> replaced by <code class="literal">transport.tcp.no_delay</code>
</li>
<li class="listitem">
<code class="literal">transport.profiles.profile_name.tcp_no_delay</code> replaced by <code class="literal">transport.profiles.profile_name.tcp.no_delay</code>
</li>
<li class="listitem">
<code class="literal">transport.profiles.profile_name.tcp_keep_alive</code> replaced by <code class="literal">transport.profiles.profile_name.tcp.keep_alive</code>
</li>
<li class="listitem">
<code class="literal">transport.profiles.profile_name.reuse_address</code> replaced by <code class="literal">transport.profiles.profile_name.tcp.reuse_address</code>
</li>
<li class="listitem">
<code class="literal">transport.profiles.profile_name.send_buffer_size</code> replaced by <code class="literal">transport.profiles.profile_name.tcp.send_buffer_size</code>
</li>
<li class="listitem">
<code class="literal">transport.profiles.profile_name.receive_buffer_size</code> replaced by <code class="literal">transport.profiles.profile_name.tcp.receive_buffer_size</code>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the replacement settings. Discontinue use of the removed settings.
Specifying the removed settings in <code class="literal">elasticsearch.yml</code> will result in an error
on startup.</p>
</div>
</details>
<details>
<summary class="title">Selective transport compression has been enabled by default.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Prior to 8.0, transport compression was disabled by default. Starting in 8.0,
<code class="literal">transport.compress</code> defaults to <code class="literal">indexing_data</code>. This configuration means that
the propagation of raw indexing data will be compressed between nodes.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Inter-node transit will get reduced along the indexing path. In some scenarios,
CPU usage could increase.</p>
</div>
</details>
<details>
<summary class="title">Transport compression defaults to lz4.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Prior to 8.0, the <code class="literal">transport.compression_scheme</code> setting defaulted to <code class="literal">deflate</code>. Starting in
8.0,  <code class="literal">transport.compress_scheme</code> defaults to <code class="literal">lz4</code>.</p>
<p>Prior to 8.0, the <code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compression_scheme</code>
setting defaulted to <code class="literal">deflate</code> when <code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compress</code>
was explicitly configured. Starting in 8.0,
<code class="literal">cluster.remote.&lt;cluster_alias&gt;.transport.compression_scheme</code> will fallback to
<code class="literal">transport.compression_scheme</code> by default.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
This configuration means that transport compression will produce somewhat lower
compression ratios in exchange for lower CPU load.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">repositories.fs.compress</code> node-level setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
For shared file system repositories (<code class="literal">"type": "fs"</code>), the node level setting <code class="literal">repositories.fs.compress</code> could
previously be used to enable compression for all shared file system repositories where <code class="literal">compress</code> was not specified.
The <code class="literal">repositories.fs.compress</code> setting has been removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">repositories.fs.compress</code> node-level setting. Use the
repository-specific <code class="literal">compress</code> setting to enable compression instead. Refer to
<a href="/guide/en/elasticsearch/reference/master/snapshots-filesystem-repository.html#filesystem-repository-settings" class="ulink" target="_top">Shared
file system repository settings</a>.</p>
</div>
</details>
<details id="fips-default-hash-changed">
<summary class="title">When FIPS mode is enabled the default password hash is now PBKDF2_STRETCH</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
If <code class="literal">xpack.security.fips_mode.enabled</code> is true (see <a class="xref" href="fips-140-compliance.html" title="FIPS 140-2">FIPS 140-2</a>),
the value of <code class="literal">xpack.security.authc.password_hashing.algorithm</code> now defaults to
<code class="literal">pbkdf2_stretch</code>.</p>
<p>In earlier versions this setting would always default to <code class="literal">bcrypt</code> and a runtime
check would prevent a node from starting unless the value was explicitly set to
a "pbkdf2" variant.</p>
<p>There is no change for clusters that do not enable FIPS 140 mode.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
This change should not have any impact on upgraded nodes.
Any node with an explicitly configured value for the password hashing algorithm
will continue to use that configured value.
Any node that did not have an explicitly configured password hashing algorithm in
Elasticsearch 6.x or Elasticsearch 7.x would have failed to start.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">xpack.monitoring.history.duration</code> will not delete indices created by metricbeat or elastic agent</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br></p>
<p>Prior to 8.0, Elasticsearch would internally handle removal of all monitoring indices according to the
<code class="literal">xpack.monitoring.history.duration</code> setting.</p>
<p>When using metricbeat or elastic agent &gt;= 8.0 to collect monitoring data, indices are managed via an ILM policy. If the setting is present, the policy will be created using the <code class="literal">xpack.monitoring.history.duration</code> as an initial retention period.</p>
<p>If you need to customize retention settings for monitoring data collected with metricbeat, please update the <code class="literal">.monitoring-8-ilm-policy</code> ILM policy directly.</p>
<p>The <code class="literal">xpack.monitoring.history.duration</code> setting will only apply to monitoring indices written using (legacy) internal
collection, not indices created by metricbeat or agent.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
After upgrading, insure that the <code class="literal">.monitoring-8-ilm-policy</code> ILM policy aligns with your desired retention settings.</p>
<p>If you only use
metricbeat or agent to collect monitoring data, you can also remove any custom <code class="literal">xpack.monitoring.history.duration</code>
settings.</p>
</div>
</details>
<h4><a id="breaking_80_command_line_tool_changes"></a>Command line tool changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/command-line-tool-changes.asciidoc">edit</a></h4>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use Elasticsearch Service, skip this section. Elasticsearch Service handles these changes for you.</p>
</div>
</div>
<details id="migrate-tool-removed">
<summary class="title">The <code class="literal">elasticsearch-migrate</code> tool has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">elasticsearch-migrate</code> tool provided a way to convert file
realm users and roles into the native realm. It has been deprecated
since Elasticsearch 7.2.0. Users and roles should now be created in the native
realm directly.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">elasticsearch-migrate</code> tool. Attempts to use the
<code class="literal">elasticsearch-migrate</code> tool will result in an error.</p>
</div>
</details>
<h4><a id="breaking_80_index_setting_changes"></a>Index setting changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/index-setting-changes.asciidoc">edit</a></h4>
<details id="deprecation-system-indices">
<summary class="title">Direct access to system indices is deprecated.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Directly accessing system indices is deprecated, and may be prevented in a
future version. If you must access a system index, create a security role with
an index permission that targets the specific index and set the
<code class="literal">allow_restricted_indices</code> permission to <code class="literal">true</code>. Refer to
<a href="/guide/en/elasticsearch/reference/master/defining-roles.html#roles-indices-priv" class="ulink" target="_top">indices privileges</a> for
information on adding this permission to an index privilege.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Accessing system indices directly results in warnings in the header of API
responses. If available, use Kibana or the associated feature&#8217;s Elasticsearch APIs to
manage the data that you want to access.</p>
</div>
</details>
<details id="deprecate-max-merge-at-once-explicit-setting">
<summary class="title"><code class="literal">index.merge.policy.max_merge_at_once_explicit</code> is deprecated and has no effect.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">index.merge.policy.max_merge_at_once_explicit</code> index setting is deprecated
and has no effect.</p>
<p>Previously, you could specify <code class="literal">index.merge.policy.max_merge_at_once_explicit</code> to
set the maximum number of segments to merge at the same time during a force
merge or when expunging deleted documents. In 8.0, this number is unlimited,
regardless of the setting.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Specifying <code class="literal">index.merge.policy.max_merge_at_once_explicit</code> will have no effect
but will generate deprecation warnings.</p>
<p>To avoid these deprecation warnings, discontinue use of the setting. Don&#8217;t
specify the setting when creating new indices, and remove the setting from
index and component templates.</p>
<p>To remove the setting from an existing data stream or index, specify the
setting&#8217;s value as <code class="literal">null</code> using the update index settings API.</p>
<div class="pre_wrapper lang-ruby alternative">
<pre class="programlisting prettyprint lang-ruby alternative">response = client.indices.put_settings(
  index: 'my-index-000001',
  body: {
    "index.merge.policy.max_merge_at_once_explicit": nil
  }
)
puts response</pre>
</div>
<a id="2f67db5e4d6c958258c3d70fb2d0b1c8"></a>
<div class="pre_wrapper lang-console default has-ruby">
<pre class="programlisting prettyprint lang-console default has-ruby">PUT my-index-000001/_settings
{
  "index.merge.policy.max_merge_at_once_explicit": null
}</pre>
</div>
<div class="console_widget has-ruby" data-snippet="snippets/3049.console"></div>
</div>
</details>
<details id="index-max-adjacency-matrix-filters-removed">
<summary class="title">The <code class="literal">index.max_adjacency_matrix_filters</code> index setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">index.max_adjacency_matrix_filters</code> index setting has been removed.
Previously, you could use this setting to configure the maximum number of
filters for the
<a href="/guide/en/elasticsearch/reference/master/search-aggregations-bucket-adjacency-matrix-aggregation.html" class="ulink" target="_top">adjacency
matrix aggregation</a>. The <code class="literal">indices.query.bool.max_clause_count</code> index setting now
determines the maximum number of filters for the aggregation.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">index.max_adjacency_matrix_filters</code> index setting.</p>
<p>Requests that include the index setting will return an error. If you upgrade a
cluster with a 7.x index that already contains the setting, Elasticsearch will
<a href="/guide/en/elasticsearch/reference/master/archived-settings.html#archived-index-settings" class="ulink" target="_top">archive the setting</a>.</p>
<p>Remove the index setting from index and component templates. Attempts to use a
template that contains the setting will fail and return an error. This includes
automated operations, such the ILM rollover action.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">index.force_memory_term_dictionary</code> setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">index.force_memory_term_dictionary</code> setting was introduced in 7.0 as a
temporary measure to allow users to opt-out of the optimization that leaves the
term dictionary on disk when appropriate. This optimization is now mandatory
and the setting is removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">index.force_memory_term_dictionary</code> index setting.
Requests that include this setting will return an error.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">index.soft_deletes.enabled</code> setting has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Creating indices with soft deletes disabled was deprecated in 7.6 and
is no longer supported in 8.0. The <code class="literal">index.soft_deletes.enabled</code> setting
can no longer be set to <code class="literal">false</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">index.soft_deletes.enabled</code> index setting. Requests that
set <code class="literal">index.soft_deletes.enabled</code> to <code class="literal">false</code> will return an error.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">index.translog.retention.age</code> and <code class="literal">index.translog.retention.size</code> settings have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Translog retention settings <code class="literal">index.translog.retention.age</code> and
<code class="literal">index.translog.retention.size</code> were effectively ignored in 7.4, deprecated in
7.7, and removed in 8.0 in favor of
<a href="/guide/en/elasticsearch/reference/master/index-modules-history-retention.html" class="ulink" target="_top">soft deletes</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">index.translog.retention.age</code> and
<code class="literal">index.translog.retention.size</code> index settings. Requests that
include these settings will return an error.</p>
</div>
</details>
<h4><a id="breaking_80_java_api_changes"></a>Java API changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/java-api-changes.asciidoc">edit</a></h4>
<details id="ilm-hlrc-rename">
<summary class="title">The <code class="literal">indexlifecycle</code> package has been renamed <code class="literal">ilm</code> in the Java High Level REST Client.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In the high level REST client, the <code class="literal">indexlifecycle</code> package has been
renamed to <code class="literal">ilm</code> to match the package rename inside the Elasticsearch code.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your workflow and applications to use the <code class="literal">ilm</code> package in place of
<code class="literal">indexlifecycle</code>.</p>
</div>
</details>
<details>
<summary class="title">Changes to <code class="literal">Fuzziness</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
To create <code class="literal">Fuzziness</code> instances, use the <code class="literal">fromString</code> and <code class="literal">fromEdits</code> method
instead of the <code class="literal">build</code> method that used to accept both Strings and numeric
values. Several fuzziness setters on query builders (e.g.
MatchQueryBuilder#fuzziness) now accept only a `Fuzziness`instance instead of
an Object.</p>
<p>Fuzziness used to be lenient when it comes to parsing arbitrary numeric values
while silently truncating them to one of the three allowed edit distances 0, 1
or 2. This leniency is now removed and the class will throw errors when trying
to construct an instance with another value (e.g. floats like 1.3 used to get
accepted but truncated to 1).</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the available constants (e.g. <code class="literal">Fuzziness.ONE</code>, <code class="literal">Fuzziness.AUTO</code>) or build
your own instance using the above mentioned factory methods. Use only allowed
<code class="literal">Fuzziness</code> values.</p>
</div>
</details>
<details>
<summary class="title">Changes to <code class="literal">Repository</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Repository has no dependency on IndexShard anymore. The contract of restoreShard
and snapshotShard has been reduced to Store and MappingService in order to improve
testability.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
No action needed.</p>
</div>
</details>
<h4><a id="breaking_80_jvm_option_changes"></a>JVM option changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/jvm-option-changes.asciidoc">edit</a></h4>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use Elasticsearch Service, skip this section. Elasticsearch Service handles these changes for you.</p>
</div>
</div>
<details id="breaking_80_allocation_change_flood_stage_block_always_removed">
<summary class="title"><code class="literal">es.disk.auto_release_flood_stage_block</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
If a node exceeds the flood-stage disk watermark then we add a block to all of
its indices to prevent further writes as a last-ditch attempt to prevent the
node completely exhausting its disk space. By default, from 7.4 onwards the
block is automatically removed when a node drops below the high watermark
again, but this behaviour could be disabled by setting the system property
<code class="literal">es.disk.auto_release_flood_stage_block</code> to <code class="literal">false</code>. This behaviour is no
longer optional, and this system property must now not be set.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">es.disk.auto_release_flood_stage_block</code> system property.
Setting this system property will result in an error on startup.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">es.rest.url_plus_as_space</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Starting in version 7.4, a <code class="literal">+</code> in a URL will be encoded as <code class="literal">%2B</code> by all REST API functionality. Prior versions handled a <code class="literal">+</code> as a single space.
In these previous versions, if your application required handling <code class="literal">+</code> as a single space, you could return to the old behaviour by setting the system property
<code class="literal">es.rest.url_plus_as_space</code> to <code class="literal">true</code>. Note that this behaviour is deprecated and setting this system property to <code class="literal">true</code> will cease
to be supported in version 8.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your application or workflow to assume <code class="literal">+</code> in a URL is encoded as <code class="literal">%2B</code>.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">es.unsafely_permit_handshake_from_incompatible_builds</code> has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch has a check that verifies that communicating pairs of nodes of the same
version are running exactly the same build and therefore using the same wire
format as each other. In previous versions this check can be bypassed by
setting the system property
<code class="literal">es.unsafely_permit_handshake_from_incompatible_builds</code> to <code class="literal">true</code>. The use of
this system property is now forbidden.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">es.unsafely_permit_handshake_from_incompatible_builds</code>
system property, and ensure that all nodes of the same version are running
exactly the same build. Setting this system property will result in an error
on startup.</p>
</div>
</details>
<h4><a id="breaking_80_logging_changes"></a>Logging changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/logging-changes.asciidoc">edit</a></h4>
<details>
<summary class="title">Elasticsearch JSON logs now comply with ECS.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch&#8217;s <a href="/guide/en/elasticsearch/reference/master/logging.html" class="ulink" target="_top">JSON logs</a> now comply with the
<a href="/guide/en/ecs/8.9/index.html" class="ulink" target="_top">Elastic Common Schema (ECS)</a>. Previously, Elasticsearch&#8217;s JSON logs
used a custom schema.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If your application parses Elasticsearch&#8217;s JSON logs, update it to support the new ECS
format.</p>
</div>
</details>
<details>
<summary class="title">Elasticsearch no longer emits deprecation logs or slow logs in plaintext.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch no longer emits a plaintext version of the following logs:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Deprecation logs
</li>
<li class="listitem">
Indexing slow logs
</li>
<li class="listitem">
Search slow logs
</li>
</ul>
</div>
<p>These logs are now only available in JSON.</p>
<p>Server logs are still available in both a JSON and plaintext format.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If your application parses Elasticsearch&#8217;s plaintext logs, update it to use the new ECS
JSON logs.</p>
</div>
</details>
<details id="audit-logs-are-rolled-over-and-archived-by-size">
<summary class="title">Audit logs are rolled-over and archived by size.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In addition to the existing daily rollover, the security audit logs are
now rolled-over by disk size limit as well. Moreover, the rolled-over logs
are also gzip compressed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
The names of rolled over audit log files (but not the name of the current log)
have changed.
If you&#8217;ve set up automated tools to consume these files, you must configure them
to use the new names and to possibly account for <code class="literal">gzip</code> archives instead of
plain text. The Docker build of Elasticsearch is not affected because it logs on <code class="literal">stdout</code>,
where rollover is not performed.</p>
</div>
</details>
<h4><a id="breaking_80_mapping_changes"></a>Mapping changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/mapping-changes.asciidoc">edit</a></h4>
<details>
<summary class="title">Indices created in Elasticsearch 6.x and earlier versions are not supported.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch 8.0 can read indices created in version 7.0 or above. An
Elasticsearch 8.0 node will not start in the presence of indices created in a
version of Elasticsearch before 7.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Reindex indices created in Elasticsearch 6.x or before with Elasticsearch 7.x if they need to be carried forward to  Elasticsearch 8.x.</p>
</div>
</details>
<details>
<summary class="title">Closed indices created in Elasticsearch 6.x and earlier versions are not supported.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In earlier versions a node would start up even if it had data from indices
created in a version before the previous major version, as long as those
indices were closed. Elasticsearch now ensures that it is compatible with every index,
open or closed, at startup time.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Reindex closed indices created in Elasticsearch 6.x or before with Elasticsearch 7.x if they need
to be carried forward to Elasticsearch 8.x.</p>
</div>
</details>
<details>
<summary class="title">The maximum number of completion contexts per field is now 10.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The number of completion contexts within a single completion field
has been limited to 10.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use a maximum of 10 completion contexts in a completion field. Specifying more
than 10 completion contexts will return an error.</p>
</div>
</details>
<details>
<summary class="title">Multi-fields within multi-fields is no longer supported.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, it was possible to define a multi-field within a multi-field.
Defining chained multi-fields was deprecated in 7.3 and is now no longer
supported.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To migrate mappings, all instances of <code class="literal">fields</code> that occur within
a <code class="literal">fields</code> block should be removed, either by flattening the chained <code class="literal">fields</code>
blocks into a single level, or by switching to <code class="literal">copy_to</code> if appropriate.</p>
</div>
</details>
<details id="fieldnames-enabling">
<summary class="title">The <code class="literal">_field_names</code> metadata field&#8217;s <code class="literal">enabled</code> parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The setting has been deprecated with 7.5 and is no longer supported on new indices.
Mappings for older indices will continue to work but emit a deprecation warning.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
The <code class="literal">enabled</code> setting for <code class="literal">_field_names</code> should be removed from templates and mappings.
Disabling _field_names is not necessary because it no longer carries a large index overhead.</p>
</div>
</details>
<details id="mapping-boosts">
<summary class="title">The <code class="literal">boost</code> parameter on field mappings has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Index-time boosts have been deprecated since the 5x line, but it was still possible
to declare field-specific boosts in the mappings. This is now removed completely.
Indexes built in 7x that contain mapping boosts will emit warnings, and the boosts
will have no effect in 8.0. New indexes will not permit boosts to be set in their
mappings at all.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
The <code class="literal">boost</code> setting should be removed from templates and mappings. Use boosts
directly on queries instead.</p>
</div>
</details>
<details>
<summary class="title">Java-time date formats replace joda-time formats.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 7.0, Elasticsearch switched from joda time to java time for date-related parsing,
formatting, and calculations. Indices created in 7.0 and later versions are
already required to use mappings with java-time date formats. However,
earlier indices using joda-time formats must be reindexed to use
mappings with java-time formats.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
For a detailed migration guide, see the <a href="/guide/en/elasticsearch/reference/master/migrate-to-java-time.html" class="ulink" target="_top">Java
time migration guide</a>.</p>
</div>
</details>
<details id="geo-shape-strategy">
<summary class="title">Several <code class="literal">geo_shape</code> mapping parameters have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The following <code class="literal">geo_shape</code> mapping parameters were deprecated in 6.6:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">tree</code>
</li>
<li class="listitem">
<code class="literal">tree_levels</code>
</li>
<li class="listitem">
<code class="literal">strategy</code>
</li>
<li class="listitem">
<code class="literal">distance_error_pct</code>
</li>
</ul>
</div>
<p>These parameters have been removed in 8.0.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
In 8.0, you can no longer create mappings that include these parameters.
However, 7.x indices that use these mapping parameters will continue to work.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">sparse_vector</code> field data type has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">sparse_vector</code> field type was deprecated in 7.6 and is now removed in
8.0. We have not seen much interest in this experimental field type, and don&#8217;t
see a clear use case as it&#8217;s currently designed. If you have feedback or
suggestions around sparse vector functionality, please let us know through
GitHub or the <em>discuss</em> forums.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">sparse_vector</code> field data type. Requests containing
a mapping for this field data type will return an error.</p>
</div>
</details>
<h4><a id="breaking_80_packaging_changes"></a>Packaging changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/packaging-changes.asciidoc">edit</a></h4>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use Elasticsearch Service, skip this section. Elasticsearch Service handles these changes for you.</p>
</div>
</div>
<details>
<summary class="title">The layout of the data folder has changed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Each node&#8217;s data is now stored directly in the data directory set by the
<code class="literal">path.data</code> setting, rather than in <code class="literal">${path.data}/nodes/0</code>, because the removal
of the <code class="literal">node.max_local_storage_nodes</code> setting means that nodes may no longer
share a data path.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
At startup, Elasticsearch will automatically migrate the data path to the new layout.
This automatic migration will not proceed if the data path contains data for
more than one node. You should move to a configuration in which each node has
its own data path before upgrading.</p>
<p>If you try to upgrade a configuration in which there is data for more than one
node in a data path then the automatic migration will fail and Elasticsearch
will refuse to start. To resolve this you will need to perform the migration
manually. The data for the extra nodes are stored in folders named
<code class="literal">${path.data}/nodes/1</code>, <code class="literal">${path.data}/nodes/2</code> and so on, and you should move
each of these folders to an appropriate location and then configure the
corresponding node to use this location for its data path. If your nodes each
have more than one data path in their <code class="literal">path.data</code> settings then you should move
all the corresponding subfolders in parallel. Each node uses the same subfolder
(e.g. <code class="literal">nodes/2</code>) across all its data paths.</p>
</div>
</details>
<details>
<summary class="title">The default Maxmind geoip databases have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The default Maxmind geoip databases that shipped by default with Elasticsearch
have been removed. These databases are out dated and stale and using these
databases will likely result in incorrect geoip lookups.</p>
<p>By default since 7.13, these pre-packaged geoip databases
were used in case no database were specified in the config directory or before
the geoip downloader downloaded the geoip databases. When the geoip database
downloader completed downloading the new databases then these pre-packaged
databases were no longer used.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If the geoip downloader is disabled and no geoip databases are provided
in the config directory of each ingest node then the geoip processor will
no longer perform geoip lookups and tag these documents with the fact that
the requested database is no longer available.</p>
<p>After a cluster has been started and before the geoip downloader has completed
downloading the most up to data databases, the geoip processor will not perform
any geoip lookups and tag documents that the requested database is not available.
After the geoip downloader has completed downloading the most up to data databases
then the geoip processor will function as normal. The window of time that the
geoip processor can&#8217;t do geoip lookups after cluster startup should be very small.</p>
</div>
</details>
<h4><a id="breaking_80_painless_changes"></a>Painless changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/painless-changes.asciidoc">edit</a></h4>
<details>
<summary class="title">The <code class="literal">JodaCompatibleZonedDateTime</code> class has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
As a transition from Joda datetime to Java datetime, scripting used
an intermediate class called <code class="literal">JodaCompatibleZonedDateTime</code>. This class
has been removed and is replaced by <code class="literal">ZonedDateTime</code>. Any use of casting
to a <code class="literal">JodaCompatibleZonedDateTime</code> or use of method calls only available
in <code class="literal">JodaCompatibleZonedDateTime</code> in a script will result in a compilation
error, and may not allow the upgraded node to start.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Before upgrading, replace <code class="literal">getDayOfWeek</code> with <code class="literal">getDayOfWeekEnum().value</code> in any
scripts. Any use of <code class="literal">getDayOfWeek</code> expecting a return value of <code class="literal">int</code> will result
in a compilation error or runtime error and may not allow the upgraded node to
start.</p>
<p>The following <code class="literal">JodaCompatibleZonedDateTime</code> methods must be replaced using
<code class="literal">ZonedDateTime</code> methods prior to upgrade:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">getMillis()</code> &#8594; <code class="literal">toInstant().toEpochMilli()</code>
</li>
<li class="listitem">
<code class="literal">getCenturyOfEra()</code> &#8594; <code class="literal">get(ChronoField.YEAR_OF_ERA) / 100</code>
</li>
<li class="listitem">
<code class="literal">getEra()</code> &#8594; <code class="literal">get(ChronoField.ERA)</code>
</li>
<li class="listitem">
<code class="literal">getHourOfDay()</code> &#8594; <code class="literal">getHour()</code>
</li>
<li class="listitem">
<code class="literal">getMillisOfDay()</code> &#8594; <code class="literal">get(ChronoField.MILLI_OF_DAY)</code>
</li>
<li class="listitem">
<code class="literal">getMillisOfSecond()</code> &#8594; <code class="literal">get(ChronoField.MILLI_OF_SECOND)</code>
</li>
<li class="listitem">
<code class="literal">getMinuteOfDay()</code> &#8594; <code class="literal">get(ChronoField.MINUTE_OF_DAY)</code>
</li>
<li class="listitem">
<code class="literal">getMinuteOfHour()</code> &#8594; <code class="literal">getMinute()</code>
</li>
<li class="listitem">
<code class="literal">getMonthOfYear()</code> &#8594; <code class="literal">getMonthValue()</code>
</li>
<li class="listitem">
<code class="literal">getSecondOfDay()</code> &#8594; <code class="literal">get(ChronoField.SECOND_OF_DAY)</code>
</li>
<li class="listitem">
<code class="literal">getSecondOfMinute()</code> &#8594; <code class="literal">getSecond()</code>
</li>
<li class="listitem">
<code class="literal">getWeekOfWeekyear()</code> &#8594; <code class="literal">get(IsoFields.WEEK_OF_WEEK_BASED_YEAR)</code>
</li>
<li class="listitem">
<code class="literal">getWeekyear()</code> &#8594; <code class="literal">get(IsoFields.WEEK_BASED_YEAR)</code>
</li>
<li class="listitem">
<code class="literal">getYearOfCentury()</code> &#8594; <code class="literal">get(ChronoField.YEAR_OF_ERA) % 100</code>
</li>
<li class="listitem">
<code class="literal">getYearOfEra()</code> &#8594; <code class="literal">get(ChronoField.YEAR_OF_ERA)</code>
</li>
<li class="listitem">
<code class="literal">toString(String)</code> &#8594; a DateTimeFormatter
</li>
<li class="listitem">
<code class="literal">toString(String, Locale)</code> &#8594; a DateTimeFormatter
</li>
</ul>
</div>
</div>
</details>
<h4><a id="breaking_80_plugin_changes"></a>Plugin changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/plugin-changes.asciidoc">edit</a></h4>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use Elasticsearch Service, skip this section. Elasticsearch Service handles these changes for you.</p>
</div>
</div>
<details>
<summary class="title">The S3, GCS and Azure repository plugins are now included in Elasticsearch</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In previous versions of Elasticsearch, in order to register a snapshot repository
backed by Amazon S3, Google Cloud Storage (GCS) or Microsoft Azure Blob
Storage, you first had to install the corresponding Elasticsearch plugin,
for example <code class="literal">repository-s3</code>. These plugins are now included in Elasticsearch by
default.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
You no longer need to install the following plugins, and not should attempt
to do so.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">repository-azure</code>
</li>
<li class="listitem">
<code class="literal">repository-gcs</code>
</li>
<li class="listitem">
<code class="literal">repository-s3</code>
</li>
</ul>
</div>
<p>Elasticsearch and the <code class="literal">elasticsearch-plugin</code> CLI tool have been changed to tolerate
attempted installation and removal of these plugins in order to avoid
breaking any existing automation. In the future, attempting to install
these plugins will be an error.</p>
<p>Specifically, the <code class="literal">elasticsearch-plugin</code> CLI tool will not fail if you
attempt to install any of the above plugins, and will instead print a
warning and skip the plugins. If any of these plugins are already
installed, for example because you installed them when running an older
version of Elasticsearch, then you can still remove them with
<code class="literal">elasticsearch-plugin</code>. Attempting to remove them if they are not installed
will succeed but print a warnings.</p>
<p>If you run Elasticsearch using Docker and you are managing plugins using a
<a href="/guide/en/elasticsearch/plugins/master/manage-plugins-using-configuration-file.html" class="ulink" target="_top">configuration file</a>, then when
Elasticsearch first starts after you upgrade it, it will remove the above plugins if
they already installed. If any of these plugins are specified in your
configuration file, Elasticsearch will ignore them and emit a warning log message.</p>
</div>
</details>
<details>
<summary class="title">Third party plugins can no longer intercept REST requests (<code class="literal">RestHandlerWrapper</code>)</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In previous versions of Elasticsearch, third-party plugins could implement the
<code class="literal">getRestHandlerWrapper</code> method to intercept all REST requests to the node. A
common use of this feature was to implement custom security plugins to replace
the built-in security features. This extension point is no longer available
to third-party plugins.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Some third-party plugins that were designed to work with earlier versions of
Elasticsearch might not be compatible with Elasticsearch version 8.0 or later.</p>
<p>If you depend on any plugins that are not produced and supported by Elastic,
check with the plugin author and ensure that the plugin is available for your
target version of Elasticsearch before upgrading.</p>
</div>
</details>
<h4><a id="breaking_80_rest_api_changes"></a>REST API changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/rest-api-changes.asciidoc">edit</a></h4>
<details>
<summary class="title">REST API endpoints containing <code class="literal">_xpack</code> have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 7.0, we deprecated REST endpoints that contain <code class="literal">_xpack</code> in their path. These
endpoints are now removed in 8.0. Each endpoint that was deprecated and removed
is replaced with a new endpoint that does not contain <code class="literal">_xpack</code>. As an example,
<code class="literal">/{index}/_xpack/graph/_explore</code> is replaced by <code class="literal">/{index}/_graph/explore</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the replacement REST API endpoints. Requests submitted to the <code class="literal">_xpack</code>
API endpoints will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, any requests that include
the`_xpack` prefix are rerouted to the corresponding URL without the <code class="literal">_xpack</code>
prefix.</p>
</div>
</details>
<details id="remove-mapping-type-api-endpoints">
<summary class="title">REST API endpoints containing mapping types have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Mapping types have been removed. API endpoints that contain a mapping type have
also been removed. Use a typeless endpoint instead.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">API</th>
<th align="left" valign="top">Typed API endpoint</th>
<th align="left" valign="top">Typeless API endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-bulk.html" class="ulink" target="_top">Bulk</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_bulk</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_bulk</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/search-count.html" class="ulink" target="_top">Count</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_count</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_count</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-delete.html" class="ulink" target="_top">Delete</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/&lt;_id&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_doc/&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-delete-by-query.html" class="ulink" target="_top">Delete by query</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_delete_by_query</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_delete_by_query</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/search-explain.html" class="ulink" target="_top">Explain</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/&lt;_id&gt;/_explain</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_explain/&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-get.html" class="ulink" target="_top">Get</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/&lt;_id&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_doc/&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/&lt;_id&gt;/_source</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_source/&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/indices-get-field-mapping.html" class="ulink" target="_top">Get field mapping</a></p></td>
<td align="left" valign="top"><p><code class="literal">_mapping/&lt;type&gt;/field/&lt;field&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">_mapping/field/&lt;field&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping/&lt;type&gt;/field/&lt;field&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping/field/&lt;field&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/indices-get-mapping.html" class="ulink" target="_top">Get mapping</a></p></td>
<td align="left" valign="top"><p><code class="literal">_mapping/&lt;type&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">_mapping</code> or <code class="literal">&lt;target&gt;/_mapping</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_mapping</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping/&lt;type&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/graph-explore-api.html" class="ulink" target="_top">Graph explore</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/_graph/explore</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_graph/explore</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-index_.html" class="ulink" target="_top">Index</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/&lt;_id&gt;/_create</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_create/&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_doc</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/&lt;_id&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_doc/&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-multi-get.html" class="ulink" target="_top">Multi get</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/_mget</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_mget</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/search-multi-search.html" class="ulink" target="_top">Multi search</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_msearch</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_msearch</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/multi-search-template.html" class="ulink" target="_top">Multi search template</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_msearch/template</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_msearch/template</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-multi-termvectors.html" class="ulink" target="_top">Multi term vectors</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/_mtermvectors</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_mtermvectors</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/rollup-search.html" class="ulink" target="_top">Rollup search</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_rollup_search</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_rollup_search</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/search-search.html" class="ulink" target="_top">Search</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_search</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_search</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/search-template-api.html" class="ulink" target="_top">Search template</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_search/template</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_search/template</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-termvectors.html" class="ulink" target="_top">Term vectors</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;mapping_type&gt;/&lt;_id&gt;/_termvectors</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_termvectors&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;mapping_type&gt;/_termvectors</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_termvectors</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-update.html" class="ulink" target="_top">Update</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/&lt;type&gt;/&lt;_id&gt;/_update</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;index&gt;/_update/&lt;_id&gt;</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/docs-update-by-query.html" class="ulink" target="_top">Update by query</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_update_by_query</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_update_by_query</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/indices-put-mapping.html" class="ulink" target="_top">Update mapping</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_mapping</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping/&lt;type&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p><code class="literal">_mapping/&lt;type&gt;</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_mapping</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a href="/guide/en/elasticsearch/reference/master/search-validate.html" class="ulink" target="_top">Validate</a></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/&lt;type&gt;/_validate/query</code></p></td>
<td align="left" valign="top"><p><code class="literal">&lt;target&gt;/_validate/query</code></p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your application to use typeless REST API endpoints. Requests to
endpoints that contain a mapping type will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, if a request includes a custom
mapping type it is ignored. The request is rerouted to the corresponding
typeless URL. Custom mapping types in request bodies and type related HTTP
parameters are ignored, and responses, where warranted, include <code class="literal">_type</code> :
<code class="literal">_doc</code>.</p>
</div>
</details>
<details>
<summary class="title">Cross-cluster search (CCS) is now only backward-compatible with the previous minor version.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 8.0+, Elastic supports searches from a local cluster to a remote cluster
running:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The previous minor version.
</li>
<li class="listitem">
The same version.
</li>
<li class="listitem">
A newer minor version in the same major version.
</li>
</ul>
</div>
<p>Elastic also supports searches from a local cluster running the last minor
version of a major version to a remote cluster running any minor version in the
following major version. For example, a local 7.17 cluster can search any
remote 8.x cluster.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
<col class="col_6"/>
<col class="col_7"/>
<col class="col_8"/>
<col class="col_9"/>
<col class="col_10"/>
<col class="col_11"/>
<col class="col_12"/>
<col class="col_13"/>
<col class="col_14"/>
</colgroup>
<tbody>
<tr>
<td align="center" valign="top"><p></p></td>
<td align="center" colspan="13" valign="top"><p><span class="strong strong"><strong>Remote cluster version</strong></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p><span class="strong strong"><strong>Local cluster version</strong></span></p></td>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p>8.0</p></td>
<td align="center" valign="top"><p>8.1</p></td>
<td align="center" valign="top"><p>8.2</p></td>
<td align="center" valign="top"><p>8.3</p></td>
<td align="center" valign="top"><p>8.4</p></td>
<td align="center" valign="top"><p>8.5</p></td>
<td align="center" valign="top"><p>8.6</p></td>
<td align="center" valign="top"><p>8.7</p></td>
<td align="center" valign="top"><p>8.8</p></td>
<td align="center" valign="top"><p>8.9</p></td>
</tr>
<tr>
<td align="center" valign="top"><p>6.8</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.1–7.16</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>7.17</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.0</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.1</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.2</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.3</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.4</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.5</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.6</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.7</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.8</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
<tr>
<td align="center" valign="top"><p>8.9</p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-no.png" alt="No" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
<td align="center" valign="top"><p><span class="image"><img src="https://doc-icons.s3.us-east-2.amazonaws.com/icon-yes.png" alt="Yes" width="20" height="15"></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>For the <a href="/guide/en/elasticsearch/reference/master/eql-search-api.html" class="ulink" target="_top">EQL search API</a>, the local and
remote clusters must use the same Elasticsearch version if they have versions prior to 7.17.7 (included) or prior to 8.5.1 (included).</p>
</div>
</div>
<p>For example, a local 8.0 cluster can search a remote 7.17 or any remote 8.x
cluster. However, a search from a local 8.0 cluster to a remote 7.16 or 6.8
cluster is not supported.</p>
<p>Previously, we also supported searches on remote clusters running:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Any minor version of the local cluster&#8217;s major version.
</li>
<li class="listitem">
The last minor release of the previous major version.
</li>
</ul>
</div>
<p>However, such searches can result in undefined behavior.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If you only run cross-cluster searches on remote clusters using the same or a
newer version, no changes are needed.</p>
<p>If you previously searched remote clusters running an earlier version of Elasticsearch,
see <a href="/guide/en/elasticsearch/reference/master/modules-cross-cluster-search.html#ensure-ccs-support" class="ulink" target="_top">Ensure cross-cluster search
support</a> for recommended solutions.</p>
<p>A cross-cluster search using an unsupported configuration may still work. However, such
searches aren&#8217;t tested by Elastic, and their behavior isn&#8217;t guaranteed.</p>
</div>
</details>
<details id="remove-term-order-key">
<summary class="title">The <code class="literal">terms</code> aggregation no longer supports the <code class="literal">_term</code> order key.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">terms</code> aggregation no longer supports the <code class="literal">_term</code> key in <code class="literal">order</code> values. To
sort buckets by their term, use <code class="literal">_key</code> instead.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">_term</code> order key. Requests that include a <code class="literal">_term</code> order
key will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">_term</code> order is ignored and
<code class="literal">key</code> is used instead.</p>
</div>
</details>
<details id="remove-time-order-key">
<summary class="title">The <code class="literal">date_histogram</code> aggregation no longer supports the <code class="literal">_time</code> order key.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">date_histogram</code> aggregation no longer supports the <code class="literal">_time</code> key in <code class="literal">order</code>
values. To sort buckets by their key, use <code class="literal">_key</code> instead.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">_time</code> order key. Requests that include a <code class="literal">_time</code> order
key will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">_time</code> order is ignored and
<code class="literal">_key</code> is used instead.</p>
</div>
</details>
<details id="remove-moving-avg-agg">
<summary class="title">The <code class="literal">moving_avg</code> aggregation has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">moving_avg</code> aggregation was deprecated in 6.4 and has been removed. To
calculate moving averages, use the
<a href="/guide/en/elasticsearch/reference/master/search-aggregations-pipeline-movfn-aggregation.html" class="ulink" target="_top"><code class="literal">moving_fn</code>
aggregation</a> instead.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">moving_avg</code> aggregation. Requests that include the
<code class="literal">moving_avg</code> aggregation will return an error.</p>
</div>
</details>
<details id="percentile-duplication">
<summary class="title">The <code class="literal">percentiles</code> aggregation&#8217;s <code class="literal">percents</code> parameter no longer supports duplicate values.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
If you specify the <code class="literal">percents</code> parameter with the
<a href="/guide/en/elasticsearch/reference/master/search-aggregations-metrics-percentile-aggregation.html" class="ulink" target="_top"><code class="literal">percentiles</code> aggregation</a>,
its values must be unique. Otherwise, an exception occurs.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use unique values in the <code class="literal">percents</code> parameter of the <code class="literal">percentiles</code> aggregation.
Requests containing duplicate values in the <code class="literal">percents</code> parameter will return
an error.</p>
</div>
</details>
<details id="date-histogram-interval">
<summary class="title">The <code class="literal">date_histogram</code> aggregation&#8217;s <code class="literal">interval</code> parameter is no longer valid.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
It is now an error to specify the <code class="literal">interval</code> parameter to the
<a href="/guide/en/elasticsearch/reference/master/search-aggregations-bucket-datehistogram-aggregation.html" class="ulink" target="_top"><code class="literal">date_histogram</code>
aggregation</a> or the
<a href="/guide/en/elasticsearch/reference/master/search-aggregations-bucket-composite-aggregation.html#_date_histogram" class="ulink" target="_top">https://www.elastic.co/guide/en/elasticsearch/reference/master/search-aggregations-bucket-composite-aggregation.html#_date_histogram</a>[<code class="literal">composite
date_histogram</code> source.  Instead, please use either <code class="literal">calendar_interval</code> or
<code class="literal">fixed_interval</code> as appropriate.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Uses of the <code class="literal">interval</code> parameter in either the <code class="literal">date_histogram</code> aggregation or
the <code class="literal">date_histogram</code> composite source will now generate an error.  Instead
please use the more specific <code class="literal">fixed_interval</code> or <code class="literal">calendar_interval</code>
parameters.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">interval</code> parameter is
adapted to either a fixed or calendar interval.</p>
</div>
</details>
<details id="ngram-edgengram-filter-names-removed">
<summary class="title">The <code class="literal">nGram</code> and <code class="literal">edgeNGram</code> token filter names have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">nGram</code> and <code class="literal">edgeNGram</code> token filter names that have been deprecated since
version 6.4 have been removed. Both token filters can only be used by their
alternative names <code class="literal">ngram</code> and <code class="literal">edge_ngram</code> since version 7.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the equivalent <code class="literal">ngram</code> and <code class="literal">edge_ngram</code> token filters. Requests containing
the <code class="literal">nGram</code> and <code class="literal">edgeNGram</code> token filter names will return an error.</p>
</div>
</details>
<details id="nGram-edgeNGram-tokenizer-dreprecation">
<summary class="title">The <code class="literal">nGram</code> and <code class="literal">edgeNGram</code> tokenizer names have been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">nGram</code> and <code class="literal">edgeNGram</code> tokenizer names haven been deprecated with 7.6 and are no longer
supported on new indices. Mappings for indices created after 7.6 will continue to work but
emit a deprecation warning. The tokenizer name should be changed to the fully equivalent
<code class="literal">ngram</code> or <code class="literal">edge_ngram</code> names for new indices and in index templates.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <code class="literal">ngram</code> and <code class="literal">edge_ngram</code> tokenizers. Requests to create new indices
using the <code class="literal">nGram</code> and <code class="literal">edgeNGram</code> tokenizer names will return an error.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">in_flight_requests</code> stat has been renamed <code class="literal">inflight_requests</code> in logs and diagnostic APIs.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The name of the in flight requests circuit breaker in log output and diagnostic APIs (such as the node stats API) changes from <code class="literal">in_flight_requests</code> to <code class="literal">inflight_requests</code> to align it with the name of the corresponding settings.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your workflow and applications to use the <code class="literal">inflight_requests</code> stat in
place of <code class="literal">in_flight_requests</code>.</p>
</div>
</details>
<details>
<summary class="title">The voting configuration exclusions API endpoint has changed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">POST /_cluster/voting_config_exclusions/{node_filter}</code> API has been
removed in favour of <code class="literal">POST /_cluster/voting_config_exclusions?node_names=...</code>
and <code class="literal">POST /_cluster/voting_config_exclusions?node_ids=...</code> which allow you to
specify the names or IDs of the nodes to exclude.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use <code class="literal">POST /_cluster/voting_config_exclusions?node_ids=...</code> and specify the nodes
to exclude instead of using a node filter. Requests submitted to the
<code class="literal">/_cluster/voting_config_exclusions/{node_filter}</code> endpoint will return an
error.</p>
</div>
</details>
<details>
<summary class="title">Remote system indices are not followed automatically if they match an auto-follow pattern.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Remote system indices matching an <a href="/guide/en/elasticsearch/reference/master/ccr-auto-follow.html" class="ulink" target="_top">auto-follow
pattern</a> won&#8217;t be configured as a follower index automatically.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Explicitly <a href="/guide/en/elasticsearch/reference/master/ccr-put-follow.html" class="ulink" target="_top">create a follower index</a> to follow a remote
system index if that&#8217;s the wanted behaviour.</p>
</div>
</details>
<details>
<summary class="title">The EQL <code class="literal">wildcard</code> function has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">wildcard</code> function was deprecated in Elasticsearch 7.13.0 and has been removed.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <code class="literal">like</code> or <code class="literal">regex</code> <a href="/guide/en/elasticsearch/reference/master/eql-syntax.html#eql-syntax-pattern-comparison-keywords" class="ulink" target="_top">keywords</a> instead.</p>
</div>
</details>
<details id="ilm-freeze-noop">
<summary class="title">The ILM <code class="literal">freeze</code> action is now a no-op.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The ILM freeze action is now a no-op and performs no action on the index, as the freeze API endpoint
has been removed in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your ILM policies to remove the <code class="literal">freeze</code> action from the <code class="literal">cold</code> phase.</p>
</div>
</details>
<details id="ilm-policy-validation">
<summary class="title">Additional validation for ILM policies.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Creating or updating an ILM policy now requires that any referenced snapshot repositories and SLM
policies exist.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your code or configuration management to ensure that repositories and SLM policies are created
before any policies that reference them.</p>
</div>
</details>
<details>
<summary class="title">The deprecated <code class="literal">_upgrade</code> API has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, the <code class="literal">_upgrade</code> API upgraded indices from the previous major
version to the current version. The <code class="literal">_reindex</code> API should be used
instead for that purpose.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Requests made to the old <code class="literal">_upgrade</code> API will return an error.</p>
</div>
</details>
<details>
<summary class="title">The deprecated freeze index API has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The freeze index API (<code class="literal">POST /&lt;index&gt;/_freeze</code>) has been removed.
<a href="/blog/significantly-decrease-your-elasticsearch-heap-memory-usage" class="ulink" target="_top">Improvements
in heap memory usage</a> have eliminated the reason to freeze indices.
You can still unfreeze existing frozen indices using the
<a href="/guide/en/elasticsearch/reference/master/unfreeze-index-api.html" class="ulink" target="_top">unfreeze index API</a>. For some use cases, the
frozen tier may be a suitable replacement for frozen indices. See
<a href="/guide/en/elasticsearch/reference/master/data-tiers.html" class="ulink" target="_top">data tiers</a> for more information.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Requests made to the old freeze index API will return an error.</p>
</div>
</details>
<details>
<summary class="title">The force merge API&#8217;s <code class="literal">max_num_segments</code> and <code class="literal">only_expunge_deletes</code> parameters cannot both be specified in the same request.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, the force merge API allowed the parameters <code class="literal">only_expunge_deletes</code>
and <code class="literal">max_num_segments</code> to be set to a non default value at the same time. But
the <code class="literal">max_num_segments</code> was silently ignored when <code class="literal">only_expunge_deletes</code> is set
to <code class="literal">true</code>, leaving the false impression that it has been applied.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
When using the <a href="/guide/en/elasticsearch/reference/master/indices-forcemerge.html" class="ulink" target="_top">force merge API</a>, do not specify
values for both the <code class="literal">max_num_segments</code> and <code class="literal">only_expunge_deletes</code> parameters.
Requests that include values for both parameters will return an error.</p>
</div>
</details>
<details>
<summary class="title">The create or update index template API&#8217;s <code class="literal">template</code> parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 6.0, we deprecated the <code class="literal">template</code> parameter in create or update index
template requests in favor of using <code class="literal">index_patterns</code>. Support for the <code class="literal">template</code>
parameter is now removed in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <a href="/guide/en/elasticsearch/reference/master/indices-templates-v1.html" class="ulink" target="_top">create or update index template API</a>'s
<code class="literal">index_patterns</code> parameter. Requests that include the <code class="literal">template</code> parameter will
return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">template</code> parameter is mapped
to <code class="literal">index_patterns</code>.</p>
</div>
</details>
<details>
<summary class="title">Synced flush has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Synced flush was deprecated in 7.6 and is removed in 8.0. Use a regular flush
instead as it has the same effect as a synced flush in 7.6 and later.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <a href="/guide/en/elasticsearch/reference/master/indices-flush.html" class="ulink" target="_top">flush API</a>. Requests to the
<code class="literal">/&lt;index&gt;/flush/synced</code> or <code class="literal">/flush/synced</code> endpoints will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the request to synced flush is
routed to the equivalent non-synced flush URL.</p>
</div>
</details>
<details>
<summary class="title">The default for the <code class="literal">?wait_for_active_shards</code> parameter on the close index API has changed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
When closing an index in earlier versions, by default Elasticsearch would not wait for
the shards of the closed index to be properly assigned before returning. From
version 8.0 onwards the default behaviour is to wait for shards to be assigned
according to the
<a href="/guide/en/elasticsearch/reference/master/docs-index_.html#index-wait-for-active-shards" class="ulink" target="_top"><code class="literal">index.write.wait_for_active_shards</code>
index setting</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Accept the new behaviour, or specify <code class="literal">?wait_for_active_shards=0</code> to preserve
the old behaviour if needed.</p>
</div>
</details>
<details>
<summary class="title">The index stats API&#8217;s <code class="literal">types</code> query parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The index stats API&#8217;s <code class="literal">types</code> query parameter has been removed. Previously, you
could combine <code class="literal">types</code> with the <code class="literal">indexing</code> query parameter to return indexing
stats for specific mapping types. Mapping types have been removed in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">types</code> query parameter. Requests that include the
parameter will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">types</code> query parameter is
ignored and stats are returned for the entire index.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">user_agent</code> ingest processor&#8217;s <code class="literal">ecs</code> parameter has no effect.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 7.2, we deprecated the <code class="literal">ecs</code> parameter for the <code class="literal">user_agent</code> ingest processor.
In 8.x, the <code class="literal">user_agent</code> ingest processor will only return <a href="/guide/en/ecs/8.9" class="ulink" target="_top">Elastic
Common Schema (ECS)</a> fields, regardless of the <code class="literal">ecs</code> value.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To avoid deprecation warnings, remove the parameter from your ingest pipelines.
If a pipeline specifies an <code class="literal">ecs</code> value, the value is ignored.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">include_type_name</code> query parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">include_type_name</code> query parameter has been removed from the index
creation, index template, and mapping APIs. Previously, you could set
<code class="literal">include_type_name</code> to <code class="literal">true</code> to indicate that requests and responses should
include a mapping type name. Mapping types have been removed in 8.x.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">include_type_name</code> query parameter. Requests that
include the parameter will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">include_type_name</code> query
parameter is ignored and any custom mapping types in the request are removed.</p>
</div>
</details>
<details>
<summary class="title">Reindex from remote now re-encodes URL-encoded index names.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Reindex from remote would previously allow URL-encoded index names and not
re-encode them when generating the search request for the remote host. This
leniency has been removed such that all index names are correctly encoded when
reindex generates remote search requests.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Specify unencoded index names for reindex from remote requests.</p>
</div>
</details>
<details>
<summary class="title">In the reindex, delete by query, and update by query APIs, the <code class="literal">size</code> parameter has been renamed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, a <code class="literal">_reindex</code> request had two different size specifications in the body:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Outer level, determining the maximum number of documents to process
</li>
<li class="listitem">
Inside the <code class="literal">source</code> element, determining the scroll/batch size.
</li>
</ul>
</div>
<p>The outer level <code class="literal">size</code> parameter has now been renamed to <code class="literal">max_docs</code> to
avoid confusion and clarify its semantics.</p>
<p>Similarly, the <code class="literal">size</code> parameter has been renamed to <code class="literal">max_docs</code> for
<code class="literal">_delete_by_query</code> and <code class="literal">_update_by_query</code> to keep the 3 interfaces consistent.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the replacement parameters. Requests containing the <code class="literal">size</code> parameter will
return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">size</code> parameter is mapped to
the <code class="literal">max_docs</code> parameter.</p>
</div>
</details>
<details>
<summary class="title">The update by query API now rejects unsupported <code class="literal">script</code> fields.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
An update by query API request that includes an unsupported field in the
<code class="literal">script</code> object now returns an error. Previously, the API would silently ignore
these unsupported fields.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To avoid errors, remove unsupported fields from the <code class="literal">script</code> object.</p>
</div>
</details>
<details>
<summary class="title">The cat node API&#8217;s <code class="literal">local</code> query parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">?local</code> parameter to the <code class="literal">GET _cat/nodes</code> API was deprecated in 7.x and is
rejected in 8.0. This parameter caused the API to use the local cluster state
to determine the nodes returned by the API rather than the cluster state from
the master, but this API requests information from each selected node
regardless of the <code class="literal">?local</code> parameter which means this API does not run in a
fully node-local fashion.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">?local</code> query parameter. <a href="/guide/en/elasticsearch/reference/master/cat-nodes.html" class="ulink" target="_top">cat node
API</a> requests that include this parameter will return an error.</p>
</div>
</details>
<details>
<summary class="title">The cat shard API&#8217;s <code class="literal">local</code> query parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">?local</code> parameter to the <code class="literal">GET _cat/shards</code> API was deprecated in 7.x and is
rejected in 8.0. This parameter caused the API to use the local cluster state
to determine the nodes returned by the API rather than the cluster state from
the master, but this API requests information from each selected node
regardless of the <code class="literal">?local</code> parameter which means this API does not run in a
fully node-local fashion.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">?local</code> query parameter. <a href="/guide/en/elasticsearch/reference/master/cat-shards.html" class="ulink" target="_top">cat shards
API</a> requests that include this parameter will return an error.</p>
</div>
</details>
<details>
<summary class="title">The cat indices API&#8217;s <code class="literal">local</code> query parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">?local</code> parameter to the <code class="literal">GET _cat/indices</code> API was deprecated in 7.x and is
rejected in 8.0. This parameter caused the API to use the local cluster state
to determine the nodes returned by the API rather than the cluster state from
the master, but this API requests information from each selected node
regardless of the <code class="literal">?local</code> parameter which means this API does not run in a
fully node-local fashion.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">?local</code> query parameter. <a href="/guide/en/elasticsearch/reference/master/cat-indices.html" class="ulink" target="_top">cat indices
API</a> requests that include this parameter will return an error.</p>
</div>
</details>
<details>
<summary class="title">The get field mapping API&#8217;s <code class="literal">local</code> query parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">local</code> parameter for get field mapping API was deprecated in 7.8 and is
removed in 8.0. This parameter is a no-op and field mappings are always retrieved
locally.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">local</code> query parameter.
<a href="/guide/en/elasticsearch/reference/master/indices-get-field-mapping.html" class="ulink" target="_top">get field mapping API</a> requests that
include this parameter will return an error.</p>
</div>
</details>
<details>
<summary class="title">Post data to jobs API is deprecated.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The machine learning <a href="/guide/en/elasticsearch/reference/master/ml-post-data.html" class="ulink" target="_top">post data to jobs API</a> is deprecated starting in 7.11.0
and will be removed in a future major version.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use <a href="/guide/en/elasticsearch/reference/master/ml-ad-apis.html#ml-api-datafeed-endpoint" class="ulink" target="_top">datafeeds</a> instead.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">job_id</code> property of the Update datafeeds API has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The ability to update a <code class="literal">job_id</code> in a datafeed was deprecated in 7.3.0. and is
removed in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
It is not possible to move datafeeds between anomaly detection jobs.</p>
</div>
</details>
<details>
<summary class="title">Create repository and delete repository API&#8217;s return <code class="literal">409</code> status code when a repository is in use instead of <code class="literal">500</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <a href="/guide/en/elasticsearch/reference/master/put-snapshot-repo-api.html" class="ulink" target="_top">Create or update snapshot repository API</a> and
<a href="/guide/en/elasticsearch/reference/master/delete-snapshot-repo-api.html" class="ulink" target="_top">Delete snapshot repository API</a> return <code class="literal">409</code>
status code when the request is attempting to modify an existing repository that&#8217;s in use instead of status code <code class="literal">500</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update client code that handles creation and deletion of repositories to reflect this change.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">allow_no_datafeeds</code> property has been removed from machine learning APIs.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">allow_no_datafeeds</code> property was deprecated in the
<a href="/guide/en/elasticsearch/reference/master/cat-datafeeds.html" class="ulink" target="_top">cat datafeeds</a>,
<a href="/guide/en/elasticsearch/reference/master/ml-get-datafeed.html" class="ulink" target="_top">get datafeeds</a>,
<a href="/guide/en/elasticsearch/reference/master/ml-get-datafeed-stats.html" class="ulink" target="_top">get datafeed statistics</a>, and
<a href="/guide/en/elasticsearch/reference/master/ml-stop-datafeed.html" class="ulink" target="_top">stop datafeeds</a> APIs in 7.10.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use <code class="literal">allow_no_match</code> instead.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">allow_no_jobs</code> property has been removed from machine learning APIs.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">allow_no_jobs</code> property was deprecated in the
<a href="/guide/en/elasticsearch/reference/master/cat-anomaly-detectors.html" class="ulink" target="_top">cat anomaly detectors</a>,
<a href="/guide/en/elasticsearch/reference/master/ml-close-job.html" class="ulink" target="_top">close anomaly detection jobs</a>,
<a href="/guide/en/elasticsearch/reference/master/ml-get-job.html" class="ulink" target="_top">get anomaly detection jobs</a>,
<a href="/guide/en/elasticsearch/reference/master/ml-get-job-stats.html" class="ulink" target="_top">get anomaly detection job statistics</a>, and
<a href="/guide/en/elasticsearch/reference/master/ml-get-overall-buckets.html" class="ulink" target="_top">get overall buckets</a> APIs in 7.10.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use <code class="literal">allow_no_match</code> instead.</p>
</div>
</details>
<details>
<summary class="title">The StartRollupJob endpoint now returns a success status if a job has already started.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, attempting to start an already-started rollup job would
result in a <code class="literal">500 InternalServerError: Cannot start task for Rollup Job
[job] because state was [STARTED]</code> exception.</p>
<p>Now, attempting to start a job that is already started will just
return a successful <code class="literal">200 OK: started</code> response.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your workflow and applications to assume that a 200 status in response to
attempting to start a rollup job means the job is in an actively started state.
The request itself may have started the job, or it was previously running and so
the request had no effect.</p>
</div>
</details>
<details>
<summary class="title">Stored scripts no longer support empty scripts or search templates.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <a href="/guide/en/elasticsearch/reference/master/create-stored-script-api.html" class="ulink" target="_top">create or update stored script API</a>'s
<code class="literal">source</code> parameter cannot be empty.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Before upgrading, use the <a href="/guide/en/elasticsearch/reference/master/delete-stored-script-api.html" class="ulink" target="_top">delete stored
script API</a> to delete any empty stored scripts or search templates.
In 8.0, Elasticsearch will drop any empty stored scripts or empty search templates from
the cluster state. Requests to create a stored script or search template with
an empty <code class="literal">source</code> will return an error.</p>
</div>
</details>
<details>
<summary class="title">The create or update stored script API&#8217;s <code class="literal">code</code> parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <a href="/guide/en/elasticsearch/reference/master/create-stored-script-api.html" class="ulink" target="_top">create or update stored script API</a>'s
<code class="literal">code</code> parameter has been removed. Use the <code class="literal">source</code> parameter instead.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">code</code> parameter. Requests that include the parameter
will return an error.</p>
</div>
</details>
<details id="_type-search-matches-no-docs">
<summary class="title">Searches on the <code class="literal">_type</code> field are no longer supported.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 8.x, the <code class="literal">_type</code> metadata field has been removed. Elasticsearch now handles a search
on the <code class="literal">_type</code> field as a search on a non-existent field. A search on a
non-existent field matches no documents, regardless of the query string.</p>
<p>In 7.x, a search for <code class="literal">_doc</code> in the <code class="literal">_type</code> field would match the same documents
as a <code class="literal">match_all</code> query.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Remove queries on the <code class="literal">_type</code> field from your search requests and search
templates. Searches that include these queries may return no results.</p>
</div>
</details>
<details id="msearch-empty-line-support">
<summary class="title">The multi search API now parses an empty first line as action metadata in text files.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The multi search API now parses an empty first line as empty action metadata
when you provide a text file as the request body, such as when using curl&#8217;s
<code class="literal">--data-binary</code> flag.</p>
<p>The API no longer supports text files that contain:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An empty first line followed by a line containing only <code class="literal">{}</code>.
</li>
<li class="listitem">
An empty first line followed by another empty line.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Don&#8217;t provide an unsupported text file to the multi search API. Requests that
include an unsupported file will return an error.</p>
</div>
</details>
<details id="remove-unmapped-type-string">
<summary class="title">The <code class="literal">unmapped_type: string</code> sort option has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Search requests no longer support the <code class="literal">unmapped_type: string</code> sort option.
Instead, use <code class="literal">unmapped_type: keyword</code> to handle an unmapped field as if it had
the <code class="literal">keyword</code> field type but ignore its values for sorting.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of <code class="literal">unmapped_type: string</code>. Search requests that include the
<code class="literal">unmapped_type: string</code> sort option will return shard failures.</p>
</div>
</details>
<details id="id-field-data">
<summary class="title">Aggregating and sorting on <code class="literal">_id</code> is disallowed by default.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, it was possible to aggregate and sort on the built-in <code class="literal">_id</code> field
by loading an expensive data structure called fielddata. This was deprecated
in 7.6 and is now disallowed by default in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Aggregating and sorting on <code class="literal">_id</code> should be avoided. As an alternative, the
<code class="literal">_id</code> field&#8217;s contents can be duplicated into another field with docvalues
enabled (note that this does not apply to auto-generated IDs).</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">common</code> query has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">common</code> query, deprecated in 7.x, has been removed in 8.0.
The same functionality can be achieved by the <code class="literal">match</code> query if the total number of hits is not tracked.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">common</code> query. Search requests containing a <code class="literal">common</code>
query will return an error.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">cutoff_frequency</code> parameter has been removed from the <code class="literal">match</code> and <code class="literal">multi_match</code> query.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">cutoff_frequency</code> parameter, deprecated in 7.x, has been removed in 8.0 from <code class="literal">match</code> and <code class="literal">multi_match</code> queries.
The same functionality can be achieved without any configuration provided that the total number of hits is not tracked.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">cutoff_frequency</code> parameter. Search requests containing
this parameter in a <code class="literal">match</code> or <code class="literal">multi_match</code> query will return an error.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">nested_filter</code> and <code class="literal">nested_path</code> properties have been removed from the search API&#8217;s <code class="literal">sort</code> request body parameter.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">nested_filter</code> and <code class="literal">nested_path</code> options, deprecated in 6.x, have been removed in favor of the <code class="literal">nested</code> context.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">sort</code> request body parameter&#8217;s <code class="literal">nested_filter</code> and
<code class="literal">nested_path</code> properties. Requests containing these properties will return an
error.</p>
</div>
</details>
<details>
<summary class="title">Search and get requests are now routed to shards using adaptive replica selection by default.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Elasticsearch will no longer prefer using shards in the same location (with the same awareness attribute values) to process
<code class="literal">_search</code> and <code class="literal">_get</code> requests. Adaptive replica selection (activated by default in this version) will route requests
more efficiently using the service time of prior inter-node communications.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
No action needed.</p>
</div>
</details>
<details>
<summary class="title">Vector functions using <code class="literal">(query, doc['field'])</code> are no longer supported.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The vector functions of the form <code class="literal">function(query, doc['field'])</code> were
deprecated in 7.6, and are now removed in 8.x. The form
<code class="literal">function(query, 'field')</code> should be used instead. For example,
<code class="literal">cosineSimilarity(query, doc['field'])</code> is replaced by
<code class="literal">cosineSimilarity(query, 'field')</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <code class="literal">function(query, 'field')</code> form. Discontinue use of the <code class="literal">function(query,
doc['field'])</code> form. Requests containing the <code class="literal">function(query,
doc['field'])</code> form will return an error.</p>
</div>
</details>
<details>
<summary class="title">The search API&#8217;s <code class="literal">indices_boost</code> request body parameter no longer accepts object values.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">indices_boost</code> option in the search request used to accept the boosts
both as an object and as an array. The object format has been deprecated since
5.2 and is now removed in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use only array values in the <code class="literal">indices_boost</code> parameter. Requests containing an
object value in the <code class="literal">indices_boost</code> parameter will return an error.</p>
</div>
</details>
<details>
<summary class="title">The search API&#8217;s <code class="literal">use_field_mapping</code> request body parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 7.0, we began formatting <code class="literal">docvalue_fields</code> by default using each field&#8217;s
mapping definition. To ease the transition from 6.x, we added the format
option <code class="literal">use_field_mapping</code>. This parameter was deprecated in 7.0, and is now
removed in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">use_field_mapping</code> request body parameter. Requests
containing this parameter will return an error.</p>
<p><span class="strong strong"><strong>Compatibility</strong></span><br>
When <a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">rest-api-compatibility</a> is
<a href="/guide/en/elasticsearch/reference/master/rest-api-compatibility.html" class="ulink" target="_top">requested</a>, the <code class="literal">use_field_mapping</code> parameter
is ignored.</p>
</div>
</details>
<details>
<summary class="title">The search API&#8217;s <code class="literal">from</code> request body and url parameter cannot be negative.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Search request used to accept <code class="literal">-1</code> as a <code class="literal">from</code> in the search body and the url,
treating it as the default value of 0. Other negative values got rejected with
an error already. We now also reject <code class="literal">-1</code> as an invalid value.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Change any use of <code class="literal">-1</code> as <code class="literal">from</code> parameter in request body or url parameters by either
setting it to <code class="literal">0</code> or omitting it entirely. Requests containing negative values will
return an error.</p>
</div>
</details>
<details>
<summary class="title">Range queries on date fields treat numeric values alwas as milliseconds-since-epoch.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Range queries on date fields used to misinterpret small numbers (e.g. four digits like 1000)
as a year when no additional format was set, but would interpret other numeric values as
milliseconds since epoch. We now treat all numeric values in absence of a specific <code class="literal">format</code>
parameter as milliseconds since epoch. If you want to query for years instead, with a missing
<code class="literal">format</code> you now need to quote the input value (e.g. "1984").</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If you query date fields without a specified <code class="literal">format</code>, check if the values in your queries are
actually meant to be milliseconds-since-epoch and use a numeric value in this case. If not, use
a string value which gets parsed by either the date format set on the field in the mappings or
by <code class="literal">strict_date_optional_time</code> by default.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">geo_bounding_box</code> query&#8217;s <code class="literal">type</code> parameter has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">geo_bounding_box</code> query&#8217;s <code class="literal">type</code> parameter was deprecated in 7.14.0 and has
been removed in 8.0.0. This parameter is a no-op and has no effect on the query.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">type</code> parameter. <code class="literal">geo_bounding_box</code> queries that include
this parameter will return an error.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">type</code> query has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">type</code> query has been removed. Mapping types have been removed in 8.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">type</code> query. Requests that include the <code class="literal">type</code> query
will return an error.</p>
</div>
</details>
<details>
<summary class="title">The <code class="literal">kibana_user</code> role has been renamed <code class="literal">kibana_admin</code>.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Users who were previously assigned the <code class="literal">kibana_user</code> role should instead be assigned
the <code class="literal">kibana_admin</code> role. This role grants the same set of privileges as <code class="literal">kibana_user</code>, but has been
renamed to better reflect its intended use.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Assign users with the <code class="literal">kibana_user</code> role to the <code class="literal">kibana_admin</code> role.
Discontinue use of the <code class="literal">kibana_user</code> role.</p>
</div>
</details>
<details id="snapshot-resolve-system-indices">
<summary class="title">For snapshot and SLM APIs, the <code class="literal">indices</code> parameter no longer resolves to system indices or system data streams.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
For snapshot and SLM APIs, the <code class="literal">indices</code> parameter no longer resolves to
system indices or system data streams.
<a href="/guide/en/elasticsearch/reference/master/snapshot-restore.html#feature-state" class="ulink" target="_top">Feature states</a> are now the only way
to back up and restore system indices or system data streams from a snapshot.</p>
<p>You can no longer use the <code class="literal">indices</code> parameter for the
<a href="/guide/en/elasticsearch/reference/master/slm-api-put-policy.html" class="ulink" target="_top">create SLM policy API</a> or the
<a href="/guide/en/elasticsearch/reference/master/create-snapshot-api.html" class="ulink" target="_top">create snapshot API</a> to include a system index in
a snapshot. To back up a system index, use the <code class="literal">include_global_state</code> and
<code class="literal">feature_states</code> parameters to include the corresponding feature state instead.
By default, the <code class="literal">include_global_state</code> and <code class="literal">feature_states</code> parameters include
all system indices.</p>
<p>Similarly, you can no longer use the <a href="/guide/en/elasticsearch/reference/master/restore-snapshot-api.html" class="ulink" target="_top">restore snapshot
API</a>'s <code class="literal">indices</code> parameter to restore a system index from a snapshot. To restore
a system index, use the <code class="literal">include_global_state</code> and <code class="literal">feature_states</code> parameters
to restore the corresponding feature state instead. By default, the
<code class="literal">include_global_state</code> and <code class="literal">feature_states</code> parameters don&#8217;t restore any system
indices.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If you previously used the <code class="literal">indices</code> parameter to back up or restore system
indices, update your SLM policies and application to use the
<code class="literal">include_global_state</code> and <code class="literal">feature_states</code> parameters instead.</p>
<p>An SLM policy that explicitly specifies a system index in the <code class="literal">indices</code>
parameter will fail to create snapshots. Similarly, a create snapshot API or
restore snapshot API request that explicitly specifies a system index in the
<code class="literal">indices</code> parameter will fail and return an error. If the <code class="literal">indices</code> value
includes a wildcard (<code class="literal">*</code>) pattern, the pattern will no longer match system
indices.</p>
</div>
</details>
<details>
<summary class="title">Snapshots compress metadata files by default.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Previously, the default value for <code class="literal">compress</code> was <code class="literal">false</code>. The default has been changed to <code class="literal">true</code>.</p>
<p>This change will affect both newly created repositories and existing repositories where <code class="literal">compress=false</code> has not been
explicitly specified.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your workflow and applications to assume a default value of <code class="literal">true</code> for
the <code class="literal">compress</code> parameter.</p>
</div>
</details>
<details>
<summary class="title">S3 snapshot repositories now use a DNS-style access pattern by default.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Starting in version 7.4, <code class="literal">s3</code> snapshot repositories no longer use the
now-deprecated path-style access pattern by default. In versions 7.0, 7.1, 7.2
and 7.3 <code class="literal">s3</code> snapshot repositories always used the path-style access pattern.
This is a breaking change for deployments that only support path-style access
but which are recognized as supporting DNS-style access by the AWS SDK. This
breaking change was made necessary by
<a href="https://aws.amazon.com/blogs/aws/amazon-s3-path-deprecation-plan-the-rest-of-the-story/" class="ulink" target="_top">AWS&#8217;s
announcement</a> that the path-style access pattern is deprecated and will be
unsupported on buckets created after September 30th 2020.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
If your deployment only supports path-style access and is affected by this
change then you must configure the S3 client setting <code class="literal">path_style_access</code> to
<code class="literal">true</code>.</p>
</div>
</details>
<details>
<summary class="title">Restore requests no longer accept settings.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In earlier versions, you could pass both <code class="literal">settings</code> and <code class="literal">index_settings</code> in the
body of a restore snapshot request, but the <code class="literal">settings</code> value was ignored. The
restore snapshot API now rejects requests that include a <code class="literal">settings</code> value.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Discontinue use of the <code class="literal">settings</code> parameter in restore
snapshot request. Requests that include these parameters will return an error.</p>
</div>
</details>
<details>
<summary class="title">The repository stats API has been removed.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The repository stats API has been removed. We deprecated this experimental API
in 7.10.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <a href="/guide/en/elasticsearch/reference/master/repositories-metering-apis.html" class="ulink" target="_top">repositories metering APIs</a>
instead.</p>
</div>
</details>
<details>
<summary class="title">Watcher history now writes to a hidden data stream.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
In 8.x, Elasticsearch writes Watcher history to a hidden
<code class="literal">.watcher-history-&lt;index-template-version&gt;</code> data stream. Previously, Elasticsearch wrote
Watcher history to hidden
<code class="literal">.watcher-history-&lt;index-template-version&gt;-&lt;yyyy-MM-dd&gt;</code> indices.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Update your requests to target the Watcher history data stream. For example, use
the <code class="literal">.watcher-history-*</code> wildcard expression. Requests that specifically target
non-existent Watcher history indices may return an error.</p>
</div>
</details>
<details>
<summary class="title">HTTP Status code has changed for the Cluster Health API in case of a server timeout.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <a href="/guide/en/elasticsearch/reference/master/cluster-health.html" class="ulink" target="_top">cluster health API</a> includes options for waiting
for certain health conditions to be satisfied. If the requested conditions are
not satisfied within a timeout then Elasticsearch will send back a normal response
including the field <code class="literal">"timed_out": true</code>. In earlier versions it would also use
the HTTP response code <code class="literal">408 Request timeout</code> if the request timed out, and <code class="literal">200
OK</code> otherwise. The <code class="literal">408 Request timeout</code> response code is not appropriate for
this situation, so from version 8.0.0 Elasticsearch will use the response code <code class="literal">200 OK</code>
for both cases.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
To detect a server timeout, check the <code class="literal">timed_out</code> field of the JSON response.</p>
</div>
</details>
<h4><a id="breaking_80_jdbc_changes"></a>SQL JDBC changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/sql-jdbc-changes.asciidoc">edit</a></h4>
<details>
<summary class="title">JDBC driver returns geometry objects as well-known-text string instead of <code class="literal">org.elasticsearch.geo</code> objects.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
To reduce the dependency of the JDBC driver onto Elasticsearch classes, the JDBC driver returns geometry data
as strings using the WKT (well-known text) format instead of classes from the <code class="literal">org.elasticsearch.geometry</code>.
Users can choose the geometry library desired to convert the string representation into a full-blown objects
either such as the <code class="literal">elasticsearch-geo</code> library (which returned the object <code class="literal">org.elasticsearch.geo</code> as before),
jts or spatial4j.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Before upgrading, replace any <code class="literal">org.elasticsearch.geo</code> classes on the <code class="literal">ResultSet#getObject</code> or <code class="literal">ResultSet#setObject</code>
Elasticsearch JDBC driver with their WKT representation by simply calling <code class="literal">toString</code> or
<code class="literal">org.elasticsearch.geometry.utils.WellKnownText#toWKT/fromWKT</code> methods.</p>
<p>This change does NOT impact users that do not use geometry classes.</p>
</div>
</details>
<h4><a id="breaking_80_system_req_changes"></a>System requirement changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/system-req-changes.asciidoc">edit</a></h4>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use Elasticsearch Service, skip this section. Elasticsearch Service handles these changes for you.</p>
</div>
</div>
<details>
<summary class="title">Several EOL operating systems are no longer supported.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The following operating systems have reached their end of life and are no longer
supported by Elasticsearch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Amazon Linux
</li>
<li class="listitem">
CentOS 6
</li>
<li class="listitem">
Debian 8
</li>
<li class="listitem">
openSUSE Leap 42
</li>
<li class="listitem">
Oracle Enterprise Linux 6
</li>
<li class="listitem">
Ubuntu 16.04
</li>
</ul>
</div>
<p>We&#8217;ve also removed support for <code class="literal">SysV init</code>. No supported operating systems use
the <code class="literal">SysV init</code> process.</p>
<p><span class="strong strong"><strong>Details</strong></span><br>
Ensure your nodes use a
<a href="/support/matrix#matrix_os" class="ulink" target="_top">supported operating system</a>.
Running Elasticsearch on an unsupported operating system can result in unexpected errors
or failures.</p>
</div>
</details>
<details>
<summary class="title">Java 17 is required.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Java 17 or higher is now required to run Elasticsearch and any of its command
line tools.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use Java 17 or higher. Attempts to run Elasticsearch 8.0 using earlier Java versions will
fail.</p>
<p>There is not yet a FIPS-certified security module for Java 17
that you can use when running Elasticsearch 8.0 in FIPS 140-2 mode.
If you run in FIPS 140-2 mode, you will either need to request an exception
from your security organization to upgrade to Elasticsearch 8.0,
or remain on Elasticsearch 7.x until Java 17 is certified.</p>
</div>
</details>
<details>
<summary class="title"><code class="literal">JAVA_HOME</code> is no longer supported.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
<code class="literal">JAVA_HOME</code> is no longer supported to set the path for the JDK. Instead, use
the bundled JDK (preferable), or set <code class="literal">ES_JAVA_HOME</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the bundled JDK (preferable), or set <code class="literal">ES_JAVA_HOME</code>. <code class="literal">JAVA_HOME</code> will be
ignored.</p>
</div>
</details>
<h4><a id="breaking_80_transform_changes"></a>Transform changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0/transform.asciidoc">edit</a></h4>
<details>
<summary class="title">Transforms created in 7.4 or earlier versions must be upgraded.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Early beta versions of transforms had configuration information in a format
that is no longer supported.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Use the <a href="/guide/en/elasticsearch/reference/master/upgrade-transforms.html" class="ulink" target="_top">upgrade transforms API</a> to fix your
transforms. This upgrade does not affect the source or destination indices.</p>
</div>
</details>
<h3><a id="deprecated-8.0"></a>Deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0.asciidoc">edit</a></h3>
<p>The following functionality has been deprecated in Elasticsearch 8.0
and will be removed in a future version.
While this won&#8217;t have an immediate impact on your applications,
we strongly encourage you take the described steps to update your code
after upgrading to 8.0.</p>
<p>To find out if you are using any deprecated functionality,
enable <a class="xref" href="logging.html#deprecation-logging" title="Deprecation logging">deprecation logging</a>.</p>
<h4><a id="breaking_80_cluster_node_setting_deprecations"></a>Cluster and node setting deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0.asciidoc">edit</a></h4>
<details id="deprecate-transient-cluster-settings">
<summary class="title">We no longer recommend using transient cluster settings.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
We no longer recommend using transient cluster settings. Use persistent cluster
settings instead. If a cluster becomes unstable, transient settings can clear
unexpectedly, resulting in an undesired cluster configuration.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Transient cluster settings are not yet deprecated, but we plan to deprecate them
in a future release. For migration steps, see the
<a href="/guide/en/elasticsearch/reference/master/transient-settings-migration-guide.html" class="ulink" target="_top">Transient settings migration
guide</a>.</p>
</div>
</details>
<h4><a id="breaking_80_command_line_tool_deprecations"></a>Command line tool deprecations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/migration/migrate_8_0.asciidoc">edit</a></h4>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use Elasticsearch Service, skip this section. Elasticsearch Service handles these changes for you.</p>
</div>
</div>
<details id="deprecate-elasticsearch-setup-passwords">
<summary class="title">The <code class="literal">elasticsearch-setup-passwords</code> tool is deprecated.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">elasticsearch-setup-passwords</code> tool is deprecated in 8.0. To
manually reset the password for built-in users (including the <code class="literal">elastic</code> user), use
the <a href="/guide/en/elasticsearch/reference/master/reset-password.html" class="ulink" target="_top"><code class="literal">elasticsearch-reset-password</code></a> tool, the Elasticsearch
<a href="/guide/en/elasticsearch/reference/master/security-api-change-password.html" class="ulink" target="_top">change passwords API</a>, or the
User Management features in Kibana.
<code class="literal">elasticsearch-setup-passwords</code> will be removed in a future release.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Passwords are generated automatically for the <code class="literal">elastic</code> user when you start Elasticsearch for the first time. If you run <code class="literal">elasticsearch-setup-passwords</code> after
starting Elasticsearch, it will fail because the <code class="literal">elastic</code>
user password is already configured.</p>
</div>
</details>


</div>
<div class="navfooter">
<span class="prev">
<a href="migrating-8.1.html">« Migrating to 8.1</a>
</span>
<span class="next">
<a href="migrate-to-java-time.html">Java time migration guide »</a>
</span>
</div>
</div>
</body>
</html>
