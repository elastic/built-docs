<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Prefix query | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Prefix query | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="term-level-queries.html" title="Term-level queries"/>
<link rel="prev" href="query-dsl-ids-query.html" title="IDs"/>
<link rel="next" href="query-dsl-range-query.html" title="Range query"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="query-dsl-ids-query.html">« IDs</a>
</span>
<span class="next">
<a href="query-dsl-range-query.html">Range query »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="term-level-queries.html">Term-level queries</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Prefix query</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="query-dsl-prefix-query"></a>Prefix query<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns documents that contain a specific prefix in a provided field.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="prefix-query-ex-request"></a>Example request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h3>
</div></div></div>
<p>The following search returns documents where the <code class="literal">user.id</code> field contains a term
that begins with <code class="literal">ki</code>.</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.search(
  body: {
    query: {
      prefix: {
        'user.id' =&gt; {
          value: 'ki'
        }
      }
    }
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.search({
  query: {
    prefix: {
      "user.id": {
        value: "ki",
      },
    },
  },
});
console.log(response);</pre>
</div>
<a id="fbc5ab85b908480bf944b55da0a43488"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">GET /_search
{
  "query": {
    "prefix": {
      "user.id": {
        "value": "ki"
      }
    }
  }
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/1337.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="prefix-query-top-level-params"></a>Top-level parameters for <code class="literal">prefix</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;field&gt;</code>
</span>
</dt>
<dd>
(Required, object) Field you wish to search.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="prefix-query-field-params"></a>Parameters for <code class="literal">&lt;field&gt;</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">value</code>
</span>
</dt>
<dd>
(Required, string) Beginning characters of terms you wish to find in the
provided <code class="literal">&lt;field&gt;</code>.
</dd>
<dt>
<span class="term">
<code class="literal">rewrite</code>
</span>
</dt>
<dd>
(Optional, string) Method used to rewrite the query. For valid values and more
information, see the <a class="xref" href="query-dsl-multi-term-rewrite.html" title="rewrite parameter"><code class="literal">rewrite</code> parameter</a>.
</dd>
<dt>
<span class="term">
<code class="literal">case_insensitive</code> <span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">7.10.0</span>]
<span class="Admonishment-detail">
Added in 7.10.0.
</span>
</span>
</span>
</dt>
<dd>
(Optional, Boolean) Allows ASCII case insensitive matching of the
value with the indexed field values when set to true. Default is false which means
the case sensitivity of matching depends on the underlying field&#8217;s mapping.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="prefix-query-notes"></a>Notes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="prefix-query-short-ex"></a>Short request example<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h4>
</div></div></div>
<p>You can simplify the <code class="literal">prefix</code> query syntax by combining the <code class="literal">&lt;field&gt;</code> and
<code class="literal">value</code> parameters. For example:</p>
<div class="pre_wrapper lang-ruby alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby alternative">response = client.search(
  body: {
    query: {
      prefix: {
        user: 'ki'
      }
    }
  }
)
puts response</pre>
</div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.search({
  query: {
    prefix: {
      user: "ki",
    },
  },
});
console.log(response);</pre>
</div>
<a id="353020cb30a885ee7f5ce2b141ba574a"></a>
<div class="pre_wrapper lang-console default has-ruby has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-ruby has-js">GET /_search
{
  "query": {
    "prefix" : { "user" : "ki" }
  }
}</pre>
</div>
<div class="console_widget has-ruby has-js" data-snippet="snippets/1338.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="prefix-query-index-prefixes"></a>Speed up prefix queries<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h4>
</div></div></div>
<p>You can speed up prefix queries using the <a class="xref" href="index-prefixes.html" title="index_prefixes"><code class="literal">index_prefixes</code></a>
mapping parameter. If enabled, Elasticsearch indexes prefixes in a separate field,
according to the configuration settings. This lets Elasticsearch run prefix queries
more efficiently at the cost of a larger index.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="prefix-query-allow-expensive-queries"></a>Allow expensive queries<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/query-dsl/prefix-query.asciidoc">edit</a></h4>
</div></div></div>
<p>Prefix queries will not be executed if <a class="xref" href="query-dsl.html#query-dsl-allow-expensive-queries"><code class="literal">search.allow_expensive_queries</code></a>
is set to false. However, if <a class="xref" href="index-prefixes.html" title="index_prefixes"><code class="literal">index_prefixes</code></a> are enabled, an optimised query is built which
is not considered slow, and will be executed in spite of this setting.</p>
</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="query-dsl-ids-query.html">« IDs</a>
</span>
<span class="next">
<a href="query-dsl-range-query.html">Range query »</a>
</span>
</div>
</body>
</html>
