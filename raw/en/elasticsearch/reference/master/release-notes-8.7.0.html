<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Elasticsearch version 8.7.0 | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Elasticsearch version 8.7.0 | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="es-release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes-8.7.1.html" title="Elasticsearch version 8.7.1"/>
<link rel="next" href="release-notes-8.6.2.html" title="Elasticsearch version 8.6.2"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-8.7.1.html">« Elasticsearch version 8.7.1</a>
</span>
<span class="next">
<a href="release-notes-8.6.2.html">Elasticsearch version 8.6.2 »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="es-release-notes.html">Release notes</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Elasticsearch version 8.7.0</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-8.7.0"></a>Elasticsearch version 8.7.0<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></h2>
</div></div></div>
<p>Also see <a class="xref" href="migrating-8.7.html#breaking-changes-8.7" title="Breaking changes">Breaking changes in 8.7</a>.</p>
<h3><a id="known-issues-8.7.0"></a>Known issues<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Shard rebalancing may temporarily unbalance cluster</p>
<p>From 8.6.0 onwards the default shard rebalancing algorithm will compute the
final desired balance and then make shard movements to reconcile the current
state of the cluster with the desired state. However the order in which the
shard movements take place may be skewed towards certain nodes, causing the
cluster to become temporarily unbalanced while the reconciliation is ongoing.
As always, once a node reaches a disk watermark it will not accept any
additional shards, but this skew may result in nodes reaching their disk
watermarks more often than expected in normal operation. Once the
reconciliation process completes, the cluster will be balanced again.</p>
<p>To avoid this problem, upgrade to 8.8.0 or later.</p>
</li>
</ul>
</div>
<h3><a id="breaking-8.7.0"></a>Breaking changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Ingest Node
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Making <code class="literal">JsonProcessor</code> stricter so that it does not silently drop data <a href="https://github.com/elastic/elasticsearch/pull/93179" class="ulink" target="_top">#93179</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92898" class="ulink" target="_top">#92898</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Indices APIs
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <a class="xref" href="indices-resolve-index-api.html" title="Resolve index API">Resolve index</a> API implementation was adjusted to use the
same index resolution mechanism as other similar APIs, adding support for the
<code class="literal">ignore_unavailable</code> and <code class="literal">allow_no_indices</code> flags and the <code class="literal">_all</code> meta-index. If
there are no matching indices then earlier versions of this API would return an
empty result with the <code class="literal">200 OK</code> HTTP response code, but from 8.7.0 onwards by
default it returns an <code class="literal">IndexNotFoundException</code> with the <code class="literal">404 Not Found</code> HTTP
response code. To recover the old behaviour, add the query parameter
<code class="literal">?ignore_unavailable=true</code> (<a href="https://github.com/elastic/elasticsearch/pull/92820" class="ulink" target="_top">#92820</a>).
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="bug-8.7.0"></a>Bug fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Don&#8217;t create a new <code class="literal">DoubleHistogram</code> instance for empty buckets <a href="https://github.com/elastic/elasticsearch/pull/92547" class="ulink" target="_top">#92547</a>
</li>
<li class="listitem">
Fix: do not allow map key types other than String <a href="https://github.com/elastic/elasticsearch/pull/88686" class="ulink" target="_top">#88686</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/66057" class="ulink" target="_top">#66057</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Allocation
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fallback to the actual shard size when forecast is not available <a href="https://github.com/elastic/elasticsearch/pull/93461" class="ulink" target="_top">#93461</a>
</li>
<li class="listitem">
Skip <code class="literal">DiskThresholdMonitor</code> when cluster state is not recovered <a href="https://github.com/elastic/elasticsearch/pull/93699" class="ulink" target="_top">#93699</a>
</li>
<li class="listitem">
Suppress response headers in <code class="literal">AllocationActionMultiListener</code> <a href="https://github.com/elastic/elasticsearch/pull/93777" class="ulink" target="_top">#93777</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93773" class="ulink" target="_top">#93773</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Authentication
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Correctly remove domain from realm when rewriting <code class="literal">Authentication</code> for compatibility with node versions that don&#8217;t
support domains <a href="https://github.com/elastic/elasticsearch/pull/93276" class="ulink" target="_top">#93276</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Authorization
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix Security&#8217;s expression resolver to not remove unavailable but authorized names <a href="https://github.com/elastic/elasticsearch/pull/92625" class="ulink" target="_top">#92625</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
CCR
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Deduplicate Heavy CCR Repository CS Requests <a href="https://github.com/elastic/elasticsearch/pull/91398" class="ulink" target="_top">#91398</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
CRUD
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Avoid NPE in Stateless Get/mGet <a href="https://github.com/elastic/elasticsearch/pull/94164" class="ulink" target="_top">#94164</a>
</li>
<li class="listitem">
Do not refresh all indices in <code class="literal">TransportBulkAction</code> <a href="https://github.com/elastic/elasticsearch/pull/93417" class="ulink" target="_top">#93417</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Cluster Coordination
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Delay master task failure notifications until commit <a href="https://github.com/elastic/elasticsearch/pull/92693" class="ulink" target="_top">#92693</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92677" class="ulink" target="_top">#92677</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Data streams
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow different filters per <code class="literal">DataStream</code> in a <code class="literal">DataStreamAlias</code> <a href="https://github.com/elastic/elasticsearch/pull/92692" class="ulink" target="_top">#92692</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92050" class="ulink" target="_top">#92050</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Geo
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Build index qualified name in cross cluster vector tile search <a href="https://github.com/elastic/elasticsearch/pull/94574" class="ulink" target="_top">#94574</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94557" class="ulink" target="_top">#94557</a>)
</li>
<li class="listitem">
Check <code class="literal">GeohexGrid</code> bounds on geopoint using spherical coordinates <a href="https://github.com/elastic/elasticsearch/pull/92460" class="ulink" target="_top">#92460</a>
</li>
<li class="listitem">
Fix bug when clipping Geometry collections in vector tiles <a href="https://github.com/elastic/elasticsearch/pull/93562" class="ulink" target="_top">#93562</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Health
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Take into account <code class="literal">max_headroom</code> in disk watermark calculations <a href="https://github.com/elastic/elasticsearch/pull/93157" class="ulink" target="_top">#93157</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93155" class="ulink" target="_top">#93155</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
ILM+SLM
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow ILM step transition to the phase terminal step <a href="https://github.com/elastic/elasticsearch/pull/91754" class="ulink" target="_top">#91754</a>
</li>
<li class="listitem">
Avoiding <code class="literal">BulkProcessor</code> deadlock in ILMHistoryStore <a href="https://github.com/elastic/elasticsearch/pull/91238" class="ulink" target="_top">#91238</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/68468" class="ulink" target="_top">#68468</a>, <a href="https://github.com/elastic/elasticsearch/issues/50440" class="ulink" target="_top">#50440</a>)
</li>
<li class="listitem">
Fixed changing only the <code class="literal">forceMerge</code> flag in <code class="literal">SearchableSnapshotAction</code> wouldn&#8217;t update the policy <a href="https://github.com/elastic/elasticsearch/pull/93847" class="ulink" target="_top">#93847</a>
</li>
<li class="listitem">
Preventing ILM and SLM runtime state from being stored in a snapshot <a href="https://github.com/elastic/elasticsearch/pull/92252" class="ulink" target="_top">#92252</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/CLI
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Restore printing bootstrap checks as errors <a href="https://github.com/elastic/elasticsearch/pull/93178" class="ulink" target="_top">#93178</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93074" class="ulink" target="_top">#93074</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Core
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add <code class="literal">jdk.internal.reflect</code> permission to es codebase <a href="https://github.com/elastic/elasticsearch/pull/92387" class="ulink" target="_top">#92387</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92356" class="ulink" target="_top">#92356</a>)
</li>
<li class="listitem">
Add checks for exception loops through suppressed exceptions only <a href="https://github.com/elastic/elasticsearch/pull/93944" class="ulink" target="_top">#93944</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93943" class="ulink" target="_top">#93943</a>)
</li>
<li class="listitem">
Ensure one-shot wrappers release their delegates <a href="https://github.com/elastic/elasticsearch/pull/92928" class="ulink" target="_top">#92928</a>
</li>
<li class="listitem">
Fix <code class="literal">InputStream#readAllBytes</code> on <code class="literal">InputStreamIndexInput</code> <a href="https://github.com/elastic/elasticsearch/pull/92680" class="ulink" target="_top">#92680</a>
</li>
<li class="listitem">
Fix indices resolver for datemath with colon <a href="https://github.com/elastic/elasticsearch/pull/92973" class="ulink" target="_top">#92973</a>
</li>
<li class="listitem">
Make <code class="literal">FilterStreamInput</code> less trappy <a href="https://github.com/elastic/elasticsearch/pull/92422" class="ulink" target="_top">#92422</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Plugins
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Ensure ordering of plugin initialization <a href="https://github.com/elastic/elasticsearch/pull/93882" class="ulink" target="_top">#93882</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93851" class="ulink" target="_top">#93851</a>)
</li>
<li class="listitem">
Fix unclosed directory stream in <code class="literal">ClassReaders</code> <a href="https://github.com/elastic/elasticsearch/pull/92890" class="ulink" target="_top">#92890</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92866" class="ulink" target="_top">#92866</a>)
</li>
<li class="listitem">
Update the version of asm used by plugin scanner <a href="https://github.com/elastic/elasticsearch/pull/92784" class="ulink" target="_top">#92784</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92782" class="ulink" target="_top">#92782</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/REST API
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
[Rest Api Compatibility] Format response media type with parameters <a href="https://github.com/elastic/elasticsearch/pull/92695" class="ulink" target="_top">#92695</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Scripting
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix NPE when method was called on an array type <a href="https://github.com/elastic/elasticsearch/pull/91713" class="ulink" target="_top">#91713</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/87562" class="ulink" target="_top">#87562</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Settings
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix parse failures for ILM operator settings <a href="https://github.com/elastic/elasticsearch/pull/94477" class="ulink" target="_top">#94477</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94465" class="ulink" target="_top">#94465</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest Node
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Better names and types for ingest stats <a href="https://github.com/elastic/elasticsearch/pull/93533" class="ulink" target="_top">#93533</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/80763" class="ulink" target="_top">#80763</a>)
</li>
<li class="listitem">
Correctly handle an exception case for ingest failure <a href="https://github.com/elastic/elasticsearch/pull/92455" class="ulink" target="_top">#92455</a>
</li>
<li class="listitem">
Disable ingest-attachment logging <a href="https://github.com/elastic/elasticsearch/pull/93878" class="ulink" target="_top">#93878</a>
</li>
<li class="listitem">
Download the geoip databases only when needed <a href="https://github.com/elastic/elasticsearch/pull/92335" class="ulink" target="_top">#92335</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/90673" class="ulink" target="_top">#90673</a>)
</li>
<li class="listitem">
Forwarding simulate calls to ingest nodes <a href="https://github.com/elastic/elasticsearch/pull/92171" class="ulink" target="_top">#92171</a>
</li>
<li class="listitem">
Grok returns a list of matches for repeated pattern names #92092 <a href="https://github.com/elastic/elasticsearch/pull/92586" class="ulink" target="_top">#92586</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92092" class="ulink" target="_top">#92092</a>)
</li>
<li class="listitem">
Handle a default/request pipeline and a final pipeline with minimal additional overhead <a href="https://github.com/elastic/elasticsearch/pull/93329" class="ulink" target="_top">#93329</a> (issues: <a href="https://github.com/elastic/elasticsearch/issues/92843" class="ulink" target="_top">#92843</a>, <a href="https://github.com/elastic/elasticsearch/issues/81244" class="ulink" target="_top">#81244</a>, <a href="https://github.com/elastic/elasticsearch/issues/93118" class="ulink" target="_top">#93118</a>)
</li>
<li class="listitem">
Ingest-attachment module tika dependency versions <a href="https://github.com/elastic/elasticsearch/pull/93755" class="ulink" target="_top">#93755</a>
</li>
<li class="listitem">
More accurate total ingest stats <a href="https://github.com/elastic/elasticsearch/pull/91730" class="ulink" target="_top">#91730</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/91358" class="ulink" target="_top">#91358</a>)
</li>
<li class="listitem">
Speed up ingest geoip processors <a href="https://github.com/elastic/elasticsearch/pull/92372" class="ulink" target="_top">#92372</a>
</li>
<li class="listitem">
Speed up ingest set and append processors <a href="https://github.com/elastic/elasticsearch/pull/92395" class="ulink" target="_top">#92395</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allocate trained models if zone awareness attributes not set <a href="https://github.com/elastic/elasticsearch/pull/94128" class="ulink" target="_top">#94128</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94123" class="ulink" target="_top">#94123</a>)
</li>
<li class="listitem">
Fix data counts race condition when starting a datafeed <a href="https://github.com/elastic/elasticsearch/pull/93324" class="ulink" target="_top">#93324</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93298" class="ulink" target="_top">#93298</a>)
</li>
<li class="listitem">
Fix tokenization bug when handling normalization in BERT and MPNet <a href="https://github.com/elastic/elasticsearch/pull/92329" class="ulink" target="_top">#92329</a>
</li>
<li class="listitem">
Free resources correctly when model loading is cancelled <a href="https://github.com/elastic/elasticsearch/pull/92204" class="ulink" target="_top">#92204</a>
</li>
<li class="listitem">
Stop the <code class="literal">frequent_items</code> aggregation reporting a subset when a superset exists <a href="https://github.com/elastic/elasticsearch/pull/92239" class="ulink" target="_top">#92239</a>
</li>
<li class="listitem">
Use long inference timeout at ingest <a href="https://github.com/elastic/elasticsearch/pull/93731" class="ulink" target="_top">#93731</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Mapping
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix dynamic mapping detection for invalid dates <a href="https://github.com/elastic/elasticsearch/pull/94115" class="ulink" target="_top">#94115</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93888" class="ulink" target="_top">#93888</a>)
</li>
<li class="listitem">
No length check for source-only keyword fields <a href="https://github.com/elastic/elasticsearch/pull/93299" class="ulink" target="_top">#93299</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/9304" class="ulink" target="_top">#9304</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Network
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Delay Connection#onRemoved while pending <a href="https://github.com/elastic/elasticsearch/pull/92546" class="ulink" target="_top">#92546</a>
</li>
<li class="listitem">
Fix fransport handshake starting before tls handshake completes <a href="https://github.com/elastic/elasticsearch/pull/90534" class="ulink" target="_top">#90534</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/77999" class="ulink" target="_top">#77999</a>)
</li>
<li class="listitem">
Protect <code class="literal">NodeConnectionsService</code> from stale conns <a href="https://github.com/elastic/elasticsearch/pull/92558" class="ulink" target="_top">#92558</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92029" class="ulink" target="_top">#92029</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Recovery
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Disable recovery monitor before recovery start <a href="https://github.com/elastic/elasticsearch/pull/93551" class="ulink" target="_top">#93551</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93542" class="ulink" target="_top">#93542</a>)
</li>
<li class="listitem">
Fix potential leak in <code class="literal">RemoteRecoveryHandler</code> <a href="https://github.com/elastic/elasticsearch/pull/91802" class="ulink" target="_top">#91802</a>
</li>
<li class="listitem">
Report recovered files as recovered from snapshot for fully mounted searchable snapshots <a href="https://github.com/elastic/elasticsearch/pull/92976" class="ulink" target="_top">#92976</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Rollup
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Downsampling unmapped text fields <a href="https://github.com/elastic/elasticsearch/pull/94387" class="ulink" target="_top">#94387</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94346" class="ulink" target="_top">#94346</a>)
</li>
<li class="listitem">
Propagate timestamp format and convert nanoseconds to milliseconds <a href="https://github.com/elastic/elasticsearch/pull/94141" class="ulink" target="_top">#94141</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94085" class="ulink" target="_top">#94085</a>)
</li>
<li class="listitem">
Stop processing <code class="literal">TransportDownsampleAction</code> on failure <a href="https://github.com/elastic/elasticsearch/pull/94624" class="ulink" target="_top">#94624</a>
</li>
<li class="listitem">
Support downsampling of histogram as labels <a href="https://github.com/elastic/elasticsearch/pull/93445" class="ulink" target="_top">#93445</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93263" class="ulink" target="_top">#93263</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add null check for sort fields over collapse fields <a href="https://github.com/elastic/elasticsearch/pull/94546" class="ulink" target="_top">#94546</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94407" class="ulink" target="_top">#94407</a>)
</li>
<li class="listitem">
Annotated highlighter does not match when search contains both annotation and annotated term <a href="https://github.com/elastic/elasticsearch/pull/92920" class="ulink" target="_top">#92920</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/91944" class="ulink" target="_top">#91944</a>)
</li>
<li class="listitem">
Clear field caps index responses on cancelled <a href="https://github.com/elastic/elasticsearch/pull/93716" class="ulink" target="_top">#93716</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93029" class="ulink" target="_top">#93029</a>)
</li>
<li class="listitem">
Do not include frozen indices in PIT by default <a href="https://github.com/elastic/elasticsearch/pull/94377" class="ulink" target="_top">#94377</a>
</li>
<li class="listitem">
Fix NPE thrown by prefix query in strange scenarios <a href="https://github.com/elastic/elasticsearch/pull/94369" class="ulink" target="_top">#94369</a>
</li>
<li class="listitem">
Fix _id field fetch issue. <a href="https://github.com/elastic/elasticsearch/pull/94528" class="ulink" target="_top">#94528</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94515" class="ulink" target="_top">#94515</a>)
</li>
<li class="listitem">
Fix metadata <code class="literal">_size</code> when it comes to stored fields extraction <a href="https://github.com/elastic/elasticsearch/pull/94483" class="ulink" target="_top">#94483</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/94468" class="ulink" target="_top">#94468</a>)
</li>
<li class="listitem">
Fix missing override for matches in <code class="literal">ProfileWeight</code> <a href="https://github.com/elastic/elasticsearch/pull/92360" class="ulink" target="_top">#92360</a>
</li>
<li class="listitem">
Nested path info shouldn&#8217;t be added during <code class="literal">copy_to</code> <a href="https://github.com/elastic/elasticsearch/pull/93340" class="ulink" target="_top">#93340</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93117" class="ulink" target="_top">#93117</a>)
</li>
<li class="listitem">
Use all profiling events on startup <a href="https://github.com/elastic/elasticsearch/pull/92087" class="ulink" target="_top">#92087</a>
</li>
<li class="listitem">
Use keyword analyzer for untokenized fields in <code class="literal">TermVectorsService</code> <a href="https://github.com/elastic/elasticsearch/pull/94518" class="ulink" target="_top">#94518</a>
</li>
<li class="listitem">
[Profiling] Adjust handling of last data slice <a href="https://github.com/elastic/elasticsearch/pull/94283" class="ulink" target="_top">#94283</a>
</li>
<li class="listitem">
[Profiling] Ensure responses are only sent once <a href="https://github.com/elastic/elasticsearch/pull/93692" class="ulink" target="_top">#93692</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93691" class="ulink" target="_top">#93691</a>)
</li>
<li class="listitem">
[Profiling] Handle response processing errors <a href="https://github.com/elastic/elasticsearch/pull/93860" class="ulink" target="_top">#93860</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Snapshot/Restore
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix unhandled exception when blobstore repository contains unexpected file <a href="https://github.com/elastic/elasticsearch/pull/93914" class="ulink" target="_top">#93914</a>
</li>
<li class="listitem">
Support for GCS proxies everywhere in the GCS API <a href="https://github.com/elastic/elasticsearch/pull/92192" class="ulink" target="_top">#92192</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/91952" class="ulink" target="_top">#91952</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Stats
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Avoid capturing cluster state in TBbNA <a href="https://github.com/elastic/elasticsearch/pull/92255" class="ulink" target="_top">#92255</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
TSDB
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix synthetic <code class="literal">_source</code> for sparse <code class="literal">_doc_count</code> field <a href="https://github.com/elastic/elasticsearch/pull/91769" class="ulink" target="_top">#91769</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/91731" class="ulink" target="_top">#91731</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Task Management
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix context leak in list tasks API <a href="https://github.com/elastic/elasticsearch/pull/93431" class="ulink" target="_top">#93431</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/93428" class="ulink" target="_top">#93428</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Transform
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Integrate "sourceHasChanged" call into failure handling and retry logic <a href="https://github.com/elastic/elasticsearch/pull/92762" class="ulink" target="_top">#92762</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92133" class="ulink" target="_top">#92133</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Vector Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix <code class="literal">maxScore</code> calculation for kNN search <a href="https://github.com/elastic/elasticsearch/pull/93875" class="ulink" target="_top">#93875</a>
</li>
<li class="listitem">
Fix explain for kNN search matches <a href="https://github.com/elastic/elasticsearch/pull/93876" class="ulink" target="_top">#93876</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="enhancement-8.7.0"></a>Enhancements<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Aggregations
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Optimize composite agg with leading global ordinal value source <a href="https://github.com/elastic/elasticsearch/pull/92197" class="ulink" target="_top">#92197</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Allocation
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add <code class="literal">forecasted_write_load</code> and <code class="literal">forecasted_shard_size_in_bytes</code> to the endpoint <a href="https://github.com/elastic/elasticsearch/pull/92303" class="ulink" target="_top">#92303</a>
</li>
<li class="listitem">
Expose tier balancing stats via internal endpoint <a href="https://github.com/elastic/elasticsearch/pull/92199" class="ulink" target="_top">#92199</a>
</li>
<li class="listitem">
Introduce ShardRouting.Role <a href="https://github.com/elastic/elasticsearch/pull/92668" class="ulink" target="_top">#92668</a>
</li>
<li class="listitem">
Prevalidate node removal API (pt. 2) <a href="https://github.com/elastic/elasticsearch/pull/91256" class="ulink" target="_top">#91256</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/87776" class="ulink" target="_top">#87776</a>)
</li>
<li class="listitem">
Simulate moves using cluster_concurrent_rebalance=2 <a href="https://github.com/elastic/elasticsearch/pull/93977" class="ulink" target="_top">#93977</a>
</li>
<li class="listitem">
Unpromotables skip replication and peer recovery <a href="https://github.com/elastic/elasticsearch/pull/93210" class="ulink" target="_top">#93210</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Authentication
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add new <code class="literal">token_type</code> setting to JWT realm <a href="https://github.com/elastic/elasticsearch/pull/91536" class="ulink" target="_top">#91536</a>
</li>
<li class="listitem">
JWT realm - Initial support for access tokens <a href="https://github.com/elastic/elasticsearch/pull/91781" class="ulink" target="_top">#91781</a>
</li>
<li class="listitem">
JWT realm - Simplify token principal calculation <a href="https://github.com/elastic/elasticsearch/pull/92315" class="ulink" target="_top">#92315</a>
</li>
<li class="listitem">
JWT realm - add support for required claims <a href="https://github.com/elastic/elasticsearch/pull/92314" class="ulink" target="_top">#92314</a>
</li>
<li class="listitem">
Support custom PBKDF2 password hashes <a href="https://github.com/elastic/elasticsearch/pull/92871" class="ulink" target="_top">#92871</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Authorization
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allowed indices matcher supports nested limited roles <a href="https://github.com/elastic/elasticsearch/pull/93306" class="ulink" target="_top">#93306</a>
</li>
<li class="listitem">
Extra <code class="literal">kibana_system</code> privileges for Fleet transform upgrades <a href="https://github.com/elastic/elasticsearch/pull/91499" class="ulink" target="_top">#91499</a>
</li>
<li class="listitem">
Pre-authorize child search transport actions <a href="https://github.com/elastic/elasticsearch/pull/91886" class="ulink" target="_top">#91886</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Cluster Coordination
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add links to troubleshooting docs <a href="https://github.com/elastic/elasticsearch/pull/92755" class="ulink" target="_top">#92755</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92741" class="ulink" target="_top">#92741</a>)
</li>
<li class="listitem">
Improve node-{join,left} logging for troubleshooting <a href="https://github.com/elastic/elasticsearch/pull/92742" class="ulink" target="_top">#92742</a>
</li>
<li class="listitem">
Repeat <code class="literal">cluster.initial_master_nodes</code> log warning <a href="https://github.com/elastic/elasticsearch/pull/92744" class="ulink" target="_top">#92744</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
EQL
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
EQL Samples: add support for multiple samples per key <a href="https://github.com/elastic/elasticsearch/pull/91783" class="ulink" target="_top">#91783</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Engine
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add commits listener for <code class="literal">InternalEngine</code> and <code class="literal">CombinedDeletionPolicy</code> <a href="https://github.com/elastic/elasticsearch/pull/92017" class="ulink" target="_top">#92017</a>
</li>
<li class="listitem">
Add primary term supplier to Engine.IndexCommitListener <a href="https://github.com/elastic/elasticsearch/pull/92101" class="ulink" target="_top">#92101</a>
</li>
<li class="listitem">
Adjust range of allowed percentages of deletes in an index <a href="https://github.com/elastic/elasticsearch/pull/93188" class="ulink" target="_top">#93188</a>
</li>
<li class="listitem">
Diff the list of filenames that are added by each new commit <a href="https://github.com/elastic/elasticsearch/pull/92238" class="ulink" target="_top">#92238</a>
</li>
<li class="listitem">
Set a fixed compound file threshold of 1GB <a href="https://github.com/elastic/elasticsearch/pull/92659" class="ulink" target="_top">#92659</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Geo
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add methods to H3#hexRing to prevent allocating long arrays <a href="https://github.com/elastic/elasticsearch/pull/92711" class="ulink" target="_top">#92711</a>
</li>
<li class="listitem">
Add methods to prevent allocating long arrays during child navigation on H3 api <a href="https://github.com/elastic/elasticsearch/pull/92099" class="ulink" target="_top">#92099</a>
</li>
<li class="listitem">
Add new H3 api method #h3ToNoChildrenIntersecting <a href="https://github.com/elastic/elasticsearch/pull/91673" class="ulink" target="_top">#91673</a>
</li>
<li class="listitem">
In H3, compute destination point from distance and azimuth using planar 3d math" <a href="https://github.com/elastic/elasticsearch/pull/93084" class="ulink" target="_top">#93084</a>
</li>
<li class="listitem">
Protect H3 library against integer overflow <a href="https://github.com/elastic/elasticsearch/pull/92829" class="ulink" target="_top">#92829</a>
</li>
<li class="listitem">
Reduce number of object allocations in H3#h3ToGeoBoundary <a href="https://github.com/elastic/elasticsearch/pull/91586" class="ulink" target="_top">#91586</a>
</li>
<li class="listitem">
Speed H3 library by using <code class="literal">FastMath</code> implementation for trigonometric functions <a href="https://github.com/elastic/elasticsearch/pull/91839" class="ulink" target="_top">#91839</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Health
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Expose Health Api telemetry via xpack <a href="https://github.com/elastic/elasticsearch/pull/91708" class="ulink" target="_top">#91708</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/90877" class="ulink" target="_top">#90877</a>)
</li>
<li class="listitem">
Health api stats <a href="https://github.com/elastic/elasticsearch/pull/91559" class="ulink" target="_top">#91559</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Indices APIs
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add <code class="literal">ignore_missing_component_templates</code> config option <a href="https://github.com/elastic/elasticsearch/pull/92436" class="ulink" target="_top">#92436</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92426" class="ulink" target="_top">#92426</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/CLI
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Scan stable plugins for named components upon install <a href="https://github.com/elastic/elasticsearch/pull/92528" class="ulink" target="_top">#92528</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Core
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add log level for JVM logs <a href="https://github.com/elastic/elasticsearch/pull/92382" class="ulink" target="_top">#92382</a>
</li>
<li class="listitem">
Added new field <code class="literal">rollout_duration_seconds</code> to fleet-actions <a href="https://github.com/elastic/elasticsearch/pull/92640" class="ulink" target="_top">#92640</a>
</li>
<li class="listitem">
Bind the readiness service to the wildcard address <a href="https://github.com/elastic/elasticsearch/pull/91329" class="ulink" target="_top">#91329</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/90997" class="ulink" target="_top">#90997</a>)
</li>
<li class="listitem">
Provide locally mounted secure settings implementation <a href="https://github.com/elastic/elasticsearch/pull/93392" class="ulink" target="_top">#93392</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Plugins
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Check stable plugin version at install and load time <a href="https://github.com/elastic/elasticsearch/pull/91780" class="ulink" target="_top">#91780</a>
</li>
<li class="listitem">
Example stable plugins with settings <a href="https://github.com/elastic/elasticsearch/pull/92334" class="ulink" target="_top">#92334</a>
</li>
<li class="listitem">
Load stable plugins as synthetic modules <a href="https://github.com/elastic/elasticsearch/pull/91869" class="ulink" target="_top">#91869</a>
</li>
<li class="listitem">
Settings api for stable plugins <a href="https://github.com/elastic/elasticsearch/pull/91467" class="ulink" target="_top">#91467</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Scripting
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Script: Metadata <code class="literal">validateMetadata</code> optimization <a href="https://github.com/elastic/elasticsearch/pull/93333" class="ulink" target="_top">#93333</a>
</li>
<li class="listitem">
Short-circuit painless def equality <a href="https://github.com/elastic/elasticsearch/pull/92102" class="ulink" target="_top">#92102</a>
</li>
<li class="listitem">
Use primitive types rather than boxing/unboxing for iterating over primitive arrays from defs <a href="https://github.com/elastic/elasticsearch/pull/92025" class="ulink" target="_top">#92025</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest Node
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Cache the creation of parsers within DateProcessor <a href="https://github.com/elastic/elasticsearch/pull/92880" class="ulink" target="_top">#92880</a>
</li>
<li class="listitem">
Make <code class="literal">GeoIpProcessor</code> backing database instance pluggable <a href="https://github.com/elastic/elasticsearch/pull/93285" class="ulink" target="_top">#93285</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add identification of multimodal distribution to anomaly explanations <a href="https://github.com/elastic/ml-cpp/pull/2440" class="ulink" target="_top">#2440</a>
</li>
<li class="listitem">
Add the ability to include and exclude values in Frequent items <a href="https://github.com/elastic/elasticsearch/pull/92414" class="ulink" target="_top">#92414</a>
</li>
<li class="listitem">
Better error when <code class="literal">aggregate_metric_double</code> used in scrolling datafeeds <a href="https://github.com/elastic/elasticsearch/pull/92232" class="ulink" target="_top">#92232</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/90592" class="ulink" target="_top">#90592</a>)
</li>
<li class="listitem">
Implement extension pruning in frequent items to improve runtime <a href="https://github.com/elastic/elasticsearch/pull/92322" class="ulink" target="_top">#92322</a>
</li>
<li class="listitem">
Improve <code class="literal">frequent_items</code> performance using global ordinals <a href="https://github.com/elastic/elasticsearch/pull/93304" class="ulink" target="_top">#93304</a>
</li>
<li class="listitem">
Improve anomaly detection results indexing speed <a href="https://github.com/elastic/elasticsearch/pull/92417" class="ulink" target="_top">#92417</a>
</li>
<li class="listitem">
Improve frequent items runtime <a href="https://github.com/elastic/elasticsearch/pull/93255" class="ulink" target="_top">#93255</a>
</li>
<li class="listitem">
Increase the default timeout for the start trained model deployment API <a href="https://github.com/elastic/elasticsearch/pull/92328" class="ulink" target="_top">#92328</a>
</li>
<li class="listitem">
Option to delete user-added annotations for the reset/delete job APIs <a href="https://github.com/elastic/elasticsearch/pull/91698" class="ulink" target="_top">#91698</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/74310" class="ulink" target="_top">#74310</a>)
</li>
<li class="listitem">
Persist data counts and datafeed timing stats asynchronously <a href="https://github.com/elastic/elasticsearch/pull/93000" class="ulink" target="_top">#93000</a>
</li>
<li class="listitem">
Remove the PyTorch inference work queue as now handled in Elasticsearch <a href="https://github.com/elastic/ml-cpp/pull/2456" class="ulink" target="_top">#2456</a>
</li>
<li class="listitem">
Text Embedding search <a href="https://github.com/elastic/elasticsearch/pull/93531" class="ulink" target="_top">#93531</a>
</li>
<li class="listitem">
Upgrade PyTorch to version 1.13.1 <a href="https://github.com/elastic/ml-cpp/pull/2430" class="ulink" target="_top">#2430</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Mapping
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Switch to Lucene&#8217;s new <code class="literal">IntField/LongField/FloatField/DoubleField</code> <a href="https://github.com/elastic/elasticsearch/pull/93165" class="ulink" target="_top">#93165</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Monitoring
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add kibana.stats.elasticsearch_client stats to the monitoring index templates. <a href="https://github.com/elastic/elasticsearch/pull/91508" class="ulink" target="_top">#91508</a>
</li>
<li class="listitem">
Add monitoring mappings for es ingest metricset <a href="https://github.com/elastic/elasticsearch/pull/92950" class="ulink" target="_top">#92950</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Network
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Deserialize responses on the handling thread-pool <a href="https://github.com/elastic/elasticsearch/pull/91367" class="ulink" target="_top">#91367</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Performance
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add vector distance scoring to micro benchmarks <a href="https://github.com/elastic/elasticsearch/pull/92340" class="ulink" target="_top">#92340</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Query Languages
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Introduce parameterized rule and executor <a href="https://github.com/elastic/elasticsearch/pull/92428" class="ulink" target="_top">#92428</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Recovery
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make clean up files step configurable for peer-recovery of replicas <a href="https://github.com/elastic/elasticsearch/pull/92490" class="ulink" target="_top">#92490</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Access term dictionary more efficiently <a href="https://github.com/elastic/elasticsearch/pull/92269" class="ulink" target="_top">#92269</a>
</li>
<li class="listitem">
Add <code class="literal">term</code> query support to <code class="literal">rank_features</code> mapped field <a href="https://github.com/elastic/elasticsearch/pull/93247" class="ulink" target="_top">#93247</a>
</li>
<li class="listitem">
Add new <code class="literal">query_vector_builder</code> option to knn search clause <a href="https://github.com/elastic/elasticsearch/pull/93331" class="ulink" target="_top">#93331</a>
</li>
<li class="listitem">
Add profiling plugin <a href="https://github.com/elastic/elasticsearch/pull/91640" class="ulink" target="_top">#91640</a>
</li>
<li class="listitem">
Enable profiling plugin by default <a href="https://github.com/elastic/elasticsearch/pull/92787" class="ulink" target="_top">#92787</a>
</li>
<li class="listitem">
Get stackframes and executables more concurrently <a href="https://github.com/elastic/elasticsearch/pull/93559" class="ulink" target="_top">#93559</a>
</li>
<li class="listitem">
Improve the false positive rate of the bloom filter by setting 7 hash functions <a href="https://github.com/elastic/elasticsearch/pull/93283" class="ulink" target="_top">#93283</a>
</li>
<li class="listitem">
Increase the number of threads of GET threadpool <a href="https://github.com/elastic/elasticsearch/pull/92309" class="ulink" target="_top">#92309</a>
</li>
<li class="listitem">
Instrument Weight#count in ProfileWeight <a href="https://github.com/elastic/elasticsearch/pull/85656" class="ulink" target="_top">#85656</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/85203" class="ulink" target="_top">#85203</a>)
</li>
<li class="listitem">
Reduce memory usage of match all bitset <a href="https://github.com/elastic/elasticsearch/pull/92777" class="ulink" target="_top">#92777</a>
</li>
<li class="listitem">
Runtime fields to optionally ignore script errors <a href="https://github.com/elastic/elasticsearch/pull/92380" class="ulink" target="_top">#92380</a>
</li>
<li class="listitem">
Speed up retrieval of data for flamegraphs <a href="https://github.com/elastic/elasticsearch/pull/93448" class="ulink" target="_top">#93448</a>
</li>
<li class="listitem">
Support retrieving inlined stack frames <a href="https://github.com/elastic/elasticsearch/pull/92863" class="ulink" target="_top">#92863</a>
</li>
<li class="listitem">
[Profiling] Reduce GC pressure <a href="https://github.com/elastic/elasticsearch/pull/93590" class="ulink" target="_top">#93590</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Security
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Configurable retention period for invalidated or expired API keys <a href="https://github.com/elastic/elasticsearch/pull/92219" class="ulink" target="_top">#92219</a>
</li>
<li class="listitem">
Record timestamp on API key invalidation <a href="https://github.com/elastic/elasticsearch/pull/91873" class="ulink" target="_top">#91873</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Snapshot/Restore
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make <code class="literal">RecoveryPlannerService</code> optional <a href="https://github.com/elastic/elasticsearch/pull/92489" class="ulink" target="_top">#92489</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
TSDB
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Enable bloom filter for <code class="literal">_id</code> field in tsdb indices <a href="https://github.com/elastic/elasticsearch/pull/92115" class="ulink" target="_top">#92115</a>
</li>
<li class="listitem">
Improve downsampling performance by removing map lookups <a href="https://github.com/elastic/elasticsearch/pull/92494" class="ulink" target="_top">#92494</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/90226" class="ulink" target="_top">#90226</a>)
</li>
<li class="listitem">
Minor TSDB parsing speedup <a href="https://github.com/elastic/elasticsearch/pull/92276" class="ulink" target="_top">#92276</a>
</li>
<li class="listitem">
Skip duplicate checks on segments that don&#8217;t contain the document&#8217;s timestamp <a href="https://github.com/elastic/elasticsearch/pull/92456" class="ulink" target="_top">#92456</a>
</li>
<li class="listitem">
Support <code class="literal">fields</code> in synthetic source in last cases <a href="https://github.com/elastic/elasticsearch/pull/91595" class="ulink" target="_top">#91595</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Task Management
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">TransportGetTaskAction:</code> Wait for the task asynchronously <a href="https://github.com/elastic/elasticsearch/pull/93375" class="ulink" target="_top">#93375</a>
</li>
<li class="listitem">
<code class="literal">TransportListTaskAction:</code> wait for tasks to finish asynchronously <a href="https://github.com/elastic/elasticsearch/pull/90977" class="ulink" target="_top">#90977</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/89564" class="ulink" target="_top">#89564</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Transform
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add from parameter to Transform Start API <a href="https://github.com/elastic/elasticsearch/pull/91116" class="ulink" target="_top">#91116</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/88646" class="ulink" target="_top">#88646</a>)
</li>
<li class="listitem">
Support "offset" parameter in <code class="literal">DateHistogramGroupSource</code> <a href="https://github.com/elastic/elasticsearch/pull/93203" class="ulink" target="_top">#93203</a>
</li>
<li class="listitem">
Trigger state persistence based on time <a href="https://github.com/elastic/elasticsearch/pull/93221" class="ulink" target="_top">#93221</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Vector Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow <code class="literal">null</code> to be provided for <code class="literal">dense_vector</code> field values <a href="https://github.com/elastic/elasticsearch/pull/93388" class="ulink" target="_top">#93388</a>
</li>
<li class="listitem">
Allow more than one KNN search clause <a href="https://github.com/elastic/elasticsearch/pull/92118" class="ulink" target="_top">#92118</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/91187" class="ulink" target="_top">#91187</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Watcher
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add ability for Watcher&#8217;s webhook actions to send additional header <a href="https://github.com/elastic/elasticsearch/pull/93426" class="ulink" target="_top">#93426</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="feature-8.7.0"></a>New features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Distributed
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Secure settings that can fall back to yml in Stateless <a href="https://github.com/elastic/elasticsearch/pull/91925" class="ulink" target="_top">#91925</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Geo
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Geohex aggregation on <code class="literal">geo_shape</code> field <a href="https://github.com/elastic/elasticsearch/pull/91956" class="ulink" target="_top">#91956</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/90163" class="ulink" target="_top">#90163</a>)
</li>
<li class="listitem">
Support geo_grid ingest processor <a href="https://github.com/elastic/elasticsearch/pull/93370" class="ulink" target="_top">#93370</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/92473" class="ulink" target="_top">#92473</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Health
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The Health API is now generally available <a href="https://github.com/elastic/elasticsearch/pull/92879" class="ulink" target="_top">#92879</a>
</li>
<li class="listitem">
[HealthAPI] Add size parameter that controls the number of affected resources returned <a href="https://github.com/elastic/elasticsearch/pull/92399" class="ulink" target="_top">#92399</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/91930" class="ulink" target="_top">#91930</a>)
</li>
<li class="listitem">
[HealthAPI] Add support for the FEATURE_STATE affected resource <a href="https://github.com/elastic/elasticsearch/pull/92296" class="ulink" target="_top">#92296</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/91353" class="ulink" target="_top">#91353</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Infra/Plugins
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
[Fleet] Add files and files data index templates and ILM policies <a href="https://github.com/elastic/elasticsearch/pull/91413" class="ulink" target="_top">#91413</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest Node
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Redact Ingest Processor <a href="https://github.com/elastic/elasticsearch/pull/92951" class="ulink" target="_top">#92951</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Machine Learning
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make <code class="literal">frequent_item_sets</code> aggregation GA <a href="https://github.com/elastic/elasticsearch/pull/93421" class="ulink" target="_top">#93421</a>
</li>
<li class="listitem">
Make native inference generally available <a href="https://github.com/elastic/elasticsearch/pull/92213" class="ulink" target="_top">#92213</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
TSDB
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add a TSDB rate aggregation <a href="https://github.com/elastic/elasticsearch/pull/90447" class="ulink" target="_top">#90447</a>
</li>
<li class="listitem">
Downsampling GA <a href="https://github.com/elastic/elasticsearch/pull/92913" class="ulink" target="_top">#92913</a>
</li>
<li class="listitem">
Release time_series and rate (on counter fields) aggegations as tech preview <a href="https://github.com/elastic/elasticsearch/pull/93546" class="ulink" target="_top">#93546</a>
</li>
<li class="listitem">
Time series (TSDS) GA <a href="https://github.com/elastic/elasticsearch/pull/91519" class="ulink" target="_top">#91519</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Transform
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Transform _schedule_now API <a href="https://github.com/elastic/elasticsearch/pull/92948" class="ulink" target="_top">#92948</a> (issue: <a href="https://github.com/elastic/elasticsearch/issues/44722" class="ulink" target="_top">#44722</a>)
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="upgrade-8.7.0"></a>Upgrades<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/release-notes/8.7.0.asciidoc">edit</a></h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Infra/Core
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Align all usages of Jackson to be 2.14.2 <a href="https://github.com/elastic/elasticsearch/pull/93438" class="ulink" target="_top">#93438</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Ingest Node
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Upgrading tika to 2.6.0 <a href="https://github.com/elastic/elasticsearch/pull/92104" class="ulink" target="_top">#92104</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Network
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Upgrade to Netty 4.1.85 <a href="https://github.com/elastic/elasticsearch/pull/91846" class="ulink" target="_top">#91846</a>
</li>
<li class="listitem">
Upgrade to Netty 4.1.86 <a href="https://github.com/elastic/elasticsearch/pull/92587" class="ulink" target="_top">#92587</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Query Languages
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Upgrade antlr to 4.11.1 for ql, eql and sql <a href="https://github.com/elastic/elasticsearch/pull/93238" class="ulink" target="_top">#93238</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Search
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Upgrade to Lucene 9.5.0 <a href="https://github.com/elastic/elasticsearch/pull/93385" class="ulink" target="_top">#93385</a>
</li>
<li class="listitem">
Upgrade to lucene-9.5.0-snapshot-d19c3e2e0ed <a href="https://github.com/elastic/elasticsearch/pull/92957" class="ulink" target="_top">#92957</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Snapshot/Restore
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Align all usages of protobuf to be 3.21.9 <a href="https://github.com/elastic/elasticsearch/pull/92123" class="ulink" target="_top">#92123</a>
</li>
<li class="listitem">
Bump reactor netty version <a href="https://github.com/elastic/elasticsearch/pull/92457" class="ulink" target="_top">#92457</a>
</li>
<li class="listitem">
Consolidate google-oauth-client to latest version <a href="https://github.com/elastic/elasticsearch/pull/91722" class="ulink" target="_top">#91722</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="release-notes-8.7.1.html">« Elasticsearch version 8.7.1</a>
</span>
<span class="next">
<a href="release-notes-8.6.2.html">Elasticsearch version 8.6.2 »</a>
</span>
</div>
</body>
</html>
