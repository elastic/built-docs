<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Get legacy rollup jobs API | Elasticsearch Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="up" href="rollup-apis.html" title="Rollup APIs"/>
<link rel="prev" href="rollup-delete-job.html" title="Delete legacy rollup jobs API"/>
<link rel="next" href="rollup-get-rollup-caps.html" title="Get legacy rollup job capabilities API"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
»
<span class="breadcrumb-link"><a href="rollup-apis.html">Rollup APIs</a></span>
»
<span class="breadcrumb-node">Get legacy rollup jobs API</span>
</div>
<div class="navheader">
<span class="prev">
<a href="rollup-delete-job.html">« Delete legacy rollup jobs API</a>
</span>
<span class="next">
<a href="rollup-get-rollup-caps.html">Get legacy rollup job capabilities API »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="rollup-get-job"></a>Get legacy rollup jobs API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/rollup/apis/get-job.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This documentation is about legacy rollups. Legacy rollups are
deprecated and will be replaced by new rollup functionality introduced in Elasticsearch
7.x.</p>
</div>
</div>
<p>Gets the configuration, stats, and status of legacy rollup jobs.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollup-get-job-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/rollup/apis/get-job.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET _rollup/job/&lt;job_id&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollup-get-job-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/rollup/apis/get-job.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the Elasticsearch security features are enabled, you must have <code class="literal">monitor</code>,
<code class="literal">monitor_rollup</code>, <code class="literal">manage</code> or <code class="literal">manage_rollup</code> cluster privileges to use this API.
For more information, see <a class="xref" href="security-privileges.html" title="Security privileges">Security privileges</a>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollup-get-job-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/rollup/apis/get-job.asciidoc">edit</a></h3>
</div></div></div>
<p>The API can return the details for a single rollup job or for all rollup jobs.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This API returns only active (both <code class="literal">STARTED</code> and <code class="literal">STOPPED</code>) jobs. If a job
was created, ran for a while then deleted, this API does not return any details
about that job.</p>
</div>
</div>
<p>For details about a historical rollup job, the
<a class="xref" href="rollup-get-rollup-caps.html" title="Get legacy rollup job capabilities API">rollup capabilities API</a> may be more useful.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollup-get-job-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/rollup/apis/get-job.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;job_id&gt;</code>
</span>
</dt>
<dd>
(Optional, string) Identifier for the rollup job. If it is <code class="literal">_all</code> or omitted,
 the API returns all rollup jobs.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollup-get-job-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/rollup/apis/get-job.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">jobs</code>
</span>
</dt>
<dd>
<p>
(array) An array of rollup job resources.
</p>
<details open>
<summary class="title">Properties of rollup job resources</summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">config</code>
</span>
</dt>
<dd>
(object) Contains the configuration for the rollup job. This information is
identical to the configuration that was supplied when creating the job via the
<a class="xref" href="rollup-put-job.html" title="Create legacy rollup jobs API">create job API</a>.
</dd>
<dt>
<span class="term">
<code class="literal">stats</code>
</span>
</dt>
<dd>
(object) Contains transient statistics about the rollup job, such as how many
documents have been processed and how many rollup summary docs have been
indexed. These stats are not persisted. If a node is restarted, these stats are
reset.
</dd>
<dt>
<span class="term">
<code class="literal">status</code>
</span>
</dt>
<dd>
<p>
(object) Contains the current status of the indexer for the rollup job. The
possible values and their meanings are:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">stopped</code> means the indexer is paused and will not process data, even if its
cron interval triggers.
</li>
<li class="listitem">
<code class="literal">started</code> means the indexer is running, but not actively indexing data. When
the cron interval triggers, the job&#8217;s indexer will begin to process data.
</li>
<li class="listitem">
<code class="literal">indexing</code> means the indexer is actively processing data and creating new
rollup documents. When in this state, any subsequent cron interval triggers will
be ignored because the job is already active with the prior trigger.
</li>
<li class="listitem">
<code class="literal">abort</code> is a transient state, which is usually not witnessed by the user. It
is used if the task needs to be shut down for some reason (job has been deleted,
an unrecoverable error has been encountered, etc).  Shortly after the <code class="literal">abort</code>
state is set, the job will remove itself from the cluster.
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="rollup-get-job-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/rollup/apis/get-job.asciidoc">edit</a></h3>
</div></div></div>
<p>If we have already created a rollup job named <code class="literal">sensor</code>, the details about the
job can be retrieved with:</p>
<a id="d095b422d9803c02b62c01adffc85376"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET _rollup/job/sensor</pre>
</div>
<div class="console_widget" data-snippet="snippets/2093.console"></div>
<p>The API yields the following response:</p>
<a id="3f6747b07a942bf0efd68d3a50b2a6e4"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "jobs": [
    {
      "config": {
        "id": "sensor",
        "index_pattern": "sensor-*",
        "rollup_index": "sensor_rollup",
        "cron": "*/30 * * * * ?",
        "groups": {
          "date_histogram": {
            "fixed_interval": "1h",
            "delay": "7d",
            "field": "timestamp",
            "time_zone": "UTC"
          },
          "terms": {
            "fields": [
              "node"
            ]
          }
        },
        "metrics": [
          {
            "field": "temperature",
            "metrics": [
              "min",
              "max",
              "sum"
            ]
          },
          {
            "field": "voltage",
            "metrics": [
              "avg"
            ]
          }
        ],
        "timeout": "20s",
        "page_size": 1000
      },
      "status": {
        "job_state": "stopped"
      },
      "stats": {
        "pages_processed": 0,
        "documents_processed": 0,
        "rollups_indexed": 0,
        "trigger_count": 0,
        "index_failures": 0,
        "index_time_in_ms": 0,
        "index_total": 0,
        "search_failures": 0,
        "search_time_in_ms": 0,
        "search_total": 0,
        "processing_time_in_ms": 0,
        "processing_total": 0
      }
    }
  ]
}</pre>
</div>
<p>The <code class="literal">jobs</code> array contains a single job (<code class="literal">id: sensor</code>) since we requested a single job in the endpoint&#8217;s URL.
If we add another job, we can see how multi-job responses are handled:</p>
<a id="b5bc1bb7278f2f95bc54790c78c928e0"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _rollup/job/sensor2 <a id="CO640-1"></a><i class="conum" data-value="1"></i>
{
  "index_pattern": "sensor-*",
  "rollup_index": "sensor_rollup",
  "cron": "*/30 * * * * ?",
  "page_size": 1000,
  "groups": {
    "date_histogram": {
      "field": "timestamp",
      "fixed_interval": "1h",
      "delay": "7d"
    },
    "terms": {
      "fields": [ "node" ]
    }
  },
  "metrics": [
    {
      "field": "temperature",
      "metrics": [ "min", "max", "sum" ]
    },
    {
      "field": "voltage",
      "metrics": [ "avg" ]
    }
  ]
}

GET _rollup/job/_all <a id="CO640-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/2094.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO640-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>We create a second job with name <code class="literal">sensor2</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO640-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Then request all jobs by using <code class="literal">_all</code> in the GetJobs API</p>
</td>
</tr>
</table>
</div>
<p>Which will yield the following response:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "jobs": [
    {
      "config": {
        "id": "sensor2",
        "index_pattern": "sensor-*",
        "rollup_index": "sensor_rollup",
        "cron": "*/30 * * * * ?",
        "groups": {
          "date_histogram": {
            "fixed_interval": "1h",
            "delay": "7d",
            "field": "timestamp",
            "time_zone": "UTC"
          },
          "terms": {
            "fields": [
              "node"
            ]
          }
        },
        "metrics": [
          {
            "field": "temperature",
            "metrics": [
              "min",
              "max",
              "sum"
            ]
          },
          {
            "field": "voltage",
            "metrics": [
              "avg"
            ]
          }
        ],
        "timeout": "20s",
        "page_size": 1000
      },
      "status": {
        "job_state": "stopped"
      },
      "stats": {
        "pages_processed": 0,
        "documents_processed": 0,
        "rollups_indexed": 0,
        "trigger_count": 0,
        "index_failures": 0,
        "index_time_in_ms": 0,
        "index_total": 0,
        "search_failures": 0,
        "search_time_in_ms": 0,
        "search_total": 0,
        "processing_time_in_ms": 0,
        "processing_total": 0
      }
    },
    {
      "config": {
        "id": "sensor",
        "index_pattern": "sensor-*",
        "rollup_index": "sensor_rollup",
        "cron": "*/30 * * * * ?",
        "groups": {
          "date_histogram": {
            "fixed_interval": "1h",
            "delay": "7d",
            "field": "timestamp",
            "time_zone": "UTC"
          },
          "terms": {
            "fields": [
              "node"
            ]
          }
        },
        "metrics": [
          {
            "field": "temperature",
            "metrics": [
              "min",
              "max",
              "sum"
            ]
          },
          {
            "field": "voltage",
            "metrics": [
              "avg"
            ]
          }
        ],
        "timeout": "20s",
        "page_size": 1000
      },
      "status": {
        "job_state": "stopped"
      },
      "stats": {
        "pages_processed": 0,
        "documents_processed": 0,
        "rollups_indexed": 0,
        "trigger_count": 0,
        "index_failures": 0,
        "index_time_in_ms": 0,
        "index_total": 0,
        "search_failures": 0,
        "search_time_in_ms": 0,
        "search_total": 0,
        "processing_time_in_ms": 0,
        "processing_total": 0
      }
    }
  ]
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="rollup-delete-job.html">« Delete legacy rollup jobs API</a>
</span>
<span class="next">
<a href="rollup-get-rollup-caps.html">Get legacy rollup job capabilities API »</a>
</span>
</div>
</div>
</body>
</html>
