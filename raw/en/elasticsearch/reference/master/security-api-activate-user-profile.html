<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Activate user profile API | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Activate user profile API | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="security-api.html" title="Security APIs"/>
<link rel="prev" href="security-api-ssl.html" title="SSL certificate API"/>
<link rel="next" href="security-api-disable-user-profile.html" title="Disable user profile API"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="security-api-ssl.html">« SSL certificate API</a>
</span>
<span class="next">
<a href="security-api-disable-user-profile.html">Disable user profile API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="security-api.html">Security APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Activate user profile API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="security-api-activate-user-profile"></a>Activate user profile API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></h2>
</div></div></div>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and
Elastic’s Observability, Enterprise Search, and Elastic Security solutions. Individual
users and external applications should not call this API directly. Elastic reserves
the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p>Creates or updates a user profile on behalf of another user.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-activate-user-profile-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST /_security/profile/_activate</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-activate-user-profile-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
To use this API, you must have the <code class="literal">manage_user_profile</code> cluster privilege.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-activate-user-profile-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<p>The activate user profile API creates or updates a profile document for end
users with information that is extracted from the user&#8217;s authentication object,
including <code class="literal">username</code>, <code class="literal">full_name</code>, <code class="literal">roles</code>, and the authentication realm.
For example, in the JWT <code class="literal">access_token</code> case, the profile user&#8217;s <code class="literal">username</code> is
extracted from the JWT token claim pointed to by the <code class="literal">claims.principal</code>
setting of the JWT realm that authenticated the token.</p>
<p>When updating a profile document, the API enables the document if it was
disabled. Any updates do not change existing content for either the <code class="literal">labels</code> or
<code class="literal">data</code> fields.</p>
<p>This API is intended only for use by applications (such as Kibana) that need to
create or update profiles for end users.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The calling application must have either an <code class="literal">access_token</code>, or a
combination of <code class="literal">username</code> and <code class="literal">password</code> for the user that the profile document
is intended for.</p>
</div>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-activate-user-profile-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">access_token</code>
</span>
</dt>
<dd>
(Required*, string)
The user&#8217;s <a class="xref" href="security-api-get-token.html" title="Get token API">Elasticsearch access token</a>, or JWT. Both <a class="xref" href="jwt-auth-realm.html#jwt-realm-oauth2" title="Access Tokens">access</a> and
<a class="xref" href="jwt-auth-realm.html#jwt-realm-oidc" title="ID Tokens from OIDC workflows">id</a> JWT token types are supported, and they depend on the underlying JWT realm configuration.
If you specify the <code class="literal">access_token</code> grant type, this parameter is required. It is not valid with other grant types.
</dd>
<dt>
<span class="term">
<code class="literal">client_authentication</code>
</span>
</dt>
<dd>
<p>
(Optional, object) When using the <code class="literal">access_token</code> grant type, and when supplying a
JWT, this specifies the client authentication for <a class="xref" href="jwt-auth-realm.html" title="JWT authentication">JWTs</a> that
need it (i.e. what&#8217;s normally specified by the <code class="literal">ES-Client-Authentication</code> request header).
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">scheme</code>
</span>
</dt>
<dd>
(Required, string) The scheme (case-sensitive) as it&#8217;s supplied in the
<code class="literal">ES-Client-Authentication</code> request header. Currently, the only supported
value is <a class="xref" href="jwt-auth-realm.html#jwt-auth-shared-secret-scheme-example"><code class="literal">SharedSecret</code></a>.
</dd>
<dt>
<span class="term">
<code class="literal">value</code>
</span>
</dt>
<dd>
(Required, string) The value that follows the scheme for the client credentials
as it&#8217;s supplied in the <code class="literal">ES-Client-Authentication</code> request header. For example,
if the request header would be <code class="literal">ES-Client-Authentication: SharedSecret myShar3dS3cret</code>
if the client were to authenticate directly with a JWT, then <code class="literal">value</code> here should
be <code class="literal">myShar3dS3cret</code>.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">grant_type</code>
</span>
</dt>
<dd>
<p>
(Required, string)
The type of grant.
</p>
<details open>
<summary class="title">Valid values for <code class="literal">grant_type</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">access_token</code>
</span>
</dt>
<dd>
In this type of grant, you must supply either an access token, that was created by the
Elasticsearch token service (see <a class="xref" href="security-api-get-token.html" title="Get token API">Get token</a> and <a class="xref" href="security-basic-setup-https.html#encrypt-http-communication" title="Encrypt HTTP client communications for Elasticsearch">Encrypt HTTP client communications for Elasticsearch</a>),
or a <a class="xref" href="jwt-auth-realm.html" title="JWT authentication">JWT</a> (either a JWT <code class="literal">access_token</code> or a JWT <code class="literal">id_token</code>).
</dd>
<dt>
<span class="term">
<code class="literal">password</code>
</span>
</dt>
<dd>
In this type of grant, you must supply the <code class="literal">username</code> and <code class="literal">password</code> for the
user that you want to create the API key for.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">password</code>
</span>
</dt>
<dd>
(Required*, string)
The user&#8217;s password. If you specify the <code class="literal">password</code> grant type, this parameter is
required. It is not valid with other grant types.
</dd>
<dt>
<span class="term">
<code class="literal">username</code>
</span>
</dt>
<dd>
(Required*, string)
The username that identifies the user. If you specify the <code class="literal">password</code> grant type,
this parameter is required. It is not valid with other grant types.
</dd>
</dl>
</div>
<p>*Indicates that the setting is required in some, but not all situations.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-activate-user-profile-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<p>A successful activate user profile API call returns a JSON structure that contains
the profile unique ID, user information, timestamp for the operation and version
control numbers.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-activate-user-profile-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/activate-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.security.activateUserProfile({
  grant_type: "password",
  username: "jacknich",
  password: "l0ng-r4nd0m-p@ssw0rd",
});
console.log(response);</pre>
</div>
<a id="0721c8adec544d5ecea3fcc410e45feb"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">POST /_security/profile/_activate
{
  "grant_type": "password",
  "username" : "jacknich",
  "password" : "l0ng-r4nd0m-p@ssw0rd"
}</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/3292.console"></div>
<p>The API returns the following response:</p>
<a id="d62bdebea0ec3146ef3f981f02ae6ab9"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "uid": "u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0",
  "enabled": true,
  "last_synchronized": 1642650651037,
  "user": {
    "username": "jacknich",
    "roles": [
      "admin", "other_role1"
    ],
    "realm_name": "native",
    "full_name": "Jack Nicholson",
    "email": "jacknich@example.com"
  },
  "labels": {},
  "data": {},
  "_doc": {
    "_primary_term": 88,
    "_seq_no": 66
  }
}</pre>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="security-api-ssl.html">« SSL certificate API</a>
</span>
<span class="next">
<a href="security-api-disable-user-profile.html">Disable user profile API »</a>
</span>
</div>
</body>
</html>
