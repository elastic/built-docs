<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="keywords" content="Elasticsearch diagnostic, diagnostics">
<title>Get user profiles API | Elasticsearch Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Get user profiles API | Elasticsearch Guide [master]">

<link rel="home" href="index.html" title="Elasticsearch Guide [master]"/>
<link rel="up" href="security-api.html" title="Security APIs"/>
<link rel="prev" href="security-api-enable-user-profile.html" title="Enable user profile API"/>
<link rel="next" href="security-api-suggest-user-profile.html" title="Suggest user profile API"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Elasticsearch"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="security-api-enable-user-profile.html">« Enable user profile API</a>
</span>
<span class="next">
<a href="security-api-suggest-user-profile.html">Suggest user profile API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="security-api.html">Security APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Get user profiles API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="security-api-get-user-profile"></a>Get user profiles API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h2>
</div></div></div>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The user profile feature is designed only for use by Kibana and
Elastic’s Observability, Enterprise Search, and Elastic Security solutions. Individual
users and external applications should not call this API directly. Elastic reserves
the right to change or remove this feature in future releases without prior notice.</p>
</div>
</div>
<p>Retrieves user profiles using a list of unique profile ID.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-get-user-profile-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_security/profile/&lt;uid&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-get-user-profile-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<p>To use this API, you must have <em>at least</em> the <code class="literal">read_security</code>
<a class="xref" href="security-privileges.html#privileges-list-cluster" title="Cluster privileges">cluster privilege</a> (or a greater privilege
such as <code class="literal">manage_user_profile</code> or <code class="literal">manage_security</code>).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-get-user-profile-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<p>The get user profile API returns the user profile document matching a specified
<code class="literal">uid</code>, which is generated when
<a class="xref" href="security-api-activate-user-profile.html" title="Activate user profile API">activating a user profile</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-get-user-profile-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">uid</code>
</span>
</dt>
<dd>
(Required, string) The unique identifier for the user profile. You can specify multiple IDs as
a comma-separated list.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-get-user-profile-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">data</code>
</span>
</dt>
<dd>
(Optional, string) Comma-separated list of filters for the <code class="literal">data</code> field of
the profile document. To return all content, use <code class="literal">data=*</code>. To return a
subset of content, use <code class="literal">data=&lt;key&gt;</code> to retrieve the content nested under the
specified <code class="literal">&lt;key&gt;</code>. Defaults to returning no content.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-get-user-profile-response-body"></a>Response body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<p>A successful call returns the JSON representation of the user profile
and its internal versioning numbers. The API returns an empty object
if no profile document is found for the provided <code class="literal">uid</code>.
The content of the <code class="literal">data</code> field is not returned by default to avoid deserializing
a potential large payload.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="security-api-get-user-profile-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/main/docs/reference/rest-api/security/get-user-profile.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.security.getUserProfile({
  uid: "u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0",
});
console.log(response);</pre>
</div>
<a id="9143be4f137574271953a7a8107e175b"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">GET /_security/profile/u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/3295.console"></div>
<p>The API returns the following response for a <code class="literal">uid</code> matching <code class="literal">u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0</code>:</p>
<a id="5fb73fe4280ac0de489640ee9193e806"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "profiles": [
    {
      "uid": "u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0",
      "enabled": true,
      "last_synchronized": 1642650651037,
      "user": {
        "username": "jacknich",
        "roles": [
          "admin", "other_role1"
        ],
        "realm_name": "native",
        "full_name": "Jack Nicholson",
        "email": "jacknich@example.com"
      },
      "labels": {
        "direction": "north"
      },
      "data": {}, <a id="CO897-1"></a><i class="conum" data-value="1"></i>
      "_doc": {
        "_primary_term": 88,
        "_seq_no": 66
      }
    }
  ]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO897-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>No content is returned in the <code class="literal">data</code> field by default.</p>
</td>
</tr>
</table>
</div>
<p>The following request retrieves a subset of <code class="literal">data</code> that&#8217;s nested under the
key <code class="literal">app1</code>, along with the user&#8217;s profile:</p>
<div class="pre_wrapper lang-js alternative">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js alternative">const response = await client.security.getUserProfile({
  uid: "u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0",
  data: "app1.key1",
});
console.log(response);</pre>
</div>
<a id="13df08eefc9ba98e311793bbca74133b"></a>
<div class="pre_wrapper lang-console default has-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console default has-js">GET /_security/profile/u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0?data=app1.key1</pre>
</div>
<div class="console_widget has-js" data-snippet="snippets/3296.console"></div>
<a id="65c9426792136ef3d3c8ad03f647e215"></a>
<div class="pre_wrapper lang-console-result">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console-result">{
  "profiles": [
    {
      "uid": "u_79HkWkwmnBH5gqFKwoxggWPjEBOur1zLPXQPEl1VBW0_0",
      "enabled": true,
      "last_synchronized": 1642650651037,
      "user": {
        "username": "jacknich",
        "roles": [
          "admin", "other_role1"
        ],
        "realm_name": "native",
        "full_name": "Jack Nicholson",
        "email": "jacknich@example.com"
      },
      "labels": {
        "direction": "north"
      },
      "data": {
        "app1": {
          "key1": "value1"
        }
      },
      "_doc": {
        "_primary_term": 88,
        "_seq_no": 66
      }
    }
  ]
}</pre>
</div>
<p>If there has been any errors when retrieving the user profiles, they are returned in the <code class="literal">errors</code> field:</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">{
  "profiles": [],
  "errors": {
    "count": 1,
    "details": {
       "u_FmxQt3gr1BBH5wpnz9HkouPj3Q710XkOgg1PWkwLPBW_5": {
         "type": "resource_not_found_exception",
         "reason": "profile document not found"
       }
    }
  }
}</pre>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="security-api-enable-user-profile.html">« Enable user profile API</a>
</span>
<span class="next">
<a href="security-api-suggest-user-profile.html">Suggest user profile API »</a>
</span>
</div>
</body>
</html>
