<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>App Search APIs | enterprise-search-js [8.14] | Elastic</title>
<meta class="elastic" name="content" content="App Search APIs | enterprise-search-js [8.14]">

<link rel="home" href="index.html" title="enterprise-search-js [8.14]"/>
<link rel="up" href="index.html" title="enterprise-search-js [8.14]"/>
<link rel="prev" href="installation.html" title="Installation"/>
<link rel="next" href="workplace-search-api.html" title="Workplace Search APIs"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Enterprise Search Clients"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search Clients/Node.js/8.14"/>
<meta name="DC.subject" content="Enterprise Search Clients"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="installation.html">« Installation</a>
</span>
<span class="next">
<a href="workplace-search-api.html">Workplace Search APIs »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">enterprise-search-js [8.14]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>App Search APIs</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="app-search-api"></a>App Search APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h2>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For performance and historical reasons, App Search has default limitations on some objects and API calls.
Refer to <a href="/guide/en/app-search/8.14/limits.html" class="ulink" target="_blank" rel="noopener">App Search Limits</a> for details.</p>
</div>
</div>
<p>To make a request to the App Search API, use the <code class="literal">app</code> property of the <code class="literal">client</code> object, followed by the desired method.</p>
<p>Refer to the <a href="/guide/en/app-search/8.14/api-reference.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> to find the full HTTP API documentation.</p>
<p><span class="strong strong"><strong>On this page</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-initializing" title="Initializing the Client">Initializing the Client</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-engine-apis" title="Engine APIs">Engine APIs</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-documents-apis" title="Documents APIs">Documents APIs</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-schema-apis" title="Schema APIs">Schema APIs</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-search-apis" title="Search APIs">Search APIs</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-curation-apis" title="Curations APIs">Curations APIs</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-meta-engine-apis" title="Meta engine APIs">Meta engine APIs</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-crawler-apis" title="Web crawler APIs">Web crawler APIs</a>
</li>
<li class="listitem">
<a class="xref" href="app-search-api.html#app-search-api-adaptive-relevance-apis" title="Adaptive Relevance APIs">Adaptive Relevance APIs</a>
</li>
</ul>
</div>
<h3><a id="app-search-api-initializing"></a>Initializing the Client<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>See <a class="xref" href="overview.html#quickstart-client" title="Import and instantiate the client">Import and instantiate the client</a> for details on initializing the client.</p>
<p>Note that App Search also has its own application-specific API keys and tokens.
Refer to <a class="xref" href="overview.html#authentication" title="Authentication">Authentication</a> for more information and relevant links.</p>
<p>Example of initializing the client using an App Search API private key for authorization.</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">const { Client } = require('@elastic/enterprise-search')
const client = new Client({
  url: 'https://d84b2890a1d7f30699b04c7b1d6930f8.ent-search.europe-west1.gcp.cloud.es.io',
  auth: {
    token: 'private-abcdef17grbg9jg8m1zam9q'
  }
})</pre>
</div>
<p>Once instantiated you can use the <code class="literal">client</code> object to make API requests to App Search.</p>
<h4><a id="app-search-api-initializing-api-key"></a>API key privileges<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>To use these APIs, you&#8217;ll need API keys with <code class="literal">read</code>, <code class="literal">write</code> or <code class="literal">search</code> access, depending on the action.
If you hit an <code class="literal">UnauthorizedError</code>, make sure the key you&#8217;re using has the proper privileges.</p>
<h3><a id="app-search-api-engine-apis"></a>Engine APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>Refer to the <a href="/guide/en/app-search/8.14/engines.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> for the full HTTP API documentation.</p>
<p>Engines index documents and perform search functions.
To use App Search you must <span class="strong strong"><strong>first create an engine</strong></span>.</p>
<h4><a id="app-search-api-engine-apis-create"></a>Create engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Create an engine named <code class="literal">national-parks</code> that uses the English
language analyzer with the <code class="literal">createEngine()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const engine = await client.app.createEngine(
    {name: 'national-parks', language: 'en'})
  if (engine.errors) {
    console.log(engine)
    process.exit(1)
  }
  console.log(engine)
}

run().catch(console.error)</pre>
</div>
<h4><a id="app-search-api-engine-apis-get"></a>Get engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Retrieve information about an engine with the <code class="literal">getEngine()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const engine = await client.app.getEngine(
    {engine_name: 'national-parks'})
  if (engine.errors) {
    console.log(engine)
    process.exit(1)
  }
  console.log(engine)
}

run().catch(console.error)</pre>
</div>
<p>Example reponse:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "document_count": 0,
  "language": "en",
  "name": "national-parks",
  "type": "default"
}</pre>
</div>
<h4><a id="app-search-api-engine-apis-list"></a>List engines<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>List all App Search engines with the <code class="literal">listEngines()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const engines = await client.app.listEngines()
  if (engines.errors) {
    console.log(engines)
    process.exit(1)
  }
  console.log(engines)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  meta: { page: { current: 1, total_pages: 1, total_results: 3, size: 25 } },
  results: [
    {
      name: 'my-latest-engine',
      type: 'default',
      language: null,
      index_create_settings_override: {},
      document_count: 121
    },
    {
      name: 'new-engine',
      type: 'default',
      language: null,
      index_create_settings_override: {},
      document_count: 10
    },
    {
      name: 'national-parks',
      type: 'elasticsearch',
      language: null,
      index_create_settings_override: {},
      document_count: 18
    }
  ]
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-engine-apis-delete"></a>Delete engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Delete an engine and all its documents with the <code class="literal">deleteEngine()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const engine = await client.app.deleteEngine({engine_name: 'parks'})
  if (engine.errors) {
    console.log(engine)
    process.exit(1)
  }
  console.log(engine)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "deleted": True
}</pre>
</div>
<h3><a id="app-search-api-documents-apis"></a>Documents APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>Refer to the <a href="/guide/en/app-search/8.14/documents.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> for the full HTTP API documentation.</p>
<h4><a id="app-search-api-documents-apis-create-index"></a>Create and index documents<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Add documents to an engine with the <code class="literal">indexDocuments()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">const documents = [{
        "id": "park_rocky-mountain",
        "title": "Rocky Mountain",
        "nps_link": "https://www.nps.gov/romo/index.htm",
        "states": [
            "Colorado"
        ],
        "visitors": 4517585,
        "location": "40.4,-105.58",
        "acres": 265795.2,
        "date_established": "1915-01-26T06:00:00Z"
    }, {
        "id": "park_saguaro",
        "title": "Saguaro",
        "nps_link": "https://www.nps.gov/sagu/index.htm",
        "states": [
            "Arizona"
        ],
        "visitors": 820426,
        "location": "32.25,-110.5",
        "acres": 91715.72,
        "date_established": "1994-10-14T05:00:00Z"
    }]

async function run() {
  const response = await client.app.indexDocuments(
    {engine_name:'national-parks', documents})
  if (response.errors) {
    console.log(response)
    process.exit(1)
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">[
  {
    "errors": [],
    "id": "park_rocky-mountain"
  },
  {
    "errors": [],
    "id": "park_saguaro"
  }
]</pre>
</div>
<h4><a id="app-search-api-documents-apis-list"></a>List documents<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>List all documents in an engine with the <code class="literal">listDocuments()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {const documentsList = await client.app.listDocuments(
  {engine_name: 'national-parks'})
  if (documentsList.errors) {
    console.log(documentsList)
    process.exit(1)
  }
  console.log(documentsList)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    "page": {
      "current": 1,
      "size": 100,
      "total_pages": 1,
      "total_results": 2
    }
  },
  "results": [
    {
      "acres": "91715.72",
      "date_established": "1994-10-14T05:00:00Z",
      "id": "park_saguaro",
      "location": "32.25,-110.5",
      "nps_link": "https://www.nps.gov/sagu/index.htm",
      "states": [
        "Arizona"
      ],
      "title": "Saguaro",
      "visitors": "820426",
      "world_heritage_site": "false"
    },
    {
      "acres": "265795.2",
      "date_established": "1915-01-26T06:00:00Z",
      "id": "park_rocky-mountain",
      "location": "40.4,-105.58",
      "nps_link": "https://www.nps.gov/romo/index.htm",
      "states": [
        "Colorado"
      ],
      "title": "Rocky Mountain",
      "visitors": "4517585",
      "world_heritage_site": "false"
    }
  ]
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-documents-apis-get-by-id"></a>Get documents by ID<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Retrieve a set of documents by their <code class="literal">id</code> with the <code class="literal">getDocuments()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const documents = await client.app.getDocuments(
    {engine_name: 'national-parks',
    documentIds: ['park_rocky-mountain', 'park_saguaro']})
  if (documents.errors) {
    console.log(documents)
    process.exit(1)
  }
  console.log(documents)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">[
  {
    id: 'park_rocky-mountain',
    title: 'Rocky Mountain',
    nps_link: 'https://www.nps.gov/romo/index.htm',
    states: [ 'Colorado' ],
    visitors: '4517585',
    location: '40.4,-105.58',
    acres: '265795.2',
    date_established: '1915-01-26T06:00:00Z'
  },
  {
    id: 'park_saguaro',
    title: 'Saguaro',
    nps_link: 'https://www.nps.gov/sagu/index.htm',
    states: [ 'Arizona' ],
    visitors: '820426',
    location: '32.25,-110.5',
    acres: '91715.72',
    date_established: '1994-10-14T05:00:00Z'
  }
]</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-documents-apis-update"></a>Update existing documents<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Update documents with the <code class="literal">putDocuments()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.putDocuments(
    {engine_name: 'national-parks',
    documents:[{"id": "park_rocky-style", "visitors": 10000000}]})
  if (response.errors) {
    console.log(response)
    process.exit(1)
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">[
  {
    "errors": [],
    "id": "park_rocky-mountain"
  }
]</pre>
</div>
<h4><a id="app-search-api-documents-apis-delete"></a>Delete documents<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Delete documents from an engine with the <code class="literal">deleteDocuments()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteDocuments(
    {engine_name: 'national-parks',
    documentIds: ['park_rocky-mountain']})
  if (response.errors) {
    console.log(response)
    process.exit(1)
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">[ { id: 'park_rocky-mountain', deleted: true } ]</pre>
</div>
<h3><a id="app-search-api-schema-apis"></a>Schema APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>Use Schema APIs to inspect how data is being indexed by an engine.</p>
<p>Refer to the <a href="/guide/en/app-search/8.14/schema.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> for the full HTTP API documentation.</p>
<h4><a id="app-search-api-schema-apis-get"></a>Get schema<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>To look at the existing schema inferred from your data, use the <code class="literal">getSchema()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const schema = await client.app.getSchema({engine_name: 'national-parks'})
  if (schema.errors) {
    console.log(schema)
    process.exit(1)
  }
  console.log(schema)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "acres": "text",
  "date_established": "text",
  "location": "text",
  "nps_link": "text",
  "states": "text",
  "title": "text",
  "visitors": "text",
  "world_heritage_site": "text"
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-schema-apis-update"></a>Update schema<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>In the previous example, the <code class="literal">date_established</code> field wasn&#8217;t indexed as a <code class="literal">date</code> type.
Update the type of the <code class="literal">date_established</code> field with the <code class="literal">putSchema()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run () {
  const schemaUpdate = await client.app.putSchema(
    {engine_name: 'national-parks',
    schema: {date_established: 'date'}})
  if (schemaUpdate.errors) {
    console.log(schemaUpdate)
    process.exit(1)
  }
  console.log(schemaUpdate)}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "acres": "text",
  "date_established": "date",
  "location": "text",
  "nps_link": "text",
  "states": "text",
  "title": "text",
  "visitors": "text",
  "world_heritage_site": "text"
}</pre>
</div>
</div>
</details>
<h3><a id="app-search-api-search-apis"></a>Search APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>Refer to the <a href="/guide/en/app-search/8.14/search.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> for the full HTTP API documentation.</p>
<h4><a id="app-search-api-search-apis-single"></a>Single search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Once documents are ingested and the schema is defined, use the <code class="literal">search()</code> method to search an engine
for matching documents.</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const searchResponse = await client.app.search(
    {engine_name: 'national-parks',
    body: {query: 'rock'}})
  if (searchResponse.errors) {
    console.log(searchResponse)
    process.exit(1)
  }
  console.log(searchResponse)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    "alerts": [],
    "engine": {
      "name": "national-parks-demo",
      "type": "default"
    },
    "page": {
      "current": 1,
      "size": 10,
      "total_pages": 2,
      "total_results": 15
    },
    "request_id": "6266df8b-8b19-4ff0-b1ca-3877d867eb7d",
    "warnings": []
  },
  "results": [
    {
      "_meta": {
        "engine": "national-parks-demo",
        "id": "park_rocky-mountain",
        "score": 6776379.0
      },
      "acres": {
        "raw": 265795.2
      },
      "date_established": {
        "raw": "1915-01-26T06:00:00+00:00"
      },
      "id": {
        "raw": "park_rocky-mountain"
      },
      "location": {
        "raw": "40.4,-105.58"
      },
      "nps_link": {
        "raw": "https://www.nps.gov/romo/index.htm"
      },
      "square_km": {
        "raw": 1075.6
      },
      "states": {
        "raw": [
          "Colorado"
        ]
      },
      "title": {
        "raw": "Rocky Mountain"
      },
      "visitors": {
        "raw": 4517585.0
      },
      "world_heritage_site": {
        "raw": "false"
      }
    }
  ]
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-search-apis-multi"></a>Multi Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Execute multiple searches at the same time with the <code class="literal">multi_search()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.multiSearch(
    {engine_name: 'national-parks', body: {queries: [{query: 'rock'}, {query: 'lake'}]}})
    if (response.errors) {
      console.log(response)
      process.exit(1)
    }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">[
  {
    "meta": {
      "alerts": [],
      "engine": {
        "name": "national-parks-demo",
        "type": "default"
      },
      "page": {
        "current": 1,
        "size": 1,
        "total_pages": 15,
        "total_results": 15
      },
      "warnings": []
    },
    "results": [
      {
        "_meta": {
          "engine": "national-parks",
          "id": "park_rocky-mountain",
          "score": 6776379.0
        },
        "acres": {
          "raw": 265795.2
        },
        "date_established": {
          "raw": "1915-01-26T06:00:00+00:00"
        },
        "id": {
          "raw": "park_rocky-mountain"
        },
        "location": {
          "raw": "40.4,-105.58"
        },
        "nps_link": {
          "raw": "https://www.nps.gov/romo/index.htm"
        },
        "square_km": {
          "raw": 1075.6
        },
        "states": {
          "raw": [
            "Colorado"
          ]
        },
        "title": {
          "raw": "Rocky Mountain"
        },
        "visitors": {
          "raw": 4517585.0
        },
        "world_heritage_site": {
          "raw": "false"
        }
      }
    ]
  },
  ...
]</pre>
</div>
</div>
</details>
<h3><a id="app-search-api-curation-apis"></a>Curations APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p><a href="/guide/en/app-search/8.14/curations-guide.html" class="ulink" target="_blank" rel="noopener">Curations</a> hide or promote result content for pre-defined search queries.</p>
<p>Refer to the <a href="/guide/en/app-search/8.14/curations.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> for the full HTTP API documentation.</p>
<h4><a id="app-search-api-curation-apis-create"></a>Create curation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Create a curation with the <code class="literal">createCuration()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const curation = await client.app.createCuration(
    {
    engine_name: 'national-parks',
    queries: ['rocks', 'rock', 'hills'],
    promoted_doc_ids: ['park_rocky-mountains'],
    hidden_doc_ids: ['park_saguaro']
  })
  if (curation.errors) {
    console.log(process.exit(1))
}
  console.log(curation)
}

run().catch(console.error)</pre>
</div>
<p>A successful response returns the <span class="strong strong"><strong>curation ID</strong></span>:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "id": "cur-6011f5b57cef06e6c883814a"
}</pre>
</div>
<h4><a id="app-search-api-curation-apis-get"></a>Get curation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Retrieve a curation with the <code class="literal">getCuration()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const curation = await client.app.getCuration(
    {
    engine_name: 'national-parks',
    curation_id: 'cur-6011f5b57cef06e6c883814a'
  })
  if (curation.errors) {
    console.log(process.exit(1))
}
  console.log(curation)
}

run().catch(console.error)</pre>
</div>
<p>A successful response returns the curation details.</p>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "hidden": [
    "park_saguaro"
  ],
  "id": "cur-6011f5b57cef06e6c883814a",
  "promoted": [
    "park_rocky-mountains"
  ],
  "queries": [
    "rocks",
    "rock",
    "hills"
  ]
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-curation-apis-list"></a>List curations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>List curations for an engine with the <code class="literal">listCurations()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const list = await client.app.listCurations({
    engine_name: 'national-parks'
  })
  if (list.errors) {
    console.log(list)
    return
  }
  console.log(list)
}

run().catch(console.error)</pre>
</div>
<h4><a id="app-search-api-curation-apis-delete"></a>Delete curation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Delete a curation with the deleteCuration() method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteCuration({
    engine_name: 'national-parks',
    curation_id: 'cur-63bc026993f3219cc38a2676'
  })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{ deleted: true }</pre>
</div>
<h3><a id="app-search-api-meta-engine-apis"></a>Meta engine APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>A <a href="/guide/en/app-search/8.14/meta-engines-guide.html" class="ulink" target="_blank" rel="noopener"><span class="strong strong"><strong>meta engine</strong></span></a> has no documents of its own, instead it combines multiple other engines to be searched together as a single engine.</p>
<p>The engines that comprise a meta engine are referred to as "source engines".</p>
<p>Refer to the <a href="/guide/en/app-search/8.14/meta-engines.html" class="ulink" target="_blank" rel="noopener">meta engines API reference</a> for the full HTTP API documentation.</p>
<h4><a id="app-search-api-meta-engine-apis-create"></a>Create meta engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Create a <a href="/guide/en/app-search/8.14/meta-engines-guide.html" class="ulink" target="_blank" rel="noopener">meta engine</a> with the <code class="literal">createEngine()</code> method, setting the <code class="literal">type</code> parameter to <code class="literal">"meta"</code>.</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.createEngine({
    name: 'my-meta-engine',
    type: 'meta',
    source_engines: ['my-engine']
  })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  name: 'my-meta-engine',
  type: 'meta',
  source_engines: [ 'my-engine' ],
  document_count: 6
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-meta-engine-apis-search"></a>Searching documents in a meta engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Search a meta engine the same way you search any App Search engine.
Refer to <a class="xref" href="app-search-api.html#app-search-api-search-apis-single" title="Single search">Single search</a>.</p>
<p>Use the <code class="literal">search()</code> method to search an engine for matching documents.</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const query = await client.app.search({
    engine_name: 'my-meta-engine',
    body: {
      query: 'rock'
    }
  })
  if (query.errors) {
    console.log(query)
    return
  }
  console.log(query)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  meta: {
    alerts: [],
    warnings: [],
    precision: 2,
    engine: { name: 'my-meta-engine', type: 'meta' },
    page: { current: 1, total_pages: 0, total_results: 0, size: 10 },
    request_id: 'BTilBfcCR6mlcG13ct9L4g'
  },
  results: []
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-meta-engine-apis-add-source"></a>Adding source engines to an existing meta engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Add a source engine to a meta engine with the <code class="literal">addMetaEngineSource()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.addMetaEngineSource({
    engine_name: 'my-meta-engine',
    sourceEngines: ['national-parks']
  })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  name: 'meta-engine',
  type: 'meta',
  source_engines: [ 'my-engine', 'national-parks' ],
  document_count: 7
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-meta-engine-apis-remove-source"></a>Delete source engine from a meta engine<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Delete a source engine from a meta engine with the <code class="literal">deleteMetaEngineSource()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteMetaEngineSource({
    engine_name: 'my-meta-engine',
    sourceEngines: ['my-engine']
  })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  name: 'my-meta-engine',
  type: 'meta',
  source_engines: [ 'national-parks' ],
  document_count: 1
}</pre>
</div>
</div>
</details>
<h3><a id="app-search-api-crawler-apis"></a>Web crawler APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>These APIs are for the <a href="/guide/en/app-search/8.14/web-crawler.html" class="ulink" target="_blank" rel="noopener"><span class="strong strong"><strong>App Search</strong></span> web crawler</a>, not to be confused with the <a href="/guide/en/enterprise-search/8.14/crawler.html" class="ulink" target="_blank" rel="noopener"><span class="strong strong"><strong>Elastic</strong></span> web crawler</a> introduced in 8.4.0.</p>
<p>Refer to the <a href="/guide/en/app-search/8.14/web-crawler-api-reference.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> for the full HTTP API documentation.</p>
<h4><a id="app-search-api-crawler-apis-domains"></a>Domains<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Create a domain with the <code class="literal">createCrawlerDomain()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const domain = await client.app.createCrawlerDomain({
    engine_name: 'crawler-engine',
    body: {
      name: 'https://example.com'
    }
  })
  if (domain.errors) {
    console.log(domain)
    return
  }
  console.log(domain)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  id: '63bdb02b93f321d33b8a3409',
  name: 'https://example.com',
  document_count: 0,
  deduplication_enabled: true,
  deduplication_fields: [
    'title',
    'body_content',
    'meta_keywords',
    'meta_description',
    'links',
    'headings'
  ],
  available_deduplication_fields: [
    'title',
    'body_content',
    'meta_keywords',
    'meta_description',
    'links',
    'headings'
  ],
  auth: null,
  created_at: '2023-01-10T18:36:27Z',
  last_visited_at: null,
  entry_points: [
    {
      id: '63bdb02b93f321d33b8a340a',
      value: '/',
      created_at: '2023-01-10T18:36:27Z'
    }
  ],
  crawl_rules: [],
  default_crawl_rule: {
    id: '-',
    order: 0,
    policy: 'allow',
    rule: 'regex',
    pattern: '.*',
    created_at: '2023-01-10T18:36:28Z'
  },
  sitemaps: []
}</pre>
</div>
</div>
</details>
<p>List all domains with the <code class="literal">listCrawlerDomains()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">// List crawler domains

async function run() {
  const response = await client.app.listCrawlerDomains(
    {engine_name: 'crawler-engine'})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  meta: { page: { current: 1, total_pages: 1, total_results: 4, size: 25 } },
  results: [
    {
      id: '63bdb8ec93f321254a8a34ae',
      name: 'https://example.com',
      document_count: 1,
      deduplication_enabled: true,
      deduplication_fields: [Array],
      available_deduplication_fields: [Array],
      auth: null,
      created_at: '2023-01-10T19:13:48Z',
      last_visited_at: '2023-01-17T11:32:12Z',
      entry_points: [Array],
      crawl_rules: [],
      default_crawl_rule: [Object],
      sitemaps: []
    },
    {
      id: '63be90b993f3211c088a3c41',
      name: 'http://another-example.com',
      document_count: 0,
      deduplication_enabled: true,
      deduplication_fields: [Array],
      available_deduplication_fields: [Array],
      auth: null,
      created_at: '2023-01-11T10:34:33Z',
      last_visited_at: '2023-01-17T11:32:12Z',
      entry_points: [Array],
      crawl_rules: [Array],
      default_crawl_rule: [Object],
      sitemaps: []
    },
    {
      id: '63c684fb93f321c51e8a7c80',
      name: 'https://www.pap.fr',
      document_count: 0,
      deduplication_enabled: true,
      deduplication_fields: [Array],
      available_deduplication_fields: [Array],
      auth: null,
      created_at: '2023-01-17T11:22:35Z',
      last_visited_at: '2023-01-17T11:32:12Z',
      entry_points: [Array],
      crawl_rules: [],
      default_crawl_rule: [Object],
      sitemaps: []
    },
    {
      id: '63c6890c93f321ea818a7d02',
      name: 'https://www.elastic.co',
      document_count: 0,
      deduplication_enabled: true,
      deduplication_fields: [Array],
      available_deduplication_fields: [Array],
      auth: null,
      created_at: '2023-01-17T11:39:56Z',
      last_visited_at: null,
      entry_points: [Array],
      crawl_rules: [],
      default_crawl_rule: [Object],
      sitemaps: []
    }
  ]
}</pre>
</div>
</div>
</details>
<p>Retrieve a domain with the <code class="literal">getCrawlerDomain()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const domain = await client.app.getCrawlerDomain({
    engine_name: 'crawler-engine',
    domain_id: '63bdb02b93f321d33b8a3409'
  })
  if (domain.errors) {
    console.log(domain)
    return
  }
  console.log(domain)
}

run().catch(console.error)</pre>
</div>
<p>Update a domain with the <code class="literal">putCrawlerDomain()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.putCrawlerDomain({
      engine_name: 'crawler-engine',
      domain_id: '63c6890c93f321ea818a7d02',
      body: {name: ['https://www.theguardian.com']}})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>Delete a domain with the <code class="literal">deleteCrawlerDomain()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteCrawlerDomain({
      engine_name: 'crawler-engine',
      domain_id: '63be90b993f3211c088a3c41'})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{ deleted: true }</pre>
</div>
<p>To validate a domain use the <code class="literal">getCrawlerDomainValidationResult()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.getCrawlerDomainValidationResult(
    {body: {
    url: 'https://example.com',
    checks: ['dns', 'robots_txt', 'tcp', 'url', 'url_content', 'url_request']
  }})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  url: 'https://example.com',
  normalized_url: 'https://example.com/',
  valid: true,
  results: [
    {
      result: 'ok',
      name: 'url',
      details: {},
      comment: 'URL structure looks valid'
    },
    {
      result: 'ok',
      name: 'dns',
      details: [Object],
      comment: 'Domain name resolution successful: 1 addresses found'
    },
    {
      result: 'ok',
      name: 'robots_txt',
      details: {},
      comment: 'No robots.txt found for https://example.com.'
    },
    {
      result: 'ok',
      name: 'tcp',
      details: [Object],
      comment: 'TCP connection successful'
    },
    {
      result: 'ok',
      name: 'url_request',
      details: [Object],
      comment: 'Successfully fetched https://example.com: HTTP 200.'
    },
    {
      result: 'ok',
      name: 'url_content',
      details: [Object],
      comment: 'Successfully extracted some content from https://example.com.'
    },
    {
      result: 'ok',
      name: 'url_content',
      details: [Object],
      comment: 'Successfully extracted some links from https://example.com.'
    },
    {
      result: 'ok',
      name: 'url_request',
      details: [Object],
      comment: 'Successfully fetched https://example.com: HTTP 200.'
    }
  ]
}</pre>
</div>
</div>
</details>
<p>To extract content from a URL use the <code class="literal">getCrawlerUrlExtractionResult()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.getCrawlerUrlExtractionResult(
    {engine_name: 'crawler-engine',
  body: {url: 'https://example.com'}})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  url: 'https://example.com',
  normalized_url: 'https://example.com/',
  results: {
    download: { status_code: 200 },
    extraction: {
      content_hash: 'fb38982491c4a9377f8cf0c57e75e067bca65daf',
      content_hash_fields: [Array],
      content_fields: [Object],
      meta_tag_warnings: []
    },
    indexing: { document_id: null, document_fields: null },
    deduplication: { urls_count: 0, urls_sample: [] }
  }
}</pre>
</div>
</div>
</details>
<p>Trace a URL to determine if the web crawler saw the URL, how it discovered it, and other events specific to that URL.
To trace a URL use the <code class="literal">getCrawlerUrlTracingResult()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.getCrawlerUrlTracingResult(
    {engine_name: 'crawler-engine',
    body:{
    url: "https://example.com"
  }})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  url: 'https://example.com',
  normalized_url: 'https://example.com/',
  crawl_requests: [
    {
      crawl_request: [Object],
      found: true,
      discover: [Array],
      seed: [Object],
      fetch: [Object],
      output: [Object]
    }
  ]
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-crawler-apis-crawls"></a>Crawls<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Find active crawl requests with the <code class="literal">getCrawlerActiveCrawlRequest()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run()  {
  const response = await client.app.getCrawlerActiveCrawlRequest(
    {engine_name: 'crawler-engine'})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json"> {
  meta: {
    body: { error: 'There are no active crawl requests for this engine' },
    statusCode: 404,
    headers: {
      'cache-control': 'no-cache',
      'content-length': '62',
      'content-type': 'application/json;charset=utf-8',
      date: 'Tue, 17 Jan 2023 11:51:26 GMT',
      server: 'Jetty(9.4.43.v20210629)',
      vary: 'Origin',
      'x-app-search-version': '8.5.3',
      'x-cloud-request-id': 'Uh4ur47ERQGnlIeExfm1jw',
      'x-found-handling-cluster': '613fd603d1da400b99740c891b094278',
      'x-found-handling-instance': 'instance-0000000001',
      'x-request-id': 'Uh4ur47ERQGnlIeExfm1jw',
      'x-runtime': '0.102867'
    },
    meta: {
      context: null,
      request: [Object],
      name: 'app-search',
      connection: [Object],
      attempts: 0,
      aborted: false
    },
    warnings: [Getter]
  }
}</pre>
</div>
</div>
</details>
<p>Start a crawl with the <code class="literal">createCrawlerCrawlRequest()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.createCrawlerCrawlRequest(
    {engine_name: 'crawler-engine'})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  id: '63be8e5e93f321f6828a3bed',
  type: 'full',
  status: 'pending',
  created_at: '2023-01-11T10:24:30Z',
  begun_at: null,
  completed_at: null
}</pre>
</div>
</div>
</details>
<p>Cancel an active crawl with the <code class="literal">deleteCrawlerActiveCrawlRequest()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteCrawlerActiveCrawlRequest(
    {engine_name: 'crawler-engine'})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  id: '63c68c0f93f321c7a88a7d37',
  type: 'full',
  status: 'canceling',
  created_at: '2023-01-17T11:52:47Z',
  begun_at: '2023-01-17T11:52:48Z',
  completed_at: null
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-crawler-apis-entry-points"></a>Entry Points<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Create an entry point with the <code class="literal">createCrawlerEntryPoint()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {const response = await client.app.createCrawlerEntryPoint(
    {engine_name: 'crawler-engine',
    domain_id: '63c6890c93f321ea818a7d02',
    body: {value: '/blog'}
    })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  id: '63be90d993f32111e08a3c53',
  value: '/blog',
  created_at: '2023-01-11T10:35:05Z'
}</pre>
</div>
</div>
</details>
<p>Delete an entry point with the <code class="literal">deleteCrawlerEntryPoint()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteCrawlerEntryPoint(
    {engine_name: 'crawler-engine',
    domain_id: '63c6890c93f321ea818a7d02',
    entry_point_id: '63be90d993f32111e08a3c53'
    })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{deleted: true}</pre>
</div>
<h4><a id="app-search-api-crawler-apis-crawl-rules"></a>Crawl Rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Create a crawl rule with the <code class="literal">createCrawlerCrawlRule()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.createCrawlerCrawlRule(
    {engine_name: 'crawler-engine',
    domain_id: '63be90b993f3211c088a3c41',
    body: {
      "policy": "allow",
      "rule": "contains",
      "pattern": "/blog"
    }
    })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  id: '63be932893f321ce7c8a3c72',
  order: 0,
  policy: 'deny',
  rule: 'ends',
  pattern: '/dont-crawl',
  created_at: '2023-01-11T10:44:56Z'
}</pre>
</div>
</div>
</details>
<p>Update a crawl rule with the <code class="literal">putCrawlerCrawlRule()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.putCrawlerCrawlRule(
    {engine_name: 'crawler-engine',
    domain_id: '63c6890c93f321ea818a7d02',
    crawl_rule_id: '63c68e6393f321faa08a9cd6',
    body: {
      "policy": "deny",
      "rule": "begins",
      "pattern": "/blog"
    }
    })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>Delete a crawl rule with the <code class="literal">deleteCrawlerCrawlRule()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteCrawlerCrawlRule(
    {engine_name: 'crawler-engine',
    domain_id: '63be90b993f3211c088a3c41',
    crawl_rule_id: '63be932893f321ce7c8a3c72'
    })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{deleted: true}</pre>
</div>
<h4><a id="app-search-api-crawler-apis-sitemaps"></a>Sitemaps<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Create a sitemap with the <code class="literal">createCrawlerSitemap()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.createCrawlerSitemap(
    {engine_name: 'crawler-engine',
    domain_id: '63c6890c93f321ea818a7d02',
    body: {
      url: 'https://example.com/sitemap.xml'
    }
    })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  id: '63be961d93f32104cb8a3cb9',
  url: 'https://example.com/sitemap.xml',
  created_at: '2023-01-11T10:57:33Z'
}</pre>
</div>
</div>
</details>
<p>Update a sitemap with the <code class="literal">putCrawlerSitemap()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.putCrawlerSitemap(
      {engine_name: 'crawler-engine',
      domain_id: '63c6890c93f321ea818a7d02',
      sitemap_id: '63c68f7593f32152cd8a9d01',
      body: {
      url: 'https://example.com/sitemap.xml'
      }})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>Delete a sitemap with the <code class="literal">deleteCrawlerSitemap()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.deleteCrawlerSitemap(
      {engine_name: 'crawler-engine',
       domain_id: '63c6890c93f321ea818a7d02',
      sitemap_id: '63c68f7593f32152cd8a9d01',
    })
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<p>A successful response looks like this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{deleted: true}</pre>
</div>
<h3><a id="app-search-api-adaptive-relevance-apis"></a>Adaptive Relevance APIs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h3>
<p>Refer to the <a href="/guide/en/app-search/8.14/adaptive-relevance-api-reference.html" class="ulink" target="_blank" rel="noopener">HTTP API reference</a> for the full HTTP API documentation.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The adaptive relevance API is a <span class="strong strong"><strong>beta</strong></span> feature.
Beta features are subject to change and are not covered by the support SLA of general release (GA) features.</p>
</div>
</div>
<h4><a id="app-search-api-adaptive-relevance-apis-settings"></a>Settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>Get adaptive relevenace settings for an engine with the <code class="literal">getAdaptiveRelevanceSettings()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.getAdaptiveRelevanceSettings(
    {engine_name: 'adaptive-engine'})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  curation: {
    enabled: false,
    mode: 'manual',
    timeframe: 7,
    max_size: 3,
    min_clicks: 20,
    schedule_frequency: 1,
    schedule_unit: 'day'
  }
}</pre>
</div>
</div>
</details>
<p>Enable automatic adaptive relevance with the <code class="literal">putAdaptiveRelevanceSettings()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.putAdaptiveRelevanceSettings(
    {engine_name: 'adaptive-engine',
    body: {
      curation: {
        mode: 'automatic'
      }
    }})
    if (response.errors) {
      console.log(response)
      return
    }
    console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  curation: {
    enabled: false,
    mode: 'manual',
    timeframe: 7,
    max_size: 3,
    min_clicks: 20,
    schedule_frequency: 1,
    schedule_unit: 'day'
  }
}
{
  curation: {
    enabled: false,
    mode: 'automatic',
    timeframe: 7,
    max_size: 3,
    min_clicks: 20,
    schedule_frequency: 1,
    schedule_unit: 'day'
  }
}</pre>
</div>
</div>
</details>
<h4><a id="app-search-api-adaptive-relevance-apis-suggestions"></a>Suggestions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-js/edit/8.14/packages/enterprise-search/docs/app-search-api.asciidoc">edit</a></h4>
<p>List all adaptive relevance suggestions for an engine with the <code class="literal">listAdaptiveRelevanceSuggestions()</code> method:</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You&#8217;ll need to enable suggestions in the App Search UI before you can use this method.
Enable suggestions under the settings tab in <span class="strong strong"><strong>App Search &gt; Engines &gt; <em>your-engine</em> &gt; Curations</strong></span>.</p>
</div>
</div>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.listAdaptiveRelevanceSuggestions(
    {engine_name: 'adaptive-engine'})
  if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 2,
      "size": 25
    }
  },
  "results": [
    {
      "query": "forest",
      "type": "curation",
      "status": "pending",
      "updated_at": "2021-09-02T07:22:23Z",
      "created_at": "2021-09-02T07:22:23Z",
      "promoted": [
        "park_everglades",
        "park_american-samoa",
        "park_arches"
      ],
      "operation": "create"
    },
    {
      "query": "park",
      "type": "curation",
      "status": "pending",
      "updated_at": "2021-10-22T07:34:12Z",
      "created_at": "2021-10-22T07:34:54Z",
      "promoted": [
        "park_yellowstone"
      ],
      "operation": "create",
      "override_manual_curation": true
    }
  ]
}</pre>
</div>
</div>
</details>
<p>Get adaptive relevance suggestions for a query with the <code class="literal">getAdaptiveRelevanceSuggestions()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.getAdaptiveRelevanceSuggestions(
    {engine_name: 'adaptive-engine',
    search_suggestion_query: 'forest'})
    if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
<details>
<summary class="title">Expand to see an <span class="strong strong"><strong>example response</strong></span></summary>
<div class="content">
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 1,
      "size": 25
    }
  },
  "results": [
    {
      "query": "forest",
      "type": "curation",
      "status": "pending",
      "updated_at": "2021-09-02T07:22:23Z",
      "created_at": "2021-09-02T07:22:23Z",
      "promoted": [
        "park_everglades",
        "park_american-samoa",
        "park_arches"
      ],
      "operation": "create"
    }
  ]
}</pre>
</div>
</div>
</details>
<p>Update status of adaptive relevance suggestions with the <code class="literal">putAdaptiveRelevanceSuggestions()</code> method:</p>
<div class="pre_wrapper lang-javascript">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-javascript">async function run() {
  const response = await client.app.putAdaptiveRelevanceSuggestions(
    {engine_name: 'adaptive-engine',
    body: {
      curation: {enabled: true},
    }})
    if (response.errors) {
    console.log(response)
    return
  }
  console.log(response)
}

run().catch(console.error)</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="installation.html">« Installation</a>
</span>
<span class="next">
<a href="workplace-search-api.html">Workplace Search APIs »</a>
</span>
</div>
</body>
</html>
