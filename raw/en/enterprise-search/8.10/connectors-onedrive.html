<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elastic OneDrive connector reference | Enterprise Search documentation [8.10] | Elastic</title>
<meta class="elastic" name="content" content="Elastic OneDrive connector reference | Enterprise Search documentation [8.10]">

<link rel="home" href="index.html" title="Enterprise Search documentation [8.10]"/>
<link rel="up" href="connectors.html" title="Elastic connectors"/>
<link rel="prev" href="connectors-network-drive.html" title="Elastic network drive connector reference"/>
<link rel="next" href="connectors-oracle.html" title="Elastic Oracle connector reference"/>
<meta class="elastic" name="product_version" content="8.10"/>
<meta class="elastic" name="product_name" content="Enterprise Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search/Guide/8.10"/>
<meta name="DC.subject" content="Enterprise Search"/>
<meta name="DC.identifier" content="8.10"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Enterprise Search<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="connectors.html">Elastic connectors</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="connectors-network-drive.html">« Elastic network drive connector reference</a>
</span>
<span class="next">
<a href="connectors-oracle.html">Elastic Oracle connector reference »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="connectors-onedrive"></a>Elastic OneDrive connector reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h2>
</div></div></div>

<p>The <em>Elastic OneDrive connector</em> is a <a class="xref" href="connectors.html" title="Elastic connectors">connector</a> for OneDrive.</p>
<h3><a id="connectors-onedrive-availability-prerequisites"></a>Availability and prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>This connector is available as a <span class="strong strong"><strong>native connector</strong></span> as of Elastic version <span class="strong strong"><strong>8.11.0</strong></span>.</p>
<p>This connector is available as a <span class="strong strong"><strong>connector client</strong></span> from the <span class="strong strong"><strong>Elastic connector framework</strong></span>.</p>
<p>This connector client is compatible with Elastic versions <span class="strong strong"><strong>8.10.0+</strong></span>.</p>
<p>To use this connector, satisfy all <a class="xref" href="build-connector.html" title="Connector clients">connector client requirements</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This connector is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<h3><a id="connectors-onedrive-usage"></a>Usage<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>To use this connector as a <span class="strong strong"><strong>connector client</strong></span>, use the <span class="strong strong"><strong>OneDrive</strong></span> tile from the connectors list <span class="strong strong"><strong>Customized connector</strong></span> workflow.</p>
<p>For additional operations, see <a class="xref" href="connectors-usage.html" title="Using connectors"><em>Using connectors</em></a>.</p>
<h4><a id="connectors-onedrive-usage-connection"></a>Connecting to OneDrive<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h4>
<p>To connect to OneDrive you need to <a href="https://learn.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal" class="ulink" target="_top">create an Azure Active Directory application and service principal</a> that can access resources.</p>
<p>Follow these steps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to the Azure portal (<a href="https://portal.azure.com" class="ulink" target="_top">https://portal.azure.com</a>) and sign in with your Azure account.
</li>
<li class="listitem">
Navigate to the "Azure Active Directory" service.
</li>
<li class="listitem">
Select "App registrations" from the left-hand menu.
</li>
<li class="listitem">
Click on the "New registration" button to register a new application.
</li>
<li class="listitem">
Provide a name for your app, and optionally select the supported account types (e.g., single tenant, multi-tenant).
</li>
<li class="listitem">
Click on the "Register" button to create the app registration.
</li>
<li class="listitem">
After the registration is complete, you will be redirected to the app&#8217;s overview page. Take note of the "Application (client) ID" value, as you&#8217;ll need it later.
</li>
<li class="listitem">
Scroll down to the "API permissions" section and click on the "Add a permission" button.
</li>
<li class="listitem">
In the "Request API permissions" pane, select "Microsoft Graph" as the API.
</li>
<li class="listitem">
Choose the application permissions and select the following permissions under the "Application" tab: <code class="literal">User.Read.All</code>, <code class="literal">File.Read.All</code>
</li>
<li class="listitem">
Click on the "Add permissions" button to add the selected permissions to your app.
Finally, click on the "Grant admin consent" button to grant the required permissions to the app. This step requires administrative privileges. ℹ️ <span class="strong strong"><strong>NOTE</strong></span>: If you are not an admin, you need to request the Admin to grant consent via their Azure Portal.
</li>
<li class="listitem">
Click on "Certificates &amp; Secrets" tab. Go to Client Secrets. Generate a new client secret and keep a note of the string present under <code class="literal">Value</code> column.
</li>
</ol>
</div>
<h3><a id="connectors-onedrive-docker"></a>Deployment using Docker<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>Connector clients are run on your own infrastructure.</p>
<p>You can deploy the OneDrive connector as a self-managed connector client using Docker.
Follow these instructions.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Step 1: Download sample configuration file</strong></span></summary>
<div class="content">
<p>Download the sample configuration file.
You can either download it manually or run the following command:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl https://raw.githubusercontent.com/elastic/connectors/main/config.yml --output ~/connectors-config/config.yml</pre>
</div>
<p>Remember to update the <code class="literal">--output</code> argument value if your directory name is different, or you want to use a different config file name.</p>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Step 2: Update the configuration file for your self-managed connector</strong></span></summary>
<div class="content">
<p>Update the configuration file with the following settings to match your environment:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">elasticsearch.host</code>
</li>
<li class="listitem">
<code class="literal">elasticsearch.api_key</code>
</li>
<li class="listitem">
<code class="literal">connectors</code>
</li>
</ul>
</div>
<p>If you&#8217;re running the connector service against a Dockerized version of Elasticsearch and Kibana, your config file will look like this:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml"># When connecting to your cloud deployment you should edit the host value
elasticsearch.host: http://host.docker.internal:9200
elasticsearch.api_key: &lt;ELASTICSEARCH_API_KEY&gt;

connectors:
  -
    connector_id: &lt;CONNECTOR_ID_FROM_KIBANA&gt;
    service_type: onedrive
    api_key: &lt;CONNECTOR_API_KEY_FROM_KIBANA&gt;</pre>
</div>
<p>Using the <code class="literal">elasticsearch.api_key</code> is the recommended authentication method. However, you can also use <code class="literal">elasticsearch.username</code> and <code class="literal">elasticsearch.password</code> to authenticate with your Elasticsearch instance.</p>
<p>Note: You can change other default configurations by simply uncommenting specific settings in the configuration file and modifying their values.</p>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Step 3: Run the Docker image</strong></span></summary>
<div class="content">
<p>Run the Docker image with the Connector Service using the following command:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">docker run \
-v ~/connectors-config:/config \
--network "elastic" \
--tty \
--rm \
docker.elastic.co/enterprise-search/elastic-connectors:8.10.4.0 \
/app/bin/elastic-ingest \
-c /config/config.yml</pre>
</div>
</div>
</details>
<p>Refer to <a href="https://github.com/elastic/connectors/tree/8.10/docs/DOCKER.md" class="ulink" target="_blank" rel="noopener"><code class="literal">DOCKER.md</code></a> in the <code class="literal">elastic/connectors</code> repo for more details.</p>
<p>Find all available Docker images in the <a href="https://www.docker.elastic.co/r/enterprise-search/elastic-connectors" class="ulink" target="_top">official registry</a>.</p>
<h3><a id="connectors-onedrive-usage-configuration"></a>Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>The following configuration fields are <span class="strong strong"><strong>required</strong></span>:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Azure application Client ID</code>
</span>
</dt>
<dd>
<p>
Unique identifier for your Azure Application, found on the app&#8217;s overview page. Example:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ab123453-12a2-100a-1123-93fd09d67394</code>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">Azure application Client Secret</code>
</span>
</dt>
<dd>
<p>
String value that the application uses to prove its identity when requesting a token, available under the <code class="literal">Certificates &amp; Secrets</code> tab of your Azure application menu. Example:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">eyav1~12aBadIg6SL-STDfg102eBfCGkbKBq_Ddyu</code>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">Azure application Tenant ID</code>
</span>
</dt>
<dd>
<p>
Unique identifier of your Azure Active Directory instance. Example:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">123a1b23-12a3-45b6-7c8d-fc931cfb448d</code>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">Maximum retries per request</code>
</span>
</dt>
<dd>
The number of retry attempts after failed request to OneDrive. Default value is <code class="literal">3</code>.
</dd>
</dl>
</div>
<h4><a id="connectors-onedrive-usage-content-extraction"></a>Content Extraction<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h4>
<p>Refer to <a class="xref" href="connectors-content-extraction.html" title="Content extraction">Content extraction</a> for more details.</p>
<h3><a id="connectors-onedrive-documents-syncs"></a>Documents and syncs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>The connector syncs the following objects and entities:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Files</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Includes metadata such as file name, path, size, content, etc.
</li>
</ul>
</div>
</li>
<li class="listitem">
<span class="strong strong"><strong>Folders</strong></span>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Files bigger than 10 MB won&#8217;t be extracted.
</li>
<li class="listitem">
Permissions are not synced. <span class="strong strong"><strong>All documents</strong></span> indexed to an Elastic deployment will be visible to <span class="strong strong"><strong>all users with access</strong></span> to that Elastic Deployment.
</li>
</ul>
</div>
</div>
</div>
<h3><a id="connectors-onedrive-documents-sync-rules"></a>Sync rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p><em>Basic</em> sync rules are identical for all connectors and are available by default.
For more information read <a class="xref" href="sync-rules.html#sync-rules-types" title="Types of sync rule">Types of sync rule</a>.</p>
<p>Advanced sync rules are not available for this connector in the present version.</p>
<h3><a id="connectors-onedrive-content-extraction"></a>Content Extraction<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>See <a class="xref" href="connectors-content-extraction.html" title="Content extraction"><em>Content extraction</em></a>.</p>
<h3><a id="connectors-onedrive-connector-client-operations"></a>Connector client operations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<h3><a id="connectors-onedrive-testing"></a>End-to-end testing<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>The connector framework enables operators to run functional tests against a real data source.
Refer to <a class="xref" href="build-connector.html#build-connector-testing" title="Connector testing">Connector testing</a> for more details.</p>
<p>To perform E2E testing for the GitHub connector, run the following command:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">$ make ftest NAME=onedrive</pre>
</div>
<p>For faster tests, add the <code class="literal">DATA_SIZE=small</code> flag:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">make ftest NAME=onedrive DATA_SIZE=small</pre>
</div>
<h3><a id="connectors-onedrive-known-issues"></a>Known issues<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>There are currently no known issues for this connector.
Refer to <a class="xref" href="connectors-known-issues.html" title="Connector known issues"><em>Known issues</em></a> for a list of known issues for all connectors.</p>
<h3><a id="connectors-onedrive-troubleshooting"></a>Troubleshooting<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>See <a class="xref" href="connectors-troubleshooting.html" title="Troubleshooting connectors"><em>Troubleshooting</em></a>.</p>
<h3><a id="connectors-onedrive-security"></a>Security<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>See <a class="xref" href="connectors-security.html" title="Connectors security"><em>Security</em></a>.</p>
<h3><a id="connectors-onedrive-source"></a>Framework and source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.10/enterprise-search-docs/connectors-onedrive.asciidoc">edit</a></h3>
<p>This connector is included in the <a href="https://github.com/elastic/connectors/tree/8.10" class="ulink" target="_blank" rel="noopener">Elastic connector framework</a>.</p>
<p>View the <a href="https://github.com/elastic/connectors/tree/8.10/connectors/sources/onedrive.py" class="ulink" target="_blank" rel="noopener">source code for this connector</a> (branch <em>8.10</em>, compatible with Elastic <em>8.10</em>).</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="connectors-network-drive.html">« Elastic network drive connector reference</a>
</span>
<span class="next">
<a href="connectors-oracle.html">Elastic Oracle connector reference »</a>
</span>
</div>
</div>
</body>
</html>
