<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Running from the source code | Enterprise Search documentation [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Running from the source code | Enterprise Search documentation [8.15]">

<link rel="home" href="index.html" title="Enterprise Search documentation [8.15]"/>
<link rel="up" href="build-connector.html" title="Connector clients (self-managed)"/>
<link rel="prev" href="deploy-connector-client.html" title="Deploying self-managed connectors"/>
<link rel="next" href="connectors-run-from-docker.html" title="Running from a Docker container"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Enterprise Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search/Guide/8.15"/>
<meta name="DC.subject" content="Enterprise Search"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="deploy-connector-client.html">« Deploying self-managed connectors</a>
</span>
<span class="next">
<a href="connectors-run-from-docker.html">Running from a Docker container »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Enterprise Search<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="connectors.html">Elastic connectors</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="build-connector.html">Connector clients (self-managed)</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Running from the source code</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/connectors-run-from-source.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="connectors-run-from-source"></a>Running from the source code<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/connectors-run-from-source.asciidoc">edit</a></h2>
</div></div></div>
<p>The basic way to run connectors is to clone the repository and run the code locally.
This is a good option if you are comfortable with Python and want to iterate quickly.</p>
<h4><a id="connectors-run-from-source-setup-kibana"></a>Initial setup in Kibana<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/connectors-run-from-source.asciidoc">edit</a></h4>
<p>Follow the <span class="strong strong"><strong>Connector</strong></span> workflow in the Kibana UI to select the <span class="strong strong"><strong>Connector</strong></span> ingestion method.</p>
<p>Next, complete these steps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Choose which third-party service you’d like to use by selecting a <span class="strong strong"><strong>data source</strong></span>.
</li>
<li class="listitem">
Create and name a new <span class="strong strong"><strong>Elasticsearch index</strong></span>.
</li>
<li class="listitem">
Generate a new <span class="strong strong"><strong>API key</strong></span> and save it somewhere safe.
</li>
<li class="listitem">
Name your connector and provide an optional description
</li>
<li class="listitem">
<span class="strong strong"><strong>Convert</strong></span> native connector to a connector client (<em>Only applicable if connector is also available natively</em>). This action is irreversible.
</li>
<li class="listitem">
<p>Copy the configuration block from the example shown on the screen. You’ll use this in a later step:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml"># ...
connectors:
  - connector_id: &lt;CONNECTOR-ID&gt;
    api_key: &lt;API-KEY&gt; # Scoped API key for this connector (optional). If not specified, the top-level `elasticsearch.api_key` value is used.
    service_type: gmail # example</pre>
</div>
</li>
</ol>
</div>
<h6><a id="connectors-run-from-source-source-clone"></a>Clone the repository and edit <code class="literal">config.yml</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/connectors-run-from-source.asciidoc">edit</a></h6>
<p>Once you&#8217;ve created an index, and entered the access details for your data source, you&#8217;re ready to deploy the connector service.</p>
<p>First, you need to clone the <code class="literal">elastic/connectors</code> repository.</p>
<p>Follow these steps:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Clone or fork the <code class="literal">connectors</code> repository locally with the following command: <code class="literal">git clone https://github.com/elastic/connectors</code>.
</li>
<li class="listitem">
Run <code class="literal">make config</code> to generate your initial <code class="literal">config.yml</code> file
</li>
<li class="listitem">
Open the <code class="literal">config.yml</code> configuration file in your editor of choice.
</li>
<li class="listitem">
<p>Replace the values for <code class="literal">host</code> (your Elasticsearch endpoint), <code class="literal">api_key</code>, <code class="literal">connector_id</code>, and <code class="literal">service_type</code>.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Expand</strong></span> to see an example <code class="literal">config.yml</code> file</summary>
<div class="content">
<p>Replace the values for <code class="literal">api_key</code>, <code class="literal">connector_id</code>, and <code class="literal">service_type</code> with the values you copied earlier.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">elasticsearch:
  api_key: &lt;key1&gt; # Used to write data to .elastic-connectors and .elastic-connectors-sync-jobs
                # Any connectors without a specific `api_key` value will default to using this key
connectors:
  - connector_id: 1234
    api_key: &lt;key2&gt; # Used to write data to the `search-*` index associated with connector 1234
                    # You may have multiple connectors in your config file!
  - connector_id: 5678
    api_key: &lt;key3&gt; # Used to write data to the `search-*` index associated with connector 5678
  - connector_id: abcd # No explicit api key specified, so this connector will use &lt;key1&gt;</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<a id="connectors-run-from-source-api-keys"></a>
<p><span class="strong strong"><strong>API keys for connectors</strong></span></p>
<p>You can configure multiple connectors in your <code class="literal">config.yml</code> file.</p>
<p>The Kibana UI enables you to create API keys that are scoped to a specific index/connector.
If you don&#8217;t create an API key for a specific connector, the top-level <code class="literal">elasticsearch.api_key</code> or <code class="literal">elasticsearch.username:elasticsearch.password</code> value is used.</p>
<p>If these top-level Elasticsearch credentials are not sufficiently privileged to write to individual connector indices, you&#8217;ll need to create these additional, scoped API keys.</p>
<p>Use the example above as a guide.</p>
</div>
</div>
</div>
</details>
</li>
</ul>
</div>
<h6><a id="connectors-run-from-source-run"></a>Run the connector service<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/connectors-run-from-source.asciidoc">edit</a></h6>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You need Python version <code class="literal">3.10</code> to run the connectors service from source.</p>
</div>
</div>
<p>Once you&#8217;ve configured the connector code, you can run the connector service.</p>
<p>In your terminal or IDE:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">cd</code> into the root of your <code class="literal">connectors</code> clone/fork.
</li>
<li class="listitem">
<p>Run the following commands to compile and run the connector service:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">make install
make run</pre>
</div>
</li>
</ol>
</div>
<p>The connector service should now be running.
The UI will let you know that the connector has successfully connected to your Elasticsearch instance.</p>
<p>As a reminder, here we&#8217;re working locally.
In a production setup, you&#8217;ll deploy the connector service to your own infrastructure.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="deploy-connector-client.html">« Deploying self-managed connectors</a>
</span>
<span class="next">
<a href="connectors-run-from-docker.html">Running from a Docker container »</a>
</span>
</div>
</body>
</html>
