<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elastic Salesforce connector reference | Enterprise Search documentation [8.12] | Elastic</title>
<meta class="elastic" name="content" content="Elastic Salesforce connector reference | Enterprise Search documentation [8.12]">

<link rel="home" href="index.html" title="Enterprise Search documentation [8.12]"/>
<link rel="up" href="connectors-references.html" title="Connectors references"/>
<link rel="prev" href="connectors-s3.html" title="Elastic S3 connector reference"/>
<link rel="next" href="connectors-servicenow.html" title="Elastic ServiceNow connector reference"/>
<meta class="elastic" name="product_version" content="8.12"/>
<meta class="elastic" name="product_name" content="Enterprise Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search/Guide/8.12"/>
<meta name="DC.subject" content="Enterprise Search"/>
<meta name="DC.identifier" content="8.12"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Enterprise Search<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="connectors-references.html">Connectors references</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="connectors-s3.html">« Elastic S3 connector reference</a>
</span>
<span class="next">
<a href="connectors-servicenow.html">Elastic ServiceNow connector reference »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="connectors-salesforce"></a>Elastic Salesforce connector reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h2>
</div></div></div>

<p>The <em>Elastic Salesforce connector</em> is a <a class="xref" href="connectors.html" title="Elastic connectors">connector</a> for <a href="https://www.salesforce.com/" class="ulink" target="_blank" rel="noopener">Salesforce</a> data sources.</p>
<h3><a id="connectors-salesforce-native-connector-reference"></a><span class="strong strong"><strong>Native connector reference (managed service)</strong></span><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h3>
<details>
<summary class="title">View reference for the <span class="strong strong"><strong>native connector reference (managed service)</strong></span>.</summary>
<div class="content">
<h4><a id="connectors-salesforce-availability-prerequisites"></a>Availability and prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>This connector is available as a <span class="strong strong"><strong>native connector</strong></span> in Elastic Cloud since <span class="strong strong"><strong>8.12.0</strong></span>.
To use this connector, satisfy all <a class="xref" href="build-connector.html" title="Connector clients (self-managed)">connector client requirements</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This connector is in <span class="strong strong"><strong>beta</strong></span> and is subject to change.
The design and code is less mature than official GA features and is being provided as-is with no warranties.
Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<h4><a id="connectors-salesforce-compatability"></a>Compatibility<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>This connector is compatible with the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Salesforce
</li>
<li class="listitem">
Salesforce Sandbox
</li>
</ul>
</div>
<h4><a id="connectors-salesforce-usage"></a>Usage<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>To use this connector as a <span class="strong strong"><strong>connector client</strong></span>, use the <span class="strong strong"><strong>Connector</strong></span> workflow in the Kibana UI.</p>
<p>For additional operations, see <a class="xref" href="connectors-usage.html" title="Using connectors">connectors usage</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You need to create an Salesforce connected app with OAuth2.0 enabled to authenticate with Salesforce.</p>
</div>
</div>
<h5><a id="connectors-salesforce-connected-app"></a>Create a Salesforce connected app<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h5>
<p>The Salesforce connector authenticates with Salesforce through a <span class="strong strong"><strong>connected app</strong></span>.
Follow the official Salesforce documentation for <a href="https://help.salesforce.com/s/articleView?id=sf.connected_app_client_credentials_setup.htm" class="ulink" target="_blank" rel="noopener">Configuring a Connected App for the OAuth 2.0 Client Credentials Flow</a>.</p>
<p>When creating the connected app, in the section titled <span class="strong strong"><strong>API (Enable OAuth Settings)</strong></span> ensure the following settings are <em>enabled</em>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Enable OAuth Settings</strong></span>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Enable for Device Flow</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Callback URL</strong></span> should be the Salesforce dummy callback URL, <code class="literal">https://test.salesforce.com/services/oauth2/success</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<span class="strong strong"><strong>Require Secret for Web Server Flow</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Require Secret for Refresh Token Flow</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Enable Client Credentials Flow</strong></span>
</li>
</ul>
</div>
<p>All other options should be disabled.
Finally, in the section <span class="strong strong"><strong>Selected OAuth Scopes</strong></span>, include the following OAuth scopes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Manage user data via APIs (api)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Perform requests at any time (refresh_token, offline_access)</strong></span>
</li>
</ul>
</div>
<h4><a id="connectors-salesforce-admin-prerequisites"></a>Salesforce admin requirements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>By default, the Salesforce connector requires global administrator permissions to access Salesforce data.
Expand the section below to learn how to create a custom Salesforce user with minimal permissions.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Create a custom Salesforce user with minimal permissions</strong></span></summary>
<div class="content">
<p>By creating a custom profile with sufficient permissions from the Setup menu, you can remove the system administrator role requirement for fetching data from Salesforce.</p>
<p>To create a new profile:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From the Salesforce Setup menu, go to <span class="strong strong"><strong>Administration &#8658; Users &#8658; Profiles</strong></span>.
</li>
<li class="listitem">
Create a new profile.
</li>
<li class="listitem">
<p>Choose <code class="literal">Read Only</code> or <code class="literal">Standard User</code> from the <span class="strong strong"><strong>Existing Profile</strong></span> dropdown. Name the profile and save it.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, <code class="literal">Read Only</code> or <code class="literal">Standard User</code> users have read permission to access all standard objects.</p>
</div>
</div>
</li>
<li class="listitem">
Edit the newly created profile. Under <span class="strong strong"><strong>Object Permissions</strong></span>, assign at least <code class="literal">Read</code> access to the standard objects and custom objects you want to ingest into Elasticsearch.
</li>
<li class="listitem">
<p>Make sure the newly created profile has at least <code class="literal">Read</code> access for the following standard objects:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Account
</li>
<li class="listitem">
Campaign
</li>
<li class="listitem">
Case
</li>
<li class="listitem">
Contact
</li>
<li class="listitem">
EmailMessage
</li>
<li class="listitem">
Lead
</li>
<li class="listitem">
Opportunity
</li>
<li class="listitem">
<p>User</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If using <a class="xref" href="sync-rules.html#sync-rules-advanced" title="Advanced sync rules">advanced sync rules</a> you&#8217;ll need to assign <code class="literal">Read</code> access for that specific object in the profile.</p>
</div>
</div>
</li>
</ul>
</div>
</li>
<li class="listitem">
Go to <span class="strong strong"><strong>Users &#8658; Profiles</strong></span> and assign the newly created profile to the user.
</li>
<li class="listitem">
<p>Go to <span class="strong strong"><strong>Connected apps</strong></span>, select your app and then select <span class="strong strong"><strong>Edit policies</strong></span>.
Assign the client credentials flow to the user with the custom profile in Salesforce.</p>
<p>Now, the connector can be configured for this user profile to fetch all object records, without needing the system administration role.</p>
</li>
</ol>
</div>
</div>
</details>
<h4><a id="connectors-salesforce-configuration"></a>Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>The following settings are required to set up this connector:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Domain (required)
</span>
</dt>
<dd>
The domain for your Salesforce account.
This is the subdomain that appears in your Salesforce URL.
For example, if your Salesforce URL is <code class="literal">foo.my.salesforce.com</code>, then your domain would be <code class="literal">foo</code>.
If you are using Salesforce Sandbox, your URL will contain an extra subdomain and will look similar to <code class="literal">foo.sandbox.my.salesforce.com</code>.
In this case, your domain would be <code class="literal">foo.sandbox</code>.
</dd>
<dt>
<span class="term">
Client ID (required)
</span>
</dt>
<dd>
The Client ID generated by your connected app.
The Salesforce documentation will sometimes also call this a <span class="strong strong"><strong>Consumer Key</strong></span>
</dd>
<dt>
<span class="term">
Client Secret (required)
</span>
</dt>
<dd>
The Client Secret generated by your connected app.
The Salesforce documentation will sometimes also call this a <span class="strong strong"><strong>Consumer Secret</strong></span>.
</dd>
</dl>
</div>
<h5><a id="connectors-salesforce-configuration-credentials"></a>Finding the Client ID and Client Secret<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h5>
<p>The Client ID and Client Secret are not automatically shown to you after you create a connected app.
You can find them by taking the following steps:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Navigate to <span class="strong strong"><strong>Setup</strong></span>
</li>
<li class="listitem">
Go to <span class="strong strong"><strong>Platform Tools &gt; Apps &gt; App Manager</strong></span>
</li>
<li class="listitem">
Click on the triangle next to your app and select <span class="strong strong"><strong>View</strong></span>
</li>
<li class="listitem">
After the page loads, click on <span class="strong strong"><strong>Manage Consumer Details</strong></span>
</li>
</ul>
</div>
<p>Your Client ID and Client Secret should now be visible at the top of the page.</p>
<h4><a id="connectors-salesforce-sync-rules"></a>Sync rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p><em>Basic</em> sync rules are identical for all connectors and are available by default.
For more information read <a class="xref" href="sync-rules.html#sync-rules-types" title="Types of sync rule">Types of sync rule</a>.</p>
<h5><a id="connectors-salesforce-sync-rules-advanced"></a>Advanced sync rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h5>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>A <a class="xref" href="connectors-sync-types.html#connectors-sync-types-full" title="Full syncs">full sync</a> is required for advanced sync rules to take effect.</p>
</div>
</div>
<p>The following section describes <span class="strong strong"><strong>advanced sync rules</strong></span> for this connector.
Advanced sync rules enable filtering of data in Salesforce <em>before</em> indexing into Elasticsearch.</p>
<p>They take the following parameters:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">query</code> : Salesforce query to filter the documents.
</li>
<li class="listitem">
<code class="literal">language</code> : Salesforce query language.
Allowed values are <span class="strong strong"><strong>SOQL</strong></span> and <span class="strong strong"><strong>SOSL</strong></span>.
</li>
</ol>
</div>
<h6><a id="connectors-salesforce-sync-rules-advanced-fetch-query-language"></a>Fetch documents based on the query and language specified<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h6>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents using SOQL query</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT Id, Name FROM Account",
    "language": "SOQL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents using SOSL query.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "FIND {Salesforce} IN ALL FIELDS",
    "language": "SOSL"
  }
]</pre>
</div>
<h6><a id="connectors-salesforce-sync-rules-advanced-fetch-objects"></a>Fetch standard and custom objects using SOQL and SOSL queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h6>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents for standard objects via SOQL and SOSL query.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT Account_Id, Address, Contact_Number FROM Account",
    "language": "SOQL"
  },
  {
    "query": "FIND {Alex Wilber} IN ALL FIELDS RETURNING Contact(LastModifiedDate, Name, Address)",
    "language": "SOSL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents for custom objects via SOQL and SOSL query.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT Connector_Name, Version FROM Connector__c",
    "language": "SOQL"
  },
  {
    "query": "FIND {Salesforce} IN ALL FIELDS RETURNING Connectors__c(Id, Connector_Name, Connector_Version)",
    "language": "SOSL"
  }
]</pre>
</div>
<h6><a id="connectors-salesforce-sync-rules-advanced-fetch-standard-custom-fields"></a>Fetch documents with standard and custom fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h6>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents with all standard and custom fields for Account object.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT FIELDS(ALL) FROM Account",
    "language": "SOQL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents with all custom fields for Connector object.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT FIELDS(CUSTOM) FROM Connector__c",
    "language": "SOQL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents with all standard fields for Account object.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT FIELDS(STANDARD) FROM Account",
    "language": "SOQL"
  }
]</pre>
</div>
<h4><a id="connectors-salesforce-documents-syncs"></a>Documents and syncs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>The connector syncs the following Salesforce objects:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Accounts</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Campaigns</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Cases</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Contacts</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Content Documents</strong></span> (files uploaded to Salesforce)
</li>
<li class="listitem">
<span class="strong strong"><strong>Leads</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Opportunities</strong></span>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The connector will not ingest any objects that it does not have permissions to query.</p>
</div>
</div>
<h4><a id="connectors-salesforce-content-extraction"></a>Content Extraction<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>The connector will retrieve Content Documents from your Salesforce source if they meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Are attached to one or more objects that are synced
</li>
<li class="listitem">
Are of a file type that can be extracted
</li>
</ul>
</div>
<p>This means that the connector will not ingest any Content Documents you have that are <em>not</em> attached to a supported Salesforce object.
See <a class="xref" href="connectors-salesforce.html#connectors-salesforce-documents-syncs" title="Documents and syncs">documents and syncs</a> for a list of supported object types.</p>
<p>If a single Content Document is attached to multiple supported objects, only one Elastic document will be created for it.
This document will retain links to every object that it was connected to in the <code class="literal">related_ids</code> field.</p>
<p>See <a class="xref" href="connectors-content-extraction.html" title="Content extraction">content extraction</a> for more specifics on content extraction.</p>
<h4><a id="connectors-salesforce-known-issues"></a>Known issues<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>There are currently no known issues for this connector.
Refer to <a class="xref" href="connectors-known-issues.html" title="Connector known issues">connector known issues</a> for a list of known issues for all connectors.</p>
<h4><a id="connectors-salesforce-security"></a>Security<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>See <a class="xref" href="connectors-security.html" title="Connectors security">connectors security</a>.</p>
<h4><a id="connectors-salesforce-source"></a>Framework and source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>This connector is built with the <a href="https://github.com/elastic/connectors/tree/8.12" class="ulink" target="_blank" rel="noopener">Elastic connector framework</a>.</p>
<p>View the <a href="https://github.com/elastic/connectors/tree/8.12/connectors/sources/salesforce.py" class="ulink" target="_blank" rel="noopener">source code for this connector</a> (branch <em>8.12</em>, compatible with Elastic <em>8.12</em>).</p>
</div>
</details>
<h3><a id="connectors-salesforce-connector-client-reference"></a><span class="strong strong"><strong>Connector client reference (self-managed)</strong></span><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h3>
<details>
<summary class="title">View reference for the <span class="strong strong"><strong>connector client reference (self-managed)</strong></span>.</summary>
<div class="content">
<h4><a id="connectors-salesforce-client-availability-prerequisites"></a>Availability and prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>This connector is available as a self-managed <span class="strong strong"><strong>connector client</strong></span>.
This connector client is compatible with Elastic versions <span class="strong strong"><strong>8.10.0+</strong></span>.
To use this connector, satisfy all <a class="xref" href="build-connector.html" title="Connector clients (self-managed)">connector client requirements</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This connector is in <span class="strong strong"><strong>beta</strong></span> and is subject to change.
The design and code is less mature than official GA features and is being provided as-is with no warranties.
Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<h4><a id="connectors-salesforce-client-compatability"></a>Compatibility<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>This connector is compatible with the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Salesforce
</li>
<li class="listitem">
Salesforce Sandbox
</li>
</ul>
</div>
<h4><a id="connectors-salesforce-client-usage"></a>Usage<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>To use this connector as a <span class="strong strong"><strong>connector client</strong></span>, use the <span class="strong strong"><strong>Connector</strong></span> workflow in the Kibana UI.</p>
<p>For additional operations, see <a class="xref" href="connectors-usage.html" title="Using connectors">connectors usage</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You need to create an Salesforce connected app with OAuth2.0 enabled to authenticate with Salesforce.</p>
</div>
</div>
<h5><a id="connectors-salesforce-client-connected-app"></a>Create a Salesforce connected app<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h5>
<p>The Salesforce connector authenticates with Salesforce through a <span class="strong strong"><strong>connected app</strong></span>.
Follow the official Salesforce documentation for <a href="https://help.salesforce.com/s/articleView?id=sf.connected_app_client_credentials_setup.htm" class="ulink" target="_blank" rel="noopener">Configuring a Connected App for the OAuth 2.0 Client Credentials Flow</a>.</p>
<p>When creating the connected app, in the section titled <span class="strong strong"><strong>API (Enable OAuth Settings)</strong></span> ensure the following settings are <em>enabled</em>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Enable OAuth Settings</strong></span>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Enable for Device Flow</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Callback URL</strong></span> should be the Salesforce dummy callback URL, <code class="literal">https://test.salesforce.com/services/oauth2/success</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<span class="strong strong"><strong>Require Secret for Web Server Flow</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Require Secret for Refresh Token Flow</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Enable Client Credentials Flow</strong></span>
</li>
</ul>
</div>
<p>All other options should be disabled.
Finally, in the section <span class="strong strong"><strong>Selected OAuth Scopes</strong></span>, include the following OAuth scopes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Manage user data via APIs (api)</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Perform requests at any time (refresh_token, offline_access)</strong></span>
</li>
</ul>
</div>
<h4><a id="connectors-client-salesforce-admin-prerequisites"></a>Salesforce admin requirements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>By default, the Salesforce connector requires global administrator permissions to access Salesforce data.
Expand the section below to learn how to create a custom Salesforce user with minimal permissions.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Create a custom Salesforce user with minimal permissions</strong></span></summary>
<div class="content">
<p>By creating a custom profile with sufficient permissions from the Setup menu, you can remove the system administrator role requirement for fetching data from Salesforce.</p>
<p>To create a new profile:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From the Salesforce Setup menu, go to <span class="strong strong"><strong>Administration &#8658; Users &#8658; Profiles</strong></span>.
</li>
<li class="listitem">
Create a new profile.
</li>
<li class="listitem">
<p>Choose <code class="literal">Read Only</code> or <code class="literal">Standard User</code> from the <span class="strong strong"><strong>Existing Profile</strong></span> dropdown. Name the profile and save it.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, <code class="literal">Read Only</code> or <code class="literal">Standard User</code> users have read permission to access all standard objects.</p>
</div>
</div>
</li>
<li class="listitem">
Edit the newly created profile. Under <span class="strong strong"><strong>Object Permissions</strong></span>, assign at least <code class="literal">Read</code> access to the standard objects and custom objects you want to ingest into Elasticsearch.
</li>
<li class="listitem">
<p>Make sure the newly created profile has at least <code class="literal">Read</code> access for the following standard objects:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Account
</li>
<li class="listitem">
Campaign
</li>
<li class="listitem">
Case
</li>
<li class="listitem">
Contact
</li>
<li class="listitem">
EmailMessage
</li>
<li class="listitem">
Lead
</li>
<li class="listitem">
Opportunity
</li>
<li class="listitem">
<p>User</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If using <a class="xref" href="sync-rules.html#sync-rules-advanced" title="Advanced sync rules">advanced sync rules</a> you&#8217;ll need to assign <code class="literal">Read</code> access for that specific object in the profile.</p>
</div>
</div>
</li>
</ul>
</div>
</li>
<li class="listitem">
Go to <span class="strong strong"><strong>Users &#8658; Profiles</strong></span> and assign the newly created profile to the user.
</li>
<li class="listitem">
<p>Go to <span class="strong strong"><strong>Connected apps</strong></span>, select your app and then select <span class="strong strong"><strong>Edit policies</strong></span>.
Assign the client credentials flow to the user with the custom profile in Salesforce.</p>
<p>Now, the connector can be configured for this user profile to fetch all object records, without needing the system administration role.</p>
</li>
</ol>
</div>
</div>
</details>
<h4><a id="connectors-salesforce-client-docker"></a>Deployment using Docker<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>Connector clients are run on your own infrastructure.</p>
<p>You can deploy the Salesforce connector as a self-managed connector client using Docker.
Follow these instructions.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Step 1: Download sample configuration file</strong></span></summary>
<div class="content">
<p>Download the sample configuration file.
You can either download it manually or run the following command:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">curl https://raw.githubusercontent.com/elastic/connectors/main/config.yml --output ~/connectors-config/config.yml</pre>
</div>
<p>Remember to update the <code class="literal">--output</code> argument value if your directory name is different, or you want to use a different config file name.</p>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Step 2: Update the configuration file for your self-managed connector</strong></span></summary>
<div class="content">
<p>Update the configuration file with the following settings to match your environment:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">elasticsearch.host</code>
</li>
<li class="listitem">
<code class="literal">elasticsearch.api_key</code>
</li>
<li class="listitem">
<code class="literal">connectors</code>
</li>
</ul>
</div>
<p>If you&#8217;re running the connector service against a Dockerized version of Elasticsearch and Kibana, your config file will look like this:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml"># When connecting to your cloud deployment you should edit the host value
elasticsearch.host: http://host.docker.internal:9200
elasticsearch.api_key: &lt;ELASTICSEARCH_API_KEY&gt;

connectors:
  -
    connector_id: &lt;CONNECTOR_ID_FROM_KIBANA&gt;
    service_type: salesforce
    api_key: &lt;CONNECTOR_API_KEY_FROM_KIBANA&gt;</pre>
</div>
<p>Using the <code class="literal">elasticsearch.api_key</code> is the recommended authentication method. However, you can also use <code class="literal">elasticsearch.username</code> and <code class="literal">elasticsearch.password</code> to authenticate with your Elasticsearch instance.</p>
<p>Note: You can change other default configurations by simply uncommenting specific settings in the configuration file and modifying their values.</p>
</div>
</details>
<details>
<summary class="title"><span class="strong strong"><strong>Step 3: Run the Docker image</strong></span></summary>
<div class="content">
<p>Run the Docker image with the Connector Service using the following command:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">docker run \
-v ~/connectors-config:/config \
--network "elastic" \
--tty \
--rm \
docker.elastic.co/enterprise-search/elastic-connectors:8.12.2.0 \
/app/bin/elastic-ingest \
-c /config/config.yml</pre>
</div>
</div>
</details>
<p>Refer to <a href="https://github.com/elastic/connectors/tree/8.12/docs/DOCKER.md" class="ulink" target="_blank" rel="noopener"><code class="literal">DOCKER.md</code></a> in the <code class="literal">elastic/connectors</code> repo for more details.</p>
<p>Find all available Docker images in the <a href="https://www.docker.elastic.co/r/enterprise-search/elastic-connectors" class="ulink" target="_top">official registry</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We also have a quickstart self-managed option using Docker Compose, so you can spin up all required services at once: Elasticsearch, Kibana, and the connectors service.
Refer to this <a href="https://github.com/elastic/connectors/tree/main/scripts/stack#readme" class="ulink" target="_top">README</a> in the <code class="literal">elastic/connectors</code> repo for more information.</p>
</div>
</div>
<h4><a id="connectors-salesforce-client-configuration"></a>Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>The following settings are required to set up this connector:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">domain</code>(required)
</span>
</dt>
<dd>
The domain for your Salesforce account.
This is the subdomain that appears in your Salesforce URL.
For example, if your Salesforce URL is <code class="literal">foo.my.salesforce.com</code>, then your domain would be <code class="literal">foo</code>.
If you are using Salesforce Sandbox, your URL will contain an extra subdomain and will look similar to <code class="literal">foo.sandbox.my.salesforce.com</code>.
In this case, your domain would be <code class="literal">foo.sandbox</code>.
</dd>
<dt>
<span class="term">
<code class="literal">client_id</code>(required)
</span>
</dt>
<dd>
The Client ID generated by your connected app.
The Salesforce documentation will sometimes also call this a <span class="strong strong"><strong>Consumer Key</strong></span>
</dd>
<dt>
<span class="term">
<code class="literal">client_secret</code>(required)
</span>
</dt>
<dd>
The Client Secret generated by your connected app.
The Salesforce documentation will sometimes also call this a <span class="strong strong"><strong>Consumer Secret</strong></span>.
</dd>
</dl>
</div>
<h5><a id="connectors-salesforce-client-configuration-credentials"></a>Finding the Client ID and Client Secret<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h5>
<p>The Client ID and Client Secret are not automatically shown to you after you create a connected app.
You can find them by taking the following steps:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Navigate to <span class="strong strong"><strong>Setup</strong></span>
</li>
<li class="listitem">
Go to <span class="strong strong"><strong>Platform Tools &gt; Apps &gt; App Manager</strong></span>
</li>
<li class="listitem">
Click on the triangle next to your app and select <span class="strong strong"><strong>View</strong></span>
</li>
<li class="listitem">
After the page loads, click on <span class="strong strong"><strong>Manage Consumer Details</strong></span>
</li>
</ul>
</div>
<p>Your Client ID and Client Secret should now be visible at the top of the page.</p>
<h4><a id="connectors-salesforce-client-sync-rules"></a>Sync rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p><em>Basic</em> sync rules are identical for all connectors and are available by default.</p>
<p>For more information read <a class="xref" href="sync-rules.html#sync-rules-types" title="Types of sync rule">sync rules</a>.</p>
<h5><a id="connectors-salesforce-client-sync-rules-advanced"></a>Advanced sync rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h5>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>A <a class="xref" href="connectors-sync-types.html#connectors-sync-types-full" title="Full syncs">full sync</a> is required for advanced sync rules to take effect.</p>
</div>
</div>
<p>The following section describes <span class="strong strong"><strong>advanced sync rules</strong></span> for this connector.
Advanced sync rules enable filtering of data in Salesforce <em>before</em> indexing into Elasticsearch.</p>
<p>They take the following parameters:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">query</code> : Salesforce query to filter the documents.
</li>
<li class="listitem">
<code class="literal">language</code> : Salesforce query language.
Allowed values are <span class="strong strong"><strong>SOQL</strong></span> and <span class="strong strong"><strong>SOSL</strong></span>.
</li>
</ol>
</div>
<h6><a id="connectors-salesforce-client-sync-rules-advanced-fetch-query-language"></a>Fetch documents based on the query and language specified<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h6>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents using SOQL query</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT Id, Name FROM Account",
    "language": "SOQL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents using SOSL query.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "FIND {Salesforce} IN ALL FIELDS",
    "language": "SOSL"
  }
]</pre>
</div>
<h6><a id="connectors-salesforce-client-sync-rules-advanced-fetch-objects"></a>Fetch standard and custom objects using SOQL and SOSL queries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h6>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents for standard objects via SOQL and SOSL query.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT Account_Id, Address, Contact_Number FROM Account",
    "language": "SOQL"
  },
  {
    "query": "FIND {Alex Wilber} IN ALL FIELDS RETURNING Contact(LastModifiedDate, Name, Address)",
    "language": "SOSL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents for custom objects via SOQL and SOSL query.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT Connector_Name, Version FROM Connector__c",
    "language": "SOQL"
  },
  {
    "query": "FIND {Salesforce} IN ALL FIELDS RETURNING Connectors__c(Id, Connector_Name, Connector_Version)",
    "language": "SOSL"
  }
]</pre>
</div>
<h6><a id="connectors-salesforce-client-sync-rules-advanced-fetch-standard-custom-fields"></a>Fetch documents with standard and custom fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h6>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents with all standard and custom fields for Account object.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT FIELDS(ALL) FROM Account",
    "language": "SOQL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents with all custom fields for Connector object.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT FIELDS(CUSTOM) FROM Connector__c",
    "language": "SOQL"
  }
]</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: Fetch documents with all standard fields for Account object.</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">[
  {
    "query": "SELECT FIELDS(STANDARD) FROM Account",
    "language": "SOQL"
  }
]</pre>
</div>
<h4><a id="connectors-salesforce-client-documents-syncs"></a>Documents and syncs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>The connector syncs the following Salesforce objects:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Accounts</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Campaigns</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Cases</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Contacts</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Content Documents</strong></span> (files uploaded to Salesforce)
</li>
<li class="listitem">
<span class="strong strong"><strong>Leads</strong></span>
</li>
<li class="listitem">
<span class="strong strong"><strong>Opportunities</strong></span>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The connector will not ingest any objects that it does not have permissions to query.</p>
</div>
</div>
<h4><a id="connectors-salesforce-client-content-extraction"></a>Content Extraction<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>The connector will retrieve Content Documents from your Salesforce source if they meet the following criteria:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Are attached to one or more objects that are synced
</li>
<li class="listitem">
Are of a file type that can be extracted
</li>
</ul>
</div>
<p>This means that the connector will not ingest any Content Documents you have that are <em>not</em> attached to a supported Salesforce object.
See <a class="xref" href="connectors-salesforce.html#connectors-salesforce-client-documents-syncs" title="Documents and syncs">documents and syncs</a> for a list of supported object types.</p>
<p>If a single Content Document is attached to multiple supported objects, only one Elastic document will be created for it.
This document will retain links to every object that it was connected to in the <code class="literal">related_ids</code> field.</p>
<p>See <a class="xref" href="connectors-content-extraction.html" title="Content extraction">content extraction</a> for more specifics on content extraction.</p>
<h4><a id="connectors-salesforce-client-known-issues"></a>Known issues<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>There are currently no known issues for this connector.
Refer to <a class="xref" href="connectors-known-issues.html" title="Connector known issues">connector known issues</a> for a list of known issues for all connectors.</p>
<h4><a id="connectors-salesforce-client-security"></a>Security<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>See <a class="xref" href="connectors-security.html" title="Connectors security">connectors security</a>.</p>
<h4><a id="connectors-salesforce-client-source"></a>Framework and source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.12/enterprise-search-docs/connectors-salesforce.asciidoc">edit</a></h4>
<p>This connector is built with the <a href="https://github.com/elastic/connectors/tree/8.12" class="ulink" target="_blank" rel="noopener">Elastic connector framework</a>.</p>
<p>View the <a href="https://github.com/elastic/connectors/tree/8.12/connectors/sources/salesforce.py" class="ulink" target="_blank" rel="noopener">source code for this connector</a> (branch <em>8.12</em>, compatible with Elastic <em>8.12</em>).</p>
</div>
</details>
</div>
<div class="navfooter">
<span class="prev">
<a href="connectors-s3.html">« Elastic S3 connector reference</a>
</span>
<span class="next">
<a href="connectors-servicenow.html">Elastic ServiceNow connector reference »</a>
</span>
</div>
</div>
</body>
</html>
