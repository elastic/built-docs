<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Monitoring | Enterprise Search documentation [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Monitoring | Enterprise Search documentation [8.15]">

<link rel="home" href="index.html" title="Enterprise Search documentation [8.15]"/>
<link rel="up" href="server.html" title="Elastic Enterprise Search server"/>
<link rel="prev" href="storage-api.html" title="Storage API"/>
<link rel="next" href="read-only-mode.html" title="Read-only mode"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Enterprise Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search/Guide/8.15"/>
<meta name="DC.subject" content="Enterprise Search"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="storage-api.html">« Storage API</a>
</span>
<span class="next">
<a href="read-only-mode.html">Read-only mode »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Enterprise Search<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="server.html">Elastic Enterprise Search server</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Monitoring</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="monitoring"></a>Monitoring<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></h2>
</div></div></div>
<p>Enterprise Search and the Elastic Stack provide monitoring features
to keep a pulse on the health and performance of your Enterprise Search deployment.</p>
<h3><a id="monitor-ent-search-on-cloud"></a>Monitor Enterprise Search deployments on Elastic Cloud<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></h3>
<p>Elastic Cloud provides the easiest path to monitor your deployment. Follow these recommended steps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a href="/guide/en/cloud/current/ec-enable-logging-and-monitoring.html#ec-enable-logging-and-monitoring-steps" class="ulink" target="_top">Enable logging and monitoring</a> for your deployment.
</li>
<li class="listitem">
Open Kibana in your logging and monitoring deployment.
</li>
<li class="listitem">
From the sidebar, under <span class="strong strong"><strong>Management</strong></span>, choose <span class="strong strong"><strong>Stack Monitoring</strong></span>.
</li>
<li class="listitem">
Choose the Enterprise Search tile to view information about your deployment including HTTP traffic, JVM statistics, App Search engine counts, Workplace Search content source counts, and number of crawler workers.
</li>
</ol>
</div>
<p>Additional monitoring options:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you need more insights into the low-level details of Enterprise Search itself, you can enable <a class="xref" href="monitoring.html#apm-for-enterprise-search" title="APM for Enterprise Search">APM for Enterprise Search</a>.
</li>
<li class="listitem">
You may also call Enterprise Search <a class="xref" href="monitoring-apis.html" title="Monitoring your deployments">monitoring APIs</a> to access internal Enterprise Search system metrics and more product usage details.
</li>
<li class="listitem">
You may also <a class="xref" href="monitoring.html#kibana-monitoring-dashboard" title="Kibana dashboards for Enterprise Search monitoring">import pre-built Kibana dashboards</a> into your deployment for additional flexibility.
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>It&#8217;s not necessary to enable the <a class="xref" href="monitoring.html#self-monitoring" title="Enterprise Search self-monitoring">Enterprise Search self-monitoring</a> feature for Elastic Cloud deployments.
The integrated stack monitoring capabilities on Elastic Cloud collect the same information.</p>
</div>
</div>
<h3><a id="monitoring-self-managed"></a>Monitor Enterprise Search self-managed deployments<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></h3>
<p>Follow these steps to monitor your self-managed Enterprise Search deployment:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Enable <a class="xref" href="monitoring.html#self-monitoring" title="Enterprise Search self-monitoring">Enterprise Search self-monitoring</a>.
</li>
<li class="listitem">
Import <a class="xref" href="monitoring.html#kibana-monitoring-dashboard" title="Kibana dashboards for Enterprise Search monitoring">pre-built Kibana dashboards</a>.
</li>
</ol>
</div>
<p>If you need more insights into the low-level details of Enterprise Search itself, you can enable <a class="xref" href="monitoring.html#apm-for-enterprise-search" title="APM for Enterprise Search">APM for Enterprise Search</a>.</p>
<p>You may also call Enterprise Search <a class="xref" href="monitoring-apis.html" title="Monitoring your deployments">monitoring APIs</a> to access internal Enterprise Search system metrics and more product usage details.</p>
<h3><a id="kibana-monitoring-dashboard"></a>Kibana dashboards for Enterprise Search monitoring<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></h3>
<p>To visualize the metrics ingested into Elasticsearch via Cloud monitoring, via the
<a class="xref" href="monitoring.html#self-monitoring" title="Enterprise Search self-monitoring">self-monitoring</a> feature, or via a dedicated
<a class="xref" href="monitoring.html#enterprise-search-metricbeat-module" title="Enterprise Search Metricbeat module">Enterprise Search Metricbeat module</a>, import pre-built Kibana dashboards into your deployment:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Download the <a href="https://raw.githubusercontent.com/elastic/ent-search-monitoring/main/dashboard/8.0/enterprise-search-overview-8.0.ndjson" class="ulink" target="_blank" rel="noopener">enterprise-search-overview-8.0.ndjson</a> dashboard file from the <a href="https://github.com/elastic/ent-search-monitoring" class="ulink" target="_blank" rel="noopener">elastic/ent-search-monitoring</a> GitHub repository.
</li>
<li class="listitem">
Open Kibana.
</li>
<li class="listitem">
From the sidebar, under <span class="strong strong"><strong>Management</strong></span>, choose <span class="strong strong"><strong>Stack Management</strong></span>.
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Kibana</strong></span>, choose <span class="strong strong"><strong>Saved Objects</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Import</strong></span> and import the <a href="https://github.com/elastic/ent-search-monitoring/tree/main/dashboard/8.0" class="ulink" target="_blank" rel="noopener">enterprise-search-overview-8.0.ndjson</a> dashboard file you downloaded in step 1.
</li>
<li class="listitem">
Open the <span class="strong strong"><strong>[Metricbeat Enterprise Search] Overview</strong></span> object to view the dashboard.
</li>
</ol>
</div>
<h3><a id="apm-for-enterprise-search"></a>APM for Enterprise Search<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></h3>
<p>Use <a href="/apm/" class="ulink" target="_top">Elastic APM</a> to collect in-depth performance metrics and errors for Enterprise Search itself.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Using APM to monitor Enterprise Search is an advanced use case that you are unlikely to need unless you are diagnosing a specific issue in Enterprise Search.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Using APM to monitor Enterprise Search consumes additional resources.
Use APM with discretion on production systems.</p>
</div>
</div>
<p>To enable APM for Enterprise Search monitoring, follow these steps in your Enterprise Search deployment or in a separate deployment dedicated to collecting APM data.</p>
<p>Find the APM <code class="literal">secret_token</code> and <code class="literal">server_url</code> on the deployment you are using to collect APM data:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open Kibana.
</li>
<li class="listitem">
From the sidebar, under <span class="strong strong"><strong>Observability</strong></span>, open <span class="strong strong"><strong>APM</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Add Data</strong></span>.
</li>
<li class="listitem">
Scroll down to the <span class="strong strong"><strong>APM Agents</strong></span> section.
</li>
<li class="listitem">
Choose the <span class="strong strong"><strong>Ruby on Rails</strong></span> tab.
</li>
<li class="listitem">
Copy the <code class="literal">secret_token</code> and <code class="literal">server_url</code> values from the <span class="strong strong"><strong>Configure the agent</strong></span> section.
</li>
</ol>
</div>
<p><a class="xref" href="configuration.html" title="Configuration">Configure Enterprise Search settings</a> on your main deployment to add the APM <code class="literal">secret_token</code> and <code class="literal">server_url</code> settings:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">apm.enabled: true
apm.server_url: 'your-apm-server-url-here'
apm.secret_token: 'your-token-here'</pre>
</div>
<p>An example <code class="literal">apm.server_url</code> looks like this on Elastic Cloud: <code class="literal">https://your-apm-deployment-name.apm.europe-west1.gcp.cloud.es.io:443</code>.</p>
<p>An example <code class="literal">apm.secret_token</code> looks like this: <code class="literal">2FHHxzMDyU7G3t6pXb</code>.</p>
<p>After the changes are applied, view Enterprise Search metrics in APM:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open Kibana.
</li>
<li class="listitem">
From the sidebar, under <span class="strong strong"><strong>Observability</strong></span>, open <span class="strong strong"><strong>APM</strong></span>.
</li>
<li class="listitem">
Open Enterprise Search from the list of services.
</li>
</ol>
</div>
<h3><a id="self-monitoring"></a>Enterprise Search self-monitoring<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></h3>
<p>Enable Enterprise Search self-monitoring on self-managed deployments to capture
metrics including Enterprise Search network, JVM, product usage, and background worker metrics.</p>
<p>To enable self-monitoring, add the following setting to your Enterprise Search
<a class="xref" href="configuration.html" title="Configuration">configuration</a> and restart Enterprise Search:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">monitoring.reporting_enabled: true</pre>
</div>
<p>This feature is intended for self-managed deployments.
It is not necessary to enable self-monitoring on Elastic Cloud deployments.
See <a class="xref" href="monitoring.html#monitor-ent-search-on-cloud" title="Monitor Enterprise Search deployments on Elastic Cloud">Monitor Enterprise Search deployments on Elastic Cloud</a>.</p>
<p>The Enterprise Search self-monitoring feature only ships metrics to the
same Elasticsearch deployment that Enterprise Search uses.</p>
<p>After self-monitoring is enabled, Enterprise Search will automatically
provision a <a class="xref" href="monitoring.html#enterprise-search-metricbeat-module" title="Enterprise Search Metricbeat module">Metricbeat instance with the <code class="literal">enterprisesearch</code> module</a>.
The module will start reporting a detailed set of monitoring metrics to the underlying
Elasticsearch cluster every 10 seconds to be stored in a set of indexes
called <code class="literal">.monitoring-ent-search-*</code>.</p>
<p>Metricbeat indexes have <a href="/guide/en/kibana/8.15/index-lifecycle-policies.html" class="ulink" target="_blank" rel="noopener">ILM</a>
enabled on them.
By default, data will be stored in Elasticsearch for up to 30 days.
Indexes will be rotated every 100Mb.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot control the <code class="literal">ent-search-metricbeat</code> ILM policy.
Even if you use the Kibana UI or Elasticsearch API to directly update the policy,
Enterprise Search will overwrite it.</p>
<p>If you need full control of the metricbeat ILM policies for your
Enterprise Search monitoring data, please deploy a standalone
<a class="xref" href="monitoring.html#enterprise-search-metricbeat-module" title="Enterprise Search Metricbeat module">Enterprise Search Metricbeat module</a>.</p>
</div>
</div>
<p>See the <a class="xref" href="configuration.html#configuration-settings-monitoring" title="Monitoring">monitoring section of the configuration guide</a>
for <a class="xref" href="configuration.html" title="Configuration">deployment configuration</a> settings to control the frequency of
monitoring data reporting, index names used and other aspects of the
self-monitoring feature within Enterprise Search.</p>
<p>You can view self-monitoring metrics in Kibana.
Use the <a class="xref" href="monitoring.html#kibana-monitoring-dashboard" title="Kibana dashboards for Enterprise Search monitoring">Kibana dashboards for Enterprise Search monitoring</a> or choose <span class="strong strong"><strong>Stack Monitoring</strong></span>
from the sidebar menu under <span class="strong strong"><strong>Management</strong></span>.</p>
<h3><a id="enterprise-search-metricbeat-module"></a>Enterprise Search Metricbeat module<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/8.15/enterprise-search-docs/monitoring.asciidoc">edit</a></h3>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Unless you have unique Enterprise Search monitoring needs, you probably do not
need to run the Enterprise Search Metricbeat module directly.</p>
</div>
</div>
<p>Elastic Metricbeat contains an official Enterprise Search monitoring module
that can be used to ingest monitoring data from your Enterprise Search deployments
into any Elasticsearch cluster.
This module powers the <a class="xref" href="monitoring.html#self-monitoring" title="Enterprise Search self-monitoring">Enterprise Search self-monitoring</a> feature underneath.
When using Elastic Cloud,
<a href="/guide/en/cloud/current/ec-enable-logging-and-monitoring.html#ec-enable-logging-and-monitoring-steps" class="ulink" target="_top">enabling logging and monitoring</a>
for your deployment runs a built-in Enterprise Search Metricbeat module internally.</p>
<p>The data produced by the Metricbeat module can then be accessed in Kibana,
for example by using the <a class="xref" href="monitoring.html#kibana-monitoring-dashboard" title="Kibana dashboards for Enterprise Search monitoring">Kibana dashboards for Enterprise Search monitoring</a>.</p>
<p>See the
<a href="/guide/en/beats/metricbeat/8.15/metricbeat-module-enterprisesearch.html" class="ulink" target="_blank" rel="noopener">Enterprise Search Metricbeat module documentation</a>
for more details on how to use this module.</p>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="storage-api.html">« Storage API</a>
</span>
<span class="next">
<a href="read-only-mode.html">Read-only mode »</a>
</span>
</div>
</body>
</html>
