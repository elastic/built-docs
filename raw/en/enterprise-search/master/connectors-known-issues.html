<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Connector known issues | Enterprise Search documentation [master] | Elastic</title>
<meta class="elastic" name="content" content="Connector known issues | Enterprise Search documentation [master]">

<link rel="home" href="index.html" title="Enterprise Search documentation [master]"/>
<link rel="up" href="connectors.html" title="Elastic connectors"/>
<link rel="prev" href="dls-e2e-guide.html" title="Leverage document-level security from connectors in Search Applications"/>
<link rel="next" href="connectors-management.html" title="Management topics"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Enterprise Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Enterprise Search/Guide/master"/>
<meta name="DC.subject" content="Enterprise Search"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="dls-e2e-guide.html">« Leverage document-level security from connectors in Search Applications</a>
</span>
<span class="next">
<a href="connectors-management.html">Management topics »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Enterprise Search<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="connectors.html">Elastic connectors</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Connector known issues</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/enterprise-search-docs/connectors-known-issues.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="connectors-known-issues"></a>Connector known issues</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/enterprise-search-docs/connectors-known-issues.asciidoc">edit</a></div>
</div></div></div>

<div class="position-relative"><h3><a id="connectors-known-issues-enterprie-search-service"></a>Enterprise Search service: connector clients</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/enterprise-search-docs/connectors-known-issues.asciidoc">edit</a></div>
<p>As of <span class="strong strong"><strong>8.10.0</strong></span> self-managed connector clients no longer require the Enterprise Search service to be running on your Elastic deployment.
However, if you are upgrading connectors from versions <em>earlier than 8.9</em>, you&#8217;ll need to run Enterprise Search once to migrate your connectors to the new format.</p>
<p>Some points to note about this migration:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This involves updating system indices that store configuration and sync history for your connectors.
</li>
<li class="listitem">
This is an in-place operation, meaning no temporary or backup indices will be created.
</li>
<li class="listitem">
Therefore, it is important to take a snapshot of the Elasticsearch cluster before upgrading— in the unlikely event of an index migration failure.
</li>
</ul>
</div>
<p>If you have trouble with this migration, please contact support.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>To run connector clients your self-deployed connector service version must match your Elasticsearch version.
For example, if you&#8217;re running Elasticsearch 8.10.1, your connector service should be version 8.10.1.x.
Elastic does not support deployments running mismatched versions (except during upgrades).</p>
</div>
</div>
<div class="position-relative"><h3><a id="connectors-known-issues-connector-service"></a>Connector service</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/enterprise-search-docs/connectors-known-issues.asciidoc">edit</a></div>
<p>The connector service has the following known issues:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>OOM errors when syncing large database tables</strong></span></p>
<p>Syncs after the initial sync can cause out-of-memory (OOM) errors when syncing large database tables.
This occurs because database connectors load and store IDs in memory.
For tables with millions of records, this can lead to memory exhaustion if the connector service has insufficient RAM.</p>
<p>To mitigate this issue, you can:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Increase RAM allocation</strong></span>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Elastic Cloud</strong></span>: Upgrade the Enterprise Search instance to a larger size. Note that for native connectors running on Elastic Cloud, the connector service runs on the Enterprise Search node. It only has access to up to 40% of the node’s RAM allocation.
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Self-managed</strong></span>: Increase RAM allocation for the machine/container running the connector service.</p>
<details>
<summary class="title">RAM <span class="strong strong"><strong>sizing guidelines</strong></span></summary>
<div class="content">
<p>The following table shows the estimated RAM usage for loading IDs into memory.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Number of IDs</strong></span></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Memory Usage in MB (2X buffer)</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1,000,000</p></td>
<td align="left" valign="top"><p>≈ 45.78 MB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>10,000,000</p></td>
<td align="left" valign="top"><p>≈ 457.76 MB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>50,000,000</p></td>
<td align="left" valign="top"><p>≈ 2288.82 MB (≈ 2.29 GB)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>100,000,000</p></td>
<td align="left" valign="top"><p>≈ 4577.64 MB (≈ 4.58 GB)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Optimize</strong></span> <a class="xref" href="sync-rules.html" title="Connector sync rules"><span class="strong strong"><strong>sync rules</strong></span></a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Review and optimize sync rules to filter and reduce data retrieved from the source before syncing.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Use a self-managed connector client</strong></span> instead of a native connector:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Because connector clients run on your infrastructure, they are not subject to the same RAM limitations of the Enterprise Search node.
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Upgrades from deployments running on versions earlier than 8.9.0 can cause sync job failures</strong></span></p>
<p>Due to a bug, the <code class="literal">job_type</code> field mapping will be missing after upgrading from deployments running on versions earlier than 8.9.0.
Sync jobs won&#8217;t be displayed in the Kibana UI (job history) and the connector service won&#8217;t be able to start new sync jobs.
<span class="strong strong"><strong>This will only occur if you have previously scheduled sync jobs.</strong></span></p>
<p>To resolve this issue, you can manually add the missing field with the following command and trigger a sync job:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">PUT .elastic-connectors-sync-jobs-v1/_mapping
{
  "properties": {
    "job_type": {
      "type": "keyword"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/18.console"></div>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>The connector service will fail to sync when the connector tries to fetch more more than 2,147,483,647 (<em>2^31-1</em>) documents from a data source</strong></span></p>
<p>A workaround is to manually partition the data to be synced using multiple search indices.</p>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Custom scheduling might break when upgrading from version 8.6 or earlier.</strong></span></p>
<p>If you encounter the error <code class="literal">'custom_schedule_triggered': undefined method 'each' for nil:NilClass (NoMethodError)</code>, it means the custom scheduling feature migration failed.
You can use the following manual workaround:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /.elastic-connectors/_update/&lt;connector-id&gt;
{
  "doc": {
    "custom_scheduling": {}
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/19.console"></div>
<p>This error can appear on Connectors or Crawlers that aren&#8217;t the cause of the issue.
If the error continues, try running the above command for every document in the <code class="literal">.elastic-connectors</code> index.</p>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Connectors upgrading from 8.7 or earlier can be missing configuration fields</strong></span></p>
<p>A connector that was created prior to 8.8 can sometimes be missing configuration fields.
This is a known issue for the <a class="xref" href="connectors-mysql.html#connectors-mysql-known-issues" title="Known issues">MySQL connector</a> but could also affect other connectors.</p>
<p>If the connector client raises the error <code class="literal">Connector for &lt;connector_id&gt; has missing configuration fields: &lt;field_a&gt;, &lt;field_b&gt;...</code>, you can resolve the error by manually adding the missing configuration fields via the Dev Tools.
Only the following two field properties are required, as the rest will be autopopulated by the connector client:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">type</code>: one of <code class="literal">str</code>, <code class="literal">int</code>, <code class="literal">bool</code>, or <code class="literal">list</code>
</li>
<li class="listitem">
<p><code class="literal">value</code>: any value, as long as it is of the correct <code class="literal">type</code> (<code class="literal">list</code> type values should be saved as comma-separated strings)</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /.elastic-connectors/_update/&lt;connector_id&gt;
{
  "doc" : {
    "configuration": {
      &lt;field_a&gt;: {
        "type": "str",
        "value": ""
      },
      &lt;field_b&gt;: {
        "type": "bool",
        "value": false
      },
      &lt;field_c&gt;: {
        "type": "int",
        "value": 1
      },
      &lt;field_d&gt;: {
        "type": "list",
        "value": "a,b"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/20.console"></div>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Python connectors that upgraded from 8.7.1 will report document volumes in gigabytes (GB) instead of megabytes (MB)</strong></span></p>
<p>As a result, true document volume will be under-reported by a factor of 1024.</p>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>The following native connectors will not run correctly on Elastic Cloud in 8.9.0.</strong></span>
They are still available as self-managed connector clients.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="connectors-azure-blob.html" title="Elastic Azure Blob Storage connector reference">Azure Blob Storage</a>
</li>
<li class="listitem">
<a class="xref" href="connectors-confluence.html" title="Elastic Confluence connector reference">Confluence Cloud &amp; Server</a>
</li>
<li class="listitem">
<a class="xref" href="connectors-jira.html" title="Elastic Jira connector reference">Jira Cloud &amp; Server</a>
</li>
<li class="listitem">
<a class="xref" href="connectors-network-drive.html" title="Elastic network drive connector reference">Network drive</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Upgrading Enterprise Search from versions `&#8656;`8.5.x to versions `&gt;=`8.9.x will fail if Connectors or Elastic Crawler were used</strong></span></p>
<p>In 8.5, Connectors and Elastic Crawler created records in <code class="literal">.elastic-connectors-sync-jobs</code> with a pre-GA structure that is incompatible with the GA document schema.</p>
<p>As a result, a migration added in 8.9.0 will fail with the error:</p>
<pre class="screen">Status: [Failed] Applying Actastic Migration: &lt;ChangeSchedulingAndAddJobTypeAndSyncCursorToConnectors version=20230526133312&gt;: Error = NoMethodError: undefined method `[]=' for nil:NilClass</pre>
<p>Additionally, after this error appears 20 times, a second error will begin to appear:</p>
<pre class="screen">Status: [Failed] Applying Actastic Migration: &lt;ChangeSchedulingAndAddJobTypeAndSyncCursorToConnectors version=20230526133312&gt;: Error = Swiftype::ES::UnknownEsError: [1:2807] failed to parse: Limit of mapping depth [20] has been exceeded due to object field [scheduling.full.full.full.full.full.full.full.full.full.full.full.full.full.full.full.full.full.full.access_control]</pre>
<p>To work around these issues and move forward with upgrading, you should remove the <code class="literal">.elastic-connectors*</code> indices.</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">DELETE .elastic-connectors*</pre>
</div>
<div class="console_widget" data-snippet="snippets/21.console"></div>
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="connectors-known-issues-specific"></a>Individual connector known issues</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/main/enterprise-search-docs/connectors-known-issues.asciidoc">edit</a></div>
<p>Individual connectors may have additional known issues.
Refer to <a class="xref" href="connectors.html" title="Elastic connectors">each connector&#8217;s reference documentation</a> for connector-specific known issues.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="dls-e2e-guide.html">« Leverage document-level security from connectors in Search Applications</a>
</span>
<span class="next">
<a href="connectors-management.html">Management topics »</a>
</span>
</div>
</body>
</html>
