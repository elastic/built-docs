<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elastic Agent command reference | Fleet and Elastic Agent Guide [8.0] | Elastic</title>
<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.0]"/>
<link rel="up" href="index.html" title="Fleet and Elastic Agent Guide [8.0]"/>
<link rel="prev" href="elastic-agent-reference-yaml.html" title="Reference yaml"/>
<link rel="next" href="troubleshooting-intro.html" title="Troubleshoot"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.0"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.0"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.0]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="elastic-agent-reference-yaml.html">« Reference yaml</a>
</span>
<span class="next">
<a href="troubleshooting-intro.html">Troubleshoot »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="elastic-agent-cmd-options"></a>Elastic Agent command reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h1>
</div></div></div>
<p>Elastic Agent provides commands for running Elastic Agent, managing Fleet Server, and
doing common tasks.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You might need to log in as a root user (or Administrator on Windows) to
run these commands. After the Elastic Agent service is installed and running, make
sure you run these commands without prepending them with <code class="literal">./</code> to avoid
invoking the wrong binary.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-diagnostics-command" title="elastic-agent diagnostics">diagnostics</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-enroll-command" title="elastic-agent enroll">enroll</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-help-command" title="elastic-agent help">help</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-inspect-command" title="elastic-agent inspect">inspect</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-install-command" title="elastic-agent install">install</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-restart-command" title="elastic-agent restart">restart</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-run-command" title="elastic-agent run">run</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-status-command" title="elastic-agent status">status</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-uninstall-command" title="elastic-agent uninstall">uninstall</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-upgrade-command" title="elastic-agent upgrade">upgrade</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-version-command" title="elastic-agent version">version</a>
</li>
</ul>
</div>
<hr>
<h3><a id="elastic-agent-diagnostics-command"></a>elastic-agent diagnostics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Gather diagnostics information from the Elastic Agent and applications it&#8217;s running.</p>
<p>If no options are specified, this command displays version numbers and application metadata.</p>
<p>If <code class="literal">collect</code> is specified, it produces an archive containing application metadata, configuration information, the policy, and any local logs.</p>
<p>Note that <span class="strong strong"><strong>credentials are not redacted</strong></span> in the archive; they may appear in plain text in the configuration or policy files inside the archive.</p>
<p>This command is intended for debugging purposes only. The output format and structure of the archive produced by <code class="literal">collect</code> may change between releases.</p>
<p>If <code class="literal">pprof</code> is specified, it gathers specific <code class="literal">pprof</code> data from the Elastic Agent or one of the specified underlying Beats, and displays to <code class="literal">stdout</code>.
By default it gathers a 30s profile of the Elastic Agent.</p>
<h4><a id="_synopsis"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent diagnostics [--help] [--output &lt;string&gt;] [global-flags]
elastic-agent diagnostics collect [--output &lt;string&gt;]
                                  [--file &lt;string&gt;]
                                  [--pprof]
                                  [--pprof-duration &lt;string&gt;]
                                  [--timeout &lt;string&gt;]
                                  [--help]
                                  [global-flags]
elastic-agent diagnostics pprof [--file &lt;string&gt;]
                                [--pprof-type &lt;string]
                                [--pprof-duration &lt;string&gt;]
                                [--timeout &lt;string&gt;]
                                [--pprof-application &lt;string&gt;]
                                [--pprof-route-key &lt;string&gt;]
                                [--help]
                                [global-flags]</pre>
</div>
<h4><a id="_options"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--output &lt;string&gt;</code>
</span>
</dt>
<dd>
Output format. If using <code class="literal">collect</code>, specify <code class="literal">json</code> or <code class="literal">yaml</code> (the default).
Otherwise specify <code class="literal">json</code>, <code class="literal">yaml</code>, or <code class="literal">human</code> (the default).
</dd>
<dt>
<span class="term">
<code class="literal">--file</code>
</span>
</dt>
<dd>
<p>
When running <code class="literal">collect</code>, specifies the output archive name. Defaults to <code class="literal">elastic-agent-diagnostics-&lt;timestamp&gt;.zip</code>, where the timestamp is the current time in UTC.
</p>
<p>When running <code class="literal">pprof</code>, specifies the output file name. Defaults to <code class="literal">stdout</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--pprof</code>
</span>
</dt>
<dd>
Gather <code class="literal">pprof</code> data when running <code class="literal">collect</code> (default <code class="literal">false</code>).
</dd>
<dt>
<span class="term">
<code class="literal">--pprof-duration &lt;string&gt;</code>
</span>
</dt>
<dd>
The length for the <code class="literal">trace</code> and <code class="literal">profile</code> data that&#8217;s collected when gathering <code class="literal">pprof</code> data.
Must be a string that can be parsed as a <code class="literal">time.Duration</code> value (default: <code class="literal">30s</code>).
</dd>
<dt>
<span class="term">
<code class="literal">--timeout &lt;string&gt;</code>
</span>
</dt>
<dd>
The timeout value for the <code class="literal">diagnostics collect</code> or <code class="literal">diagnostics pprof</code> command.
Should be longer then <code class="literal">pprof-duration</code> as the command needs to gather and process the data.
Must be a string that can be parsed as a <code class="literal">time.Duration</code> value (default: <code class="literal">30s + pprof-duration</code>).
</dd>
<dt>
<span class="term">
<code class="literal">--pprof-type &lt;string&gt;</code>
</span>
</dt>
<dd>
The pprof data to gather, one of: <code class="literal">allocs</code>, <code class="literal">block</code>, <code class="literal">cmdline</code>, <code class="literal">goroutine</code>, <code class="literal">heap</code>, <code class="literal">mutex</code>, <code class="literal">profile</code>, <code class="literal">threadcreate</code>, or <code class="literal">trace</code> (default: <code class="literal">profile</code>).
</dd>
<dt>
<span class="term">
<code class="literal">--pprof-application &lt;string&gt;</code>
</span>
</dt>
<dd>
The application name to gather <code class="literal">pprof</code> data from (default <code class="literal">elastic-agent</code>).
</dd>
<dt>
<span class="term">
<code class="literal">--pprof-route-key &lt;string&gt;</code>
</span>
</dt>
<dd>
The route key (output destination) associated with the application to gather <code class="literal">pprof</code> data from (default <code class="literal">default</code>).
Note that this setting is ignored in the case where <code class="literal">pprof-application=elastic-agent</code>.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">diagnostics</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_example_2"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent diagnostics</pre>
</div>
<hr>
<h3><a id="elastic-agent-enroll-command"></a>elastic-agent enroll<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Enroll the Elastic Agent in Fleet.</p>
<p>Use this command to enroll the Elastic Agent in Fleet without installing the
agent as a service. You will need to do this if you installed
the Elastic Agent from a DEB or RPM package and plan to use systemd commands to
start and manage the service. This command is also useful for testing
Elastic Agent prior to installing it.</p>
<p>If you&#8217;ve already installed Elastic Agent, use this command to modify the settings that Elastic Agent runs with.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To enroll an Elastic Agent <em>and</em> install it as a service, use the
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-install-command" title="elastic-agent install"><code class="literal">install</code> command</a> instead. Installing as a service is the most common scenario.</p>
</div>
</div>
<p>We recommend that you run the <code class="literal">enroll</code> (or <code class="literal">install</code>) command as the root user because some
integrations require root privileges to collect sensitive data. This command
overwrites the <code class="literal">elastic-agent.yml</code> file in the agent directory.</p>
<p>This command includes optional flags to set up <a class="xref" href="fleet-server.html" title="Fleet Server">Fleet Server</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command enrolls the Elastic Agent in Fleet; it does not start the
agent. To start the agent, either <a class="xref" href="start-stop-elastic-agent.html#start-elastic-agent-service" title="Start Elastic Agent">start the
service</a>, if one exists, or use the <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-run-command" title="elastic-agent run"><code class="literal">run</code> command</a>
to start the agent from a terminal.</p>
</div>
</div>
<h4><a id="_synopsis_2"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>To enroll the Elastic Agent in Fleet:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll --url &lt;string&gt;
                     --enrollment-token &lt;string&gt;
                     [--ca-sha256 &lt;string&gt;]
                     [--certificate-authorities &lt;string&gt;]
                     [--delay-enroll]
                     [--force]
                     [--help]
                     [--insecure ]
                     [global-flags]</pre>
</div>
<p>To enroll the Elastic Agent in Fleet and set up Fleet Server:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll --fleet-server-es &lt;string&gt;
                     --fleet-server-service-token &lt;string&gt;
                     [--ca-sha256 &lt;string&gt;]
                     [--certificate-authorities &lt;string&gt;]
                     [--delay-enroll]
                     [--fleet-server-cert &lt;string&gt;] <a id="CO23-1"></a><i class="conum" data-value="1"></i>
                     [--fleet-server-cert-key &lt;string&gt;]
                     [--fleet-server-es-ca &lt;string&gt;]
                     [--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;] <a id="CO23-2"></a><i class="conum" data-value="2"></i>
                     [--fleet-server-host &lt;string&gt;]
                     [--fleet-server-insecure-http]
                     [--fleet-server-policy &lt;string&gt;]
                     [--fleet-server-port &lt;uint16&gt;]
                     [--force]
                     [--help]
                     [--url &lt;string&gt;] <a id="CO23-3"></a><i class="conum" data-value="3"></i>
                     [--fleet-server-es-insecure]
                     [global-flags]</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>If no <code class="literal">fleet-server-cert*</code> flags are specified, Elastic Agent auto-generates a
self-signed certificate with the hostname of the machine. Remote Elastic Agents
enrolling into a Fleet Server with self-signed certificates must specify
the <code class="literal">--insecure</code> flag.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when using self-signed certificates with Elasticsearch.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when enrolling in a Fleet Server with custom certificates. The
URL must match the DNS name used to generate the certificate specified by
<code class="literal">--fleet-server-cert</code>.</p>
</td>
</tr>
</table>
</div>
<p>For more information about custom certificates, refer to <a class="xref" href="secure-connections.html" title="Encrypt traffic in clusters with a self-managed Fleet Server">Encrypt traffic in clusters with a self-managed Fleet Server</a>.</p>
<h4><a id="_options_2"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--ca-sha256 &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of certificate authority hash pins used for certificate
verification.
</dd>
<dt>
<span class="term">
<code class="literal">--certificate-authorities &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of root certificates used for server verification.
</dd>
<dt>
<span class="term">
<code class="literal">--delay-enroll</code>
</span>
</dt>
<dd>
Delays enrollment to occur on first start of the Elastic Agent service. This setting
is useful when you don&#8217;t want the Elastic Agent to enroll until the next reboot or manual start of the service, for
example, when you&#8217;re preparing an image that includes Elastic Agent.
</dd>
<dt>
<span class="term">
<code class="literal">--enrollment-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Enrollment token to use to enroll Elastic Agent into Fleet. You can use
the same enrollment token for multiple agents.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert &lt;string&gt;</code>
</span>
</dt>
<dd>
Certificate to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert-key &lt;string&gt;</code>
</span>
</dt>
<dd>
Private key to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es &lt;string&gt;</code>
</span>
</dt>
<dd>
Start a Fleet Server process when Elastic Agent is started, and connect to the
specified Elasticsearch URL.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to certificate authority to use to communicate with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;</code>
</span>
</dt>
<dd>
The SHA2-56 fingerprint (hash) of the certificate authority used to self-sign Elasticsearch certificates.
This fingerprint will be used to verify self-signed certificates presented by Fleet Server and any inputs started by Elastic Agent for communication.
This flag is required when using self-signed certificates with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-insecure</code>
</span>
</dt>
<dd>
<p>
Allows fleet server to connect to Elasticsearch in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
</ul>
</div>
<p>When this flag is used the certificate verification is disabled.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-host &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding host (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-insecure-http</code>
</span>
</dt>
<dd>
Expose Fleet Server over HTTP. This option is not recommended because it&#8217;s
insecure. It&#8217;s useful during development and testing, but should not be used in
production. When using this option, you should bind Fleet Server to the
local host (this is the default).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-policy &lt;string&gt;</code>
</span>
</dt>
<dd>
Used when starting a self-managed Fleet Server to allow a specific policy to be used,
instead of the Default Fleet Server policy.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-port &lt;uint16&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding port (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-service-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Service token to use for communication with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--force</code>
</span>
</dt>
<dd>
Force overwrite of current configuration without prompting for confirmation.
This flag is helpful when using automation software or scripted deployments.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">enroll</code> command.
</dd>
<dt>
<span class="term">
<code class="literal">--insecure</code>
</span>
</dt>
<dd>
<p>
Allow the Elastic Agent to connect to Fleet Server over insecure connections. This
setting is required in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server. The API keys are sent in clear text.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
<li class="listitem">
When using self-signed certificates generated by Elastic Agent.
</li>
</ul>
</div>
<p>We strongly recommend that you use a secure connection.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--url &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server URL to use to enroll the Elastic Agent into Fleet.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>Enroll the Elastic Agent in Fleet:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll -f \
  --url=https://cedd4e0e21e240b4s2bbbebdf1d6d52f.fleet.eu-west-1.aws.cld.elstc.co:443 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ==</pre>
</div>
<p>Enroll the Elastic Agent in Fleet and set up Fleet Server:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll -f --fleet-server-es=http://elasticsearch:9200 \
  --fleet-server-service-token=AbEAAdesYXN1abMvZmxlZXQtc2VldmVyL3Rva2VuLTE2MTkxMzg3MzIzMTg7dzEta0JDTmZUcGlDTjlwRmNVTjNVQQ \
  --fleet-server-policy=a35fd520-26f5-11ec-8bd9-3374690g57b6</pre>
</div>
<p>Start Elastic Agent with Fleet Server (running on a custom CA). This example
assumes you&#8217;ve generated the certificates with the following names:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ca.crt</code>: Root CA certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.crt</code>: Fleet Server certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.key</code>: Fleet Server private key
</li>
<li class="listitem">
<code class="literal">elasticsearch-ca.crt</code>: CA certificate to use to connect to Elasticsearch
</li>
</ul>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll -f \
  --url=https://fleet-server:8220 \
  --fleet-server-es=https://elasticsearch:9200 \
  --fleet-server-service-token=AAEBAWVsYXm0aWMvZmxlZXQtc2XydmVyL3Rva2VuLTE2MjM4OTAztDU1OTQ6dllfVW1mYnFTVjJwTC2ZQ0EtVnVZQQ \
  --fleet-server-policy=a35fd520-26f5-11ec-8bd9-3374690g57b6 \
  --certificate-authorities=/path/to/ca.crt \
  --fleet-server-es-ca=/path/to/elasticsearch-ca.crt \
  --fleet-server-cert=/path/to/fleet-server.crt \
  --fleet-server-cert-key=/path/to/fleet-server.key</pre>
</div>
<p>Then enroll another Elastic Agent into the Fleet Server started in the previous
example:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll -f --url=https://fleet-server:8220 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ== \
  --certificate-authorities=/path/to/ca.crt</pre>
</div>
<hr>
<h3><a id="elastic-agent-help-command"></a>elastic-agent help<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Show help for a specific command.</p>
<h4><a id="_synopsis_3"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent help &lt;command&gt; [--help] [global-flags]</pre>
</div>
<h4><a id="_options_3"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">command</code>
</span>
</dt>
<dd>
The name of the command.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">help</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_example_3"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent help enroll</pre>
</div>
<hr>
<h3><a id="elastic-agent-inspect-command"></a>elastic-agent inspect<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Show the current Elastic Agent configuration.</p>
<p>If no parameters are specified, shows the full Elastic Agent configuration.</p>
<h4><a id="_synopsis_4"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent inspect [--help] [global-flags]
elastic-agent inspect output [--output &lt;string&gt;]
                             [--program &lt;string&gt;]
                             [--help]
                             [global-flags]</pre>
</div>
<h4><a id="_options_4"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">output</code>
</span>
</dt>
<dd>
<p>
Display the current configuration for the output. This command
accepts additional flags:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--output &lt;string&gt;</code>
</span>
</dt>
<dd>
The name of the output to inspect.
</dd>
<dt>
<span class="term">
<code class="literal">--program &lt;string&gt;</code>
</span>
</dt>
<dd>
The type of program to inspect. For example, <code class="literal">filebeat</code>. This option must be
combined with <code class="literal">--output</code>.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">inspect</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_2"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent inspect
elastic-agent inspect output --output default
elastic-agent inspect output --output default --program filebeat</pre>
</div>
<hr>
<h3><a id="elastic-agent-install-command"></a>elastic-agent install<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Install Elastic Agent permanently on the system and manage it by using the system&#8217;s
service manager. The agent will start automatically after installation is
complete. On Linux (tar package), this command requires a system and service
manager like systemd.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you installed Elastic Agent from a DEB or RPM package, use the
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-enroll-command" title="elastic-agent enroll"><code class="literal">enroll</code> command</a> instead of <code class="literal">install</code>. The DEB
and RPM packages include a service unit for Linux systems with systemd.</p>
</div>
</div>
<p>You must run this command as the root user (or Administrator on Windows)
to write files to the correct locations. This command overwrites the
<code class="literal">elastic-agent.yml</code> file in the agent directory.</p>
<p>The syntax for running this command varies by platform. For platform-specific
examples, refer to <a class="xref" href="elastic-agent-installation.html" title="Install Elastic Agents"><em>Install Elastic Agents</em></a>.</p>
<h4><a id="_synopsis_5"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>To install the Elastic Agent as a service, enroll it in Fleet, and start the
<code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent install --url &lt;string&gt;
                      --enrollment-token &lt;string&gt;
                      [--ca-sha256 &lt;string&gt;]
                      [--certificate-authorities &lt;string&gt;]
                      [--delay-enroll]
                      [--force]
                      [--help]
                      [--insecure ]
                      [global-flags]</pre>
</div>
<p>To install the Elastic Agent as a service, enroll it in Fleet, and start
a <code class="literal">fleet-server</code> process alongside the <code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent install --fleet-server-es &lt;string&gt;
                      --fleet-server-service-token &lt;string&gt;
                      [--ca-sha256 &lt;string&gt;]
                      [--certificate-authorities &lt;string&gt;]
                      [--delay-enroll]
                      [--fleet-server-cert &lt;string&gt;] <a id="CO24-1"></a><i class="conum" data-value="1"></i>
                      [--fleet-server-cert-key &lt;string&gt;]
                      [--fleet-server-es-ca &lt;string&gt;]
                      [--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;] <a id="CO24-2"></a><i class="conum" data-value="2"></i>
                      [--fleet-server-host &lt;string&gt;]
                      [--fleet-server-insecure-http]
                      [--fleet-server-policy &lt;string&gt;]
                      [--fleet-server-port &lt;uint16&gt;]
                      [--force]
                      [--help]
                      [--url &lt;string&gt;] <a id="CO24-3"></a><i class="conum" data-value="3"></i>
                      [--fleet-server-es-insecure]
                      [global-flags]</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>If no <code class="literal">fleet-server-cert*</code> flags are specified, Elastic Agent auto-generates a
self-signed certificate with the hostname of the machine. Remote Elastic Agents
enrolling into a Fleet Server with self-signed certificates must specify
the <code class="literal">--insecure</code> flag.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when using self-signed certificate on Elasticsearch side.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO24-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when enrolling in a Fleet Server with custom certificates. The
URL must match the DNS name used to generate the certificate specified by
<code class="literal">--fleet-server-cert</code>.</p>
</td>
</tr>
</table>
</div>
<p>For more information about custom certificates, refer to <a class="xref" href="secure-connections.html" title="Encrypt traffic in clusters with a self-managed Fleet Server">Encrypt traffic in clusters with a self-managed Fleet Server</a>.</p>
<h4><a id="_options_5"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--ca-sha256 &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of certificate authority hash pins used for certificate
verification.
</dd>
<dt>
<span class="term">
<code class="literal">--certificate-authorities &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of root certificates used for server verification.
</dd>
<dt>
<span class="term">
<code class="literal">--delay-enroll</code>
</span>
</dt>
<dd>
Delays enrollment to occur on first start of the Elastic Agent service. This setting
is useful when you don&#8217;t want the Elastic Agent to enroll until the next reboot or manual start of the service, for
example, when you&#8217;re preparing an image that includes Elastic Agent.
</dd>
<dt>
<span class="term">
<code class="literal">--enrollment-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Enrollment token to use to enroll Elastic Agent into Fleet. You can use
the same enrollment token for multiple agents.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert &lt;string&gt;</code>
</span>
</dt>
<dd>
Certificate to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert-key &lt;string&gt;</code>
</span>
</dt>
<dd>
Private key to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es &lt;string&gt;</code>
</span>
</dt>
<dd>
Start a Fleet Server process when Elastic Agent is started, and connect to the
specified Elasticsearch URL.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to certificate authority to use to communicate with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;</code>
</span>
</dt>
<dd>
The SHA2-56 fingerprint (hash) of the certificate authority used to self-sign Elasticsearch certificates.
This fingerprint will be used to verify self-signed certificates presented by Fleet Server and any inputs started by Elastic Agent for communication.
This flag is required when using self-signed certificates with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-insecure</code>
</span>
</dt>
<dd>
<p>
Allows fleet server to connect to Elasticsearch in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
</ul>
</div>
<p>When this flag is used the certificate verification is disabled.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-host &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding host (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-insecure-http</code>
</span>
</dt>
<dd>
Expose Fleet Server over HTTP. This option is not recommended because it&#8217;s
insecure. It&#8217;s useful during development and testing, but should not be used in
production. When using this option, you should bind Fleet Server to the
local host (this is the default).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-policy &lt;string&gt;</code>
</span>
</dt>
<dd>
Used when starting a self-managed Fleet Server to allow a specific policy to be used,
instead of the Default Fleet Server policy.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-port &lt;uint16&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding port (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-service-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Service token to use for communication with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--force</code>
</span>
</dt>
<dd>
Force overwrite of current configuration without prompting for confirmation.
This flag is helpful when using automation software or scripted deployments.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">enroll</code> command.
</dd>
<dt>
<span class="term">
<code class="literal">--insecure</code>
</span>
</dt>
<dd>
<p>
Allow the Elastic Agent to connect to Fleet Server over insecure connections. This
setting is required in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server. The API keys are sent in clear text.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
<li class="listitem">
When using self-signed certificates generated by Elastic Agent.
</li>
</ul>
</div>
<p>We strongly recommend that you use a secure connection.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--url &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server URL to use to enroll the Elastic Agent into Fleet.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_3"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>Install the Elastic Agent as a service, enroll it in Fleet, and start the
<code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent install -f \
  --url=https://cedd4e0e21e240b4s2bbbebdf1d6d52f.fleet.eu-west-1.aws.cld.elstc.co:443 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ==</pre>
</div>
<p>Install the Elastic Agent as a service, enroll it in Fleet, and start
a <code class="literal">fleet-server</code> process alongside the <code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent install -f --fleet-server-es=http://elasticsearch:9200 \
  --fleet-server-service-token=AbEAAdesYXN1abMvZmxlZXQtc2VldmVyL3Rva2VuLTE2MTkxMzg3MzIzMTg7dzEta0JDTmZUcGlDTjlwRmNVTjNVQQ \
  --fleet-server-policy=a35fd620-26f6-11ec-8bd9-3374690f57b6</pre>
</div>
<p>Start Elastic Agent with Fleet Server (running on a custom CA). This example
assumes you&#8217;ve generated the certificates with the following names:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ca.crt</code>: Root CA certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.crt</code>: Fleet Server certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.key</code>: Fleet Server private key
</li>
<li class="listitem">
<code class="literal">elasticsearch-ca.crt</code>: CA certificate to use to connect to Elasticsearch
</li>
</ul>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent install -f \
  --url=https://fleet-server:8220 \
  --fleet-server-es=https://elasticsearch:9200 \
  --fleet-server-service-token=AAEBAWVsYXm0aWMvZmxlZXQtc2XydmVyL3Rva2VuLTE2MjM4OTAztDU1OTQ6dllfVW1mYnFTVjJwTC2ZQ0EtVnVZQQ \
  --fleet-server-policy=a35fd520-26f5-11ec-8bd9-3374690g57b6 \
  --certificate-authorities=/path/to/ca.crt \
  --fleet-server-es-ca=/path/to/elasticsearch-ca.crt \
  --fleet-server-cert=/path/to/fleet-server.crt \
  --fleet-server-cert-key=/path/to/fleet-server.key</pre>
</div>
<p>Then install another Elastic Agent and enroll it into the Fleet Server started in
the previous example:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent install -f --url=https://fleet-server:8220 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ== \
  --certificate-authorities=/path/to/ca.crt</pre>
</div>
<hr>
<h3><a id="elastic-agent-restart-command"></a>elastic-agent restart<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Restart the currently running Elastic Agent daemon.</p>
<h4><a id="_synopsis_6"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent restart [--help] [global-flags]</pre>
</div>
<h4><a id="_options_6"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">restart</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_4"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent restart</pre>
</div>
<hr>
<h3><a id="elastic-agent-run-command"></a>elastic-agent run<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Start the <code class="literal">elastic-agent</code> process.</p>
<h4><a id="_synopsis_7"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent run [global-flags]</pre>
</div>
<h4><a id="elastic-agent-global-flags"></a>Global flags<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>These flags are valid whenever you run <code class="literal">elastic-agent</code> on the command line.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">-c &lt;string&gt;</code>
</span>
</dt>
<dd>
The configuration file to use. If not specified, Elastic Agent uses
<code class="literal">{path.config}/elastic-agent.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">--e</code>
</span>
</dt>
<dd>
Log to stderr and disable syslog/file output.
</dd>
<dt>
<span class="term">
<code class="literal">--environment &lt;environmentVar&gt;</code>
</span>
</dt>
<dd>
The environment in which the agent will run.
</dd>
<dt>
<span class="term">
<code class="literal">--path.config &lt;string&gt;</code>
</span>
</dt>
<dd>
The directory where Elastic Agent looks for its configuration file. The default
varies by platform.
</dd>
<dt>
<span class="term">
<code class="literal">--path.home &lt;string&gt;</code>
</span>
</dt>
<dd>
<p>
The root directory of Elastic Agent. <code class="literal">path.home</code> determines the location of the
configuration files and data directory.
</p>
<p>If not specified, Elastic Agent uses the current working directory.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--path.logs &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to the log output for Elastic Agent. The default varies by platform.
</dd>
<dt>
<span class="term">
<code class="literal">--v</code>
</span>
</dt>
<dd>
Set log level to INFO.
</dd>
</dl>
</div>
<h4><a id="_example_4"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent run -c myagentconfig.yml</pre>
</div>
<hr>
<h3><a id="elastic-agent-status-command"></a>elastic-agent status<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Returns the current status of the running Elastic Agent daemon and of each process
in the Elastic Agent.</p>
<h4><a id="_synopsis_8"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent status [--output &lt;string&gt;]
                     [--help]
                     [global-flags]</pre>
</div>
<h4><a id="_options_7"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--output &lt;string&gt;</code>
</span>
</dt>
<dd>
<p>
Output the status information in either <code class="literal">human</code> (the default), <code class="literal">json</code>, or
<code class="literal">yaml</code>. When the output is <code class="literal">json</code> or <code class="literal">yaml</code>, the command returns status codes:
</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Code</th>
<th align="left" valign="top">Status</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>0</p></td>
<td align="left" valign="top"><p><code class="literal">STARTING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p><code class="literal">CONFIGURING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p><code class="literal">HEALTHY</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>3</p></td>
<td align="left" valign="top"><p><code class="literal">DEGRADED</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p><code class="literal">FAILED</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p><code class="literal">STOPPING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>6</p></td>
<td align="left" valign="top"><p><code class="literal">UPGRADING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>7</p></td>
<td align="left" valign="top"><p><code class="literal">ROLLBACK</code></p></td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">status</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_5"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent status</pre>
</div>
<hr>
<h3><a id="elastic-agent-uninstall-command"></a>elastic-agent uninstall<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Permanently uninstall Elastic Agent from the system.</p>
<p>You must run this command as the root user (or Administrator on Windows)
to remove files.</p>
<h4><a id="_synopsis_9"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent uninstall [--force] [--help] [global-flags]</pre>
</div>
<h4><a id="_options_8"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--force</code>
</span>
</dt>
<dd>
Uninstall Elastic Agent and do not prompt for confirmation. This flag is helpful
when using automation software or scripted deployments.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">uninstall</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_6"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent uninstall</pre>
</div>
<hr>
<h3><a id="elastic-agent-upgrade-command"></a>elastic-agent upgrade<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Upgrade the currently running Elastic Agent to the specified version. This should only
be used with agents running in standalone mode. Agents enrolled in Fleet
should be upgraded through Fleet.</p>
<h4><a id="_synopsis_10"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent upgrade &lt;version&gt; [--source-uri &lt;string&gt;] [--help] [flags]</pre>
</div>
<h4><a id="_options_9"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
The version of Elastic Agent to upgrade to.
</dd>
<dt>
<span class="term">
<code class="literal">--source-uri &lt;string&gt;</code>
</span>
</dt>
<dd>
The source URI to download the new version from. By default, Elastic Agent uses the
Elastic Artifacts URL.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">upgrade</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_7"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent upgrade 7.10.1</pre>
</div>
<hr>
<h3><a id="elastic-agent-version-command"></a>elastic-agent version<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Show the version of Elastic Agent.</p>
<h4><a id="_synopsis_11"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent version [--help] [global-flags]</pre>
</div>
<h4><a id="_options_10"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">version</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_example_5"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent version</pre>
</div>
<hr>
</div>
<div class="navfooter">
<span class="prev">
<a href="elastic-agent-reference-yaml.html">« Reference yaml</a>
</span>
<span class="next">
<a href="troubleshooting-intro.html">Troubleshoot »</a>
</span>
</div>
</div>
</body>
</html>
