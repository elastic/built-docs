<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Logstash output | Fleet and Elastic Agent Guide [8.0] | Elastic</title>
<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.0]"/>
<link rel="up" href="elastic-agent-output-configuration.html" title="Configure outputs for standalone Elastic Agents"/>
<link rel="prev" href="elasticsearch-output.html" title="Configure the Elasticsearch output"/>
<link rel="next" href="elastic-agent-standalone-logging-config.html" title="Configure logging for standalone Elastic Agents"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.0"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.0"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.0]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elastic-agent-configuration.html">Elastic Agent standalone configuration</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elastic-agent-output-configuration.html">Configure outputs for standalone Elastic Agents</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-output.html">« Configure the Elasticsearch output</a>
</span>
<span class="next">
<a href="elastic-agent-standalone-logging-config.html">Configure logging for standalone Elastic Agents »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="logstash-output"></a>Logstash output<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/elastic-agent/configuration/outputs/output-logstash.asciidoc">edit</a></h3>
</div></div></div>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Running Elastic Agent in standalone mode is an advanced use case. The
documentation is incomplete and not yet mature. When possible, we recommend
using Fleet-managed agents instead of standalone mode.</p>
</div>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Logstash output is currently only supported for Elastic Agents in
standalone mode. Fleet-managed agents are not supported.</p>
</div>
</div>
<p>The Logstash output uses an internal protocol to send events directly to Logstash over
TCP. Logstash provides additional parsing, transformation, and routing of data
collected by Elastic Agent.</p>
<p><span class="strong strong"><strong>Compatibility:</strong></span> This output works with all compatible versions of Logstash. Refer
to the <a href="/support/matrix#matrix_compatibility" class="ulink" target="_top">Elastic
Support Matrix</a>.</p>
<p>This example configures a Logstash output called <code class="literal">default</code> in the
<code class="literal">elastic-agent.yml</code> file:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: logstash
    hosts: ["127.0.0.1:5044"] <a id="CO21-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO21-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The Logstash server and the port (<code class="literal">5044</code>) where Logstash is configured to listen for
incoming Elastic Agent connections.</p>
</td>
</tr>
</table>
</div>
<p>To receive the events in Logstash, you also need to create a Logstash configuration pipeline.
The Logstash configuration pipeline listens for incoming Elastic Agent connections,
processes received events, and then sends the events to Elasticsearch.</p>
<p>The following example configures a Logstash pipeline that listens on port <code class="literal">5044</code> for
incoming Elastic Agent connections and routes received events to Elasticsearch:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">input {
  elastic_agent {
    port =&gt; 5044
  }
}

output {
  elasticsearch {
    hosts =&gt; ["http://localhost:9200"] <a id="CO22-1"></a><i class="conum" data-value="1"></i>
    data_stream =&gt; "true"
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The Elasticsearch server and the port (<code class="literal">9200</code>) where Elasticsearch is running.</p>
</td>
</tr>
</table>
</div>
<p>For more information about configuring Logstash, refer to
<a href="/guide/en/logstash/8.0/configuration.html" class="ulink" target="_top">Configuring Logstash</a> and
<a href="/guide/en/logstash/8.0/plugins-inputs-elastic_agent.html" class="ulink" target="_top">Elastic Agent input plugin</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_logstash_output_configuration_settings"></a>Logstash output configuration settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/elastic-agent/configuration/outputs/output-logstash.asciidoc">edit</a></h4>
</div></div></div>
<p>The <code class="literal">logstash</code> output supports the following settings, grouped by category.
Many of these settings have sensible defaults that allow you to run Elastic Agent with
minimal configuration.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="logstash-output.html#output-logstash-commonly-used-settings" title="Commonly used settings">Commonly used settings</a>
</li>
<li class="listitem">
<a class="xref" href="logstash-output.html#output-logstash-authentication-settings" title="Authentication settings">Authentication settings</a>
</li>
<li class="listitem">
<a class="xref" href="logstash-output.html#output-logstash-performance-tuning-settings" title="Performance tuning settings">Performance tuning settings</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="output-logstash-commonly-used-settings"></a>Commonly used settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/elastic-agent/configuration/outputs/output-logstash.asciidoc">edit</a></h4>
</div></div></div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-enabled-setting"></a><code class="literal">enabled</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Enables or disables the output. If set to <code class="literal">false</code>, the output is
disabled.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-escape_html-setting"></a><code class="literal">escape_html</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Configures escaping of HTML in strings. Set to <code class="literal">true</code> to enable
escaping.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-hosts-setting"></a><code class="literal">hosts</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of known Logstash servers to connect to. If load balancing is
disabled, but multiple hosts are configured, one host is selected randomly
(there is no precedence). If one host becomes unreachable, another one is
selected randomly.</p>
<p>All entries in this list can contain a port number. If no port is specified,
<code class="literal">5044</code> is used.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-proxy_url-setting"></a><code class="literal">proxy_url</code></p>
</td>
<td align="left" valign="top">
<p>(string) The URL of the SOCKS5 proxy to use when connecting to the Logstash
servers. The value must be a URL with a scheme of <code class="literal">socks5://</code>. The protocol used
to communicate to Logstash is not based on HTTP, so you cannot use a web proxy.</p>
<p>If the SOCKS5 proxy server requires client authentication, embed a username and
password in the URL as shown in the example.</p>
<p>When using a proxy, hostnames are resolved on the proxy server instead of on the
client. To change this behavior, set <code class="literal">proxy_use_local_resolver</code>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: logstash
    hosts: ["remote-host:5044"]
    proxy_url: socks5://user:password@socks5-proxy:2233</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-proxy_use_local_resolver-setting"></a><code class="literal">proxy_use_</code>
<code class="literal">local_resolver</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Determines whether Logstash hostnames are resolved locally when using a
proxy. If <code class="literal">false</code> and a proxy is used, name resolution occurs on the proxy
server.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="output-logstash-authentication-settings"></a>Authentication settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/elastic-agent/configuration/outputs/output-logstash.asciidoc">edit</a></h4>
</div></div></div>
<p>Settings for authenticating with Logstash.</p>
<p>To use SSL, you must also configure the
<a href="/guide/en/logstash/8.0/plugins-inputs-beats.html" class="ulink" target="_top">Elastic Agent input plugin for Logstash</a> to
use SSL/TLS.</p>
<p>There are a number of SSL configuration settings available depending on whether
you are configuring the client, server, or both. See the following tables for
available settings:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="logstash-output.html#output-logstash-common-ssl-options" title="Common configuration options">Table 4, &#8220;Common configuration options&#8221;</a>. These settings are valid in both client and
server configurations.
</li>
<li class="listitem">
<a class="xref" href="logstash-output.html#output-logstash-client-ssl-options" title="Client configuration options">Table 5, &#8220;Client configuration options&#8221;</a>
</li>
<li class="listitem">
<a class="xref" href="logstash-output.html#output-logstash-server-ssl-options" title="Server configuration options">Table 6, &#8220;Server configuration options&#8221;</a>
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>For more information about using certificates, refer to
<a class="xref" href="secure-connections.html" title="Encrypt traffic in clusters with a self-managed Fleet Server">Encrypt traffic in clusters with a self-managed Fleet Server</a>.</p>
</div>
</div>
<div class="table">
<a id="output-logstash-common-ssl-options"></a>
<p class="title"><strong>Table 4. Common configuration options</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Common configuration options">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.ca_sha256-common-setting"></a><code class="literal">ssl.ca_sha256</code></p>
</td>
<td align="left" valign="top">
<p>(string) This configures a certificate pin that you can use to ensure that a
specific certificate is part of the verified chain.</p>
<p>The pin is a base64 encoded string of the SHA-256 of the certificate.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This check is not a replacement for the normal SSL validation, but it adds
additional validation. If this setting is used with  <code class="literal">verification_mode</code> set to
<code class="literal">none</code>, the check will always fail because it will not receive any verified
chains.</p>
</div>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.cipher_suites-common-setting"></a><code class="literal">ssl.cipher_suites</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of cipher suites to use. The first entry has the highest
priority. If this option is omitted, the Go crypto library&#8217;s
<a href="https://golang.org/pkg/crypto/tls/" class="ulink" target="_top">default suites</a> are used (recommended). Note
that TLS 1.3 cipher suites are not individually configurable in Go, so they are
not included in this list.</p>
<p>The following cipher suites are available:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
ECDHE-ECDSA-AES-128-CBC-SHA
</li>
<li class="listitem">
ECDHE-ECDSA-AES-128-CBC-SHA256: TLS 1.2 only. Disabled by default.
</li>
<li class="listitem">
ECDHE-ECDSA-AES-128-GCM-SHA256: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-ECDSA-AES-256-CBC-SHA
</li>
<li class="listitem">
ECDHE-ECDSA-AES-256-GCM-SHA384: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-ECDSA-CHACHA20-POLY1305: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-ECDSA-RC4-128-SHA: Disabled by default. RC4 not recommended.
</li>
<li class="listitem">
ECDHE-RSA-3DES-CBC3-SHA
</li>
<li class="listitem">
ECDHE-RSA-AES-128-CBC-SHA
</li>
<li class="listitem">
ECDHE-RSA-AES-128-CBC-SHA256: TLS 1.2 only. Disabled by default.
</li>
<li class="listitem">
ECDHE-RSA-AES-128-GCM-SHA256: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-RSA-AES-256-CBC-SHA
</li>
<li class="listitem">
ECDHE-RSA-AES-256-GCM-SHA384: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-RSA-CHACHA20-POLY1205: TLS 1.2 only.
</li>
<li class="listitem">
ECDHE-RSA-RC4-128-SHA: Disabled by default. RC4 not recommended.
</li>
<li class="listitem">
RSA-3DES-CBC3-SHA
</li>
<li class="listitem">
RSA-AES-128-CBC-SHA
</li>
<li class="listitem">
RSA-AES-128-CBC-SHA256: TLS 1.2 only. Disabled by default.
</li>
<li class="listitem">
RSA-AES-128-GCM-SHA256: TLS 1.2 only.
</li>
<li class="listitem">
RSA-AES-256-CBC-SHA
</li>
<li class="listitem">
RSA-AES-256-GCM-SHA384: TLS 1.2 only.
</li>
<li class="listitem">
RSA-RC4-128-SHA: Disabled by default. RC4 not recommended.
</li>
</ul>
</div>
<p>Here is a list of acronyms used in defining the cipher suites:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
3DES:
Cipher suites using triple DES
</li>
<li class="listitem">
AES-128/256:
Cipher suites using AES with 128/256-bit keys.
</li>
<li class="listitem">
CBC:
Cipher using Cipher Block Chaining as block cipher mode.
</li>
<li class="listitem">
ECDHE:
Cipher suites using Elliptic Curve Diffie-Hellman (DH) ephemeral key exchange.
</li>
<li class="listitem">
ECDSA:
Cipher suites using Elliptic Curve Digital Signature Algorithm for authentication.
</li>
<li class="listitem">
GCM:
Galois/Counter mode is used for symmetric key cryptography.
</li>
<li class="listitem">
RC4:
Cipher suites using RC4.
</li>
<li class="listitem">
RSA:
Cipher suites using RSA.
</li>
<li class="listitem">
SHA, SHA256, SHA384:
Cipher suites using SHA-1, SHA-256 or SHA-384.
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.curve_types-common-setting"></a><code class="literal">ssl.curve_types</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of curve types for ECDHE (Elliptic Curve Diffie-Hellman
ephemeral key exchange).</p>
<p>The following elliptic curve types are available:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
P-256
</li>
<li class="listitem">
P-384
</li>
<li class="listitem">
P-521
</li>
<li class="listitem">
X25519
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.enabled-common-setting"></a><code class="literal">ssl.enabled</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) Enables or disables the SSL configuration.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">true</code></p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>SSL settings are disabled if either <code class="literal">enabled</code> is set to <code class="literal">false</code> or the
<code class="literal">ssl</code> section is missing.</p>
</div>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.supported_protocols-common-setting"></a><code class="literal">ssl.supported_protocols</code></p>
</td>
<td align="left" valign="top">
<p>(list) List of allowed SSL/TLS versions. If the SSL/TLS server supports none
of the specified versions, the connection will be dropped during or after the
handshake. The list of allowed protocol versions include: <code class="literal">SSLv3</code>, <code class="literal">TLSv1</code>
for TLS version 1.0, <code class="literal">TLSv1.0</code>, <code class="literal">TLSv1.1</code>, <code class="literal">TLSv1.2</code>, and <code class="literal">TLSv1.3</code>.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">[TLSv1.1, TLSv1.2, TLSv1.3]</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="table">
<a id="output-logstash-client-ssl-options"></a>
<p class="title"><strong>Table 5. Client configuration options</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Client configuration options">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.certificate-client-setting"></a><code class="literal">ssl.certificate</code></p>
</td>
<td align="left" valign="top">
<p>(string) The path to the certificate for SSL client authentication. This
setting is only required if <code class="literal">client_authentication</code> is specified. If
<code class="literal">certificate</code> is not specified, client authentication is not available, and the
connection might fail if the server requests client authentication. If the SSL
server does not require client authentication, the certificate will be loaded,
but not requested or used by the server.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: "/path/to/cert.pem"</pre>
</div>
<p>When this setting is configured, the <code class="literal">ssl.key</code> setting is also required.</p>
<p>Specify a path, or embed a certificate directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.certificate_authorities-client-setting"></a><code class="literal">ssl.certificate</code>
<code class="literal">_authorities</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of root certificates for verifications (required). If
<code class="literal">certificate_authorities</code> is empty or not set, the system keystore is used. If
<code class="literal">certificate_authorities</code> is self-signed, the host system needs to trust that CA
cert as well.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities: ["/path/to/root/ca.pem"]</pre>
</div>
<p>Specify a list of files that Elastic Agent will read, or embed a certificate directly
in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities:
  - |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.key-client-setting"></a><code class="literal">ssl.key</code></p>
</td>
<td align="left" valign="top">
<p>(string) The client certificate key used for client authentication. Only
required if <code class="literal">client_authentication</code> is configured.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: "/path/to/cert.key"</pre>
</div>
<p>Specify a path, or embed the private key directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: |
    -----BEGIN PRIVATE KEY-----
    KEY CONTENT APPEARS HERE
    -----END PRIVATE KEY-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.key_passphrase-client-setting"></a><code class="literal">ssl.key_passphrase</code></p>
</td>
<td align="left" valign="top">
<p>(string) The passphrase used to decrypt an encrypted key stored in the
configured <code class="literal">key</code> file.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.verification_mode-client-setting"></a><code class="literal">ssl.verification</code>
<code class="literal">_mode</code></p>
</td>
<td align="left" valign="top">
<p>(string) Controls the verification of server certificates. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">strict</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate. If the Subject Alternative
Name is empty, it returns an error.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Performs <em>no verification</em> of the server&#8217;s certificate. This
mode disables many of the security benefits of SSL/TLS and should only be used
after cautious consideration. It is primarily intended as a temporary
diagnostic mechanism when attempting to resolve TLS errors; its use in
production environments is strongly discouraged.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">full</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.ca_trusted_fingerprint"></a><code class="literal">ssl.ca_trusted</code>
<code class="literal">_fingerprint</code></p>
</td>
<td align="left" valign="top">
<p>(string) A HEX encoded SHA-256 of a CA certificate. If this certificate is
present in the chain during the handshake, it will be added to the
<code class="literal">certificate_authorities</code> list and the handshake will continue
normally.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.ca_trusted_fingerprint: 3b24d33844d6553...826</pre>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="table">
<a id="output-logstash-server-ssl-options"></a>
<p class="title"><strong>Table 6. Server configuration options</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Server configuration options">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.certificate-server-setting"></a><code class="literal">ssl.certificate</code></p>
</td>
<td align="left" valign="top">
<p>(string) The path to the certificate for SSL server authentication. If the
certificate is not specified, startup will fail.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: "/path/to/server/cert.pem"</pre>
</div>
<p>When this setting is configured, the <code class="literal">key</code> setting is also required.</p>
<p>Specify a path, or embed a certificate directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate: |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.certificate_authorities-server-setting"></a><code class="literal">ssl.certificate</code>
<code class="literal">_authorities</code></p>
</td>
<td align="left" valign="top">
<p>(list) The list of root certificates for client verifications is only required
if  <code class="literal">client_authentication</code> is configured. If <code class="literal">certificate_authorities</code> is empty
or not set, and <code class="literal">client_authentication</code> is configured, the system keystore is
used. If <code class="literal">certificate_authorities</code> is self-signed, the host system needs to
trust that CA cert too.</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities: ["/path/to/root/ca.pem"]</pre>
</div>
<p>Specify a list of files that Elastic Agent will read, or embed a certificate directly
in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.certificate_authorities:
  - |
    -----BEGIN CERTIFICATE-----
    CERTIFICATE CONTENT APPEARS HERE
    -----END CERTIFICATE-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.client_authentication-server-setting"></a><code class="literal">ssl.client_</code>
<code class="literal">authentication</code></p>
</td>
<td align="left" valign="top">
<p>(string) Configures client authentication. The valid options are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Disables client authentication.
</dd>
<dt>
<span class="term">
<code class="literal">optional</code>
</span>
</dt>
<dd>
When a client certificate is supplied, the server will verify it.
</dd>
<dt>
<span class="term">
<code class="literal">required</code>
</span>
</dt>
<dd>
Requires clients to provide a valid certificate.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">required</code> (if <code class="literal">certificate_authorities</code> is set); otherwise, <code class="literal">none</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.key-server-setting"></a><code class="literal">ssl.key</code></p>
</td>
<td align="left" valign="top">
<p>(string) The server certificate key used for authentication (required).</p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: "/path/to/server/cert.key"</pre>
</div>
<p>Specify a path, or embed the private key directly in the <code class="literal">YAML</code> configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl.key: |
    -----BEGIN PRIVATE KEY-----
    KEY CONTENT APPEARS HERE
    -----END PRIVATE KEY-----</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.key_passphrase-server-setting"></a><code class="literal">ssl.key_passphrase</code></p>
</td>
<td align="left" valign="top">
<p>(string) The passphrase used to decrypt an encrypted key stored in the
configured <code class="literal">key</code> file.</p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.renegotiation-server-setting"></a><code class="literal">ssl.renegotiation</code></p>
</td>
<td align="left" valign="top">
<p>(string) Configures the type of TLS renegotiation to support. The valid options
are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">never</code>
</span>
</dt>
<dd>
Disables renegotiation.
</dd>
<dt>
<span class="term">
<code class="literal">once</code>
</span>
</dt>
<dd>
Allows a remote server to request renegotiation once per connection.
</dd>
<dt>
<span class="term">
<code class="literal">freely</code>
</span>
</dt>
<dd>
Allows a remote server to request renegotiation repeatedly.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">never</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ssl.verification_mode-server-setting"></a><code class="literal">ssl.verification</code>
<code class="literal">_mode</code></p>
</td>
<td align="left" valign="top">
<p>(string) Controls the verification of client certificates. Valid values are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">full</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate.
</dd>
<dt>
<span class="term">
<code class="literal">strict</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a trusted
authority (CA) and also verifies that the server&#8217;s hostname (or IP address)
matches the names identified within the certificate. If the Subject Alternative
Name is empty, it returns an error.
</dd>
<dt>
<span class="term">
<code class="literal">certificate</code>
</span>
</dt>
<dd>
Verifies that the provided certificate is signed by a
trusted authority (CA), but does not perform any hostname verification.
</dd>
<dt>
<span class="term">
<code class="literal">none</code>
</span>
</dt>
<dd>
Performs <em>no verification</em> of the server&#8217;s certificate. This mode disables many
of the security benefits of SSL/TLS and should only be used after cautious
consideration. It is primarily intended as a temporary diagnostic mechanism when
attempting to resolve TLS errors; its use in production environments is strongly
discouraged.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">full</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="output-logstash-performance-tuning-settings"></a>Performance tuning settings<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.0/docs/en/ingest-management/elastic-agent/configuration/outputs/output-logstash.asciidoc">edit</a></h4>
</div></div></div>
<p>Settings that may affect performance.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">
Setting
</th>
<th align="left" valign="top">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-backoff.init-setting"></a><code class="literal">backoff.init</code></p>
</td>
<td align="left" valign="top">
<p>(string) The number of seconds to wait before trying to reconnect to Logstash
after a network error. After waiting <code class="literal">backoff.init</code> seconds, Elastic Agent tries to
reconnect. If the attempt fails, the backoff timer is increased exponentially up
to <code class="literal">backoff.max</code>. After a successful connection, the backoff timer is reset.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-backoff.max-setting"></a><code class="literal">backoff.max</code></p>
</td>
<td align="left" valign="top">
<p>(string) The maximum number of seconds to wait before attempting to connect to
Elasticsearch after a network error.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">60s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-bulk_max_size-setting"></a><code class="literal">bulk_max_size</code></p>
</td>
<td align="left" valign="top">
<p>(int) The maximum number of events to bulk in a single Logstash request.</p>
<p>Events can be collected into batches. Elastic Agent will split batches larger than
<code class="literal">bulk_max_size</code> into multiple batches.</p>
<p>Specifying a larger batch size can improve performance by lowering the overhead
of sending events. However big batch sizes can also increase processing times,
which might result in API errors, killed connections, timed-out publishing
requests, and, ultimately, lower throughput.</p>
<p>Set this value to <code class="literal">0</code> to turn off the splitting of batches. When splitting is
turned off, the queue determines the number of events to be contained in a
batch.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">2048</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-compression_level-setting"></a><code class="literal">compression_level</code></p>
</td>
<td align="left" valign="top">
<p>(int) The gzip compression level. Set this value to <code class="literal">0</code> to disable compression.
The compression level must be in the range of <code class="literal">1</code> (best speed) to <code class="literal">9</code> (best
compression).</p>
<p>Increasing the compression level reduces network usage but increases CPU usage.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">3</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-loadbalance-setting"></a><code class="literal">loadbalance</code></p>
</td>
<td align="left" valign="top">
<p>If <code class="literal">true</code> and multiple Logstash hosts are configured, the output plugin
load balances published events onto all Logstash hosts. If <code class="literal">false</code>,
the output plugin sends all events to one host (determined at random) and
switches to another host if the selected one becomes unresponsive.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code></p>
<p>Example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">outputs:
  default:
    type: logstash
    hosts: ["localhost:5044", "localhost:5045"]
    loadbalance: true</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-max_retries-setting"></a><code class="literal">max_retries</code></p>
</td>
<td align="left" valign="top">
<p>(int) The number of times to retry publishing an event after a publishing
failure. After the specified number of retries, the events are typically
dropped.</p>
<p>Set <code class="literal">max_retries</code> to a value less than 0 to retry until all events are published.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">3</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-pipelining-setting"></a><code class="literal">pipelining</code></p>
</td>
<td align="left" valign="top">
<p>(int) The number of batches to send asynchronously to Logstash while waiting
for an ACK from Logstash. The output becomes blocking after the specified number of
batches are written. Specify <code class="literal">0</code> to turn off pipelining.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">2</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-slow_start-setting"></a><code class="literal">slow_start</code></p>
</td>
<td align="left" valign="top">
<p>(boolean) If <code class="literal">true</code>, only a subset of events in a batch of events is transferred
per transaction. The number of events to be sent increases up to
<code class="literal">bulk_max_size</code> if no error is encountered. On error, the number of events per
transaction is reduced again.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">false</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-timeout-setting"></a><code class="literal">timeout</code></p>
</td>
<td align="left" valign="top">
<p>(string) The number of seconds to wait for responses from the Logstash server
before timing out.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">30s</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-ttl-setting"></a><code class="literal">ttl</code></p>
</td>
<td align="left" valign="top">
<p>(string) Time to live for a connection to Logstash after which the connection will be
reestablished. This setting is useful when Logstash hosts represent load balancers.
Because connections to Logstash hosts are sticky, operating behind load balancers
can lead to uneven load distribution across instances. Specify a TTL on the
connection to achieve equal connection distribution across instances.</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">0</code> (turns off the feature)</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">ttl</code> option is not yet supported on an async Logstash client (one with
the <code class="literal">pipelining</code> option set).</p>
</div>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top">
<p><a id="output-logstash-worker-setting"></a><code class="literal">worker</code></p>
</td>
<td align="left" valign="top">
<p>(int) The number of workers per configured host publishing events to
{output-type}. This is best used with load balancing mode enabled. Example: If
you have two hosts and three workers, in total six workers are started (three
for each host).</p>
<p><span class="strong strong"><strong>Default:</strong></span> <code class="literal">1</code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="elasticsearch-output.html">« Configure the Elasticsearch output</a>
</span>
<span class="next">
<a href="elastic-agent-standalone-logging-config.html">Configure logging for standalone Elastic Agents »</a>
</span>
</div>
</div>
</body>
</html>
