<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fleet and Elastic Agent 8.11.0 | Fleet and Elastic Agent Guide [8.11] | Elastic</title>
<meta class="elastic" name="content" content="Fleet and Elastic Agent 8.11.0 | Fleet and Elastic Agent Guide [8.11]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.11]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes-8.11.1.html" title="Fleet and Elastic Agent 8.11.1"/>
<link rel="next" href="install-fleet-managed-agent.html" title="Appendix A: Install a Fleet-managed Elastic Agent"/>
<meta class="elastic" name="product_version" content="8.11"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.11"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.11"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.11]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-8.11.1.html">« Fleet and Elastic Agent 8.11.1</a>
</span>
<span class="next">
<a href="install-fleet-managed-agent.html">Appendix A: Install a Fleet-managed Elastic Agent »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-8.11.0"></a>Fleet and Elastic Agent 8.11.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.11/docs/en/ingest-management/release-notes/release-notes-8.11.asciidoc">edit</a></h2>
</div></div></div>
<p>Review important information about Fleet Server and Elastic Agent for the 8.11.0 release.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Due to a memory leak issue, Windows users running Elastic Agent are recommended to avoid upgrading to this release and waiting for the upcoming 8.11.2 release in which the issue is resolved. If you&#8217;ve already upgraded to 8.11.0 or 8.11.1, we recommend upgrading to 8.11.2 as soon as it becomes available. See the <a class="xref" href="release-notes-8.11.0.html#known-issue-115-8.11.0" title="Memory leak running Elastic Agent in Windows environments with the System Integration">known issue</a> for more detail.</p>
</div>
</div>
<h4><a id="security-updates-8.7.x"></a>Security updates<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.11/docs/en/ingest-management/release-notes/release-notes-8.11.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Updated Go version to 1.20.10. <a href="https://github.com/elastic/elastic-agent/pull/3" class="ulink" target="_top">#3601</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h4><a id="breaking-changes-8.11.0"></a>Breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.11/docs/en/ingest-management/release-notes/release-notes-8.11.asciidoc">edit</a></h4>
<p>Breaking changes can prevent your application from optimal operation and
performance. Before you upgrade, review the breaking changes, then mitigate the
impact to your application.</p>
<details id="breaking-3505">
<summary class="title">Compression is enabled by default for Elastic Agent Elasticsearch outputs</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The default compression level for Elasticsearch outputs is changing from <code class="literal">0</code> to <code class="literal">1</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
On typical workloads this is expected to decrease network data volume by 70-80%, while increasing CPU use by 20-25% and ingestion time by 10%. The previous behavior can be restored by adding the setting <code class="literal">compression_level: 0</code> to the agent output configuration.</p>
</div>
</details>
<details id="breaking-3593">
<summary class="title"><code class="literal">elastic-agent-autodiscover</code> library has been updated to version 0.6.4, disabling metadata For <code class="literal">kubernetes.deployment</code> and <code class="literal">kubernetes.cronjob</code> fields.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
The <code class="literal">elastic-agent-autodiscover</code> Kubernetes library by default comes with <code class="literal">add_resource_metadata.deployment=false</code> and <code class="literal">add_resource_metadata.cronjob=false</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
Pods that will be created from deployments or cronjobs will not have the extra metadata field for <code class="literal">kubernetes.deployment</code> or <code class="literal">kubernetes.cronjob</code>, respectively. This change was made to avoid the memory impact of keeping the feature enabled in big Kubernetes clusters.
For more information, refer to <a href="https://github.com/elastic/elastic-agent/pull/3593" class="ulink" target="_top">#3593</a>.</p>
</div>
</details>
<h4><a id="known-issues-8.11.0"></a>Known issues<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.11/docs/en/ingest-management/release-notes/release-notes-8.11.asciidoc">edit</a></h4>
<details id="known-issue-115-8.11.0">
<summary class="title">Memory leak running Elastic Agent in Windows environments with the System Integration</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>A memory leak has been identified in Beats on Windows. All Beats running Elastic Stack version 8.11.0 or 8.11.1 are affected. The leak also affects the Elastic Agent System integration which is implemented with Beats. The leak will eventually exhaust all memory on the host system, typically after several days.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>This issue has been fixed in version 8.11.2. For a Windows environment, we strongly recommend upgrading directly to 8.11.2 or any higher release.</p>
<p>If you&#8217;re already running Elastic Agent version 8.11.0 or 8.11.1 on Windows and do not want to upgrade, we recommend that you:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Disable the <code class="literal">process</code> and <code class="literal">process_summary</code> metrics in your System integration.
</li>
<li class="listitem">
Disable logs and metrics collection.
</li>
<li class="listitem">
Restart Elastic Agent.
</li>
</ol>
</div>
<p>Note that disabling these datasets will prevent the collection of process-related metrics.</p>
<p>Another workaround is to downgrade Elastic Agent to a version below 8.11.0. Note that this could result in missing or reindexed logs or metrics as the "state" will not be persisted after Elastic Agent is uninstalled and reinstalled.</p>
<p>For Beats we currently do not have a workaround apart from upgrading to 8.12.2 or a later release.</p>
</div>
</details>
<details id="known-issue-169825-8.11.0">
<summary class="title">Current stack version is not in the list of Elastic Agent versions in Kibana Fleet UI</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>On the Fleet UI in Kibana:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When adding a new Elastic Agent, the user interface shows a previous version instead of the current version.
</li>
<li class="listitem">
When attempting to upgrade, the modal window to pick the version shows an earlier version as the latest version.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>You can use the following steps as a workaround:</p>
<p><span class="strong strong"><strong>When upgrading Elastic Agent currently on versions 8.10.4 or lower (simpler)</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open the Fleet UI. Under the <span class="strong strong"><strong>Agents</strong></span> tab select <span class="strong strong"><strong>Upgrade agent</strong></span> from the actions menu. The version field in the <span class="strong strong"><strong>Upgrade agent</strong></span> UI allows you to enter any version.
</li>
<li class="listitem">
Enter <code class="literal">8.11.0</code> or whichever version you want to upgrade the [agents] to. Do not choose a version above the version of Kibana or Fleet Server that you&#8217;re running.
</li>
</ol>
</div>
<p><span class="strong strong"><strong>When upgrading Elastic Agent currently on any version (more complex, requires API)</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open Kibana and navigate to <span class="strong strong"><strong>Management &#8594; Dev Tools</strong></span>.
</li>
<li class="listitem">
<p>Choose one of the API requests below and submit it through the console. Each of the requests uses version <code class="literal">8.11.0</code> as an example, but this can be changed to any available version.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>To upgrade a single Elastic Agent to any version, run:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST kbn:/api/fleet/agents/&lt;Elastic Agent ID&gt;/upgrade
{"version":"8.11.0"}</pre>
</div>
<div class="console_widget" data-snippet="snippets/22.console"></div>
</li>
<li class="listitem">
<p>To upgrade a set of Elastic Agents based on a known set of agent IDs, run:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST kbn:/api/fleet/agents/bulk_upgrade
{
  "version":"8.11.0",
  "agents":["&lt;Elastic Agent ID&gt;","&lt;Another Elastic Agent ID&gt;"],
  "start_time":"2023-11-10T09:41:39.850Z"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/23.console"></div>
</li>
<li class="listitem">
<p>To upgrade a set of Elastic Agents running a specific policy, and below a specific version (for example, <code class="literal">8.11.0</code>), run:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST kbn:/api/fleet/agents/bulk_upgrade
{
  "agents": "fleet-agents.policy_id:&lt;Elastic Fleet Policy ID&gt; and fleet-agents.agent.version&lt;&lt;VERSION&gt;",
  "version": "8.11.0"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/24.console"></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST kbn:/api/fleet/agents/bulk_upgrade
{
  "agents": "fleet-agents.policy_id:uuid1-uuid2-uuid3-uuid4 and fleet-agents.agent.version&lt;8.11.0",
  "version": "8.11.0"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/25.console"></div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To find the ID for any Elastic Agent, open the <span class="strong strong"><strong>Agents</strong></span> tab in Fleet and select <span class="strong strong"><strong>View agent</strong></span> from the <span class="strong strong"><strong>Actions</strong></span> menu. The agent ID and other details are shown.</p>
</div>
</div>
<p>To learn more about these requests, refer to the <a class="xref" href="fleet-api-docs.html" title="Kibana Fleet APIs">Fleet API documentation</a>.</p>
</div>
</details>
<details id="known-issue-3712">
<summary class="title">Integrations Server / APM unable to boot in specific ECE environments</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
A permissions change in the Elastic Agent Docker container can prevent the Elastic Agent or Integrations Server component from booting up within an ECE deployment. The change affects ECE installations that are deployed with a Linux UID other than <code class="literal">1000</code>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br>
ECE users with deployments that include APM or Integrations Server are recommended to wait for the next patch release, which is planned to include a fix for this problem.</p>
</div>
</details>
<h4><a id="new-features-8.11.0"></a>New features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.11/docs/en/ingest-management/release-notes/release-notes-8.11.asciidoc">edit</a></h4>
<p>The 8.11.0 release Added the following new and notable features.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set env variable <code class="literal">ELASTIC_NETINFO:false</code> in Kibana (<a href="https://github.com/elastic/kibana/pull/166156" class="ulink" target="_top">#166156</a>).
</li>
<li class="listitem">
Added restart upgrade action (<a href="https://github.com/elastic/kibana/pull/166154" class="ulink" target="_top">#166154</a>).
</li>
<li class="listitem">
Adds ability to set a proxy for agent binary source (<a href="https://github.com/elastic/kibana/pull/164168" class="ulink" target="_top">#164168</a>).
</li>
<li class="listitem">
Adds ability to set a proxy for agent download source (<a href="https://github.com/elastic/kibana/pull/164078" class="ulink" target="_top">#164078</a>).
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add support for processors in hints-based Kubernetes autodiscover. <a href="https://github.com/elastic/elastic-agent/pull/3107" class="ulink" target="_top">#3107</a> <a href="https://github.com/elastic/elastic-agent/issues/2959" class="ulink" target="_top">#2959</a>
</li>
<li class="listitem">
Print out Elastic Agent installation steps to show progress. <a href="https://github.com/elastic/elastic-agent/pull/3338" class="ulink" target="_top">#3338</a>
</li>
<li class="listitem">
Add colors to Elastic Agent messages printed by the elastic-agent logs command based on their level. <a href="https://github.com/elastic/elastic-agent/pull/3345" class="ulink" target="_top">#3345</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h4><a id="enhancements-8.11.0"></a>Enhancements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.11/docs/en/ingest-management/release-notes/release-notes-8.11.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Adds sidebar navigation showing headings extracted from the readme (<a href="https://github.com/elastic/kibana/pull/167216" class="ulink" target="_top">#167216</a>).
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Fleet Server
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Expand APM traces to track coordinator and monitor transactions. Add additonal spans across all API endpoints to better track what the server does. Add spans to bulker interactions that link with the queue flush transaction that the bulk action is executed through. <a href="https://github.com/elastic/fleet-server/pull/2929" class="ulink" target="_top">#2929</a>
</li>
<li class="listitem">
Add endpoint to serve PGP keys that clients can use when validating upgrades in cases where the embedded PGP key in a client is compromised and the client can&#8217;t reach the internet. <a href="https://github.com/elastic/fleet-server/pull/2977" class="ulink" target="_top">#2977</a> <a href="https://github.com/elastic/fleet-server/issues/2887" class="ulink" target="_top">#2887</a>
</li>
<li class="listitem">
Add ActionLimit and a Gzip writer pool to handle checkin responses, to help prevent OOM errors when updates are issued to many clients. <a href="https://github.com/elastic/fleet-server/pull/2929" class="ulink" target="_top">#2994</a>
</li>
<li class="listitem">
Send errors in API calls and bulker flushes to APM. fleet-server-pull}3053[#3053]
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Improve Elastic Agent uninstall on Windows by adding delay between retries when file removal is blocked by busy files. <a href="https://github.com/elastic/elastic-agent/pull/3431" class="ulink" target="_top">#3431</a> <a href="https://github.com/elastic/elastic-agent/issues/3221" class="ulink" target="_top">#3221</a>
</li>
<li class="listitem">
Support the NETINFO variable in Elastic Kubernetes manifests. Setting a new environmental variable <code class="literal">ELASTIC_NETINFO=false</code> globally disables the <code class="literal">netinfo.enabled</code> parameter of the <code class="literal">add_host_metadata</code> processor. This disables the indexing of <code class="literal">host.ip</code> and <code class="literal">host.mac</code> fields. <a href="https://github.com/elastic/elastic-agent/pull/3354" class="ulink" target="_top">#3354</a>
</li>
<li class="listitem">
The Elastic Agent uninstall process now finds and kills any running upgrade Watcher process. Uninstalls initiated within 10 minutes of a previous upgrade now work as expected. <a href="https://github.com/elastic/elastic-agent/pull/3384" class="ulink" target="_top">#3384</a> <a href="https://github.com/elastic/elastic-agent/issues/3371" class="ulink" target="_top">#3371</a>
</li>
<li class="listitem">
Fix the Kubernetes <code class="literal">deploy/kubernetes/creator_k8.sh</code> script to correcly exclude configmaps. <a href="https://github.com/elastic/elastic-agent/pull/3396" class="ulink" target="_top">#3396</a>
</li>
<li class="listitem">
Allow fetching the GPG key used for upgrade package signature verification from Fleet Server. This enables upgrades using rotated GPG keys in air gapped environments where Fleet Server is the only reachable URI. <a href="https://github.com/elastic/elastic-agent/pull/3543" class="ulink" target="_top">#3543</a> <a href="https://github.com/elastic/elastic-agent/issues/3264" class="ulink" target="_top">#3264</a>
</li>
<li class="listitem">
Enable tamper protection feature flag by default for Elastic Agent version 8.11.0. <a href="https://github.com/elastic/elastic-agent/pull/3478" class="ulink" target="_top">#3478</a>
</li>
<li class="listitem">
Increase Elastic Agent monitoring metrics interval from 10s to 60s to reduce the default ingestion load and long term storage requirements. <a href="https://github.com/elastic/elastic-agent/pull/3578" class="ulink" target="_top">#3578</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h4><a id="bug-fixes-8.11.0"></a>Bug fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.11/docs/en/ingest-management/release-notes/release-notes-8.11.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Vastly improve performance of Fleet final pipeline&#8217;s date formatting logic for <code class="literal">event.ingested</code> (<a href="https://github.com/elastic/kibana/pull/167318" class="ulink" target="_top">#167318</a>).
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Fleet Server
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix errors produced by the Fleet Server bulker to be ECS compliant. <a href="https://github.com/elastic/fleet-server/pull/3034" class="ulink" target="_top">#3034</a> <a href="https://github.com/elastic/fleet-server/issues/3033" class="ulink" target="_top">#3033</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Enable resilient handling of air gapped PGP checks. Elastic Agent should not fail when remote PGP is specified (or official Elastic fallback PGP is used) and remote is not available. <a href="https://github.com/elastic/elastic-agent/pull/3427" class="ulink" target="_top">#3427</a> <a href="https://github.com/elastic/elastic-agent/pull/3426" class="ulink" target="_top">#3426</a> <a href="https://github.com/elastic/elastic-agent/issues/3368" class="ulink" target="_top">#3368</a>
</li>
<li class="listitem">
Prevent a standalone Elastic Agent from being upgraded if an upgrade is already in progress. <a href="https://github.com/elastic/elastic-agent/pull/3473" class="ulink" target="_top">#3473</a> <a href="https://github.com/elastic/elastic-agent/issues/2706" class="ulink" target="_top">#2706</a>
</li>
<li class="listitem">
Fix a bug that affected reporting progress of the Elastic Agent artifact download during an upgrade. <a href="https://github.com/elastic/elastic-agent/pull/3548" class="ulink" target="_top">#3548</a>
</li>
<li class="listitem">
Upgrade <code class="literal">elastic-agent-libs</code> to v0.6.0 to fix the Elastic Agent Windows service becoming unresponsive. Fixes Windows service timeouts during WMI queries and during service shutdown. <a href="https://github.com/elastic/elastic-agent/pull/3632" class="ulink" target="_top">#3632</a> <a href="https://github.com/elastic/elastic-agent/issues/3061" class="ulink" target="_top">#3061</a>
</li>
<li class="listitem">
Increase wait period between service restarts on failure to 15s on Windows. <a href="https://github.com/elastic/elastic-agent/pull/3657" class="ulink" target="_top">#3657</a>
</li>
<li class="listitem">
Prevent multiple attempts by Elastic Agent to stop an already stopped service. <a href="https://github.com/elastic/elastic-agent/pull/3482" class="ulink" target="_top">#3482</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes-8.11.1.html">« Fleet and Elastic Agent 8.11.1</a>
</span>
<span class="next">
<a href="install-fleet-managed-agent.html">Appendix A: Install a Fleet-managed Elastic Agent »</a>
</span>
</div>
</div>
</body>
</html>
