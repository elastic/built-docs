<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fleet and Elastic Agent 8.12.0 | Fleet and Elastic Agent Guide [8.12] | Elastic</title>
<meta class="elastic" name="content" content="Fleet and Elastic Agent 8.12.0 | Fleet and Elastic Agent Guide [8.12]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.12]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes-8.12.1.html" title="Fleet and Elastic Agent 8.12.1"/>
<link rel="next" href="install-fleet-managed-agent.html" title="Appendix A: Install a Fleet-managed Elastic Agent"/>
<meta class="elastic" name="product_version" content="8.12"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.12"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.12"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.12]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-8.12.1.html">« Fleet and Elastic Agent 8.12.1</a>
</span>
<span class="next">
<a href="install-fleet-managed-agent.html">Appendix A: Install a Fleet-managed Elastic Agent »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-8.12.0"></a>Fleet and Elastic Agent 8.12.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.12/docs/en/ingest-management/release-notes/release-notes-8.12.asciidoc">edit</a></h2>
</div></div></div>
<p>Review important information about Fleet Server and Elastic Agent for the 8.12.0 release.</p>
<h4><a id="security-updates-8.12.0"></a>Security updates<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.12/docs/en/ingest-management/release-notes/release-notes-8.12.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Update Go version to 1.20.12. <a href="https://github.com/elastic/elastic-agent/pull/3885" class="ulink" target="_top">#3885</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h4><a id="breaking-changes-8.12.0"></a>Breaking changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.12/docs/en/ingest-management/release-notes/release-notes-8.12.asciidoc">edit</a></h4>
<p>Breaking changes can prevent your application from optimal operation and
performance. Before you upgrade, review the breaking changes, then mitigate the
impact to your application.</p>
<details id="breaking-170270">
<summary class="title">Possible naming collisions with Fleet custom ingest pipelines</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span><br>
Starting in this release, Fleet <a class="xref" href="data-streams.html#data-streams-pipelines" title="Ingest pipelines">ingest pipelines</a> can be configured to process events at various levels of customization. If you have a custom pipeline already defined that matches the name of a Fleet custom ingest pipeline, it may be unexpectedly called for other data streams in other integrations. For details and investigation about the issue refer to <a href="https://github.com/elastic/kibana/issues/175254" class="ulink" target="_top">#175254</a>. A fix is planned for delivery in the next 8.12 minor release.</p>
<p><span class="strong strong"><strong>Affected ingest pipelines</strong></span></p>
<p><span class="strong strong"><strong>APM</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">traces-apm</code>
</li>
<li class="listitem">
<code class="literal">traces-apm.rum</code>
</li>
<li class="listitem">
<code class="literal">traces-apm.sampled`</code>
</li>
</ul>
</div>
<p>For APM, if you had previously <a class="xref" href="data-streams.html#data-streams-pipelines" title="Ingest pipelines">defined an ingest pipeline</a> of the form <code class="literal">traces-apm@custom</code> to customize the ingestion of documents ingested to the <code class="literal">traces-apm</code> data stream, then by nature of the new <code class="literal">@custom</code> hooks introduced in issue <a href="https://github.com/elastic/kibana/issues/168019" class="ulink" target="_top">#168019</a>, the <code class="literal">traces-apm@custom</code> pipeline will be called as a pipeline processor in both the <code class="literal">traces-apm.rum</code> and <code class="literal">traces-apm.sampled</code> ingest pipelines. See the following for a comparison of the relevant <code class="literal">processors</code> blocks for each of these pipeline before and after upgrading to 8.12.0:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">// traces-apm-8.x.x
{
	"pipeline": {
		"name": "traces-apm@custom",
		"ignore_missing_pipeline": true
	}
}

// traces-apm-8.12.0
{
	"pipeline": {
		"name": "global@custom",
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces@custom",
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces-apm@custom",
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces-apm@custom", &lt;--- Duplicate pipeline entry
		"ignore_missing_pipeline": true
	}
}</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">// traces-apm.rum-8.x.x
{
	"pipeline": {
		"name": "traces-apm.rum@custom",
		"ignore_missing_pipeline": true
	}
}

// traces-apm.rum-8.12.0
{
	"pipeline": {
		"name": "global@custom",
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces@custom",
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces-apm@custom", &lt;--- Collides with `traces-apm@custom` that may be preexisting
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces-apm.rum@custom",
		"ignore_missing_pipeline": true
	}
}</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">// traces-apm.sampled-8.x.x
{
	"pipeline": {
		"name": "traces-apm.rum@custom",
		"ignore_missing_pipeline": true
	}
}

// traces-apm.sampled-8.12.0
{
	"pipeline": {
		"name": "global@custom",
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces@custom",
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces-apm@custom", &lt;--- Collides with `traces-apm@custom` that may be preexisting
		"ignore_missing_pipeline": true
	}
},
{
	"pipeline": {
		"name": "traces-apm.sampled@custom",
		"ignore_missing_pipeline": true
	}
}</pre>
</div>
<p>The immediate workaround to avoid this unwanted behavior is to edit both the <code class="literal">traces-apm.rum</code> and <code class="literal">traces-apm.sampled</code> ingest pipelines to no longer include the <code class="literal">traces-apm@custom</code> pipeline processor.</p>
<p><span class="strong strong"><strong>Please note that this is a temporary workaround, and this change will be undone if the APM integration is upgraded or reinstalled.</strong></span></p>
<p><span class="strong strong"><strong>Elastic Agent</strong></span></p>
<p>The <code class="literal">elastic_agent</code> integration is subject to the same type of breaking change as described for APM, above. The following ingest pipelines are impacted:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">logs-elastic_agent</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.apm_server</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.auditbeat</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.cloud_defend</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.cloudbeat</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.endpoint_security</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.filebeat</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.filebeat_input</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.fleet_server</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.heartbeat</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.metricbeat</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.osquerybeat</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.packetbeat</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.pf_elastic_collector</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.pf_elastic_symbolizer</code>
</li>
<li class="listitem">
<code class="literal">logs-elastic_agent.pf_host_agent</code>
</li>
</ul>
</div>
<p>The behavior is similar to what&#8217;s described for APM above: pipelines such as <code class="literal">logs-elastic_agent.filebeat</code> will include a <code class="literal">pipeline</code> processor that calls <code class="literal">logs-elastic_agent@custom</code>. If you have custom processing logic defined in a <code class="literal">logs-elastic_agent@custom</code> ingest pipeline, it will be called by all of the pipelines listed above.</p>
<p>The workaround is the same: remove the <code class="literal">logs-elastic_agent@custom</code> pipeline processor from all of the ingest pipelines listed above.</p>
</div>
</details>
<h4><a id="known-issues-8.12.0"></a>Known issues<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.12/docs/en/ingest-management/release-notes/release-notes-8.12.asciidoc">edit</a></h4>
<details id="known-issue-4084">
<summary class="title">For new DEB and RPM installations the <code class="literal">elastic-agent enroll</code> command incorrectly reports failure</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>When you run the <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-enroll-command" title="elastic-agent enroll"><code class="literal">elastic-agent enroll</code></a> command for an RPM or DEB Elastic Agent package, a <code class="literal">Retarting agent daemon</code> message appears in the command output, followed by a <code class="literal">Restart attempt failed</code> error.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>The error does not mean that the enrollment failed. The enrollment actually succeeded. You can ignore the <code class="literal">Restart attempt failed</code> error and continue by running the following commands, after which Elastic Agent should successfully connect to Fleet:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">sudo systemctl enable elastic-agent
sudo systemctl start elastic-agent</pre>
</div>
<div class="console_widget" data-snippet="snippets/12.console"></div>
</div>
</details>
<details id="known-issue-37754">
<summary class="title">Performance regression in AWS S3 inputs using SQS notification</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>In 8.12 the default memory queue flush interval was raised from 1 second to 10 seconds. In many configurations this improves performance because it allows the output to batch more events per round trip, which improves efficiency. However, the SQS input has an extra bottleneck that interacts badly with the new value.</p>
<p>For more details see <a href="https://github.com/elastic/beats/issues/37754" class="ulink" target="_top">#37754</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>If you are using the Elasticsearch output, and your configuration uses a performance preset, switch it to <code class="literal">preset: latency</code>. If you use no preset or use <code class="literal">preset: custom</code>, then set <code class="literal">queue.mem.flush.timeout: 1s</code> in your output configuration.</p>
<p>If you are not using the Elasticsearch output, set <code class="literal">queue.mem.flush.timeout: 1s</code> in your output configuration.</p>
<p>To configure the output parameters for a Fleet-managed agent, see <a class="xref" href="es-output-settings.html#es-output-settings-yaml-config" title="Advanced YAML configuration">Advanced YAML configuration</a>. For a standalone agent, see <a class="xref" href="elastic-agent-output-configuration.html" title="Configure outputs for standalone Elastic Agents">Outputs</a>.</p>
</div>
</details>
<details id="known-issue-sec8366">
<summary class="title">Fleet setup can fail when there are more than one thousand Elastic Agent policies</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>When you set up Fleet with a very high volume of Elastic Agent policies, one thousand or more, you may encounter an error similar to the following:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">[ERROR][plugins.fleet] Unknown error happened while checking Uninstall Tokens validity: 'ResponseError: all shards failed: search_phase_execution_exception
	Caused by:
		too_many_nested_clauses: Query contains too many nested clauses; maxClauseCount is set to 5173</pre>
</div>
<div class="console_widget" data-snippet="snippets/13.console"></div>
<p>The exact number of Elastic Agent policies required to cause the error depends in part on the size of the Elasticsearch cluster, but generally it can happen with volumes above approximately one thousand policies.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>Currently there is no workaround for the issue but a fix is planned to be included in the next version 8.12 release.</p>
<p>Note that according to our <a class="xref" href="fleet-server-scalability.html#agent-policy-scaling-recommendations" title="Policy scaling recommendations">policy scaling recommendations</a>, the current recommended maximum number of Elastic Agent policies supported by Fleet is 500.</p>
</div>
</details>
<details id="known-issue-3263-8120">
<summary class="title">Agents upgraded to 8.12.0 are stuck in a non-upgradeable state</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>An issue discovered in Fleet Server prevents Elastic Agents that have been upgraded to version 8.12.0 from being upgraded again, using the Fleet UI, to version 8.12.1 or higher.</p>
<p>This issue is planned to be fixed in versions 8.12.2 and 8.13.0.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>As a workaround, we recommend you to use the Kibana Fleet API to update any documents in which <code class="literal">upgrade_details</code> is either <code class="literal">null</code> or not defined. Note that these steps must be run as a superuser.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell"> POST _security/role/fleet_superuser
 {
    "indices": [
        {
            "names": [".fleet*",".kibana*"],
            "privileges": ["all"],
            "allow_restricted_indices": true
        }
    ]
  }</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">POST _security/user/fleet_superuser
 {
    "password": "password",
    "roles": ["superuser", "fleet_superuser"]
 }</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">curl -sk -XPOST --user fleet_superuser:password -H 'content-type:application/json' \
  -H'x-elastic-product-origin:fleet' \
  http://localhost:9200/.fleet-agents/_update_by_query \
  -d '{
  "script": {
    "source": "ctx._source.remove(\"upgrade_details\")",
    "lang": "painless"
  },
  "query": {
    "bool": {
        "must_not": {
          "exists": {
            "field": "upgrade_details"
          }
        }
      }
    }
}'</pre>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">DELETE _security/user/fleet_superuser
DELETE _security/role/fleet_superuser</pre>
</div>
<p>After running these API requests, wait at least 10 minutes, and then the agents should be upgradeable again.</p>
</div>
</details>
<h4><a id="new-features-8.12.0"></a>New features<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.12/docs/en/ingest-management/release-notes/release-notes-8.12.asciidoc">edit</a></h4>
<p>The 8.12.0 release Added the following new and notable features.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add Elastic Agent upgrade states and display each agent&#8217;s progress through the upgrade process. See <a class="xref" href="upgrade-elastic-agent.html#view-upgrade-status" title="View upgrade status">View upgrade status</a> for details. (<a href="https://github.com/elastic/kibana/pull/167539" class="ulink" target="_top">#167539</a>)
</li>
<li class="listitem">
Add support for preconfigured output secrets. (<a href="https://github.com/elastic/kibana/pull/172041" class="ulink" target="_top">#172041</a>)
</li>
<li class="listitem">
Add support for pipelines to process events at various levels of customization. (<a href="https://github.com/elastic/kibana/pull/170270" class="ulink" target="_top">#170270</a>)
</li>
<li class="listitem">
Add UI components to create and edit output secrets. (<a href="https://github.com/elastic/kibana/pull/169429" class="ulink" target="_top">#169429</a>)
</li>
<li class="listitem">
Add support for remote ES output. (<a href="https://github.com/elastic/kibana/pull/169252" class="ulink" target="_top">#169252</a>)
</li>
<li class="listitem">
Add the ability to specify secrets in outputs. (<a href="https://github.com/elastic/kibana/pull/169221" class="ulink" target="_top">#169221</a>)
</li>
<li class="listitem">
Add an integrations configs tab to display input templates. (<a href="https://github.com/elastic/kibana/pull/168827" class="ulink" target="_top">#168827</a>)
</li>
<li class="listitem">
Add a Kibana task to publish Agent metrics. (<a href="https://github.com/elastic/kibana/pull/168435" class="ulink" target="_top">#168435</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add a "preset" field to Elasticsearch output configurations that applies a set of configuration overrides based on a desired performance priority. <a href="https://github.com/elastic/beats/pull/37259" class="ulink" target="_top">#37259</a> <a href="https://github.com/elastic/elastic-agent/pull/3879" class="ulink" target="_top">#3879</a> <a href="https://github.com/elastic/elastic-agent/issues/3797" class="ulink" target="_top">#3797</a>
</li>
<li class="listitem">
Send the current agent upgrade details to Fleet Server as part of the check-in API&#8217;s request body. <a href="https://github.com/elastic/elastic-agent/pull/3528" class="ulink" target="_top">#3528</a> <a href="https://github.com/elastic/elastic-agent/issues/3119" class="ulink" target="_top">#3119</a>
</li>
<li class="listitem">
Add new fields for retryable upgrade steps to upgrade details metadata. <a href="https://github.com/elastic/elastic-agent/pull/3845" class="ulink" target="_top">#3845</a> <a href="https://github.com/elastic/elastic-agent/issues/3818" class="ulink" target="_top">#3818</a>
</li>
<li class="listitem">
Improve the upgrade watcher to no longer require root access. <a href="https://github.com/elastic/elastic-agent/pull/3622" class="ulink" target="_top">#3622</a>
</li>
<li class="listitem">
Enable hints autodiscovery for Elastic Agent so that the host for a container in a Kubernetes pod no longer needs to be specified manually. <a href="https://github.com/elastic/elastic-agent/pull/3575" class="ulink" target="_top">#3575</a>
<a href="https://github.com/elastic/elastic-agent/issues/1453" class="ulink" target="_top">#1453</a>
</li>
<li class="listitem">
Enable hints autodiscovery for Elastic Agent so that a configuration can be defined through annotations for specific containers inside a pod. <a href="https://github.com/elastic/elastic-agent/pull/3416" class="ulink" target="_top">#3416</a>
<a href="https://github.com/elastic/elastic-agent/issues/3161" class="ulink" target="_top">#3161</a>
</li>
<li class="listitem">
Support flattened <code class="literal">data_stream.*</code> fields in an Elastic Agent input configuration. <a href="https://github.com/elastic/elastic-agent/pull/3465" class="ulink" target="_top">#3465</a> <a href="https://github.com/elastic/elastic-agent/issues/3191" class="ulink" target="_top">#3191</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h4><a id="enhancements-8.12.0"></a>Enhancements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.12/docs/en/ingest-management/release-notes/release-notes-8.12.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add support for Elasticsearch output performance presets. (<a href="https://github.com/elastic/kibana/pull/172359" class="ulink" target="_top">#172359</a>)
</li>
<li class="listitem">
Add a new <code class="literal">keep_monitoring_alive</code> flag to agent policies. (<a href="https://github.com/elastic/kibana/pull/168865" class="ulink" target="_top">#168865</a>)
</li>
<li class="listitem">
Add support for additional types for dynamic mappings. (<a href="https://github.com/elastic/kibana/pull/168842" class="ulink" target="_top">#168842</a>)
</li>
<li class="listitem">
Use default component templates from Elasticsearch. (<a href="https://github.com/elastic/kibana/pull/163731" class="ulink" target="_top">#163731</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use shorter timeouts for diagnostic requests unless CPU diagnostics are requested. <a href="https://github.com/elastic/elastic-agent/pull/3794" class="ulink" target="_top">#3794</a> <a href="https://github.com/elastic/elastic-agent/issues/3197" class="ulink" target="_top">#3197</a>
</li>
<li class="listitem">
Add configuration parameters for the Kubernetes <code class="literal">leader_election</code> provider. <a href="https://github.com/elastic/elastic-agent/pull/3625" class="ulink" target="_top">#3625</a>
</li>
<li class="listitem">
Remove duplicated tags that may be specified during an agent enrollment. <a href="https://github.com/elastic/elastic-agent/pull/3740" class="ulink" target="_top">#3740</a> <a href="https://github.com/elastic/elastic-agent/issues/858" class="ulink" target="_top">#858</a>
</li>
<li class="listitem">
Include upgrade details in an agent diagnostics bundle <a href="https://github.com/elastic/elastic-agent/pull/3624" class="ulink" target="_top">#3624</a> and in the <code class="literal">elastic-agent status</code> command output. <a href="https://github.com/elastic/elastic-agent/pull/3615" class="ulink" target="_top">#3615</a> <a href="https://github.com/elastic/elastic-agent/issues/3119" class="ulink" target="_top">#3119</a>
</li>
<li class="listitem">
Start and stop the monitoring server based on the monitoring configuration. <a href="https://github.com/elastic/elastic-agent/pull/3584" class="ulink" target="_top">#3584</a> <a href="https://github.com/elastic/elastic-agent/issues/2734" class="ulink" target="_top">#2734</a>
</li>
<li class="listitem">
Copy files concurrently to reduce the time taken to install and upgrade Elastic Agent on systems running SSDs. <a href="https://github.com/elastic/elastic-agent/pull/3212" class="ulink" target="_top">#3212</a>
</li>
<li class="listitem">
Update <code class="literal">elastic-agent-libs</code> from version 0.7.2 to 0.7.3. <a href="https://github.com/elastic/elastic-agent/pull/4000" class="ulink" target="_top">#4000</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h4><a id="bug-fixes-8.12.0"></a>Bug fixes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.12/docs/en/ingest-management/release-notes/release-notes-8.12.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allow agent upgrades if patch version is higher than Kibana. (<a href="https://github.com/elastic/kibana/pull/173167" class="ulink" target="_top">#173167</a>)
</li>
<li class="listitem">
Fix secrets with dot-separated variable names. (<a href="https://github.com/elastic/kibana/pull/173115" class="ulink" target="_top">#173115</a>)
</li>
<li class="listitem">
Fix endpoint privilege management endpoints return errors. (<a href="https://github.com/elastic/kibana/pull/171722" class="ulink" target="_top">#171722</a>)
</li>
<li class="listitem">
Fix expiration time for immediate bulk upgrades being too short. (<a href="https://github.com/elastic/kibana/pull/170879" class="ulink" target="_top">#170879</a>)
</li>
<li class="listitem">
Fix incorrect overwrite of <code class="literal">logs-*</code> and <code class="literal">metrics-*</code> data views on every integration install. (<a href="https://github.com/elastic/kibana/pull/170188" class="ulink" target="_top">#170188</a>)
</li>
<li class="listitem">
Create intermediate objects when using dynamic mappings. (<a href="https://github.com/elastic/kibana/pull/169981" class="ulink" target="_top">#169981</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Preserve build metadata in upgrade version strings. <a href="https://github.com/elastic/elastic-agent/pull/3824" class="ulink" target="_top">#3824</a> <a href="https://github.com/elastic/elastic-agent/issues/3813" class="ulink" target="_top">#3813</a>
</li>
<li class="listitem">
Create a custom <code class="literal">MarshalYAML()</code> method to properly handle error fields in agent diagnostics. <a href="https://github.com/elastic/elastic-agent/pull/3835" class="ulink" target="_top">#3835</a> <a href="https://github.com/elastic/elastic-agent/issues/2940" class="ulink" target="_top">#2940</a>
</li>
<li class="listitem">
Fix the Elastic Agent ignoring the <code class="literal">agent.download.proxy_url</code> setting during a policy update. <a href="https://github.com/elastic/elastic-agent/pull/3803" class="ulink" target="_top">#3803</a> <a href="https://github.com/elastic/elastic-agent/issues/3560" class="ulink" target="_top">#3560</a>
</li>
<li class="listitem">
Only try to download an upgrade locally if the <code class="literal">file://</code> prefix is specified for the source URI. <a href="https://github.com/elastic/elastic-agent/pull/3682" class="ulink" target="_top">#3682</a>
</li>
<li class="listitem">
Fix logging calls that have missing arguments. <a href="https://github.com/elastic/elastic-agent/pull/3679" class="ulink" target="_top">#3679</a>
</li>
<li class="listitem">
Update NodeJS version bundled with Heartbeat to v18.18.2. <a href="https://github.com/elastic/elastic-agent/pull/3655" class="ulink" target="_top">#3655</a>
</li>
<li class="listitem">
Use a third-party library to track progress during install and uninstall operations. <a href="https://github.com/elastic/elastic-agent/pull/3623" class="ulink" target="_top">#3623</a> <a href="https://github.com/elastic/elastic-agent/issues/3607" class="ulink" target="_top">#3607</a>
</li>
<li class="listitem">
Enable the Elastic Agent container to run on Azure Container Instances. <a href="https://github.com/elastic/elastic-agent/pull/3778" class="ulink" target="_top">#3778</a> <a href="https://github.com/elastic/elastic-agent/issues/3711" class="ulink" target="_top">#3711</a>
</li>
<li class="listitem">
When a scheduled upgrade expires, set the upgrade state to failed. <a href="https://github.com/elastic/elastic-agent/pull/3902" class="ulink" target="_top">#3902</a> <a href="https://github.com/elastic/elastic-agent/issues/3817" class="ulink" target="_top">#3817</a>
</li>
<li class="listitem">
Update <code class="literal">elastic-agent-autodiscover</code> to version 0.6.6 and fix default metadata configuration. <a href="https://github.com/elastic/elastic-agent/pull/3938" class="ulink" target="_top">#3938</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes-8.12.1.html">« Fleet and Elastic Agent 8.12.1</a>
</span>
<span class="next">
<a href="install-fleet-managed-agent.html">Appendix A: Install a Fleet-managed Elastic Agent »</a>
</span>
</div>
</div>
</body>
</html>
