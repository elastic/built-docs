<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elastic Agent command reference | Fleet and Elastic Agent Guide [8.14] | Elastic</title>
<meta class="elastic" name="content" content="Elastic Agent command reference | Fleet and Elastic Agent Guide [8.14]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.14]"/>
<link rel="up" href="index.html" title="Fleet and Elastic Agent Guide [8.14]"/>
<link rel="prev" href="urldecode-processor.html" title="URL Decode"/>
<link rel="next" href="troubleshooting-intro.html" title="Troubleshoot"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.14"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="urldecode-processor.html">« URL Decode</a>
</span>
<span class="next">
<a href="troubleshooting-intro.html">Troubleshoot »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.14]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Elastic Agent command reference</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="elastic-agent-cmd-options"></a>Elastic Agent command reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h2>
</div></div></div>

<p>Elastic Agent provides commands for running Elastic Agent, managing Fleet Server, and
doing common tasks. The commands listed here apply to both <a class="xref" href="manage-agents-in-fleet.html" title="Centrally manage Elastic Agents in Fleet">Fleet-managed</a>
and <a class="xref" href="elastic-agent-configuration.html" title="Configure standalone Elastic Agents">standalone</a> Elastic Agent.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Restrictions</h3>
<p>Note the following restrictions for running Elastic Agent commands:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You might need to log in as a root user (or Administrator on Windows) to
run the commands described here. After the Elastic Agent service is installed and running,
make sure you run these commands without prepending them with <code class="literal">./</code> to avoid
invoking the wrong binary.
</li>
<li class="listitem">
Running Elastic Agent commands using the Windows PowerShell ISE is not supported.
</li>
</ul>
</div>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-diagnostics-command" title="elastic-agent diagnostics">diagnostics</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-enroll-command" title="elastic-agent enroll">enroll</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-help-command" title="elastic-agent help">help</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-inspect-command" title="elastic-agent inspect">inspect</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-install-command" title="elastic-agent install">install</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-restart-command" title="elastic-agent restart">restart</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-run-command" title="elastic-agent run">run</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-status-command" title="elastic-agent status">status</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-uninstall-command" title="elastic-agent uninstall">uninstall</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-upgrade-command" title="elastic-agent upgrade">upgrade</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-logs-command" title="elastic-agent logs">logs</a>
</li>
<li class="listitem">
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-version-command" title="elastic-agent version">version</a>
</li>
</ul>
</div>
<hr>
<h3><a id="elastic-agent-diagnostics-command"></a>elastic-agent diagnostics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Gather diagnostics information from the Elastic Agent and component/unit it&#8217;s running.
This command produces an archive that contains:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
version.txt - version information
</li>
<li class="listitem">
pre-config.yaml - pre-configuration before variable substitution
</li>
<li class="listitem">
variables.yaml - current variable contexts from providers
</li>
<li class="listitem">
computed-config.yaml - configuration after variable substitution
</li>
<li class="listitem">
components-expected.yaml - expected computed components model from the computed-config.yaml
</li>
<li class="listitem">
components-actual.yaml - actual running components model as reported by the runtime manager
</li>
<li class="listitem">
state.yaml - current state information of all running components
</li>
<li class="listitem">
<p>Components Directory - diagnostic information from each running component:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
goroutine.txt - goroutine dump
</li>
<li class="listitem">
heap.txt - memory allocation of live objects
</li>
<li class="listitem">
allocs.txt - sampling past memory allocations
</li>
<li class="listitem">
threadcreate.txt - traces led to creation of new OS threads
</li>
<li class="listitem">
block.txt - stack traces that led to blocking on synchronization primitives
</li>
<li class="listitem">
mutex.txt - stack traces of holders of contended mutexes
</li>
<li class="listitem">
Unit Directory - If a given unit provides specific diagnostics, it will be placed here.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>Note that <span class="strong strong"><strong>credentials may not be redacted</strong></span> in the archive; they may appear in plain text in the configuration or policy files inside the archive.</p>
<p>This command is intended for debugging purposes only. The output format and structure of the archive may change between releases.</p>
<h4><a id="_synopsis"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent diagnostics [--file &lt;string&gt;]
                          [-p]
                          [--help]
                          [global-flags]</pre>
</div>
<h4><a id="_options"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--file</code>
</span>
</dt>
<dd>
Specifies the output archive name. Defaults to <code class="literal">elastic-agent-diagnostics-&lt;timestamp&gt;.zip</code>, where the timestamp is the current time in UTC.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">diagnostics</code> command.
</dd>
<dt>
<span class="term">
<code class="literal">-p</code>
</span>
</dt>
<dd>
Additionally runs a 30-second CPU profile on each running component. This will generate an additional <code class="literal">cpu.pprof</code> file for each component.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_example_38"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent diagnostics</pre>
</div>
<hr>
<h3><a id="elastic-agent-enroll-command"></a>elastic-agent enroll<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Enroll the Elastic Agent in Fleet.</p>
<p>Use this command to enroll the Elastic Agent in Fleet without installing the
agent as a service. You will need to do this if you installed
the Elastic Agent from a DEB or RPM package and plan to use systemd commands to
start and manage the service. This command is also useful for testing
Elastic Agent prior to installing it.</p>
<p>If you&#8217;ve already installed Elastic Agent, use this command to modify the settings that Elastic Agent runs with.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To enroll an Elastic Agent <em>and</em> install it as a service, use the
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-install-command" title="elastic-agent install"><code class="literal">install</code> command</a> instead. Installing as a service is the most common scenario.</p>
</div>
</div>
<p>We recommend that you run the <code class="literal">enroll</code> (or <code class="literal">install</code>) command as the root user because some
integrations require root privileges to collect sensitive data. This command
overwrites the <code class="literal">elastic-agent.yml</code> file in the agent directory.</p>
<p>This command includes optional flags to set up <a class="xref" href="fleet-server.html" title="What is Fleet Server?">Fleet Server</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command enrolls the Elastic Agent in Fleet; it does not start the
agent. To start the agent, either <a class="xref" href="start-stop-elastic-agent.html#start-elastic-agent-service" title="Start Elastic Agent">start the
service</a>, if one exists, or use the <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-run-command" title="elastic-agent run"><code class="literal">run</code> command</a>
to start the agent from a terminal.</p>
</div>
</div>
<h4><a id="_synopsis_2"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>To enroll the Elastic Agent in Fleet:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll --url &lt;string&gt;
                     --enrollment-token &lt;string&gt;
                     [--ca-sha256 &lt;string&gt;]
                     [--certificate-authorities &lt;string&gt;]
                     [--daemon-timeout &lt;duration&gt;]
                     [--delay-enroll]
                     [--elastic-agent-cert &lt;string&gt;]
                     [--elastic-agent-cert-key &lt;string&gt;]
                     [--force]
                     [--header &lt;strings&gt;]
                     [--help]
                     [--insecure ]
                     [--proxy-disabled]
                     [--proxy-header &lt;strings&gt;]
                     [--proxy-url &lt;string&gt;]
                     [--staging &lt;string&gt;]
                     [--tag &lt;string&gt;]
                     [global-flags]</pre>
</div>
<p>To enroll the Elastic Agent in Fleet and set up Fleet Server:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll --fleet-server-es &lt;string&gt;
                     --fleet-server-service-token &lt;string&gt;
                     [--fleet-server-service-token-path &lt;string&gt;]
                     [--ca-sha256 &lt;string&gt;]
                     [--certificate-authorities &lt;string&gt;]
                     [--daemon-timeout &lt;duration&gt;]
                     [--delay-enroll]
                     [--elastic-agent-cert &lt;string&gt;]
                     [--elastic-agent-cert-key &lt;string&gt;]
                     [--fleet-server-cert &lt;string&gt;] <a id="CO32-1"></a><i class="conum" data-value="1"></i>
                     [--fleet-server-cert-key &lt;string&gt;]
                     [--fleet-server-cert-key-passphrase &lt;string&gt;]
                     [--fleet-server-client-auth &lt;string&gt;]
                     [--fleet-server-es-ca &lt;string&gt;]
                     [--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;] <a id="CO32-2"></a><i class="conum" data-value="2"></i>
                     [--fleet-server-es-cert &lt;string&gt;]
                     [--fleet-server-es-cert-key &lt;string&gt;]
                     [--fleet-server-es-insecure]
                     [--fleet-server-host &lt;string&gt;]
                     [--fleet-server-insecure-http]
                     [--fleet-server-policy &lt;string&gt;]
                     [--fleet-server-port &lt;uint16&gt;]
                     [--fleet-server-timeout &lt;duration&gt;]
                     [--force]
                     [--header &lt;strings&gt;]
                     [--help]
                     [--non-interactive]
                     [--proxy-disabled]
                     [--proxy-header &lt;strings&gt;]
                     [--proxy-url &lt;string&gt;]
                     [--staging &lt;string&gt;]
                     [--tag &lt;string&gt;]
                     [--url &lt;string&gt;] <a id="CO32-3"></a><i class="conum" data-value="3"></i>
                     [global-flags]</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO32-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>If no <code class="literal">fleet-server-cert*</code> flags are specified, Elastic Agent auto-generates a
self-signed certificate with the hostname of the machine. Remote Elastic Agents
enrolling into a Fleet Server with self-signed certificates must specify
the <code class="literal">--insecure</code> flag.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO32-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when using self-signed certificates with Elasticsearch.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO32-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when enrolling in a Fleet Server with custom certificates. The
URL must match the DNS name used to generate the certificate specified by
<code class="literal">--fleet-server-cert</code>.</p>
</td>
</tr>
</table>
</div>
<p>For more information about custom certificates, refer to <a class="xref" href="secure-connections.html" title="Configure SSL/TLS for self-managed Fleet Servers">Configure SSL/TLS for self-managed Fleet Servers</a>.</p>
<h4><a id="_options_2"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--ca-sha256 &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of certificate authority hash pins used for certificate
verification.
</dd>
<dt>
<span class="term">
<code class="literal">--certificate-authorities &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of root certificates used for server verification.
</dd>
<dt>
<span class="term">
<code class="literal">--daemon-timeout &lt;duration&gt;</code>
</span>
</dt>
<dd>
Timeout waiting for Elastic Agent daemon.
</dd>
<dt>
<span class="term">
<code class="literal">--delay-enroll</code>
</span>
</dt>
<dd>
Delays enrollment to occur on first start of the Elastic Agent service. This setting
is useful when you don&#8217;t want the Elastic Agent to enroll until the next reboot or manual start of the service, for
example, when you&#8217;re preparing an image that includes Elastic Agent.
</dd>
<dt>
<span class="term">
<code class="literal">--elastic-agent-cert</code>
</span>
</dt>
<dd>
Certificate to use as the client certificate for the Elastic Agent&#8217;s connections to Fleet Server.
</dd>
<dt>
<span class="term">
<code class="literal">--elastic-agent-cert-key</code>
</span>
</dt>
<dd>
Private key to use as for the Elastic Agent&#8217;s connections to Fleet Server.
</dd>
<dt>
<span class="term">
<code class="literal">--enrollment-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Enrollment token to use to enroll Elastic Agent into Fleet. You can use
the same enrollment token for multiple agents.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert &lt;string&gt;</code>
</span>
</dt>
<dd>
Certificate to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert-key &lt;string&gt;</code>
</span>
</dt>
<dd>
Private key to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert-key-passphrase &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to passphrase file for decrypting Fleet Server&#8217;s private key if an encrypted private key is used.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-client-auth &lt;string&gt;</code>
</span>
</dt>
<dd>
One of <code class="literal">none</code>, <code class="literal">optional</code>, or <code class="literal">required</code>. Defaults to <code class="literal">none</code>. Fleet Server&#8217;s <code class="literal">client_authentication</code> option
for client mTLS connections. If <code class="literal">optional</code>, or <code class="literal">required</code> is specified, client certificates are verified
using CAs specified in the <code class="literal">--certificate-authorities</code> flag.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es &lt;string&gt;</code>
</span>
</dt>
<dd>
Start a Fleet Server process when Elastic Agent is started, and connect to the
specified Elasticsearch URL.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to certificate authority to use to communicate with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;</code>
</span>
</dt>
<dd>
The SHA-256 fingerprint (hash) of the certificate authority used to self-sign Elasticsearch certificates.
This fingerprint will be used to verify self-signed certificates presented by Fleet Server and any inputs started by Elastic Agent for communication.
This flag is required when using self-signed certificates with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-cert</code>
</span>
</dt>
<dd>
The path to the client certificate that Fleet Server will use when connecting to Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-cert-key</code>
</span>
</dt>
<dd>
The path to the private key that Fleet Server will use when connecting to Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-insecure</code>
</span>
</dt>
<dd>
<p>
Allows fleet server to connect to Elasticsearch in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
</ul>
</div>
<p>When this flag is used the certificate verification is disabled.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-host &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding host (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-insecure-http</code>
</span>
</dt>
<dd>
Expose Fleet Server over HTTP. This option is not recommended because it&#8217;s
insecure. It&#8217;s useful during development and testing, but should not be used in
production. When using this option, you should bind Fleet Server to the
local host (this is the default).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-policy &lt;string&gt;</code>
</span>
</dt>
<dd>
Used when starting a self-managed Fleet Server to allow a specific policy to be used.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-port &lt;uint16&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding port (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-service-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Service token to use for communication with Elasticsearch.
Mutually exclusive with <code class="literal">--fleet-server-service-token-path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-service-token-path &lt;string&gt;</code>
</span>
</dt>
<dd>
Service token file to use for communication with Elasticsearch.
Mutually exclusive with <code class="literal">--fleet-server-service-token</code>.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-timeout &lt;duration&gt;</code>
</span>
</dt>
<dd>
Timeout waiting for Fleet Server to be ready to start enrollment.
</dd>
<dt>
<span class="term">
<code class="literal">--force</code>
</span>
</dt>
<dd>
<p>
Force overwrite of current configuration without prompting for confirmation.
This flag is helpful when using automation software or scripted deployments.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the Elastic Agent is already installed on the host, using <code class="literal">--force</code> may
result in unpredictable behavior with duplicate Elastic Agents appearing in Fleet.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">--header &lt;strings&gt;</code>
</span>
</dt>
<dd>
Headers used in communication with elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">enroll</code> command.
</dd>
<dt>
<span class="term">
<code class="literal">--insecure</code>
</span>
</dt>
<dd>
<p>
Allow the Elastic Agent to connect to Fleet Server over insecure connections. This
setting is required in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server. The API keys are sent in clear text.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
<li class="listitem">
When using self-signed certificates generated by Elastic Agent.
</li>
</ul>
</div>
<p>We strongly recommend that you use a secure connection.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--non-interactive</code>
</span>
</dt>
<dd>
Install Elastic Agent in a non-interactive mode. This flag is helpful when
using automation software or scripted deployments. If Elastic Agent is
already installed on the host, the installation will terminate.
</dd>
<dt>
<span class="term">
<code class="literal">--proxy-disabled</code>
</span>
</dt>
<dd>
Disable proxy support including environment variables.
</dd>
<dt>
<span class="term">
<code class="literal">--proxy-header &lt;strings&gt;</code>
</span>
</dt>
<dd>
Proxy headers used with CONNECT request.
</dd>
<dt>
<span class="term">
<code class="literal">--proxy-url &lt;string&gt;</code>
</span>
</dt>
<dd>
Configures the proxy URL.
</dd>
<dt>
<span class="term">
<code class="literal">--staging &lt;string&gt;</code>
</span>
</dt>
<dd>
Configures agent to download artifacts from a staging build.
</dd>
<dt>
<span class="term">
<code class="literal">--tag &lt;string&gt;</code>
</span>
</dt>
<dd>
<p>
A comma-separated list of tags to apply to Fleet-managed Elastic Agents. You can
use these tags to filter the list of agents in Fleet.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Currently, there is no way to remove or edit existing tags. To change the
tags, you must unenroll the Elastic Agent, then re-enroll it using new tags.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">--url &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server URL to use to enroll the Elastic Agent into Fleet.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_11"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>Enroll the Elastic Agent in Fleet:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll \
  --url=https://cedd4e0e21e240b4s2bbbebdf1d6d52f.fleet.eu-west-1.aws.cld.elstc.co:443 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ==</pre>
</div>
<p>Enroll the Elastic Agent in Fleet and set up Fleet Server:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll --fleet-server-es=http://elasticsearch:9200 \
  --fleet-server-service-token=AbEAAdesYXN1abMvZmxlZXQtc2VldmVyL3Rva2VuLTE2MTkxMzg3MzIzMTg7dzEta0JDTmZUcGlDTjlwRmNVTjNVQQ \
  --fleet-server-policy=a35fd520-26f5-11ec-8bd9-3374690g57b6</pre>
</div>
<p>Start Elastic Agent with Fleet Server (running on a custom CA). This example
assumes you&#8217;ve generated the certificates with the following names:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ca.crt</code>: Root CA certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.crt</code>: Fleet Server certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.key</code>: Fleet Server private key
</li>
<li class="listitem">
<code class="literal">elasticsearch-ca.crt</code>: CA certificate to use to connect to Elasticsearch
</li>
</ul>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll \
  --url=https://fleet-server:8220 \
  --fleet-server-es=https://elasticsearch:9200 \
  --fleet-server-service-token=AAEBAWVsYXm0aWMvZmxlZXQtc2XydmVyL3Rva2VuLTE2MjM4OTAztDU1OTQ6dllfVW1mYnFTVjJwTC2ZQ0EtVnVZQQ \
  --fleet-server-policy=a35fd520-26f5-11ec-8bd9-3374690g57b6 \
  --certificate-authorities=/path/to/ca.crt \
  --fleet-server-es-ca=/path/to/elasticsearch-ca.crt \
  --fleet-server-cert=/path/to/fleet-server.crt \
  --fleet-server-cert-key=/path/to/fleet-server.key \
  --fleet-server-port=8220</pre>
</div>
<p>Then enroll another Elastic Agent into the Fleet Server started in the previous
example:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll --url=https://fleet-server:8220 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ== \
  --certificate-authorities=/path/to/ca.crt</pre>
</div>
<hr>
<h3><a id="elastic-agent-help-command"></a>elastic-agent help<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Show help for a specific command.</p>
<h4><a id="_synopsis_3"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent help &lt;command&gt; [--help] [global-flags]</pre>
</div>
<h4><a id="_options_3"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">command</code>
</span>
</dt>
<dd>
The name of the command.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">help</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_example_39"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent help enroll</pre>
</div>
<hr>
<h3><a id="elastic-agent-inspect-command"></a>elastic-agent inspect<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Show the current Elastic Agent configuration.</p>
<p>If no parameters are specified, shows the full Elastic Agent configuration.</p>
<h4><a id="_synopsis_4"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent inspect [--help]
elastic-agent inspect components [--show-config]
                             [--show-spec]
                             [--help]
                             [id]</pre>
</div>
<h4><a id="_options_4"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">components</code>
</span>
</dt>
<dd>
<p>
Display the current configuration for the component. This command
accepts additional flags:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--show-config</code>
</span>
</dt>
<dd>
Use to display the configuration in all units.
</dd>
<dt>
<span class="term">
<code class="literal">--show-spec</code>
</span>
</dt>
<dd>
Use to get input/output runtime spectification for a component.
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">inspect</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_12"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent inspect
elastic-agent inspect components --show-config
elastic-agent inspect components log-default</pre>
</div>
<hr>
<h3><a id="elastic-agent-install-command"></a>elastic-agent install<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Install Elastic Agent permanently on the system and manage it by using the system&#8217;s
service manager. The agent will start automatically after installation is
complete. On Linux (tar package), this command requires a system and service
manager like systemd.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you installed Elastic Agent from a DEB or RPM package, the <code class="literal">install</code>
command will skip the installation itself and function as an alias of the
<a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-enroll-command" title="elastic-agent enroll"><code class="literal">enroll</code> command</a> instead. Note that after
an upgrade of the Elastic Agent using DEB or RPM the Elastic Agent service needs to be restarted.</p>
</div>
</div>
<p>You must run this command as the root user (or Administrator on Windows)
to write files to the correct locations. This command overwrites the
<code class="literal">elastic-agent.yml</code> file in the agent directory.</p>
<p>The syntax for running this command varies by platform. For platform-specific
examples, refer to <a class="xref" href="elastic-agent-installation.html" title="Install Elastic Agents"><em>Install Elastic Agents</em></a>.</p>
<h4><a id="_synopsis_5"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>To install the Elastic Agent as a service, enroll it in Fleet, and start the
<code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent install --url &lt;string&gt;
                      --enrollment-token &lt;string&gt;
                      [--base-path &lt;string&gt;]
                      [--ca-sha256 &lt;string&gt;]
                      [--certificate-authorities &lt;string&gt;]
                      [--daemon-timeout &lt;duration&gt;]
                      [--delay-enroll]
                      [--elastic-agent-cert &lt;string&gt;]
                      [--elastic-agent-cert-key &lt;string&gt;]
                      [--force]
                      [--header &lt;strings&gt;]
                      [--help]
                      [--insecure ]
                      [--non-interactive]
                      [--proxy-disabled]
                      [--proxy-header &lt;strings&gt;]
                      [--proxy-url &lt;string&gt;]
                      [--staging &lt;string&gt;]
                      [--tag &lt;string&gt;]
                      [global-flags]</pre>
</div>
<p>To install the Elastic Agent as a service, enroll it in Fleet, and start
a <code class="literal">fleet-server</code> process alongside the <code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent install --fleet-server-es &lt;string&gt;
                      --fleet-server-service-token &lt;string&gt;
                      [--fleet-server-service-token-path &lt;string&gt;]
                      [--base-path &lt;string&gt;]
                      [--ca-sha256 &lt;string&gt;]
                      [--certificate-authorities &lt;string&gt;]
                      [--daemon-timeout &lt;duration&gt;]
                      [--delay-enroll]
                      [--elastic-agent-cert &lt;string&gt;]
                      [--elastic-agent-cert-key &lt;string&gt;]
                      [--fleet-server-cert &lt;string&gt;] <a id="CO33-1"></a><i class="conum" data-value="1"></i>
                      [--fleet-server-cert-key &lt;string&gt;]
                      [--fleet-server-cert-key-passphrase &lt;string&gt;]
                      [--fleet-server-client-auth &lt;string&gt;]
                      [--fleet-server-es-ca &lt;string&gt;]
                      [--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;] <a id="CO33-2"></a><i class="conum" data-value="2"></i>
                      [--fleet-server-es-cert &lt;string&gt;]
                      [--fleet-server-es-cert-key &lt;string&gt;]
                      [--fleet-server-es-insecure]
                      [--fleet-server-host &lt;string&gt;]
                      [--fleet-server-insecure-http]
                      [--fleet-server-policy &lt;string&gt;]
                      [--fleet-server-port &lt;uint16&gt;]
                      [--fleet-server-timeout &lt;duration&gt;]
                      [--force]
                      [--header &lt;strings&gt;]
                      [--help]
                      [--non-interactive]
                      [--proxy-disabled]
                      [--proxy-header &lt;strings&gt;]
                      [--proxy-url &lt;string&gt;]
                      [--staging &lt;string&gt;]
                      [--tag &lt;string&gt;]
                      [--url &lt;string&gt;] <a id="CO33-3"></a><i class="conum" data-value="3"></i>
                      [global-flags]</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO33-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>If no <code class="literal">fleet-server-cert*</code> flags are specified, Elastic Agent auto-generates a
self-signed certificate with the hostname of the machine. Remote Elastic Agents
enrolling into a Fleet Server with self-signed certificates must specify
the <code class="literal">--insecure</code> flag.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO33-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when using self-signed certificate on Elasticsearch side.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO33-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Required when enrolling in a Fleet Server with custom certificates. The
URL must match the DNS name used to generate the certificate specified by
<code class="literal">--fleet-server-cert</code>.</p>
</td>
</tr>
</table>
</div>
<p>For more information about custom certificates, refer to <a class="xref" href="secure-connections.html" title="Configure SSL/TLS for self-managed Fleet Servers">Configure SSL/TLS for self-managed Fleet Servers</a>.</p>
<h4><a id="_options_5"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--base-path &lt;string&gt;</code>
</span>
</dt>
<dd>
<p>
Install Elastic Agent in a location other than the <a class="xref" href="installation-layout.html" title="Installation layout">default</a>.
Specify the custom base path for the install.
</p>
<p>The <code class="literal">--base-path</code> option is not currently supported with <a href="/guide/en/security/8.14/install-endpoint.html" class="ulink" target="_top">Elastic Defend</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--ca-sha256 &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of certificate authority hash pins used for certificate
verification.
</dd>
<dt>
<span class="term">
<code class="literal">--certificate-authorities &lt;string&gt;</code>
</span>
</dt>
<dd>
Comma-separated list of root certificates used for server verification.
</dd>
<dt>
<span class="term">
<code class="literal">--daemon-timeout &lt;duration&gt;</code>
</span>
</dt>
<dd>
Timeout waiting for Elastic Agent daemon.
</dd>
<dt>
<span class="term">
<code class="literal">--delay-enroll</code>
</span>
</dt>
<dd>
Delays enrollment to occur on first start of the Elastic Agent service. This setting
is useful when you don&#8217;t want the Elastic Agent to enroll until the next reboot or manual start of the service, for
example, when you&#8217;re preparing an image that includes Elastic Agent.
</dd>
<dt>
<span class="term">
<code class="literal">--elastic-agent-cert</code>
</span>
</dt>
<dd>
Certificate to use as the client certificate for the Elastic Agent&#8217;s connections to Fleet Server.
</dd>
<dt>
<span class="term">
<code class="literal">--elastic-agent-cert-key</code>
</span>
</dt>
<dd>
Private key to use as for the Elastic Agent&#8217;s connections to Fleet Server.
</dd>
<dt>
<span class="term">
<code class="literal">--enrollment-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Enrollment token to use to enroll Elastic Agent into Fleet. You can use
the same enrollment token for multiple agents.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert &lt;string&gt;</code>
</span>
</dt>
<dd>
Certificate to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert-key &lt;string&gt;</code>
</span>
</dt>
<dd>
Private key to use for exposed Fleet Server HTTPS endpoint.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-cert-key-passphrase &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to passphrase file for decrypting Fleet Server&#8217;s private key if an encrypted private key is used.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-client-auth &lt;string&gt;</code>
</span>
</dt>
<dd>
One of <code class="literal">none</code>, <code class="literal">optional</code>, or <code class="literal">required</code>. Defaults to <code class="literal">none</code>. Fleet Server&#8217;s <code class="literal">client_authentication</code> option
for client mTLS connections. If <code class="literal">optional</code>, or <code class="literal">required</code> is specified, client certificates are verified
using CAs specified in the <code class="literal">--certificate-authorities</code> flag.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es &lt;string&gt;</code>
</span>
</dt>
<dd>
Start a Fleet Server process when Elastic Agent is started, and connect to the
specified Elasticsearch URL.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to certificate authority to use to communicate with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-ca-trusted-fingerprint &lt;string&gt;</code>
</span>
</dt>
<dd>
The SHA-256 fingerprint (hash) of the certificate authority used to self-sign Elasticsearch certificates.
This fingerprint will be used to verify self-signed certificates presented by Fleet Server and any inputs started by Elastic Agent for communication.
This flag is required when using self-signed certificates with Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-cert</code>
</span>
</dt>
<dd>
The path to the client certificate that Fleet Server will use when connecting to Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-cert-key</code>
</span>
</dt>
<dd>
The path to the private key that Fleet Server will use when connecting to Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-es-insecure</code>
</span>
</dt>
<dd>
<p>
Allows fleet server to connect to Elasticsearch in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
</ul>
</div>
<p>When this flag is used the certificate verification is disabled.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-host &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding host (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-insecure-http</code>
</span>
</dt>
<dd>
Expose Fleet Server over HTTP. This option is not recommended because it&#8217;s
insecure. It&#8217;s useful during development and testing, but should not be used in
production. When using this option, you should bind Fleet Server to the
local host (this is the default).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-policy &lt;string&gt;</code>
</span>
</dt>
<dd>
Used when starting a self-managed Fleet Server to allow a specific policy to be used.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-port &lt;uint16&gt;</code>
</span>
</dt>
<dd>
Fleet Server HTTP binding port (overrides the policy).
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-service-token &lt;string&gt;</code>
</span>
</dt>
<dd>
Service token to use for communication with Elasticsearch.
Mutually exclusive with <code class="literal">--fleet-server-service-token-path</code>.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-service-token-path &lt;string&gt;</code>
</span>
</dt>
<dd>
Service token file to use for communication with Elasticsearch.
Mutually exclusive with <code class="literal">--fleet-server-service-token</code>.
</dd>
<dt>
<span class="term">
<code class="literal">--fleet-server-timeout &lt;duration&gt;</code>
</span>
</dt>
<dd>
Timeout waiting for Fleet Server to be ready to start enrollment.
</dd>
<dt>
<span class="term">
<code class="literal">--force</code>
</span>
</dt>
<dd>
<p>
Force overwrite of current configuration without prompting for confirmation.
This flag is helpful when using automation software or scripted deployments.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the Elastic Agent is already installed on the host, using <code class="literal">--force</code> may
result in unpredictable behavior with duplicate Elastic Agents appearing in Fleet.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">--header &lt;strings&gt;</code>
</span>
</dt>
<dd>
Headers used in communication with elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">enroll</code> command.
</dd>
<dt>
<span class="term">
<code class="literal">--insecure</code>
</span>
</dt>
<dd>
<p>
Allow the Elastic Agent to connect to Fleet Server over insecure connections. This
setting is required in the following situations:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When connecting to an HTTP server. The API keys are sent in clear text.
</li>
<li class="listitem">
When connecting to an HTTPs server and the certificate chain cannot be
verified. The content is encrypted, but the certificate is not verified.
</li>
<li class="listitem">
When using self-signed certificates generated by Elastic Agent.
</li>
</ul>
</div>
<p>We strongly recommend that you use a secure connection.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--non-interactive</code>
</span>
</dt>
<dd>
Install Elastic Agent in a non-interactive mode. This flag is helpful when
using automation software or scripted deployments. If Elastic Agent is
already installed on the host, the installation will terminate.
</dd>
<dt>
<span class="term">
<code class="literal">--proxy-disabled</code>
</span>
</dt>
<dd>
Disable proxy support including environment variables.
</dd>
<dt>
<span class="term">
<code class="literal">--proxy-header &lt;strings&gt;</code>
</span>
</dt>
<dd>
Proxy headers used with CONNECT request.
</dd>
<dt>
<span class="term">
<code class="literal">--proxy-url &lt;string&gt;</code>
</span>
</dt>
<dd>
Configures the proxy URL.
</dd>
<dt>
<span class="term">
<code class="literal">--staging &lt;string&gt;</code>
</span>
</dt>
<dd>
Configures agent to download artifacts from a staging build.
</dd>
<dt>
<span class="term">
<code class="literal">--tag &lt;strings&gt;</code>
</span>
</dt>
<dd>
<p>
A comma-separated list of tags to apply to Fleet-managed Elastic Agents. You can
use these tags to filter the list of agents in Fleet.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Currently, there is no way to remove or edit existing tags. To change the
tags, you must unenroll the Elastic Agent, then re-enroll it using new tags.</p>
</div>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">--url &lt;string&gt;</code>
</span>
</dt>
<dd>
Fleet Server URL to use to enroll the Elastic Agent into Fleet.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_13"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>Install the Elastic Agent as a service, enroll it in Fleet, and start the
<code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent install \
  --url=https://cedd4e0e21e240b4s2bbbebdf1d6d52f.fleet.eu-west-1.aws.cld.elstc.co:443 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ==</pre>
</div>
<p>Install the Elastic Agent as a service, enroll it in Fleet, and start
a <code class="literal">fleet-server</code> process alongside the <code class="literal">elastic-agent</code> service:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent install --fleet-server-es=http://elasticsearch:9200 \
  --fleet-server-service-token=AbEAAdesYXN1abMvZmxlZXQtc2VldmVyL3Rva2VuLTE2MTkxMzg3MzIzMTg7dzEta0JDTmZUcGlDTjlwRmNVTjNVQQ \
  --fleet-server-policy=a35fd620-26f6-11ec-8bd9-3374690f57b6</pre>
</div>
<p>Start Elastic Agent with Fleet Server (running on a custom CA). This example
assumes you&#8217;ve generated the certificates with the following names:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ca.crt</code>: Root CA certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.crt</code>: Fleet Server certificate
</li>
<li class="listitem">
<code class="literal">fleet-server.key</code>: Fleet Server private key
</li>
<li class="listitem">
<code class="literal">elasticsearch-ca.crt</code>: CA certificate to use to connect to Elasticsearch
</li>
</ul>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent install \
  --url=https://fleet-server:8220 \
  --fleet-server-es=https://elasticsearch:9200 \
  --fleet-server-service-token=AAEBAWVsYXm0aWMvZmxlZXQtc2XydmVyL3Rva2VuLTE2MjM4OTAztDU1OTQ6dllfVW1mYnFTVjJwTC2ZQ0EtVnVZQQ \
  --fleet-server-policy=a35fd520-26f5-11ec-8bd9-3374690g57b6 \
  --certificate-authorities=/path/to/ca.crt \
  --fleet-server-es-ca=/path/to/elasticsearch-ca.crt \
  --fleet-server-cert=/path/to/fleet-server.crt \
  --fleet-server-cert-key=/path/to/fleet-server.key \
  --fleet-server-port=8220</pre>
</div>
<p>Then install another Elastic Agent and enroll it into the Fleet Server started in
the previous example:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent install --url=https://fleet-server:8220 \
  --enrollment-token=NEFmVllaa0JLRXhKebVKVTR5TTI6N2JaVlJpSGpScmV0ZUVnZVlRUExFQQ== \
  --certificate-authorities=/path/to/ca.crt</pre>
</div>
<hr>
<h3><a id="elastic-agent-restart-command"></a>elastic-agent restart<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Restart the currently running Elastic Agent daemon.</p>
<h4><a id="_synopsis_6"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent restart [--help] [global-flags]</pre>
</div>
<h4><a id="_options_6"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">restart</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_14"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent restart</pre>
</div>
<hr>
<h3><a id="elastic-agent-run-command"></a>elastic-agent run<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Start the <code class="literal">elastic-agent</code> process.</p>
<h4><a id="_synopsis_7"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent run [global-flags]</pre>
</div>
<h4><a id="elastic-agent-global-flags"></a>Global flags<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<p>These flags are valid whenever you run <code class="literal">elastic-agent</code> on the command line.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">-c &lt;string&gt;</code>
</span>
</dt>
<dd>
The configuration file to use. If not specified, Elastic Agent uses
<code class="literal">{path.config}/elastic-agent.yml</code>.
</dd>
<dt>
<span class="term">
<code class="literal">--e</code>
</span>
</dt>
<dd>
Log to stderr and disable syslog/file output.
</dd>
<dt>
<span class="term">
<code class="literal">--environment &lt;environmentVar&gt;</code>
</span>
</dt>
<dd>
The environment in which the agent will run.
</dd>
<dt>
<span class="term">
<code class="literal">--path.config &lt;string&gt;</code>
</span>
</dt>
<dd>
The directory where Elastic Agent looks for its configuration file. The default
varies by platform.
</dd>
<dt>
<span class="term">
<code class="literal">--path.home &lt;string&gt;</code>
</span>
</dt>
<dd>
<p>
The root directory of Elastic Agent. <code class="literal">path.home</code> determines the location of the
configuration files and data directory.
</p>
<p>If not specified, Elastic Agent uses the current working directory.</p>
</dd>
<dt>
<span class="term">
<code class="literal">--path.logs &lt;string&gt;</code>
</span>
</dt>
<dd>
Path to the log output for Elastic Agent. The default varies by platform.
</dd>
<dt>
<span class="term">
<code class="literal">--v</code>
</span>
</dt>
<dd>
Set log level to INFO.
</dd>
</dl>
</div>
<h4><a id="_example_40"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent run -c myagentconfig.yml</pre>
</div>
<hr>
<h3><a id="elastic-agent-status-command"></a>elastic-agent status<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Returns the current status of the running Elastic Agent daemon and of each process
in the Elastic Agent.  The last known status of the Fleet server is also returned.
The <code class="literal">output</code> option controls the level of detail and formatting of the information.</p>
<h4><a id="_synopsis_8"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent status [--output &lt;string&gt;]
                     [--help]
                     [global-flags]</pre>
</div>
<h4><a id="_options_7"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--output &lt;string&gt;</code>
</span>
</dt>
<dd>
Output the status information in either <code class="literal">human</code> (the default),
<code class="literal">full</code>, <code class="literal">json</code>, or <code class="literal">yaml</code>.  <code class="literal">human</code> returns limited information
when Elastic Agent is in the <code class="literal">HEALTHY</code> state. If any components or units are
not in <code class="literal">HEALTHY</code> state, then full details are displayed for that
component or unit.  <code class="literal">full</code>, <code class="literal">json</code> and <code class="literal">yaml</code> always return the
full status information.  Components map to individual processes
running underneath Elastic Agent, for example Filebeat or Endpoint Security.
Units map to discrete configuration units within that process, for
example Filebeat inputs or Metricbeat modules.
</dd>
</dl>
</div>
<p>When the output is <code class="literal">json</code> or <code class="literal">yaml</code>, status codes are returned as
numerical values.  The status codes can be mapped using the following
table:</p>
<p>+</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Code</th>
<th align="left" valign="top">Status</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>0</p></td>
<td align="left" valign="top"><p><code class="literal">STARTING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>1</p></td>
<td align="left" valign="top"><p><code class="literal">CONFIGURING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2</p></td>
<td align="left" valign="top"><p><code class="literal">HEALTHY</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>3</p></td>
<td align="left" valign="top"><p><code class="literal">DEGRADED</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>4</p></td>
<td align="left" valign="top"><p><code class="literal">FAILED</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>5</p></td>
<td align="left" valign="top"><p><code class="literal">STOPPING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>6</p></td>
<td align="left" valign="top"><p><code class="literal">UPGRADING</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>7</p></td>
<td align="left" valign="top"><p><code class="literal">ROLLBACK</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">status</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_15"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent status</pre>
</div>
<hr>
<h3><a id="elastic-agent-uninstall-command"></a>elastic-agent uninstall<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Permanently uninstall Elastic Agent from the system.</p>
<p>You must run this command as the root user (or Administrator on Windows)
to remove files.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Be sure to run the <code class="literal">uninstall</code> command from the directory where Elastic Agent is installed and not from the directory where you previously ran the <code class="literal">install</code> command.</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Uninstall">
    <button role="tab"
            aria-selected="true"
            aria-controls="mac-tab-uninstall"
            id="mac-uninstall">
      macOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-uninstall"
            id="linux-uninstall"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-uninstall"
            id="win-uninstall"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-uninstall"
       aria-labelledby="mac-uninstall">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must run this command as the root user.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo /Library/Elastic/Agent/elastic-agent uninstall</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-uninstall"
       aria-labelledby="linux-uninstall"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must run this command as the root user.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo /opt/Elastic/Agent/elastic-agent uninstall</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-uninstall"
       aria-labelledby="win-uninstall"
       hidden="">
<p>Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).</p>
<p>From the PowerShell prompt, run:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">C:\"Program Files"\Elastic\Agent\elastic-agent.exe uninstall</pre>
</div>
  </div>
</div>
</div>
</div>
<h4><a id="_synopsis_9"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent uninstall [--force] [--help] [global-flags]</pre>
</div>
<h4><a id="_options_8"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--force</code>
</span>
</dt>
<dd>
Uninstall Elastic Agent and do not prompt for confirmation. This flag is helpful
when using automation software or scripted deployments.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">uninstall</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_16"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent uninstall</pre>
</div>
<hr>
<h3><a id="elastic-agent-upgrade-command"></a>elastic-agent upgrade<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Upgrade the currently running Elastic Agent to the specified version. This should only
be used with agents running in standalone mode. Agents enrolled in Fleet
should be upgraded through Fleet.</p>
<h4><a id="_synopsis_10"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent upgrade &lt;version&gt; [--source-uri &lt;string&gt;] [--help] [flags]</pre>
</div>
<h4><a id="_options_9"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
The version of Elastic Agent to upgrade to.
</dd>
<dt>
<span class="term">
<code class="literal">--source-uri &lt;string&gt;</code>
</span>
</dt>
<dd>
The source URI to download the new version from. By default, Elastic Agent uses the
Elastic Artifacts URL.
</dd>
<dt>
<span class="term">
<code class="literal">--skip-verify</code>
</span>
</dt>
<dd>
Skip the package verification process. This option is not recommended as it is insecure.
</dd>
<dt>
<span class="term">
<code class="literal">--pgp-path &lt;string&gt;</code>
</span>
</dt>
<dd>
Use a locally stored copy of the PGP key to verify the upgrade package.
</dd>
<dt>
<span class="term">
<code class="literal">--pgp-uri &lt;string&gt;</code>
</span>
</dt>
<dd>
Use the specified online PGP key to verify the upgrade package.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">upgrade</code> command.
</dd>
</dl>
</div>
<p>For details about using the <code class="literal">--skip-verify</code>, <code class="literal">--pgp-path &lt;string&gt;</code>, and <code class="literal">--pgp-uri &lt;string&gt;</code>
package verification options, refer to <a class="xref" href="upgrade-standalone.html#upgrade-standalone-verify-package" title="Verifying Elastic Agent package signatures">Verifying Elastic Agent package signatures</a>.</p>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_examples_17"></a>Examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent upgrade 7.10.1</pre>
</div>
<hr>
<h3><a id="elastic-agent-logs-command"></a>elastic-agent logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Show the logs of the running Elastic Agent.</p>
<h4><a id="_synopsis_11"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent logs [--follow] [--number &lt;int&gt;] [--component &lt;string&gt;] [--no-color] [--help] [global-flags]</pre>
</div>
<h4><a id="_options_10"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--follow</code> or <code class="literal">-f</code>
</span>
</dt>
<dd>
Follow log updates until the command is interrupted (for example with <code class="literal">Ctrl-C</code>).
</dd>
<dt>
<span class="term">
<code class="literal">--number &lt;int&gt;</code> or <code class="literal">-n &lt;int&gt;</code>
</span>
</dt>
<dd>
How many lines of logs to print. If logs following is enabled, affects the initial output.
</dd>
<dt>
<span class="term">
<code class="literal">--component &lt;string&gt;</code> or <code class="literal">-C &lt;string&gt;</code>
</span>
</dt>
<dd>
Filter logs based on the component name.
</dd>
<dt>
<span class="term">
<code class="literal">--no-color</code>
</span>
</dt>
<dd>
Disable color based on log-level of each entry.
</dd>
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">logs</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_example_41"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent logs -n 100 -f -C "system/metrics-default"</pre>
</div>
<hr>
<h3><a id="elastic-agent-version-command"></a>elastic-agent version<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h3>
<p>Show the version of Elastic Agent.</p>
<h4><a id="_synopsis_12"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent version [--help] [global-flags]</pre>
</div>
<h4><a id="_options_11"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">--help</code>
</span>
</dt>
<dd>
Show help for the <code class="literal">version</code> command.
</dd>
</dl>
</div>
<p>For more flags, see <a class="xref" href="elastic-agent-cmd-options.html#elastic-agent-global-flags" title="Global flags">Global flags</a>.</p>
<h4><a id="_example_42"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/commands.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">elastic-agent version</pre>
</div>
<hr>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="urldecode-processor.html">« URL Decode</a>
</span>
<span class="next">
<a href="troubleshooting-intro.html">Troubleshoot »</a>
</span>
</div>
</body>
</html>
