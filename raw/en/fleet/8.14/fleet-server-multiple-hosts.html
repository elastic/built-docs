<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fleet Server with multiple Elasticsearch hosts | Fleet and Elastic Agent Guide [8.14] | Elastic</title>
<meta class="elastic" name="content" content="Fleet Server with multiple Elasticsearch hosts | Fleet and Elastic Agent Guide [8.14]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.14]"/>
<link rel="up" href="fleet-deployment-models.html" title="Deployment models"/>
<link rel="prev" href="fleet-server-monitoring.html" title="Monitor a self-managed Fleet Server"/>
<link rel="next" href="elastic-agent-installation.html" title="Install Elastic Agents"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.14"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.14]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="fleet-deployment-models.html">Deployment models</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="fleet-server-monitoring.html">« Monitor a self-managed Fleet Server</a>
</span>
<span class="next">
<a href="elastic-agent-installation.html">Install Elastic Agents »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="fleet-server-multiple-hosts"></a>Fleet Server with multiple Elasticsearch hosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.14/docs/en/ingest-management/fleet/fleet-server-multiple-hosts.asciidoc">edit</a></h2>
</div></div></div>
<p>Fleet Server normally expects the Elasticsearch host that it enrolled with during installation to be available. In the event that that host becomes unavailable, other configured Elasticsearch hosts can be used, but with a few assumptions and restrictions:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
The Elasticsearch host URL that is used to enroll a new Fleet Server will never be removed from the Fleet Server configuration.
</li>
<li class="listitem">
In order for the output settings that Fleet Server retrieves from the Fleet Server policy to be considered valid, Fleet Server must be able to connect to at least one of the hosts specified in the policy.
</li>
<li class="listitem">
<p>Fleet Server gives precedence to attributes from the Fleet Server policy when it is available. For example, if the flag <code class="literal">--fleet-server-es-ca</code> is used when Fleet Server enrolls, and the output that Fleet Server is currently using contains the flag <code class="literal">ssl.certificate_authorities</code>, Fleet Server will attempt to use <code class="literal">ssl.certificate_authorities</code> as the authentication setting. If the output does not contain <code class="literal">ssl.certificate_authorities</code> then the value from when Fleet Server initially enrolled is used.</p>
<p>This behavior can cause issues when the agent in which Fleet Server is running restarts or is upgraded. Settings that are specified in the Fleet Server policy that were not used used during the agent&#8217;s enrollment are lost when the agent restarts. To avoid issues, make sure that the settings used when the Fleet Server instance first enrolled are always valid.</p>
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="fleet-server-monitoring.html">« Monitor a self-managed Fleet Server</a>
</span>
<span class="next">
<a href="elastic-agent-installation.html">Install Elastic Agents »</a>
</span>
</div>
</div>
</body>
</html>
