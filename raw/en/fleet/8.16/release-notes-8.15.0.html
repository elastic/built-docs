<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fleet and Elastic Agent 8.15.0 | Fleet and Elastic Agent Guide [8.16] | Elastic</title>
<meta class="elastic" name="content" content="Fleet and Elastic Agent 8.15.0 | Fleet and Elastic Agent Guide [8.16]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.16]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes-8.15.1.html" title="Fleet and Elastic Agent 8.15.1"/>
<link rel="next" href="install-fleet-managed-agent.html" title="Appendix A: Install a Fleet-managed Elastic Agent"/>
<meta class="elastic" name="product_version" content="8.16"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.16"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes-8.15.1.html">« Fleet and Elastic Agent 8.15.1</a>
</span>
<span class="next">
<a href="install-fleet-managed-agent.html">Appendix A: Install a Fleet-managed Elastic Agent »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Fleet and Elastic Agent 8.15.0</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.16/docs/en/ingest-management/release-notes/release-notes-8.15.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="release-notes-8.15.0"></a>Fleet and Elastic Agent 8.15.0</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.16/docs/en/ingest-management/release-notes/release-notes-8.15.asciidoc">edit</a></div>
</div></div></div>
<p>Review important information about the Fleet and Elastic Agent 8.15.0 release.</p>
<div class="position-relative"><h4><a id="security-updates-8.15.0"></a>Security updates</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.16/docs/en/ingest-management/release-notes/release-notes-8.15.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet Server
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Update Fleet Server Go version to 1.22.5. <a href="https://github.com/elastic/fleet-server/pull/3681" class="ulink" target="_top">#3681</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="position-relative"><h4><a id="known-issues-8.15.0"></a>Known issues</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.16/docs/en/ingest-management/release-notes/release-notes-8.15.asciidoc">edit</a></div>
<details id="known-issue-issue-40608">
<summary class="title">Azure EventHub input for Elastic Agent fails to start on Windows</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>The Azure EventHub input fails to start on Elastic Agent version 8.15 running on Windows.
The Elastic Agent status will be reported as unhealthy.
See Beats issue <a href="https://github.com/elastic/beats/issues/40608" class="ulink" target="_top">#40608</a> for details.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>If you&#8217;re using Elastic Agent on Windows with any integration which makes use of the Azure EventHub input, we recommend not upgrading Elastic Agent to version 8.15.0 and instead waiting for a later release. A fix is planned for version 8.15.1.</p>
</div>
</details>
<details id="known-issue-issue-41355">
<summary class="title">The memory usage of Beats based integrations is not correctly limited by the number of events actively in the memory queue, but rather the maximum size of the memory queue regardless of usage.</summary>
<div class="content">
<p><span class="strong strong"><strong>Details</strong></span></p>
<p>In 8.15, events in the memory queue are not freed when they are acknowledged (as intended), but only when they are overwritten by later events in the queue buffer. This means for example if a configuration has a queue size of 5000, but the input data is low-volume and only 100 events are active at once, then the queue will gradually store more events until reaching 5000 in memory at once, then start replacing those with new events.</p>
<p>See Beats issue <a href="https://github.com/elastic/beats/issues/40705" class="ulink" target="_top">#40705</a>.</p>
<p><span class="strong strong"><strong>Impact</strong></span><br></p>
<p>Memory usage may be higher than in previous releases depending on the throughput of Elastic Agent. A fix is planned for 8.15.4.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The worst memory increase is for low-throughput configs with large queues.
</li>
<li class="listitem">
For users whose queues were already sized proportionate to their throughput, memory use is increased but only marginally.
</li>
<li class="listitem">
Affected users can mitigate the higher memory usage by lowering their queue size.
</li>
</ul>
</div>
</div>
</details>
<div class="position-relative"><h4><a id="new-features-8.15.0"></a>New features</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.16/docs/en/ingest-management/release-notes/release-notes-8.15.asciidoc">edit</a></div>
<p>The 8.15.0 release Added the following new and notable features.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet Server
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When Fleet Server runs in <code class="literal">elastic-agent</code> mode, it&#8217;s now able to use the enrollment configuration options in <code class="literal">output.elasticsearch.bootstrap</code> from its policy, instead of overwriting the matching keys in <code class="literal">output.elasticsearch</code>. <a href="https://github.com/elastic/fleet-server/pull/3506" class="ulink" target="_top">#3506</a> <a href="https://github.com/elastic/fleet-server/issues/3464" class="ulink" target="_top">#3464</a>
</li>
<li class="listitem">
As part of making Fleet space aware, Fleet Server now adds a <code class="literal">namespaces</code> property to created <code class="literal">.fleet-*</code> documents. <a href="https://github.com/elastic/fleet-server/pull/3535" class="ulink" target="_top">#3535</a> <a href="https://github.com/elastic/fleet-server/issues/3505" class="ulink" target="_top">#3505</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Enable Elastic Agent to monitor and report usage metrics for Elastic Endpoint. <a href="https://github.com/elastic/elastic-agent/pull/4789" class="ulink" target="_top">#4789</a> <a href="https://github.com/elastic/elastic-agent/issues/4083" class="ulink" target="_top">#4083</a>
</li>
<li class="listitem">
Add the AWS Asset Inventory input to Cloudbeat. <a href="https://github.com/elastic/elastic-agent/pull/4804" class="ulink" target="_top">#4804</a>
</li>
<li class="listitem">
Unhide the <code class="literal">--unprivileged</code> option for the <code class="literal">elastic-agent install</code> command and mark the usage of the flag as being in a <code class="literal">beta</code> technical preview state. <a href="https://github.com/elastic/elastic-agent/pull/4914" class="ulink" target="_top">#4914</a>
</li>
<li class="listitem">
To ensure that Elastic Agent starts correctly when run in a container, ensure that the <code class="literal">statePath</code> set by the container command generates a Unix socket path that is smaller than 108 characters. <a href="https://github.com/elastic/elastic-agent/pull/4909" class="ulink" target="_top">#4909</a>
</li>
<li class="listitem">
Enable Elastic Agent to receive an event logger configuration through Fleet. <a href="https://github.com/elastic/elastic-agent/pull/4932" class="ulink" target="_top">#4932</a> <a href="https://github.com/elastic/elastic-agent/issues/4874" class="ulink" target="_top">#4874</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="position-relative"><h4><a id="enhancements-8.15.0"></a>Enhancements</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.16/docs/en/ingest-management/release-notes/release-notes-8.15.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use API key for standalone agent onboarding. (<a href="https://github.com/elastic/kibana/pull/187133" class="ulink" target="_top">#187133</a>)
</li>
<li class="listitem">
Make Fleet &amp; Integrations layouts full width. (<a href="https://github.com/elastic/kibana/pull/186056" class="ulink" target="_top">#186056</a>)
</li>
<li class="listitem">
Add support for setting <code class="literal">add_fields</code> processors on all agents under an agent policy. (<a href="https://github.com/elastic/kibana/pull/184693" class="ulink" target="_top">#184693</a>)
</li>
<li class="listitem">
Add force flag to delete <code class="literal">agent_policies</code> API. (<a href="https://github.com/elastic/kibana/pull/184419" class="ulink" target="_top">#184419</a>)
</li>
<li class="listitem">
Surface option to delete diagnostics files. (<a href="https://github.com/elastic/kibana/pull/183690" class="ulink" target="_top">#183690</a>)
</li>
<li class="listitem">
Add data tags to agent policy APIs. (<a href="https://github.com/elastic/kibana/pull/183563" class="ulink" target="_top">#183563</a>)
</li>
<li class="listitem">
Allow to reset log level for agents &gt;= 8.15.0. (<a href="https://github.com/elastic/kibana/pull/183434" class="ulink" target="_top">#183434</a>)
</li>
<li class="listitem">
Add support for mappings with <code class="literal">store: true</code>. (<a href="https://github.com/elastic/kibana/pull/183390" class="ulink" target="_top">#183390</a>)
</li>
<li class="listitem">
Add warning if need root integrations trying to be used with unprivileged agents. (<a href="https://github.com/elastic/kibana/pull/183283" class="ulink" target="_top">#183283</a>)
</li>
<li class="listitem">
Add unprivileged vs privileged agent count to Fleet UI. (<a href="https://github.com/elastic/kibana/pull/183077" class="ulink" target="_top">#183077</a>)
</li>
<li class="listitem">
Show all integration assets on detail page. (<a href="https://github.com/elastic/kibana/pull/182180" class="ulink" target="_top">#182180</a>)
</li>
<li class="listitem">
Add overrides to package policies update endpoint. (<a href="https://github.com/elastic/kibana/pull/181453" class="ulink" target="_top">#181453</a>)
</li>
<li class="listitem">
Enable <code class="literal">agent.monitoring.http</code> settings on agent policy UI. (<a href="https://github.com/elastic/kibana/pull/180922" class="ulink" target="_top">#180922</a>)
</li>
<li class="listitem">
Share Modal redesign, clean up, and tests. (<a href="https://github.com/elastic/kibana/pull/180406" class="ulink" target="_top">#180406</a>)
</li>
<li class="listitem">
UI for the custom integration creation with AI. (<a href="https://github.com/elastic/kibana/pull/186304" class="ulink" target="_top">#186304</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Fleet Server
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Elastic Agent diagnostic bundles now provide additional TLS information for Fleet Server. <a href="https://github.com/elastic/fleet-server/pull/3587" class="ulink" target="_top">#3587</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add commands to switch between Elastic Agent <code class="literal">unprivileged</code> and <code class="literal">privileged</code> modes. <a href="https://github.com/elastic/elastic-agent/pull/4621" class="ulink" target="_top">#4621</a> <a href="https://github.com/elastic/elastic-agent/issues/2790" class="ulink" target="_top">#2790</a>
</li>
<li class="listitem">
Implement reading and applying TLS configuration for a Fleet client using the CA, certificate, and key included in a Fleet policy. <a href="https://github.com/elastic/elastic-agent/pull/4770" class="ulink" target="_top">#4770</a> <a href="https://github.com/elastic/elastic-agent/issues/2247" class="ulink" target="_top">#2247</a> <a href="https://github.com/elastic/elastic-agent/issues/2248" class="ulink" target="_top">#2248</a>
</li>
<li class="listitem">
Add Filebeat benchmark input to Elastic Agent. <a href="https://github.com/elastic/elastic-agent/issues/4849" class="ulink" target="_top">#4849</a>
</li>
<li class="listitem">
Add a <code class="literal">conn</code> param and a <code class="literal">conn-skip</code> flag to the Elastic Agent diagnostics command. <a href="https://github.com/elastic/elastic-agent/pull/4946" class="ulink" target="_top">#4946</a> <a href="https://github.com/elastic/elastic-agent/issues/4880" class="ulink" target="_top">#4880</a>
</li>
<li class="listitem">
Add the ability for a variable to not be expanded and replaced in Elastic Agent inputs. <a href="https://github.com/elastic/elastic-agent/pull/5035" class="ulink" target="_top">#5035</a> <a href="https://github.com/elastic/elastic-agent/issues/2177" class="ulink" target="_top">#2177</a>
</li>
<li class="listitem">
Inject the <code class="literal">proxy_url</code> value into {endpoint}'s Elasticsearch output configuration, and {endpoint} or {apm}'s Fleet configuration if the attribute is missing and either the <code class="literal">HTTPS_PROXY</code> or <code class="literal">HTTP_PROXY</code> environment variable is set. <a href="https://github.com/elastic/elastic-agent/pull/5044" class="ulink" target="_top">#5044</a> <a href="https://github.com/elastic/elastic-agent/issues/2602" class="ulink" target="_top">#2602</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="position-relative"><h4><a id="bug-fixes-8.15.0"></a>Bug fixes</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/ingest-docs/edit/8.16/docs/en/ingest-management/release-notes/release-notes-8.15.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Fleet
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix navigating back to Agent policy integration list. (<a href="https://github.com/elastic/kibana/pull/189165" class="ulink" target="_top">#189165</a>)
</li>
<li class="listitem">
Fix copy agent policy, missed bump revision. (<a href="https://github.com/elastic/kibana/pull/188935" class="ulink" target="_top">#188935</a>)
</li>
<li class="listitem">
Force field <code class="literal">enabled=false</code> on inputs that have all their streams disabled. (<a href="https://github.com/elastic/kibana/pull/188919" class="ulink" target="_top">#188919</a>)
</li>
<li class="listitem">
Fill in empty values for <code class="literal">constant_keyword</code> fields from existing mappings. (<a href="https://github.com/elastic/kibana/pull/188145" class="ulink" target="_top">#188145</a>)
</li>
<li class="listitem">
Enrollment token table may show an empty last page. (<a href="https://github.com/elastic/kibana/pull/188049" class="ulink" target="_top">#188049</a>)
</li>
<li class="listitem">
Separate <code class="literal">showInactive</code> from unenrolled status filter. (<a href="https://github.com/elastic/kibana/pull/187960" class="ulink" target="_top">#187960</a>)
</li>
<li class="listitem">
Missing policy filter in Fleet Server check to enable secrets. (<a href="https://github.com/elastic/kibana/pull/187935" class="ulink" target="_top">#187935</a>)
</li>
<li class="listitem">
Allow preconfigured agent policy only with name and ID. (<a href="https://github.com/elastic/kibana/pull/187542" class="ulink" target="_top">#187542</a>)
</li>
<li class="listitem">
Show warning callout in configs tab when an error occurs. (<a href="https://github.com/elastic/kibana/pull/187487" class="ulink" target="_top">#187487</a>)
</li>
<li class="listitem">
Enable rollover in custom integrations install when getting <code class="literal">mapper_exception</code> error. (<a href="https://github.com/elastic/kibana/pull/186991" class="ulink" target="_top">#186991</a>)
</li>
<li class="listitem">
Add concurrency limit to EPM bulk install API and fix duplicate installations. (<a href="https://github.com/elastic/kibana/pull/185900" class="ulink" target="_top">#185900</a>)
</li>
<li class="listitem">
Include inactive agents in agent policy agent count. (<a href="https://github.com/elastic/kibana/pull/184517" class="ulink" target="_top">#184517</a>)
</li>
<li class="listitem">
Fix KQL filtering. (<a href="https://github.com/elastic/kibana/pull/183757" class="ulink" target="_top">#183757</a>)
</li>
<li class="listitem">
Prevent concurrent runs of Fleet setup. (<a href="https://github.com/elastic/kibana/pull/183636" class="ulink" target="_top">#183636</a>)
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Fleet Server
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Support receiving the download rate sent by Elastic Agent in string format. <a href="https://github.com/elastic/fleet-server/pull/3677" class="ulink" target="_top">#3677</a> <a href="https://github.com/elastic/fleet-server/issues/3446" class="ulink" target="_top">#3446</a>
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Elastic Agent
</span>
</dt>
<dd>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
When Elastic Agent starts, wait for Watcher to start before releasing resources associated with it. <a href="https://github.com/elastic/elastic-agent/pull/4834" class="ulink" target="_top">#4834</a> <a href="https://github.com/elastic/elastic-agent/issues/2190" class="ulink" target="_top">#2190</a>
</li>
<li class="listitem">
For the Kubernetes provider, fix the namespace filter on watchers started by a pod and service eventer. <a href="https://github.com/elastic/elastic-agent/pull/4975" class="ulink" target="_top">#4975</a>
</li>
<li class="listitem">
Adjust the Elastic Agent <code class="literal">container</code> subcommand to write the <code class="literal">container-paths.yml</code> configuration into the <code class="literal">STATE_PATH</code> on startup. <a href="https://github.com/elastic/elastic-agent/pull/4995" class="ulink" target="_top">#4995</a>
</li>
<li class="listitem">
Apply setting capabilities to the correct binary. <a href="https://github.com/elastic/elastic-agent/pull/5070" class="ulink" target="_top">#5070</a>
</li>
<li class="listitem">
Reduce Elastic Agent image size by setting capabilities in the builder Docker image instead of the final image. <a href="https://github.com/elastic/elastic-agent/pull/5070" class="ulink" target="_top">#5073</a>
</li>
<li class="listitem">
Fix an issue where installation can fail on Windows systems in the case that the user doesn&#8217;t have a home directory. <a href="https://github.com/elastic/elastic-agent/pull/5118" class="ulink" target="_top">#5118</a> <a href="https://github.com/elastic/elastic-agent/issues/5019" class="ulink" target="_top">#5019</a>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="release-notes-8.15.1.html">« Fleet and Elastic Agent 8.15.1</a>
</span>
<span class="next">
<a href="install-fleet-managed-agent.html">Appendix A: Install a Fleet-managed Elastic Agent »</a>
</span>
</div>
</body>
</html>
