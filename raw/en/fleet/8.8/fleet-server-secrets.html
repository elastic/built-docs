<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fleet Server Secrets | Fleet and Elastic Agent Guide [8.8] | Elastic</title>
<meta class="elastic" name="content" content="Fleet Server Secrets | Fleet and Elastic Agent Guide [8.8]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.8]"/>
<link rel="up" href="fleet-server.html" title="Set up Fleet Server"/>
<link rel="prev" href="fleet-server-scalability.html" title="Fleet Server scalability"/>
<link rel="next" href="secret-files-guide.html" title="Secret files guide"/>
<meta class="elastic" name="product_version" content="8.8"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.8"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.8"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.8]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="fleet-server.html">Set up Fleet Server</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="fleet-server-scalability.html">« Fleet Server scalability</a>
</span>
<span class="next">
<a href="secret-files-guide.html">Secret files guide »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="fleet-server-secrets"></a>Fleet Server Secrets<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/8.8/docs/en/ingest-management/fleet/fleet-server-secrets.asciidoc">edit</a></h2>
</div></div></div>
<p>Fleet Server configuration can contain secret values.
You may specify these values directly in the configuration or through secret files.
You can use command line arguments to pass the values or file paths when you are running under Elastic Agent, or you can use environment variables if Elastic Agent is running in a container.</p>
<p>For examples of how to deploy secret files, refer to our <a class="xref" href="secret-files-guide.html" title="Secret files guide">Secret files guide</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Stand-alone Fleet Server is under active development.</p>
</div>
</div>
<h4><a id="_secret_values"></a>Secret values<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/8.8/docs/en/ingest-management/fleet/fleet-server-secrets.asciidoc">edit</a></h4>
<p>The following secret values may be used when configuring Fleet Server.</p>
<p>Note that the configuration fragments shown below are specified either in the UI as part of the output specification or as part of the Fleet Server integration settings.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">service_token</code>
</span>
</dt>
<dd>
<p>
The <code class="literal">service_token</code> is used to communicate with Elasticsearch.
</p>
<p>It may be specified in the configuration directly as:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">output.elasticsearch.service_token: my-service-token</pre>
</div>
<p>Or by a file with:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">output.elasticsearch.service_token_path: /path/to/token-file</pre>
</div>
<p>When you are running Fleet Server under Elastic Agent, you can specify it with either the <code class="literal">--fleet-server-service-token</code> or the <code class="literal">--fleet-server-service-token-path</code> flag.
See <a class="xref" href="elastic-agent-cmd-options.html" title="Elastic Agent command reference">Elastic Agent command reference</a> for more details.</p>
<p>If you are <a class="xref" href="elastic-agent-container.html" title="Run Elastic Agent in a container">running Fleet Server under Elastic Agent in a container</a>, you can use the environment variables <code class="literal">FLEET_SERVER_SERVICE_TOKEN</code> or <code class="literal">FLEET_SERVER_SERVICE_TOKEN_PATH</code>.</p>
</dd>
<dt>
<span class="term">
TLS private key
</span>
</dt>
<dd>
<p>
Use the TLS private key to encrypt communications between Fleet Server and Elastic Agent.
See <a class="xref" href="secure-connections.html" title="Configure SSL/TLS for self-managed Fleet Servers">Configure SSL/TLS for self-managed Fleet Servers</a> for more details.
</p>
<p>Although it is not recommended, you may specify the private key directly in the configuration as:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: fleet-server
    ssl.key: |
      ----BEGIN CERTIFICATE----
      ....
      ----END CERTIFICATE----</pre>
</div>
<p>Alternatively, you can provide the path to the private key with the same attribute:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: fleet-server
    ssl.key: /path/to/cert.key</pre>
</div>
<p>When you are running Fleet Server under Elastic Agent, you can provide the private key path using with the <code class="literal">--fleet-server-cert-key</code> flag.
See <a class="xref" href="elastic-agent-cmd-options.html" title="Elastic Agent command reference">Elastic Agent command reference</a> for more details.</p>
<p>If you are <a class="xref" href="elastic-agent-container.html" title="Run Elastic Agent in a container">running Fleet Server under Elastic Agent in a container</a>, you can use the environment variable <code class="literal">FLEET_SERVER_CERT_KEY</code> to specify the private key path.</p>
</dd>
<dt>
<span class="term">
TLS private key passphrase
</span>
</dt>
<dd>
<p>
The private key passphrase is used to decrypt an encrypted private key file.
</p>
<p>You can specify the passphrase as a secret file in the configuration with:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: fleet-server
    ssl.key_passphrase_path: /path/to/passphrase</pre>
</div>
<p>When you are running Fleet Server under Elastic Agent, you can provide the passphrase path using the <code class="literal">--fleet-server-cert-key-passphrase-path</code> flag.
See <a class="xref" href="elastic-agent-cmd-options.html" title="Elastic Agent command reference">Elastic Agent command reference</a> for more details.</p>
<p>If you are <a class="xref" href="elastic-agent-container.html" title="Run Elastic Agent in a container">running Fleet Server under Elastic Agent in a container</a>, you can use the environment variable <code class="literal">FLEET_SERVER_CERT_KEY_PASSPHRASE</code> to specify the file path.</p>
</dd>
<dt>
<span class="term">
APM API Key
</span>
</dt>
<dd>
<p>
The APM API Key may be used to gather APM data from Fleet Server.
</p>
<p>You can specify it directly in the instrumentation segment of the configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: fleet-server
    instrumentation.api_key: my-apm-api-key</pre>
</div>
<p>Or by a file with:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: fleet-server
    instrumentation.api_key_file: /path/to/apmAPIKey</pre>
</div>
<p>You may specify the API key by value using the environment variable <code class="literal">ELASTIC_APM_API_KEY</code>.</p>
</dd>
<dt>
<span class="term">
APM secret token
</span>
</dt>
<dd>
<p>
The APM secret token may be used to gather APM data from Fleet Server.
</p>
<p>You can specify the secret token directly in the instrumentation segment of the configuration:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: fleet-server
    instrumentation.secret_token: my-apm-secret-token</pre>
</div>
<p>Or by a file with:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: fleet-server
    instrumentation.secret_token_file: /path/to/apmSecretToken</pre>
</div>
<p>You may also specify the token by value using the environment variable <code class="literal">ELASTIC_APM_SECRET_TOKEN</code>.</p>
</dd>
</dl>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="fleet-server-scalability.html">« Fleet Server scalability</a>
</span>
<span class="next">
<a href="secret-files-guide.html">Secret files guide »</a>
</span>
</div>
</div>
</body>
</html>
