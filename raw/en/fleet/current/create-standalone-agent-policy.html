<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Create a standalone Elastic Agent policy | Fleet and Elastic Agent Guide [8.6] | Elastic</title>
<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.6]"/>
<link rel="up" href="elastic-agent-configuration.html" title="Configure standalone Elastic Agents"/>
<link rel="prev" href="elastic-agent-configuration.html" title="Configure standalone Elastic Agents"/>
<link rel="next" href="grant-access-to-elasticsearch.html" title="Grant standalone Elastic Agents access to Elasticsearch"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.6"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.6"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.6]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elastic-agent-configuration.html">Configure standalone Elastic Agents</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="elastic-agent-configuration.html">« Configure standalone Elastic Agents</a>
</span>
<span class="next">
<a href="grant-access-to-elasticsearch.html">Grant standalone Elastic Agents access to Elasticsearch »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="create-standalone-agent-policy"></a>Create a standalone Elastic Agent policy<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.6/docs/en/ingest-management/elastic-agent/configuration/create-standalone-agent-policy.asciidoc">edit</a></h2>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Running Elastic Agent in standalone mode is an advanced use case. The
documentation is incomplete and not yet mature. When possible, we recommend
using Fleet-managed agents instead of standalone mode.</p>
</div>
</div>
<p>To get started quickly, use Kibana to add integrations to an agent policy, then
download the policy to use as a starting point for your standalone Elastic Agent
policy. This approach saves time, is less error prone, and populates the
policy with a lot of details that are tedious to add manually. Also,
adding integrations in Kibana loads required assets, such as index templates,
and ingest pipelines, before you start your Elastic Agents.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you&#8217;re a Fleet user and already have an agent policy you want to
use in standalone mode, go to <span class="strong strong"><strong>Fleet &gt; Agents</strong></span> and click <span class="strong strong"><strong>Add agent</strong></span>. Follow
the steps under <span class="strong strong"><strong>Run standalone</strong></span> to download the policy file.</p>
</div>
</div>
<p>You don&#8217;t need Fleet to perform the following steps, but on self-managed
clusters, API keys must be enabled in the Elasticsearch configuration (set
<code class="literal">xpack.security.authc.api_key.enabled: true</code>).</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From the main menu in Kibana, click <span class="strong strong"><strong>Add integrations</strong></span>, and search for the
Elastic Agent integration you want to use. Read the description to make sure the
integration works with Elastic Agent.
</li>
<li class="listitem">
<p>Click the integration to see more details about it, then click
<span class="strong strong"><strong>Add &lt;Integration&gt;</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/add-integration-standalone.png" alt="Add Nginx integration screen with agent policy selected">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you&#8217;re adding your first integration and no Elastic Agents are installed,
Kibana may display a page that walks you through configuring the integration and
installing Elastic Agent. If you see this page, click <span class="strong strong"><strong>Install Elastic Agent</strong></span>, then click the
<span class="strong strong"><strong>standalone mode</strong></span> link. Follow the in-product instructions instead of the
steps described here.</p>
</div>
</div>
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Configure integration</strong></span>, enter a name and description for the integration.
</li>
<li class="listitem">
Click the down arrow next to enabled streams and make sure the settings are
correct for your host.
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Apply to agent policy</strong></span>, select an existing policy, or click
<span class="strong strong"><strong>Create agent policy</strong></span> and create a new one.
</li>
<li class="listitem">
<p>When you’re done, save and continue.</p>
<p>A popup window gives you the option to add Elastic Agent to your hosts.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/add-agent-to-hosts.png" alt="Popup window showing the option to add Elastic Agent to your hosts">
</div>
</div>
</li>
<li class="listitem">
(Optional) To add more integrations to the agent policy, click <span class="strong strong"><strong>Add Elastic Agent
later</strong></span> and go back to the <span class="strong strong"><strong>Integrations</strong></span> page. Repeat the previous steps for each
integration.
</li>
<li class="listitem">
When you&#8217;re done adding integrations, in the popup window, click
<span class="strong strong"><strong>Add Elastic Agent to your hosts</strong></span> to open the <span class="strong strong"><strong>Add agent</strong></span> flyout.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Run standalone</strong></span> and follow the in-product instructions to download
Elastic Agent (if you haven&#8217;t already).
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Download Policy</strong></span> to download the policy file.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/download-agent-policy.png" alt="Add data screen with option to download the default agent policy">
</div>
</div>
</li>
</ol>
</div>
<p>The downloaded policy already contains a default Elasticsearch address and port for your
setup. You may need to change them if you use a proxy or load balancer. Modify
the policy, as required, making sure that you provide credentials for connecting
to Elasticsearch</p>
<p>If you need to add integrations to the policy <em>after</em> deploying
it, you&#8217;ll need to run through these steps again and re-deploy the
updated policy to the host where Elastic Agent is running.</p>
<p>For detailed information about starting the agent, including the permissions
needed for the Elasticsearch user, refer to <a class="xref" href="install-standalone-elastic-agent.html" title="Install standalone Elastic Agents (advanced users)">Install standalone Elastic Agents (advanced users)</a>.</p>
<h4><a id="update-standalone-policies"></a>Upgrade standalone agent policies after upgrading an integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.6/docs/en/ingest-management/elastic-agent/configuration/create-standalone-agent-policy.asciidoc">edit</a></h4>
<p>Because standalone agents are not managed by Fleet, they are unable to upgrade
to new integration package versions automatically. When you upgrade an
integration in Kibana (or it gets upgraded automatically), you&#8217;ll need to update
the standalone policy to use new features and capabilities.</p>
<p>You&#8217;ll also need to update the standalone policy if you want to add new
integrations.</p>
<p>To update your standalone policy, use the same steps you used to create and
download the original policy file:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Follow the steps under <a class="xref" href="create-standalone-agent-policy.html" title="Create a standalone Elastic Agent policy">Create a standalone Elastic Agent policy</a> to create and
download a new policy, then compare the new policy file to the old one.
</li>
<li class="listitem">
Either use the new policy and apply your customizations to it, or
update your old policy to include changes, such as field changes, added
by the upgrade.
</li>
</ol>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Make sure you update the standalone agent policy in the directory
where Elastic Agent is running, not the directory where you downloaded the
installation package. Refer to <a class="xref" href="installation-layout.html" title="Installation layout">Installation layout</a> for the location of
installed Elastic Agent files.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="elastic-agent-configuration.html">« Configure standalone Elastic Agents</a>
</span>
<span class="next">
<a href="grant-access-to-elasticsearch.html">Grant standalone Elastic Agents access to Elasticsearch »</a>
</span>
</div>
</div>
</body>
</html>
