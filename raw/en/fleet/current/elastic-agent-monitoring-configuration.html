<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configure monitoring for standalone Elastic Agents | Fleet and Elastic Agent Guide [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Configure monitoring for standalone Elastic Agents | Fleet and Elastic Agent Guide [8.15]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [8.15]"/>
<link rel="up" href="elastic-agent-configuration.html" title="Configure standalone Elastic Agents"/>
<link rel="prev" href="hints-annotations-autodiscovery.html" title="Hints annotations based autodiscover"/>
<link rel="next" href="elastic-agent-reference-yaml.html" title="Reference YAML"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/8.15"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="hints-annotations-autodiscovery.html">« Hints annotations based autodiscover</a>
</span>
<span class="next">
<a href="elastic-agent-reference-yaml.html">Reference YAML »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elastic-agent-configuration.html">Configure standalone Elastic Agents</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Configure monitoring for standalone Elastic Agents</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/8.15/docs/en/ingest-management/elastic-agent/configuration/elastic-agent-monitoring.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="elastic-agent-monitoring-configuration"></a>Configure monitoring for standalone Elastic Agents<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/8.15/docs/en/ingest-management/elastic-agent/configuration/elastic-agent-monitoring.asciidoc">edit</a></h2>
</div></div></div>

<p>Elastic Agent monitors Beats by default. To turn off or change monitoring
settings, set options under <code class="literal">agent.monitoring</code> in the <code class="literal">elastic-agent.yml</code> file.</p>
<p>This example configures Elastic Agent monitoring:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">agent.monitoring:
  # enabled turns on monitoring of running processes
  enabled: true
  # enables log monitoring
  logs: true
  # enables metrics monitoring
  metrics: true
  # exposes /debug/pprof/ endpoints for Elastic Agent and Beats
  # enable these endpoints if the monitoring endpoint is set to localhost
  pprof.enabled: false
  # specifies output to be used
  use_output: monitoring
  http:
    # exposes a /buffer endpoint that holds a history of recent metrics
    buffer.enabled: false</pre>
</div>
<p>To turn off monitoring, set <code class="literal">agent.monitoring.enabled</code> to <code class="literal">false</code>. When set to
<code class="literal">false</code>, Beats monitoring is turned off, and all other options in this section
are ignored.</p>
<p>To enable monitoring, set <code class="literal">agent.monitoring.enabled</code> to <code class="literal">true</code>. Also set the
<code class="literal">logs</code> and <code class="literal">metrics</code> settings to control whether logs, metrics, or both are
collected. If neither setting is specified, monitoring is turned off. Set
<code class="literal">use_output</code> to specify the output to which monitoring events are sent.</p>
<p>You can also add the setting <code class="literal">agent.monitoring.http.enabled: true</code> to expose a <code class="literal">/liveness</code> endpoint.
By default, the endpoint returns a <code class="literal">200</code> OK status as long as Elastic Agent&#8217;s internal main loop is responsive and can process configuration changes.
It can be configured to also monitor the component states and return an error if anything is degraded or has failed.</p>
<p>The <code class="literal">agent.monitoring.pprof.enabled</code> option controls whether the Elastic Agent and Beats expose the
<code class="literal">/debug/pprof/</code> endpoints with the monitoring endpoints. It is set to <code class="literal">false</code>
by default. Data produced by these endpoints can be useful for debugging but present a
security risk. It is recommended that this option remains <code class="literal">false</code> if the monitoring endpoint
is accessible over a network.</p>
<p>The <code class="literal">agent.monitoring.http.buffer.enabled</code> option controls whether the Elastic Agent and Beats
collect metrics into an in-memory buffer and expose these through a <code class="literal">/buffer</code> endpoint.
It is set to <code class="literal">false</code> by default. This data can be useful for debugging or if the Elastic Agent
has issues communicating with Elasticsearch. Enabling this option may slightly increase process
memory usage.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="hints-annotations-autodiscovery.html">« Hints annotations based autodiscover</a>
</span>
<span class="next">
<a href="elastic-agent-reference-yaml.html">Reference YAML »</a>
</span>
</div>
</body>
</html>
