<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Install Elastic Agents | Fleet and Elastic Agent Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Install Elastic Agents | Fleet and Elastic Agent Guide [master]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [master]"/>
<link rel="up" href="index.html" title="Fleet and Elastic Agent Guide [master]"/>
<link rel="prev" href="fleet-server-monitoring.html" title="Monitor a self-managed Fleet Server"/>
<link rel="next" href="install-fleet-managed-elastic-agent.html" title="Install Fleet-managed Elastic Agents"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/master"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [master]</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="fleet-server-monitoring.html">« Monitor a self-managed Fleet Server</a>
</span>
<span class="next">
<a href="install-fleet-managed-elastic-agent.html">Install Fleet-managed Elastic Agents »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="elastic-agent-installation"></a>Install Elastic Agents<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/elastic-agent/install-elastic-agent.asciidoc">edit</a></h1>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can install only a single Elastic Agent per host. Due to the fact that the Elastic Agent may read data sources that
are only accessible by a superuser, Elastic Agent will therefore also need to be executed with superuser permissions.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You might need to log in as a root user (or Administrator on Windows) to
run the commands described here. After the Elastic Agent service is installed and running,
make sure you run these commands without prepending them with <code class="literal">./</code> to avoid
invoking the wrong binary.</p>
</div>
</div>
<p>You have a few options for installing and managing an Elastic Agent:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><span class="strong strong"><strong>Install a Fleet-managed Elastic Agent (recommended)</strong></span></p>
<p>With this approach, you install Elastic Agent and use Fleet in Kibana to define,
configure, and manage your agents in a central location.</p>
<p>We recommend using Fleet management because it makes the management and
upgrade of your agents considerably easier.</p>
<p>Refer to <a class="xref" href="install-fleet-managed-elastic-agent.html" title="Install Fleet-managed Elastic Agents">Install Fleet-managed Elastic Agents</a>.</p>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Install Elastic Agent in standalone mode (advanced users)</strong></span></p>
<p>With this approach, you install Elastic Agent and manually configure the agent locally
on the system where it’s installed. You are responsible for managing and
upgrading the agents. This approach is reserved for advanced users only.</p>
<p>Refer to <a class="xref" href="install-standalone-elastic-agent.html" title="Install standalone Elastic Agents (advanced users)">Install standalone Elastic Agents (advanced users)</a>.</p>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Install Elastic Agent in a containerized environment</strong></span></p>
<p>You can run Elastic Agent inside of a container&#8201;&#8212;&#8201;either with Fleet Server or
standalone. Docker images for all versions of Elastic Agent are available from the
Elastic Docker registry, and we provide deployment manifests for running on
Kubernetes.</p>
<p>Refer to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="elastic-agent-container.html" title="Run Elastic Agent in a container">Run Elastic Agent in a container</a>
</li>
<li class="listitem">
<p><a class="xref" href="running-on-kubernetes-managed-by-fleet.html" title="Run Elastic Agent on Kubernetes managed by Fleet">Run Elastic Agent on Kubernetes managed by Fleet</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="running-on-gke-managed-by-fleet.html" title="Run Elastic Agent on GKE managed by Fleet">Run Elastic Agent on GKE managed by Fleet</a>
</li>
<li class="listitem">
<a class="xref" href="running-on-eks-managed-by-fleet.html" title="Run Elastic Agent on Amazon EKS managed by Fleet">Run Elastic Agent on Amazon EKS managed by Fleet</a>
</li>
<li class="listitem">
<a class="xref" href="running-on-aks-managed-by-fleet.html" title="Run Elastic Agent on Azure AKS managed by Fleet">Run Elastic Agent on Azure AKS managed by Fleet</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="running-on-kubernetes-standalone.html" title="Run Elastic Agent Standalone on Kubernetes">Run Elastic Agent Standalone on Kubernetes</a>
</li>
<li class="listitem">
<a class="xref" href="scaling-on-kubernetes.html" title="Scaling Elastic Agent on Kubernetes">Scaling Elastic Agent on Kubernetes</a>
</li>
<li class="listitem">
<a href="/guide/en/cloud-on-k8s/current/k8s-elastic-agent.html" class="ulink" target="_top">Run Elastic Agent on ECK</a>&#8201;&#8212;&#8201;for Elastic Cloud on Kubernetes users
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Restrictions in Serverless</h3>
<p>If you are using Elastic Agent with <a href="https://docs.elastic.co/serverless" class="ulink" target="_top">Elastic Cloud Serverless</a>, note these differences from use with Elasticsearch Service and self-managed Elasticsearch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The number of Elastic Agents that may be connected to an Elastic Cloud Serverless project is limited to 25 thousand.
</li>
<li class="listitem">
The minimum supported version of Elastic Agent supported for use with Elastic Cloud Serverless is 8.11.0.
</li>
</ul>
</div>
</div>
</div>
<h3><a id="_minimum_requirements"></a>Minimum Requirements<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/elastic-agent/install-elastic-agent.asciidoc">edit</a></h3>
<p>Minimum requirements have been determined by running the Elastic Agent on a GCP <code class="literal">e2-micro</code> instance (2vCPU/1GB).
The Elastic Agent used the default policy, running the system integration and self-monitoring.
During upgrades, double the disk space is required to store the new Elastic Agent binary. After the upgrade completes, the original Elastic Agent is removed from disk to free up the space.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>CPU</strong></span></p></td>
<td align="left" valign="top"><p>Under 2% total, including all monitoring processes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Disk</strong></span></p></td>
<td align="left" valign="top"><p>1.7 GB</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>RSS Mem Size</strong></span></p></td>
<td align="left" valign="top"><p>400 MB</p></td>
</tr>
</tbody>
</table>
</div>
<p>Adding integrations will increase the memory used by the agent and its processes.</p>
<h4><a id="_limiting_cpu_usage"></a>Limiting CPU usage<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/elastic-agent/install-elastic-agent.asciidoc">edit</a></h4>
<p>If you need to limit the amount of CPU consumption you can use the <code class="literal">agent.limits.go_max_procs</code> configuration option. This parameter limits the number of operating system threads that can be executing Go code simultaneously in each Go process. The <code class="literal">agent.limits.go_max_procs</code> option accepts an integer value not less than <code class="literal">0</code>, which is the default value that stands for "all available CPUs".</p>
<p>The <code class="literal">agent.limits.go_max_procs</code> limit applies independently to the agent and each underlying Go process that it supervises. For example, if Elastic Agent is configured to supervise two Beats with <code class="literal">agent.limits.go_max_procs: 2</code> in the policy, then the total CPU limit is six, where each of the three processes (one Elastic Agent and two Beats) may execute independently on two CPUs.</p>
<p>This setting is similar to the Beats <a href="/guide/en/beats/filebeat/master/configuration-general-options.html#_max_procs" class="ulink" target="_top"><code class="literal">max_procs</code></a> setting. For more detail, refer to the <a href="https://pkg.go.dev/runtime#GOMAXPROCS" class="ulink" target="_top">GOMAXPROCS</a> function in the Go runtime documentation.</p>
<p>To enable <code class="literal">agent.limits.go_max_procs</code>, run a <a class="xref" href="fleet-api-docs.html" title="Kibana Fleet APIs">Fleet API</a> request from the Kibana <a href="/guide/en/kibana/master/console-kibana.html" class="ulink" target="_top">Dev Tools console</a> to override your current Elastic Agent policy and add the <code class="literal">go_max_procs</code> parameter. For example, to limit Go processes supervised by Elastic Agent to two operating system threads each, run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">PUT kbn:/api/fleet/agent_policies/&lt;policy-id&gt;
{
  "name": "&lt;policy-name&gt;",
  "namespace": "default",
  "overrides": {
    "agent": {
      "limits": {
        "go_max_procs": 2
      }
    }
  }
}</pre>
</div>









</div>
<div class="navfooter">
<span class="prev">
<a href="fleet-server-monitoring.html">« Monitor a self-managed Fleet Server</a>
</span>
<span class="next">
<a href="install-fleet-managed-elastic-agent.html">Install Fleet-managed Elastic Agents »</a>
</span>
</div>
</div>
</body>
</html>
