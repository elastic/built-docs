<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Monitor a self-managed Fleet Server | Fleet and Elastic Agent Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Monitor a self-managed Fleet Server | Fleet and Elastic Agent Guide [master]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [master]"/>
<link rel="up" href="fleet-deployment-models.html" title="Deployment models"/>
<link rel="prev" href="secret-files-guide.html" title="Secret files guide"/>
<link rel="next" href="elastic-agent-installation.html" title="Install Elastic Agents"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/master"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="secret-files-guide.html">« Secret files guide</a>
</span>
<span class="next">
<a href="elastic-agent-installation.html">Install Elastic Agents »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="fleet-deployment-models.html">Deployment models</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Monitor a self-managed Fleet Server</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/fleet/fleet-server-monitoring.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="fleet-server-monitoring"></a>Monitor a self-managed Fleet Server<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/fleet/fleet-server-monitoring.asciidoc">edit</a></h2>
</div></div></div>
<p>For self-managed Fleet Servers, monitoring is key because the operation of the
Fleet Server is paramount to the health of the deployed agents and the
services they offer. When Fleet Server is not operating correctly, it may lead
to delayed check-ins, status information, and updates for the agents it manages.
The monitoring data will tell you when to add capacity for Fleet Server, and
provide error logs and information to troubleshoot other issues.</p>
<p>For self-managed clusters, monitoring is on by default when you create a
new agent policy or use the existing Default Fleet Server agent policy.</p>
<p>To monitor Fleet Server:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Fleet, open the <span class="strong strong"><strong>Agent policies</strong></span> tab.
</li>
<li class="listitem">
Click the Fleet Server policy name to edit the policy.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Settings</strong></span> tab and verify that <span class="strong strong"><strong>Collect agent logs</strong></span> and
<span class="strong strong"><strong>Collect agent metrics</strong></span> are selected.
</li>
<li class="listitem">
<p>Next, set the <span class="strong strong"><strong>Default namespace</strong></span> to something like <code class="literal">fleetserver</code>.</p>
<p>Setting the default namespace lets you segregate Fleet Server monitoring data
from other collected data. This makes it easier to search and visualize the
monitoring data.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/fleet-server-agent-policy-page.png" alt="Fleet Server agent policy">
</div>
</div>
</li>
<li class="listitem">
To confirm your change, click <span class="strong strong"><strong>Save changes</strong></span>.
</li>
</ol>
</div>
<p>To see the metrics collected for the agent running Fleet Server, go to
<span class="strong strong"><strong>Analytics &gt; Discover</strong></span>.</p>
<p>In the following example, <code class="literal">fleetserver</code> was configured as the namespace, and
you can see the metrics collected:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/datastream-namespace.png" alt="Data stream">
</div>
</div>
<p>Go to <span class="strong strong"><strong>Analytics &gt; Dashboard</strong></span> and search for the predefined dashboard called
<span class="strong strong"><strong>[Elastic Agent] Agent metrics</strong></span>. Choose this dashboard, and run a query based
on the <code class="literal">fleetserver</code> namespace.</p>
<p>The following dashboard shows data for the query <code class="literal">data_stream.namespace:
"fleetserver"</code>. In this example, you can observe CPU and memory usage as a
metric and then resize the Fleet Server, if necessary.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/dashboard-datastream01.png" alt="Dashboard Data stream">
</div>
</div>
<p>Note that as an alternative to running the query, you can hide all metrics
except <code class="literal">fleet_server</code> in the dashboard.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="secret-files-guide.html">« Secret files guide</a>
</span>
<span class="next">
<a href="elastic-agent-installation.html">Install Elastic Agents »</a>
</span>
</div>
</body>
</html>
