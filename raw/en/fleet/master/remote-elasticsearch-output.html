<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Remote Elasticsearch output | Fleet and Elastic Agent Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Remote Elasticsearch output | Fleet and Elastic Agent Guide [master]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [master]"/>
<link rel="up" href="fleet-settings.html" title="Fleet settings"/>
<link rel="prev" href="kafka-output-settings.html" title="Kafka output settings"/>
<link rel="next" href="fleet-settings-changing-outputs.html" title="Considerations when changing outputs"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/master"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="kafka-output-settings.html">« Kafka output settings</a>
</span>
<span class="next">
<a href="fleet-settings-changing-outputs.html">Considerations when changing outputs »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="manage-agents-in-fleet.html">Centrally manage Elastic Agents in Fleet</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="fleet-settings.html">Fleet settings</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Remote Elasticsearch output</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/fleet/fleet-settings-remote-elasticsearch.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="remote-elasticsearch-output"></a>Remote Elasticsearch output<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/fleet/fleet-settings-remote-elasticsearch.asciidoc">edit</a></h3>
</div></div></div>
<p>Beginning in version 8.12.0, you can send Elastic Agent data to a remote Elasticsearch cluster. This is especially useful for data that you want to keep separate and independent from the deployment where you use Fleet to manage the agents.</p>
<p>A remote Elasticsearch cluster supports the same <a class="xref" href="es-output-settings.html" title="Elasticsearch output settings">output settings</a> as your main Elasticsearch cluster.</p>
<p>To configure a remote Elasticsearch cluster for your Elastic Agent data:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Fleet, open the <span class="strong strong"><strong>Settings</strong></span> tab.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Outputs</strong></span> section, select <span class="strong strong"><strong>Add output</strong></span>.
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Add new output</strong></span> flyout, provide a name for the output and select <span class="strong strong"><strong>Remote Elasticsearch</strong></span> as the output type.
</li>
<li class="listitem">
<p>In the <span class="strong strong"><strong>Hosts</strong></span> field, add the URL that agents should use to access the remote Elasticsearch cluster.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
To find the remote host address, in the remote cluster open Kibana and go to <span class="strong strong"><strong>Management &#8594; Fleet &#8594; Settings</strong></span>.
</li>
<li class="listitem">
Copy the <span class="strong strong"><strong>Hosts</strong></span> value for the default output.
</li>
<li class="listitem">
Back in your main cluster, paste the value you copied into the output <span class="strong strong"><strong>Hosts</strong></span> field.
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>Create a service token to access the remote cluster.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Below the <span class="strong strong"><strong>Service Token</strong></span> field, copy the API request.
</li>
<li class="listitem">
In the remote cluster, open the Kibana menu and go to <span class="strong strong"><strong>Management &#8594; Dev Tools</strong></span>.
</li>
<li class="listitem">
Run the API request.
</li>
<li class="listitem">
Copy the value for the generated token.
</li>
<li class="listitem">
<p>Back in your main cluster, paste the value you copied into the output <span class="strong strong"><strong>Service Token</strong></span> field.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To prevent unauthorized access the Elasticsearch Service Token is stored as a secret value. While secret storage is recommended, you can choose to override this setting and store the password as plain text in the agent policy definition. Secret storage requires Fleet Server version 8.12 or higher. This setting can also be stored as a secret value or as plain text for preconfigured outputs. See <a href="/guide/en/kibana/master/fleet-settings-kb.html#_preconfiguration_settings_for_advanced_use_cases" class="ulink" target="_top">Preconfiguration settings</a> in the Kibana Guide to learn more.</p>
</div>
</div>
</li>
</ol>
</div>
</li>
<li class="listitem">
Choose whether or not the remote output should be the default for agent integrations or for agent monitoring data. When set, Elastic Agents use this output to send data if no other output is set in the <a class="xref" href="agent-policy.html" title="Elastic Agent policies">agent policy</a>.
</li>
<li class="listitem">
Select which <a class="xref" href="es-output-settings.html#es-output-settings-performance-tuning-settings" title="Performance tuning settings">performance tuning settings</a> you&#8217;d prefer in order to optimize Elastic Agent for throughput, scale, or latency, or leave the default <code class="literal">balanced</code> setting.
</li>
<li class="listitem">
Add any <a class="xref" href="es-output-settings.html#es-output-settings-yaml-config" title="Advanced YAML configuration">advanced YAML configuration settings</a> that you&#8217;d like for the output.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save and apply settings</strong></span>.
</li>
</ol>
</div>
<p>After the output is created, you can update an Elastic Agent policy to use the new remote Elasticsearch cluster:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Fleet, open the <span class="strong strong"><strong>Agent policies</strong></span> tab.
</li>
<li class="listitem">
Click the agent policy to edit it, then click <span class="strong strong"><strong>Settings</strong></span>.
</li>
<li class="listitem">
To send integrations data, set the <span class="strong strong"><strong>Output for integrations</strong></span> option to use the output that you configured in the previous steps.
</li>
<li class="listitem">
To send Elastic Agent monitoring data, set the <span class="strong strong"><strong>Output for agent monitoring</strong></span> option to use the output that you configured in the previous steps.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save changes</strong></span>.
</li>
</ol>
</div>
<p>The remote Elasticsearch cluster is now configured.</p>
<p>As a final step before using the remote Elasticsearch output, you need to make sure that for any integrations that have been <a class="xref" href="add-integration-to-policy.html" title="Add an Elastic Agent integration to a policy">added to your Elastic Agent policy</a>, the integration assets have been installed on the remote Elasticsearch cluster. Refer to <a class="xref" href="install-uninstall-integration-assets.html" title="Install and uninstall Elastic Agent integration assets">Install and uninstall Elastic Agent integration assets</a> for the steps.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="kafka-output-settings.html">« Kafka output settings</a>
</span>
<span class="next">
<a href="fleet-settings-changing-outputs.html">Considerations when changing outputs »</a>
</span>
</div>
</body>
</html>
