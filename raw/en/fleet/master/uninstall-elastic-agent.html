<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Uninstall Elastic Agents from edge hosts | Fleet and Elastic Agent Guide [master] | Elastic</title>
<meta class="elastic" name="content" content="Uninstall Elastic Agents from edge hosts | Fleet and Elastic Agent Guide [master]">

<link rel="home" href="index.html" title="Fleet and Elastic Agent Guide [master]"/>
<link rel="up" href="elastic-agent-installation.html" title="Install Elastic Agents"/>
<link rel="prev" href="epr-proxy-setting.html" title="Set the proxy URL of the Elastic Package Registry"/>
<link rel="next" href="start-stop-elastic-agent.html" title="Start and stop Elastic Agents on edge hosts"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Fleet and Elastic Agent"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/Elastic Agent/master"/>
<meta name="DC.subject" content="Fleet and Elastic Agent"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="epr-proxy-setting.html">« Set the proxy URL of the Elastic Package Registry</a>
</span>
<span class="next">
<a href="start-stop-elastic-agent.html">Start and stop Elastic Agents on edge hosts »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Fleet and Elastic Agent Guide [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elastic-agent-installation.html">Install Elastic Agents</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Uninstall Elastic Agents from edge hosts</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/elastic-agent/uninstall-elastic-agent.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="uninstall-elastic-agent"></a>Uninstall Elastic Agents from edge hosts<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/elastic-agent/uninstall-elastic-agent.asciidoc">edit</a></h2>
</div></div></div>
<h4><a id="_uninstall_on_macos_linux_and_windows"></a>Uninstall on macOS, Linux, and Windows<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/elastic-agent/uninstall-elastic-agent.asciidoc">edit</a></h4>
<p>To uninstall Elastic Agent, run the <code class="literal">uninstall</code> command from the directory where
Elastic Agent is running.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Be sure to run the <code class="literal">uninstall</code> command from the directory where Elastic Agent is running, as shown in the example below, and not from the directory where you previously ran the <code class="literal">install</code> command. Running the command from the wrong directory can leave the agent in an inconsistent state.</p>
</div>
</div>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Uninstall">
    <button role="tab"
            aria-selected="true"
            aria-controls="mac-tab-uninstall"
            id="mac-uninstall">
      macOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-uninstall"
            id="linux-uninstall"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-uninstall"
            id="win-uninstall"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-uninstall"
       aria-labelledby="mac-uninstall">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must run this command as the root user.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo /Library/Elastic/Agent/elastic-agent uninstall</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-uninstall"
       aria-labelledby="linux-uninstall"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You must run this command as the root user.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">sudo /opt/Elastic/Agent/elastic-agent uninstall</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-uninstall"
       aria-labelledby="win-uninstall"
       hidden="">
<p>Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).</p>
<p>From the PowerShell prompt, run:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">C:\"Program Files"\Elastic\Agent\elastic-agent.exe uninstall</pre>
</div>
  </div>
</div>
<p>Follow the prompts to confirm that you want to uninstall Elastic Agent. The command
stops and uninstalls any managed programs, such as Beats and
Elastic Endpoint, before it stops and uninstalls Elastic Agent.</p>
<p>If you run into problems, refer to <a class="xref" href="fleet-troubleshooting.html" title="Troubleshoot common problems">Troubleshoot common problems</a>.</p>
<p>If you are using DEB or RPM, you can use the package manager to remove the
installed package.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>For hosts enrolled in the Elastic Defend integration with Agent tamper protection enabled, you&#8217;ll need to include the uninstall token in the command, using the <code class="literal">--uninstall-token</code> flag. Refer to the <a href="/guide/en/security/master/agent-tamper-protection.html" class="ulink" target="_top">Agent tamper protection docs</a> for more information.</p>
</div>
</div>
<h4><a id="_remove_elastic_agent_files_manually"></a>Remove Elastic Agent files manually<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-management/elastic-agent/uninstall-elastic-agent.asciidoc">edit</a></h4>
<p>You might need to remove Elastic Agent files manually if there&#8217;s a failure during
installation.</p>
<p>To remove Elastic Agent manually from your system:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="unenroll-elastic-agent.html" title="Unenroll Elastic Agents">Unenroll the agent</a> if it&#8217;s managed by Fleet.
</li>
<li class="listitem">
For standalone agents, back up any configuration files you want to preserve.
</li>
<li class="listitem">
<p>On your host, <a class="xref" href="start-stop-elastic-agent.html#stop-elastic-agent-service" title="Stop Elastic Agent">stop the agent</a>. If any Elastic Agent-related
processes are still running, stop them too.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Search for these processes and stop them if they&#8217;re still running:
<code class="literal">filebeat</code>, <code class="literal">metricbeat</code>, <code class="literal">fleet-server</code>, and <code class="literal">elastic-endpoint</code>.</p>
</div>
</div>
</li>
<li class="listitem">
Manually remove the Elastic Agent files from your system. For example, if you&#8217;re
running Elastic Agent on macOS, delete <code class="literal">/Library/Elastic/Agent/*</code>. Not sure where the
files are installed? Refer to <a class="xref" href="installation-layout.html" title="Installation layout">Installation layout</a>.
</li>
<li class="listitem">
<p>If you&#8217;ve configured the Elastic Defend integration, also remove the files
installed for endpoint protection. The directory structure is similar to Elastic Agent,
for example, <code class="literal">/Library/Elastic/Endpoint/*</code>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When you remove the Elastic Defend integration from a macOS host
(10.13, 10.14, or 10.15), the Endpoint System Extension is left on disk
intentionally. If you want to remove the extension, refer to the documentation
for your operating system.</p>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="epr-proxy-setting.html">« Set the proxy URL of the Elastic Package Registry</a>
</span>
<span class="next">
<a href="start-stop-elastic-agent.html">Start and stop Elastic Agents on edge hosts »</a>
</span>
</div>
</body>
</html>
