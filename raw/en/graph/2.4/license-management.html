<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Managing Your License | Elasticsearch Graph [2.4] | Elastic</title>
<meta class="elastic" name="content" content="Managing Your License | Elasticsearch Graph [2.4]">

<link rel="home" href="index.html" title="Elasticsearch Graph [2.4]"/>
<link rel="up" href="index.html" title="Elasticsearch Graph [2.4]"/>
<link rel="prev" href="graph-api-rest.html" title="REST API"/>
<link rel="next" href="graph-limitations.html" title="Limitations"/>
<meta class="elastic" name="product_version" content="2.4"/>
<meta class="elastic" name="product_name" content="Graph"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Legacy/Graph/Reference/2.4"/>
<meta name="DC.subject" content="Graph"/>
<meta name="DC.identifier" content="2.4"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
From version 5.0 onward, Graph is part of X-Pack. For more information, see 
<a href=https://www.elastic.co/guide/en/kibana/current/xpack-graph.html>
    Graphing connections in your data</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="graph-api-rest.html">« REST API</a>
</span>
<span class="next">
<a href="graph-limitations.html">Limitations »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch Graph [2.4]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Managing Your License</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/graph/managing-graph-licenses.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="license-management"></a>Managing Your License</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/graph/managing-graph-licenses.asciidoc">edit</a></div>
</div></div></div>
<p>When you initially install Graph, a 30 day trial license is installed that allows access to all
features. At the end of the trial period, you can <a href="/subscriptions/" class="ulink" target="_top">purchase a subscription</a> to keep using the full functionality of Graph along with Shield, Watcher, and Marvel.</p>
<div class="position-relative"><h3><a id="installing-license"></a>Updating Your License</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/graph/managing-graph-licenses.asciidoc">edit</a></div>
<p>You can update your license at runtime without shutting down your nodes. License updates take
effect immediately. The license is provided as a <em>JSON</em> file that you install with the <code class="literal">license</code>
API.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The endpoint for the license API changed to <code class="literal">_license</code> in Elasticsearch 2.0. If you are still
running Elasticsearch 1.x, use the <code class="literal">_licenses</code> endpoint to update your license. For more information about
managing licenses on 1.x, see the <a href="/guide/en/shield/1.3/license-management.html#installing-license" class="ulink" target="_top">Shield 1.3 Reference</a>.</p>
</div>
</div>
<p>To update your license:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Send a request to the <code class="literal">license</code> API and specify the file that contains your new license:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl -XPUT 'http://&lt;host&gt;:&lt;port&gt;/_license' -d @license.json</pre>
</div>
<p>Where:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">&lt;host&gt;</code> is the hostname of the Elasticsearch node (<code class="literal">localhost</code> if executing locally)
</li>
<li class="listitem">
<code class="literal">&lt;port&gt;</code> is the http port (defaults to <code class="literal">9200</code>)
</li>
<li class="listitem">
<code class="literal">license.json</code> is the license JSON file
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If Shield is enabled, you need cluster admin privileges to install the license.</p>
</div>
</div>
</li>
<li class="listitem">
<p>If the license you are installing does not support all of the features available with your
previous license, you will be notified in the response. To complete the license installation,
you must resubmit the license update request and set the <code class="literal">acknowledge</code> parameter to <code class="literal">true</code> to
indicate that you are aware of the changes.</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl -XPUT 'http://&lt;host&gt;:&lt;port&gt;/_license?acknowledge=true' -d @license.json</pre>
</div>
</li>
</ol>
</div>
<div class="position-relative"><h3><a id="listing-licenses"></a>Viewing the Installed License</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/graph/managing-graph-licenses.asciidoc">edit</a></div>
<p>You can also use the <code class="literal">license</code> API to retrieve the currently installed license:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl -XGET -u admin:password 'http://&lt;host&gt;:&lt;port&gt;/_license'
{
  "license" : {
    "status" : "active",
    "uid" : "0a98411f-73f4-4c67-954c-724874ed5488",
    "type" : "trial",
    "issue_date" : "2015-10-13T18:18:20.709Z",
    "issue_date_in_millis" : 1444760300709,
    "expiry_date" : "2015-11-12T18:18:20.709Z",
    "expiry_date_in_millis" : 1447352300709,
    "max_nodes" : 1000,
    "issued_to" : "elasticsearch",
    "issuer" : "elasticsearch"
  }
}</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If Shield is enabled, you need cluster admin privileges to retrieve the license.</p>
</div>
</div>
<div class="position-relative"><h3><a id="license-expiration"></a>License Expiration</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/graph/managing-graph-licenses.asciidoc">edit</a></div>
<p>License expiration should never be a surprise. Warnings are displayed on startup and written to
the Elasticsearch log starting 30  days from the expiration date. These error messages tell
you when the license expires and what features will be disabled if you fail to update it:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh"># License will expire on [Thursday, November 12, 2015]. If you have a new license, please update it.
# Otherwise, please reach out to your support contact.
#
# Commercial plugins operate with reduced functionality on license expiration:
# - marvel
#  - The agent will stop collecting cluster and indices metrics
# - shield
#  - Cluster health, cluster stats and indices stats operations are blocked
#  - All data operations (read and write) continue to work
# - watcher
#  - PUT / GET watch APIs are disabled, DELETE watch API continues to work
#  - Watches execute and write to the history
#  - The actions of the watches don't execute</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="graph-api-rest.html">« REST API</a>
</span>
<span class="next">
<a href="graph-limitations.html">Limitations »</a>
</span>
</div>
</body>
</html>
