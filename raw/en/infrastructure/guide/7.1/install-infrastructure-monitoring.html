<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Get up and running | Infrastructure Monitoring Guide [7.1] | Elastic</title>
<link rel="home" href="index.html" title="Infrastructure Monitoring Guide [7.1]"/>
<link rel="up" href="index.html" title="Infrastructure Monitoring Guide [7.1]"/>
<link rel="prev" href="infrastructure-monitoring-overview.html" title="Overview"/>
<link rel="next" href="infrastructure-ui-overview.html" title="Infrastructure UI"/>
<meta name="DC.type" content="Learn/Docs/Infrastructure/Guide/7.1"/>
<meta name="DC.subject" content="Infrastructure"/>
<meta name="DC.identifier" content="7.1"/>
</head>
<body><div class="page_header">
You are looking at documentation for an older release.
Starting in version 7.5, see the
<a href="https://www.elastic.co/guide/en/logs/guide/current/index.html"> Logs monitoring guide</a>
and the <a href="https://www.elastic.co/guide/en/metrics/guide/current/index.html"> Metrics monitoring guide</a>
for information about infrastructure monitoring.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Infrastructure Monitoring Guide [7.1]</a></span>
»
<span class="breadcrumb-node">Get up and running</span>
</div>
<div class="navheader">
<span class="prev">
<a href="infrastructure-monitoring-overview.html">« Overview</a>
</span>
<span class="next">
<a href="infrastructure-ui-overview.html">Infrastructure UI »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="install-infrastructure-monitoring"></a>Get up and running<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>To get up and running with infrastructure monitoring, you need:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>An Elasticsearch cluster and Kibana (version 6.5 or later) with a basic
license. To learn how to get started quickly, see
<a href="/guide/en/elastic-stack-get-started/7.1/get-started-elastic-stack.html" class="ulink" target="_top">Getting started with the Elastic Stack</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can skip having to install Elasticsearch and Kibana by using our
<a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a> on
Elastic Cloud. The Elasticsearch Service is available on both AWS and GCP.
<a href="/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Try out the Elasticsearch Service for free</a>.</p>
</div>
</div>
</li>
<li class="listitem">
Beats shippers (version 6.5 or later) installed on each system you want to
monitor
</li>
</ul>
</div>
<p>You might also need to modify UI settings in Kibana to change default behaviors,
such as the index pattern used to query the data, and the timestamp field used
for sorting. For more information, see
<a href="/guide/en/kibana/7.1/infrastructure-ui-settings-kb.html" class="ulink" target="_top">Infrastructure UI Settings</a> and
<a href="/guide/en/kibana/7.1/logs-ui-settings-kb.html" class="ulink" target="_top">Logs UI Settings</a>.</p>
<h3><a id="install-beats-for-infra-UI"></a>Install Beats shippers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h3>
<p>To populate the <a class="xref" href="infrastructure-ui-overview.html" title="Infrastructure UI">Infrastructure UI</a> with metrics and
log data, you need to install and configure the following shippers:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/products/beats/metricbeat" class="ulink" target="_top">Metricbeat</a> for metrics
</li>
<li class="listitem">
<a href="/products/beats/filebeat" class="ulink" target="_top">Filebeat</a> for log data
</li>
</ul>
</div>
<p>To learn how to install and configure the shippers, do one of the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Follow the instructions in the Add Data section of the Kibana home page. Click
<span class="strong strong"><strong>Add log data</strong></span> or <span class="strong strong"><strong>Add metrics</strong></span>, and follow the links for the types of data you
want to collect.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="add-data.png" alt="add data">
</div>
</div>
</li>
<li class="listitem">
<p>If your data source isn&#8217;t in the list, or you want to install Beats the old
fashioned way:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Follow the
<a href="/guide/en/beats/metricbeat/7.1/metricbeat-getting-started.html" class="ulink" target="_top">Metricbeat getting started</a>
and enable modules for the metrics you want to collect.
</li>
<li class="listitem">
Follow the
<a href="/guide/en/beats/filebeat/7.1/filebeat-modules-quickstart.html" class="ulink" target="_top">Filebeat modules quick start</a>
and enable modules for the logs you want to collect. If there is no module
for the logs you want to collect, see the
<a href="/guide/en/beats/filebeat/7.1/filebeat-getting-started.html" class="ulink" target="_top">Filebeat getting started</a> to
learn how to configure inputs.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>For either approach, you need to enable modules in Filebeat and Metricbeat
to populate the Infrastructure UI with data.</p>
<h4><a id="_which_modules_and_configuration_options_do_i_enable"></a>Which modules and configuration options do I enable?<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h4>
<p>To populate the <span class="strong strong"><strong>Hosts</strong></span> view and add logs, enable:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/metricbeat-module-system.html" class="ulink" target="_top">Metricbeat <code class="literal">system</code> module</a> (enabled by default)
</li>
<li class="listitem">
<a href="/guide/en/beats/filebeat/7.1/filebeat-module-system.html" class="ulink" target="_top">Filebeat <code class="literal">system</code> module</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/filebeat/7.1/filebeat-modules.html" class="ulink" target="_top">Other Filebeat modules</a> needed for
your environment, such as <code class="literal">apache2</code>, <code class="literal">redis</code>, and so on
</li>
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/add-host-metadata.html" class="ulink" target="_top">Metricbeat <code class="literal">add_host_metadata</code> processor</a> (enabled by default)
</li>
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/add-cloud-metadata.html" class="ulink" target="_top">Metricbeat <code class="literal">add_cloud_metadata</code> processor</a> (enabled by default)
</li>
</ul>
</div>
<p>To populate the <span class="strong strong"><strong>Docker</strong></span> view and add logs, enable:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/metricbeat-module-docker.html" class="ulink" target="_top">Metricbeat <code class="literal">docker</code> module</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/add-docker-metadata.html" class="ulink" target="_top">Metricbeat <code class="literal">add_docker_metadata</code> processor</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/filebeat/7.1/filebeat-input-docker.html" class="ulink" target="_top">Filebeat <code class="literal">docker</code> input</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/filebeat/7.1/add-docker-metadata.html" class="ulink" target="_top">Filebeat <code class="literal">add_docker_metadata</code> processor</a>
</li>
</ul>
</div>
<p>To populate the <span class="strong strong"><strong>Kubernetes</strong></span> view and add logs, enable:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/metricbeat-module-kubernetes.html" class="ulink" target="_top">Metricbeat <code class="literal">kubernetes</code>
module</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/add-kubernetes-metadata.html" class="ulink" target="_top">Metricbeat <code class="literal">add_kubernetes_metadata</code> processor</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/filebeat/7.1/filebeat-input-docker.html" class="ulink" target="_top">Filebeat <code class="literal">docker</code> input</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/filebeat/7.1/add-kubernetes-metadata.html" class="ulink" target="_top">Filebeat <code class="literal">add_kubernetes_metadata</code> processor</a>
</li>
</ul>
</div>
<h4><a id="_which_fields_are_used_for_the_metrics_on_the_infrastructure_home_page"></a>Which fields are used for the metrics on the Infrastructure home page?<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h4>
<p>The metrics listed below are provided by the Beats Shippers. Each system type requires their corresponding identity field to be in the same event document:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Hosts require <code class="literal">host.name</code>
</li>
<li class="listitem">
Docker containers require <code class="literal">container.id</code>
</li>
<li class="listitem">
Kubernetes pods require <code class="literal">kubernetes.pod.uid</code>
</li>
</ul>
</div>
<p>For the metrics detail page, <code class="literal">event.dataset</code> is a required field. This field is a combination of <code class="literal">metricset.module</code>, which is the Metricbeat module name, and <code class="literal">metricset.name</code>, which is the sub module name.</p>
<h5><a id="_host_metrics"></a>Host Metrics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h5>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>CPU Usage</strong></span>
</span>
</dt>
<dd>
Average of <code class="literal">system.cpu.user.pct</code> added to the average of <code class="literal">system.cpu.system.pct</code> divided by <code class="literal">system.cpu.cores</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Memory Usage</strong></span>
</span>
</dt>
<dd>
Average of <code class="literal">system.memory.actual.used.pct</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Load</strong></span>
</span>
</dt>
<dd>
Average of <code class="literal">system.load.5</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Inbound Traffic</strong></span>
</span>
</dt>
<dd>
Derivative of the max of <code class="literal">system.netowrk.in.bytes</code> scaled to a 1 second rate
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Outbound Traffic</strong></span>
</span>
</dt>
<dd>
Derivative of the max of <code class="literal">system.netowrk.out.bytes</code> scaled to a 1 second rate
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Log Rate</strong></span>
</span>
</dt>
<dd>
Derivative of the cumulative sum of the document count scaled to a 1 second rate.
This metric relies on the same indices as the logs.
</dd>
</dl>
</div>
<h5><a id="_docker_container_metrics"></a>Docker Container Metrics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h5>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>CPU Usage</strong></span>
</span>
</dt>
<dd>
Average of <code class="literal">docker.cpu.total.pct</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Memory Usage</strong></span>
</span>
</dt>
<dd>
Average of <code class="literal">docker.memory.usage.pct</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Inbound Traffic</strong></span>
</span>
</dt>
<dd>
Derivative of the max of <code class="literal">docker.network.in.bytes</code> scaled to a 1 second rate
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Outbound Traffic</strong></span>
</span>
</dt>
<dd>
Derivative of the max of <code class="literal">docker.network.out.bytes</code> scaled to a 1 second rate
</dd>
</dl>
</div>
<h5><a id="_kubernetes_pod_metrics"></a>Kubernetes Pod Metrics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h5>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>CPU Usage</strong></span>
</span>
</dt>
<dd>
Average of <code class="literal">kubernetes.pod.cpu.usage.node.pct</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Memory Usage</strong></span>
</span>
</dt>
<dd>
Average of <code class="literal">kubernetes.pod.memory.usage.node.pct</code>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Inbound Traffic</strong></span>
</span>
</dt>
<dd>
Derivative of the max of <code class="literal">kubernetes.pod.network.rx.bytes</code> scaled to a 1 second rate
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Outbound Traffic</strong></span>
</span>
</dt>
<dd>
Derivative of the max of <code class="literal">kubernetes.pod.network.tx.bytes</code> scaled to a 1 second rate
</dd>
</dl>
</div>
<h4><a id="_more_about_container_monitoring"></a>More about container monitoring<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h4>
<p>If you&#8217;re monitoring containers, you can use autodiscover to automatically apply
configuration changes in response to changes in your containers. To learn how,
see:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/beats/filebeat/7.1/configuration-autodiscover.html" class="ulink" target="_top">Filebeat autodiscover
configuration</a>
</li>
<li class="listitem">
<a href="/guide/en/beats/metricbeat/7.1/configuration-autodiscover.html" class="ulink" target="_top">Metricbeat autodiscover
configuration</a>
</li>
</ul>
</div>
<h4><a id="_known_workarounds"></a>Known Workarounds<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/infraops/installation.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>Running Metricbeat &#8656;6.5 with Kibana 6.6+</strong></span>
</span>
</dt>
<dd>
For Kubernetes, you will need to change the "Pod ID" field in the "Configure Source" panel (<code class="literal">xpack.infra.sources.default.fields.pod</code> in <code class="literal">config/kibana.yml</code> for Kibana 6.6) to <code class="literal">kubernetes.pod.name</code>. There is a caveat for this workaround; if you have two pods with the same name, only one will be visible in the UI.
</dd>
</dl>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="infrastructure-monitoring-overview.html">« Overview</a>
</span>
<span class="next">
<a href="infrastructure-ui-overview.html">Infrastructure UI »</a>
</span>
</div>
</div>
</body>
</html>
