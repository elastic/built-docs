<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quick start: Get logs and metrics into the Elastic Stack | Ingest Management Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="Ingest Management Guide [master]"/>
<link rel="up" href="index.html" title="Ingest Management Guide [master]"/>
<link rel="prev" href="ingest-management-limitations.html" title="Limitations of this release"/>
<link rel="next" href="elastic-agent-installation-configuration.html" title="Manage your Elastic Agents"/>
<meta name="DC.type" content="Learn/Docs/Ingest Management/Guide/master"/>
<meta name="DC.subject" content="Ingest Management"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Ingest Management Guide [master]</a></span>
»
<span class="breadcrumb-node">Quick start: Get logs and metrics into the Elastic Stack</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ingest-management-limitations.html">« Limitations of this release</a>
</span>
<span class="next">
<a href="elastic-agent-installation-configuration.html">Manage your Elastic Agents »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="ingest-management-getting-started"></a>Quick start: Get logs and metrics into the Elastic Stack<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>

<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>This guide describes how to use the ingest management capabilities in the
Elastic Stack to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Collect logs and metrics from systems and services across your organization
</li>
<li class="listitem">
Send the data to the Elastic Stack
</li>
<li class="listitem">
Explore and visualize the data in real-time
</li>
</ul>
</div>
<p>For feedback and questions, please contact us in the <a href="https://discuss.elastic.co/tags/c/elastic-stack/81/stack-ingest-management" class="ulink" target="_top">discuss forum</a>.</p>
<h3><a id="ingest-manager-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>Before you begin, please read <a class="xref" href="ingest-management-limitations.html" title="Limitations of this release">Limitations of this release</a>.</p>
<p>You need Elasticsearch for storing and searching your data, and Kibana for visualizing and
managing it. You can use our
<a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a>
on Elastic Cloud (recommended), or self-manage the Elastic Stack on your own hardware.</p>
<p>Here&#8217;s what you need for each deployment type:</p>
<div class="tabs" data-tab-group="host">
  <div role="tablist" aria-label="Prerequisites">
    <button role="tab"
            aria-selected="true"
            aria-controls="cloud-tab-prereqs"
            id="cloud-prereqs">
      Elasticsearch Service
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="self-managed-tab-prereqs"
            id="self-managed-prereqs"
            tabindex="-1">
      Self-managed
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="cloud-tab-prereqs"
       aria-labelledby="cloud-prereqs">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Access to a deployment of our <a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a>
on Elastic Cloud. The Elasticsearch Service is available on AWS, GCP, and Azure. <a href="/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Try it out for free</a>.
</li>
<li class="listitem">
User with the superuser role. See <a href="/guide/en/elasticsearch/reference/master/built-in-roles.html" class="ulink" target="_top">Built-in roles</a>.
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="self-managed-tab-prereqs"
       aria-labelledby="self-managed-prereqs"
       hidden="">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Access to an Elasticsearch cluster and Kibana (version 8.0) with a basic
license. <a href="/guide/en/elastic-stack-get-started/master/get-started-elastic-stack.html" class="ulink" target="_top">Learn how to install the
Elastic Stack on your own hardware</a>.
</li>
<li class="listitem">
<p>Secure, encrypted connection between Kibana and Elasticsearch. See:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/master/configuring-security.html" class="ulink" target="_top">Configuring security in Elasticsearch</a>
</li>
<li class="listitem">
<a href="/guide/en/kibana/master/using-kibana-with-security.html" class="ulink" target="_top">Configuring security in Kibana</a>
</li>
<li class="listitem">
<p><a href="/guide/en/kibana/master/configuring-tls.html" class="ulink" target="_top">Encrypt communications in Kibana</a></p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can disable the TLS check by setting
<code class="literal">xpack.ingestManager.fleet.tlsCheckDisabled: true</code> in the Kibana
configuration. For example, you might want to do this if Kibana is
behind a proxy that terminates the SSL connection.</p>
</div>
</div>
</li>
</ul>
</div>
</li>
<li class="listitem">
User with the superuser role. See <a href="/guide/en/elasticsearch/reference/master/built-in-roles.html" class="ulink" target="_top">Built-in roles</a>.
</li>
<li class="listitem">
In the Elasticsearch configuration, the
<a href="/guide/en/elasticsearch/reference/master/security-settings.html#api-key-service-settings" class="ulink" target="_top">built-in API key
service</a> must be enabled.
(<code class="literal">xpack.security.authc.api_key.enabled: true</code>)
</li>
<li class="listitem">
In the Kibana configuration, the saved objects encryption key
(<code class="literal">xpack.encryptedSavedObjects.encryptionKey</code>) must be set to any alphanumeric
value of at least 32 characters. Fleet requires this setting in order to save
API keys and encrypt them in Kibana.
</li>
</ul>
</div>
  </div>
</div>
<h3><a id="install-integration"></a>Step 1: Add integrations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>Ingest Manager provides <em>integrations</em> that bundle various assets needed to
ingest and visualize data.</p>
<p>In this guide, we assume that you have <code class="literal">nginx</code> running on some of your
infrastructure, and want to collect logs and metrics from it. To do so:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Log in to Kibana and go to <span class="strong strong"><strong>Management &gt; Ingest Manager</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-start.png" alt="Ingest Manager in Kibana">
</div>
</div>
</li>
<li class="listitem">
<p>In Ingest Manager, click the <span class="strong strong"><strong>Integrations</strong></span> tab and use the search bar to
find the Nginx integration.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-nginx.png" alt="Ingest Manager showing Nginx integration">
</div>
</div>
</li>
<li class="listitem">
<p>Click the Nginx integration to see more details about it, and then click
<span class="strong strong"><strong>Add Nginx</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-nginx-overview.png" alt="Ingest Manager showing Nginx integration overview">
</div>
</div>
</li>
<li class="listitem">
On the <span class="strong strong"><strong>Add Nginx integration</strong></span> page, click the default agent configuration
to select it, then scroll down to inspect or change the default settings.
</li>
<li class="listitem">
If your logs are not in the default location, click the down arrow next to
enabled streams and change the <span class="strong strong"><strong>Paths</strong></span> field.
</li>
<li class="listitem">
<p>When you&#8217;re done, click <span class="strong strong"><strong>Save integration</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-nginx-add-datasource.png" alt="Ingest Manager Add data source screen">
</div>
</div>
</li>
<li class="listitem">
<p>To verify that the integration is installed, click the <span class="strong strong"><strong>Integrations</strong></span> tab
and then click <span class="strong strong"><strong>Installed Integrations</strong></span>.</p>
<p>The Nginx integration has been installed and should show up in this list. Note
that the <span class="strong strong"><strong>System</strong></span> and <span class="strong strong"><strong>Elastic Endpoint Security</strong></span> integrations are installed
by default.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-list-installed.png" alt="Ingest Manager showing installed integrations">
</div>
</div>
</li>
<li class="listitem">
<p>Select the <span class="strong strong"><strong>Configurations</strong></span> tab, and in the list of agent configurations,
click <span class="strong strong"><strong>Default config</strong></span>.</p>
<p>The newly added Nginx integration should appear under <span class="strong strong"><strong>Integrations</strong></span>.
Note that the <code class="literal">system-1</code> integration has been created by default.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-configurations-default-with-nginx.png" alt="Ingest Manager showing default agent configuration with nginx-1 datasource">
</div>
</div>
</li>
</ol>
</div>
<h3><a id="install-run-elastic-agent"></a>Step 3: Install and run Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>Elastic Agent is a single, unified agent that you can deploy to hosts or containers to
collect data and send it to the Elastic Stack. Behind the scenes, Elastic Agent runs the
Beats shippers or Elastic Endpoint required for your configuration.</p>
<p>To download and install Elastic Agent, use the commands that work with your
system:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Install">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-install"
            id="deb-install">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-install"
            id="rpm-install">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-install"
            id="mac-install">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-install"
            id="linux-install"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-install"
            id="win-install"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-install"
       aria-labelledby="deb-install">
<p>Version 8.0.0 of Elastic Agent has not yet been released.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-install"
       aria-labelledby="rpm-install"
       hidden="">
<p>Version 8.0.0 of Elastic Agent has not yet been released.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-install"
       aria-labelledby="mac-install"
       hidden="">
<p>Version 8.0.0 of Elastic Agent has not yet been released.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-install"
       aria-labelledby="linux-install"
       hidden="">
<p>Version 8.0.0 of Elastic Agent has not yet been released.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-install"
       aria-labelledby="win-install"
       hidden="">
<p>Version 8.0.0 of Elastic Agent has not yet been released.</p>
  </div>
</div>
<p>See the <a href="/downloads/elastic-agent" class="ulink" target="_top">download page</a> for other
installation options.</p>
<p>After the download is complete, decide which mode you want to run in: Fleet
or standalone. What&#8217;s the difference?</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
With <a class="xref" href="ingest-management-getting-started.html#agent-fleet-mode" title="Fleet mode"><em>Fleet mode</em></a>, you use Ingest Manager in Kibana to
define and manage Elastic Agent configurations from a central location.
</li>
<li class="listitem">
With <a class="xref" href="ingest-management-getting-started.html#agent-standalone-mode" title="Standalone mode (manual configuration)"><em>standalone mode</em></a>, you configure Elastic Agent
manually on the system where the agent is installed.
</li>
</ul>
</div>
<h4><a id="agent-fleet-mode"></a>Fleet mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a></h4>
<p>To use Fleet to configure Elastic Agent:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In Ingest Manager, click <span class="strong strong"><strong>Settings</strong></span> and change the defaults, if necessary.
For self-managed installations, set the URLs for Elasticsearch and Kibana, including
the http ports, then save your changes.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-settings.png" alt="Ingest Manager settings">
</div>
</div>
</li>
<li class="listitem">
<p>Enable Fleet. Click the <span class="strong strong"><strong>Fleet</strong></span> tab and click
<span class="strong strong"><strong>Create user and enable Fleet</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-fleet-enable.png" alt="Ingest Manager showing prompt to enable Fleet">
</div>
</div>
</li>
<li class="listitem">
On the <span class="strong strong"><strong>Fleet</strong></span> tab, click <span class="strong strong"><strong>Add agent</strong></span> and complete the steps under
<span class="strong strong"><strong>Enroll with Fleet</strong></span>. Skip the first step because you downloaded Elastic Agent
earlier.
</li>
<li class="listitem">
Select an agent configuration (or accept the default).
</li>
<li class="listitem">
<p>Copy the command for enrolling the agent.</p>
<p>The copied command contains your Kibana URL and an enrollment key that was
generated by Ingest Manager.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-fleet-enrol.png" alt="Ingest Manager showing agent enrollment dialog">
</div>
</div>
</li>
<li class="listitem">
<p>In the directory where Elastic Agent is installed, run the command you copied. Note
that this command will overwrite the <code class="literal">elastic-agent.yml</code> file in that directory.</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Enroll">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-enroll"
            id="deb-enroll">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-enroll"
            id="rpm-enroll">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-enroll"
            id="mac-enroll">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-enroll"
            id="linux-enroll"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-enroll"
            id="win-enroll"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-enroll"
       aria-labelledby="deb-enroll">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-enroll"
       aria-labelledby="rpm-enroll"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-enroll"
       aria-labelledby="mac-enroll"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-enroll"
       aria-labelledby="linux-enroll"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-enroll"
       aria-labelledby="win-enroll"
       hidden="">
<p>Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).</p>
<p>From the PowerShell prompt, change to the directory where you installed Elastic Agent,
and run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">.\elastic-agent.exe enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
</div>
</li>
<li class="listitem">
<p>Run Elastic Agent:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Run the agent">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-run"
            id="deb-run">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-run"
            id="rpm-run">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-run"
            id="mac-run">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-run"
            id="linux-run"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-run"
            id="win-run"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-run"
       aria-labelledby="deb-run">
<p>The DEB package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-run"
       aria-labelledby="rpm-run"
       hidden="">
<p>The RPM package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-run"
       aria-labelledby="mac-run"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent
manually if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
<a href="/guide/en/ingest-management/master/elastic-agent-installation.html#elastic-agent-install-service-macos" class="ulink" target="_top">Install the agent as a service</a>.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-run"
       aria-labelledby="linux-run"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent manually
if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
use the DEB or RPM package instead of the tarball.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-run"
       aria-labelledby="win-run"
       hidden="">
<p>The first time you run Elastic Agent, you need to install it as auto-starting Windows
service. To do this, run the PowerShell script provided in the archive you
downloaded:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).
</li>
<li class="listitem">
<p>From the PowerShell prompt, run the following commands to install Elastic Agent as
an service and start the service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">cd 'C:\Program Files\Elastic-Agent'
.\install-service-elastic-agent.ps1 <a id="CO1-1"></a><i class="conum" data-value="1"></i> <a id="CO1-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>You must run Elastic Agent under the SYSTEM account if you plan
to use the Endpoint Security integration.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If script execution is disabled on your system, set the execution policy for
the current session to allow the script to run. For example:
<code class="literal">PowerShell.exe -ExecutionPolicy UnRestricted -File .\install-service-elastic-agent.ps1</code>.</p>
</td>
</tr>
</table>
</div>
<p>If the service stops and you need to restart it manually, run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">Start-Service elastic-agent</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
</div>
</li>
<li class="listitem">
<p>In Ingest Manager, click <span class="strong strong"><strong>Continue</strong></span> to go to the <span class="strong strong"><strong>Fleet</strong></span>
tab, where you should see the newly enrolled agent.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-fleet-agents.png" alt="Ingest Manager showing enrolled agents">
</div>
</div>
</li>
</ol>
</div>
<p>If you run into problems, see <a class="xref" href="ingest-management-troubleshooting.html" title="Troubleshoot common problems"><em>Troubleshoot common problems</em></a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To unenroll an agent, see <a class="xref" href="unenroll-elastic-agent.html" title="Unenroll Elastic Agent">Unenroll Elastic Agent</a>.</p>
</div>
</div>
<h4><a id="agent-standalone-mode"></a>Standalone mode (manual configuration)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a></h4>
<p>To configure Elastic Agent manually:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
On the <span class="strong strong"><strong>Fleet</strong></span> tab, click <span class="strong strong"><strong>Add agent</strong></span> and complete the steps under
<span class="strong strong"><strong>Standalone mode</strong></span>. Skip the first step because you downloaded Elastic Agent
earlier.
</li>
<li class="listitem">
Select an agent configuration (or accept the default).
</li>
<li class="listitem">
<p>Copy the content of the agent configuration and put it into a file named
<code class="literal">elastic-agent.yml</code> on the system where Elastic Agent is installed.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-configurations-default-yaml.png" alt="Ingest Manager showing default agent configuration in YAML format">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The configuration file generated by Ingest Manager already
contains the correct Elasticsearch address and port for your setup. If you run everything
locally, the address is <code class="literal">127.0.0.1:9200</code>. If you use our
<a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a> on
Elastic Cloud, the address corresponds to the Elasticsearch endpoint URL that is listed
under <span class="strong strong"><strong>Endpoints</strong></span> as described in
<a href="/guide/en/cloud/current/ec-working-with-elasticsearch.html" class="ulink" target="_top">Work with Elasticsearch</a>.</p>
</div>
</div>
</li>
<li class="listitem">
<p>Change the Elasticsearch username and password in the <code class="literal">outputs</code> section of the
configuration file:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">[...]
outputs:
  default:
    type: elasticsearch
    hosts:
      - 'HOST:PORT'
    username: ES_USERNAME
    password: ES_PASSWORD
datasources:
[...]</pre>
</div>
</li>
<li class="listitem">
<p>Run Elastic Agent:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Run the agent">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-run-standalone"
            id="deb-run-standalone">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-run-standalone"
            id="rpm-run-standalone">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-run-standalone"
            id="mac-run-standalone">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-run-standalone"
            id="linux-run-standalone"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-run-standalone"
            id="win-run-standalone"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-run-standalone"
       aria-labelledby="deb-run-standalone">
<p>The DEB package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-run-standalone"
       aria-labelledby="rpm-run-standalone"
       hidden="">
<p>The RPM package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-run-standalone"
       aria-labelledby="mac-run-standalone"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent
manually if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
<a href="/guide/en/ingest-management/master/elastic-agent-installation.html#elastic-agent-install-service-macos" class="ulink" target="_top">Install the agent as a service</a>.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-run-standalone"
       aria-labelledby="linux-run-standalone"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent manually
if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
use the DEB or RPM package instead of the tarball.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-run-standalone"
       aria-labelledby="win-run-standalone"
       hidden="">
<p>The first time you run Elastic Agent, you need to install it as auto-starting Windows
service. To do this, run the PowerShell script provided in the archive you
downloaded:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).
</li>
<li class="listitem">
<p>From the PowerShell prompt, run the following commands to install Elastic Agent as
an service and start the service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">cd 'C:\Program Files\Elastic-Agent'
.\install-service-elastic-agent.ps1 <a id="CO2-1"></a><i class="conum" data-value="1"></i> <a id="CO2-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>You must run Elastic Agent under the SYSTEM account if you plan
to use the Endpoint Security integration.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If script execution is disabled on your system, set the execution policy for
the current session to allow the script to run. For example:
<code class="literal">PowerShell.exe -ExecutionPolicy UnRestricted -File .\install-service-elastic-agent.ps1</code>.</p>
</td>
</tr>
</table>
</div>
<p>If the service stops and you need to restart it manually, run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">Start-Service elastic-agent</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
</div>
</li>
</ol>
</div>
<h3><a id="view-data"></a>Step 4: View your data<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>In Ingest Manager, click the <span class="strong strong"><strong>Datasets</strong></span> tab to inspect the data
that is sent by Elastic Agent. From the <span class="strong strong"><strong>Actions</strong></span> column, you can navigate to the
dashboards corresponding to the data type that is sent.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-datastreams.png" alt="Ingest Manager showing data streams list">
</div>
</div>
<h3><a id="_whats_next"></a>What&#8217;s next?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>Now that you have your logs streaming into Elasticsearch, learn how to unify your logs,
metrics, uptime, and application performance data by using
<a href="/observability" class="ulink" target="_top">Elastic Observability</a>.</p>
<style>
.tabs {
  width: 100%;
}
[role="tablist"] {
  margin: 0 0 -0.1em;
  overflow: visible;
}
[role="tab"] {
  position: relative;
  padding: 0.3em 0.5em 0.4em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0.2em 0.2em 0 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  background: hsl(220, 20%, 94%);
}
[role="tab"]:hover::before,
[role="tab"]:focus::before,
[role="tab"][aria-selected="true"]::before {
  position: absolute;
  bottom: 100%;
  right: -1px;
  left: -1px;
  border-radius: 0.2em 0.2em 0 0;
  border-top: 3px solid hsl(219, 1%, 72%);
  content: '';
}
[role="tab"][aria-selected="true"] {
  border-radius: 0;
  background: hsl(220, 43%, 99%);
  outline: 0;
}
[role="tab"][aria-selected="true"]:not(:focus):not(:hover)::before {
  border-top: 5px solid hsl(218, 96%, 48%);
}
[role="tab"][aria-selected="true"]::after {
  position: absolute;
  z-index: 3;
  bottom: -1px;
  right: 0;
  left: 0;
  height: 0.3em;
  background: hsl(220, 43%, 99%);
  box-shadow: none;
  content: '';
}
[role="tab"]:hover,
[role="tab"]:focus,
[role="tab"]:active {
  outline: 0;
  border-radius: 0;
  color: inherit;
}
[role="tab"]:hover::before,
[role="tab"]:focus::before {
  border-color: hsl(218, 96%, 48%);
}
[role="tabpanel"] {
  position: relative;
  z-index: 2;
  padding: 1em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0 0.2em 0.2em 0.2em;
  box-shadow: 0 0 0.2em hsl(219, 1%, 72%);
  background: hsl(220, 43%, 99%);
  margin-bottom: 1em;
}
[role="tabpanel"] p {
  margin: 0;
}
[role="tabpanel"] * + p {
  margin-top: 1em;
}
</style>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabList = document.querySelector('[role="tablist"]');
  // Add a click event handler to each tab
  tabs.forEach(tab => {
    tab.addEventListener("click", changeTabs);
  });
  // Enable arrow navigation between tabs in the tab list
  let tabFocus = 0;
  tabList.addEventListener("keydown", e => {
    // Move right
    if (e.keyCode === 39 || e.keyCode === 37) {
      tabs[tabFocus].setAttribute("tabindex", -1);
      if (e.keyCode === 39) {
        tabFocus++;
        // If we're at the end, go to the start
        if (tabFocus >= tabs.length) {
          tabFocus = 0;
        }
        // Move left
      } else if (e.keyCode === 37) {
        tabFocus--;
        // If we're at the start, move to the end
        if (tabFocus < 0) {
          tabFocus = tabs.length - 1;
        }
      }
      tabs[tabFocus].setAttribute("tabindex", 0);
      tabs[tabFocus].focus();
    }
  });
});

function setActiveTab(target) {
  const parent = target.parentNode;
  const grandparent = parent.parentNode;
  // console.log(grandparent);
  // Remove all current selected tabs
  parent
    .querySelectorAll('[aria-selected="true"]')
    .forEach(t => t.setAttribute("aria-selected", false));
  // Set this tab as selected
  target.setAttribute("aria-selected", true);
  // Hide all tab panels
  grandparent
    .querySelectorAll('[role="tabpanel"]')
    .forEach(p => p.setAttribute("hidden", true));
  // Show the selected panel
  grandparent.parentNode
    .querySelector(`#${target.getAttribute("aria-controls")}`)
    .removeAttribute("hidden");
}

function changeTabs(e) {
  // get the containing list of the tab that was just clicked
  const tabList = e.target.parentNode;

  // get all of the sibling tabs
  const buttons = Array.apply(null, tabList.querySelectorAll('button'));

  // loop over the siblings to discover which index thje clicked one was
  const { index } = buttons.reduce(({ found, index }, button) => {
    if (!found && buttons[index] === e.target) {
      return { found: true, index };
    } else if (!found) {
      return { found, index: index + 1 };
    } else {
      return { found, index };
    }
  }, { found: false, index: 0 });

  // get the tab container
  const container = tabList.parentNode;
  // read the data-tab-group value from the container, e.g. "os"
  const { tabGroup } = container.dataset;
  // get a list of all the tab groups that match this value on the page
  const groups = document.querySelectorAll('[data-tab-group=' + tabGroup + ']');

  // for each of the found tab groups, find the tab button at the previously discovered index and select it for each group
  groups.forEach((group) => {
    const target = group.querySelectorAll('button')[index];
    setActiveTab(target);
  });
}
</script>
</div>
<div class="navfooter">
<span class="prev">
<a href="ingest-management-limitations.html">« Limitations of this release</a>
</span>
<span class="next">
<a href="elastic-agent-installation-configuration.html">Manage your Elastic Agents »</a>
</span>
</div>
</div>
</body>
</html>
