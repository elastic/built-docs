<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Run Elastic Agent | Fleet User Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="Fleet User Guide [master]"/>
<link rel="up" href="elastic-agent-installation-configuration.html" title="Manage your Elastic Agents"/>
<link rel="prev" href="elastic-agent-installation.html" title="Install Elastic Agent"/>
<link rel="next" href="stop-elastic-agent.html" title="Stop Elastic Agent"/>
<meta name="DC.type" content="Learn/Docs/Ingest Management/Guide/master"/>
<meta name="DC.subject" content="Ingest Management"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Fleet User Guide [master]</a></span>
»
<span class="breadcrumb-link"><a href="elastic-agent-installation-configuration.html">Manage your Elastic Agents</a></span>
»
<span class="breadcrumb-node">Run Elastic Agent</span>
</div>
<div class="navheader">
<span class="prev">
<a href="elastic-agent-installation.html">« Install Elastic Agent</a>
</span>
<span class="next">
<a href="stop-elastic-agent.html">Stop Elastic Agent »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="run-elastic-agent"></a>Run Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/x-pack/elastic-agent/docs/run-elastic-agent.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Elastic Agent runs in two modes: standalone or fleet. The two modes differ in how you
configure and manage the agent.</p>
<h4><a id="fleet-mode"></a>Run in Fleet mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/x-pack/elastic-agent/docs/run-elastic-agent.asciidoc">edit</a></h4>
<p>With <em>fleet mode</em>, you manage Elastic Agent remotely. The agent uses a trusted Kibana
instance to retrieve policies and report agent events. This trusted Kibana
instance must have Fleet enabled.</p>
<p>To create a trusted communication channel between Elastic Agent and Kibana, enroll the
agent to Fleet.</p>
<p>To enroll an Elastic Agent to Fleet:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Stop Elastic Agent, if it&#8217;s already running.
</li>
<li class="listitem">
<p>In Fleet, click <span class="strong strong"><strong>Settings</strong></span> and change the defaults, if necessary.
For self-managed installations, set the URLs for Elasticsearch and Kibana, including
the http ports, then save your changes.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-fleet-settings.png" alt="Fleet settings">
</div>
</div>
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Agents</strong></span>, then click <span class="strong strong"><strong>Add agent</strong></span> to get an enrollment token. See
<a class="xref" href="ingest-management-getting-started.html" title="Quick start: Get logs and metrics into the Elastic Stack"><em>Quick start</em></a> for detailed steps.
</li>
<li class="listitem">
<p>Change to the directory where Elastic Agent is installed, and enroll the agent to
Fleet:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Enroll">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-enroll"
            id="deb-enroll">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-enroll"
            id="rpm-enroll">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-enroll"
            id="mac-enroll">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-enroll"
            id="linux-enroll"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-enroll"
            id="win-enroll"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-enroll"
       aria-labelledby="deb-enroll">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-enroll"
       aria-labelledby="rpm-enroll"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-enroll"
       aria-labelledby="mac-enroll"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-enroll"
       aria-labelledby="linux-enroll"
       hidden="">
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We recommend that you run this command as the root user because some
integrations require root privileges to collect sensitive data.</p>
</div>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-enroll"
       aria-labelledby="win-enroll"
       hidden="">
<p>Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).</p>
<p>From the PowerShell prompt, change to the directory where you installed Elastic Agent,
and run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">.\elastic-agent.exe enroll KIBANA_URL ENROLLMENT_KEY</pre>
</div>
<p>Where <code class="literal">KIBANA_URL</code> is the Kibana URL where Fleet is running, and
<code class="literal">ENROLLMENT_KEY</code> is the enrollment token acquired from Fleet.</p>
  </div>
</div>
</li>
<li class="listitem">
<p>Run the agent:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Run the agent">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-run"
            id="deb-run">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-run"
            id="rpm-run">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-run"
            id="mac-run">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-run"
            id="linux-run"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-run"
            id="win-run"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-run"
       aria-labelledby="deb-run">
<p>The DEB package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-run"
       aria-labelledby="rpm-run"
       hidden="">
<p>The RPM package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-run"
       aria-labelledby="mac-run"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent
manually if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
<a href="/guide/en/ingest-management/master/elastic-agent-installation.html#elastic-agent-install-service-macos" class="ulink" target="_top">Install the agent as a service</a>.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-run"
       aria-labelledby="linux-run"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent manually
if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
use the DEB or RPM package instead of the tarball.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-run"
       aria-labelledby="win-run"
       hidden="">
<p>The first time you run Elastic Agent, you need to install it as auto-starting Windows
service. To do this, run the PowerShell script provided in the archive you
downloaded:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).
</li>
<li class="listitem">
<p>From the PowerShell prompt, run the following commands to install Elastic Agent as
an service and start the service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">cd 'C:\Program Files\Elastic-Agent'
.\install-service-elastic-agent.ps1 <a id="CO2-1"></a><i class="conum" data-value="1"></i> <a id="CO2-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>You must run Elastic Agent under the SYSTEM account if you plan
to use the Endpoint Security integration.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If script execution is disabled on your system, set the execution policy for
the current session to allow the script to run. For example:
<code class="literal">PowerShell.exe -ExecutionPolicy UnRestricted -File .\install-service-elastic-agent.ps1</code>.</p>
</td>
</tr>
</table>
</div>
<p>If the service stops and you need to restart it manually, run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">Start-Service elastic-agent</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
</div>
</li>
</ol>
</div>
<h4><a id="standalone-mode"></a>Run in standalone mode (default)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/beats/edit/master/x-pack/elastic-agent/docs/run-elastic-agent.asciidoc">edit</a></h4>
<p>With <em>standalone mode</em>, you manually configure and manage Elastic Agent locally on the
system where the agent is installed. Elastic Agent is configured to run in standalone
mode by default unless you enroll it in Fleet.</p>
<p>If Elastic Agent is installed as an auto-starting service, it will run automatically
when you restart your system.</p>
<p>To start Elastic Agent manually, run:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Run the agent">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-run-standalone"
            id="deb-run-standalone">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-run-standalone"
            id="rpm-run-standalone">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-run-standalone"
            id="mac-run-standalone">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-run-standalone"
            id="linux-run-standalone"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-run-standalone"
            id="win-run-standalone"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-run-standalone"
       aria-labelledby="deb-run-standalone">
<p>The DEB package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-run-standalone"
       aria-labelledby="rpm-run-standalone"
       hidden="">
<p>The RPM package includes a service unit for Linux systems with systemd. On these
systems, you can manage Elastic Agent by using the usual systemd commands:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">systemctl enable elastic-agent
systemctl start elastic-agent</pre>
</div>
<p>Otherwise, use:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">sudo service elastic-agent start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-run-standalone"
       aria-labelledby="mac-run-standalone"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent
manually if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
<a href="/guide/en/ingest-management/master/elastic-agent-installation.html#elastic-agent-install-service-macos" class="ulink" target="_top">Install the agent as a service</a>.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-run-standalone"
       aria-labelledby="linux-run-standalone"
       hidden="">
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command starts Elastic Agent in the foreground. You must restart Elastic Agent manually
if the agent terminates or the system is rebooted.</p>
<p>To start the agent automatically when the system is rebooted,
use the DEB or RPM package instead of the tarball.</p>
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-run-standalone"
       aria-labelledby="win-run-standalone"
       hidden="">
<p>The first time you run Elastic Agent, you need to install it as auto-starting Windows
service. To do this, run the PowerShell script provided in the archive you
downloaded:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).
</li>
<li class="listitem">
<p>From the PowerShell prompt, run the following commands to install Elastic Agent as
an service and start the service:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">cd 'C:\Program Files\Elastic-Agent'
.\install-service-elastic-agent.ps1 <a id="CO3-1"></a><i class="conum" data-value="1"></i> <a id="CO3-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>You must run Elastic Agent under the SYSTEM account if you plan
to use the Endpoint Security integration.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If script execution is disabled on your system, set the execution policy for
the current session to allow the script to run. For example:
<code class="literal">PowerShell.exe -ExecutionPolicy UnRestricted -File .\install-service-elastic-agent.ps1</code>.</p>
</td>
</tr>
</table>
</div>
<p>If the service stops and you need to restart it manually, run:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">Start-Service elastic-agent</pre>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Agent will restart automatically if the system is rebooted.</p>
</div>
</div>
  </div>
</div>
<p>Use the <code class="literal">-c</code> flag to specify the policy file. If no policy file is
specified, Elastic Agent uses the default policy, <code class="literal">elastic-agent.yml</code>, which is
located in the same directory as Elastic Agent.</p>
<p>For configuration options, see <a class="xref" href="elastic-agent-configuration.html" title="Configuration settings">Configuration settings</a>.</p>
<style>
.tabs {
  width: 100%;
}
[role="tablist"] {
  margin: 0 0 -0.1em;
  overflow: visible;
}
[role="tab"] {
  position: relative;
  padding: 0.3em 0.5em 0.4em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0.2em 0.2em 0 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  background: hsl(220, 20%, 94%);
}
[role="tab"]:hover::before,
[role="tab"]:focus::before,
[role="tab"][aria-selected="true"]::before {
  position: absolute;
  bottom: 100%;
  right: -1px;
  left: -1px;
  border-radius: 0.2em 0.2em 0 0;
  border-top: 3px solid hsl(219, 1%, 72%);
  content: '';
}
[role="tab"][aria-selected="true"] {
  border-radius: 0;
  background: hsl(220, 43%, 99%);
  outline: 0;
}
[role="tab"][aria-selected="true"]:not(:focus):not(:hover)::before {
  border-top: 5px solid hsl(218, 96%, 48%);
}
[role="tab"][aria-selected="true"]::after {
  position: absolute;
  z-index: 3;
  bottom: -1px;
  right: 0;
  left: 0;
  height: 0.3em;
  background: hsl(220, 43%, 99%);
  box-shadow: none;
  content: '';
}
[role="tab"]:hover,
[role="tab"]:focus,
[role="tab"]:active {
  outline: 0;
  border-radius: 0;
  color: inherit;
}
[role="tab"]:hover::before,
[role="tab"]:focus::before {
  border-color: hsl(218, 96%, 48%);
}
[role="tabpanel"] {
  position: relative;
  z-index: 2;
  padding: 1em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0 0.2em 0.2em 0.2em;
  box-shadow: 0 0 0.2em hsl(219, 1%, 72%);
  background: hsl(220, 43%, 99%);
  margin-bottom: 1em;
}
[role="tabpanel"] p {
  margin: 0;
}
[role="tabpanel"] * + p {
  margin-top: 1em;
}
</style>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabList = document.querySelector('[role="tablist"]');
  // Add a click event handler to each tab
  tabs.forEach(tab => {
    tab.addEventListener("click", changeTabs);
  });
  // Enable arrow navigation between tabs in the tab list
  let tabFocus = 0;
  tabList.addEventListener("keydown", e => {
    // Move right
    if (e.keyCode === 39 || e.keyCode === 37) {
      tabs[tabFocus].setAttribute("tabindex", -1);
      if (e.keyCode === 39) {
        tabFocus++;
        // If we're at the end, go to the start
        if (tabFocus >= tabs.length) {
          tabFocus = 0;
        }
        // Move left
      } else if (e.keyCode === 37) {
        tabFocus--;
        // If we're at the start, move to the end
        if (tabFocus < 0) {
          tabFocus = tabs.length - 1;
        }
      }
      tabs[tabFocus].setAttribute("tabindex", 0);
      tabs[tabFocus].focus();
    }
  });
});

function setActiveTab(target) {
  const parent = target.parentNode;
  const grandparent = parent.parentNode;
  // console.log(grandparent);
  // Remove all current selected tabs
  parent
    .querySelectorAll('[aria-selected="true"]')
    .forEach(t => t.setAttribute("aria-selected", false));
  // Set this tab as selected
  target.setAttribute("aria-selected", true);
  // Hide all tab panels
  grandparent
    .querySelectorAll('[role="tabpanel"]')
    .forEach(p => p.setAttribute("hidden", true));
  // Show the selected panel
  grandparent.parentNode
    .querySelector(`#${target.getAttribute("aria-controls")}`)
    .removeAttribute("hidden");
}

function changeTabs(e) {
  // get the containing list of the tab that was just clicked
  const tabList = e.target.parentNode;

  // get all of the sibling tabs
  const buttons = Array.apply(null, tabList.querySelectorAll('button'));

  // loop over the siblings to discover which index thje clicked one was
  const { index } = buttons.reduce(({ found, index }, button) => {
    if (!found && buttons[index] === e.target) {
      return { found: true, index };
    } else if (!found) {
      return { found, index: index + 1 };
    } else {
      return { found, index };
    }
  }, { found: false, index: 0 });

  // get the tab container
  const container = tabList.parentNode;
  // read the data-tab-group value from the container, e.g. "os"
  const { tabGroup } = container.dataset;
  // get a list of all the tab groups that match this value on the page
  const groups = document.querySelectorAll('[data-tab-group=' + tabGroup + ']');

  // for each of the found tab groups, find the tab button at the previously discovered index and select it for each group
  groups.forEach((group) => {
    const target = group.querySelectorAll('button')[index];
    setActiveTab(target);
  });
}
</script>
</div>
<div class="navfooter">
<span class="prev">
<a href="elastic-agent-installation.html">« Install Elastic Agent</a>
</span>
<span class="next">
<a href="stop-elastic-agent.html">Stop Elastic Agent »</a>
</span>
</div>
</div>
</body>
</html>
