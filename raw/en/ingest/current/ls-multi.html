<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elastic Agent to Logstash for routing to multiple Elasticsearch clusters and additional destinations | Elasticsearch Ingest Architectures | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Ingest Architectures"/>
<link rel="up" href="agent-ls.html" title="Elastic Agent to Logstash to Elasticsearch"/>
<link rel="prev" href="ls-networkbridge.html" title="Elastic Agent to Logstash to Elasticsearch: Logstash to bridge networks"/>
<link rel="next" href="agent-kafka-es.html" title="Elastic Agent to Elasticsearch with Kafka as middleware message queue"/>
<meta name="DC.type" content="Learn/Docs/Ingest/Reference"/>
<meta name="DC.subject" content="Ingest"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Ingest Architectures</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="agent-ls.html">Elastic Agent to Logstash to Elasticsearch</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ls-networkbridge.html">« Elastic Agent to Logstash to Elasticsearch: Logstash to bridge networks</a>
</span>
<span class="next">
<a href="agent-kafka-es.html">Elastic Agent to Elasticsearch with Kafka as middleware message queue »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ls-multi"></a>Elastic Agent to Logstash for routing to multiple Elasticsearch clusters and additional destinations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-arch/13-multitenant.asciidoc">edit</a></h2>
</div></div></div>
<div class="imageblock">
<div class="content">
<img src="images/ea-ls-multi.png" alt="Image showing Elastic Agent collecting and routing data to multiple destinations">
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Ingest model
</span>
</dt>
<dd>
Elastic Agent to Logstash to Elasticsearch clusters and/or additional destinations
</dd>
<dt>
<span class="term">
Use when
</span>
</dt>
<dd>
Data collected by Elastic Agent needs to be routed to different Elasticsearch clusters or non-Elasticsearch destinations depending on the content
</dd>
<dt>
<span class="term">
Example
</span>
</dt>
<dd>
<p>
Let’s take an example of a Windows workstation, for which we are collecting different types of logs using the System and Windows integrations.
These logs need to be sent to different Elasticsearch clusters and to S3 for backup and a mechanism to send it to other destinations such as different SIEM solutions. In addition, the Elasticsearch destination is derived based on the type of datastream and an organization identifier.
</p>
<p>In such use cases, agents send the data to Logstash as a routing mechanism to different destinations.
Note that the System and Windows integrations must be installed on all Elasticsearch clusters to which the data is routed.</p>
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>ToDo:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Add image showing Agent to LS to [Destination1, Destination2, ..]
</li>
<li class="listitem">
Add config example/logic in Logstash for routing data to different destinations
</li>
</ul>
</div>
<h4><a id="multi-resources"></a>Resources<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-arch/13-multitenant.asciidoc">edit</a></h4>
<p>Info on Elastic Agent and agent integrations:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/fleet/master" class="ulink" target="_top">Fleet and Elastic Agent Guide</a>
</li>
<li class="listitem">
<a href="https://docs.elastic.co/en/integrations" class="ulink" target="_top">Elastic Agent integrations</a>
</li>
</ul>
</div>
<p>Info on Logstash and Logstash outputs:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/logstash/master" class="ulink" target="_top">Logstash Reference</a>
</li>
<li class="listitem">
<a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html" class="ulink" target="_top">Logstash Elasticsearch output plugin</a>
</li>
<li class="listitem">
<a href="/guide/en/logstash/master/output-plugins.html" class="ulink" target="_top">Logstash output plugins</a>
</li>
</ul>
</div>
<p>Info on Elasticsearch:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/master" class="ulink" target="_top">Elasticsearch Guide</a>
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ls-networkbridge.html">« Elastic Agent to Logstash to Elasticsearch: Logstash to bridge networks</a>
</span>
<span class="next">
<a href="agent-kafka-es.html">Elastic Agent to Elasticsearch with Kafka as middleware message queue »</a>
</span>
</div>
</div>
</body>
</html>
