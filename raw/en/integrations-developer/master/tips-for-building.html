<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tips for building integrations | Integrations Developer Guide | Elastic</title>
<meta class="elastic" name="content" content="Tips for building integrations | Integrations Developer Guide">

<link rel="home" href="index.html" title="Integrations Developer Guide"/>
<link rel="up" href="build-a-new-integration.html" title="Build an integration"/>
<link rel="prev" href="finishing-touches.html" title="Finishing touches"/>
<link rel="next" href="upload-a-new-integration.html" title="Upload an integration to Kibana"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Integrations"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Integrations/Developer"/>
<meta name="DC.subject" content="Integrations"/>
<meta name="DC.identifier" content="master"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="finishing-touches.html">« Finishing touches</a>
</span>
<span class="next">
<a href="upload-a-new-integration.html">Upload an integration to Kibana »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Integrations Developer Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="build-a-new-integration.html">Build an integration</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Tips for building integrations</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="tips-for-building"></a>Tips for building integrations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h2>
</div></div></div>
<p>The section offers a set of tips for developers to improve integrations that they&#8217;re working on. It combines hints, guidelines,
recommendations and tricks. Please consider this section as a live document that may evolve in the future, depending
on the business or technical requirements for the entire platform (Elastic Package Registry, Elastic Agent and Kibana).</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_elastic_package"></a>elastic-package<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h3>
</div></div></div>
<p><a href="https://github.com/elastic/elastic-package" class="ulink" target="_top">elastic-package</a> is a command line tool, written in Go, used for developing Elastic packages. It can help you lint,
format, test and build your packages. This is the official builder tool to develop Integrations. See the
<a href="https://github.com/elastic/elastic-package#getting-started" class="ulink" target="_top">Getting started</a> section to ramp up quickly and review its features.</p>
<p>If you need the revision of elastic-package in the correct version (the same one as the CI uses), which is defined in <code class="literal">go.mod</code>, use the following command
(in the Integrations repository):</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">$ go build github.com/elastic/elastic-package
$ ./elastic-package help</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_new_integrations"></a>New integrations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_manifest_files"></a>Manifest files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Set the initial version to <code class="literal">0.1.0</code>.</p>
<p>Tagging the integration with a lower version, like <code class="literal">0.0.1</code>, means that it&#8217;s at very early stage and most likely
it doesn&#8217;t work at all. It might be partially developed.</p>
</li>
<li class="listitem">
<p>Select one or two categories for the integration.</p>
<p>The list of available categories is present in the Package Registry source: <a href="https://github.com/elastic/package-registry/blob/1dd3e7c4956f7e34809bb87acae50b2a63cd7ad0/packages/package.go#L29-L55" class="ulink" target="_top">https://github.com/elastic/package-registry/blob/1dd3e7c4956f7e34809bb87acae50b2a63cd7ad0/packages/package.go#L29-L55</a></p>
</li>
<li class="listitem">
<p>Make sure that the version condition for Kibana is set to <code class="literal">+^7.10.0+</code> and not <code class="literal">&gt;=7.10.0</code>. Otherwise the package is also in 8.0.0 but we do not know today if it will actually be compatible with &gt;= 8.0.0.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">conditions:
  kibana.version: '^7.10.0'</pre>
</div>
</li>
<li class="listitem">
<p>Set the proper package owner (either Github team or personal account)</p>
<p>Good candidates for a team: <code class="literal">elastic/integrations</code>, <code class="literal">elastic/security-service-integrations</code></p>
<p>Update the <code class="literal">.github/CODEOWNERS</code> file accordingly.</p>
</li>
</ol>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_all_integrations"></a>All integrations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_development"></a>Development<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>When you&#8217;re developing integrations and you&#8217;d like to propagate your changes to the package registry, first rebuild the package:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">$ cd packages/apache
$ elastic-package build</pre>
</div>
<p>Then, rebuild and redeploy the Package Registry:</p>
<p><em>It&#8217;s important to execute the following command in the Integrations repository.</em></p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">$ elastic-package stack up -v -d --services package-registry</pre>
</div>
<p>Explanation: it&#8217;s much faster to rebuild and restart the container with the Package Registry, than work with
mounted volumes.</p>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_code_reviewers"></a>Code reviewers<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Ping "Team:Integrations".</p>
<p>Use the team label to notify relevant team members about the incoming pull request.</p>
</li>
</ol>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_manifest_files_2"></a>Manifest files<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Descriptions of configuration options should be as short as possible.</p>
<p>Remember to keep only the meaningful information about the configuration option.</p>
<p>Good candidates: references to the product configuration, accepted string values, explanation.</p>
<p>Bad candidates: <em>Collect metrics from A, B, C, D,&#8230;&#8203; X, Y, Z datasets.</em></p>
</li>
<li class="listitem">
<p>Descriptions should be human readable.</p>
<p>Try to rephrase sentences like: <em>Collect foo_Bar3 metrics</em>, into <em>Collect Foo Bar metrics</em>.</p>
</li>
<li class="listitem">
<p>Description should be easy to understand.</p>
<p>Simplify sentences, don&#8217;t provide information about the input if not required.</p>
<p>Bad candidate: <em>Collect application logs (log input)</em></p>
<p>Good candidates: <em>Collect application logs</em>, <em>Collect standard logs for the application</em></p>
</li>
<li class="listitem">
<p>Letter casing is important for screenshot descriptions.</p>
<p>These descriptions are visualized in the Kibana UI. It would be better experience to have them clean and consistent.</p>
<p>Bad candidate: <em>filebeat running on ec2 machine</em></p>
<p>Good candidates: <em>Filebeat running on AWS EC2 machine</em></p>
</li>
<li class="listitem">
<p>If package relies on some feature or a field, available only in a specific stack or beats version, <code class="literal">kibana.version</code> condition should be adjusted accordingly in the package&#8217;s <code class="literal">manifest.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">conditions:
   kibana.version: '^8.7.0'</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The package version with such condition as above will be only available in Kibana version &gt;=8.7.0</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Changing dashboards and visualizations using an unreleased version of Kibana might be unsafe since the Kibana Team might make changes to the Kibana code and potentially the data models. There is no guarantee that your changes won&#8217;t be broken by the time new Kibana version is released.</p>
</div>
</div>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_ci"></a>CI<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Run <code class="literal">elastic-package check</code> and <code class="literal">elastic-package test</code> locally.</p>
<p>If you want to verify if your integration works as intended, you can execute the same steps as CI:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">$ cd packages/apache
$ elastic-package check -v
$ elastic-package test -v</pre>
</div>
<p>Keep in mind that the <code class="literal">elastic-package test</code> command requires a live cluster running and exported environment variables.
The environment variables can be set with <code class="literal">eval "$(elastic-package stack shellinit)"</code>.</p>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="_fields"></a>Fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/integrations/build-integration.asciidoc">edit</a></h5>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Remove empty fields files.</p>
<p>If you notice that fields file (e.g. <code class="literal">package-fields.yml</code>) doesn&#8217;t contain any field definitions or it defines root only,
feel free to remove it.</p>
<p>Bad candidate:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">- name: mypackage.mydataset
  type: group</pre>
</div>
</li>
</ol>
</div>
</div>

</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="finishing-touches.html">« Finishing touches</a>
</span>
<span class="next">
<a href="upload-a-new-integration.html">Upload an integration to Kibana »</a>
</span>
</div>
</body>
</html>
