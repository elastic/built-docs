<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SQL input | Elastic integrations | Elastic</title>
<meta class="elastic" name="content" content="SQL input | Elastic integrations">

<link rel="home" href="index.html" title="Elastic integrations"/>
<link rel="up" href="index.html" title="Elastic integrations"/>
<link rel="prev" href="spycloud.html" title="SpyCloud Enterprise Protection"/>
<link rel="next" href="squid.html" title="Squid Proxy"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Integrations"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Integrations/Reference"/>
<meta name="DC.subject" content="Integrations"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="spycloud.html">« SpyCloud Enterprise Protection</a>
</span>
<span class="next">
<a href="squid.html">Squid Proxy »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic integrations</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>SQL input</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="sql"></a>SQL input</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
</div></div></div>

<div class="condensed-table">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Version</strong></span></p></td>
<td align="left" valign="top"><p>0.5.0 <span class="Admonishment Admonishment--beta">
[<span class="Admonishment-title u-mono">beta</span>]
<span class="Admonishment-detail">
This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.
</span>
</span> (<a class="xref" href="sql.html#sql-changelog" title="Changelog">View all</a>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Compatible Kibana version(s)</strong></span></p></td>
<td align="left" valign="top"><p>8.13.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Supported Serverless project types</strong></span><br>
 <a class="xref" href="serverless-support.html" title="Supported Serverless project types"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Security<br>
Observability</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Subscription level</strong></span><br>
<a href="/subscriptions" class="ulink" target="_top"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Basic</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The SQL input package allows you to execute custom queries against an SQL database and store the results in Elasticsearch.</p>
<p>This input package supports the below listed databases:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
MySQL
</li>
<li class="listitem">
Oracle
</li>
<li class="listitem">
Microsoft SQL
</li>
<li class="listitem">
PostgreSQL
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="sql-configuration-options-for-the-user"></a>Configuration Options for the User:</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<div class="position-relative"><h4><a id="sql-hosts"></a>Hosts:</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>The host configuration should be specified from where the metrics are to be fetched. It varies depending upon the driver you are running</p>
<div class="position-relative"><h5><a id="sql-mysql"></a>MySQL:</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>The supported configuration takes this form</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">&lt;user&gt;:&lt;password&gt;@tcp(&lt;host&gt;:&lt;port&gt;)/</code>
</li>
</ul>
</div>
<p>Example of supported configuration is as below:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">root:root@tcp(localhost:3306)/</code>
</li>
</ul>
</div>
<div class="position-relative"><h5><a id="sql-oracle"></a>Oracle:</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>The following two types of host configurations are supported:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Old style host configuration :</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">hosts: ["user/pass@0.0.0.0:1521/ORCLPDB1.localdomain"]</code>
</li>
<li class="listitem">
<code class="literal">hosts: ["user/password@0.0.0.0:1521/ORCLPDB1.localdomain as sysdba"]</code>
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>DSN host configuration:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<code class="literal">hosts: ['user="user" password="pass" connectString="0.0.0.0:1521/ORCLPDB1.localdomain"']</code>
</li>
<li class="listitem">
<code class="literal">hosts: ['user="user" password="password" connectString="host:port/service_name" sysdba=true']</code>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="position-relative"><h5><a id="sql-mssql"></a>MSSQL:</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>The supported configuration takes this form</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">sqlserver://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;</code>
</li>
</ul>
</div>
<p>Example of supported configurations is as below:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">sqlserver://root:test@localhost</code>
</li>
</ul>
</div>
<div class="position-relative"><h5><a id="sql-postgresql"></a>PostgreSQL:</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>The supported configuration takes this form</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">postgres://&lt;user&gt;:&lt;password&gt;@&lt;connection_string&gt;</code>
</li>
</ul>
</div>
<p>Example of supported configuration is as below:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">postgres://postgres:postgres@localhost:5432/stuff?sslmode=disable</code>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the password contains the backslash (<code class="literal">\</code>) character, it must be escaped with a backslash. For example, if the password is <code class="literal">my_password</code>, it should be written as <code class="literal">my\_password</code>.</p>
</div>
</div>
<div class="position-relative"><h4><a id="sql-driver"></a>Driver</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>Specify the driver for which you want to run the queries. Below are the supported drivers:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
mysql
</li>
<li class="listitem">
oracle
</li>
<li class="listitem">
mssql
</li>
<li class="listitem">
postgres
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="sql-sql_queries"></a>SQL_Queries</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>Receives the list of queries to execute. query and response_format is repeated to get multiple query inputs.</p>
<p>Eg:<br>
sql_queries:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>query: SHOW GLOBAL STATUS LIKE <em>Innodb_system%</em></p>
<p>response_format: variables</p>
</li>
</ul>
</div>
<p>response_format: This can be either variables or table</p>
<p>variables:
Expects a two-column table that looks like a key/value result. The left column is considered a key and the right column the value. This mode generates a single event on each fetch operation.</p>
<p>table:
Expects any number of columns. This mode generates a single event for each row.</p>
<p>For more examples of response format pelase refer <a href="/guide/en/beats/metricbeat/current/metricbeat-module-sql.html" class="ulink" target="_top">here</a></p>
<div class="position-relative"><h4><a id="sql-merge-results"></a>Merge Results</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<p>Merge multiple queries into a single event.</p>
<p>Multiple queries will create multiple events, one for each query.  It may be preferable to create a single event by combining the metrics together in a single event.</p>
<p>This feature can be enabled using the <code class="literal">merge_results</code> config.</p>
<p><code class="literal">merge_results</code> can merge queries having response format as "variable".
However, for queries with a response format as "table", a merge is possible only if each table query produces a single row.</p>
<p>For example, if we have 2 queries as below for PostgreSQL:</p>
<p>sql_queries:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
query: "SELECT blks_hit,blks_read FROM pg_stat_database LIMIT 1;"
response_format: table
</li>
<li class="listitem">
query: "SELECT checkpoints_timed,checkpoints_req FROM pg_stat_bgwriter;"
response_format: table
</li>
</ul>
</div>
<p>The <code class="literal">merge_results</code> feature will create a combined event, where <code class="literal">blks_hit</code>, <code class="literal">blks_read</code>, <code class="literal">checkpoints_timed</code> and <code class="literal">checkpoints_req</code> are part of the same event.</p>
<div class="position-relative"><h3><a id="sql-changelog"></a>Changelog</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/sql/index.asciidoc">edit</a></div>
<details>
<summary class="title"><span class="strong strong"><strong>Changelog</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Version</th>
<th align="left" valign="top">Details</th>
<th align="left" valign="top">Kibana version(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.5.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/10171" class="ulink" target="_top">View pull request</a>)<br>
ECS version updated to 8.11.0. Update the kibana constraint to ^8.13.0. Modified the field definitions to remove ECS fields made redundant by the ecs@mappings component template.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.4.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6358" class="ulink" target="_top">View pull request</a>)<br>
Add <code class="literal">condition</code> and <code class="literal">processors</code> settings.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.3.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6922" class="ulink" target="_top">View pull request</a>)<br>
Add merge_results feature</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6488" class="ulink" target="_top">View pull request</a>)<br>
Add system test cases.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6451" class="ulink" target="_top">View pull request</a>)<br>
Update Kibana version to 8.8.0</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.1.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6298" class="ulink" target="_top">View pull request</a>)<br>
Rename ownership from obs-service-integrations to obs-infraobs-integrations</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.0.3</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6212" class="ulink" target="_top">View pull request</a>)<br>
Add base fields mappings</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.0.2</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6066" class="ulink" target="_top">View pull request</a>)<br>
Updating the logo</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.0.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/5167" class="ulink" target="_top">View pull request</a>)<br>
Initial draft of the SQL Input Package</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="spycloud.html">« SpyCloud Enterprise Protection</a>
</span>
<span class="next">
<a href="squid.html">Squid Proxy »</a>
</span>
</div>
</body>
</html>
