<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Custom AWS Log Integration | Elastic integrations | Elastic</title>
<meta class="elastic" name="content" content="Custom AWS Log Integration | Elastic integrations">

<link rel="home" href="index.html" title="Elastic integrations"/>
<link rel="up" href="aws.html" title="AWS Integration"/>
<link rel="prev" href="aws-lambda.html" title="AWS Lambda"/>
<link rel="next" href="aws-firewall.html" title="AWS Network Firewall"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Integrations"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Integrations/Reference"/>
<meta name="DC.subject" content="Integrations"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="aws-lambda.html">« AWS Lambda</a>
</span>
<span class="next">
<a href="aws-firewall.html">AWS Network Firewall »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic integrations</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="aws.html">AWS Integration</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Custom AWS Log Integration</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/do-not-delete_legacy-docs/dist/aws_logs/index.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/reference/integrations/aws_logs">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="aws_logs"></a>Custom AWS Log Integration</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/do-not-delete_legacy-docs/dist/aws_logs/index.asciidoc">edit</a></div>
</div></div></div>

<div class="condensed-table">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Version</strong></span></p></td>
<td align="left" valign="top"><p>1.8.0 (<a class="xref" href="aws_logs.html#aws_logs-changelog" title="Changelog">View all</a>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Compatible Kibana version(s)</strong></span></p></td>
<td align="left" valign="top"><p>8.16.5 or higher<br>
9.0.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Supported Serverless project types</strong></span><br>
 <a class="xref" href="serverless-support.html" title="Supported Serverless project types"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Security<br>
Observability</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Subscription level</strong></span><br>
<a href="/subscriptions" class="ulink" target="_top"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Basic</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Level of support</strong></span><br>
<a class="xref" href="support.html" title="Level of support"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Elastic</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The custom AWS input integration offers users two ways to collect logs from AWS: from an <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/ServerLogs.html" class="ulink" target="_top">S3 bucket</a> (with or without SQS notification) and from <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html" class="ulink" target="_top">CloudWatch</a>.
Custom ingest pipelines may be added by adding the name to the pipeline configuration option, creating custom ingest pipelines can be done either through the API or the <em>Ingest Node Pipeline UI</em> (use the <a href="/guide/en/kibana/8.19/introduction.html#kibana-navigation-search" class="ulink" target="_top">global search field</a> to search for "ingest pipelines").</p>
<div class="position-relative"><h4><a id="aws_logs-collecting-logs-from-s3-bucket"></a>Collecting logs from S3 bucket</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/do-not-delete_legacy-docs/dist/aws_logs/index.asciidoc">edit</a></div>
<p>When collecting logs from S3 bucket is enabled, users can retrieve logs from S3
objects that are pointed to by S3 notification events read from an SQS queue or
directly polling list of S3 objects in an S3 bucket.</p>
<p>The use of SQS notification is preferred: polling list of S3 objects is
expensive in terms of performance and costs and should be preferably used only
when no SQS notification can be attached to the S3 buckets. This input
integration also supports S3 notification from SNS to SQS.</p>
<p>You can enable SQS notification method by setting <code class="literal">queue_url</code> configuration value.
You can enable S3 bucket list polling method by setting <code class="literal">bucket_arn</code>, <code class="literal">access_point_arn</code>
or <code class="literal">non_aws_bucket_name</code> configuration values and <code class="literal">number_of_workers</code> value.</p>
<p><code class="literal">queue_url</code>, <code class="literal">bucket_arn</code>, <code class="literal">access_point_arn</code> and <code class="literal">non_aws_bucket_name</code> cannot be set
at the same time and at least one of these value must be set.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To access SQS and S3, these <a href="/guide/en/beats/filebeat/current/filebeat-input-aws-s3.html#_aws_permissions_2" class="ulink" target="_top">specific AWS permissions</a> are required.</p>
</div>
</div>
<div class="position-relative"><h4><a id="aws_logs-collecting-logs-from-cloudwatch"></a>Collecting logs from CloudWatch</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/do-not-delete_legacy-docs/dist/aws_logs/index.asciidoc">edit</a></div>
<p>When collecting logs from CloudWatch is enabled, users can retrieve logs from
all log streams in a specific log group. <code class="literal">filterLogEvents</code> AWS API is used to
list log events from the specified log group. Amazon CloudWatch Logs can be used
to store log files from Amazon Elastic Compute Cloud(EC2), AWS CloudTrail,
Route53, and other sources.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To access aws-cloudwatch, these <a href="/guide/en/beats/filebeat/current/filebeat-input-aws-cloudwatch.html#_aws_permissions" class="ulink" target="_top">specific AWS permissions</a> are required.</p>
</div>
</div>
<div class="position-relative"><h4><a id="aws_logs-changelog"></a>Changelog</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/do-not-delete_legacy-docs/dist/aws_logs/index.asciidoc">edit</a></div>
<details>
<summary class="title"><span class="strong strong"><strong>Changelog</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Version</th>
<th align="left" valign="top">Details</th>
<th align="left" valign="top">Kibana version(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.8.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/12645" class="ulink" target="_top">View pull request</a>)<br>
Add support to configure start_timestamp and ignore_older configurations for AWS S3 backed inputs.</p>
</td>
<td align="left" valign="top"><p>8.16.5 or higher<br>
9.0.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.7.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/12637" class="ulink" target="_top">View pull request</a>)<br>
Add support for Kibana <code class="literal">9.0.0</code></p>
</td>
<td align="left" valign="top"><p>8.16.2 or higher<br>
9.0.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.6.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/12223" class="ulink" target="_top">View pull request</a>)<br>
Add missing category.</p>
</td>
<td align="left" valign="top"><p>8.16.2 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.6.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/12154" class="ulink" target="_top">View pull request</a>)<br>
Add support for Access Point ARN when collecting logs via the AWS S3 Bucket.</p>
</td>
<td align="left" valign="top"><p>8.16.2 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.5.2</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/12100" class="ulink" target="_top">View pull request</a>)<br>
Fix dupplicated keys buffer_size, fips_enabled, in agent template.</p>
</td>
<td align="left" valign="top"><p>8.16.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.5.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/11891" class="ulink" target="_top">View pull request</a>)<br>
Add required permissions for Custom AWS Logs.</p>
</td>
<td align="left" valign="top"><p>8.16.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.5.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/11484" class="ulink" target="_top">View pull request</a>)<br>
Add option to check linked accounts when using log group prefixes to derive matching log groups</p>
</td>
<td align="left" valign="top"><p>8.16.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.4.2</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/11817" class="ulink" target="_top">View pull request</a>)<br>
Add ingest pipeline input option back, which was removed in 1.4.1.</p>
</td>
<td align="left" valign="top"><p>8.12.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.4.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/11681" class="ulink" target="_top">View pull request</a>)<br>
Remove ingest pipeline input option.</p>
</td>
<td align="left" valign="top"><p>8.12.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.4.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/10789" class="ulink" target="_top">View pull request</a>)<br>
Update file_selectors field to be able to receive multiline configuration</p>
</td>
<td align="left" valign="top"><p>8.12.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.3.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/10480" class="ulink" target="_top">View pull request</a>)<br>
Update max_number_of_messages parameter description</p>
</td>
<td align="left" valign="top"><p>8.12.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.3.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/9730" class="ulink" target="_top">View pull request</a>)<br>
Improve clarity and validity of system testing.</p>
</td>
<td align="left" valign="top"><p>8.12.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.2.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/9512" class="ulink" target="_top">View pull request</a>)<br>
Add a custom settings variable to allow passing additional settings to the input.</p>
</td>
<td align="left" valign="top"><p>8.12.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.1.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/9019" class="ulink" target="_top">View pull request</a>)<br>
Update the package format_version to 3.0.2 and enable <em>secret</em> for the sensitive fields</p>
</td>
<td align="left" valign="top"><p>8.12.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>1.0.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/8991" class="ulink" target="_top">View pull request</a>)<br>
Release package as GA.</p>
</td>
<td align="left" valign="top"><p>8.0.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.6.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/8041" class="ulink" target="_top">View pull request</a>)<br>
Update the package format_version to 3.0.0.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.5.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/7481" class="ulink" target="_top">View pull request</a>)<br>
Remove duplicated number_of_workers settings</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.5.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6841" class="ulink" target="_top">View pull request</a>)<br>
Add permissions to reroute events to logs-<span class="strong strong"><strong>-</strong></span> for generic datastream</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.4.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/6081" class="ulink" target="_top">View pull request</a>)<br>
Add multiline support for using s3 input</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.3.3</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/5123" class="ulink" target="_top">View pull request</a>)<br>
Added categories and/or subcategories.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.3.2</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/4917" class="ulink" target="_top">View pull request</a>)<br>
Add required field number of workers to support non aws buckets, and add default value.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.3.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/4859" class="ulink" target="_top">View pull request</a>)<br>
Add latency config parameter for aws-cloudwatch input</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.3.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/4158" class="ulink" target="_top">View pull request</a>)<br>
Expose Default Region setting to UI</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.5</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/4103" class="ulink" target="_top">View pull request</a>)<br>
Set default endpoint to empty string</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.4</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/3881" class="ulink" target="_top">View pull request</a>)<br>
Fix proxy URL documentation rendering.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.3</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/3610" class="ulink" target="_top">View pull request</a>)<br>
Fix misspelling of Log Stream Prefix variable in manifest for aws-cloudwatch input</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.2</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/2819" class="ulink" target="_top">View pull request</a>)<br>
update readme file</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/2819" class="ulink" target="_top">View pull request</a>)<br>
Add kibana version constraint</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.2.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/2710" class="ulink" target="_top">View pull request</a>)<br>
Move s3 input and cloudwatch input into the same generic data stream</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.1.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/2353" class="ulink" target="_top">View pull request</a>)<br>
initial release</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="aws-lambda.html">« AWS Lambda</a>
</span>
<span class="next">
<a href="aws-firewall.html">AWS Network Firewall »</a>
</span>
</div>
</body>
</html>
