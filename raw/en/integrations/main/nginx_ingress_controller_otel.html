<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Nginx Ingress Controller Integration | Elastic integrations | Elastic</title>
<meta class="elastic" name="content" content="Nginx Ingress Controller Integration | Elastic integrations">

<link rel="home" href="index.html" title="Elastic integrations"/>
<link rel="up" href="nginx-intro.html" title="Nginx"/>
<link rel="prev" href="nginx_ingress_controller.html" title="Nginx Ingress Controller Integration"/>
<link rel="next" href="okta-intro.html" title="Okta"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Integrations"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Integrations/Reference"/>
<meta name="DC.subject" content="Integrations"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="nginx_ingress_controller.html">« Nginx Ingress Controller Integration</a>
</span>
<span class="next">
<a href="okta-intro.html">Okta »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic integrations</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="nginx-intro.html">Nginx</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Nginx Ingress Controller Integration</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="nginx_ingress_controller_otel"></a>Nginx Ingress Controller Integration</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
</div></div></div>

<div class="condensed-table">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Version</strong></span></p></td>
<td align="left" valign="top"><p>0.1.0 <span class="Admonishment Admonishment--beta">
[<span class="Admonishment-title u-mono">beta</span>]
<span class="Admonishment-detail">
This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.
</span>
</span> (<a class="xref" href="nginx_ingress_controller_otel.html#nginx_ingress_controller_otel-changelog" title="Changelog">View all</a>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Compatible Kibana version(s)</strong></span></p></td>
<td align="left" valign="top"><p>8.16.0 or higher<br>
9.0.0 or higher</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Supported Serverless project types</strong></span><br>
 <a class="xref" href="serverless-support.html" title="Supported Serverless project types"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Security<br>
Observability</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Subscription level</strong></span><br>
<a href="/subscriptions" class="ulink" target="_top"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Basic</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Level of support</strong></span><br>
<a class="xref" href="support.html" title="Level of support"><span class="small">What&#8217;s this?</span></a></p></td>
<td align="left" valign="top"><p>Elastic</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This integration collects and parses logs from <a href="https://github.com/kubernetes/ingress-nginx" class="ulink" target="_top">Nginx Ingress Controller</a>
instances. It can parse access and error logs created by the ingress.</p>
<div class="position-relative"><h4><a id="nginx_ingress_controller_otel-compatibility"></a>Compatibility</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
<p>The integration was tested with the Nginx Ingress Controller v0.30.0 and v0.40.2. The log format is described
<a href="https://github.com/kubernetes/ingress-nginx/blob/nginx-0.30.0/docs/user-guide/nginx-configuration/log-format.md" class="ulink" target="_top">here</a>.</p>
<p><span class="strong strong"><strong>EDOT collector supported versions:</strong></span> 8.16.0</p>
<p><span class="strong strong"><strong>OpenTelemetry collector components:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Filelog receiver v0.112.0+
</li>
<li class="listitem">
Transform processor v0.112.0+
</li>
<li class="listitem">
Resource detector processor v0.112.0+
</li>
<li class="listitem">
(Optional) GeoIP processor v0.112.0+: The optional GeoIP processor is not available in the EDOT collector yet. To use this processor, you must switch to the OpenTelemetry Contrib collector instead.
</li>
<li class="listitem">
Elasticsearch exporter v0.112.0+
</li>
<li class="listitem">
Filestorage extension v0.112.0+
</li>
</ul>
</div>
<div class="position-relative"><h4><a id="nginx_ingress_controller_otel-usage"></a>Usage</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">extensions:
  file_storage:

receivers:
  filelog:
    include_file_path: true
    include: [/var/log/pods/*nginx-ingress-nginx-controller*/controller/*.log]
    operators:
      - id: container-parser
        type: container

processors:
  transform/parse_nginx_ingress_error/log:
    error_mode: ignore
    log_statements:
      - context: log
        conditions:
            # ^[EWF]: Matches logs starting with E (Error), W (Warning), or F (Fatal).
            # \d{4}: Matches the four digits after the log level (representing the date, like 1215 for December 15).
            # .+: Matches the rest of the log line (the message part, without needing specific timestamp or file format).
          - IsMatch(body, "^[EWF]\\d{4} .+")
        statements:
          - set(body, ExtractGrokPatterns(body, "%{LOG_LEVEL:log.level}%{MONTHNUM}%{MONTHDAY} %{HOUR}:%{MINUTE}:%{SECOND}\\.%{MICROS}%{SPACE}%{NUMBER:thread_id} %{SOURCE_FILE:source.file.name}:%{NUMBER:source.line_number}\\\] %{GREEDYMULTILINE:message}", true, ["LOG_LEVEL=[A-Z]", "MONTHNUM=(0[1-9]|1[0-2])", "MONTHDAY=(0[1-9]|[12][0-9]|3[01])", "HOUR=([01][0-9]|2[0-3])", "MINUTE=[0-5][0-9]", "SECOND=[0-5][0-9]", "MICROS=[0-9]{6}", "SOURCE_FILE=[^:]+", "GREEDYMULTILINE=(.|\\n)*"]))

          - set(attributes["data_stream.dataset"], "nginx_ingress_controller.error")

          # LogRecord event: https://github.com/open-telemetry/semantic-conventions/pull/982
          - set(attributes["event.name"], "nginx_ingress_controller.error")

  transform/parse_nginx_ingress_access/log:
    error_mode: ignore
    log_statements:
      - context: log
        conditions:
            #     # ^([0-9a-fA-F:.]+): Matches the remote address (IPv4 or IPv6 format).
            #     # [^ ]+: Matches the remote user (including the hyphen for missing user).
            #     # .*[0-9a-fA-F]+$: Ensures the log line ends with a hexadecimal string (request ID).
          - IsMatch(body, "^([0-9a-fA-F:.]+) - [^ ]+ .*[0-9a-fA-F]+$")
        statements:
          # Log format: https://github.com/kubernetes/ingress-nginx/blob/nginx-0.30.0/docs/user-guide/nginx-configuration/log-format.md
          # Based on https://github.com/elastic/integrations/blob/main/packages/nginx_ingress_controller/data_stream/access/elasticsearch/ingest_pipeline/default.yml
          - set(body, ExtractGrokPatterns(body, "(%{NGINX_HOST} )?\"?(?:%{NGINX_ADDRESS_LIST:nginx_ingress_controller.access.remote_ip_list}|%{NOTSPACE:source.address}) - (-|%{DATA:user.name}) \\\[%{HTTPDATE:nginx_ingress_controller.access.time}\\\] \"%{DATA:nginx_ingress_controller.access.info}\" %{NUMBER:http.response.status_code:long} %{NUMBER:http.response.body.size:long} \"(-|%{DATA:http.request.referrer})\" \"(-|%{DATA:user_agent.original})\" %{NUMBER:http.request.size:long} %{NUMBER:http.request.time:double} \\\[%{DATA:upstream.name}\\\] \\\[%{DATA:upstream.alternative_name}\\\] (%{UPSTREAM_ADDRESS_LIST:upstream.address}|-) (%{UPSTREAM_RESPONSE_SIZE_LIST:upstream.response.size_list}|-) (%{UPSTREAM_RESPONSE_TIME_LIST:upstream.response.time_list}|-) (%{UPSTREAM_RESPONSE_STATUS_CODE_LIST:upstream.response.status_code_list}|-) %{GREEDYDATA:http.request.id}", true, ["NGINX_HOST=(?:%{IP:destination.ip}|%{NGINX_NOTSEPARATOR:destination.domain})(:%{NUMBER:destination.port})?", "NGINX_NOTSEPARATOR=[^\t ,:]+", "NGINX_ADDRESS_LIST=(?:%{IP}|%{WORD}) (\"?,?\\s*(?:%{IP}|%{WORD}))*", "UPSTREAM_ADDRESS_LIST=(?:%{IP}(:%{NUMBER})?)(\"?,?\\s*(?:%{IP}(:%{NUMBER})?))*", "UPSTREAM_RESPONSE_SIZE_LIST=(?:%{NUMBER})(\"?,?\\s*(?:%{NUMBER}))*", "UPSTREAM_RESPONSE_TIME_LIST=(?:%{NUMBER})(\"?,?\\s*(?:%{NUMBER}))*", "UPSTREAM_RESPONSE_STATUS_CODE_LIST=(?:%{NUMBER})(\"?,?\\s*(?:%{NUMBER}))*", "IP=(?:\\\[?%{IPV6}\\\]?|%{IPV4})"]))
          - merge_maps(body, ExtractGrokPatterns(body["nginx_ingress_controller.access.info"], "%{WORD:http.request.method} %{DATA:url.original} HTTP/%{NUMBER:http.version}", true), "upsert")
          - delete_key(body, "nginx_ingress_controller.access.info")

          # Extra URL parsing
          - merge_maps(body, URL(body["url.original"]), "upsert")
          - set(body["url.domain"], body["destination.domain"])

          # set source.address as attribute for GeoIP processor
          - set(attributes["source.address"], body["source.address"])

          - set(attributes["data_stream.dataset"], "nginx_ingress_controller.access")

          # LogRecord event: https://github.com/open-telemetry/semantic-conventions/pull/982
          - set(attributes["event.name"], "nginx_ingress_controller.access")
          - set(attributes["event.timestamp"], String(Time(body["nginx_ingress_controller.access.time"], "%d/%b/%Y:%H:%M:%S %z")))

          - delete_key(body, "nginx_ingress_controller.access.time")

      - context: log
        conditions:
            # Extract user agent when not empty
          - body["user_agent.original"] != nil
        statements:
          # Extract UserAgent
          # TODO: UserAgent OTTL function does not provide os specific metadata yet: https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/35458
          - merge_maps(body, UserAgent(body["user_agent.original"]), "upsert")

      - context: log
        conditions:
          - body["upstream.response.time_list"] != nil
        statements:
          # Extract comma separated list
          # TODO: We would like to get the sum over all upstream.response.time_list values instead of providing a slice with all the values
          - set(body["upstream.response.time"], Split(body["upstream.response.time_list"], ","))
          - delete_key(body, "upstream.response.time_list")

      - context: log
        conditions:
          - body["upstream.response.size_list"] != nil
        statements:
          # Extract comma separated list
          # TODO: We would like to get the Last upstream.response.size_list value instead of providing a slice with all the values
          # See: https://github.com/elastic/integrations/blob/main/packages/nginx_ingress_controller/data_stream/access/elasticsearch/ingest_pipeline/default.yml#L94b
          - set(body["upstream.response.size"], Split(body["upstream.response.size_list"], ","))
          - delete_key(body, "upstream.response.size_list")

      - context: log
        conditions:
          - body["upstream.response.status_code_list"] != nil
        statements:
          # Extract comma separated list
          # TODO: We would like to get the Last upstream.response.status_code_list value instead of providing a slice with all the values
          - set(body["upstream.response.status_code"], Split(body["upstream.response.status_code_list"], ","))
          - delete_key(body, "upstream.response.status_code_list")

  # TODO: add other detectors
  resourcedetection/system:
    detectors: ["system"]
    system:
      hostname_sources: [ "os" ]
      resource_attributes:
        host.name:
          enabled: true
        host.id:
          enabled: false
        host.arch:
          enabled: true

  # geoip:
  #   context: record
  #   providers:
  #     maxmind:
  #       database_path: /tmp/GeoLite2-City.mmdb

exporters:
  elasticsearch:
    endpoints:
    - YOUR_ELASTICSEARCH_ENDPOINT
    api_key: YOUR_ELASTICSEARCH_API_KEY
    logs_dynamic_index:
      enabled: true
    mapping:
      mode: otel
  debug:
    verbosity: detailed

service:
  extensions: [file_storage]
  pipelines:
    logs:
      receivers: [filelog]
      processors: [transform/parse_nginx_ingress_access/log, transform/parse_nginx_ingress_error/log, resourcedetection/system]
      # Uncomment the following line if geoip is configured
      # processors: [transform/parse_nginx_ingress_access/log, transform/parse_nginx_ingress_error/log, geoip, resourcedetection/system]
      exporters: [debug, elasticsearch]</pre>
</div>
<p>Don&#8217;t forget to replace:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">YOUR_ELASTICSEARCH_ENDPOINT</code>: your Elasticsearch endpoint (<em>with</em> <code class="literal">https://</code> prefix example: <code class="literal">https://1234567.us-west2.gcp.elastic-cloud.com:443</code>).
</li>
<li class="listitem">
<code class="literal">YOUR_ELASTICSEARCH_API_KEY</code>: your Elasticsearch API Key
</li>
</ul>
</div>
<div class="position-relative"><h5><a id="nginx_ingress_controller_otel-geoip-metadata"></a>GeoIP metadata</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
<p>The Geographical IP metadata for incoming Nginx Ingress controller requests is disabled by default. To enable it, you need to provide a local GeoIP database path in the processors' configuration:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Uncomment the GeoIP processors configuration:
</li>
</ol>
</div>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">geoip:
 context: record
 providers:
   maxmind:
     database_path: /tmp/GeoLite2-City.mmdb</pre>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Include the processors in the logs pipeline:
</li>
</ol>
</div>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">processors: [transform/parse_nginx_ingress_access/log, transform/parse_nginx_ingress_error/log, geoip, resourcedetection/system]</pre>
</div>
<div class="position-relative"><h4><a id="nginx_ingress_controller_otel-logs"></a>Logs</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
<div class="position-relative"><h5><a id="nginx_ingress_controller_otel-access-logs"></a>Access Logs</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
<p>The <code class="literal">access</code> data stream collects the Nginx Ingress Controller access logs.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Exported fields</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Field</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>@timestamp</p></td>
<td align="left" valign="top"><p>Event timestamp.</p></td>
<td align="left" valign="top"><p>date</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>data_stream.dataset</p></td>
<td align="left" valign="top"><p>Data stream dataset.</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>data_stream.namespace</p></td>
<td align="left" valign="top"><p>Data stream namespace.</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>data_stream.type</p></td>
<td align="left" valign="top"><p>Data stream type.</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>event.name</p></td>
<td align="left" valign="top"><p>Event name</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.cluster.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.container.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.container.restart_count</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.deployment.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.namespace.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.node.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.pod.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.pod.start_time</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>date</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.account.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.availability_zone</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.instance.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.platform</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.provider</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.deployment.environment</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.arch</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.cache.l2.size</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.family</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.model.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.model.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.stepping</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.vendor.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.ip</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.mac</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.os.type</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.os.description</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.request.method</p></td>
<td align="left" valign="top"><p>HTTP request method. The value should retain its casing from the original event. For example, <code class="literal">GET</code>, <code class="literal">get</code>, and <code class="literal">GeT</code> are all considered valid values for this field.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.request.referrer</p></td>
<td align="left" valign="top"><p>Referrer for this HTTP request.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.response.body.size</p></td>
<td align="left" valign="top"><p>Size in bytes of the response body.</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.response.status_code</p></td>
<td align="left" valign="top"><p>HTTP response status code.</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.version</p></td>
<td align="left" valign="top"><p>HTTP version.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attribute.log.file.path</p></td>
<td align="left" valign="top"><p>Full path to the log file this event came from, including the file name. It should include the drive letter, when appropriate. If the event wasn&#8217;t read from a log file, do not populate this field.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attribute.log.iostream</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.request.id</p></td>
<td align="left" valign="top"><p>The randomly generated ID of the request</p></td>
<td align="left" valign="top"><p>text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.request.size</p></td>
<td align="left" valign="top"><p>The request length (including request line, header, and request body)</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.http.request.time</p></td>
<td align="left" valign="top"><p>Time elapsed since the first bytes were read from the client</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.upstream.address</p></td>
<td align="left" valign="top"><p>The IP address of the upstream server. If several servers were contacted during request processing, their addresses are separated by commas.</p></td>
<td align="left" valign="top"><p>ip</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.upstream.name</p></td>
<td align="left" valign="top"><p>The name of the upstream.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.upstream.response.size</p></td>
<td align="left" valign="top"><p>The length of the response obtained from the upstream server</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.upstream.response.status_code</p></td>
<td align="left" valign="top"><p>The status code of the response obtained from the upstream server</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.upstream.response.time</p></td>
<td align="left" valign="top"><p>The time spent on receiving the response from the upstream server as seconds with millisecond resolution</p></td>
<td align="left" valign="top"><p>double</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attribute.source.address</p></td>
<td align="left" valign="top"><p>Some event source addresses are defined ambiguously. The event will sometimes list an IP, a domain or a unix socket.  You should always store the raw address in the <code class="literal">.address</code> field. Then it should be duplicated to <code class="literal">.ip</code> or <code class="literal">.domain</code>, depending on which one it is.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attribute.geo.city_name</p></td>
<td align="left" valign="top"><p>City name.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attribute.geo.continent_name</p></td>
<td align="left" valign="top"><p>Name of the continent.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attributes.geo.country_iso_code</p></td>
<td align="left" valign="top"><p>Country ISO code.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attributes.geo.country_name</p></td>
<td align="left" valign="top"><p>Country name.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attributes.geo.location.lat</p></td>
<td align="left" valign="top"><p>Latitude.</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attributes.geo.location.lon</p></td>
<td align="left" valign="top"><p>Longitude.</p></td>
<td align="left" valign="top"><p>geo_point</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attributes.geo.region_iso_code</p></td>
<td align="left" valign="top"><p>Region ISO code.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attributes.geo.region_name</p></td>
<td align="left" valign="top"><p>Region name.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.url.domain</p></td>
<td align="left" valign="top"><p>Domain of the url, such as "http://www.elastic.co[www.elastic.co]". In some cases a URL may refer to an IP and/or port directly, without a domain name. In this case, the IP address would go to the <code class="literal">domain</code> field. If the URL contains a literal IPv6 address enclosed by <code class="literal">[</code> and <code class="literal">]</code> (IETF RFC 2732), the <code class="literal">[</code> and <code class="literal">]</code> characters should also be captured in the <code class="literal">domain</code> field.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.url.extension</p></td>
<td align="left" valign="top"><p>The field contains the file extension from the original request url, excluding the leading dot. The file extension is only set if it exists, as not every url has a file extension. The leading period must not be included. For example, the value must be "png", not ".png". Note that when the file name has multiple extensions (example.tar.gz), only the last one should be captured ("gz", not "tar.gz").</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.url.original</p></td>
<td align="left" valign="top"><p>Unmodified original url as seen in the event source. Note that in network monitoring, the observed URL may be a full URL, whereas in access logs, the URL is often just represented as a path. This field is meant to represent the URL as it was observed, complete or not.</p></td>
<td align="left" valign="top"><p>wildcard</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.url.path</p></td>
<td align="left" valign="top"><p>Path of the request, such as "/search".</p></td>
<td align="left" valign="top"><p>wildcard</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.url.scheme</p></td>
<td align="left" valign="top"><p>Scheme of the request, such as "https". Note: The <code class="literal">:</code> is not part of the scheme.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.user.name</p></td>
<td align="left" valign="top"><p>Short name or login of the user.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.user_agent.name</p></td>
<td align="left" valign="top"><p>Name of the user agent.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.user_agent.original</p></td>
<td align="left" valign="top"><p>Unparsed user_agent string.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.user_agent.version</p></td>
<td align="left" valign="top"><p>Version of the user agent.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
<div class="position-relative"><h5><a id="nginx_ingress_controller_otel-error-logs"></a>Error Logs</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
<p>The <code class="literal">error</code> data stream collects the Nginx Ingress Controller error logs.</p>
<details>
<summary class="title"><span class="strong strong"><strong>Exported fields</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Field</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>@timestamp</p></td>
<td align="left" valign="top"><p>Event timestamp.</p></td>
<td align="left" valign="top"><p>date</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>data_stream.dataset</p></td>
<td align="left" valign="top"><p>Data stream dataset.</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>data_stream.namespace</p></td>
<td align="left" valign="top"><p>Data stream namespace.</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>data_stream.type</p></td>
<td align="left" valign="top"><p>Data stream type.</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>event.name</p></td>
<td align="left" valign="top"><p>Event name</p></td>
<td align="left" valign="top"><p>constant_keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.cluster.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.container.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.container.restart_count</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.deployment.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.namespace.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.node.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.pod.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.k8s.pod.start_time</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>date</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.account.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.availability_zone</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.instance.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.platform</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.cloud.provider</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.deployment.environment</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.arch</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.cache.l2.size</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.family</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.model.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.model.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.stepping</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.cpu.vendor.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.id</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.ip</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.mac</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.host.name</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.os.type</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>resource.attributes.os.description</p></td>
<td align="left" valign="top"><p></p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attribute.log.file.path</p></td>
<td align="left" valign="top"><p>Full path to the log file this event came from, including the file name. It should include the drive letter, when appropriate. If the event wasn&#8217;t read from a log file, do not populate this field.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>attributes.log.level</p></td>
<td align="left" valign="top"><p>Original log level of the log event. If the source of the event provides a log level or textual severity, this is the one that goes in <code class="literal">log.level</code>. If your source doesn&#8217;t specify one, you may put your event transport&#8217;s severity here (e.g. Syslog severity). Some examples are <code class="literal">warn</code>, <code class="literal">err</code>, <code class="literal">i</code>, <code class="literal">informational</code>.</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.message</p></td>
<td align="left" valign="top"><p>For log events the message field contains the log message, optimized for viewing in a log viewer. For structured logs without an original message field, other fields can be concatenated to form a human-readable summary of the event. If multiple messages exist, they can be combined into one message.</p></td>
<td align="left" valign="top"><p>match_only_text</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.source.file.name</p></td>
<td align="left" valign="top"><p>Source file</p></td>
<td align="left" valign="top"><p>keyword</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.source.line_number</p></td>
<td align="left" valign="top"><p>Source line number</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>body.structured.thread_id</p></td>
<td align="left" valign="top"><p>Thread ID</p></td>
<td align="left" valign="top"><p>long</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
<div class="position-relative"><h4><a id="nginx_ingress_controller_otel-changelog"></a>Changelog</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/integration-docs/edit/main/dist/nginx_ingress_controller_otel/index.asciidoc">edit</a></div>
<details>
<summary class="title"><span class="strong strong"><strong>Changelog</strong></span></summary>
<div class="content">
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Version</th>
<th align="left" valign="top">Details</th>
<th align="left" valign="top">Kibana version(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.1.0</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/12475" class="ulink" target="_top">View pull request</a>)<br>
Add support for Kibana <code class="literal">9.0.0</code>.</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.0.3</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/11879" class="ulink" target="_top">View pull request</a>)<br>
Fix HTTP response status code breakdown</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.0.2</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-bug"></span> <span class="strong strong"><strong>Bug fix</strong></span> (<a href="https://github.com/elastic/integrations/pull/11625" class="ulink" target="_top">View pull request</a>)<br>
Use body.structured field for dashboards</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>0.0.1</strong></span></p></td>
<td align="left" valign="top">
<p><span class="eui-icon icon-checkInCircleFilled"></span> <span class="strong strong"><strong>Enhancement</strong></span> (<a href="https://github.com/elastic/integrations/pull/11285" class="ulink" target="_top">View pull request</a>)<br>
Initial Nginx Ingress Controller Logs of the OpenTelemetry package</p>
</td>
<td align="left" valign="top"><p>&mdash;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</details>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="nginx_ingress_controller.html">« Nginx Ingress Controller Integration</a>
</span>
<span class="next">
<a href="okta-intro.html">Okta »</a>
</span>
</div>
</body>
</html>
