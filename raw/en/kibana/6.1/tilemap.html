<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Coordinate Maps | Kibana User Guide [6.1] | Elastic</title>
<link rel="home" href="index.html" title="Kibana User Guide [6.1]"/>
<link rel="up" href="visualize.html" title="Visualize"/>
<link rel="prev" href="pie-chart.html" title="Pie Charts"/>
<link rel="next" href="regionmap.html" title="Region Maps"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/6.1"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="6.1"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>WARNING</strong>: Version 6.1 of Kibana has passed its 
  <a href="https://www.elastic.co/support/eol">EOL date</a>. 
</p>  
<p>
  This documentation is no longer being maintained and may be removed. 
  If you are running this version, we strongly advise you to upgrade. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana User Guide [6.1]</a></span>
»
<span class="breadcrumb-link"><a href="visualize.html">Visualize</a></span>
»
<span class="breadcrumb-node">Coordinate Maps</span>
</div>
<div class="navheader">
<span class="prev">
<a href="pie-chart.html">« Pie Charts</a>
</span>
<span class="next">
<a href="regionmap.html">Region Maps »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="tilemap"></a>Coordinate Maps<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.1/docs/visualize/tilemap.asciidoc">edit</a></h2>
</div></div></div>
<p>A coordinate map displays a geographic area overlaid with circles keyed to the data determined by the buckets you specify.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>By default, Kibana uses the <a href="/elastic-maps-service" class="ulink" target="_top">Elastic Maps Service</a>
to display map tiles. To use other tile service providers, configure the <a class="xref" href="settings.html#tilemap-settings">tilemap settings</a>
in <code class="literal">kibana.yml</code>.</p>
</div>
</div>
<h3><a id="configuration"></a>Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.1/docs/visualize/tilemap.asciidoc">edit</a></h3>
<h4><a id="_data"></a>Data<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.1/docs/visualize/tilemap.asciidoc">edit</a></h4>
<h5><a id="_metrics_2"></a>Metrics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.1/docs/visualize/tilemap.asciidoc">edit</a></h5>
<p>The default <em>metrics</em> aggregation for a coordinate map is the <span class="strong strong"><strong>Count</strong></span> aggregation. You can select any of the following
aggregations as the metrics aggregation:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>Count</strong></span>
</span>
</dt>
<dd>
The <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-metrics-valuecount-aggregation.html" class="ulink" target="_top"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Average</strong></span>
</span>
</dt>
<dd>
This aggregation returns the <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-metrics-avg-aggregation.html" class="ulink" target="_top"><em>average</em></a> of a numeric
field. Select a field from the drop-down.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Sum</strong></span>
</span>
</dt>
<dd>
The <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-metrics-sum-aggregation.html" class="ulink" target="_top"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Min</strong></span>
</span>
</dt>
<dd>
The <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-metrics-min-aggregation.html" class="ulink" target="_top"><em>min</em></a> aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Max</strong></span>
</span>
</dt>
<dd>
The <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-metrics-max-aggregation.html" class="ulink" target="_top"><em>max</em></a> aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Unique Count</strong></span>
</span>
</dt>
<dd>
The <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-metrics-cardinality-aggregation.html" class="ulink" target="_top"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.
</dd>
</dl>
</div>
<p>Enter a string in the <span class="strong strong"><strong>Custom Label</strong></span> field to change the display label.</p>
<h5><a id="_buckets"></a>Buckets<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.1/docs/visualize/tilemap.asciidoc">edit</a></h5>
<p>Coordinate maps use the <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-bucket-geohashgrid-aggregation.html" class="ulink" target="_top"><em>geohash</em></a> aggregation. Select a field, typically coordinates, from the
drop-down.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The_Change precision on map zoom_ box is checked by default. Uncheck the box to disable this behavior.
The <em>Precision</em> slider determines the granularity of the results displayed on the map. See the documentation
for the <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator" class="ulink" target="_top">geohash grid</a>
aggregation for details on the area specified by each precision level.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Higher precisions increase memory usage for the browser displaying Kibana as well as for the underlying
Elasticsearch cluster.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <em>place markers off grid (use <a href="/guide/en/elasticsearch/reference/6.1/search-aggregations-metrics-geocentroid-aggregation.html" class="ulink" target="_top">geocentroid</a>)</em> box is checked by default. When this box is checked, the markers are
placed in the center of all the documents in that bucket. When unchecked, the markers are placed in the center
of the geohash grid cell. Leaving this checked generally results in a more accurate visualization.
</li>
</ul>
</div>
<p>Enter a string in the <span class="strong strong"><strong>Custom Label</strong></span> field to change the display label.</p>
<p>You can click the <span class="strong strong"><strong>Advanced</strong></span> link to display more customization options for your metrics or bucket aggregation:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>Exclude Pattern</strong></span>
</span>
</dt>
<dd>
Specify a pattern in this field to exclude from the results.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Include Pattern</strong></span>
</span>
</dt>
<dd>
Specify a pattern in this field to include in the results.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>JSON Input</strong></span>
</span>
</dt>
<dd>
A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:
</dd>
</dl>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">{ "script" : "doc['grade'].value * 1.2" }</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="/guide/en/elasticsearch/reference/6.1/modules-scripting.html" class="ulink" target="_top">dynamic Groovy scripting</a>.</p>
</div>
</div>
<p>The availability of these options varies depending on the aggregation you choose.</p>
<h4><a id="_options"></a>Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.1/docs/visualize/tilemap.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>Map type</strong></span>
</span>
</dt>
<dd>
Select one of the following options from the drop-down.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><em>Scaled Circle Markers</em></strong></span>
</span>
</dt>
<dd>
Scale the size of the markers based on the metric aggregation&#8217;s value.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><em>Shaded Circle Markers</em></strong></span>
</span>
</dt>
<dd>
Displays the markers with different shades based on the metric aggregation&#8217;s value.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><em>Shaded Geohash Grid</em></strong></span>
</span>
</dt>
<dd>
Displays the rectangular cells of the geohash grid instead of circular markers, with different
shades based on the metric aggregation&#8217;s value.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong><em>Heatmap</em></strong></span>
</span>
</dt>
<dd>
<p>
A heat map applies blurring to the circle markers and applies shading based on the amount of overlap.
Heatmaps have the following options:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Cluster size</strong></span>: Adjust the size of the heatmap clustering.
</li>
<li class="listitem">
<span class="strong strong"><strong>Show Tooltip</strong></span>: Check this box to have a tooltip with the values for a given dot when the cursor is on that dot.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Desaturate map tiles</strong></span>
</span>
</dt>
<dd>
Desaturate the map&#8217;s color in order to make the markers stand out more clearly.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>WMS compliant map server</strong></span>
</span>
</dt>
<dd>
<p>
Check this box to enable the use of a third-party mapping service that complies with the Web
Map Service (WMS) standard. Specify the following elements:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>WMS url</strong></span>: The URL for the WMS map service.
</li>
<li class="listitem">
<span class="strong strong"><strong>WMS layers</strong></span>: A comma-separated list of the layers to use in this visualization. Each map server provides its own list of
layers.
</li>
<li class="listitem">
<span class="strong strong"><strong>WMS version</strong></span>: The WMS version used by this map service.
</li>
<li class="listitem">
<span class="strong strong"><strong>WMS format</strong></span>: The image format used by this map service. The two most common formats are <code class="literal">image/png</code> and <code class="literal">image/jpeg</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong>WMS attribution</strong></span>: An optional, user-defined string that identifies the map source. Maps display the attribution string
in the lower right corner.
</li>
<li class="listitem">
<span class="strong strong"><strong>WMS styles</strong></span>: A comma-separated list of the styles to use in this visualization. Each map server provides its own styling
options.
</li>
</ul>
</div>
</dd>
</dl>
</div>
<p>After changing options, click the  <span class="strong strong"><strong>Apply changes</strong></span> button to update your visualization, or the grey <span class="strong strong"><strong>Discard
changes</strong></span> button to keep your visualization in its current state.</p>
<h3><a id="navigate-map"></a>Navigating the Map<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.1/docs/visualize/tilemap.asciidoc">edit</a></h3>
<p>Once your tilemap visualization is ready, you can explore the map in several ways:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Click and hold anywhere on the map and move the cursor to move the map center. Hold Shift and drag a bounding box
across the map to zoom in on the selection.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Zoom In/Out</strong></span> <span class="image"><img src="images/viz-zoom.png" alt="viz zoom"></span> buttons to change the zoom level manually.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Fit Data Bounds</strong></span> <span class="image"><img src="images/viz-fit-bounds.png" alt="viz fit bounds"></span> button to automatically crop the map boundaries to the
geohash buckets that have at least one result.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Latitude/Longitude Filter</strong></span> <span class="image"><img src="images/viz-lat-long-filter.png" alt="viz lat long filter"></span> button, then drag a bounding box across the
map, to create a filter for the box coordinates.
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="pie-chart.html">« Pie Charts</a>
</span>
<span class="next">
<a href="regionmap.html">Region Maps »</a>
</span>
</div>
</div>
</body>
</html>
