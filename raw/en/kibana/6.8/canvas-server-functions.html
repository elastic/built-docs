<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Canvas server functions | Kibana Guide [6.8] | Elastic</title>
<meta class="elastic" name="content" content="Canvas server functions | Kibana Guide [6.8]">

<link rel="home" href="index.html" title="Kibana Guide [6.8]"/>
<link rel="up" href="canvas-function-reference.html" title="Canvas function reference"/>
<link rel="prev" href="canvas-common-functions.html" title="Canvas common functions"/>
<link rel="next" href="canvas-client-functions.html" title="Canvas client functions"/>
<meta class="elastic" name="product_version" content="6.8"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/6.8"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="6.8"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<p>
  <strong>NOTE</strong>: You are looking at documentation for an older release. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p>
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [6.8]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="canvas.html">Canvas</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="canvas-function-reference.html">Canvas function reference</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="canvas-common-functions.html">« Canvas common functions</a>
</span>
<span class="next">
<a href="canvas-client-functions.html">Canvas client functions »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="canvas-server-functions"></a>Canvas server functions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>These functions can only execute on the server. This may be for performance
or security reasons, or because the function uses an API only available on the
Kibana server. If the expression is executing in the browser, it will transfer to
the server when it hits one of these functions.</p>
<p>A <span class="strong strong"><strong>*</strong></span> denotes a required argument.</p>
<h3><a id="_demodata"></a>demodata<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a></h3>
<p>A mock data set that includes project CI times with usernames, countries, and run phases.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em> (Alias: <code class="literal">type</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>The name of the demo data set to use  (default: <code class="literal">ci</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
<h3><a id="_esdocs"></a>esdocs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a></h3>
<p>Queries Elasticsearch and gets back raw documents. Specify the fields you want to receive,
especially if you are asking for a lot of rows.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>index</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Specify an index pattern, for example, "logstash-*"  (default is <code class="literal">_all</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em> (Aliases: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>A Lucene query string (default: <code class="literal">_index:.kibana</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>sort</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Sort directions as "field, direction", for example, "@timestamp, desc" or "bytes, asc"</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>fields</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Comma separated list of fields. Fewer fields will perform better</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>metaFields</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Comma separated list of meta fields, for example, "_index,_type"</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>count</p></td>
<td align="left" valign="top"><p>number</p></td>
<td align="left" valign="top"><p>The number of docs to pull back. Smaller numbers perform better (default: <code class="literal">100</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
<h3><a id="_escount"></a>escount<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a></h3>
<p>Queries Elasticsearch for a count of the number of hits matching a query.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>index</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Specify an index pattern, for example, "logstash-*"  (default: <code class="literal">all</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em>  (Alias: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>A Lucene query string (default: <code class="literal">"-_index:.kibana"</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> number</p>
<h3><a id="_essql"></a>essql<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a></h3>
<p>Specifies an Elasticsearch SQL.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em>*  (Alias: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>An SQL query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>count</p></td>
<td align="left" valign="top"><p>number</p></td>
<td align="left" valign="top"><p>The default is <code class="literal">1000</code></p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
<h3><a id="_pointseries"></a>pointseries<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a></h3>
<p>Turns a datatable into a point series model. Currently Canvas differentiates measure
from dimensions by looking for a <a class="xref" href="canvas-tinymath-functions.html" title="TinyMath functions">Tiny Math function</a>. If you enter a TinyMath
expression in your argument, Canvas treats that argument as a measure. Otherwise, it
is a dimension. Dimensions are combined to create unique keys. Measures are
then deduplicated by those keys using the specified TinyMath function.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> datatable</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>x</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>The values along the X-axis</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>y</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>The values along the Y-axis</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>color</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>An expression to use in determining the mark&#8217;s color</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>size</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>For elements that support it, the size of the marks</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>text</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>For use in charts that support it, the text to show in the mark</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> pointseries</p>
<h3><a id="_server"></a>server<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a></h3>
<p>Forces the interpreter to return to the server.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> Anything or nothing</p>
<p><span class="strong strong"><strong>Returns:</strong></span> Depends on your input and arguments
&nbsp;</p>
<h3><a id="_timelion"></a>timelion<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/6.8/docs/canvas/canvas-server-functions.asciidoc">edit</a></h3>
<p>Uses Timelion to extract one or more time series from many sources.</p>
<p><span class="strong strong"><strong>Accepts:</strong></span> filter</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Argument</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><em>Unnamed</em> (Aliases: <code class="literal">query</code>, <code class="literal">q</code>)</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>A Timelion query (default: <code class="literal">".es(*)"</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>interval</p></td>
<td align="left" valign="top"><p>string</p></td>
<td align="left" valign="top"><p>Bucket interval for the time series (default: <code class="literal">auto</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>from</p></td>
<td align="left" valign="top"><p>any</p></td>
<td align="left" valign="top"><p>Elasticsearch date math string for the start of the time range (default: <code class="literal">now-1y</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>to</p></td>
<td align="left" valign="top"><p>any</p></td>
<td align="left" valign="top"><p>Elasticsearch date math string for the end of the time range (default: <code class="literal">now</code>)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>timezone</p></td>
<td align="left" valign="top"><p>any</p></td>
<td align="left" valign="top"><p>Time zone for the time range (default: <code class="literal">UTC</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p><span class="strong strong"><strong>Returns:</strong></span> datatable</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="canvas-common-functions.html">« Canvas common functions</a>
</span>
<span class="next">
<a href="canvas-client-functions.html">Canvas client functions »</a>
</span>
</div>
</div>
</body>
</html>
