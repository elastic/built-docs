<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Adding layers for Elasticsearch data | Kibana Guide [7.0] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [7.0]"/>
<link rel="up" href="maps-getting-started.html" title="Getting started with Maps"/>
<link rel="prev" href="maps-add-choropleth-layer.html" title="Adding a choropleth layer"/>
<link rel="next" href="maps-save.html" title="Saving the map"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.0"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.0"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.0]</a></span>
»
<span class="breadcrumb-link"><a href="maps.html">Maps</a></span>
»
<span class="breadcrumb-link"><a href="maps-getting-started.html">Getting started with Maps</a></span>
»
<span class="breadcrumb-node">Adding layers for Elasticsearch data</span>
</div>
<div class="navheader">
<span class="prev">
<a href="maps-add-choropleth-layer.html">« Adding a choropleth layer</a>
</span>
<span class="next">
<a href="maps-save.html">Saving the map »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="maps-add-elasticsearch-layer"></a>Adding layers for Elasticsearch data<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/maps/maps-getting-started.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>You&#8217;ll add two layers for Elasticsearch data. The first layer displays documents, and the
second layer displays aggregated data.
The raw documents appear when you zoom in the map to show smaller regions.
The aggregated data
appears when you zoom out the map to show larger amounts of the globe.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_add_a_vector_layer_from_the_document_source"></a>Add a vector layer from the document source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/maps/maps-getting-started.asciidoc">edit</a></h3>
</div></div></div>
<p>This layer displays web log documents as points.
The layer is only visible when you zoom in the map past zoom level 9.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In the map legend, click <span class="strong strong"><strong>Add layer</strong></span>.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Documents</strong></span> data source.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Index pattern</strong></span> to <span class="strong strong"><strong>kibana_sample_data_logs</strong></span>.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Add layer</strong></span> button.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Layer name</strong></span> to <code class="literal">Actual Requests</code>.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Min zoom</strong></span> to 9 and <span class="strong strong"><strong>Max zoom</strong></span> to 24.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Layer transparency</strong></span> to 1.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Fill color</strong></span> to <span class="strong strong"><strong>#2200ff</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save &amp; close</strong></span>.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_add_a_vector_layer_from_the_grid_aggregation_source"></a>Add a vector layer from the grid aggregation source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/maps/maps-getting-started.asciidoc">edit</a></h3>
</div></div></div>
<p>Aggregations group Elasticsearch documents into grids. You can calculate metrics
for each gridded cell.</p>
<p>You&#8217;ll create a layer for aggregated data and make it visible only when the map
is zoomed out past zoom level 9. Darker colors will symbolize grids
with more web log traffic, and lighter colors will symbolize grids with less
traffic. Larger circles will symbolize grids with
more total bytes transferred, and smaller circles will symbolize
grids with less bytes transferred.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="maps/images/grid_metrics_both.png" alt="grid metrics both">
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_add_the_layer"></a>Add the layer<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/maps/maps-getting-started.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In the map legend, click <span class="strong strong"><strong>Add layer</strong></span>.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Grid aggregation</strong></span> data source.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Index pattern</strong></span> to <span class="strong strong"><strong>kibana_sample_data_logs</strong></span>.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Add layer</strong></span> button.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Layer name</strong></span> to <code class="literal">Total Requests and Bytes</code>.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Min zoom</strong></span> to 0 and <span class="strong strong"><strong>Max zoom</strong></span> to 9.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Layer transparency</strong></span> to 1.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_configure_the_aggregation_metrics"></a>Configure the aggregation metrics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/maps/maps-getting-started.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Click plus <span class="image"><img src="maps/images/gs_plus_icon.png" alt="gs plus icon"></span> to the right of <span class="strong strong"><strong>Metrics</strong></span> label.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>Sum</strong></span> in the aggregation select.
</li>
<li class="listitem">
Select <span class="strong strong"><strong>bytes</strong></span> in the field select.
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_set_the_vector_style_2"></a>Set the vector style<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.0/docs/maps/maps-getting-started.asciidoc">edit</a></h4>
</div></div></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In <span class="strong strong"><strong>Vector style</strong></span>, change <span class="strong strong"><strong>Symbol size</strong></span>:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Set <span class="strong strong"><strong>Min size</strong></span> to 1.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Max size</strong></span> to 25.
</li>
<li class="listitem">
In the field select, select <span class="strong strong"><strong>sum of bytes</strong></span>.
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Save &amp; close</strong></span> button.</p>
<p>Your map now looks like this:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="maps/images/gs_add_es_layer.png" alt="gs add es layer">
</div>
</div>
</li>
</ol>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="maps-add-choropleth-layer.html">« Adding a choropleth layer</a>
</span>
<span class="next">
<a href="maps-save.html">Saving the map »</a>
</span>
</div>
</div>
</body>
</html>
