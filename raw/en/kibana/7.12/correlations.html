<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Find latency and error correlations | Kibana Guide [7.12] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [7.12]"/>
<link rel="up" href="apm-how-to.html" title="How-to guides"/>
<link rel="prev" href="filters.html" title="Filters"/>
<link rel="next" href="machine-learning-integration.html" title="Machine learning integration"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.12"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.12"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.12]</a></span>
»
<span class="breadcrumb-link"><a href="xpack-apm.html">APM</a></span>
»
<span class="breadcrumb-link"><a href="apm-how-to.html">How-to guides</a></span>
»
<span class="breadcrumb-node">Find latency and error correlations</span>
</div>
<div class="navheader">
<span class="prev">
<a href="filters.html">« Filters</a>
</span>
<span class="next">
<a href="machine-learning-integration.html">Machine learning integration »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="correlations"></a>Find latency and error correlations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.12/docs/apm/correlations.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p><span class="strong strong"><strong>Correlations</strong></span> surface attributes of your data that are potentially correlated with high-latency or erroneous transactions.
Surfaced attributes are user-defined, meaning that they are completely customizable to your APM data.
Find something interesting? A quick click of a button will auto-query your data as you work to resolve the underlying issue.</p>
<p>For example, a site reliability engineer, who is responsible for keeping production systems up and running,
notices an increase in latency in certain transactions.
Analyzing metadata or tags that exist in high-latency transactions but not in lower-latency transactions
can potentially point towards the root cause.
They may find that a particular piece of hardware, like a host or pod, has failed, increasing latency.
Or, perhaps a set of users, based on IP address or region, is physically too far away from the nearest
data center, increasing latency.</p>
<h3><a id="view-correlations"></a>View correlations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.12/docs/apm/correlations.asciidoc">edit</a></h3>
<p>With a service selected, click <span class="strong strong"><strong>View correlations</strong></span>:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="apm/images/correlations.png" alt="Correlations">
</div>
</div>
<p>Queries within the APM app apply to the correlations shown in the correlations fly-out.</p>
<p>If a correlated field seems noteworthy, use the <span class="strong strong"><strong>Filter</strong></span> quick links:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">+</code> creates a new query in the APM app for transactions containing the selected value.
</li>
<li class="listitem">
<code class="literal">-</code> creates a new query in the APM app for transactions without the selected value.
</li>
</ul>
</div>
<h4><a id="correlations-latency"></a>Find high-latency correlations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.12/docs/apm/correlations.asciidoc">edit</a></h4>
<p>Correlations help you discover which fields are contributing to increased service latency.</p>
<p>A latency distribution chart visualizes the overall latency of the selected service&#8217;s transactions.
Correlated attributes are sorted by <em>Impact</em>–a visual representation of the score for the underlying
aggregation that powers correlations.
Attributes with a high impact, or attributes present in a large percentage of slow transactions,
may contribute to increased latency.</p>
<p>To find high-latency correlations, hover over each potentially correlated attribute to
compare the latency distribution of transactions with and without the selected attribute.</p>
<p>For example, in the screenshot below, the field <code class="literal">user_agent.name</code> and value <code class="literal">HeadlessChrome</code>
exists primarily in higher-latency transactions between 3.7 and 8.7 seconds.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="apm/images/correlations-hover.png" alt="Correlations hover effect">
</div>
</div>
<p>Selecting the <code class="literal">+</code> filter creates a new query in the APM app for transactions with
<code class="literal">user_agent.name: HeadlessChrome</code>. With the "noise" now filtered out,
you can begin viewing sample traces to continue your investigation.</p>
<h4><a id="correlations-error-rate"></a>Find error rate correlations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.12/docs/apm/correlations.asciidoc">edit</a></h4>
<p>Correlations help you discover which fields are contributing to failed transactions.</p>
<p>The Error rate over time chart visualizes the change in error rate over the selected time frame.
Correlated attributes are sorted by <em>Impact</em>–a visual representation of the score for the underlying
aggregation that powers correlations.
Attributes with a high impact, or attributes present in a large percentage of failed transactions,
may contribute to increased error rates.</p>
<p>To find error rate correlations, hover over each potentially correlated attribute to
compare the error rate distribution of transactions with and without the selected attribute.</p>
<p>For example, in the screenshot below, the field <code class="literal">url.original</code> and value <code class="literal">http://localhost:3100...</code>
existed in 100% of failed transactions between 6:00 and 10:30.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="apm/images/error-rate-hover.png" alt="Correlations errors hover effect">
</div>
</div>
<p>Selecting the <code class="literal">+</code> filter creates a new query in the APM app for transactions with
<code class="literal">url.original: http://localhost:3100...</code>. With the "noise" now filtered out,
you can begin viewing sample traces to continue your investigation.</p>
<h4><a id="correlations-custom-fields"></a>Customize fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.12/docs/apm/correlations.asciidoc">edit</a></h4>
<p>Correlations are only as good as the data they&#8217;re searching for.
By default, a handful of potentially useful fields are selected, like <code class="literal">lables</code>, <code class="literal">service.version</code>, and <code class="literal">host.ip</code>.
You can remove and add fields to this list under the <span class="strong strong"><strong>Customize fields</strong></span> dropdown.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Want to start over? Select <span class="strong strong"><strong>reset</strong></span> to clear your customizations.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="filters.html">« Filters</a>
</span>
<span class="next">
<a href="machine-learning-integration.html">Machine learning integration »</a>
</span>
</div>
</div>
</body>
</html>
