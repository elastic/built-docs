<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Machine learning integration | Kibana Guide [7.9] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [7.9]"/>
<link rel="up" href="apm-how-to.html" title="How-to guides"/>
<link rel="prev" href="filters.html" title="Filters"/>
<link rel="next" href="advanced-queries.html" title="Query your data"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.9"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.9"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.9]</a></span>
»
<span class="breadcrumb-link"><a href="xpack-apm.html">APM</a></span>
»
<span class="breadcrumb-link"><a href="apm-how-to.html">How-to guides</a></span>
»
<span class="breadcrumb-node">Machine learning integration</span>
</div>
<div class="navheader">
<span class="prev">
<a href="filters.html">« Filters</a>
</span>
<span class="next">
<a href="advanced-queries.html">Query your data »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="machine-learning-integration"></a>Machine learning integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.9/docs/apm/machine-learning.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>

<p>The Machine learning integration initiates a new job predefined to calculate anomaly scores on APM transaction durations.
With this integration, you can quickly pinpoint anomalous transactions and see the health of
any upstream and downstream services.</p>
<p>Machine learning jobs are created per environment, and are based on a service&#8217;s average response time.
Because jobs are created at the environment level,
you can add new services to your existing environments without the need for additional machine learning jobs.</p>
<p>After a machine learning job is created, results are shown in two places:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>The transaction duration chart will show the expected bounds and add an annotation when the anomaly score is 75 or above.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="apm/images/apm-ml-integration.png" alt="Example view of anomaly scores on response times in the APM app">
</div>
</div>
</li>
<li class="listitem">
<p>Service maps will display a color-coded anomaly indicator based on the detected anomaly score.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="apm/images/apm-service-map-anomaly.png" alt="Example view of anomaly scores on service maps in the APM app">
</div>
</div>
</li>
</ul>
</div>
<h3><a id="create-ml-integration"></a>Enable anomaly detection<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.9/docs/apm/machine-learning.asciidoc">edit</a></h3>
<p>To enable machine learning anomaly detection:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From the Services overview, Traces overview, or Service Map tab,
select <span class="strong strong"><strong>Anomaly detection</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Create ML Job</strong></span>.
</li>
<li class="listitem">
Machine learning jobs are created at the environment level.
Select all of the service environments that you want to enable anomaly detection in.
Anomalies will surface for all services and transaction types within the selected environments.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Create Jobs</strong></span>.
</li>
</ol>
</div>
<p>That&#8217;s it! After a few minutes, the job will begin calculating results;
it might take additional time for results to appear on your service maps.
Existing jobs can be managed in <span class="strong strong"><strong>Machine Learning jobs management</strong></span>.</p>
<p>APM specific anomaly detection wizards are also available for certain Agents.
See the machine learning <a href="/guide/en/machine-learning/7.9/ootb-ml-jobs-apm.html" class="ulink" target="_top">APM anomaly detection configurations</a> for more information.</p>
<h3><a id="warning-ml-integration"></a>Anomaly detection warning<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.9/docs/apm/machine-learning.asciidoc">edit</a></h3>
<p>To make machine learning as easy as possible to set up,
the APM app will warn you when filtered to an environment without a machine learning job.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="apm/images/apm-anomaly-alert.png" alt="Example view of anomaly alert in the APM app">
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="filters.html">« Filters</a>
</span>
<span class="next">
<a href="advanced-queries.html">Query your data »</a>
</span>
</div>
</div>
</body>
</html>
