<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Supported aggregations | Kibana Guide [7.9] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [7.9]"/>
<link rel="up" href="visualize.html" title="Visualize"/>
<link rel="prev" href="visualize.html" title="Visualize"/>
<link rel="next" href="lens.html" title="Lens"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.9"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.9]</a></span>
»
<span class="breadcrumb-link"><a href="visualize.html">Visualize</a></span>
»
<span class="breadcrumb-node">Supported aggregations</span>
</div>
<div class="navheader">
<span class="prev">
<a href="visualize.html">« Visualize</a>
</span>
<span class="next">
<a href="lens.html">Lens »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="supported-aggregations"></a>Supported aggregations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.9/docs/visualize/aggregations.asciidoc">edit</a></h2>
</div></div></div>
<p>Use the supported aggregations to build your visualizations.</p>
<h3><a id="visualize-metric-aggregations"></a>Metric aggregations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.9/docs/visualize/aggregations.asciidoc">edit</a></h3>
<p>Metric aggregations extract field from documents to generate data values.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-avg-aggregation.html" class="ulink" target="_top">Average</a>
</span>
</dt>
<dd>
The mean value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-valuecount-aggregation.html" class="ulink" target="_top">Count</a>
</span>
</dt>
<dd>
The total number of documents that match the query, which allows you to visualize the number of documents in a bucket. Count is the default value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-max-aggregation.html" class="ulink" target="_top">Max</a>
</span>
</dt>
<dd>
The highest value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-percentile-aggregation.html" class="ulink" target="_top">Median</a>
</span>
</dt>
<dd>
The value that is in the 50% percentile.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-min-aggregation.html" class="ulink" target="_top">Min</a>
</span>
</dt>
<dd>
The lowest value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-percentile-rank-aggregation.html" class="ulink" target="_top">Percentile ranks</a>
</span>
</dt>
<dd>
Returns the percentile rankings for the values in the specified numeric field. Select a numeric field from the drop-down, then specify one or more percentile rank values in the <span class="strong strong"><strong>Values</strong></span> fields.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-percentile-aggregation.html" class="ulink" target="_top">Percentiles</a>
</span>
</dt>
<dd>
Divides the
values in a numeric field into specified percentile bands. Select a field from the drop-down, then specify one or more ranges in the <span class="strong strong"><strong>Percentiles</strong></span> fields.
</dd>
<dt>
<span class="term">
Standard Deviation
</span>
</dt>
<dd>
Requires a numeric field. Uses the <a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-extendedstats-aggregation.html" class="ulink" target="_top"><em>extended stats</em></a> aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-sum-aggregation.html" class="ulink" target="_top">Sum</a>
</span>
</dt>
<dd>
The total value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-top-hits-aggregation.html" class="ulink" target="_top">Top hit</a>
</span>
</dt>
<dd>
Returns a sample of individual documents. When the Top Hit aggregation is matched to more than one document, you must choose a technique for combining the values. Techniques include average, minimum, maximum, and sum.
</dd>
<dt>
<span class="term">
Unique Count
</span>
</dt>
<dd>
The <a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-metrics-cardinality-aggregation.html" class="ulink" target="_top">Cardinality</a> of the field within the bucket.
</dd>
</dl>
</div>
<p>Alternatively, you can override the field values with a script using JSON input. For example:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">{ "script" : "doc['grade'].value * 1.2" }</pre>
</div>
<p>The example implements a Elasticsearch <a href="/guide/en/elasticsearch/reference/7.9/search-aggregations.html" class="ulink" target="_top">Script Value Source</a>, which replaces
the value in the metric. The options available depend on the aggregation you choose.</p>
<h3><a id="visualize-parent-pipeline-aggregations"></a>Parent pipeline aggregations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.9/docs/visualize/aggregations.asciidoc">edit</a></h3>
<p>Parent pipeline aggregations assume the bucket aggregations are ordered and are especially useful for time series data. For each parent pipeline aggregation, you must define a bucket aggregation and metric aggregation.</p>
<p>You can also nest these aggregations. For example, if you want to produce a third derivative.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-bucket-script-aggregation.html" class="ulink" target="_top">Bucket script</a>
</span>
</dt>
<dd>
Executes a script that performs computations for each bucket that specifies metrics in the parent multi-bucket aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-cumulative-sum-aggregation.html" class="ulink" target="_top">Cumulative sum</a>
</span>
</dt>
<dd>
Calculates the cumulative sum of a specified metric in a parent histogram.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-derivative-aggregation.html" class="ulink" target="_top">Derivative</a>
</span>
</dt>
<dd>
Calculates the derivative of specific metrics.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-movavg-aggregation.html" class="ulink" target="_top">Moving avg</a>
</span>
</dt>
<dd>
Slides a window across the data and emits the average value of the window.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-serialdiff-aggregation.html" class="ulink" target="_top">Serial diff</a>
</span>
</dt>
<dd>
Values in a time series are subtracted from itself at different time lags or periods.
</dd>
</dl>
</div>
<h3><a id="visualize-sibling-pipeline-aggregations"></a>Sibling pipeline aggregations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.9/docs/visualize/aggregations.asciidoc">edit</a></h3>
<p>Sibling pipeline aggregations condense many buckets into one. For each sibling pipeline aggregation, you must define a bucket aggregations and metric aggregation.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Average bucket</a>
</span>
</dt>
<dd>
Calculates the mean, or average, value of a specified metric in a sibling aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Max Bucket</a>
</span>
</dt>
<dd>
Calculates the maximum value of a specified metric in a sibling aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Min Bucket</a>
</span>
</dt>
<dd>
Calculates the minimum value of a specified metric in a sibling aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Sum Bucket</a>
</span>
</dt>
<dd>
Calculates the sum of the values of a specified metric in a sibling aggregation.
</dd>
</dl>
</div>
<h3><a id="visualize-bucket-aggregations"></a>Bucket aggregations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/7.9/docs/visualize/aggregations.asciidoc">edit</a></h3>
<p>Bucket aggregations sort documents into buckets, depending on the contents of the document.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-datehistogram-aggregation.html" class="ulink" target="_top">Date histogram</a>
</span>
</dt>
<dd>
Splits a date field into buckets by interval. If the date field is the primary time field for the index pattern, it chooses an automatic interval for you. Intervals are labeled at the start of the interval, using the date-key returned by Elasticsearch. For example, the tooltip for a monthly interval displays the first day of the month.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-daterange-aggregation.html" class="ulink" target="_top">Date range</a>
</span>
</dt>
<dd>
Reports values that are within a range of dates that you specify. You can specify the ranges for the dates using <a href="/guide/en/elasticsearch/reference/7.9/common-options.html#date-math" class="ulink" target="_top"><em>date math</em></a> expressions.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-filter-aggregation.html" class="ulink" target="_top">Filter</a>
</span>
</dt>
<dd>
Each filter creates a bucket of documents. You can specify a filter as a
<a class="xref" href="kuery-query.html" title="Kibana Query Language">KQL</a> or <a class="xref" href="lucene-query.html" title="Lucene query syntax">Lucene</a> query string.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-geohashgrid-aggregation.html" class="ulink" target="_top">Geohash</a>
</span>
</dt>
<dd>
Displays points based on a geohash. Supported by data table visualizations and <a class="xref" href="maps.html" title="Maps">Maps</a>.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-geotilegrid-aggregation.html" class="ulink" target="_top">Geotile</a>
</span>
</dt>
<dd>
Groups points based on web map tiling. Supported by data table visualizations and <a class="xref" href="maps.html" title="Maps">Maps</a>.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-histogram-aggregation.html" class="ulink" target="_top">Histogram</a>
</span>
</dt>
<dd>
Builds from a numeric field.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-iprange-aggregation.html" class="ulink" target="_top">IPv4 range</a>
</span>
</dt>
<dd>
Specify ranges of IPv4 addresses.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-range-aggregation.html" class="ulink" target="_top">Range</a>
</span>
</dt>
<dd>
Specify ranges of values for a numeric field.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-significantterms-aggregation.html" class="ulink" target="_top">Significant terms</a>
</span>
</dt>
<dd>
Returns interesting or unusual occurrences of terms in a set. Supports Elasticsearch <a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-terms-aggregation.html#_filtering_values_4" class="ulink" target="_top">exclude and include patterns</a>.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-terms-aggregation.html" class="ulink" target="_top">Terms</a>
</span>
</dt>
<dd>
Specify the top or bottom <em>n</em> elements of a given field to display, ordered by count or a custom metric. Supports Elasticsearch <a href="/guide/en/elasticsearch/reference/7.9/search-aggregations-bucket-terms-aggregation.html#_filtering_values_4" class="ulink" target="_top">exclude and include patterns</a>.
</dd>
</dl>
</div>
<p>Kibana filters string fields with only regular expression patterns, and does not filter numeric fields or match with arrays.</p>
<p>For example:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You want to exclude the metricbeat process from your visualization of top processes: <code class="literal">metricbeat.*</code>
</li>
<li class="listitem">
You only want to show processes collecting beats: <code class="literal">.*beat</code>
</li>
<li class="listitem">
You want to exclude two specific values, the string <code class="literal">"empty"</code> and <code class="literal">"none"</code>: <code class="literal">empty|none</code>
</li>
</ul>
</div>
<p>Patterns are case sensitive.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="visualize.html">« Visualize</a>
</span>
<span class="next">
<a href="lens.html">Lens »</a>
</span>
</div>
</div>
</body>
</html>
