<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Roll back to a previous version of Kibana | Kibana Guide [8.12] | Elastic</title>
<meta class="elastic" name="content" content="Roll back to a previous version of Kibana | Kibana Guide [8.12]">

<link rel="home" href="index.html" title="Kibana Guide [8.12]"/>
<link rel="up" href="upgrade.html" title="Upgrade Kibana"/>
<link rel="prev" href="resolve-migrations-failures.html" title="Resolve migration failures"/>
<link rel="next" href="using-kibana-with-security.html" title="Configure security in Kibana"/>
<meta class="elastic" name="product_version" content="8.12"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/8.12"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="8.12"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="resolve-migrations-failures.html">« Resolve migration failures</a>
</span>
<span class="next">
<a href="using-kibana-with-security.html">Configure security in Kibana »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [8.12]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="setup.html">Set up</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="upgrade.html">Upgrade Kibana</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Roll back to a previous version of Kibana</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.12/docs/setup/upgrade/rollback-migration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="upgrade-migrations-rolling-back"></a>Roll back to a previous version of Kibana</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.12/docs/setup/upgrade/rollback-migration.asciidoc">edit</a></div>
</div></div></div>
<p>If you&#8217;ve followed <a class="xref" href="upgrade.html#preventing-migration-failures" title="Preparing for migration">preparing for migration</a>
and <a class="xref" href="resolve-migrations-failures.html" title="Resolve migration failures">resolving migration failures</a>, and
Kibana is still unable to successfully upgrade, rollback Kibana until
you&#8217;re able to identify and fix the root cause.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before you roll back Kibana, ensure that the version you want to roll back to is compatible with
your Elasticsearch cluster. If the version you want to roll back to is not compatible, you must also rollback Elasticsearch.
Any changes made after an upgrade are lost when you roll back to a previous version.</p>
</div>
</div>
<p>To roll back after a failed upgrade migration, you must also roll back the Kibana feature state to be compatible with the previous Kibana version.</p>
<div class="position-relative"><h4><a id="_roll_back_by_restoring_the_kibana_feature_state_from_a_snapshot"></a>Roll back by restoring the Kibana feature state from a snapshot</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.12/docs/setup/upgrade/rollback-migration.asciidoc">edit</a></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Before proceeding, <a href="/guide/en/elasticsearch/reference/8.12/snapshots-take-snapshot.html" class="ulink" target="_top">take a snapshot</a> that contains the <code class="literal">kibana</code> feature state.
By default, snapshots include the <code class="literal">kibana</code> feature state.
</li>
<li class="listitem">
To make sure no Kibana instances are performing an upgrade migration, shut down all Kibana instances.
</li>
<li class="listitem">
<p><a href="/guide/en/elasticsearch/reference/8.12/snapshots-restore-snapshot.html" class="ulink" target="_top">Restore</a> the <code class="literal">kibana</code> feature state from a snapshot taken before the failed Kibana upgrade. The following Elasticsearch request will only restore the Kibana feature state</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">POST _snapshot/my_repository/my_snapshot_2099.05.06/_restore
{
  "indices": "-*", <a id="CO9-1"></a><i class="conum" data-value="1"></i>
  "feature_states": ["kibana"]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Exclude all indices and data streams from the restore operation to ensure that only the Kibana system indices included in the Kibana feature state will be restored.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
Start all Kibana instances on the older version you want to rollback to.
</li>
</ol>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="resolve-migrations-failures.html">« Resolve migration failures</a>
</span>
<span class="next">
<a href="using-kibana-with-security.html">Configure security in Kibana »</a>
</span>
</div>
</body>
</html>
