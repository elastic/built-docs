<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Reporting troubleshooting | Kibana Guide [8.14] | Elastic</title>
<meta class="elastic" name="content" content="Reporting troubleshooting | Kibana Guide [8.14]">

<link rel="home" href="index.html" title="Kibana Guide [8.14]"/>
<link rel="up" href="reporting-getting-started.html" title="Reporting and sharing"/>
<link rel="prev" href="automating-report-generation.html" title="Automatically generate reports"/>
<link rel="next" href="xpack-ml.html" title="Machine learning"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/8.14"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="automating-report-generation.html">« Automatically generate reports</a>
</span>
<span class="next">
<a href="xpack-ml.html">Machine learning »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [8.14]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="reporting-getting-started.html">Reporting and sharing</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Reporting troubleshooting</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="reporting-troubleshooting"></a>Reporting troubleshooting<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h2>
</div></div></div>

<p>Having trouble? Here are solutions to common problems you might encounter while using Reporting.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-diagnostics" title="Reporting diagnostics">Reporting diagnostics</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-text-incorrect" title="Text rendered incorrectly in generated reports">Text rendered incorrectly in generated reports</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-missing-data" title="Missing data in PDF report of data table visualization">Missing data in PDF report of data table visualization</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-file-permissions" title="File permissions">File permissions</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-error-messages" title="Error messages">Error messages</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-puppeteer-debug-logs" title="Puppeteer debug logs">Puppeteer debug logs</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-system-requirements" title="System requirements">System requirements</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-maps-ems" title="Unable to connect to Elastic Maps Service">Unable to connect to Elastic Maps Service</a>
</li>
<li class="listitem">
<a class="xref" href="reporting-troubleshooting.html#reporting-manual-chromium-install" title="Manually install the Chromium browser for Darwin">Manually install the Chromium browser for Darwin</a>
</li>
</ul>
</div>
<h3><a id="reporting-diagnostics"></a>Reporting diagnostics<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>Reporting comes with a built-in utility to try to automatically find common issues. When Kibana is running,
navigate to the Report Listing page, and click <span class="strong strong"><strong>Run reporting diagnostics</strong></span>. This will open up a diagnostic tool
that checks various parts of the Kibana deployment and come up with any relevant recommendations.</p>
<p>If the diagnostic information doesn&#8217;t reveal the problem, you can troubleshoot further by starting the Kibana
server with an environment variable for revealing additional debugging logs. Refer to
<a class="xref" href="reporting-troubleshooting.html#reporting-troubleshooting-puppeteer-debug-logs" title="Puppeteer debug logs">Puppeteer debug logs</a>.</p>
<h3><a id="reporting-troubleshooting-text-incorrect"></a>Text rendered incorrectly in generated reports<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>If a report label is rendered as an empty rectangle, no system fonts are available. Install at least one font package on the system.</p>
<p>If the report is missing certain Chinese, Japanese or Korean characters, ensure that a system font with those characters is installed.</p>
<h3><a id="reporting-troubleshooting-missing-data"></a>Missing data in PDF report of data table visualization<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>There is currently a known limitation with the Data Table visualization that only the first page of data rows, which are the only data
visible on the screen, are shown in PDF reports.</p>
<h3><a id="reporting-troubleshooting-file-permissions"></a>File permissions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>Ensure that the <code class="literal">headless_shell</code> binary located in your Kibana data directory is owned by the user who is running Kibana, that the
user has the execute permission, and if applicable, that the filesystem is mounted with the <code class="literal">exec</code> option.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The Chromium binary is located in the Kibana installation directory as <code class="literal">data/headless_shell-OS_TYPE/headless_shell</code>. The full path is logged
the first time Kibana starts when verbose logging is enabled.</p>
</div>
</div>
<h3><a id="reporting-troubleshooting-error-messages"></a>Error messages<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>Whenever possible, a Reporting error message tries to be as self-explanatory as possible. Here are some error messages you might encounter,
along with the solution.</p>
<h4><a id="_statuscodeerror_version_conflict_engine_exception"></a><code class="literal">StatusCodeError: [version_conflict_engine_exception]</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h4>
<p>If you are running multiple instances of Kibana in a cluster, the instances share the work of executing report jobs to evenly distribute
the work load. Each instance searches the reporting index for "pending" jobs that the user has requested. It is possible for
multiple instances to find the same job in these searches. Only the instance that successfully updated the job status to
"processing" will actually execute the report job. The other instances that unsuccessfully tried to make the same update will log
something similar to this:</p>
<div class="pre_wrapper lang-text">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-text">StatusCodeError: [version_conflict_engine_exception] [...]: version conflict, required seqNo [6124], primary term [1]. current document has seqNo [6125] and primary term [1], with { ... }
  status: 409,
  displayName: 'Conflict',
  path: '/.reporting-...',
  body: {
    error: {
      type: 'version_conflict_engine_exception',
      reason: '[...]: version conflict, required seqNo [6124], primary term [1]. current document has seqNo [6125] and primary term [1]',
    },
  },
  statusCode: 409
}</pre>
</div>
<p>These messages alone don&#8217;t indicate a problem. They show normal events that happen in a healthy system.</p>
<h4><a id="_max_attempts_reached"></a>Max attempts reached<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h4>
<p>There are two primary causes of this error:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You&#8217;re creating a PDF of a visualization or dashboard that spans a large amount of data and Kibana is hitting the <code class="literal">xpack.reporting.queue.timeout</code>
</li>
<li class="listitem">
Kibana is hosted behind a reverse-proxy, and the <a class="xref" href="reporting-settings-kb.html#reporting-kibana-server-settings" title="Kibana server settings">Kibana server settings</a> are not configured correctly
</li>
</ul>
</div>
<p>Create a Markdown visualization and then create a PDF report. If this succeeds, increase the <code class="literal">xpack.reporting.queue.timeout</code> setting. If the
PDF report fails with "Max attempts reached," check your <a class="xref" href="reporting-settings-kb.html#reporting-kibana-server-settings" title="Kibana server settings">Kibana server settings</a>.</p>
<h4><a id="reporting-troubleshooting-nss-dependency"></a>You must install nss for Reporting to work<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h4>
<p>Reporting using the Chromium browser relies on the Network Security Service libraries (NSS). Install the appropriate nss package for your
distribution.</p>
<h4><a id="reporting-troubleshooting-sandbox-dependency"></a>Unable to use Chromium sandbox<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h4>
<p>Chromium uses sandboxing techniques that are built on top of operating system primitives. The Linux sandbox depends on user namespaces,
which were introduced with the 3.8 Linux kernel. However, many distributions don&#8217;t have user namespaces enabled by default, or they require
the CAP_SYS_ADMIN capability. If the sandbox is not explicitly disabled in Kibana, either based on OS detection or with the
<code class="literal">xpack.screenshotting.browser.chromium.disableSandbox</code> setting, Chrome will try to enable the sandbox. If it fails due to OS or permissions
restrictions, Chrome will crash during initialization.</p>
<p>Elastic recommends that you research the feasibility of enabling unprivileged user namespaces before disabling the sandbox. An exception
is if you are running Kibana in Docker because the container runs in a user namespace with the built-in seccomp/bpf filters.</p>
<h3><a id="reporting-troubleshooting-verbose-logs"></a>Verbose logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>Kibana server logs have a lot of useful information for troubleshooting and understanding how things work. If you&#8217;re having any issues at
all, the full logs from Reporting will be the first place to look. In <code class="literal">kibana.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">logging.root.level: all</pre>
</div>
<p>For more information about logging, see <a class="xref" href="settings.html#logging-root-level">Kibana configuration settings</a>.</p>
<h3><a id="reporting-troubleshooting-puppeteer-debug-logs"></a>Puppeteer debug logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>The Chromium browser that Kibana launches on the server is driven by a NodeJS library for Chromium called Puppeteer. The Puppeteer library
has its own command-line method to generate its own debug logs, which can sometimes be helpful, particularly to figure out if a problem is
caused by Kibana or Chromium. See more at <a href="https://github.com/GoogleChrome/puppeteer/blob/v1.19.0/README.md#debugging-tips" class="ulink" target="_top">debugging tips</a>.</p>
<p>Using Puppeteer&#8217;s debug method when launching Kibana would look like:</p>
<pre class="screen">env DEBUG="puppeteer:*" ./bin/kibana</pre>
<p>The internal DevTools protocol traffic will be logged via the <code class="literal">debug</code> module under the <code class="literal">puppeteer</code> namespace.</p>
<p>The Puppeteer logs are very verbose and could possibly contain sensitive information. Handle the generated output with care.</p>
<h3><a id="reporting-troubleshooting-system-requirements"></a>System requirements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>In Elastic Cloud, the Kibana instances that most configurations provide by default is for 1GB of RAM for the instance. That is enough for
Kibana Reporting when the visualization or dashboard is relatively simple, such as a single pie chart or a dashboard with
a few visualizations. However, certain visualization types incur more load than others. For example, a TSVB panel has a lot of network
requests to render.</p>
<p>If the Kibana instance doesn&#8217;t have enough memory to run the report, the report fails with an error such as <code class="literal">Error: Page crashed!</code>
In this case, try increasing the memory for the Kibana instance to 2GB.</p>
<h3><a id="reporting-troubleshooting-maps-ems"></a>Unable to connect to Elastic Maps Service<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p><a href="/elastic-maps-service" class="ulink" target="_top">Elastic Maps Service (EMS)</a> is a service that hosts
tile layers and vector shapes of administrative boundaries.
If a report contains a map with a missing basemap layer or administrative boundary, the Kibana server does not have access to EMS.
See <a class="xref" href="maps-connect-to-ems.html" title="Connect to Elastic Maps Service"><em>Connect to Elastic Maps Service</em></a> for information on how to connect your Kibana server to EMS.</p>
<h3><a id="reporting-manual-chromium-install"></a>Manually install the Chromium browser for Darwin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.14/docs/user/reporting/reporting-troubleshooting.asciidoc">edit</a></h3>
<p>Chromium is not embedded into Kibana for the Darwin (Mac OS) architecture. When
running Kibana on Darwin, Reporting will download Chromium into the proper area of
the Kibana installation path the first time the server starts. If the server
does not have access to the Internet, you must download the
Chromium browser and install it into the Kibana installation path.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Download the Chromium zip file:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
For <a href="https://commondatastorage.googleapis.com/chromium-browser-snapshots/Mac/901912/chrome-mac.zip" class="ulink" target="_top">x64</a> systems
</li>
<li class="listitem">
For <a href="https://commondatastorage.googleapis.com/chromium-browser-snapshots/Mac_Arm/901913/chrome-mac.zip" class="ulink" target="_top">ARM</a> systems
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Copy the zip file into the holding area. Relative to the root directory of Kibana, the path is:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">.chromium/x64</code> for x64 systems
</li>
<li class="listitem">
<code class="literal">.chromium/arm64</code> for ARM systems
</li>
</ul>
</div>
</li>
</ol>
</div>
<p>When Kibana starts, it will automatically extract the browser from the zip file, and is then ready for PNG and PDF reports.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="automating-report-generation.html">« Automatically generate reports</a>
</span>
<span class="next">
<a href="xpack-ml.html">Machine learning »</a>
</span>
</div>
</body>
</html>
