<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Kibana provides you with several options to share *Discover* saved searches, dashboards, *Visualize Library* visualizations, and *Canvas* workpads with others, or on a website.">
<meta name="keywords" content="analyst, concept, task, reporting">
<title>Create and manage rules | Kibana Guide [8.7] | Elastic</title>
<meta class="elastic" name="content" content="Create and manage rules | Kibana Guide [8.7]">

<link rel="home" href="index.html" title="Kibana Guide [8.7]"/>
<link rel="up" href="alerting-getting-started.html" title="Alerting"/>
<link rel="prev" href="alerting-setup.html" title="Alerting set up"/>
<link rel="next" href="rule-types.html" title="Rule types"/>
<meta class="elastic" name="product_version" content="8.7"/>
<meta class="elastic" name="product_name" content="Kibana"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/8.7"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="8.7"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide [8.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="alerting-getting-started.html">Alerting</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="alerting-setup.html">« Alerting set up</a>
</span>
<span class="next">
<a href="rule-types.html">Rule types »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="create-and-manage-rules"></a>Create and manage rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h2>
</div></div></div>
<p>The <span class="strong strong"><strong>Stack Management</strong></span> &gt; <span class="strong strong"><strong>Rules</strong></span> UI provides a cross-app view of alerting.
Different Kibana apps like <a href="/guide/en/observability/8.7/create-alerts.html" class="ulink" target="_top"><span class="strong strong"><strong>Observability</strong></span></a>,
<a href="/guide/en/security/8.7/prebuilt-rules.html" class="ulink" target="_top"><span class="strong strong"><strong>Security</strong></span></a>, <a class="xref" href="geo-alerting.html" title="Tracking containment"><span class="strong strong"><strong>Maps</strong></span></a> and
<a class="xref" href="xpack-ml.html" title="Machine learning"><span class="strong strong"><strong>Machine Learning</strong></span></a> can offer their own rules. <span class="strong strong"><strong>Rules</strong></span> provides a
central place to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="create-and-manage-rules.html#create-edit-rules" title="Create and edit rules">Create and edit</a> rules
</li>
<li class="listitem">
<a class="xref" href="create-and-manage-rules.html#controlling-rules" title="Snooze and disable rules">Manage rules</a> including enabling/disabling, muting/unmuting, and deleting
</li>
<li class="listitem">
Drill down to <a class="xref" href="create-and-manage-rules.html#rule-details" title="View rule details">rule details</a>
</li>
<li class="listitem">
Configure settings that apply to all rules in the space
</li>
</ul>
</div>
<p class="screenshot"><span class="image"><img src="images/rules-ui.png" alt="Example rule listing in Rules"></span></p>
<p>For more information on alerting concepts and the types of rules and connectors
available, go to <a class="xref" href="alerting-getting-started.html" title="Alerting">Alerting</a>.</p>
<h3><a id="_required_permissions"></a>Required permissions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h3>
<p>Access to rules is granted based on your alerting features privileges. For
more information, go to <a class="xref" href="alerting-setup.html#alerting-security" title="Security">Security</a>.</p>
<h3><a id="create-edit-rules"></a>Create and edit rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h3>
<p>Some rules must be created within the context of a Kibana app like
<a class="xref" href="observability.html#metrics-app" title="Metrics">Metrics</a>, <a class="xref" href="xpack-apm.html" title="APM">APM</a>, or <a class="xref" href="observability.html#uptime-app" title="Uptime">Uptime</a>, but others
are generic. Generic rule types can be created in <span class="strong strong"><strong>Rules</strong></span> by clicking the
<span class="strong strong"><strong>Create rule</strong></span> button. This will launch a flyout that guides you through selecting
a rule type and configuring its conditions and actions.</p>
<p>After a rule is created, you can open the action menu (…) and select <span class="strong strong"><strong>Edit rule</strong></span>
to re-open the flyout and change the rule properties.</p>
<h4><a id="defining-rules-type-conditions"></a>Rule type and conditions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h4>
<p>Depending on the Kibana app and context, you might be prompted to choose the type of rule to create. Some apps will preselect the type of rule for you.</p>
<p>Each rule type provides its own way of defining the conditions to detect, but an expression formed by a series of clauses is a common pattern. For example, in a metric threshold rule, the <code class="literal">WHEN</code> clause enables you to select an aggregation operation to apply to a numeric field.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/rule-flyout-rule-conditions.png" alt="UI for defining rule conditions on a metric threshold rule" width="500">
</div>
</div>
<p>All rules must have a check interval, which defines how often to evaluate the rule conditions. Checks are queued; they run as close to the defined value as capacity allows.</p>
<p>For details on what types of rules are available and how to configure them, refer to <a class="xref" href="rule-types.html" title="Rule types"><em>Rule types</em></a>.</p>
<h4><a id="defining-rules-actions-details"></a>Actions<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h4>
<p>You can add one or more actions to your rule to generate notifications when its
conditions are met and when they are no longer met.</p>
<p>Each action uses a connector, which provides connection information for a Kibana service or third party integration, depending on where you want to send the notifications. If no connectors exist, click <span class="strong strong"><strong>Add connector</strong></span> to create one.</p>
<p>After you select a connector, set the action frequency. If the rule type supports alert summaries, you can choose to create a summary of alerts on each check interval or on a custom interval. For example, if you create a metrics threshold rule, you can send email notifications that summarize the new, ongoing, and recovered alerts each day:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/rule-flyout-action-summary.png" alt="UI for defining rule conditions on a metric threshold rule" width="500">
</div>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you choose a custom action interval, it cannot be shorter than the rule&#8217;s check interval.</p>
</div>
</div>
<p>Alternatively, you can set the action frequency such that the action runs for each alert. If the rule type does not support alert summaries, this is your only available option. You must choose when the action runs (for example, at each check interval, only when the alert status changes, or at a custom action interval). You must also choose an action group, which affects whether the action runs (for example, the action runs when the issue is detected or when it is recovered). Each rule type has a specific set of valid action groups.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/rule-flyout-action-details.png" alt="UI for defining an email action" width="500">
</div>
</div>
<p>Each connector enables different action properties. For example, an email connector enables you to set the recipients, the subject, and a message body in markdown format. For more information about connectors, refer to <a class="xref" href="action-types.html" title="Connectors"><em>Connectors</em></a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<a id="alerting-concepts-suppressing-duplicate-notifications"></a>
<p>If you are not using alert summaries, actions are triggered per alert and a rule can end up generating a large number of actions. Take the following example where a rule is monitoring three servers every minute for CPU usage &gt; 0.9, and the action frequency is <code class="literal">On check intervals</code>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Minute 1: server X123 &gt; 0.9. <em>One email</em> is sent for server X123.
</li>
<li class="listitem">
Minute 2: X123 and Y456 &gt; 0.9. <em>Two emails</em> are sent, one for X123 and one for Y456.
</li>
<li class="listitem">
Minute 3: X123, Y456, Z789 &gt; 0.9. <em>Three emails</em> are sent, one for each of X123, Y456, Z789.
</li>
</ul>
</div>
<p>In this example, three emails are sent for server X123 in the span of 3 minutes for the same rule. Often, it&#8217;s desirable to suppress these re-notifications. If
you set the action frequency to <code class="literal">On custom action intervals</code> with an interval of 5 minutes, you reduce noise by getting emails only every 5 minutes for
servers that continue to exceed the threshold:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Minute 1: server X123 &gt; 0.9. <em>One email</em> will be sent for server X123.
</li>
<li class="listitem">
Minute 2: X123 and Y456 &gt; 0.9. <em>One email</em> will be sent for Y456.
</li>
<li class="listitem">
Minute 3: X123, Y456, Z789 &gt; 0.9. <em>One email</em> will be sent for Z789.
</li>
</ul>
</div>
<p>To get notified only once when a server exceeds the threshold, you can set the action frequency to <code class="literal">On status changes</code>. Alternatively, if the rule type supports alert summaries, consider using them to reduce the volume of notifications.</p>
</div>
</div>
<h4><a id="defining-rules-actions-variables"></a>Action variables<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h4>
<p>You can pass rule values to an action at the time a condition is detected.
To view the list of variables available for your rule, click the "add rule variable" button:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/rule-flyout-action-variables.png" alt="Passing rule values to an action" width="500">
</div>
</div>
<p>For more information about common action variables, refer to <a class="xref" href="rule-action-variables.html" title="Rule action variables"><em>Rule action variables</em></a>.</p>
<h3><a id="controlling-rules"></a>Snooze and disable rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h3>
<p>The rule listing enables you to quickly snooze, disable, enable, or delete
individual rules. For example, you can change the state of a rule:</p>
<p class="screenshot"><span class="image"><img src="images/individual-enable-disable.png" alt="Use the rule status dropdown to enable or disable an individual rule"></span></p>
<p>When you snooze a rule, the rule checks continue to run on a schedule but the
alert will not trigger any actions. You can snooze for a specified period of
time, indefinitely, or schedule single or recurring downtimes:</p>
<p class="screenshot"><span class="image"><img src="images/snooze-panel.png" alt="Snooze notifications for a rule"></span></p>
<p>When a rule is in a snoozed state, you can cancel or change the duration of
this state.</p>
<h3><a id="importing-and-exporting-rules"></a>Import and export rules<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h3>
<p>To import and export rules, use <a class="xref" href="managing-saved-objects.html" title="Manage saved objects">Saved Objects</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Some rule types cannot be exported through this interface:</p>
<p><span class="strong strong"><strong>Security rules</strong></span> can be imported and exported using the <a href="/guide/en/security/8.7/rules-ui-management.html#import-export-rules-ui" class="ulink" target="_top">Security UI</a>.</p>
<p><span class="strong strong"><strong>Stack monitoring rules</strong></span> are <a class="xref" href="kibana-alerts.html" title="Kibana alerts">automatically created</a> for you and therefore cannot be managed in <span class="strong strong"><strong>Saved Objects</strong></span>.</p>
</div>
</div>
<p>Rules are disabled on export. You are prompted to re-enable the rule on successful import.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/rules-imported-banner.png" alt="Rules import banner" width="500">
</div>
</div>
<h3><a id="rule-details"></a>View rule details<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/kibana/edit/8.7/docs/user/alerting/create-and-manage-rules.asciidoc">edit</a></h3>
<p>You can determine the health of a rule by looking at the <span class="strong strong"><strong>Last response</strong></span> column
in  <span class="strong strong"><strong>Stack Management</strong></span> &gt; <span class="strong strong"><strong>Rules</strong></span>. A rule can have one of the following
responses:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">failed</code>
</span>
</dt>
<dd>
The rule ran with errors.
</dd>
<dt>
<span class="term">
<code class="literal">succeeded</code>
</span>
</dt>
<dd>
The rule ran without errors.
</dd>
<dt>
<span class="term">
<code class="literal">warning</code>
</span>
</dt>
<dd>
The rule ran with some non-critical errors.
</dd>
</dl>
</div>
<p>Click the rule name to access a rule details page:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/rule-details-alerts-active.png" alt="Rule details page with multiple alerts">
</div>
</div>
<p>In this example, the rule detects when a site serves more than a threshold number of bytes in a 24 hour period. Four sites are above the threshold. These are called alerts - occurrences of the condition being detected - and the alert name, status, time of detection, and duration of the condition are shown in this view. Alerts come and go from the list depending on whether the rule conditions are met.</p>
<p>When an alert is created, it generates actions. If the conditions that caused the alert persist, the actions run again according to the rule notification settings. There are three common alert statuses:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">active</code>
</span>
</dt>
<dd>
The conditions for the rule are met and actions should be generated according to the notification settings.
</dd>
<dt>
<span class="term">
<code class="literal">flapping</code>
</span>
</dt>
<dd>
The alert is switching repeatedly between active and recovered states.
</dd>
<dt>
<span class="term">
<code class="literal">recovered</code>
</span>
</dt>
<dd>
The conditions for the rule are no longer met and recovery actions should be generated.
</dd>
</dl>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">flapping</code> state is possible only if you have enabled alert flapping detection in <span class="strong strong"><strong>Stack Management</strong></span> &gt; <span class="strong strong"><strong>Rules</strong></span> &gt; <span class="strong strong"><strong>Settings</strong></span>. For each space, you can choose a look back window and threshold that are used to determine whether alerts are flapping. For example, you can specify that the alert must change status at least 6 times in the last 10 runs. If the rule has actions that run when the alert status changes, those actions are suppressed while the alert is flapping.</p>
</div>
</div>
<p>You can suppress future actions for a specific alert by turning on the <span class="strong strong"><strong>Mute</strong></span> toggle. If a muted alert no longer meets the rule conditions, it stays in the list to avoid generating actions if the conditions recur. You can also disable a rule, which stops it from running checks and clears any alerts it was tracking. You may want to disable rules that are not currently needed to reduce the load on Kibana and Elasticsearch.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/rule-details-disabling.png" alt="Use the disable toggle to turn off rule checks and clear alerts tracked">
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="alerting-setup.html">« Alerting set up</a>
</span>
<span class="next">
<a href="rule-types.html">Rule types »</a>
</span>
</div>
</div>
</body>
</html>
