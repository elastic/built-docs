<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>kafka | Logstash Reference [1.5] | Elastic</title>
<link rel="home" href="index.html" title="Logstash Reference [1.5]"/>
<link rel="up" href="output-plugins.html" title="Output plugins"/>
<link rel="prev" href="plugins-outputs-jira.html" title="jira"/>
<link rel="next" href="plugins-outputs-lumberjack.html" title="lumberjack"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/1.5"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="1.5"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Logstash Reference [1.5]</a></span>
»
<span class="breadcrumb-link"><a href="logstash-reference.html">Logstash Reference</a></span>
»
<span class="breadcrumb-link"><a href="output-plugins.html">Output plugins</a></span>
»
<span class="breadcrumb-node">kafka</span>
</div>
<div class="navheader">
<span class="prev">
<a href="plugins-outputs-jira.html">« jira</a>
</span>
<span class="next">
<a href="plugins-outputs-lumberjack.html">lumberjack »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="plugins-outputs-kafka"></a>kafka<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h2>
</div></div></div>
<p>Write events to a Kafka topic. This uses the Kafka Producer API to write messages to a topic on
the broker.</p>
<p>The only required configuration is the topic name. The default codec is json,
so events will be persisted on the broker in json format. If you select a codec of plain,
Logstash will encode your messages with not only the message but also with a timestamp and
hostname. If you do not want anything but your message passing through, you should make the output
configuration something like:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">    output {
      kafka {
        codec =&gt; plain {
           format =&gt; "%{message}"
        }
      }
    }
For more information see http://kafka.apache.org/documentation.html#theproducer</pre>
</div>
<p>Kafka producer configuration: <a href="http://kafka.apache.org/documentation.html#producerconfigs" class="ulink" target="_top">http://kafka.apache.org/documentation.html#producerconfigs</a></p>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_synopsis_72"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h3>
</div></div></div>
<p>This plugin supports the following configuration options:</p>
<p>Required configuration options:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">kafka {
    topic_id =&gt; ...
}</pre>
</div>
<p>Available configuration options:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
<th align="left" valign="top">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-batch_num_messages" title="batch_num_messages"><code class="literal">batch_num_messages</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">200</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-broker_list" title="broker_list"><code class="literal">broker_list</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"localhost:9092"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-client_id" title="client_id"><code class="literal">client_id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">""</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-codec" title="codec"><code class="literal">codec</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#codec" title="Codec">codec</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"json"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-compressed_topics" title="compressed_topics"><code class="literal">compressed_topics</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">""</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-compression_codec" title="compression_codec"><code class="literal">compression_codec</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["none", "gzip", "snappy"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"none"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-key_serializer_class" title="key_serializer_class"><code class="literal">key_serializer_class</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"kafka.serializer.StringEncoder"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-message_send_max_retries" title="message_send_max_retries"><code class="literal">message_send_max_retries</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">3</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-partition_key_format" title="partition_key_format"><code class="literal">partition_key_format</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">nil</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-partitioner_class" title="partitioner_class"><code class="literal">partitioner_class</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"kafka.producer.DefaultPartitioner"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-producer_type" title="producer_type"><code class="literal">producer_type</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["sync", "async"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"sync"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-queue_buffering_max_messages" title="queue_buffering_max_messages"><code class="literal">queue_buffering_max_messages</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">10000</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-queue_buffering_max_ms" title="queue_buffering_max_ms"><code class="literal">queue_buffering_max_ms</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">5000</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-queue_enqueue_timeout_ms" title="queue_enqueue_timeout_ms"><code class="literal">queue_enqueue_timeout_ms</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">-1</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-request_required_acks" title="request_required_acks"><code class="literal">request_required_acks</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">[-1, 0, 1]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">0</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-request_timeout_ms" title="request_timeout_ms"><code class="literal">request_timeout_ms</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">10000</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-retry_backoff_ms" title="retry_backoff_ms"><code class="literal">retry_backoff_ms</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">100</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-send_buffer_bytes" title="send_buffer_bytes"><code class="literal">send_buffer_bytes</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">102400</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-serializer_class" title="serializer_class"><code class="literal">serializer_class</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"kafka.serializer.StringEncoder"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-topic_id" title="topic_id"><code class="literal">topic_id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-topic_metadata_refresh_interval_ms" title="topic_metadata_refresh_interval_ms"><code class="literal">topic_metadata_refresh_interval_ms</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">600000</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-kafka.html#plugins-outputs-kafka-workers" title="workers"><code class="literal">workers</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">1</code></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_details_73"></a>Details<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h3>
</div></div></div>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-batch_num_messages"></a><code class="literal">batch_num_messages</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">200</code>
</li>
</ul>
</div>
<p>The number of messages to send in one batch when using async mode. The producer will wait
until either this number of messages are ready to send or <code class="literal">queue.buffer.max.ms</code> is reached.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-broker_list"></a><code class="literal">broker_list</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"localhost:9092"</code>
</li>
</ul>
</div>
<p>This is for bootstrapping and the producer will only use it for getting metadata (topics,
partitions and replicas). The socket connections for sending the actual data will be
established based on the broker information returned in the metadata. The format is
<code class="literal">host1:port1,host2:port2</code>, and the list can be a subset of brokers or a VIP pointing to a
subset of brokers.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-client_id"></a><code class="literal">client_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">""</code>
</li>
</ul>
</div>
<p>The client id is a user-specified string sent in each request to help trace calls. It should
logically identify the application making the request.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-codec"></a><code class="literal">codec</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#codec" title="Codec">codec</a>
</li>
<li class="listitem">
Default value is <code class="literal">"json"</code>
</li>
</ul>
</div>
<p>The codec used for output data. Output codecs are a convenient method for encoding your data before it leaves the output, without needing a separate filter in your Logstash pipeline.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-compressed_topics"></a><code class="literal">compressed_topics</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">""</code>
</li>
</ul>
</div>
<p>This parameter allows you to set whether compression should be turned on for particular
topics. If the compression codec is anything other than <code class="literal">NoCompressionCodec</code>,
enable compression only for specified topics if any. If the list of compressed topics is
empty, then enable the specified compression codec for all topics. If the compression codec
is <code class="literal">NoCompressionCodec</code>, compression is disabled for all topics</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-compression_codec"></a><code class="literal">compression_codec</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">none</code>, <code class="literal">gzip</code>, <code class="literal">snappy</code>
</li>
<li class="listitem">
Default value is <code class="literal">"none"</code>
</li>
</ul>
</div>
<p>This parameter allows you to specify the compression codec for all data generated by this
producer. Valid values are <code class="literal">none</code>, <code class="literal">gzip</code> and <code class="literal">snappy</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-exclude_tags"></a><code class="literal">exclude_tags</code>  (DEPRECATED)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
DEPRECATED WARNING: This configuration item is deprecated and may not be available in future versions.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#array" title="Array">array</a>
</li>
<li class="listitem">
Default value is <code class="literal">[]</code>
</li>
</ul>
</div>
<p>Only handle events without any of these tags.
Optional.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-key_serializer_class"></a><code class="literal">key_serializer_class</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"kafka.serializer.StringEncoder"</code>
</li>
</ul>
</div>
<p>The serializer class for keys (defaults to the same as for messages if nothing is given)</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-message_send_max_retries"></a><code class="literal">message_send_max_retries</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">3</code>
</li>
</ul>
</div>
<p>This property will cause the producer to automatically retry a failed send request. This
property specifies the number of retries when such failures occur. Note that setting a
non-zero value here can lead to duplicates in the case of network errors that cause a message
to be sent but the acknowledgement to be lost.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-partition_key_format"></a><code class="literal">partition_key_format</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">nil</code>
</li>
</ul>
</div>
<p>Provides a way to specify a partition key as a string. To specify a partition key for
Kafka, configure a format that will produce the key as a string. Defaults
<code class="literal">key_serializer_class</code> to <code class="literal">kafka.serializer.StringEncoder</code> to match. For example, to partition
by host:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">    output {
      kafka {
          partition_key_format =&gt; "%{host}"
      }
    }</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-partitioner_class"></a><code class="literal">partitioner_class</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"kafka.producer.DefaultPartitioner"</code>
</li>
</ul>
</div>
<p>The partitioner class for partitioning messages amongst partitions in the topic. The default
partitioner is based on the hash of the key. If the key is null,
the message is sent to a random partition in the broker.
NOTE: <code class="literal">topic_metadata_refresh_interval_ms</code> controls how long the producer will distribute to a
partition in the topic. This defaults to 10 mins, so the producer will continue to write to a
single partition for 10 mins before it switches</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-producer_type"></a><code class="literal">producer_type</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">sync</code>, <code class="literal">async</code>
</li>
<li class="listitem">
Default value is <code class="literal">"sync"</code>
</li>
</ul>
</div>
<p>This parameter specifies whether the messages are sent asynchronously in a background thread.
Valid values are (1) async for asynchronous send and (2) sync for synchronous send. By
setting the producer to async we allow batching together of requests (which is great for
throughput) but open the possibility of a failure of the client machine dropping unsent data.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-queue_buffering_max_messages"></a><code class="literal">queue_buffering_max_messages</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">10000</code>
</li>
</ul>
</div>
<p>The maximum number of unsent messages that can be queued up the producer when using async
mode before either the producer must be blocked or data must be dropped.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-queue_buffering_max_ms"></a><code class="literal">queue_buffering_max_ms</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">5000</code>
</li>
</ul>
</div>
<p>Maximum time to buffer data when using async mode. For example a setting of 100 will try to
batch together 100ms of messages to send at once. This will improve throughput but adds
message delivery latency due to the buffering.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-queue_enqueue_timeout_ms"></a><code class="literal">queue_enqueue_timeout_ms</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">-1</code>
</li>
</ul>
</div>
<p>The amount of time to block before dropping messages when running in async mode and the
buffer has reached <code class="literal">queue.buffering.max.messages</code>. If set to 0 events will be enqueued
immediately or dropped if the queue is full (the producer send call will never block). If set
to -1 the producer will block indefinitely and never willingly drop a send.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-request_required_acks"></a><code class="literal">request_required_acks</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">-1</code>, <code class="literal">0</code>, <code class="literal">1</code>
</li>
<li class="listitem">
Default value is <code class="literal">0</code>
</li>
</ul>
</div>
<p>This value controls when a produce request is considered completed. Specifically,
how many other brokers must have committed the data to their log and acknowledged this to the
leader. For more info, see&#8201;&#8212;&#8201;<a href="http://kafka.apache.org/documentation.html#producerconfigs" class="ulink" target="_top">http://kafka.apache.org/documentation.html#producerconfigs</a></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-request_timeout_ms"></a><code class="literal">request_timeout_ms</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">10000</code>
</li>
</ul>
</div>
<p>The amount of time the broker will wait trying to meet the <code class="literal">request.required.acks</code> requirement
before sending back an error to the client.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-retry_backoff_ms"></a><code class="literal">retry_backoff_ms</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">100</code>
</li>
</ul>
</div>
<p>Before each retry, the producer refreshes the metadata of relevant topics to see if a new
leader has been elected. Since leader election takes a bit of time,
this property specifies the amount of time that the producer waits before refreshing the
metadata.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-send_buffer_bytes"></a><code class="literal">send_buffer_bytes</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">102400</code>
</li>
</ul>
</div>
<p>Socket write buffer size</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-serializer_class"></a><code class="literal">serializer_class</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"kafka.serializer.StringEncoder"</code>
</li>
</ul>
</div>
<p>The serializer class for messages. The default encoder takes a byte[] and returns the same byte[]</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-tags"></a><code class="literal">tags</code>  (DEPRECATED)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
DEPRECATED WARNING: This configuration item is deprecated and may not be available in future versions.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#array" title="Array">array</a>
</li>
<li class="listitem">
Default value is <code class="literal">[]</code>
</li>
</ul>
</div>
<p>Only handle events with all of these tags.
Optional.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-topic_id"></a><code class="literal">topic_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The topic to produce the messages to</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-topic_metadata_refresh_interval_ms"></a><code class="literal">topic_metadata_refresh_interval_ms</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">600000</code>
</li>
</ul>
</div>
<p>The producer generally refreshes the topic metadata from brokers when there is a failure
(partition missing, leader not available&#8230;&#8203;). It will also poll regularly (default: every
10min so 600000ms). If you set this to a negative value, metadata will only get refreshed on
failure. If you set this to zero, the metadata will get refreshed after each message sent
(not recommended). Important note: the refresh happen only AFTER the message is sent,
so if the producer never sends a message the metadata is never refreshed</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-type"></a><code class="literal">type</code>  (DEPRECATED)<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
DEPRECATED WARNING: This configuration item is deprecated and may not be available in future versions.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">""</code>
</li>
</ul>
</div>
<p>The type to act on. If a type is given, then this output will only
act on messages with the same type. See any input plugin&#8217;s <code class="literal">type</code>
attribute for more.
Optional.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-kafka-workers"></a><code class="literal">workers</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-kafka/edit/master/lib/logstash/outputs/kafka.rb">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">1</code>
</li>
</ul>
</div>
<p>The number of workers to use for this output.
Note that this setting may not be useful for all outputs.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="plugins-outputs-jira.html">« jira</a>
</span>
<span class="next">
<a href="plugins-outputs-lumberjack.html">lumberjack »</a>
</span>
</div>
</div>
</body>
</html>
