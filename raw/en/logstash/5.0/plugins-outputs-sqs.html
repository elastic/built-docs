<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>sqs | Logstash Reference [5.0] | Elastic</title>
<link rel="home" href="index.html" title="Logstash Reference [5.0]"/>
<link rel="up" href="output-plugins.html" title="Output plugins"/>
<link rel="prev" href="plugins-outputs-solr_http.html" title="solr_http"/>
<link rel="next" href="plugins-outputs-statsd.html" title="statsd"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/5.0"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="5.0"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Logstash Reference [5.0]</a></span>
»
<span class="breadcrumb-link"><a href="output-plugins.html">Output plugins</a></span>
»
<span class="breadcrumb-node">sqs</span>
</div>
<div class="navheader">
<span class="prev">
<a href="plugins-outputs-solr_http.html">« solr_http</a>
</span>
<span class="next">
<a href="plugins-outputs-statsd.html">statsd »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="plugins-outputs-sqs"></a>sqs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h2>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is a community-maintained plugin!</p>
</div>
</div>
<p>Push events to an Amazon Web Services Simple Queue Service (SQS) queue.</p>
<p>SQS is a simple, scalable queue system that is part of the
Amazon Web Services suite of tools.</p>
<p>Although SQS is similar to other queuing systems like AMQP, it
uses a custom API and requires that you have an AWS account.
See <a href="http://aws.amazon.com/sqs/" class="ulink" target="_top">http://aws.amazon.com/sqs/</a> for more details on how SQS works,
what the pricing schedule looks like and how to setup a queue.</p>
<p>To use this plugin, you <span class="strong strong"><strong>must</strong></span>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Have an AWS account
</li>
<li class="listitem">
Setup an SQS queue
</li>
<li class="listitem">
Create an identify that has access to publish messages to the queue.
</li>
</ul>
</div>
<p>The "consumer" identity must have the following permissions on the queue:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
sqs:ChangeMessageVisibility
</li>
<li class="listitem">
sqs:ChangeMessageVisibilityBatch
</li>
<li class="listitem">
sqs:GetQueueAttributes
</li>
<li class="listitem">
sqs:GetQueueUrl
</li>
<li class="listitem">
sqs:ListQueues
</li>
<li class="listitem">
sqs:SendMessage
</li>
<li class="listitem">
sqs:SendMessageBatch
</li>
</ul>
</div>
<p>Typically, you should setup an IAM policy, create a user and apply the IAM policy to the user.
A sample policy is as follows:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">     {
       "Statement": [
         {
           "Sid": "Stmt1347986764948",
           "Action": [
             "sqs:ChangeMessageVisibility",
             "sqs:ChangeMessageVisibilityBatch",
             "sqs:DeleteMessage",
             "sqs:DeleteMessageBatch",
             "sqs:GetQueueAttributes",
             "sqs:GetQueueUrl",
             "sqs:ListQueues",
             "sqs:ReceiveMessage"
           ],
           "Effect": "Allow",
           "Resource": [
             "arn:aws:sqs:us-east-1:200850199751:Logstash"
           ]
         }
       ]
     }</pre>
</div>
<p>See <a href="http://aws.amazon.com/iam/" class="ulink" target="_top">http://aws.amazon.com/iam/</a> for more details on setting up AWS identities.</p>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_synopsis_96"></a>Synopsis<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>This plugin supports the following configuration options:</p>
<p>Required configuration options:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">sqs {
    queue =&gt; ...
}</pre>
</div>
<p>Available configuration options:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
<th align="left" valign="top">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-access_key_id" title="access_key_id"><code class="literal">access_key_id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-aws_credentials_file" title="aws_credentials_file"><code class="literal">aws_credentials_file</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-batch" title="batch"><code class="literal">batch</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">true</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-batch_events" title="batch_events"><code class="literal">batch_events</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">10</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-batch_timeout" title="batch_timeout"><code class="literal">batch_timeout</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">5</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-codec" title="codec"><code class="literal">codec</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#codec" title="Codec">codec</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"plain"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-proxy_uri" title="proxy_uri"><code class="literal">proxy_uri</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-queue" title="queue"><code class="literal">queue</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-region" title="region"><code class="literal">region</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["us-east-1", "us-west-1", "us-west-2", "eu-central-1", "eu-west-1", "ap-southeast-1", "ap-southeast-2", "ap-northeast-1", "sa-east-1", "us-gov-west-1", "cn-north-1"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">"us-east-1"</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-secret_access_key" title="secret_access_key"><code class="literal">secret_access_key</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-session_token" title="session_token"><code class="literal">session_token</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-use_ssl" title="use_ssl"><code class="literal">use_ssl</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">true</code></code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-sqs.html#plugins-outputs-sqs-workers" title="workers"><code class="literal">workers</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
<td align="left" valign="top"><p><code class="literal"><code class="literal">1</code></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_details_97"></a>Details<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-access_key_id"></a><code class="literal">access_key_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>This plugin uses the AWS SDK and supports several ways to get credentials, which will be tried in this order:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Static configuration, using <code class="literal">access_key_id</code> and <code class="literal">secret_access_key</code> params in logstash plugin config
</li>
<li class="listitem">
External credentials file specified by <code class="literal">aws_credentials_file</code>
</li>
<li class="listitem">
Environment variables <code class="literal">AWS_ACCESS_KEY_ID</code> and <code class="literal">AWS_SECRET_ACCESS_KEY</code>
</li>
<li class="listitem">
Environment variables <code class="literal">AMAZON_ACCESS_KEY_ID</code> and <code class="literal">AMAZON_SECRET_ACCESS_KEY</code>
</li>
<li class="listitem">
IAM Instance Profile (available when running inside EC2)
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-aws_credentials_file"></a><code class="literal">aws_credentials_file</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Path to YAML file containing a hash of AWS credentials.
This file will only be loaded if <code class="literal">access_key_id</code> and
<code class="literal">secret_access_key</code> aren&#8217;t set. The contents of the
file should look like this:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby"> :access_key_id: "12345"
 :secret_access_key: "54321"</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-batch"></a><code class="literal">batch</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">true</code>
</li>
</ul>
</div>
<p>Set to true if you want send messages to SQS in batches with <code class="literal">batch_send</code>
from the amazon sdk</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-batch_events"></a><code class="literal">batch_events</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">10</code>
</li>
</ul>
</div>
<p>If <code class="literal">batch</code> is set to true, the number of events we queue up for a <code class="literal">batch_send</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-batch_timeout"></a><code class="literal">batch_timeout</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">5</code>
</li>
</ul>
</div>
<p>If <code class="literal">batch</code> is set to true, the maximum amount of time between <code class="literal">batch_send</code> commands when there are pending events to flush.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-codec"></a><code class="literal">codec</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#codec" title="Codec">codec</a>
</li>
<li class="listitem">
Default value is <code class="literal">"plain"</code>
</li>
</ul>
</div>
<p>The codec used for output data. Output codecs are a convenient method for encoding your data before it leaves the output, without needing a separate filter in your Logstash pipeline.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-proxy_uri"></a><code class="literal">proxy_uri</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>URI to proxy server if required</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-queue"></a><code class="literal">queue</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Name of SQS queue to push messages into. Note that this is just the name of the queue, not the URL or ARN.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-region"></a><code class="literal">region</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">us-east-1</code>, <code class="literal">us-west-1</code>, <code class="literal">us-west-2</code>, <code class="literal">eu-central-1</code>, <code class="literal">eu-west-1</code>, <code class="literal">ap-southeast-1</code>, <code class="literal">ap-southeast-2</code>, <code class="literal">ap-northeast-1</code>, <code class="literal">sa-east-1</code>, <code class="literal">us-gov-west-1</code>, <code class="literal">cn-north-1</code>
</li>
<li class="listitem">
Default value is <code class="literal">"us-east-1"</code>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-secret_access_key"></a><code class="literal">secret_access_key</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The AWS Secret Access Key</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-session_token"></a><code class="literal">session_token</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The AWS Session token for temporary credentials</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-use_ssl"></a><code class="literal">use_ssl</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">true</code>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-sqs-workers"></a><code class="literal">workers</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-sqs/edit/master/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">1</code>
</li>
</ul>
</div>
<p>The number of workers to use for this output.
Note that this setting may not be useful for all outputs.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="plugins-outputs-solr_http.html">« solr_http</a>
</span>
<span class="next">
<a href="plugins-outputs-statsd.html">statsd »</a>
</span>
</div>
</div>
</body>
</html>
