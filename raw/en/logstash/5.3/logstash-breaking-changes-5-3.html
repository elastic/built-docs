<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Logstash 5.3.0 Breaking Changes | Logstash Reference [5.3] | Elastic</title>
<meta class="elastic" name="content" content="Logstash 5.3.0 Breaking Changes | Logstash Reference [5.3]">

<link rel="home" href="index.html" title="Logstash Reference [5.3]"/>
<link rel="up" href="breaking-changes.html" title="Breaking changes"/>
<link rel="prev" href="breaking-changes.html" title="Breaking changes"/>
<link rel="next" href="logstash-breaking-changes-5-2.html" title="Logstash 5.2.0 Breaking Changes"/>
<meta class="elastic" name="product_version" content="5.3"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/5.3"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="5.3"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [5.3]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="breaking-changes.html">« Breaking changes</a>
</span>
<span class="next">
<a href="logstash-breaking-changes-5-2.html">Logstash 5.2.0 Breaking Changes »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="logstash-breaking-changes-5-3"></a>Logstash 5.3.0 Breaking Changes<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/5.3/docs/static/breaking-changes.asciidoc">edit</a></h2>
</div></div></div>
<p>This section discusses the changes that you need to be aware of when migrating your application
from Logstash 5.2 to 5.3.</p>
<h4><a id="_changes_in_logstash_core"></a>Changes in Logstash Core<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/5.3/docs/static/breaking-changes.asciidoc">edit</a></h4>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_persistent_queue"></a>Persistent queue<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/5.3/docs/static/breaking-changes.asciidoc">edit</a></h3>
</div></div></div>
<p>The default location on disk where the queue data is stored has been changed from <code class="literal">&lt;path.data&gt;/queue</code> to
<code class="literal">&lt;path.data&gt;/queue/main</code>. The directory hierarchy now includes the pipeline ID which defaults to <code class="literal">main</code>.
This change was made to accommodate an upcoming feature where multiple, isolated pipelines can be run on
the same Logstash instance. In this future situation, each pipeline will have its own queue; hence the new directory
structure.</p>
<p><span class="strong strong"><strong>Upgrading to 5.3</strong></span></p>
<p>If you are using the persistent queue feature and intend to upgrade to 5.3:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Ensure you completely drain the queue data in 5.2 by stopping the incoming data and processing all of the
in-flight events.
</li>
<li class="listitem">
Stop Logstash and manually move the files under <code class="literal">&lt;path.data&gt;/queue/</code> to <code class="literal">&lt;path.data&gt;/queue/main</code> before upgrading to 5.3.
</li>
<li class="listitem">
If you do not intend to process the data currently buffered in the queue in 5.2, you can manually delete
the <code class="literal">path.data/queue</code> directory before upgrading to 5.3.
</li>
</ul>
</div>
<h4><a id="_breaking_changes_in_plugins"></a>Breaking Changes in Plugins<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/5.3/docs/static/breaking-changes.asciidoc">edit</a></h4>
<p><span class="strong strong"><strong><code class="literal">KV filter</code></strong></span>: <code class="literal">trim</code> and <code class="literal">trimkey</code> options are renamed to <code class="literal">trim_value</code> and <code class="literal">trim_key</code> respectively. Their behavior has been
changed as well to <em>trim</em> the characters at the beginning or end of the values.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="breaking-changes.html">« Breaking changes</a>
</span>
<span class="next">
<a href="logstash-breaking-changes-5-2.html">Logstash 5.2.0 Breaking Changes »</a>
</span>
</div>
</div>
</body>
</html>
