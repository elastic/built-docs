<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Documenting your plugin | Logstash Reference [7.11] | Elastic</title>
<link rel="home" href="index.html" title="Logstash Reference [7.11]"/>
<link rel="up" href="contributing-to-logstash.html" title="Contributing to Logstash"/>
<link rel="prev" href="output-new-plugin.html" title="How to write a Logstash output plugin"/>
<link rel="next" href="contributing-patch-plugin.html" title="Contributing a Patch to a Logstash Plugin"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/7.11"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="7.11"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Logstash Reference [7.11]</a></span>
»
<span class="breadcrumb-link"><a href="contributing-to-logstash.html">Contributing to Logstash</a></span>
»
<span class="breadcrumb-node">Documenting your plugin</span>
</div>
<div class="navheader">
<span class="prev">
<a href="output-new-plugin.html">« How to write a Logstash output plugin</a>
</span>
<span class="next">
<a href="contributing-patch-plugin.html">Contributing a Patch to a Logstash Plugin »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="plugin-doc"></a>Documenting your plugin<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h2>
</div></div></div>
<p>Quality documentation with good examples contributes to the adoption of your plugin.</p>
<p>The documentation that you write for your plugin will be generated and published
in the <a href="/guide/en/logstash/7.11/index.html" class="ulink" target="_top">Logstash Reference</a> and the
<a href="/guide/en/logstash-versioned-plugins/current" class="ulink" target="_top">Logstash Versioned Plugin Reference</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="plugin-doc-file"></a>Documentation file<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h3>
</div></div></div>
<p>Documentation is a required component of your plugin.
It belongs in a single file called <em>docs/index.asciidoc</em>.
The <a class="xref" href="plugin-generator.html" title="Generating Plugins">plugin generation utility</a> creates a starter file for you.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="heading-ids"></a>Heading IDs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h3>
</div></div></div>
<p>Format heading anchors with variables that can support generated IDs. This approach
creates unique IDs when the <a href="/guide/en/logstash-versioned-plugins/current" class="ulink" target="_top">Logstash Versioned Plugin Reference</a>
is built. Unique heading IDs are required to avoid duplication over multiple versions of a plugin.</p>
<p><span class="strong strong"><strong>Example</strong></span></p>
<p>Don&#8217;t hardcode a heading ID like this: <code class="literal">[[config_models]]</code></p>
<p>Instead, use variables to define it:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">[id="plugins-{type}s-{plugin}-config_models"]
==== Configuration models</pre>
</div>
<p>If you hardcode an ID, the <a href="/guide/en/logstash-versioned-plugins/current" class="ulink" target="_top">Logstash Versioned Plugin Reference</a>
builds correctly the first time. The second time the doc build runs, the ID
is flagged as a duplicate, and the build fails.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="link-format"></a>Link formats<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h3>
</div></div></div>
<p>Correct link formatting is essential for directing users to the content you
want them to see. Incorrect link formatting or duplicate links can break the
documentation build. Let&#8217;s not do that.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_link_to_content_in_the_same_file"></a>Link to content in the same file<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h4>
</div></div></div>
<p>Use angle brackets to format links to content in the same asciidoc file.</p>
<p><span class="strong strong"><strong>Example</strong></span></p>
<p>This link:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">&lt;&lt;plugins-{type}s-{plugin}-config_models&gt;&gt;</pre>
</div>
<p>Points to this heading in the same file:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">[id="plugins-{type}s-{plugin}-config_models"]
==== Configuration models</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_link_to_content_in_the_logstash_reference_guide"></a>Link to content in the Logstash Reference Guide<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h4>
</div></div></div>
<p>Use external link syntax for links that point to documentation for other plugins or content in the Logstash Reference Guide.</p>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">{logstash-ref}/plugins-codecs-multiline.html[Multiline codec plugin]</pre>
</div>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">{logstash-ref}/getting-started-with-logstash.html</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_link_text"></a>Link text<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h4>
</div></div></div>
<p>If you don&#8217;t specify link text, the URL is used as the link text.</p>
<p><span class="strong strong"><strong>Examples</strong></span></p>
<p>If you want your link to display as <a href="/guide/en/logstash/7.11/getting-started-with-logstash.html" class="ulink" target="_top">https://www.elastic.co/guide/en/logstash/7.11/getting-started-with-logstash.html</a>, use this format:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">{logstash-ref}/getting-started-with-logstash.html</pre>
</div>
<p>If you want your link to display as <a href="/guide/en/logstash/7.11/getting-started-with-logstash.html" class="ulink" target="_top">Getting Started with Logstash</a>, use this format:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">{logstash-ref}/getting-started-with-logstash.html[Getting Started with Logstash]</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_link_to_data_type_descriptions"></a>Link to data type descriptions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h4>
</div></div></div>
<p>We make an exception for links that point to data type descriptions,
such as <code class="literal">&lt;&lt;boolean,boolean&gt;&gt;</code>, because they are used so frequently.
We have a cleanup step in the conversion script that converts the links to the
correct syntax.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="format-code"></a>Code samples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h3>
</div></div></div>
<p>We all love code samples. Asciidoc supports code blocks and config examples.
To include Ruby code, use the asciidoc <code class="literal">[source,ruby]</code> directive.</p>
<p>Note that the hashmarks (#) are present to make the example render correctly.
Don&#8217;t include the hashmarks in your asciidoc file.</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt"># [source,ruby]
# -----
# match =&gt; {
#  "field1" =&gt; "value1"
#  "field2" =&gt; "value2"
#  ...
# }
# -----</pre>
</div>
<p>The sample above (with hashmarks removed) renders in the documentation like this:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">match =&gt; {
  "field1" =&gt; "value1"
  "field2" =&gt; "value2"
  ...
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_wheres_my_doc"></a>Where&#8217;s my doc?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h3>
</div></div></div>
<p>Plugin documentation goes through several steps before it gets published in the
<a href="/guide/en/logstash-versioned-plugins/current" class="ulink" target="_top">Logstash Versioned Plugin Reference</a> and the <a href="/guide/en/logstash/7.11/index.html" class="ulink" target="_top">Logstash Reference</a>.</p>
<p>Here&#8217;s an overview of the workflow:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Be sure that you have signed the CLI and have all necessary approvals and sign offs.
</li>
<li class="listitem">
Merge the pull request for your plugin (including the <code class="literal">index.asciidoc</code> file, the <code class="literal">changelog.md</code> file, and the gemspec).
</li>
<li class="listitem">
Wait for the continuous integration build to complete successfully.
</li>
<li class="listitem">
Publish the plugin to <a href="https://rubygems.org" class="ulink" target="_top">https://rubygems.org</a>.
</li>
<li class="listitem">
A script detects the new or changed version, and picks up the <code class="literal">index.asciidoc</code> file for inclusion in the doc build.
</li>
<li class="listitem">
The documentation for your new plugin is published in the <a href="/guide/en/logstash-versioned-plugins/current" class="ulink" target="_top">Logstash Versioned Plugin Reference</a>.
</li>
</ul>
</div>
<p>We&#8217;re not done yet.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
For each release, we package the new and changed documentation files into a pull request to add or update content.
(We sometimes package plugin docs between releases if we make significant changes to plugin documentation or add a new plugin.)
</li>
<li class="listitem">
The script detects the new or changed version, and picks up the <code class="literal">index.asciidoc</code> file for inclusion in the doc build.
</li>
<li class="listitem">
We create a pull request, and merge the new and changed content into the appropriate version branches.
</li>
<li class="listitem">
For a new plugin, we add a link to the list of plugins in the <a href="/guide/en/logstash/7.11/index.html" class="ulink" target="_top">Logstash Reference</a>.
</li>
<li class="listitem">
The documentation for your new (or changed) plugin is published in the <a href="/guide/en/logstash/7.11/index.html" class="ulink" target="_top">Logstash Reference</a>.
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_documentation_or_plugin_updates"></a>Documentation or plugin updates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h4>
</div></div></div>
<p>When you make updates to your plugin or the documentation, consider
bumping the version number in the changelog and gemspec (or version file). The
version change triggers the doc build to pick up your changes for publishing.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_resources"></a>Resources<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/7.11/docs/static/doc-for-plugin.asciidoc">edit</a></h3>
</div></div></div>
<p>For more asciidoc formatting tips, see the excellent reference at
<a href="https://github.com/elastic/docs#asciidoc-guide" class="ulink" target="_top">https://github.com/elastic/docs#asciidoc-guide</a>.</p>
<p>For tips on contributing and changelog guidelines, see
<a href="https://github.com/elastic/logstash/blob/master/CONTRIBUTING.md#logstash-plugin-changelog-guidelines" class="ulink" target="_top">CONTRIBUTING.md</a>.</p>
<p>For general information about contributing, see
<a href="/guide/en/logstash/7.11/contributing-to-logstash.html" class="ulink" target="_top">Contributing to Logstash</a>.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="output-new-plugin.html">« How to write a Logstash output plugin</a>
</span>
<span class="next">
<a href="contributing-patch-plugin.html">Contributing a Patch to a Logstash Plugin »</a>
</span>
</div>
</div>
</body>
</html>
