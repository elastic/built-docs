<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Setting the heap size | Logstash Reference [7.6] | Elastic</title>
<meta class="elastic" name="content" content="Setting the heap size | Logstash Reference [7.6]">

<link rel="home" href="index.html" title="Logstash Reference [7.6]"/>
<link rel="up" href="tips.html" title="Tips and Best Practices"/>
<link rel="prev" href="tips.html" title="Tips and Best Practices"/>
<link rel="next" href="troubleshooting.html" title="Troubleshooting Common Problems"/>
<meta class="elastic" name="product_version" content="7.6"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/7.6"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="7.6"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [7.6]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="tips.html">Tips and Best Practices</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="tips.html">« Tips and Best Practices</a>
</span>
<span class="next">
<a href="troubleshooting.html">Troubleshooting Common Problems »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="heap-size"></a>Setting the heap size<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/7.6/docs/static/config-details.asciidoc">edit</a></h2>
</div></div></div>
<p>Set the jvm heap size in the <code class="literal">jvm.options</code> <a class="xref" href="config-setting-files.html" title="Logstash Configuration Files">configuration
file</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The recommended heap size for typical ingestion scenarios should be no
less than 4GB and no more than 8GB.</p>
</div>
</div>
<p>Here are some additional tips for adjusting the JVM heap size:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
CPU utilization can increase unnecessarily if the heap size is too low,
resulting in the JVM constantly garbage collecting. You can check for this issue
by doubling the heap size to see if performance improves.
</li>
<li class="listitem">
Do not increase the heap size past the amount of physical
memory. Leave at least 1GB free for the OS and other processes.
</li>
<li class="listitem">
Set the minimum (Xms) and maximum (Xmx) heap allocation size to the same
value to prevent the heap from resizing at runtime, which is a very costly
process.
</li>
<li class="listitem">
You can make more accurate measurements of the JVM heap by using either the
<code class="literal">jmap</code> command line utility distributed with Java or by using VisualVM. For more
info, see <a class="xref" href="tuning-logstash.html#profiling-the-heap" title="Profiling the Heap">Profiling the Heap</a>.
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="tips.html">« Tips and Best Practices</a>
</span>
<span class="next">
<a href="troubleshooting.html">Troubleshooting Common Problems »</a>
</span>
</div>
</div>
</body>
</html>
