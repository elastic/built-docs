<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Collect Logstash monitoring data for dashboards | Logstash Reference [8.12] | Elastic</title>
<meta class="elastic" name="content" content="Collect Logstash monitoring data for dashboards | Logstash Reference [8.12]">

<link rel="home" href="index.html" title="Logstash Reference [8.12]"/>
<link rel="up" href="monitoring-with-ea.html" title="Monitoring Logstash with Elastic Agent"/>
<link rel="prev" href="monitoring-with-ea.html" title="Monitoring Logstash with Elastic Agent"/>
<link rel="next" href="serverless-monitoring-with-elastic-agent.html" title="Collect Logstash monitoring data for dashboards (serverless)"/>
<meta class="elastic" name="product_version" content="8.12"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/8.12"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="8.12"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="monitoring-with-ea.html">« Monitoring Logstash with Elastic Agent</a>
</span>
<span class="next">
<a href="serverless-monitoring-with-elastic-agent.html">Collect Logstash monitoring data for dashboards (serverless) »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [8.12]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="monitoring-with-ea.html">Monitoring Logstash with Elastic Agent</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Collect Logstash monitoring data for dashboards</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/8.12/docs/static/monitoring/monitoring-ea-dashboards.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="dashboard-monitoring-with-elastic-agent"></a>Collect Logstash monitoring data for dashboards</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/8.12/docs/static/monitoring/monitoring-ea-dashboards.asciidoc">edit</a></div>
</div></div></div>

<p>Elastic Agent collects monitoring data from your Logstash instance, sends it directly to your monitoring cluster, and shows the data in Logstash dashboards.</p>
<p>You can enroll Elastic Agent in <a href="/guide/en/fleet/8.12/install-fleet-managed-elastic-agent.html" class="ulink" target="_top">Fleet</a> for management from a central location, or you can run <a href="/guide/en/fleet/8.12/install-standalone-elastic-agent.html" class="ulink" target="_top">Elastic Agent standalone</a>.</p>
<p><span class="strong strong"><strong>Prerequisites</strong></span></p>
<p>Complete these steps as you prepare to collect and ship monitoring data for dashboards:</p>
<details id="disable-default-db">
<summary class="title">Disable default collection of Logstash monitoring metrics</summary>
<div class="content">
<p>The <code class="literal">monitoring</code> setting is in the Logstash configuration file (logstash.yml), but is
commented out:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">monitoring.enabled: false</pre>
</div>
<p>Remove the <code class="literal">#</code> at the beginning of the line to enable the setting.</p>
</div>
</details>
<details id="define-cluster__uuid-db">
<summary class="title">Specify the target cluster_uuid (optional)</summary>
<div class="content">
<p>To bind the metrics of Logstash to a specific cluster, optionally define the <code class="literal">monitoring.cluster_uuid</code>
in the configuration file (logstash.yml):</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">monitoring.cluster_uuid: PRODUCTION_ES_CLUSTER_UUID</pre>
</div>
</div>
</details>
<details id="create-user-db">
<summary class="title">Create a monitoring user (standalone agent only)</summary>
<div class="content">
<p>Create a user on the production cluster that has the
<code class="literal">remote_monitoring_collector</code> <a href="/guide/en/elasticsearch/reference/8.12/built-in-roles.html" class="ulink" target="_top">built-in role</a>.</p>
</div>
</details>
<div class="position-relative"><h3><a id="install-and-configure-db"></a>Install and configure Elastic Agent</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/8.12/docs/static/monitoring/monitoring-ea-dashboards.asciidoc">edit</a></div>
<p>Install and configure Elastic Agent to collect Logstash monitoring data for dashboards.
We&#8217;ll walk you through the process in these steps:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="dashboard-monitoring-with-elastic-agent.html#add-logstash-integration-ead" title="Add the Elastic Agent Logstash integration to monitor host logs and metrics">Add the Elastic Agent Logstash integration to monitor host logs and metrics</a>
</li>
<li class="listitem">
<a class="xref" href="dashboard-monitoring-with-elastic-agent.html#add-agent-to-fleet-ead" title="Install and run an Elastic Agent on your machine">Install and run an Elastic Agent on your machine</a>
</li>
<li class="listitem">
<a class="xref" href="dashboard-monitoring-with-elastic-agent.html#view-assets-ead" title="View assets">View assets</a>
</li>
<li class="listitem">
<a class="xref" href="dashboard-monitoring-with-elastic-agent.html#view-data-dashboard" title="Monitor Logstash logs and metrics">Monitor Logstash logs and metrics</a>
</li>
</ul>
</div>
<p>Check out <a href="/guide/en/fleet/8.12/elastic-agent-installation.html" class="ulink" target="_top">Installing Elastic Agent</a> in the <em>Fleet and Elastic Agent Guide</em> for more info.</p>
<div class="position-relative"><h4><a id="add-logstash-integration-ead"></a>Add the Elastic Agent Logstash integration to monitor host logs and metrics</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/8.12/docs/static/monitoring/monitoring-ea-dashboards.asciidoc">edit</a></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Go to the Kibana home page, and click <span class="strong strong"><strong>Add integrations</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-home.png" alt="Kibana home page">
</div>
</div>
</li>
<li class="listitem">
In the query bar, search for <span class="strong strong"><strong>Logstash</strong></span> and select the integration to see more
details.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Add Logstash</strong></span>.
</li>
<li class="listitem">
Configure the integration name and add a description (optional).
</li>
<li class="listitem">
<p>Configure the integration to collect logs.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make sure that <span class="strong strong"><strong>Logs</strong></span> is turned on if you want to collect logs from your Logstash instance. Be sure that the required settings are correctly configured.
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Logs</strong></span>, modify the log paths to match your Logstash environment.
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Configure the integration to collect metrics.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Make sure that <span class="strong strong"><strong>Metrics (Technical Preview)</strong></span> is turned on, and <span class="strong strong"><strong>Metrics (Stack Monitoring)</strong></span> is turned off.
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Metrics (Technical Preview)</strong></span>, make sure the Logstash URL setting
points to your Logstash instance URLs.<br>
By default, the integration collects Logstash
monitoring metrics from <code class="literal">https://localhost:9600</code>. If that host and port number are not
correct, update the <code class="literal">Logstash URL</code> setting. If you configured Logstash to use encrypted
communications and/or a username and password, you must access it via HTTPS, and expand the <span class="strong strong"><strong>Advanced Settings</strong></span> options, and fill in with the appropriate values for your Logstash instance.
</li>
</ul>
</div>
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save and continue</strong></span>.<br>
This step takes a minute or two to complete. When
it&#8217;s done, you&#8217;ll have an agent policy that contains a system integration policy
for the configuration you just specified.
</li>
<li class="listitem">
<p>In the popup, click <span class="strong strong"><strong>Add Elastic Agent to your hosts</strong></span> to open the <span class="strong strong"><strong>Add agent</strong></span>
flyout.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you accidentally close the popup, go to <span class="strong strong"><strong>Fleet &gt; Agents</strong></span> and click
<span class="strong strong"><strong>Add agent</strong></span>.</p>
</div>
</div>
</li>
</ol>
</div>
<div class="position-relative"><h3><a id="add-agent-to-fleet-ead"></a>Install and run an Elastic Agent on your machine</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/8.12/docs/static/monitoring/monitoring-ea-dashboards.asciidoc">edit</a></div>
<p>The <span class="strong strong"><strong>Add agent</strong></span> flyout has two options: <span class="strong strong"><strong>Enroll in Fleet</strong></span> and
<span class="strong strong"><strong>Run standalone</strong></span>.
Enrolling agents in Fleet (default) provides a centralized management tool in Kibana,
reducing management overhead.</p>
<div class="tabs" data-tab-group="ts">
  <div role="tablist" aria-label="tls">
    <button role="tab"
            aria-selected="true"
            aria-controls="fm-tab-ts"
            id="fm-ts">
      Fleet-managed
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="standalone-tab-ts"
            id="standalone-ts"
            tabindex="-1">
      Run standalone
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="fm-tab-ts"
       aria-labelledby="fm-ts">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>When the <span class="strong strong"><strong>Add Agent flyout</strong></span> appears, stay on the <span class="strong strong"><strong>Enroll in fleet</strong></span> tab</p>
<div class="imageblock screenshot">
<div class="content">
<img src="../monitoring/images/integration-agent-add.png" alt="Add agent flyout in Kibana">
</div>
</div>
</li>
<li class="listitem">
<p>Skip the <span class="strong strong"><strong>Select enrollment token</strong></span> step. The enrollment token you need is
already selected.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The enrollment token is specific to the Elastic Agent policy that you just
created. When you run the command to enroll the agent in Fleet, you will pass
in the enrollment token.</p>
</div>
</div>
</li>
<li class="listitem">
Download, install, and enroll the Elastic Agent on your host by selecting
your host operating system and following the <span class="strong strong"><strong>Install Elastic Agent on your host</strong></span>
step.
</li>
</ol>
</div>
<p>It takes about a minute for Elastic Agent to enroll in Fleet, download the
configuration specified in the policy you just created, and start collecting
data.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="../monitoring/images/integration-agent-confirm.png" alt="Agent confirm data">
</div>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="standalone-tab-ts"
       aria-labelledby="standalone-ts"
       hidden="">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>When the <span class="strong strong"><strong>Add Agent flyout</strong></span> appears, navigate to the <span class="strong strong"><strong>Run standalone</strong></span> tab</p>
<div class="imageblock screenshot">
<div class="content">
<img src="../monitoring/images/integration-agent-add-standalone.png" alt="Add agent flyout in Kibana">
</div>
</div>
</li>
<li class="listitem">
Configure the agent. Follow all the instructions in <span class="strong strong"><strong>Install Elastic Agent on your host</strong></span>
</li>
<li class="listitem">
After unpacking the binary, replace the <code class="literal">elastic-agent.yml</code> file with that supplied in the Add Agent flyout on the "Run standalone" tab, replacing the values of <code class="literal">ES_USERNAME</code> and <code class="literal">ES_PASSWORD</code> appropriately.
</li>
<li class="listitem">
Run <code class="literal">sudo ./elastic-agent install</code>
</li>
</ol>
</div>
  </div>
</div>
<div class="position-relative"><h3><a id="view-assets-ead"></a>View assets</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/8.12/docs/static/monitoring/monitoring-ea-dashboards.asciidoc">edit</a></div>
<p>After you have confirmed enrollment and data is coming in,  click <span class="strong strong"><strong>View assets</strong></span> to access dashboards related to the Logstash integration.</p>
<p>For traditional Stack Monitoring UI, the dashboards marked <span class="strong strong"><strong>[Logs Logstash]</strong></span> are used to visualize the logs
produced by your Logstash instances, with those marked <span class="strong strong"><strong>[Metrics Logstash]</strong></span> for the technical preview metrics
dashboards.
These are populated with data only if you selected the <span class="strong strong"><strong>Metrics (Technical Preview)</strong></span> checkbox.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/integration-assets-dashboards.png" alt="Integration assets">
</div>
</div>
<p>A number of dashboards are included to view Logstash as a whole, and dashboards that allow you to drill-down
into how Logstash is performing on a node, pipeline and plugin basis.</p>
<div class="position-relative"><h3><a id="view-data-dashboard"></a>Monitor Logstash logs and metrics</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/logstash/edit/8.12/docs/static/monitoring/monitoring-ea-dashboards.asciidoc">edit</a></div>
<p>From the list of assets, open the <span class="strong strong"><strong>[Metrics Logstash] Logstash overview</strong></span> dashboard to view overall performance. Then follow the navigation panel to further drill down into Logstash performance.</p>
<p>+</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/integration-dashboard-overview.png" alt="The Logstash Overview dashboard in Kibana with various metrics from your monitored Logstash">
</div>
</div>
<p>You can hover over any visualization to adjust its settings, or click the
<span class="strong strong"><strong>Edit</strong></span> button to make changes to the dashboard. To learn more, refer to
<a href="/guide/en/kibana/8.12/dashboard.html" class="ulink" target="_top">Dashboard and visualizations</a>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="monitoring-with-ea.html">« Monitoring Logstash with Elastic Agent</a>
</span>
<span class="next">
<a href="serverless-monitoring-with-elastic-agent.html">Collect Logstash monitoring data for dashboards (serverless) »</a>
</span>
</div>
</body>
</html>
