<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SNMP Integration Plugin | Logstash Reference [8.13] | Elastic</title>
<meta class="elastic" name="content" content="SNMP Integration Plugin | Logstash Reference [8.13]">

<link rel="home" href="index.html" title="Logstash Reference [8.13]"/>
<link rel="up" href="plugin-integrations.html" title="Integration plugins"/>
<link rel="prev" href="plugins-integrations-rabbitmq.html" title="Rabbitmq Integration Plugin"/>
<link rel="next" href="input-plugins.html" title="Input plugins"/>
<meta class="elastic" name="product_version" content="8.13"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/8.13"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="8.13"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="plugins-integrations-rabbitmq.html">« Rabbitmq Integration Plugin</a>
</span>
<span class="next">
<a href="input-plugins.html">Input plugins »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [8.13]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="plugin-integrations.html">Integration plugins</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>SNMP Integration Plugin</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="plugins-integrations-snmp"></a>SNMP Integration Plugin</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Plugin version: v4.0.0
</li>
<li class="listitem">
Released on: 2024-05-03
</li>
<li class="listitem">
<a href="https://github.com/logstash-plugins/logstash-integration-snmp/blob/main/CHANGELOG.md" class="ulink" target="_top">Changelog</a>
</li>
</ul>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<div class="sidebar">
<div class="titlepage"><div><div>
<p class="title"><strong>Technical Preview</strong></p>
</div></div></div>
<p>The new <code class="literal">integration-snmp</code> plugin, and its component plugins--<code class="literal">input-snmp</code> and <code class="literal">input-snmptrap</code>--are available in <em>Technical Preview</em> and can be installed on the latest Logstash 7.x and 8.x versions.</p>
<p>Current 1.x versions of the <code class="literal">input-snmp</code> plugin are bundled with Logstash by default, and will soon be replaced by the snmp input plugin contained in this integration.
(If you want to opt into the Technical Preview for the <code class="literal">integration-snmp</code> plugin, run <code class="literal">bin/logstash-plugin install logstash-integration-snmp</code>.)</p>
<p>Be aware of behavioral and mapping differences between current stand-alone plugins and the new versions included in the <code class="literal">integration-snmp</code>.
The information in this topic can help.</p>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="_description_7"></a>Description</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<p>The SNMP integration plugin includes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
SNMP input plugin
</li>
<li class="listitem">
SNMPtrap input plugin
</li>
</ul>
</div>
<p>The new <code class="literal">logstash-integration-snmp</code> plugin combines the
<code class="literal">logstash-input-snmp</code> and <code class="literal">logstash-input-snmptrap</code> plugins into a single Ruby gem.
This integrated plugin package provides better alignment in SNMP processing behavior, improved resource management, easier package maintenance, and a smaller installation footprint.
The individual plugins now share the same code base and have been refactored to leverage the latest version of <a href="https://www.snmp4j.org/" class="ulink" target="_top">SNMP4j</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="plugins-integrations-snmp-migration"></a>Migrating to <code class="literal">logstash-integration-snmp</code> from individual plugins</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<p>You&#8217;ll retain the functionality of existing stand-alone plugins, but with a more consistent experience and expanded features.
In this section, we&#8217;ll note mapping and behavioral changes, and explain how to preserve current behavior if needed.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="plugins-integrations-snmp-migration-input-snmp"></a>Migration notes: <code class="literal">logstash-input-snmp</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<p>As a component of the new <code class="literal">logstash-integration-snmp</code> plugin, the <code class="literal">logstash-input-snmp</code> plugin offers the same
capabilities as the stand-alone <a href="https://github.com/logstash-plugins/logstash-input-snmp" class="ulink" target="_top">logstash-input-snmp</a>.</p>
<p>Given the underlying code refactor to better align snmp and snmptrap plugin behavior, you might need to address some changes depending on your use case and how the ingested data is being handled through the pipeline.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h5 class="title"><a id="plugins-integrations-snmp-input-snmp-mapping"></a>Changes to mapping and error logging: <code class="literal">logstash-input-snmp</code></h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>No such instance errors</strong></span> are mapped as <code class="literal">error: no such instance currently exists at this OID string</code> instead of <code class="literal">noSuchInstance</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong>No such object errors</strong></span> are mapped as <code class="literal">error: no such object currently exists at this OID string</code> instead of <code class="literal">noSuchObject</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong>End of MIB view errors</strong></span> are mapped as <code class="literal">error: end of MIB view</code> instead of <code class="literal">endOfMibView</code>.
</li>
<li class="listitem">
An <span class="strong strong"><strong>unknown variable type</strong></span> falls back to the <code class="literal">string</code> representation instead of logging an error as it did in with the stand-alone <code class="literal">logstash-input-snmp</code>.
This change should not affect existing pipelines, unless they have custom error handlers that rely on specific error messages.
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="plugins-integrations-snmp-migration-input-snmptrap"></a>Migration notes: <code class="literal">logstash-input-snmptrap</code></h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<p>As a component of the new <code class="literal">logstash-integration-snmp</code> plugin, the <code class="literal">logstash-input-snmptrap</code> plugin offers <em>almost the same
capabilities</em> as the stand-alone <a href="https://github.com/logstash-plugins/logstash-input-snmp" class="ulink" target="_top">logstash-input-snmp</a> plugin.</p>
<p>You might need to address some behavior changes depending on your use case and how the ingested data is being handled through the pipeline.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h5 class="title"><a id="plugins-integrations-snmp-input-snmptrap-mapping"></a>Changes to mapping and error logging: <code class="literal">logstash-input-snmptrap</code></h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <span class="strong strong"><strong>PDU variable bindings</strong></span> are mapped into the Logstash event using the defined data type.
By default, the stand-alone <code class="literal">logstash-input-snmptrap</code> plugin converts all of the data to <code class="literal">string</code>, ignoring the original type.
If this behavior is not what you want, you can use a filter to retain the original type.
</li>
<li class="listitem">
<span class="strong strong"><strong>SNMP <code class="literal">TimeTicks</code> variables</strong></span> are mapped as <code class="literal">Long</code> timestamps instead of formatted date string (<code class="literal">%d days, %02d:%02d:%02d.%02d</code>).
</li>
<li class="listitem">
<span class="strong strong"><strong><code class="literal">null</code> variables values</strong></span> are mapped using the string <code class="literal">null</code> instead of <code class="literal">Null</code> (upper-case N).
</li>
<li class="listitem">
<span class="strong strong"><strong>No such instance errors</strong></span> are mapped as <code class="literal">error: no such instance currently exists at this OID string</code> instead of <code class="literal">noSuchInstance</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong>No such object errors</strong></span> are mapped as <code class="literal">error: no such object currently exists at this OID string</code> instead of <code class="literal">noSuchObject</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong>End of MIB view errors</strong></span> are mapped as <code class="literal">error: end of MIB view</code> instead of <code class="literal">endOfMibView</code>.
</li>
<li class="listitem">
<p>The previous generation (stand-alone) input-snmptrap plugin formatted the <span class="strong strong"><strong><code class="literal">message</code> field</strong></span> as
a ruby-snmp <code class="literal">SNMP::SNMPv1_Trap</code> object representation.</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">&lt;SNMP::SNMPv1_Trap:0x6f1a7a4 @varbind_list=[#&lt;SNMP::VarBind:0x2d7bcd8f @value="teststring", @name=[1.11.12.13.14.15]&gt;], @timestamp=#&lt;SNMP::TimeTicks:0x1af47e9d @value=55&gt;, @generic_trap=6,  @enterprise=[1.2.3.4.5.6], @source_ip="127.0.0.1", @agent_addr=#&lt;SNMP::IpAddress:0x29a4833e @value="test"&gt;, @specific_trap=99&gt;</pre>
</div>
<p>The new integrated <code class="literal">input-snmptrap</code> plugin uses JSON to format <span class="strong strong"><strong><code class="literal">message</code> field</strong></span>.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{"error_index":0, "variable_bindings":{"1.3.6.1.6.3.1.1.4.1.0":"SNMPv2-MIB::coldStart", "1.3.6.1.2.1.1.3.0":0}, "error_status":0, "type":"TRAP", "error_status_text":"Success", "community":"public", "version":"2c", "request_id":1436216872}</pre>
</div>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h5 class="title"><a id="plugins-integrations-snmp-input-snmptrap-compat"></a>Maintain maximum compatibility with previous implementation</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-integration-snmp/edit/main/docs/index.asciidoc">edit</a></div>
</div></div></div>
<p>If needed, you can configure the new <code class="literal">logstash-integration-snmp</code> plugin to maintain maximum compatibility with the previous (stand-alone)
version of the <a href="https://github.com/logstash-plugins/logstash-input-snmp" class="ulink" target="_top">input-snmp</a> plugin.</p>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">input {
   snmptrap {
    use_provided_mibs =&gt; false
    oid_mapping_format =&gt; 'ruby_snmp'
    oid_map_field_values =&gt; true
   }
}</pre>
</div>
</div>

</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="plugins-integrations-rabbitmq.html">« Rabbitmq Integration Plugin</a>
</span>
<span class="next">
<a href="input-plugins.html">Input plugins »</a>
</span>
</div>
</body>
</html>
