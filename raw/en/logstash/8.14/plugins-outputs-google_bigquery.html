<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Google BigQuery output plugin | Logstash Reference [8.14] | Elastic</title>
<meta class="elastic" name="content" content="Google BigQuery output plugin | Logstash Reference [8.14]">

<link rel="home" href="index.html" title="Logstash Reference [8.14]"/>
<link rel="up" href="output-plugins.html" title="Output plugins"/>
<link rel="prev" href="plugins-outputs-gelf.html" title="Gelf output plugin"/>
<link rel="next" href="plugins-outputs-google_cloud_storage.html" title="Google Cloud Storage output plugin"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/8.14"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="plugins-outputs-gelf.html">« Gelf output plugin</a>
</span>
<span class="next">
<a href="plugins-outputs-google_cloud_storage.html">Google Cloud Storage output plugin »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [8.14]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="output-plugins.html">Output plugins</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Google BigQuery output plugin</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="plugins-outputs-google_bigquery"></a>Google BigQuery output plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h2>
</div></div></div>

<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Plugin version: v4.5.0
</li>
<li class="listitem">
Released on: 2024-01-24
</li>
<li class="listitem">
<a href="https://github.com/logstash-plugins/logstash-output-google_bigquery/blob/v4.5.0/CHANGELOG.md" class="ulink" target="_top">Changelog</a>
</li>
</ul>
</div>
<p>For other versions, see the
<a href="/guide/en/logstash-versioned-plugins/current/output-google_bigquery-index.html" class="ulink" target="_top">Versioned plugin docs</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_installation_29"></a>Installation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>For plugins not bundled by default, it is easy to install by running <code class="literal">bin/logstash-plugin install logstash-output-google_bigquery</code>. See <a href="/guide/en/logstash/8.14/working-with-plugins.html" class="ulink" target="_top">Working with plugins</a> for more details.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_getting_help_79"></a>Getting Help<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>For questions about the plugin, open a topic in the <a href="http://discuss.elastic.co" class="ulink" target="_top">Discuss</a> forums. For bugs or feature requests, open an issue in <a href="https://github.com/logstash-plugins/logstash-output-google_bigquery" class="ulink" target="_top">Github</a>.
For the list of Elastic supported plugins, please consult the <a href="/support/matrix#logstash_plugins" class="ulink" target="_top">Elastic Support Matrix</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_description_79"></a>Description<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_summary_2"></a>Summary<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<p>This Logstash plugin uploads events to Google BigQuery using the streaming API
so data can become available to query nearly immediately.</p>
<p>You can configure it to flush periodically, after N events or after
a certain amount of data is ingested.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_environment_configuration"></a>Environment Configuration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<p>You must enable BigQuery on your Google Cloud account and create a dataset to
hold the tables this plugin generates.</p>
<p>You must also grant the service account this plugin uses access to the dataset.</p>
<p>You can use <a href="/guide/en/logstash/8.14/event-dependent-configuration.html" class="ulink" target="_top">Logstash conditionals</a>
and multiple configuration blocks to upload events with different structures.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_usage_2"></a>Usage<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<p>This is an example of Logstash config:</p>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">output {
   google_bigquery {
     project_id =&gt; "folkloric-guru-278"                        (required)
     dataset =&gt; "logs"                                         (required)
     csv_schema =&gt; "path:STRING,status:INTEGER,score:FLOAT"    (required) <a id="CO49-1"></a><i class="conum" data-value="1"></i>
     json_key_file =&gt; "/path/to/key.json"                      (optional) <a id="CO49-2"></a><i class="conum" data-value="2"></i>
     error_directory =&gt; "/tmp/bigquery-errors"                 (required)
     date_pattern =&gt; "%Y-%m-%dT%H:00"                          (optional)
     flush_interval_secs =&gt; 30                                 (optional)
   }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO49-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify either a csv_schema or a json_schema.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO49-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If the key is not used, then the plugin tries to find
<a href="https://cloud.google.com/docs/authentication/production" class="ulink" target="_top">Application Default Credentials</a></p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_considerations"></a>Considerations<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
There is a small fee to insert data into BigQuery using the streaming API.
</li>
<li class="listitem">
This plugin buffers events in-memory, so make sure the flush configurations are appropriate
for your use-case and consider using
<a href="/guide/en/logstash/8.14/persistent-queues.html" class="ulink" target="_top">Logstash Persistent Queues</a>.
</li>
<li class="listitem">
Events will be flushed when <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-batch_size" title="batch_size"><code class="literal">batch_size</code></a>, <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-batch_size_bytes" title="batch_size_bytes"><code class="literal">batch_size_bytes</code></a>, or <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-flush_interval_secs" title="flush_interval_secs"><code class="literal">flush_interval_secs</code></a> is met, whatever comes first.
If you notice a delay in your processing or low throughput, try adjusting those settings.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_additional_resources"></a>Additional Resources<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://cloud.google.com/docs/authentication/production" class="ulink" target="_top">Application Default Credentials (ADC) Overview</a>
</li>
<li class="listitem">
<a href="https://cloud.google.com/bigquery/" class="ulink" target="_top">BigQuery Introduction</a>
</li>
<li class="listitem">
<a href="https://cloud.google.com/bigquery/quotas" class="ulink" target="_top">BigQuery Quotas and Limits</a>
</li>
<li class="listitem">
<a href="https://cloud.google.com/bigquery/docs/schemas" class="ulink" target="_top">BigQuery Schema Formats and Types</a>
</li>
</ul>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="plugins-outputs-google_bigquery-options"></a>Google BigQuery Output Configuration Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>This plugin supports the following configuration options plus the <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-common-options" title="Common Options">Common Options</a> described later.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-batch_size" title="batch_size"><code class="literal">batch_size</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-batch_size_bytes" title="batch_size_bytes"><code class="literal">batch_size_bytes</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-csv_schema" title="csv_schema"><code class="literal">csv_schema</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-dataset" title="dataset"><code class="literal">dataset</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-date_pattern" title="date_pattern"><code class="literal">date_pattern</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-deleter_interval_secs" title="deleter_interval_secs"><code class="literal">deleter_interval_secs</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p><em>Deprecated</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-error_directory" title="error_directory"><code class="literal">error_directory</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-flush_interval_secs" title="flush_interval_secs"><code class="literal">flush_interval_secs</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-ignore_unknown_values" title="ignore_unknown_values"><code class="literal">ignore_unknown_values</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-json_key_file" title="json_key_file"><code class="literal">json_key_file</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-json_schema" title="json_schema"><code class="literal">json_schema</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#hash" title="Hash">hash</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-key_password" title="key_password"><code class="literal">key_password</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p><em>Deprecated</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-key_path" title="key_path"><code class="literal">key_path</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Obsolete</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-project_id" title="project_id"><code class="literal">project_id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-service_account" title="service_account"><code class="literal">service_account</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p><em>Deprecated</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-skip_invalid_rows" title="skip_invalid_rows"><code class="literal">skip_invalid_rows</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-table_prefix" title="table_prefix"><code class="literal">table_prefix</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-table_separator" title="table_separator"><code class="literal">table_separator</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-temp_directory" title="temp_directory"><code class="literal">temp_directory</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p><em>Deprecated</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-temp_file_prefix" title="temp_file_prefix"><code class="literal">temp_file_prefix</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p><em>Deprecated</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-uploader_interval_secs" title="uploader_interval_secs"><code class="literal">uploader_interval_secs</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p><em>Deprecated</em></p></td>
</tr>
</tbody>
</table>
</div>
<p>Also see <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-common-options" title="Common Options">Common Options</a> for a list of options supported by all
output plugins.</p>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-batch_size"></a><code class="literal">batch_size</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Added in 4.0.0.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">128</code>
</li>
</ul>
</div>
<p>The maximum number of messages to upload at a single time.
This number must be &lt; 10,000.
Batching can increase performance and throughput to a point, but at the cost of per-request latency.
Too few rows per request and the overhead of each request can make ingestion inefficient.
Too many rows per request and the throughput may drop.
BigQuery recommends using about 500 rows per request, but experimentation with representative data (schema and data sizes) will help you determine the ideal batch size.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-batch_size_bytes"></a><code class="literal">batch_size_bytes</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Added in 4.0.0.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">1_000_000</code>
</li>
</ul>
</div>
<p>An approximate number of bytes to upload as part of a batch.
This number should be &lt; 10MB or inserts may fail.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-csv_schema"></a><code class="literal">csv_schema</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">nil</code>
</li>
</ul>
</div>
<p>Schema for log data. It must follow the format <code class="literal">name1:type1(,name2:type2)*</code>.
For example, <code class="literal">path:STRING,status:INTEGER,score:FLOAT</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-dataset"></a><code class="literal">dataset</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The BigQuery dataset the tables for the events will be added to.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-date_pattern"></a><code class="literal">date_pattern</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"%Y-%m-%dT%H:00"</code>
</li>
</ul>
</div>
<p>Time pattern for BigQuery table, defaults to hourly tables.
Must Time.strftime patterns: www.ruby-doc.org/core-2.0/Time.html#method-i-strftime</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-deleter_interval_secs"></a><code class="literal">deleter_interval_secs</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 4.0.0.</h3>
<p>Events are uploaded in real-time without being stored to disk.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-error_directory"></a><code class="literal">error_directory</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Added in 4.0.0.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"/tmp/bigquery"</code>.
</li>
</ul>
</div>
<p>The location to store events that could not be uploaded due to errors.
By default if <em>any</em> message in an insert is invalid all will fail.
You can use <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-skip_invalid_rows" title="skip_invalid_rows"><code class="literal">skip_invalid_rows</code></a> to allow partial inserts.</p>
<p>Consider using an additional Logstash input to pipe the contents of
these to an alert platform so you can manually fix the events.</p>
<p>Or use <a href="https://cloud.google.com/storage/docs/gcs-fuse" class="ulink" target="_top">GCS FUSE</a> to
transparently upload to a GCS bucket.</p>
<p>Files names follow the pattern <code class="literal">[table name]-[UNIX timestamp].log</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-flush_interval_secs"></a><code class="literal">flush_interval_secs</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">5</code>
</li>
</ul>
</div>
<p>Uploads all data this often even if other upload criteria aren&#8217;t met.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-ignore_unknown_values"></a><code class="literal">ignore_unknown_values</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">false</code>
</li>
</ul>
</div>
<p>Indicates if BigQuery should ignore values that are not represented in the table schema.
If true, the extra values are discarded.
If false, BigQuery will reject the records with extra fields and the job will fail.
The default value is false.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You may want to add a Logstash filter like the following to remove common fields it adds:</p>
</div>
</div>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">mutate {
    remove_field =&gt; ["@version","@timestamp","path","host","type", "message"]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-json_key_file"></a><code class="literal">json_key_file</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Added in 4.0.0.</h3>
<p>Replaces <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-key_password" title="key_password"><code class="literal">key_password</code></a>, <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-key_path" title="key_path"><code class="literal">key_path</code></a> and <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-service_account" title="service_account"><code class="literal">service_account</code></a>.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">nil</code>
</li>
</ul>
</div>
<p>If Logstash is running within Google Compute Engine, the plugin can use
GCE&#8217;s Application Default Credentials. Outside of GCE, you will need to
specify a Service Account JSON key file.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-json_schema"></a><code class="literal">json_schema</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#hash" title="Hash">hash</a>
</li>
<li class="listitem">
Default value is <code class="literal">nil</code>
</li>
</ul>
</div>
<p>Schema for log data as a hash.
These can include nested records, descriptions, and modes.</p>
<p>Example:</p>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">json_schema =&gt; {
  fields =&gt; [{
    name =&gt; "endpoint"
    type =&gt; "STRING"
    description =&gt; "Request route"
  }, {
    name =&gt; "status"
    type =&gt; "INTEGER"
    mode =&gt; "NULLABLE"
  }, {
    name =&gt; "params"
    type =&gt; "RECORD"
    mode =&gt; "REPEATED"
    fields =&gt; [{
      name =&gt; "key"
      type =&gt; "STRING"
     }, {
      name =&gt; "value"
      type =&gt; "STRING"
    }]
  }]
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-key_password"></a><code class="literal">key_password</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 4.0.0.</h3>
<p>Replaced by <code class="literal">json_key_file</code> or by using ADC. See <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-json_key_file" title="json_key_file"><code class="literal">json_key_file</code></a></p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-key_path"></a><code class="literal">key_path</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Obsolete:</strong></span> The PKCS12 key file format is no longer supported.</p>
<p>Please use one of the following mechanisms:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://cloud.google.com/docs/authentication/production" class="ulink" target="_top">Application Default Credentials (ADC)</a>,
configured via environment variables on Compute Engine, Kubernetes Engine, App Engine, or
Cloud Functions.
</li>
<li class="listitem">
A JSON authentication key file. You can generate them in the console for the service account
like you did with the <code class="literal">.P12</code> file or with the following command:
<code class="literal">gcloud iam service-accounts keys create key.json --iam-account my-sa-123@my-project-123.iam.gserviceaccount.com</code>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-project_id"></a><code class="literal">project_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Google Cloud Project ID (number, not Project Name!).</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-service_account"></a><code class="literal">service_account</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 4.0.0.</h3>
<p>Replaced by <code class="literal">json_key_file</code> or by using ADC. See <a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-json_key_file" title="json_key_file"><code class="literal">json_key_file</code></a></p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-skip_invalid_rows"></a><code class="literal">skip_invalid_rows</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Added in 4.1.0.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">false</code>
</li>
</ul>
</div>
<p>Insert all valid rows of a request, even if invalid rows exist.
The default value is false, which causes the entire request to fail if any invalid rows exist.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-table_prefix"></a><code class="literal">table_prefix</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"logstash"</code>
</li>
</ul>
</div>
<p>BigQuery table ID prefix to be used when creating new tables for log data.
Table name will be <code class="literal">&lt;table_prefix&gt;&lt;table_separator&gt;&lt;date&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-table_separator"></a><code class="literal">table_separator</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"_"</code>
</li>
</ul>
</div>
<p>BigQuery table separator to be added between the table_prefix and the
date suffix.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-temp_directory"></a><code class="literal">temp_directory</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 4.0.0.</h3>
<p>Events are uploaded in real-time without being stored to disk.</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-temp_file_prefix"></a><code class="literal">temp_file_prefix</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 4.0.0.</h3>
<p>Events are uploaded in real-time without being stored to disk</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-uploader_interval_secs"></a><code class="literal">uploader_interval_secs</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<h3>Deprecated in 4.0.0.</h3>
<p>This field is no longer used</p>
</div>
</div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">60</code>
</li>
</ul>
</div>
<p>Uploader interval when uploading new files to BigQuery. Adjust time based
on your time pattern (for example, for hourly files, this interval can be
around one hour).</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="plugins-outputs-google_bigquery-common-options"></a>Common Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>The following configuration options are supported by all output plugins:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-codec" title="codec"><code class="literal">codec</code></a></p></td>
<td align="left" valign="top"><p><a href="/guide/en/logstash/8.14/configuration-file-structure.html#codec" class="ulink" target="_top">codec</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-enable_metric" title="enable_metric"><code class="literal">enable_metric</code></a></p></td>
<td align="left" valign="top"><p><a href="/guide/en/logstash/8.14/configuration-file-structure.html#boolean" class="ulink" target="_top">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-google_bigquery.html#plugins-outputs-google_bigquery-id" title="id"><code class="literal">id</code></a></p></td>
<td align="left" valign="top"><p><a href="/guide/en/logstash/8.14/configuration-file-structure.html#string" class="ulink" target="_top">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-codec"></a><code class="literal">codec</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a href="/guide/en/logstash/8.14/configuration-file-structure.html#codec" class="ulink" target="_top">codec</a>
</li>
<li class="listitem">
Default value is <code class="literal">"plain"</code>
</li>
</ul>
</div>
<p>The codec used for output data. Output codecs are a convenient method for encoding your data before it leaves the output without needing a separate filter in your Logstash pipeline.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-enable_metric"></a><code class="literal">enable_metric</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a href="/guide/en/logstash/8.14/configuration-file-structure.html#boolean" class="ulink" target="_top">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">true</code>
</li>
</ul>
</div>
<p>Disable or enable metric logging for this specific plugin instance.
By default we record all the metrics we can, but you can disable metrics collection
for a specific plugin.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-google_bigquery-id"></a><code class="literal">id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-google_bigquery/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a href="/guide/en/logstash/8.14/configuration-file-structure.html#string" class="ulink" target="_top">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Add a unique <code class="literal">ID</code> to the plugin configuration. If no ID is specified, Logstash will generate one.
It is strongly recommended to set this ID in your configuration. This is particularly useful
when you have two or more plugins of the same type. For example, if you have 2 google_bigquery outputs.
Adding a named ID in this case will help in monitoring Logstash when using the monitoring APIs.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">output {
  google_bigquery {
    id =&gt; "my_plugin_id"
  }
}</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Variable substitution in the <code class="literal">id</code> field only supports environment variables
      and does not support the use of values from the secret store.</p>
</div>
</div>
</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="plugins-outputs-gelf.html">« Gelf output plugin</a>
</span>
<span class="next">
<a href="plugins-outputs-google_cloud_storage.html">Google Cloud Storage output plugin »</a>
</span>
</div>
</body>
</html>
