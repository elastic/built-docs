<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>S3 output plugin | Logstash Reference [8.14] | Elastic</title>
<meta class="elastic" name="content" content="S3 output plugin | Logstash Reference [8.14]">

<link rel="home" href="index.html" title="Logstash Reference [8.14]"/>
<link rel="up" href="output-plugins.html" title="Output plugins"/>
<link rel="prev" href="plugins-outputs-riemann.html" title="Riemann output plugin"/>
<link rel="next" href="plugins-outputs-sink.html" title="Sink output plugin"/>
<meta class="elastic" name="product_version" content="8.14"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/8.14"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="8.14"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="plugins-outputs-riemann.html">« Riemann output plugin</a>
</span>
<span class="next">
<a href="plugins-outputs-sink.html">Sink output plugin »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [8.14]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="output-plugins.html">Output plugins</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>S3 output plugin</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="plugins-outputs-s3"></a>S3 output plugin<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h2>
</div></div></div>

<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
A component of the <a class="xref" href="plugins-integrations-aws.html" title="AWS Integration Plugin">aws integration plugin</a>
</li>
<li class="listitem">
Integration version: v7.1.7
</li>
<li class="listitem">
Released on: 2024-07-02
</li>
<li class="listitem">
<a href="https://github.com/logstash-plugins/logstash-integration-aws/blob/v7.1.7/CHANGELOG.md" class="ulink" target="_top">Changelog</a>
</li>
</ul>
</div>
<p>For other versions, see the
<a href="/guide/en/logstash-versioned-plugins/current/output-s3-index.html" class="ulink" target="_top">Versioned plugin docs</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_getting_help_106"></a>Getting Help<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>For questions about the plugin, open a topic in the <a href="http://discuss.elastic.co" class="ulink" target="_top">Discuss</a> forums.
For bugs or feature requests, open an issue in <a href="https://github.com/logstash-plugins/logstash-integration-aws" class="ulink" target="_top">Github</a>.
For the list of Elastic supported plugins, please consult the <a href="/support/matrix#logstash_plugins" class="ulink" target="_top">Elastic Support Matrix</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_description_106"></a>Description<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>This plugin batches and uploads logstash events into Amazon Simple Storage
Service (Amazon S3).</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The S3 output plugin only supports AWS S3.
Other S3 compatible storage solutions are not supported.</p>
</div>
</div>
<p>S3 outputs create temporary files into the OS' temporary directory.
You can specify where to save them using the <code class="literal">temporary_directory</code> option.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>For configurations containing multiple s3 outputs with the restore
option enabled, each output should define its own <em>temporary_directory</em>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_requirements"></a>Requirements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Amazon S3 Bucket and S3 Access Permissions (Typically access_key_id and secret_access_key)
</li>
<li class="listitem">
S3 PutObject permission
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_s3_output_file"></a>S3 output file<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-txt">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-txt">`ls.s3.312bc026-2f5d-49bc-ae9f-5940cf4ad9a6.2013-04-18T10.00.tag_hello.part0.txt`</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p>ls.s3</p></td>
<td align="left" valign="top"><p>indicates logstash plugin s3</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>312bc026-2f5d-49bc-ae9f-5940cf4ad9a6</p></td>
<td align="left" valign="top"><p>a new, random uuid per file.</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>2013-04-18T10.00</p></td>
<td align="left" valign="top"><p>represents the time whenever you specify time_file.</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>tag_hello</p></td>
<td align="left" valign="top"><p>indicates the event&#8217;s tag.</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
<tr>
<td align="left" valign="top"><p>part0</p></td>
<td align="left" valign="top"><p>If you indicate size_file, it will generate more parts if your file.size &gt; size_file.
When a file is full, it gets pushed to the bucket and then deleted from the temporary directory.
If a file is empty, it is simply deleted.  Empty files will not be pushed.</p></td>
<td align="left" valign="top"><p></p></td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_crash_recovery"></a>Crash Recovery<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<p>This plugin will recover and upload temporary log files after crash/abnormal termination when using <code class="literal">restore</code> set to true</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_usage_4"></a>Usage<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<p>This is an example of logstash config:</p>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">output {
   s3{
     access_key_id =&gt; "crazy_key"             (optional)
     secret_access_key =&gt; "monkey_access_key" (optional)
     region =&gt; "eu-west-1"                    (optional, default = "us-east-1")
     bucket =&gt; "your_bucket"                  (required)
     size_file =&gt; 2048                        (optional) - Bytes
     time_file =&gt; 5                           (optional) - Minutes
     codec =&gt; "plain"                         (optional)
     canned_acl =&gt; "private"                  (optional. Options are "private", "public-read", "public-read-write", "authenticated-read", "aws-exec-read", "bucket-owner-read", "bucket-owner-full-control", "log-delivery-write". Defaults to "private" )
   }</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="plugins-outputs-s3-options"></a>S3 Output Configuration Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>This plugin supports the following configuration options plus the <a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-common-options" title="Common Options">Common Options</a> described later.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-access_key_id" title="access_key_id"><code class="literal">access_key_id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-additional_settings" title="additional_settings"><code class="literal">additional_settings</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#hash" title="Hash">hash</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-aws_credentials_file" title="aws_credentials_file"><code class="literal">aws_credentials_file</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-bucket" title="bucket"><code class="literal">bucket</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-canned_acl" title="canned_acl"><code class="literal">canned_acl</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["private", "public-read", "public-read-write", "authenticated-read", "aws-exec-read", "bucket-owner-read", "bucket-owner-full-control", "log-delivery-write"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-encoding" title="encoding"><code class="literal">encoding</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["none", "gzip"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-endpoint" title="endpoint"><code class="literal">endpoint</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-prefix" title="prefix"><code class="literal">prefix</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-proxy_uri" title="proxy_uri"><code class="literal">proxy_uri</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-region" title="region"><code class="literal">region</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-restore" title="restore"><code class="literal">restore</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-retry_count" title="retry_count"><code class="literal">retry_count</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-retry_delay" title="retry_delay"><code class="literal">retry_delay</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-role_arn" title="role_arn"><code class="literal">role_arn</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-role_session_name" title="role_session_name"><code class="literal">role_session_name</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-rotation_strategy" title="rotation_strategy"><code class="literal">rotation_strategy</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["size_and_time", "size", "time"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-secret_access_key" title="secret_access_key"><code class="literal">secret_access_key</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-server_side_encryption" title="server_side_encryption"><code class="literal">server_side_encryption</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-server_side_encryption_algorithm" title="server_side_encryption_algorithm"><code class="literal">server_side_encryption_algorithm</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["AES256", "aws:kms"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-session_token" title="session_token"><code class="literal">session_token</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-signature_version" title="signature_version"><code class="literal">signature_version</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["v2", "v4"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-size_file" title="size_file"><code class="literal">size_file</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-ssekms_key_id" title="ssekms_key_id"><code class="literal">ssekms_key_id</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-storage_class" title="storage_class"><code class="literal">storage_class</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a>, one of <code class="literal">["STANDARD", "REDUCED_REDUNDANCY", "STANDARD_IA", "ONEZONE_IA"]</code></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-temporary_directory" title="temporary_directory"><code class="literal">temporary_directory</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#string" title="String">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-time_file" title="time_file"><code class="literal">time_file</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-upload_multipart_threshold" title="upload_multipart_threshold"><code class="literal">upload_multipart_threshold</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-upload_queue_size" title="upload_queue_size"><code class="literal">upload_queue_size</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-upload_workers_count" title="upload_workers_count"><code class="literal">upload_workers_count</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#number" title="Number">number</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-use_aws_bundled_ca" title="use_aws_bundled_ca"><code class="literal">use_aws_bundled_ca</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-validate_credentials_on_root_bucket" title="validate_credentials_on_root_bucket"><code class="literal">validate_credentials_on_root_bucket</code></a></p></td>
<td align="left" valign="top"><p><a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<p>Also see <a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-common-options" title="Common Options">Common Options</a> for a list of options supported by all
output plugins.</p>
<p>&nbsp;</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-access_key_id"></a><code class="literal">access_key_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>This plugin uses the AWS SDK and supports several ways to get credentials, which will be tried in this order:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Static configuration, using <code class="literal">access_key_id</code> and <code class="literal">secret_access_key</code> params in logstash plugin config
</li>
<li class="listitem">
External credentials file specified by <code class="literal">aws_credentials_file</code>
</li>
<li class="listitem">
Environment variables <code class="literal">AWS_ACCESS_KEY_ID</code> and <code class="literal">AWS_SECRET_ACCESS_KEY</code>
</li>
<li class="listitem">
Environment variables <code class="literal">AMAZON_ACCESS_KEY_ID</code> and <code class="literal">AMAZON_SECRET_ACCESS_KEY</code>
</li>
<li class="listitem">
IAM Instance Profile (available when running inside EC2)
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-additional_settings"></a><code class="literal">additional_settings</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#hash" title="Hash">hash</a>
</li>
<li class="listitem">
Default value is <code class="literal">{}</code>
</li>
</ul>
</div>
<p>Key-value pairs of settings and corresponding values used to parametrize
the connection to S3. See full list in <a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html" class="ulink" target="_top">the AWS SDK documentation</a>. Example:</p>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">    output {
      s3 {
        access_key_id =&gt; "1234",
        secret_access_key =&gt; "secret",
        region =&gt; "eu-west-1",
        bucket =&gt; "logstash-test",
        additional_settings =&gt; {
          "force_path_style" =&gt; true,
          "follow_redirects" =&gt; false
        }
      }
    }</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-aws_credentials_file"></a><code class="literal">aws_credentials_file</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Path to YAML file containing a hash of AWS credentials.
This file will only be loaded if <code class="literal">access_key_id</code> and
<code class="literal">secret_access_key</code> aren&#8217;t set. The contents of the
file should look like this:</p>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">    :access_key_id: "12345"
    :secret_access_key: "54321"</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-bucket"></a><code class="literal">bucket</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This is a required setting.
</li>
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>S3 bucket</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-canned_acl"></a><code class="literal">canned_acl</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">private</code>, <code class="literal">public-read</code>, <code class="literal">public-read-write</code>, <code class="literal">authenticated-read</code>, <code class="literal">aws-exec-read</code>, <code class="literal">bucket-owner-read</code>, <code class="literal">bucket-owner-full-control</code>, <code class="literal">log-delivery-write</code>
</li>
<li class="listitem">
Default value is <code class="literal">"private"</code>
</li>
</ul>
</div>
<p>The S3 canned ACL to use when putting the file. Defaults to "private".</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-encoding"></a><code class="literal">encoding</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">none</code>, <code class="literal">gzip</code>
</li>
<li class="listitem">
Default value is <code class="literal">"none"</code>
</li>
</ul>
</div>
<p>Specify the content encoding. Supports ("gzip"). Defaults to "none"</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-endpoint"></a><code class="literal">endpoint</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The endpoint to connect to. By default it is constructed using the value of <code class="literal">region</code>.
This is useful when connecting to S3 compatible services, but beware that these aren&#8217;t
guaranteed to work correctly with the AWS SDK.
The endpoint should be an HTTP or HTTPS URL, e.g. <a href="https://example.com" class="ulink" target="_top">https://example.com</a></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-prefix"></a><code class="literal">prefix</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">""</code>
</li>
</ul>
</div>
<p>Specify a prefix to the uploaded filename to simulate directories on S3.
Prefix does not require leading slash.
This option supports
<a href="/guide/en/logstash/8.14/event-dependent-configuration.html#sprintf" class="ulink" target="_top">Logstash
interpolation</a>. For example, files can be prefixed with the event date using
<code class="literal">prefix = "%{+YYYY}/%{+MM}/%{+dd}"</code>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Take care when you are using interpolated strings in prefixes. This
has the potential to create large numbers of unique prefixes, causing large
numbers of in-progress uploads. This scenario may result in performance and
stability issues, which can be further exacerbated when you use a
rotation_strategy that delays uploads.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-proxy_uri"></a><code class="literal">proxy_uri</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>URI to proxy server if required</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-region"></a><code class="literal">region</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"us-east-1"</code>
</li>
</ul>
</div>
<p>The AWS Region</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-restore"></a><code class="literal">restore</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">true</code>
</li>
</ul>
</div>
<p>Used to enable recovery after crash/abnormal termination.
Temporary log files will be recovered and uploaded.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-retry_count"></a><code class="literal">retry_count</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">Infinity</code>
</li>
</ul>
</div>
<p>Allows to limit number of retries when S3 uploading fails.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-retry_delay"></a><code class="literal">retry_delay</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">1</code>
</li>
</ul>
</div>
<p>Delay (in seconds) to wait between consecutive retries on upload failures.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-role_arn"></a><code class="literal">role_arn</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The AWS IAM Role to assume, if any.
This is used to generate temporary credentials, typically for cross-account access.
See the <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html" class="ulink" target="_top">AssumeRole API documentation</a> for more information.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-role_session_name"></a><code class="literal">role_session_name</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"logstash"</code>
</li>
</ul>
</div>
<p>Session name to use when assuming an IAM role.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-rotation_strategy"></a><code class="literal">rotation_strategy</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">size_and_time</code>, <code class="literal">size</code>, <code class="literal">time</code>
</li>
<li class="listitem">
Default value is <code class="literal">"size_and_time"</code>
</li>
</ul>
</div>
<p>Controls when to close the file and push it to S3.</p>
<p>If you set this value to <code class="literal">size</code>, it uses the value set in
<a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-size_file" title="size_file"><code class="literal">size_file</code></a>.
If you set this value to <code class="literal">time</code>, it uses the value set in
<a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-time_file" title="time_file"><code class="literal">time_file</code></a>.
If you set this value to <code class="literal">size_and_time</code>, it uses the values from
<a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-size_file" title="size_file"><code class="literal">size_file</code></a> and
<a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-time_file" title="time_file"><code class="literal">time_file</code></a>, and splits the file when
either one matches.</p>
<p>The default strategy checks both size and time. The first value to
match triggers file rotation.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-secret_access_key"></a><code class="literal">secret_access_key</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The AWS Secret Access Key</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-server_side_encryption"></a><code class="literal">server_side_encryption</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">false</code>
</li>
</ul>
</div>
<p>Specifies whether or not to use S3&#8217;s server side encryption. Defaults to no encryption.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-server_side_encryption_algorithm"></a><code class="literal">server_side_encryption_algorithm</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">AES256</code>, <code class="literal">aws:kms</code>
</li>
<li class="listitem">
Default value is <code class="literal">"AES256"</code>
</li>
</ul>
</div>
<p>Specifies what type of encryption to use when SSE is enabled.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-session_token"></a><code class="literal">session_token</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The AWS Session token for temporary credential</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-signature_version"></a><code class="literal">signature_version</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">v2</code>, <code class="literal">v4</code>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The version of the S3 signature hash to use. Normally uses the internal client default, can be explicitly
specified here</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-size_file"></a><code class="literal">size_file</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">5242880</code>
</li>
</ul>
</div>
<p>Set the file size in bytes. When the number of bytes exceeds the <code class="literal">size_file</code>
value, a new file is created. If you use tags, Logstash generates a specific size
file for every tag.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-ssekms_key_id"></a><code class="literal">ssekms_key_id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>The key to use when specified along with server_side_encryption &#8658; aws:kms.
If server_side_encryption &#8658; aws:kms is set but this is not default KMS key is used.
<a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingKMSEncryption.html" class="ulink" target="_top">http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingKMSEncryption.html</a></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-storage_class"></a><code class="literal">storage_class</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value can be any of: <code class="literal">STANDARD</code>, <code class="literal">REDUCED_REDUNDANCY</code>, <code class="literal">STANDARD_IA</code>, <code class="literal">ONEZONE_IA</code>
</li>
<li class="listitem">
Default value is <code class="literal">"STANDARD"</code>
</li>
</ul>
</div>
<p>Specifies what S3 storage class to use when uploading the file.
More information about the different storage classes can be found:
<a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/storage-class-intro.html" class="ulink" target="_top">http://docs.aws.amazon.com/AmazonS3/latest/dev/storage-class-intro.html</a>
Defaults to STANDARD.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-temporary_directory"></a><code class="literal">temporary_directory</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#string" title="String">string</a>
</li>
<li class="listitem">
Default value is <code class="literal">"/tmp/logstash"</code>
</li>
</ul>
</div>
<p>Set the directory where logstash will store the tmp files before sending it to S3
default to the current OS temporary directory in linux /tmp/logstash</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-time_file"></a><code class="literal">time_file</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">15</code>
</li>
</ul>
</div>
<p>Set the time, in MINUTES, to close the current sub_time_section of bucket.
If <a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-rotation_strategy" title="rotation_strategy"><code class="literal">rotation_strategy</code></a> is set to <code class="literal">time</code> or <code class="literal">size_and_time</code>, then <code class="literal">time_file</code> cannot be set to 0.
Otherwise, the plugin raises a configuration error.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-upload_multipart_threshold"></a><code class="literal">upload_multipart_threshold</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">15728640</code>
</li>
</ul>
</div>
<p>Files larger than this number are uploaded using the S3 multipart APIs</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-upload_queue_size"></a><code class="literal">upload_queue_size</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">4</code>
</li>
</ul>
</div>
<p>Number of items we can keep in the local queue before uploading them</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-upload_workers_count"></a><code class="literal">upload_workers_count</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#number" title="Number">number</a>
</li>
<li class="listitem">
Default value is <code class="literal">4</code>
</li>
</ul>
</div>
<p>Specify how many workers to use to upload the files to S3</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-use_aws_bundled_ca"></a><code class="literal">use_aws_bundled_ca</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">false</code>
</li>
</ul>
</div>
<p>Use bundled CA certificates that ship with AWS SDK to verify SSL peer certificates.
For cases where the default certificates are unavailable, e.g. Windows,
you can set this to <code class="literal">true</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-validate_credentials_on_root_bucket"></a><code class="literal">validate_credentials_on_root_bucket</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a class="xref" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">true</code>
</li>
</ul>
</div>
<p>The common use case is to define permissions on the root bucket and give Logstash
full access to write logs.
In some circumstances, you need more granular permissions on the subfolder. This
allows you to disable the check at startup.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="plugins-outputs-s3-common-options"></a>Common Options<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h3>
</div></div></div>
<p>The following configuration options are supported by all output plugins:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Setting</th>
<th align="left" valign="top">Input type</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-enable_metric" title="enable_metric"><code class="literal">enable_metric</code></a></p></td>
<td align="left" valign="top"><p><a href="/guide/en/logstash/8.14/configuration-file-structure.html#boolean" class="ulink" target="_top">boolean</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><a class="xref" href="plugins-outputs-s3.html#plugins-outputs-s3-id" title="id"><code class="literal">id</code></a></p></td>
<td align="left" valign="top"><p><a href="/guide/en/logstash/8.14/configuration-file-structure.html#string" class="ulink" target="_top">string</a></p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-enable_metric"></a><code class="literal">enable_metric</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a href="/guide/en/logstash/8.14/configuration-file-structure.html#boolean" class="ulink" target="_top">boolean</a>
</li>
<li class="listitem">
Default value is <code class="literal">true</code>
</li>
</ul>
</div>
<p>Disable or enable metric logging for this specific plugin instance.
By default we record all the metrics we can, but you can disable metrics collection
for a specific plugin.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="plugins-outputs-s3-id"></a><code class="literal">id</code><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/logstash-plugins/logstash-output-s3/edit/main/docs/index.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value type is <a href="/guide/en/logstash/8.14/configuration-file-structure.html#string" class="ulink" target="_top">string</a>
</li>
<li class="listitem">
There is no default value for this setting.
</li>
</ul>
</div>
<p>Add a unique <code class="literal">ID</code> to the plugin configuration. If no ID is specified, Logstash will generate one.
It is strongly recommended to set this ID in your configuration. This is particularly useful
when you have two or more plugins of the same type. For example, if you have 2 s3 outputs.
Adding a named ID in this case will help in monitoring Logstash when using the monitoring APIs.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">output {
  s3 {
    id =&gt; "my_plugin_id"
  }
}</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Variable substitution in the <code class="literal">id</code> field only supports environment variables
      and does not support the use of values from the secret store.</p>
</div>
</div>
</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="plugins-outputs-riemann.html">« Riemann output plugin</a>
</span>
<span class="next">
<a href="plugins-outputs-sink.html">Sink output plugin »</a>
</span>
</div>
</body>
</html>
