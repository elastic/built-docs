<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Health Report Pipeline Flow: Worker Utilization | Logstash Reference [8.18] | Elastic</title>
<meta class="elastic" name="content" content="Health Report Pipeline Flow: Worker Utilization | Logstash Reference [8.18]">

<link rel="home" href="index.html" title="Logstash Reference [8.18]"/>
<link rel="up" href="troubleshooting.html" title="Troubleshooting"/>
<link rel="prev" href="health-report-pipeline-status.html" title="Health Report Pipeline Status"/>
<link rel="next" href="contributing-to-logstash.html" title="Contributing to Logstash"/>
<meta class="elastic" name="product_version" content="8.18"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/8.18"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="8.18"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="health-report-pipeline-status.html">« Health Report Pipeline Status</a>
</span>
<span class="next">
<a href="contributing-to-logstash.html">Contributing to Logstash »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [8.18]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Health Report Pipeline Flow: Worker Utilization</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/8.18/docs/static/troubleshoot/health-pipeline-flow-worker-utilization.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    A newer version is available. Check out the <a href="https://www.elastic.co/docs/troubleshoot/ingest/logstash/health-report-pipelines">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="health-report-pipeline-flow-worker-utilization"></a>Health Report Pipeline Flow: Worker Utilization</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/8.18/docs/static/troubleshoot/health-pipeline-flow-worker-utilization.asciidoc">edit</a></div>
</div></div></div>
<p>The Pipeline indicator has a <code class="literal">flow:worker_utilization</code> probe that is capable of producing one of several diagnoses about blockages in the pipeline.</p>
<p>A pipeline is considered "blocked" when its workers are fully-utilized, because if they are consistently spending 100% of their time processing events, they are unable to pick up new events from the queue.
This can cause back-pressure to cascade to upstream services, which can result in data loss or duplicate processing depending on upstream configuration.</p>
<p>The issue typically stems from one or more causes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
a downstream resource being blocked,
</li>
<li class="listitem">
a plugin consuming more resources than expected, and/or
</li>
<li class="listitem">
insufficient resources being allocated to the pipeline.
</li>
</ul>
</div>
<p>To address the issue, observe the <a class="xref" href="node-stats-api.html#plugin-flow-rates" title="Plugin flow rates">Plugin flow rates</a> from the <a class="xref" href="node-stats-api.html" title="Node Stats API">Node Stats API</a>, and identify which plugins have the highest <code class="literal">worker_utilization</code>.
This will tell you which plugins are spending the most of the pipeline&#8217;s worker resources.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the offending plugin connects to a downstream service or another pipeline that is exerting back-pressure, the issue needs to be addressed in the downstream service or pipeline.
</li>
<li class="listitem">
If the offending plugin connects to a downstream service with high network latency, throughput for the pipeline may be improved by <a class="xref" href="tuning-logstash.html#tuning-logstash-settings" title="Tuning-related settings">allocating more worker resources to the pipeline</a>.
</li>
<li class="listitem">
If the offending plugin is a computation-heavy filter such as <code class="literal">grok</code> or <code class="literal">kv</code>, its configuration may need to be tuned to eliminate wasted computation.
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="health-report-pipeline-flow-worker-utilization-diagnosis-blocked-5m"></a><a id="blocked-5m"></a>Blocked Pipeline (5 minutes)</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/8.18/docs/static/troubleshoot/health-pipeline-flow-worker-utilization.asciidoc">edit</a></div>
</div></div></div>
<p>A pipeline that has been completely blocked for five minutes or more represents a critical blockage to the flow of events through your pipeline that needs to be addressed immediately to avoid or limit data loss.
See above for troubleshooting steps.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="health-report-pipeline-flow-worker-utilization-diagnosis-nearly-blocked-5m"></a><a id="nearly-blocked-5m"></a>Nearly Blocked Pipeline (5 minutes)</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/8.18/docs/static/troubleshoot/health-pipeline-flow-worker-utilization.asciidoc">edit</a></div>
</div></div></div>
<p>A pipeline that has been nearly blocked for five minutes or more may be creating intermittent blockage to the flow of events through your pipeline, which can result in the risk of data loss.
See above for troubleshooting steps.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="health-report-pipeline-flow-worker-utilization-diagnosis-blocked-1m"></a><a id="blocked-1m"></a>Blocked Pipeline (1 minute)</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/8.18/docs/static/troubleshoot/health-pipeline-flow-worker-utilization.asciidoc">edit</a></div>
</div></div></div>
<p>A pipeline that has been completely blocked for one minute or more represents a high-risk or upcoming blockage to the flow of events through your pipeline that likely needs to be addressed soon to avoid or limit data loss.
See above for troubleshooting steps.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="health-report-pipeline-flow-worker-utilization-diagnosis-nearly-blocked-1m"></a><a id="nearly-blocked-1m"></a>Nearly Blocked Pipeline (1 minute)</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/8.18/docs/static/troubleshoot/health-pipeline-flow-worker-utilization.asciidoc">edit</a></div>
</div></div></div>
<p>A pipeline that has been nearly blocked for one minute or more may be creating intermittent blockage to the flow of events through your pipeline, which can result in the risk of data loss.
See above for troubleshooting steps.</p>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="health-report-pipeline-status.html">« Health Report Pipeline Status</a>
</span>
<span class="next">
<a href="contributing-to-logstash.html">Contributing to Logstash »</a>
</span>
</div>
</body>
</html>
