<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Using Logstash with Elastic Integrations | Logstash Reference [master] | Elastic</title>
<meta class="elastic" name="content" content="Using Logstash with Elastic Integrations | Logstash Reference [master]">

<link rel="home" href="index.html" title="Logstash Reference [master]"/>
<link rel="up" href="index.html" title="Logstash Reference [master]"/>
<link rel="prev" href="configuring-centralized-pipelines.html" title="Configure Centralized Pipeline Management"/>
<link rel="next" href="logstash-modules.html" title="Working with Logstash Modules"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Logstash"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Logstash/Reference/master"/>
<meta name="DC.subject" content="Logstash"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="configuring-centralized-pipelines.html">« Configure Centralized Pipeline Management</a>
</span>
<span class="next">
<a href="logstash-modules.html">Working with Logstash Modules »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Logstash Reference [master]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Using Logstash with Elastic Integrations</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/main/docs/static/ea-integrations.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ea-integrations"></a>Using Logstash with Elastic Integrations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/main/docs/static/ea-integrations.asciidoc">edit</a></h2>
</div></div></div>
<p>You can take advantage of the extensive, built-in capabilities of Elastic Integrations&#8212;&#8203;such as managing data collection, transformation, and visualization&#8212;&#8203;and then use Logstash for additional data processing and output options.
Logstash can further expand capabilities for use cases where you need additional processing, or if you need your data delivered to multiple destinations.</p>
<h3><a id="integrations-value"></a>Elastic Integrations: ingesting to visualizing<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/main/docs/static/ea-integrations.asciidoc">edit</a></h3>
<p><a href="https://docs.elastic.co/integrations" class="ulink" target="_top">Elastic Integrations</a> provide quick, end-to-end solutions for:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
ingesting data from a variety of data sources,
</li>
<li class="listitem">
ensuring compliance with the <a href="/guide/en/ecs/8.11/index.html" class="ulink" target="_top">Elastic Common Schema (ECS)</a>,
</li>
<li class="listitem">
getting the data into the Elastic Stack, and
</li>
<li class="listitem">
visualizing it with purpose-built dashboards.
</li>
</ul>
</div>
<p>Integrations are available for <a href="https://docs.elastic.co/integrations/all_integrations" class="ulink" target="_top">popular services and platforms</a>, such as Nginx, AWS, and MongoDB, as well as many generic input types like log files.
Each integration includes pre-packaged assets to help reduce the time between ingest and insights.</p>
<p>To see available integrations, go to the Kibana home page, and click <span class="strong strong"><strong>Add Integrations</strong></span>.
You can use the query bar to search for integrations you may want to use.
When you find an integration for your data source, the UI walks you through adding and configuring it.</p>
<h3><a id="integrations-and-ls"></a>Extend Integrations with Logstash<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/main/docs/static/ea-integrations.asciidoc">edit</a></h3>
<p>Logstash can run the ingest pipeline component of your Elastic integration when you use the Logstash <code class="literal">filter-elastic_integration</code> plugin in your Logstash pipeline.</p>
<p>Adding the <code class="literal">filter-elastic_integration</code> plugin as the <em>first</em> filter plugin keeps the pipeline&#8217;s behavior as close as possible to the behavior you&#8217;d expect if the bytes were processed by the integration in Elasticsearch.
The more you modify an event before calling the <code class="literal">elastic_integration</code> filter, the higher the risk that the modifications will have meaningful effect in how the event is transformed.</p>
<div class="sidebar">
<div class="titlepage"><div><div>
<p class="title"><strong>How to</strong></p>
</div></div></div>
<p>Create a Logstash pipeline that uses the <a class="xref" href="plugins-inputs-elastic_agent.html" title="Elastic Agent input plugin">elastic_agent input</a> plugin, and the <a class="xref" href="plugins-filters-elastic_integration.html" title="Elastic Integration filter plugin">elastic_integration filter</a> plugin as the <em>first</em> filter in your Logstash pipeline.
You can add more filters for additional processing, but they must come after the <code class="literal">logstash-filter-elastic_integration</code> plugin in your configuration.
Add one or more output plugins to complete your pipeline.</p>
</div>
<p><span class="strong strong"><strong>Sample pipeline configuration</strong></span></p>
<div class="pre_wrapper lang-ruby">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ruby">input {
  elastic_agent {
    port =&gt; 5044
  }
}

filter {
  elastic_integration{ <a id="CO22-1"></a><i class="conum" data-value="1"></i>
    cloud_id =&gt; "&lt;cloud id&gt;"
    cloud_auth =&gt; "&lt;your_cloud-auth"
  }

  translate { <a id="CO22-2"></a><i class="conum" data-value="2"></i>
    source =&gt; "[http][host]"
    target =&gt; "[@metadata][tenant]"
    dictionary_path =&gt; "/etc/conf.d/logstash/tenants.yml"
  }
}

output { <a id="CO22-3"></a><i class="conum" data-value="3"></i>
  if [@metadata][tenant] == "tenant01" {
    elasticsearch {
      cloud_id =&gt; "&lt;cloud id&gt;"
      api_key =&gt; "&lt;api key&gt;"
    }
  } else if [@metadata][tenant] == "tenant02" {
    elasticsearch {
      cloud_id =&gt; "&lt;cloud id&gt;"
      api_key =&gt; "&lt;api key&gt;"
    }
  }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Use <code class="literal">filter-elastic_integration</code> as the first filter in your pipeline</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>You can use additional filters as long as they follow <code class="literal">filter-elastic_integration</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Sample config to output data to multiple destinations</p>
</td>
</tr>
</table>
</div>
<h4><a id="es-tips"></a>Using <code class="literal">filter-elastic_integration</code> with <code class="literal">output-elasticsearch</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/logstash/edit/main/docs/static/ea-integrations.asciidoc">edit</a></h4>
<p>Elastic Integrations are designed to work with <a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html#plugins-outputs-elasticsearch-data-streams" class="ulink" target="_top">data streams</a> and <a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html#_compatibility_with_the_elastic_common_schema_ecs" class="ulink" target="_top">ECS-compatible</a> output.
Be sure that these features are enabled in the <a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html" class="ulink" target="_top"><code class="literal">output-elasticsearch</code></a> plugin.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set <a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html#plugins-outputs-elasticsearch-data_stream" class="ulink" target="_top"><code class="literal">data-stream</code></a> to <code class="literal">true</code>.<br>
(Check out <a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html#plugins-outputs-elasticsearch-data-streams" class="ulink" target="_top">Data streams</a> for additional data streams settings.)
</li>
<li class="listitem">
Set <a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html#plugins-outputs-elasticsearch-ecs_compatibility" class="ulink" target="_top"><code class="literal">ecs-compatibility</code></a> to <code class="literal">v1</code> or <code class="literal">v8</code>.
</li>
</ul>
</div>
<p>Check out the <a href="/guide/en/logstash/master/plugins-outputs-elasticsearch.html" class="ulink" target="_top"><code class="literal">output-elasticsearch</code> plugin</a> docs for additional settings.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="configuring-centralized-pipelines.html">« Configure Centralized Pipeline Management</a>
</span>
<span class="next">
<a href="logstash-modules.html">Working with Logstash Modules »</a>
</span>
</div>
</body>
</html>
