<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Machine learning features unavailable after rolling upgrade | Machine Learning in the Elastic Stack [6.8] | Elastic</title>
<meta class="elastic" name="content" content="Machine learning features unavailable after rolling upgrade | Machine Learning in the Elastic Stack [6.8]">

<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [6.8]"/>
<link rel="up" href="ml-troubleshooting.html" title="Troubleshooting machine learning"/>
<link rel="prev" href="ml-troubleshooting.html" title="Troubleshooting machine learning"/>
<link rel="next" href="ml-mappingclash.html" title="Job creation failure due to mapping clash"/>
<meta class="elastic" name="product_version" content="6.8"/>
<meta class="elastic" name="product_name" content="Machine Learning"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/6.8"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="6.8"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [6.8]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-troubleshooting.html">Troubleshooting machine learning</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-troubleshooting.html">« Troubleshooting machine learning</a>
</span>
<span class="next">
<a href="ml-mappingclash.html">Job creation failure due to mapping clash »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-rollingupgrade"></a>Machine learning features unavailable after rolling upgrade<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/6.8/docs/en/stack/ml/anomaly-detection/troubleshooting.asciidoc">edit</a></h2>
</div></div></div>
<p>This problem occurs after you upgrade all of the nodes in your cluster to
6.8.23 by using rolling upgrades. When you try to use machine learning features for
the first time, all attempts fail, though <code class="literal">GET _xpack</code> and <code class="literal">GET _xpack/usage</code>
indicate that X-Pack is enabled.</p>
<p><span class="strong strong"><strong>Symptoms:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Errors when you click <span class="strong strong"><strong>Machine Learning</strong></span> in Kibana.
For example: <code class="literal">Jobs list could not be created</code> and <code class="literal">An internal server error occurred</code>.
</li>
<li class="listitem">
Null pointer and remote transport exceptions when you run machine learning APIs such as
<code class="literal">GET _xpack/ml/anomaly_detectors</code> and <code class="literal">GET _xpack/ml/datafeeds</code>.
</li>
<li class="listitem">
Errors in the log files on the master nodes.
For example: <code class="literal">unable to install ml metadata upon startup</code>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Resolution:</strong></span></p>
<p>After you upgrade all master-eligible nodes to Elasticsearch 6.8.23, restart the
current master node, which triggers the machine learning features to re-initialize.</p>
<p>For more information, see <a href="/guide/en/elasticsearch/reference/6.8/rolling-upgrades.html" class="ulink" target="_top">Rolling upgrades</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ml-troubleshooting.html">« Troubleshooting machine learning</a>
</span>
<span class="next">
<a href="ml-mappingclash.html">Job creation failure due to mapping clash »</a>
</span>
</div>
</div>
</body>
</html>
