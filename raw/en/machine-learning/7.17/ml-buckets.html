<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="An introduction to machine learning anomaly detection, which analyzes time series data to identify and predict anomalous patterns in your data.">
<meta name="keywords" content="ML, Elastic Stack, anomaly detection, overview">
<title>Buckets | Machine Learning in the Elastic Stack [7.17] | Elastic</title>
<meta class="elastic" name="content" content="Buckets | Machine Learning in the Elastic Stack [7.17]">

<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [7.17]"/>
<link rel="up" href="ml-concepts.html" title="Concepts"/>
<link rel="prev" href="ml-datafeeds.html" title="Datafeeds"/>
<link rel="next" href="ml-influencers.html" title="Influencers"/>
<meta class="elastic" name="product_version" content="7.17"/>
<meta class="elastic" name="product_name" content="Machine Learning"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/7.17"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="7.17"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [7.17]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="xpack-ml.html">Anomaly detection</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-concepts.html">Concepts</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-datafeeds.html">« Datafeeds</a>
</span>
<span class="next">
<a href="ml-influencers.html">Influencers »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-buckets"></a>Buckets<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.17/docs/en/stack/ml/anomaly-detection/ml-buckets.asciidoc">edit</a></h2>
</div></div></div>
<p>The machine learning features use the concept of a <em>bucket</em> to divide the time series into
batches for processing.</p>
<p>The <em>bucket span</em> is part of the configuration information for an anomaly detection job.
It defines the time interval that is used to summarize and model the data. This
is typically between 5 minutes to 1 hour and it depends on your data
characteristics. When you set the bucket span, take into account the granularity
at which you want to analyze, the frequency of the input data, the typical
duration of the anomalies, and the frequency at which alerting is required.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-bucket-results"></a>Bucket results<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.17/docs/en/stack/ml/anomaly-detection/ml-buckets.asciidoc">edit</a></h3>
</div></div></div>
<p>When you view your machine learning results, each bucket has an anomaly score. This score is
a statistically aggregated and normalized view of the combined anomalousness of
all the record results in the bucket.</p>
<p>The machine learning analytics enhance the anomaly score for each bucket by considering
contiguous buckets. This extra <em>multi-bucket analysis</em> effectively uses a
sliding window to evaluate the events in each bucket relative to the larger
context of recent events. When you review your machine learning results, there is a
<code class="literal">multi_bucket_impact</code> property that indicates how strongly the final anomaly
score is influenced by multi-bucket analysis. In Kibana, anomalies with medium or
high multi-bucket impact are depicted in the <span class="strong strong"><strong>Anomaly Explorer</strong></span> and the
<span class="strong strong"><strong>Single Metric Viewer</strong></span> with a cross symbol instead of a dot. For example:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/multibucketanalysis.jpg" alt="Examples of anomalies with multi-bucket impact in Kibana">
</div>
</div>
<p>In this example, you can see that some of the anomalies fall within the shaded
blue area, which represents the bounds for the expected values. The bounds are
calculated per bucket, but multi-bucket analysis is not limited by that scope.</p>
<p>If you have more than one anomaly detection job, you can also obtain <em>overall bucket</em>
results, which combine and correlate anomalies from multiple jobs into an
overall score. When you view the results for job groups in Kibana, it provides
the overall bucket scores. For more information, see
<a href="/guide/en/elasticsearch/reference/7.17/ml-get-overall-buckets.html" class="ulink" target="_top">Get overall buckets API</a>.</p>
<p>Bucket results provide the top level, overall view of the anomaly detection job and are
ideal for alerts. For example, the bucket results might indicate that at 16:05
the system was unusual. This information is a summary of all the anomalies,
pinpointing when they occurred. When you identify an anomalous bucket, you can
investigate further by examining the pertinent records.</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="ml-datafeeds.html">« Datafeeds</a>
</span>
<span class="next">
<a href="ml-influencers.html">Influencers »</a>
</span>
</div>
</div>
</body>
</html>
