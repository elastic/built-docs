<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="An introduction to machine learning anomaly detection, which analyzes time series data to identify and predict anomalous patterns in your data.">
<meta name="keywords" content="ML, Elastic Stack, anomaly detection, overview">
<title>Custom rules | Machine Learning in the Elastic Stack [7.17] | Elastic</title>
<meta class="elastic" name="content" content="Custom rules | Machine Learning in the Elastic Stack [7.17]">

<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [7.17]"/>
<link rel="up" href="ml-concepts.html" title="Concepts"/>
<link rel="prev" href="ml-calendars.html" title="Calendars and scheduled events"/>
<link rel="next" href="ml-model-snapshots.html" title="Model snapshots"/>
<meta class="elastic" name="product_version" content="7.17"/>
<meta class="elastic" name="product_name" content="Machine Learning"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/7.17"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="7.17"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [7.17]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="xpack-ml.html">Anomaly detection</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-concepts.html">Concepts</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-calendars.html">« Calendars and scheduled events</a>
</span>
<span class="next">
<a href="ml-model-snapshots.html">Model snapshots »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-rules"></a>Custom rules<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.17/docs/en/stack/ml/anomaly-detection/ml-rules.asciidoc">edit</a></h2>
</div></div></div>
<p>By default, as described in <a class="xref" href="ml-overview.html#ml-analyzing" title="Analyzing the past and present">Analyzing the past and present</a>, anomaly detection is unsupervised
and the machine learning models have no awareness of the domain of your data. As a result,
anomaly detection jobs might identify events that are statistically significant but are
uninteresting when you know the larger context. Machine learning custom rules
enable you to customize anomaly detection.</p>
<p><em>Custom rules</em> – or <em>job rules</em> as Kibana refers to them – instruct anomaly
detectors to change their behavior based on domain-specific knowledge that you
provide. When you create a rule, you can specify conditions, scope, and actions.
When the conditions of a rule are satisfied, its actions are triggered.</p>
<p>For example, if you have an anomaly detector that is analyzing CPU usage, you
might decide you are only interested in anomalies where the CPU usage is greater
than a certain threshold. You can define a rule with conditions and actions that
instruct the detector to refrain from generating machine learning results when there are
anomalous events related to low CPU usage. You might also decide to add a scope
for the rule, such that it applies only to certain machines. The scope is
defined by using machine learning filters.</p>
<p><em>Filters</em> contain a list of values that you can use to include or exclude events
from the machine learning analysis. You can use the same filter in multiple anomaly detection jobs.</p>
<p>If you are analyzing web traffic, you might create a filter that contains a list
of IP addresses. For example, maybe they are IP addresses that you trust to
upload data to your website or to send large amounts of data from behind your
firewall. You can define the scope of a rule such that it triggers only when a
specific field in your data matches one of the values in the filter.
Alternatively, you can make it trigger only when the field value does not match
one of the filter values. You therefore have much greater control over which
anomalous events affect the machine learning model and appear in the machine learning results.</p>
<p>For more information, see <a class="xref" href="ml-configuring-detector-custom-rules.html" title="Customizing detectors with custom rules">Customizing detectors with custom rules</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ml-calendars.html">« Calendars and scheduled events</a>
</span>
<span class="next">
<a href="ml-model-snapshots.html">Model snapshots »</a>
</span>
</div>
</div>
</body>
</html>
