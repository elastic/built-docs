<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Model snapshots | Machine Learning in the Elastic Stack [7.7] | Elastic</title>
<meta class="elastic" name="content" content="Model snapshots | Machine Learning in the Elastic Stack [7.7]">

<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [7.7]"/>
<link rel="up" href="ml-concepts.html" title="Concepts"/>
<link rel="prev" href="ml-rules.html" title="Custom rules"/>
<link rel="next" href="ml-configuration.html" title="Configure anomaly detection"/>
<meta class="elastic" name="product_version" content="7.7"/>
<meta class="elastic" name="product_name" content="Machine Learning"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine Learning/7.7"/>
<meta name="DC.subject" content="Machine Learning"/>
<meta name="DC.identifier" content="7.7"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [7.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="xpack-ml.html">Anomaly detection</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ml-concepts.html">Concepts</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-rules.html">« Custom rules</a>
</span>
<span class="next">
<a href="ml-configuration.html">Configure anomaly detection »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-model-snapshots"></a>Model snapshots<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/stack-docs/edit/7.7/docs/en/stack/ml/anomaly-detection/ml-model-snapshots.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>As described in <a class="xref" href="ml-overview.html#ml-analyzing" title="Analyzing the past and present">Analyzing the past and present</a>, Elastic Stack machine learning features can calculate baselines
of normal behavior then extrapolate anomalous events. These baselines are
accomplished by generating models of your data.</p>
<p>To ensure resilience in the event of a system failure, snapshots of the machine learning
model for each anomaly detection job are saved to an internal index within the Elasticsearch
cluster. By default, snapshots are captured approximately every 3 to 4 hours and
retained for one day (twenty-four hours). The amount of time necessary to
save these snapshots is proportional to the size of the model in memory.</p>
<p>You can use the <a href="/guide/en/elasticsearch/reference/7.7/ml-update-job.html" class="ulink" target="_top">update anomaly detection jobs API</a> to change
the interval (<code class="literal">background_persist_interval</code>) and retention
(<code class="literal">model_snapshot_retention_days</code>) of these snapshots.</p>
<p>There are also situations where you might want to
<a href="/guide/en/elasticsearch/reference/7.7/ml-revert-snapshot.html" class="ulink" target="_top">revert</a> to using a specific model snapshot. The
machine learning features react quickly to anomalous input and new behaviors in data. Highly
anomalous input increases the variance in the models and machine learning analytics must
determine whether it is a new step-change in behavior or a one-off event. In the
case where you know this anomalous input is a one-off, it might be appropriate
to reset the model state to a time before this event. For example, you might
consider reverting to a saved snapshot after Black Friday or a critical system
failure. If you know about such events in advance, you can use
<a class="xref" href="ml-calendars.html" title="Calendars and scheduled events">calendars and scheduled events</a> to avoid impacting your model.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="ml-rules.html">« Custom rules</a>
</span>
<span class="next">
<a href="ml-configuration.html">Configure anomaly detection »</a>
</span>
</div>
</div>
</body>
</html>
