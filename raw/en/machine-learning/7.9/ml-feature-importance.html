<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Feature importance | Machine Learning in the Elastic Stack [7.9] | Elastic</title>
<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [7.9]"/>
<link rel="up" href="ml-dfa-concepts.html" title="Concepts"/>
<link rel="prev" href="ml-feature-encoding.html" title="Feature encoding"/>
<link rel="next" href="hyperparameters.html" title="Hyperparameter optimization"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine learning/7.9"/>
<meta name="DC.subject" content="Machine learning"/>
<meta name="DC.identifier" content="7.9"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [7.9]</a></span>
»
<span class="breadcrumb-link"><a href="ml-dfanalytics.html">Data frame analytics</a></span>
»
<span class="breadcrumb-link"><a href="ml-dfa-concepts.html">Concepts</a></span>
»
<span class="breadcrumb-node">Feature importance</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ml-feature-encoding.html">« Feature encoding</a>
</span>
<span class="next">
<a href="hyperparameters.html">Hyperparameter optimization »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ml-feature-importance"></a>Feature importance<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.9/docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>Feature importance values indicate which fields had the biggest impact on each
prediction that is generated by <a class="xref" href="dfa-classification.html" title="Classification">classification</a> or
<a class="xref" href="dfa-regression.html" title="Regression">regression</a> analysis. The features of the data points are
responsible for a particular prediction to varying degrees. Feature importance shows
to what degree a given feature of a data point contributes to the prediction.
The feature importance value can be either positive or negative depending on its effect
on the prediction. If the feature reduces the prediction value, the feature importance
is negative, if it increases the prediction, then the feature importance is positive.
The magnitude of feature importance shows how significantly the feature affects the
prediction for a given data point.</p>
<p>Feature importance in the Elastic Stack is calculated using the SHAP (SHapley Additive
exPlanations) method as described in
<a href="https://papers.nips.cc/paper/7062-a-unified-approach-to-interpreting-model-predictions.pdf" class="ulink" target="_top">Lundberg, S. M., &amp; Lee, S.-I. A Unified Approach to Interpreting Model Predictions. In NeurIPS 2017</a>.</p>
<p>By default, feature importance values are not calculated when you configure the job via
the API. To generate this information, when you create a data frame analytics job you
must specify the <code class="literal">num_top_feature_importance_values</code> property. When you
configure the job in Kibana, feature importance values are calculated automatically. The
feature importance values are stored in the machine learning results field for each document in the
destination index.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The number of feature importance values for each document might be less than the
<code class="literal">num_top_feature_importance_values</code> property value. For example, it returns only
features that had a positive or negative effect on the prediction.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="ml-feature-importance-readings"></a>Further reading<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.9/docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc">edit</a></h3>
</div></div></div>
<p><a href="/blog/feature-importance-for-data-frame-analytics-with-elastic-machine-learning" class="ulink" target="_top">Feature importance for data frame analytics with Elastic machine learning</a></p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="ml-feature-encoding.html">« Feature encoding</a>
</span>
<span class="next">
<a href="hyperparameters.html">Hyperparameter optimization »</a>
</span>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>
