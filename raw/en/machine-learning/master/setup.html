<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Set up machine learning features | Machine Learning in the Elastic Stack [master] | Elastic</title>
<link rel="home" href="index.html" title="Machine Learning in the Elastic Stack [master]"/>
<link rel="up" href="index.html" title="Machine Learning in the Elastic Stack [master]"/>
<link rel="prev" href="index.html" title="Machine Learning in the Elastic Stack [master]"/>
<link rel="next" href="ml-getting-started.html" title="Getting started with machine learning"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Machine learning/master"/>
<meta name="DC.subject" content="Machine learning"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Machine Learning in the Elastic Stack [master]</a></span>
»
<span class="breadcrumb-node">Set up machine learning features</span>
</div>
<div class="navheader">
<span class="prev">
</span>
<span class="next">
<a href="ml-getting-started.html">Getting started with machine learning »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="setup"></a>Set up machine learning features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/ml/setup.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>

<p>To use the Elastic Stack machine learning features, you must have the
<a href="/subscriptions" class="ulink" target="_top">appropriate subscription</a> and at least one
<a class="xref" href="setup.html#ml-nodes" title="Machine learning nodes">machine learning node</a> in your cluster.</p>
<p>In Kibana, the machine learning features must be visible in your
<a href="/guide/en/kibana/master/xpack-spaces.html#spaces-control-feature-visibility" class="ulink" target="_top">space</a> and your
source index patterns must exist in the same space as your machine learning jobs.</p>
<p>If Elastic Stack security features are enabled, you must also ensure your users have
the <a class="xref" href="setup.html#setup-privileges" title="Security privileges">necessary privileges</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>The fastest way to get started with machine learning features is to
<a href="/cloud/elasticsearch-service/signup?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">start a free 14-day trial of Elasticsearch Service</a> in the cloud.</p>
</div>
</div>
<h3><a id="ml-nodes"></a>Machine learning nodes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/ml/setup.asciidoc">edit</a></h3>
<p>To use machine learning features, there must be at least one machine learning node in your cluster. A
machine learning node is a node that has <code class="literal">xpack.ml.enabled</code> set to <code class="literal">true</code> and <code class="literal">ml</code> in
<code class="literal">node.roles</code>.</p>
<p>If nodes do not have the machine learning role, they cannot run machine learning jobs. If
<code class="literal">xpack.ml.enabled</code> is <code class="literal">true</code>, however, they can service API requests. For more
information, see <a href="/guide/en/elasticsearch/reference/master/modules-node.html#ml-node" class="ulink" target="_top">Machine learning nodes</a> and
<a href="/guide/en/elasticsearch/reference/master/ml-settings.html" class="ulink" target="_top">Machine learning settings in Elasticsearch</a>.</p>
<h3><a id="setup-privileges"></a>Security privileges<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/ml/setup.asciidoc">edit</a></h3>
<p>The Elastic Stack security features provide roles and privileges that make it easier
to control which users can manage or view machine learning objects such as jobs, datafeeds,
results, and model snapshots. Kibana also enables you to control access to the
machine learning features within each space. You can manage your roles, privileges, and
spaces in the <span class="strong strong"><strong>Stack Management</strong></span> app in Kibana. For more information, see
<a href="/guide/en/elasticsearch/reference/master/security-privileges.html" class="ulink" target="_top">Security privileges</a> and
<a href="/guide/en/kibana/master/kibana-privileges.html" class="ulink" target="_top">Kibana privileges</a>.</p>
<p>For full access to the machine learning features in Kibana, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">all</code> Kibana privileges for the machine learning features in the appropriate spaces
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> and <code class="literal">view_index_metadata</code> index privileges on source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code>, <code class="literal">manage</code>, and <code class="literal">index</code> index privileges on destination indices (for
data frame analytics jobs only)
</li>
</ul>
</div>
<p>For read-only access to the machine learning features in Kibana, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> Kibana privileges for the machine learning features in the appropriate spaces
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> index privileges on source indices
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code> index privileges on destination indices (for data frame analytics jobs
only)
</li>
</ul>
</div>
<p>To upload files in Kibana with the <span class="strong strong"><strong>File Data Visualizer</strong></span>, you must have:</p>
<div class="ulist checklist itemizedlist">
<ul class="checklist">
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">all</code> Kibana privileges for the machine learning features in the appropriate spaces.
Alternatively, <code class="literal">read</code> Kibana privileges for the machine learning features and <code class="literal">all</code> Kibana
privileges for the index pattern management feature
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">ingest_admin</code> <a href="/guide/en/elasticsearch/reference/master/built-in-roles.html" class="ulink" target="_top">built-in role</a>
</li>
<li class="listitem">
<input type="checkbox" data-item-complete="0"> <code class="literal">read</code>, <code class="literal">manage</code>, and <code class="literal">index</code> index privileges for destination indices
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot limit access to specific machine learning objects in each space. If
the machine learning feature is visible in your space and you have <code class="literal">read</code> or <code class="literal">all</code> Kibana
privileges for the feature, you have access to <span class="strong strong"><strong>all</strong></span> machine learning objects in that space.</p>
</div>
</div>
<p>If you do not use Kibana and instead call machine learning APIs directly, you must have the
index privileges listed above as well as <code class="literal">machine_learning_admin</code> or <code class="literal">machine_learning_user</code> built-in roles.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">machine_learning_admin</code> and <code class="literal">machine_learning_user</code> roles grant
access to the machine learning features in all Kibana spaces. Therefore, when you use Kibana,
use custom roles instead and set your Kibana privileges appropriately for each
space.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
</span>
<span class="next">
<a href="ml-getting-started.html">Getting started with machine learning »</a>
</span>
</div>
</div>
</body>
</html>
