<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Learn configuration options for Elastic Serverless Forwarder and how to transform your AWS data as it is collected from Amazon Web Services (AWS).">
<meta name="keywords" content="serverless">
<title>Use AWS Secrets Manager | Observability Guide [7.16] | Elastic</title>
<meta class="elastic" name="content" content="Use AWS Secrets Manager | Observability Guide [7.16]">

<link rel="home" href="index.html" title="Observability Guide [7.16]"/>
<link rel="up" href="aws-elastic-serverless-forwarder-configuration.html" title="Configuration options for Elastic Serverless Forwarder"/>
<link rel="prev" href="lambda-policy-cloudwatch.html" title="Lambda resource-based policy for CloudWatch Logs subscription filter input"/>
<link rel="next" href="aws-serverless-route-service-logs.html" title="Route AWS service logs"/>
<meta class="elastic" name="product_version" content="7.16"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/7.16"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="7.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="lambda-policy-cloudwatch.html">« Lambda resource-based policy for CloudWatch Logs subscription filter input</a>
</span>
<span class="next">
<a href="aws-serverless-route-service-logs.html">Route AWS service logs »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Observability Guide [7.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="add-observability-data.html">Send data to Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="aws-elastic-serverless-forwarder.html">Elastic Serverless Forwarder for AWS</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="aws-elastic-serverless-forwarder-configuration.html">Configuration options for Elastic Serverless Forwarder</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Use AWS Secrets Manager</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/7.16/docs/en/observability/aws-elastic-serverless-forwarder-configuration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="use-secrets-manager"></a>Use AWS Secrets Manager</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/7.16/docs/en/observability/aws-elastic-serverless-forwarder-configuration.asciidoc">edit</a></div>
</div></div></div>
<p>AWS Secrets Manager enables you to replace hardcoded credentials in your code, including passwords, with an API call to Secrets Manager to retrieve the secret programmatically. For more info, refer to the <a href="https://docs.aws.amazon.com/secretsmanager/index.html" class="ulink" target="_top">AWS Secrets Manager documentation</a>.</p>
<p>There are 2 types of secrets that can be used:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
SecretString (plain text or key/value pairs)
</li>
<li class="listitem">
SecretBinary
</li>
</ul>
</div>
<p>The following code shows API calls to AWS Secrets Manager:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: "s3-sqs"
    id: "arn:aws:sqs:%REGION%:%ACCOUNT%:%QUEUENAME%"
    outputs:
      - type: "elasticsearch"
        args:
          elasticsearch_url: "arn:aws:secretsmanager:eu-central-1:123456789:secret:es_url"
          username: "arn:aws:secretsmanager:eu-west-1:123456789:secret:es_secrets:username"
          password: "arn:aws:secretsmanager:eu-west-1:123456789:secret:es_secrets:password"
          es_datastream_name: "logs-generic-default"</pre>
</div>
<p>To use a <span class="strong strong"><strong>plain text</strong></span> or <span class="strong strong"><strong>binary</strong></span> secret, note the following format for the ARN:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">arn:aws:secretsmanager:AWS_REGION:AWS_ACCOUNT_ID:secret:SECRET_NAME</pre>
</div>
<p>In order to use a <span class="strong strong"><strong>key/value</strong></span> pair secret, you need to provide the key at the end of the arn, as per:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">arn:aws:secretsmanager:AWS_REGION:AWS_ACCOUNT_ID:secret:SECRET_NAME:SECRET_KEY</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Secrets from different regions are supported, but the only version currently retrieved for a secret is <code class="literal">AWSCURRENT</code>.
</li>
<li class="listitem">
You cannot use the same secret for both plain text and key/value pairs.
</li>
<li class="listitem">
Secrets are case-sensitive.
</li>
<li class="listitem">
Any configuration error or typo in the <code class="literal">config.yaml</code> file will be ignored (or exceptions raised) and secrets will not be retrieved.
</li>
<li class="listitem">
Keys must exist in the AWS Secrets Manager.
</li>
<li class="listitem">
Empty values for a given key are not allowed.
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="lambda-policy-cloudwatch.html">« Lambda resource-based policy for CloudWatch Logs subscription filter input</a>
</span>
<span class="next">
<a href="aws-serverless-route-service-logs.html">Route AWS service logs »</a>
</span>
</div>
</body>
</html>
