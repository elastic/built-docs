<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Step 4: Configure Heartbeat location | Observability Guide [7.9] | Elastic</title>
<meta class="elastic" name="content" content="Step 4: Configure Heartbeat location | Observability Guide [7.9]">

<link rel="home" href="index.html" title="Observability Guide [7.9]"/>
<link rel="up" href="ingest-uptime.html" title="Ingest uptime data"/>
<link rel="prev" href="heartbeat-configuration.html" title="Step 3: Configure Heartbeat monitors"/>
<link rel="next" href="set-heartbeat-assets.html" title="Step 5: Set up assets"/>
<meta class="elastic" name="product_version" content="7.9"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/7.9"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="7.9"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Observability Guide [7.9]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="add-observability-data.html">Send data to Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ingest-uptime.html">Ingest uptime data</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="heartbeat-configuration.html">« Step 3: Configure Heartbeat monitors</a>
</span>
<span class="next">
<a href="set-heartbeat-assets.html">Step 5: Set up assets »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="configure-heartbeat-location"></a>Step 4: Configure Heartbeat location<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/7.9/docs/en/observability/ingest-uptime.asciidoc">edit</a></h3>
</div></div></div>
<p>Heartbeat can be deployed in multiple locations so that you can detect
differences in availability and response times across those locations.
Configure the Heartbeat location to allow Kibana to display location-specific
information on Uptime maps and perform Uptime anomaly detection based
on location.</p>
<p>To configure the location of a Heartbeat instance, modify the
<code class="literal">add_observer_metadata</code> processor in <code class="literal">heartbeat.yml</code>.  The following
example specifies the <code class="literal">geo.name</code> of the <code class="literal">add_observer_metadata</code> processor as
<code class="literal">us-east-1a</code>:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml"># ============================ Processors ============================

processors:
  - add_observer_metadata:
      # Optional, but recommended geo settings for the location Heartbeat is running in
      geo: <a id="CO17-1"></a><i class="conum" data-value="1"></i>
        # Token describing this location
        name: us-east-1a <a id="CO17-2"></a><i class="conum" data-value="2"></i>
        # Lat, Lon "
        #location: "37.926868, -78.024902" <a id="CO17-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Uncomment the <code class="literal">geo</code> setting.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Uncomment <code class="literal">name</code> and assign the name of the location of the Heartbeat server.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO17-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Optionally uncomment <code class="literal">location</code> and assign the latitude and longitude.</p>
</td>
</tr>
</table>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To test your configuration file, change to the directory where the Heartbeat binary
is installed, and run Heartbeat in the foreground with the following options specified:
<code class="literal">./heartbeat test config -e</code>. Make sure your config files are in the path expected by
Heartbeat (see <a href="/guide/en/beats/heartbeat/7.9/directory-layout.html" class="ulink" target="_top">Directory layout</a>), or use the
<code class="literal">-c</code> flag to specify the path to the config file.</p>
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="heartbeat-configuration.html">« Step 3: Configure Heartbeat monitors</a>
</span>
<span class="next">
<a href="set-heartbeat-assets.html">Step 5: Set up assets »</a>
</span>
</div>
</div>
</body>
</html>
