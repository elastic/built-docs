<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Get started with application traces and APM | Elastic Observability [8.11] | Elastic</title>
<meta class="elastic" name="content" content="Get started with application traces and APM | Elastic Observability [8.11]">

<link rel="home" href="index.html" title="Elastic Observability [8.11]"/>
<link rel="up" href="observability-get-started.html" title="Get started with Elastic Observability"/>
<link rel="prev" href="logs-metrics-get-started.html" title="Get started with logs and metrics"/>
<link rel="next" href="splunk-get-started.html" title="Get started with data from Splunk"/>
<meta class="elastic" name="product_version" content="8.11"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.11"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.11"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [8.11]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-get-started.html">Get started with Elastic Observability</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="logs-metrics-get-started.html">« Get started with logs and metrics</a>
</span>
<span class="next">
<a href="splunk-get-started.html">Get started with data from Splunk »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="traces-get-started"></a>Get started with application traces and APM<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.11/docs/en/observability/traces-get-started.asciidoc">edit</a></h2>
</div></div></div>

<p>This guide describes how to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Collect Application Performance Monitoring (APM) data
</li>
<li class="listitem">
Send APM data to the Elastic Stack
</li>
<li class="listitem">
Explore and visualize the data in real-time
</li>
</ul>
</div>
<p>For feedback and questions, please contact us in the <a href="https://discuss.elastic.co/" class="ulink" target="_top">discuss forum</a>.</p>
<h4><a id="traces-prereqs"></a>Prerequisites<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.11/docs/en/observability/traces-get-started.asciidoc">edit</a></h4>
<p>To follow the steps in this guide, you need an Elastic Stack deployment that includes:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Elasticsearch for storing and searching data
</li>
<li class="listitem">
Kibana for visualizing and managing data
</li>
<li class="listitem">
Kibana user with <code class="literal">All</code> privileges on Fleet and Integrations. Since many
Integrations assets are shared across spaces, users need the Kibana privileges
in all spaces.
</li>
<li class="listitem">
Integrations Server (included by default in every Elasticsearch Service deployment)
</li>
</ul>
</div>
<p>To get started quickly, spin up a deployment of our hosted Elasticsearch Service. The Elasticsearch Service is
available on AWS, GCP, and Azure. <a href="/cloud/elasticsearch-service/signup?page=docs&amp;placement=docs-body" class="ulink" target="_top">Try it out for free</a>.</p>
<h4><a id="add-apm-integration"></a>Step 1: Configure the APM integration<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.11/docs/en/observability/traces-get-started.asciidoc">edit</a></h4>
<p>Elastic Cloud runs a hosted version of Integrations Server that includes the APM integration.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In Kibana, navigate to <span class="strong strong"><strong>Fleet</strong></span> &gt; <span class="strong strong"><strong>Agent policies</strong></span> and select the <span class="strong strong"><strong>Elastic Cloud agent policy</strong></span>.
This is the default agent policy for Elastic Agents hosted on Elastic Cloud.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="./images/cloud-agent-policy.png" alt="Elastic Cloud agent policy">
</div>
</div>
</li>
<li class="listitem">
<p>Next to <span class="strong strong"><strong>Elastic APM</strong></span> in the <span class="strong strong"><strong>Actions</strong></span> column,
select <span class="strong strong"><strong>Edit integration</strong></span> to configure the APM integration.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="./images/cloud-edit-apm.png" alt="Edit the APM integration">
</div>
</div>
</li>
<li class="listitem">
Make a note of the predefined URL that the APM Server is listening on&#8212;&#8203;you&#8217;ll
need this in the next step.
</li>
<li class="listitem">
If you made any changes to your configuration, click <span class="strong strong"><strong>save and continue</strong></span>.
</li>
</ol>
</div>
<h4><a id="add-apm-integration-agents"></a>Step 2: Install APM agents<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.11/docs/en/observability/traces-get-started.asciidoc">edit</a></h4>
<p>APM agents are written in the same language as your service.
To monitor a new service, you must install the agent and configure it with a service name,
APM Server host, and Secret token.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Service name</strong></span>: The APM integration maps an instrumented service&#8217;s name–defined in each APM agent&#8217;s configuration–
to the index that its data is stored in Elasticsearch.
Service names are case-insensitive and must be unique.
For example, you cannot have a service named <code class="literal">Foo</code> and another named <code class="literal">foo</code>.
Special characters will be removed from service names and replaced with underscores (<code class="literal">_</code>).
</li>
<li class="listitem">
<span class="strong strong"><strong>APM Server URL</strong></span>: The host and port that APM Server listens for events on.
This should match the host and port defined when setting up the APM integration.
</li>
<li class="listitem">
<span class="strong strong"><strong>Secret token</strong></span>: Authentication method for APM agent and APM Server communication.
This should match the secret token defined when setting up the APM integration.
</li>
</ul>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can edit your APM integration settings if you need to change the APM Server URL
or secret token to match your APM agents.</p>
</div>
</div>
<div class="tabs" data-tab-group="apm-agent">
  <div role="tablist" aria-label="Install">
    <button role="tab"
            aria-selected="false"
            aria-controls="go-tab-install"
            id="go-install">
      Go
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="ios-tab-install"
            id="ios-install"
            tabindex="-1">
      iOS
    </button>
    <button role="tab"
            aria-selected="true"
            aria-controls="java-tab-install"
            id="java-install"
            tabindex="-1">
      Java
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="net-tab-install"
            id="net-install"
            tabindex="-1">
      .NET
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="node-tab-install"
            id="node-install"
            tabindex="-1">
      Node.js
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="php-tab-install"
            id="php-install"
            tabindex="-1">
      PHP
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="python-tab-install"
            id="python-install"
            tabindex="-1">
      Python
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="ruby-tab-install"
            id="ruby-install"
            tabindex="-1">
      Ruby
    </button>
    <button role="tab"
        aria-selected="false"
        aria-controls="rum-tab-install"
        id="rum-install"
        tabindex="-1">
      RUM
    </button>
    <button role="tab"
        aria-selected="false"
        aria-controls="otel-tab-install"
        id="otel-install"
        tabindex="-1">
      OpenTelemetry
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="go-tab-install"
       aria-labelledby="go-install"
       hidden="">
<p><span class="strong strong"><strong>Install the agent</strong></span></p>
<p>Install the APM agent packages for Go.</p>
<div class="pre_wrapper lang-go">
<pre class="programlisting prettyprint lang-go">go get go.elastic.co/apm</pre>
</div>
<p><span class="strong strong"><strong>Configure the agent</strong></span></p>
<p>Agents are libraries that run inside of your application process.
APM services are created programmatically based on the executable file name, or the <code class="literal">ELASTIC_APM_SERVICE_NAME</code> environment variable.</p>
<div class="pre_wrapper lang-go">
<pre class="programlisting prettyprint lang-go"># Initialize using environment variables:

# Set the service name. Allowed characters: a-z, A-Z, 0-9, -, _, and space.
# If ELASTIC_APM_SERVICE_NAME is not specified, the executable name will be used.
export ELASTIC_APM_SERVICE_NAME=

# Set custom APM Server URL. Default: http://localhost:8200.
export ELASTIC_APM_SERVER_URL=

# Use if APM Server requires a token
export ELASTIC_APM_SECRET_TOKEN=</pre>
</div>
<p><span class="strong strong"><strong>Instrument your application</strong></span></p>
<p>Instrument your Go application by using one of the provided instrumentation modules or by using the tracer API directly.</p>
<div class="pre_wrapper lang-go">
<pre class="programlisting prettyprint lang-go">import (
	"net/http"

	"go.elastic.co/apm/module/apmhttp"
)

func main() {
	mux := http.NewServeMux()
	...
	http.ListenAndServe(":8080", apmhttp.Wrap(mux))
}</pre>
</div>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/go/2.x/supported-tech.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/go/2.x/configuration.html" class="ulink" target="_top">Advanced configuration</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/go/2.x/getting-started.html" class="ulink" target="_top">Detailed guide to instrumenting Go source code</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="ios-tab-install"
       aria-labelledby="ios-install"
       hidden="">
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in technical preview and may be changed or removed in a future release. Elastic will apply best effort to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p><span class="strong strong"><strong>Add the agent dependency to your project</strong></span></p>
<p>Add the Elastic APM iOS Agent as a
<a href="https://developer.apple.com/documentation/swift_packages/adding_package_dependencies_to_your_app" class="ulink" target="_top">package dependency</a>
to your Xcode project or your <code class="literal">Package.swift</code>:</p>
<div class="pre_wrapper lang-swift">
<pre class="programlisting prettyprint lang-swift">Package(
    dependencies:[
        .package(name: "iOSAgent", url: "git@github.com:elastic/apm-agent-ios.git", .branch("main")),
    ],
  targets:[
    .target(
        name: "MyApp",
        dependencies: [
            .product(name: "iOSAgent", package: "iOSAgent")
        ]
    ),
])</pre>
</div>
<p><span class="strong strong"><strong>Initialize the agent</strong></span></p>
<p>If you&#8217;re using <code class="literal">SwiftUI</code> to build your app, add the following to <code class="literal">App.swift</code>:</p>
<div class="pre_wrapper lang-swift">
<pre class="programlisting prettyprint lang-swift">import SwiftUI
import iOSAgent

@main
struct MyApp: App {
    init() {
        var config = AgentConfiguration()
        config.collectorAddress = "127.0.0.1" <a id="CO1-1"></a><i class="conum" data-value="1"></i>
        config.collectorPort = 8200 <a id="CO1-2"></a><i class="conum" data-value="2"></i>
        config.collectorTLS = false <a id="CO1-3"></a><i class="conum" data-value="3"></i>
        config.secretToken = "&lt;secret token&gt;" <a id="CO1-4"></a><i class="conum" data-value="4"></i>
        Agent.start(with: config)
    }
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>APM Server URL or IP address</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>APM Server port number</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Enable TLS for Open telemetry exporters</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Set secret token for APM server connection</p>
</td>
</tr>
</table>
</div>
<p>If you&#8217;re not using <code class="literal">SwiftUI</code>, you can add the same thing to your <code class="literal">AppDelegate</code> file:</p>
<p><code class="literal">AppDelegate.swift</code></p>
<div class="pre_wrapper lang-swift">
<pre class="programlisting prettyprint lang-swift">import UIKit
import iOSAgent
@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
        var config = AgentConfiguration()
        config.collectorAddress = "127.0.0.1" <a id="CO2-1"></a><i class="conum" data-value="1"></i>
        config.collectorPort = 8200 <a id="CO2-2"></a><i class="conum" data-value="2"></i>
        config.collectorTLS = false <a id="CO2-3"></a><i class="conum" data-value="3"></i>
        config.secretToken = "&lt;secret token&gt;" <a id="CO2-4"></a><i class="conum" data-value="4"></i>
        Agent.start(with: config)
        return true
    }
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>APM Server URL or IP address</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>APM Server port number</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Enable TLS for Open telemetry exporters</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Set secret token for APM server connection</p>
</td>
</tr>
</table>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="java-tab-install"
       aria-labelledby="java-install">
<p><span class="strong strong"><strong>Download the APM agent</strong></span></p>
<p>Download the agent jar from <a href="http://search.maven.org/#search%7Cga%7C1%7Ca%3Aelastic-apm-agent" class="ulink" target="_top">Maven Central</a>.
Do not add the agent as a dependency to your application.</p>
<p><span class="strong strong"><strong>Start your application with the <code class="literal">javaagent</code> flag</strong></span></p>
<p>Add the <code class="literal">-javaagent</code> flag and configure the agent with system properties.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set required service name
</li>
<li class="listitem">
Set custom APM Server URL (default: <a href="http://localhost:8200" class="ulink" target="_top">http://localhost:8200</a>)
</li>
<li class="listitem">
Set the base package of your application
</li>
</ul>
</div>
<div class="pre_wrapper lang-java">
<pre class="programlisting prettyprint lang-java">java -javaagent:/path/to/elastic-apm-agent-&lt;version&gt;.jar \
     -Delastic.apm.service_name=my-application \
     -Delastic.apm.server_urls=http://localhost:8200 \
     -Delastic.apm.secret_token= \
     -Delastic.apm.application_packages=org.example \
     -jar my-application.jar</pre>
</div>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/java/1.x/supported-technologies-details.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/java/1.x/configuration.html" class="ulink" target="_top">Advanced configuration</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="net-tab-install"
       aria-labelledby="net-install"
       hidden="">
<p><span class="strong strong"><strong>Download the APM agent</strong></span></p>
<p>Add the agent packages from <a href="https://www.nuget.org/packages?q=Elastic.apm" class="ulink" target="_top">NuGet</a> to your .NET application.
There are multiple NuGet packages available for different use cases.</p>
<p>For an ASP.NET Core application with Entity Framework Core, download the
<a href="https://www.nuget.org/packages/Elastic.Apm.NetCoreAll" class="ulink" target="_top">Elastic.Apm.NetCoreAll</a> package.
This package will automatically add every agent component to your application.</p>
<p>To minimize the number of dependencies, you can use the
<a href="https://www.nuget.org/packages/Elastic.Apm.AspNetCore" class="ulink" target="_top">Elastic.Apm.AspNetCore</a> package for just ASP.NET Core monitoring, or the
<a href="https://www.nuget.org/packages/Elastic.Apm.EntityFrameworkCore" class="ulink" target="_top">Elastic.Apm.EfCore</a> package for just Entity Framework Core monitoring.</p>
<p>If you only want to use the public agent API for manual instrumentation, use the
<a href="https://www.nuget.org/packages/Elastic.Apm" class="ulink" target="_top">Elastic.Apm</a> package.</p>
<p><span class="strong strong"><strong>Add the agent to the application</strong></span></p>
<p>For an ASP.NET Core application with the <code class="literal">Elastic.Apm.NetCoreAll</code> package,
call the <code class="literal">UseAllElasticApm</code> method in the <code class="literal">Configure</code> method within the <code class="literal">Startup.cs</code> file:</p>
<div class="pre_wrapper lang-dotnet">
<pre class="programlisting prettyprint lang-dotnet">public class Startup
{
  public void Configure(IApplicationBuilder app, IHostingEnvironment env)
  {
    app.UseAllElasticApm(Configuration);
    //…rest of the method
  }
  //…rest of the class
}</pre>
</div>
<p>Passing an <code class="literal">IConfiguration</code> instance is optional and by doing so,
the agent will read config settings through this <code class="literal">IConfiguration</code> instance, for example,
from the <code class="literal">appsettings.json</code> file:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "ElasticApm": {
    "SecretToken": "",
    "ServerUrls": "http://localhost:8200", //Set custom APM Server URL (default: http://localhost:8200)
    "ServiceName" : "MyApp", //allowed characters: a-z, A-Z, 0-9, -, _, and space. Default is the entry assembly of the application
  }
}</pre>
</div>
<p>If you don’t pass an <code class="literal">IConfiguration</code> instance to the agent, for example, in a non-ASP.NET Core application,
you can configure the agent with environment variables.
See the agent reference for more information.</p>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/dotnet/1.x/supported-technologies.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/dotnet/1.x/configuration.html" class="ulink" target="_top">Advanced configuration</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="node-tab-install"
       aria-labelledby="node-install"
       hidden="">
<p><span class="strong strong"><strong>Install the APM agent</strong></span></p>
<p>Install the APM agent for Node.js as a dependency to your application.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">npm install elastic-apm-node --save</pre>
</div>
<p><span class="strong strong"><strong>Configure the agent</strong></span></p>
<p>Agents are libraries that run inside of your application process. APM services are created programmatically based on the <code class="literal">serviceName</code>.
This agent supports a variety of frameworks but can also be used with your custom stack.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">// Add this to the VERY top of the first file loaded in your app
var apm = require('elastic-apm-node').start({
  // Override service name from package.json
  // Allowed characters: a-z, A-Z, 0-9, -, _, and space
  serviceName: '',

  // Use if APM Server requires a token
  secretToken: '',

  // Set custom APM Server URL (default: http://localhost:8200)
  serverUrl: ''
})</pre>
</div>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/nodejs/4.x/supported-technologies.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/nodejs/4.x/advanced-setup.html" class="ulink" target="_top">Babel/ES Modules</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/nodejs/4.x/configuring-the-agent.html" class="ulink" target="_top">Advanced configuration</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="php-tab-install"
       aria-labelledby="php-install"
       hidden="">
<p><span class="strong strong"><strong>Install the agent</strong></span></p>
<p>Install the PHP agent using one of the <a href="https://github.com/elastic/apm-agent-php/releases" class="ulink" target="_top">published packages</a>.</p>
<p>To use the RPM Package (RHEL/CentOS and Fedora):</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">rpm -ivh &lt;package-file&gt;.rpm</pre>
</div>
<p>To use the DEB package (Debian and Ubuntu):</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">dpkg -i &lt;package-file&gt;.deb</pre>
</div>
<p>To use the APK package (Alpine):</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">apk add --allow-untrusted &lt;package-file&gt;.apk</pre>
</div>
<p>If you can’t find your distribution,
you can install the agent by <a href="/guide/en/apm/agent/php/1.x/setup.html" class="ulink" target="_top">building it from the source</a>.</p>
<p><span class="strong strong"><strong>Configure the agent</strong></span></p>
<p>Configure your agent inside of the <code class="literal">php.ini</code> file:</p>
<div class="pre_wrapper lang-ini">
<pre class="programlisting prettyprint lang-ini">elastic_apm.server_url=http://localhost:8200
elastic_apm.secret_token=SECRET_TOKEN
elastic_apm.service_name="My-service"</pre>
</div>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/php/1.x/supported-technologies.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/php/1.x/configuration.html" class="ulink" target="_top">Configuration</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="python-tab-install"
       aria-labelledby="python-install"
       hidden="">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Django
</span>
</dt>
<dd>
<p><span class="strong strong"><strong>Install the APM agent</strong></span></p>
<p>Install the APM agent for Python as a dependency.</p>
<div class="pre_wrapper lang-python">
<pre class="programlisting prettyprint lang-python">$ pip install elastic-apm</pre>
</div>
<p><span class="strong strong"><strong>Configure the agent</strong></span></p>
<p>Agents are libraries that run inside of your application process.
APM services are created programmatically based on the <code class="literal">SERVICE_NAME</code>.</p>
<div class="pre_wrapper lang-python">
<pre class="programlisting prettyprint lang-python"># Add the agent to the installed apps
INSTALLED_APPS = (
  'elasticapm.contrib.django',
  # ...
)

ELASTIC_APM = {
  # Set required service name. Allowed characters:
  # a-z, A-Z, 0-9, -, _, and space
  'SERVICE_NAME': '',

  # Use if APM Server requires a token
  'SECRET_TOKEN': '',

  # Set custom APM Server URL (default: http://localhost:8200)
  'SERVER_URL': '',
}

# To send performance metrics, add our tracing middleware:
MIDDLEWARE = (
  'elasticapm.contrib.django.middleware.TracingMiddleware',
  #...
)</pre>
</div>
</dd>
<dt>
<span class="term">
Flask
</span>
</dt>
<dd>
<p><span class="strong strong"><strong>Install the APM agent</strong></span></p>
<p>Install the APM agent for Python as a dependency.</p>
<div class="pre_wrapper lang-python">
<pre class="programlisting prettyprint lang-python">$ pip install elastic-apm[flask]</pre>
</div>
<p><span class="strong strong"><strong>Configure the agent</strong></span></p>
<p>Agents are libraries that run inside of your application process.
APM services are created programmatically based on the <code class="literal">SERVICE_NAME</code>.</p>
<div class="pre_wrapper lang-python">
<pre class="programlisting prettyprint lang-python"># initialize using environment variables
from elasticapm.contrib.flask import ElasticAPM
app = Flask(__name__)
apm = ElasticAPM(app)

# or configure to use ELASTIC_APM in your application settings
from elasticapm.contrib.flask import ElasticAPM
app.config['ELASTIC_APM'] = {
  # Set required service name. Allowed characters:
  # a-z, A-Z, 0-9, -, _, and space
  'SERVICE_NAME': '',

  # Use if APM Server requires a token
  'SECRET_TOKEN': '',

  # Set custom APM Server URL (default: http://localhost:8200)
  'SERVER_URL': '',
}

apm = ElasticAPM(app)</pre>
</div>
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/python/6.x/supported-technologies.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/python/6.x/configuration.html" class="ulink" target="_top">Advanced configuration</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="ruby-tab-install"
       aria-labelledby="ruby-install"
       hidden="">
<p><span class="strong strong"><strong>Install the APM agent</strong></span></p>
<p>Add the agent to your Gemfile.</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby">gem 'elastic-apm'</pre>
</div>
<p><span class="strong strong"><strong>Configure the agent</strong></span></p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Ruby on Rails
</span>
</dt>
<dd>
<p>APM is automatically started when your app boots.
Configure the agent by creating the config file <code class="literal">config/elastic_apm.yml</code>:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby"># config/elastic_apm.yml:

# Set service name - allowed characters: a-z, A-Z, 0-9, -, _ and space
# Defaults to the name of your Rails app
service_name: 'my-service'

# Use if APM Server requires a token
secret_token: ''

# Set custom APM Server URL (default: http://localhost:8200)
server_url: 'http://localhost:8200'</pre>
</div>
</dd>
<dt>
<span class="term">
Rack
</span>
</dt>
<dd>
<p>For Rack or a compatible framework, like Sinatra, include the middleware in your app and start the agent.</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby"># config.ru
  require 'sinatra/base'

  class MySinatraApp &lt; Sinatra::Base
    use ElasticAPM::Middleware

    # ...
  end

  ElasticAPM.start(
    app: MySinatraApp, # required
    config_file: '' # optional, defaults to config/elastic_apm.yml
  )

  run MySinatraApp

  at_exit { ElasticAPM.stop }</pre>
</div>
<p><span class="strong strong"><strong>Create a config file</strong></span></p>
<p>Create a config file config/elastic_apm.yml:</p>
<div class="pre_wrapper lang-ruby">
<pre class="programlisting prettyprint lang-ruby"># config/elastic_apm.yml:

# Set service name - allowed characters: a-z, A-Z, 0-9, -, _ and space
# Defaults to the name of your Rack app's class.
service_name: 'my-service'

# Use if APM Server requires a token
secret_token: ''

# Set custom APM Server URL (default: http://localhost:8200)
server_url: 'http://localhost:8200'</pre>
</div>
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/ruby/4.x/supported-technologies.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/ruby/4.x/configuration.html" class="ulink" target="_top">Advanced configuration</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
      role="tabpanel"
      id="rum-tab-install"
      aria-labelledby="rum-install"
      hidden="">
<p><span class="strong strong"><strong>Enable Real User Monitoring support in APM Server</strong></span></p>
<p>APM Server disables RUM support by default.
To enable it, set <code class="literal">apm-server.rum.enabled: true</code> in your APM Server configuration file.</p>
<p><span class="strong strong"><strong>Set up the agent</strong></span></p>
<p>Once RUM support enabled, you can set up the RUM agent.
There are two ways to do this: add the agent as a dependency,
or set it up with <code class="literal">&lt;script&gt;</code> tags.</p>
<p><span class="strong strong"><strong>Set up the agent as a dependency</strong></span></p>
<p>You can install the agent as a dependency to your application with <code class="literal">npm install @elastic/apm-rum --save</code>.</p>
<p>The agent can then be initialized and configured in your application like this:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">import { init as initApm } from '@elastic/apm-rum'
var apm = initApm({

  // Set required service name (allowed characters: a-z, A-Z, 0-9, -, _, and space)
  serviceName: 'your-app-name',

  // Set custom APM Server URL (default: http://localhost:8200)
  serverUrl: '',

  // Set service version (required for source map feature)
  serviceVersion: ''
})</pre>
</div>
<p>Framework integrations, like React or Angular, have custom dependencies.
See <a href="/guide/en/apm/agent/rum-js/5.x/framework-integrations.html" class="ulink" target="_top">framework integrations</a> for more information.</p>
<p><span class="strong strong"><strong>Set up the agent with <code class="literal">&lt;script&gt;</code> tags</strong></span></p>
<p>Alternatively, you can use <code class="literal">&lt;script&gt;</code> tags to set up and configure the agent.
Add a <code class="literal">&lt;script&gt;</code> tag to the HTML page and use the <code class="literal">elasticApm</code> global object to load and initialize the agent.
Don&#8217;t forget to download the latest version of the RUM agent from
<a href="https://github.com/elastic/apm-agent-rum-js/releases/latest" class="ulink" target="_top">GitHub</a> or
<a href="https://unpkg.com/@elastic/apm-rum/dist/bundles/elastic-apm-rum.umd.min.js" class="ulink" target="_top">UNPKG</a>,
and host the file on your Server/CDN before deploying to production.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">&lt;script src="https://your-cdn-host.com/path/to/elastic-apm-rum.umd.min.js" crossorigin&gt;&lt;/script&gt;
&lt;script&gt;
  elasticApm.init({
    serviceName: 'your-app-name',
    serverUrl: 'http://localhost:8200',
  })
&lt;/script&gt;</pre>
</div>
<p><span class="strong strong"><strong>Learn more in the agent reference</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/rum-js/5.x/supported-technologies.html" class="ulink" target="_top">Supported technologies</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/rum-js/5.x/configuration.html" class="ulink" target="_top">Advanced configuration</a>
</li>
</ul>
</div>
  </div>
  <div tabindex="0"
      role="tabpanel"
      id="otel-tab-install"
      aria-labelledby="otel-install"
      hidden="">
<p>Elastic integrates with OpenTelemetry, allowing you to reuse your existing instrumentation
to easily send observability data to the Elastic Stack.</p>
<p>For more information on how to combine Elastic and OpenTelemetry,
see <a href="/guide/en/apm/guide/8.11/open-telemetry.html" class="ulink" target="_top">OpenTelemetry integration</a>.</p>
  </div>
</div>
<h4><a id="view-apm-integration-data"></a>Step 3: View your data<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.11/docs/en/observability/traces-get-started.asciidoc">edit</a></h4>
<p>Back in Kibana, under Observability, select APM.
You should see application performance monitoring data flowing into the Elastic Stack!</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The built-in <code class="literal">apm_user</code> role is not compatible with the APM integration
as it only provides read access to <code class="literal">apm-*</code> indices.
For a list of indices users need access to, refer to
<a href="/guide/en/apm/guide/8.11/apm-data-streams.html" class="ulink" target="_top">APM data streams</a></p>
</div>
</div>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-apm-sample-data.png" alt="APM app with data">
</div>
</div>
<p>Not seeing any data? Review our list of <a href="/guide/en/apm/guide/8.11/common-problems.html" class="ulink" target="_top">common problems</a> for helpful tips.</p>
<h4><a id="_whats_next_2"></a>What&#8217;s next?<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.11/docs/en/observability/traces-get-started.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Now that data is streaming into the Elastic Stack, take your investigation to a
deeper level! Use <a href="/observability" class="ulink" target="_top">Elastic Observability</a>
to unify your logs, metrics, uptime, and application performance data.
</li>
<li class="listitem">
Want to protect your endpoints from security threats? Try
<a href="/security" class="ulink" target="_top">Elastic Security</a>. Adding endpoint protection is
just another integration that you add to the agent policy!
</li>
<li class="listitem">
Are your eyes bleary from staring at a wall of screens?
<a href="/guide/en/observability/8.11/create-alerts.html" class="ulink" target="_top">Create alerts</a> and find out about
problems while sipping your favorite beverage poolside.
</li>
<li class="listitem">
Want Elastic to do the heavy lifting? Use machine learning to
<a href="/guide/en/observability/8.11/inspect-log-anomalies.html" class="ulink" target="_top">detect anomalies</a>.
</li>
<li class="listitem">
Got everything working like you want it? Roll out your agent policies to
other hosts by deploying Elastic Agents across your infrastructure!
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="logs-metrics-get-started.html">« Get started with logs and metrics</a>
</span>
<span class="next">
<a href="splunk-get-started.html">Get started with data from Splunk »</a>
</span>
</div>
</div>
</body>
</html>
