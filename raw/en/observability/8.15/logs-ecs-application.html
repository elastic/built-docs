<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ECS formatted application logs | Elastic Observability [8.15] | Elastic</title>
<meta class="elastic" name="content" content="ECS formatted application logs | Elastic Observability [8.15]">

<link rel="home" href="index.html" title="Elastic Observability [8.15]"/>
<link rel="up" href="application-logs.html" title="Stream application logs"/>
<link rel="prev" href="logs-plaintext.html" title="Plaintext application logs"/>
<link rel="next" href="logs-send-application.html" title="APM agent log sending"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.15"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.15"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="logs-plaintext.html">« Plaintext application logs</a>
</span>
<span class="next">
<a href="logs-send-application.html">APM agent log sending »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="logs-checklist.html">Log monitoring</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="application-logs.html">Stream application logs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>ECS formatted application logs</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="logs-ecs-application"></a>ECS formatted application logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h3>
</div></div></div>
<p>Logs formatted in Elastic Common Schema (ECS) don&#8217;t require manual parsing, and the configuration can be reused across applications. ECS-formatted logs, when paired with an APM agent, allow you to correlate logs to easily view logs that belong to a particular trace.</p>
<p>You can format your logs in ECS format the following ways:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="logs-ecs-application.html#ecs-loggers" title="ECS loggers">ECS loggers</a>: plugins for your logging libraries that reformat your logs into ECS format.
</li>
<li class="listitem">
<a class="xref" href="logs-ecs-application.html#apm-agent-ecs-reformatting" title="APM agent ECS reformatting">APM agent ECS reformatting</a>: Java, Ruby, and Python APM agents automatically reformat application logs to ECS format without a logger.
</li>
</ul>
</div>
<h4><a id="ecs-loggers"></a>ECS loggers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h4>
<p>ECS loggers reformat your application logs into ECS-compatible JSON, removing the need for manual parsing.
ECS loggers require Filebeat or Elastic Agent configured to monitor and capture application logs.
In addition, pairing ECS loggers with your framework&#8217;s APM agent allows you to correlate logs to easily view logs that belong to a particular trace.</p>
<h5><a id="get-started-ecs-logging"></a>Get started with ECS loggers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h5>
<p>For more information on adding an ECS logger to your application, refer to the guide for your framework:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/ecs-logging/dotnet/master/setup.html" class="ulink" target="_top">.NET</a>
</li>
<li class="listitem">
Go: <a href="/guide/en/ecs-logging/go-zap/master/setup.html" class="ulink" target="_top">zap</a>, <a href="/guide/en/ecs-logging/go-logrus/master/setup.html" class="ulink" target="_top">logrus</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/java/1.x/setup.html" class="ulink" target="_top">Java</a>
</li>
<li class="listitem">
Node.js: <a href="/guide/en/ecs-logging/nodejs/master/morgan.html" class="ulink" target="_top">morgan</a>, <a href="/guide/en/ecs-logging/nodejs/master/pino.html" class="ulink" target="_top">pino</a>, <a href="/guide/en/ecs-logging/nodejs/master/winston.html" class="ulink" target="_top">winston</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/php/master/setup.html" class="ulink" target="_top">PHP</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/python/master/installation.html" class="ulink" target="_top">Python</a>
</li>
<li class="listitem">
<a href="/guide/en/ecs-logging/ruby/master/setup.html" class="ulink" target="_top">Ruby</a>
</li>
</ul>
</div>
<h4><a id="apm-agent-ecs-reformatting"></a>APM agent ECS reformatting<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h4>
<p>Java, Ruby, and Python APM agents can automatically reformat application logs to ECS format without an ECS logger or the need to modify your application. The APM agent also allows for log correlation so you can easily view logs that belong to a particular trace.</p>
<p>To set up log ECS reformatting:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="logs-ecs-application.html#enable-log-ecs-reformatting" title="Enable log ECS reformatting">Enable APM agent reformatting</a>
</li>
<li class="listitem">
<a class="xref" href="logs-ecs-application.html#ingest-ecs-logs" title="Ingest logs">Ingest logs with Filebeat or Elastic Agent</a>
</li>
<li class="listitem">
<a class="xref" href="logs-ecs-application.html#view-ecs-logs" title="View logs">View logs in Log Explorer</a>
</li>
</ol>
</div>
<h5><a id="enable-log-ecs-reformatting"></a>Enable log ECS reformatting<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h5>
<p>Log ECS reformatting is controlled by the <code class="literal">log_ecs_reformatting</code> configuration option, and is disabled by default. Refer to the guide for your framework for information on enabling:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/apm/agent/java/current/config-logging.html#config-log-ecs-reformatting" class="ulink" target="_top">Java</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/ruby/current/configuration.html#config-log-ecs-formatting" class="ulink" target="_top">Ruby</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/python/current/configuration.html#config-log_ecs_reformatting" class="ulink" target="_top">Python</a>
</li>
</ul>
</div>
<h5><a id="ingest-ecs-logs"></a>Ingest logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h5>
<p>After enabling log ECS reformatting, send your application logs to your project using one of the following shipping tools:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="logs-ecs-application.html#ingest-ecs-logs-with-filebeat" title="Ingest logs with Filebeat">Filebeat</a>: A lightweight data shipper that sends log data to your project.
</li>
<li class="listitem">
<a class="xref" href="logs-ecs-application.html#ingest-ecs-logs-with-agent" title="Ingest logs with Elastic Agent">Elastic Agent</a>: A single agent for logs, metrics, security data, and threat prevention. With Fleet, you can centrally manage Elastic Agent policies and lifecycles directly from your project.
</li>
</ul>
</div>
<h6><a id="ingest-ecs-logs-with-filebeat"></a>Ingest logs with Filebeat<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h6>
<p>Follow these steps to ingest application logs with Filebeat.</p>
<h6><a id="step-1-ecs-install-filebeat"></a>Step 1: Install Filebeat<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h6>
<p>Install Filebeat on the server you want to monitor by running the commands that align with your system:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Installation layout">
        <button role="tab"
            aria-selected="false"
            aria-controls="deb-tab-yml-location"
            id="deb-yml-location"
            tabindex="-1">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-yml-location"
            id="rpm-yml-location"
            tabindex="-1">
      RPM
    </button>
    <button role="tab"
            aria-selected="true"
            aria-controls="mac-tab-yml-location"
            id="mac-yml-location">
      macOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-yml-location"
            id="linux-yml-location"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-yml-location"
            id="win-yml-location"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-yml-location"
       aria-labelledby="mac-yml-location">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.15.0-darwin-x86_64.tar.gz
tar xzvf filebeat-8.15.0-darwin-x86_64.tar.gz</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-yml-location"
       aria-labelledby="linux-yml-location"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.15.0-linux-x86_64.tar.gz
tar xzvf filebeat-8.15.0-linux-x86_64.tar.gz</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-yml-location"
       aria-labelledby="win-yml-location"
       hidden="">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Download the Filebeat Windows zip file: https\://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.15.0-windows-x86_64.zip[https\://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.15.0-windows-x86_64.zip]
</li>
<li class="listitem">
Extract the contents of the zip file into <code class="literal">C:\Program Files</code>.
</li>
<li class="listitem">
Rename the <code class="literal">filebeat-{version}-windows-x86_64</code> directory to <code class="literal">{filebeat}</code>.
</li>
<li class="listitem">
Open a PowerShell prompt as an Administrator (right-click the PowerShell icon
and select <span class="strong strong"><strong>Run As Administrator</strong></span>).
</li>
<li class="listitem">
<p>From the PowerShell prompt, run the following commands to install
Filebeat as a Windows service:</p>
<div class="pre_wrapper lang-powershell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-powershell">PS &gt; cd 'C:\Program Files\{filebeat}'
PS C:\Program Files\{filebeat}&gt; .\install-service-filebeat.ps1</pre>
</div>
</li>
</ol>
</div>
<p>If script execution is disabled on your system, you need to set the
execution policy for the current session to allow the script to run. For
example:
<code class="literal">PowerShell.exe -ExecutionPolicy UnRestricted -File .\install-service-filebeat.ps1</code>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-yml-location"
       aria-labelledby="deb-yml-location"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https\://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.15.0-amd64.deb
sudo dpkg -i filebeat-8.15.0-amd64.deb</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-yml-location"
       aria-labelledby="rpm-yml-location"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">curl -L -O https\://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.15.0-x86_64.rpm
sudo rpm -vi filebeat-8.15.0-x86_64.rpm</pre>
</div>
  </div>
</div>
<h6><a id="step-2-ecs-connect-to-your-project"></a>Step 2: Connect to your project<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h6>
<p>Connect to your project using an API key to set up Filebeat. Set the following information in the <code class="literal">filebeat.yml</code> file:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">output.elasticsearch:
  hosts: ["your-projects-elasticsearch-endpoint"]
  api_key: "id:api_key"</pre>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Set the <code class="literal">hosts</code> to your deployment&#8217;s Elasticsearch endpoint. Copy the Elasticsearch endpoint from <span class="strong strong"><strong>Help menu (<span class="image"><img src="images/help-icon.png" alt="help icon"></span>) → Connection details</strong></span>. For example, <code class="literal">https://my-deployment.es.us-central1.gcp.cloud.es.io:443</code>.
</li>
<li class="listitem">
<p>From <span class="strong strong"><strong>Developer tools</strong></span>, run the following command to create an API key that grants <code class="literal">manage</code> permissions for the <code class="literal">cluster</code> and the <code class="literal">filebeat-*</code> indices using:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /_security/api_key
{
  "name": "filebeat_host001",
  "role_descriptors": {
    "filebeat_writer": {
      "cluster": ["manage"],
      "index": [
        {
          "names": ["filebeat-*"],
          "privileges": ["manage"]
        }
      ]
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/50.console"></div>
<p>Refer to <a href="/guide/en/beats/filebeat/8.15/beats-api-keys.html" class="ulink" target="_top">Grant access using API keys</a> for more information.</p>
</li>
</ol>
</div>
<h6><a id="step-3-ecs-configure-filebeat"></a>Step 3: Configure Filebeat<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h6>
<p>Add the following configuration to your <code class="literal">filebeat.yaml</code> file to start collecting log data.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">filebeat.inputs:
- type: filestream  <a id="CO72-1"></a><i class="conum" data-value="1"></i>
  enabled: true
  paths: /path/to/logs.log  <a id="CO72-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO72-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Reads lines from an active log file.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO72-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Paths that you want Filebeat to crawl and fetch logs from.</p>
</td>
</tr>
</table>
</div>
<h6><a id="step-4-ecs-set-up-and-start-filebeat"></a>Step 4: Set up and start Filebeat<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h6>
<p>From the Filebeat installation directory, set the <a href="/guide/en/elasticsearch/reference/8.15/index-templates.html" class="ulink" target="_top">index template</a> by running the command that aligns with your system:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Set up">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-setup"
            id="deb-setup">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-setup"
            id="rpm-setup"
            tabindex="-1">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-setup"
            id="mac-setup"
            tabindex="-1">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-setup"
            id="linux-setup"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-setup"
            id="win-setup"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-setup"
       aria-labelledby="mac-setup"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">./filebeat setup -e</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-setup"
       aria-labelledby="linux-setup"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">./filebeat setup -e</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-setup"
       aria-labelledby="win-setup"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">PS &gt; .\filebeat.exe setup -e</pre>
</div>
  </div>
    <div tabindex="0"
       role="tabpanel"
       id="deb-tab-setup"
       aria-labelledby="deb-setup">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">filebeat setup -e</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-setup"
       aria-labelledby="rpm-setup"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">filebeat setup -e</pre>
</div>
  </div>
</div>
<p>From the Filebeat installation directory, start filebeat by running the command that aligns with your system:</p>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="Start-f">
    <button role="tab"
            aria-selected="true"
            aria-controls="deb-tab-start-filebeat"
            id="deb-start-filebeat">
      DEB
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="rpm-tab-start-filebeat"
            id="rpm-start-filebeat"
            tabindex="-1">
      RPM
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="mac-tab-start-filebeat"
            id="mac-start-filebeat"
            tabindex="-1">
      MacOS
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="linux-tab-start-filebeat"
            id="linux-start-filebeat"
            tabindex="-1">
      Linux
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="win-tab-start-filebeat"
            id="win-start-filebeat"
            tabindex="-1">
      Windows
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="deb-tab-start-filebeat"
       aria-labelledby="deb-start-filebeat">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">sudo service filebeat start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use an <code class="literal">init.d</code> script to start Filebeat, you can&#8217;t specify command
line flags (see <a href="/guide/en/beats/filebeat/8.15/command-line-options.html" class="ulink" target="_top">Command reference</a>). To specify flags, start Filebeat in
the foreground.</p>
</div>
</div>
<p>Also see <a href="/guide/en/beats/filebeat/8.15/running-with-systemd.html" class="ulink" target="_top">Filebeat and systemd</a>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="rpm-tab-start-filebeat"
       aria-labelledby="rpm-start-filebeat"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">sudo service filebeat start</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you use an <code class="literal">init.d</code> script to start Filebeat, you can&#8217;t specify command
line flags (see <a href="/guide/en/beats/filebeat/8.15/command-line-options.html" class="ulink" target="_top">Command reference</a>). To specify flags, start Filebeat in
the foreground.</p>
</div>
</div>
<p>Also see <a href="/guide/en/beats/filebeat/8.15/running-with-systemd.html" class="ulink" target="_top">Filebeat and systemd</a>.</p>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="mac-tab-start-filebeat"
       aria-labelledby="mac-start-filebeat"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">./filebeat -e</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="linux-tab-start-filebeat"
       aria-labelledby="linux-start-filebeat"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">./filebeat -e</pre>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="win-tab-start-filebeat"
       aria-labelledby="win-start-filebeat"
       hidden="">
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">PS C:\Program Files\filebeat&gt; Start-Service filebeat</pre>
</div>
<p>By default, Windows log files are stored in <code class="literal">C:\ProgramData\filebeat\Logs</code>.</p>
  </div>
</div>
<h6><a id="ingest-ecs-logs-with-agent"></a>Ingest logs with Elastic Agent<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h6>
<p>Add the custom logs integration to ingest and centrally manage your logs using Elastic Agent and Fleet:</p>
<h6><a id="step-1-add-the-custom-logs-integration-to-your-project-ecs"></a>Add the custom logs integration to your project<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h6>
<p>To add the custom logs integration to your project:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From your deployment&#8217;s home page, click <span class="strong strong"><strong>Add Integrations</strong></span>.
</li>
<li class="listitem">
Type <code class="literal">custom</code> in the search bar and select <span class="strong strong"><strong>Custom Logs</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Install Elastic Agent</strong></span> at the bottom of the page, and follow the instructions for your system to install the Elastic Agent.
</li>
<li class="listitem">
After installing the Elastic Agent, click <span class="strong strong"><strong>Save and continue</strong></span> to configure the integration from the <span class="strong strong"><strong>Add Custom Logs integration</strong></span> page.
</li>
<li class="listitem">
Give your integration a meaningful name and description.
</li>
<li class="listitem">
Add the <span class="strong strong"><strong>Log file path</strong></span>. For example, <code class="literal">/var/log/your-logs.log</code>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Advanced options</strong></span>.
</li>
<li class="listitem">
<p>In the <span class="strong strong"><strong>Processors</strong></span> text box, add the following YAML configuration to add processors that enhance your data. Refer to <a href="/guide/en/beats/filebeat/8.15/filtering-and-enhancing-data.html" class="ulink" target="_top">processors</a> to learn more.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">processors:
  - add_host_metadata: \~
  - add_cloud_metadata: \~
  - add_docker_metadata: \~
  - add_kubernetes_metadata: \~</pre>
</div>
</li>
<li class="listitem">
<p>Under <span class="strong strong"><strong>Custom configurations</strong></span>, add the following YAML configuration to collect data.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">  json:
    overwrite_keys: true <a id="CO73-1"></a><i class="conum" data-value="1"></i>
    add_error_key: true <a id="CO73-2"></a><i class="conum" data-value="2"></i>
    expand_keys: true <a id="CO73-3"></a><i class="conum" data-value="3"></i>
    keys_under_root: true <a id="CO73-4"></a><i class="conum" data-value="4"></i>
  fields_under_root: true <a id="CO73-5"></a><i class="conum" data-value="5"></i>
  fields:
    service.name: your_service_name <a id="CO73-6"></a><i class="conum" data-value="6"></i>
    service.version: your_service_version <a id="CO73-7"></a><i class="conum" data-value="6"></i>
    service.environment: your_service_environment <a id="CO73-8"></a><i class="conum" data-value="6"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO73-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Values from the decoded JSON object overwrite the fields that Elastic Agent normally adds (type, source, offset, etc.) in case of conflicts.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO73-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Elastic Agent adds an "error.message" and "error.type: json" key in case of JSON unmarshalling errors.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO73-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Elastic Agent will recursively de-dot keys in the decoded JSON, and expand them into a hierarchical object structure.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO73-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>By default, the decoded JSON is placed under a "json" key in the output document. When set to <code class="literal">true</code>, the keys are copied top level in the output document.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO73-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>When set to <code class="literal">true</code>, custom fields are stored as top-level fields in the output document instead of being grouped under a fields sub-dictionary.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO73-6"><i class="conum" data-value="6"></i></a><a href="#CO73-7"></a><a href="#CO73-8"></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">service.name</code> (required), <code class="literal">service.version</code> (optional), and <code class="literal">service.environment</code> (optional) of the service you&#8217;re collecting logs from, used for log correlation.</p>
</td>
</tr>
</table>
</div>
</li>
<li class="listitem">
Give your agent policy a name. The agent policy defines the data your Elastic Agent collects.
</li>
<li class="listitem">
Save your integration to add it to your deployment.
</li>
</ol>
</div>
<h4><a id="view-ecs-logs"></a>View logs<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/logs-ecs-application.asciidoc">edit</a></h4>
<p>Refer to the <a class="xref" href="logs-filter-and-aggregate.html" title="Filter and aggregate logs">Filter and aggregate logs</a> documentation for more information on viewing and filtering your logs in Kibana.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="logs-plaintext.html">« Plaintext application logs</a>
</span>
<span class="next">
<a href="logs-send-application.html">APM agent log sending »</a>
</span>
</div>
</body>
</html>
