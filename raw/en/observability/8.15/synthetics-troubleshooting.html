<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Troubleshooting Synthetics | Elastic Observability [8.15] | Elastic</title>
<meta class="elastic" name="content" content="Troubleshooting Synthetics | Elastic Observability [8.15]">

<link rel="home" href="index.html" title="Elastic Observability [8.15]"/>
<link rel="up" href="monitor-uptime-synthetics.html" title="Synthetic monitoring"/>
<link rel="prev" href="synthetics-security-encryption.html" title="Synthetics Encryption and Security"/>
<link rel="next" href="uptime-intro.html" title="Uptime monitoring"/>
<meta class="elastic" name="product_version" content="8.15"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.15"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.15"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="synthetics-security-encryption.html">« Synthetics Encryption and Security</a>
</span>
<span class="next">
<a href="uptime-intro.html">Uptime monitoring »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [8.15]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="monitor-uptime-synthetics.html">Synthetic monitoring</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Troubleshooting Synthetics</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="synthetics-troubleshooting"></a>Troubleshooting Synthetics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h2>
</div></div></div>

<h3><a id="synthetics-troubleshooting-local-debugging"></a>Local debugging<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h3>
<p>For debugging synthetic tests locally, you can set an environment variable,
<code class="literal">DEBUG=synthetics</code>, to capture Synthetics agent logs when using the
<a class="xref" href="synthetics-command-reference.html" title="Use the Synthetics CLI">Synthetics CLI</a>.</p>
<h3><a id="synthetics-troubleshooting-common-issues"></a>Common issues<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h3>
<h4><a id="synthetics-troubleshooting-missing-api-key"></a>Monitors stopped running after upgrading to 8.8.0 or above<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>Synthetic monitors will stop running if you have gone through this workflow:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Enabled Monitor Management (in the Uptime app) prior to 8.6.0.
</li>
<li class="listitem">
Created a synthetic monitor that is configured to run on Elastic&#8217;s global managed infrastructure.
</li>
<li class="listitem">
Upgraded to 8.8.0 or above.
</li>
</ol>
</div>
<p>This happens because the permissions granted by clicking <span class="strong strong"><strong>Enable Monitor Management</strong></span> in versions prior to
8.6.0 are not sufficient in versions 8.8.0 and above.</p>
<p>To fix this, a user with <a class="xref" href="synthetics-role-setup.html" title="Setup role">admin permissions</a> needs to visit the Synthetics app
in Kibana. In 8.8.0 and above, the equivalent of "enabling monitor management" happens automatically in the
background when a user with <a class="xref" href="synthetics-role-setup.html" title="Setup role">admin permissions</a> visits the Synthetics app.</p>
<p>If a user <em>without</em> <a class="xref" href="synthetics-role-setup.html" title="Setup role">admin permissions</a> visits the Synthetics app before an admin
has visited it, the user will see a note that says "Only administrators can enable this feature". That
note will persist until an admin user visits the Synthetics app.</p>
<h4><a id="synthetics-troubleshooting-no-agent-running"></a>No results from a monitor configured to run on a Private Location<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>If you have created a Private Location and configured a monitor to run on that Private Location,
but don&#8217;t see any results for that monitor in the Synthetics app, make sure there is an agent
configured to run against the agent policy.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you attempt to assign an agent policy to a Private Location <em>before</em> configuring an agent to run
against the agent policy, you will see a note in the Synthetics app UI that the selected agent policy
has no agents.</p>
</div>
</div>
<p>When creating a Private Location, you have to:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="synthetics-private-location.html#synthetics-private-location-fleet-agent" title="Set up Fleet Server and Elastic Agent">Set up Fleet Server and Elastic Agent</a>.
</li>
<li class="listitem">
<a class="xref" href="synthetics-private-location.html#synthetics-private-location-connect" title="Connect to the Elastic Stack">Connect Fleet to the Elastic Stack</a> and enroll an Elastic Agent in Fleet.
</li>
<li class="listitem">
<a class="xref" href="synthetics-private-location.html#synthetics-private-location-add" title="Add a Private Location">Add a Private Location</a> in the Synthetics app.
</li>
</ol>
</div>
<p>If you do not complete the second item, no agents will be configured to run against the agent policy, and
any monitors configured to run on that Private Location won&#8217;t be able to run so there will be no results
in the Synthetics app.</p>
<p>To fix this, make sure there is an agent configured to run against the agent policy.</p>
<h4><a id="synthetics-troubleshooting-no-direct-es-connection"></a>No results from a monitor<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>If you have configured a monitor but don&#8217;t see any results for that monitor in the Synthetics app, whether running them from Elastic&#8217;s global managed testing infrastructure or from Private Locations, ensure Synthetics has a direct connection to Elasticsearch.</p>
<p>Do not configure any ingest pipelines or output via Logstash as this will prevent Synthetics from working properly and is not <a class="xref" href="synthetics-support-matrix.html" title="Synthetics support matrix">supported</a>.</p>
<h4><a id="synthetics-troubleshooting-missing-browser-schedules"></a>Browser monitor configured to run on a Private Location not running to schedule<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>If you have browser monitors configured to run on a Private Location but notice one or more of them are not running as scheduled, this could be because:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The time it takes for your monitor to run is longer than the frequency you have set
</li>
<li class="listitem">
There may be too many monitors trying to run concurrently, causing some of them to skip their scheduled run
</li>
</ul>
</div>
<p>You may also see a message in the logs such as <code class="literal">2 tasks have missed their schedule deadlines by more than 1 second in the last 15s</code>. These will be visible from inside the Agent diagnostic ZIP file, and the numbers and time periods may be different in your logs.</p>
<p>Start by identifying the cause of the issue. First, check if the time it takes the monitor to run is less than the scheduled frequency:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to the Synthetics app.
</li>
<li class="listitem">
Click the monitor, then click <span class="strong strong"><strong>Go to monitor</strong></span>.
</li>
<li class="listitem">
Go to the <a class="xref" href="synthetics-analyze.html#synthetics-analyze-individual-monitors-overview" title="Overview">Overview tab</a> to see the <em>Avg. duration</em>. You can also view the duration for individual runs in the <a class="xref" href="synthetics-analyze.html#synthetics-analyze-individual-monitors-history" title="History">History tab</a>.
</li>
<li class="listitem">
<p>Compare the duration to the scheduled frequency. If the duration is <em>greater than</em> the scheduled frequency, for example if the monitor that takes 90 seconds to run and its scheduled frequency is 1 minute, the next scheduled run will not occur because the current one is still running so you may see results for every other scheduled run.</p>
<p>To fix this, you can either:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Change the frequency so the monitor runs less often.
</li>
<li class="listitem">
Refactor the monitor so it can run in a shorter amount of time.
</li>
</ul>
</div>
</li>
</ol>
</div>
<p>If the duration is <em>less than</em> the scheduled frequency or the suggestion above does not fix the issue, then there may be too many browser monitors attempting to run on the Private Location. Due to the additional hardware overhead of running browser monitors, we limit each Private Location to only run two browser monitors at the same time. Depending on how many browser monitors you have configured to run on the Private Location and their schedule, the Private Location may not be able to run them all because it would require more than two browser tests to be running simultaneously.</p>
<p>To fix this issue, you can either:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Increase the number of concurrent browser monitors allowed (as described in <a class="xref" href="synthetics-private-location.html#synthetics-private-location-scaling" title="Scaling Private Locations">Scaling Private Locations</a>), paying attention to the scaling and hardware requirements documented.
</li>
<li class="listitem">
Create multiple Private Locations and spread your browser monitors across them more evenly (effectively horizontally scaling your Private Locations).
</li>
</ul>
</div>
<h4><a id="synthetics-troubleshooting-no-locations"></a>No locations are available<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>When using Elastic Cloud, if there are no options available in the <em>Locations</em> dropdown when you
try to create a monitor in the Synthetics app <em>or</em> if no locations are listed when using the
<a class="xref" href="_filtering_monitors.html#elastic-synthetics-locations-command" title="@elastic/synthetics locations"><code class="literal">location</code> command</a>, it might be because you do not have permission to
use Elastic managed locations <em>and</em> there are no <a class="xref" href="synthetics-private-location.html#monitor-via-private-agent" title="Monitor via a private agent">Private Locations</a>
available yet.</p>
<p>There are a few ways to fix this:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you have <a class="xref" href="synthetics-role-write.html" title="Writer role">write access</a> including the privileges for <a class="xref" href="synthetics-role-write.html#synthetics-role-write-private-locations" title="If using Private Locations">creating new Private Locations</a>, you can <a class="xref" href="synthetics-private-location.html#monitor-via-private-agent" title="Monitor via a private agent">create a new Private Location</a>. Then try creating the monitor again.
</li>
<li class="listitem">
If you do <em>not</em> have the right privileges to create a Private Location, you can ask someone with the <a class="xref" href="synthetics-role-write.html#synthetics-role-write-private-locations" title="If using Private Locations">necessary privileges</a> to create a Private Location or ask an administrator with a <a class="xref" href="synthetics-role-setup.html" title="Setup role">setup role</a> to give you the necessary privileges and <a class="xref" href="synthetics-private-location.html#monitor-via-private-agent" title="Monitor via a private agent">create a new Private Location</a>. Then try creating the monitor again.
</li>
<li class="listitem">
If you want to create a monitor to run on Elastic&#8217;s global managed infrastructure, ask an administrator with a <a class="xref" href="synthetics-role-setup.html" title="Setup role">setup role</a> to update <a class="xref" href="synthetics-role-write.html#disable-managed-locations" title="To restrict using Elastic&#8217;s global managed infrastructure"><code class="literal">Synthetics and Uptime</code> sub-feature privileges</a> for the role you&#8217;re currently assigned. Then try creating the monitor again.
</li>
</ul>
</div>
<h4><a id="synthetics-troubleshooting-public-locations-disabled"></a>You do not have permission to use Elastic managed locations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>If you try to create or edit a monitor hosted on Elastic&#8217;s global managed infrastructure but see a note that you do not have permission to use Elastic managed locations, an administrator has restricted the use of public locations.</p>
<p>To fix this you can either:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Ask an administrator with a <a class="xref" href="synthetics-role-setup.html" title="Setup role">setup role</a> to update
<a class="xref" href="synthetics-role-write.html#disable-managed-locations" title="To restrict using Elastic&#8217;s global managed infrastructure"><code class="literal">Synthetics and Uptime</code> sub-feature privileges</a> for the role you&#8217;re
currently assigned or assign you a role that allows using Elastic&#8217;s global managed infrastructure.
</li>
<li class="listitem">
Use a <a class="xref" href="synthetics-private-location.html#monitor-via-private-agent" title="Monitor via a private agent">Private Location</a>.
</li>
</ul>
</div>
<h3><a id="synthetics-troubleshooting-get-help"></a>Get help<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h3>
<h4><a id="synthetics-troubleshooting-support"></a>Elastic Support<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>We offer a support experience unlike any other.
Our team of professionals <em>speak human and code</em> and love making your day.
<a href="/subscriptions" class="ulink" target="_top">Learn more about subscriptions</a>.</p>
<h4><a id="synthetics-troubleshooting-discussion"></a>Discussion forum<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.15/docs/en/observability/synthetics-troubleshooting.asciidoc">edit</a></h4>
<p>For other questions and feature requests, visit our
<a href="https://discuss.elastic.co//c/observability/synthetics/75" class="ulink" target="_top">discussion forum</a>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="synthetics-security-encryption.html">« Synthetics Encryption and Security</a>
</span>
<span class="next">
<a href="uptime-intro.html">Uptime monitoring »</a>
</span>
</div>
</body>
</html>
