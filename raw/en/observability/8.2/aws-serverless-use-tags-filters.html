<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Learn configuration options for Elastic Serverless Forwarder and how to transform your AWS data as it is collected from Amazon Web Services (AWS).">
<meta name="keywords" content="serverless">
<title>Use tags and filters | Observability Guide [8.2] | Elastic</title>
<meta class="elastic" name="content" content="Use tags and filters | Observability Guide [8.2]">

<link rel="home" href="index.html" title="Observability Guide [8.2]"/>
<link rel="up" href="aws-elastic-serverless-forwarder-configuration.html" title="Configuration options for Elastic Serverless Forwarder"/>
<link rel="prev" href="aws-serverless-route-service-logs.html" title="Route AWS service logs"/>
<link rel="next" href="aws-serverless-json-content.html" title="JSON content discovery"/>
<meta class="elastic" name="product_version" content="8.2"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.2"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.2"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Observability Guide [8.2]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="add-observability-data.html">Send data to Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="aws-elastic-serverless-forwarder.html">Elastic Serverless Forwarder for AWS</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="aws-elastic-serverless-forwarder-configuration.html">Configuration options for Elastic Serverless Forwarder</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="aws-serverless-route-service-logs.html">« Route AWS service logs</a>
</span>
<span class="next">
<a href="aws-serverless-json-content.html">JSON content discovery »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="aws-serverless-use-tags-filters"></a>Use tags and filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.2/docs/en/observability/aws-elastic-serverless-forwarder-configuration.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use tags and filters to tag and filter messages based on regular expressions.</p>
<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="aws-serverless-use-tags"></a>Use custom tags<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.2/docs/en/observability/aws-elastic-serverless-forwarder-configuration.asciidoc">edit</a></h5>
</div></div></div>
<p>You can add custom tags to filter and categorize items in events.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: "s3-sqs"
    id: "arn:aws:sqs:%REGION%:%ACCOUNT%:%QUEUENAME%"
    tags:
      - "tag1"
      - "tag2"
      - "tag3"
    outputs:
      - type: "elasticsearch"
        args:
          elasticsearch_url: "arn:aws:secretsmanager:eu-central-1:123456789:secret:es_url"
          username: "arn:aws:secretsmanager:eu-west-1:123456789:secret:es_secrets:username"
          password: "arn:aws:secretsmanager:eu-west-1:123456789:secret:es_secrets:password"
          es_datastream_name: "logs-generic-default"</pre>
</div>
<p>Using the above example configuration, the tags will be set in the following way:</p>
<p><code class="literal">["forwarded", "generic", "tag1", "tag2", "tag3"]</code></p>
<p>The <code class="literal">forwarded</code> tag is always appended and the <code class="literal">generic</code> tag in this example comes from the dataset.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Tags must be defined within <code class="literal">inputs</code> in the <code class="literal">config.yaml</code> file.
</li>
<li class="listitem">
Each tag must be a string and added to the list.
</li>
</ul>
</div>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="aws-serverless-define-include-exclude-filters"></a>Define include/exclude filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/observability-docs/edit/8.2/docs/en/observability/aws-elastic-serverless-forwarder-configuration.asciidoc">edit</a></h5>
</div></div></div>
<p>You can define multiple filters for inputs to include or exclude events from data ingestion.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">inputs:
  - type: "s3-sqs"
    id: "arn:aws:sqs:%REGION%:%ACCOUNT%:%QUEUENAME%"
    include:
      - "[a-zA-Z]"
    exclude:
      - "skip this"
      - "skip also this"
    outputs:
      - type: "elasticsearch"
        args:
          elasticsearch_url: "arn:aws:secretsmanager:eu-central-1:123456789:secret:es_url"
          username: "arn:aws:secretsmanager:eu-west-1:123456789:secret:es_secrets:username"
          password: "arn:aws:secretsmanager:eu-west-1:123456789:secret:es_secrets:password"
          es_datastream_name: "logs-generic-default"</pre>
</div>
<p>You can define a list of regular expressions within <code class="literal">inputs.[].include</code>. If this list is populated, only messages <span class="strong strong"><strong>matching any</strong></span> of the defined regular expressions will be forwarded to the outputs.</p>
<p>You can define a list of regular expressions within <code class="literal">inputs.[].exclude</code>. If this list is populated, only messages <span class="strong strong"><strong>not matching any</strong></span> of the defined regular expressions will be forwarded to the outputs i.e. every message will be forwarded to the outputs unless it matches any of the defined regular expressions.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Both config parameters are optional, and can be set independently of each other. In terms of rule precedence, the exclude filter is applied first and then the include filter, so exclude takes precedence if both are specified.</p>
<p>All regular expressions are case-sensitive and should follow <a href="https://docs.python.org/3.9/library/re.html#regular-expression-syntax" class="ulink" target="_top">Python&#8217;s 3.9 regular expression syntax</a>.</p>
<p>Messages are scanned for terms that match the defined filters. Use the <code class="literal">^</code> (caret) special character to explicitly anchor the regex to the position before the first character of the string, and use <code class="literal">$</code> to anchor at the end.</p>
<p>No flags are used when the regular expression is compiled. Please refer to <a href="https://docs.python.org/3.9/library/re.html#re.compile" class="ulink" target="_top">inline flag documentation</a> for alternative options for multiline, case-insensitive, and other matching behaviors.</p>
</div>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="aws-serverless-route-service-logs.html">« Route AWS service logs</a>
</span>
<span class="next">
<a href="aws-serverless-json-content.html">JSON content discovery »</a>
</span>
</div>
</div>
</body>
</html>
