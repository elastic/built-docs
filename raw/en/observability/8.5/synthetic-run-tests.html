<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Learn configuration options for Elastic Serverless Forwarder and how to transform your AWS data as it is collected from Amazon Web Services (AWS).">
<meta name="keywords" content="serverless">
<title>Create a browser monitor | Observability Guide [8.5] | Elastic</title>
<link rel="home" href="index.html" title="Observability Guide [8.5]"/>
<link rel="up" href="synthetics-journeys.html" title="Use browser monitors"/>
<link rel="prev" href="synthetics-create-test.html" title="Write a synthetic test"/>
<link rel="next" href="synthetics-manage-monitors.html" title="Manage browser monitors"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.5"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.5"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Observability Guide [8.5]</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="monitor-uptime-synthetics.html">Uptime and synthetic monitoring</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="synthetics-journeys.html">Use browser monitors</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="synthetics-create-test.html">« Write a synthetic test</a>
</span>
<span class="next">
<a href="synthetics-manage-monitors.html">Manage browser monitors »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="synthetic-run-tests"></a>Create a browser monitor<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.5/docs/en/observability/synthetics-run-test.asciidoc">edit</a></h3>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Once you&#8217;ve <a class="xref" href="synthetics-create-test.html" title="Write a synthetic test">written a synthetic test</a>,
you can create a <em>monitor</em> to run the test at a regular interval.
You can either:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="synthetic-run-tests.html#synthetic-monitor-choose-project" title="Use project monitors">Use project monitors</a> to create monitors from an external source.
</li>
<li class="listitem">
<a class="xref" href="synthetic-run-tests.html#synthetics-inline-journey" title="Use the Uptime app UI">Use the Uptime app UI</a> to create a new monitor by copying simple journey
code into its configuration as an inline script.
</li>
</ul>
</div>
<h5><a id="browser-monitor-prereq"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.5/docs/en/observability/synthetics-run-test.asciidoc">edit</a></h5>
<p>To try this beta functionality, first you need to enable Monitor Management in Kibana:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to <span class="strong strong"><strong>Observability</strong></span> &#8594; <span class="strong strong"><strong>Uptime</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Monitor Management</strong></span>.
</li>
<li class="listitem">
Review the terms and conditions and click <span class="strong strong"><strong>Enable</strong></span> to start using Monitor Management.
</li>
</ol>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>To enable Monitor Management, you must be logged into Kibana as a user with
the following privileges:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/8.5/security-privileges.html#privileges-list-cluster" class="ulink" target="_top">Cluster privileges</a>: <code class="literal">monitor</code>, <code class="literal">read_ilm</code>, <code class="literal">read_pipeline</code>, and at least one of <code class="literal">manage_own_api_key</code>, <code class="literal">manage_security</code>, or <code class="literal">manage_api_key</code>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/8.5/security-privileges.html#privileges-list-indices" class="ulink" target="_top">Indices privileges</a> for <code class="literal">synthetics-*</code>: <code class="literal">view_index_metadata</code>, <code class="literal">create_doc</code>, <code class="literal">auto_configure</code>
</li>
</ul>
</div>
</div>
</div>
<p>You should also decide where you want to run the monitors before getting started:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Elastic&#8217;s global managed testing infrastructure</strong></span>:
With Elastic&#8217;s global managed testing infrastructure, you can create and run monitors in multiple
locations without having to manage your own infrastructure.
Elastic takes care of software updates and capacity planning for you.
</li>
<li class="listitem">
<span class="strong strong"><strong>Private locations</strong></span>: Private locations allow you to run monitors from your own premises.
To use private locations will must create a private location before continuing.
For step-by-step instructions, refer to <a class="xref" href="synthetics-private-location.html" title="Add a private location">Add a private location</a>.
</li>
</ul>
</div>
<h5><a id="synthetic-monitor-choose-project"></a>Use project monitors<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.5/docs/en/observability/synthetics-run-test.asciidoc">edit</a></h5>
<p>When you use the <code class="literal">@elastic/synthetics</code> library&#8217;s <code class="literal">push</code> command to create monitors,
a new browser monitor is created in Kibana for each journey in your project.
Using the <code class="literal">push</code> command allows you to manage all browser monitors using a GitOps workflow.
Alternatively, you could keep monitors in sync directly from your local development environment.</p>
<p>We recommend users adopt a GitOps workflow when using project monitors because it allows teams to keep their monitors in sync with their project&#8217;s <code class="literal">main</code> branch.
Besides saving time through automation, a GitOps workflow allows users to take advantage of PR reviews and checks that could validate journeys even before they are merged.</p>
<p>Project monitors also allow teams to configure individual monitors through code. Instead of using Kibana to update a monitor&#8217;s schedule, for example, you can set a <code class="literal">schedule</code> directly in your journey. That <code class="literal">schedule</code> will be used when pushing the journey to Kibana.</p>
<div class="imageblock">
<div class="content">
<img src="images/create-browser-monitor-project-monitors.png" alt="create browser monitor project monitors">
</div>
</div>
<h6><a id="monitor-use"></a>Configure monitor<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.5/docs/en/observability/synthetics-run-test.asciidoc">edit</a></h6>
<p>When you&#8217;re ready to create a browser monitor to run your tests, you&#8217;ll need to set a few configuration options:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Give your monitor a name.</strong></span> Provide a human readable name and a unique ID for the monitor. This will appear in Kibana where you can view and manage monitors after they&#8217;re created.
</li>
<li class="listitem">
<span class="strong strong"><strong>Set the schedule.</strong></span> Specify the interval at which your tests will run.
</li>
<li class="listitem">
<span class="strong strong"><strong>Specify where the monitors should run.</strong></span> You can run monitors on Elastic&#8217;s global managed testing infrastructure
or <a class="xref" href="synthetics-private-location.html" title="Add a private location">create a private location</a> to run monitors from your own premises.
</li>
<li class="listitem">
<span class="strong strong"><strong>Set other options as needed.</strong></span> There are several other options you can set to customize your implementation including params, tags, screenshot options, throttling options, and more.
</li>
</ul>
</div>
<p>Configure each monitor directly in your test code using <code class="literal">monitor.use</code>.
The <code class="literal">monitor</code> API allows you to set unique options for each journey&#8217;s monitor directly through code.
For example:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">import { journey, step, monitor, expect } from '@elastic/synthetics';

journey('Ensure placeholder is correct', ({ page, params }) =&gt; {
  monitor.use({
    id: 'example-monitor',
    schedule: 10,
    throttling: {
      download: 10,
      upload: 5,
      latency: 100,
    },
  });
  step('Load the demo page', async () =&gt; {
    await page.goto('https://elastic.github.io/synthetics-demo/');
  });
  step('Assert placeholder text', async () =&gt; {
    const placeholderValue = await page.getAttribute(
      'input.new-todo',
      'placeholder'
    );
    expect(placeholderValue).toBe('What needs to be done?');
  });
});</pre>
</div>
<p>For each journey, you can specify its <code class="literal">schedule</code> and the <code class="literal">locations</code> in which it runs.
When those options are not set, Synthetics will use the default values in the global configuration file.
For more details, see <a class="xref" href="synthetics-configuration.html" title="Synthetic tests configuration">Synthetic tests configuration</a>.</p>
<p>Here are all the available <code class="literal">monitor</code> configuration options:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">id</code> (<code class="literal">string</code>)
</span>
</dt>
<dd>
A unique identifier for this monitor.
</dd>
<dt>
<span class="term">
<code class="literal">name</code> (<code class="literal">string</code>)
</span>
</dt>
<dd>
A human readable name for the monitor.
</dd>
<dt>
<span class="term">
<code class="literal">tags</code> (<code class="literal">Array&lt;string&gt;</code>)
</span>
</dt>
<dd>
A list of tags that will be sent with the monitor event. Tags are displayed in the Uptime app and allow you to search monitors by tag.
</dd>
<dt>
<span class="term">
<code class="literal">schedule</code> (<code class="literal">number</code>)
</span>
</dt>
<dd>
The interval (in minutes) at which the monitor should run.
</dd>
<dt>
<span class="term">
<code class="literal">enabled</code> (<code class="literal">boolean</code>)
</span>
</dt>
<dd>
Enable or disable the monitor from running without deleting and recreating it.
</dd>
<dt>
<span class="term">
<code class="literal">locations</code> (<a href="https://github.com/elastic/synthetics/blob/v1.0.0-beta.37/src/locations/public-locations.ts#L28-L37" class="ulink" target="_top"><code class="literal">Array&lt;SyntheticsLocationsType&gt;</code></a>)
</span>
</dt>
<dd>
<p>
Where to deploy the monitor. Monitors can be deployed in multiple locations so that you can detect differences in availability and response times across those locations.
</p>
<p>To list available locations you can:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Run the <a class="xref" href="synthetics-command-reference.html#elastic-synthetics-locations-command" title="elastic-synthetics locations"><code class="literal">elastic-synthetics locations</code> command</a>.
</li>
<li class="listitem">
Go to <span class="strong strong"><strong>Uptime app</strong></span> &#8594; <span class="strong strong"><strong>Monitor Management</strong></span> and click <span class="strong strong"><strong>Add monitor</strong></span>.
Locations will be listed in <em>Monitor locations</em>.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">privateLocations</code> (<code class="literal">Array&lt;string&gt;</code>)
</span>
</dt>
<dd>
<p>
The <a class="xref" href="synthetics-private-location.html" title="Add a private location">private locations</a> to which the monitors will be deployed. These private locations refer to locations hosted and managed by you, whereas
<code class="literal">locations</code> are hosted by Elastic. You can specify a private location using the location&#8217;s name.
</p>
<p>To list available private locations you can:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Run the <a class="xref" href="synthetics-command-reference.html#elastic-synthetics-locations-command" title="elastic-synthetics locations"><code class="literal">elastic-synthetics locations</code> command</a>
with the Kibana URL for the deployment from which to fetch available locations.
</li>
<li class="listitem">
Go to <span class="strong strong"><strong>Uptime app</strong></span> &#8594; <span class="strong strong"><strong>Monitor Management</strong></span> and click <span class="strong strong"><strong>Add monitor</strong></span>.
Private locations will be listed in <em>Monitor locations</em> with a "Private" badge next to their names.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">throttling</code> (<a href="https://github.com/elastic/synthetics/blob/v1.0.0-beta.37/src/common_types.ts#L194-L198" class="ulink" target="_top"><code class="literal">ThrottlingOptions</code></a>)
</span>
</dt>
<dd>
Control the monitor&#8217;s download speeds, upload speeds, and latency to simulate your application&#8217;s behavior on slower or laggier networks.
</dd>
<dt>
<span class="term">
<code class="literal">screenshot</code> (<a href="https://github.com/elastic/synthetics/blob/v1.0.0-beta.37/src/common_types.ts#L192" class="ulink" target="_top"><code class="literal">ScreenshotOptions</code></a>)
</span>
</dt>
<dd>
Control whether or not to capture screenshots. Options include <code class="literal">'on'</code>, <code class="literal">'off'</code>, or <code class="literal">'only-on-failure'</code>.
</dd>
</dl>
</div>
<h6><a id="monitor-create"></a>Create monitor<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.5/docs/en/observability/synthetics-run-test.asciidoc">edit</a></h6>
<p>After setting configuration options, use the <code class="literal">push</code> command to create monitors and start collecting data.
To create monitors, run:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">npx @elastic/synthetics push --auth &lt;api-key&gt; --url &lt;kibana-url&gt; --project &lt;id|name&gt;</pre>
</div>
<p>To generate an API key:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to <span class="strong strong"><strong>Monitor Management</strong></span> in the Uptime app.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>API Keys</strong></span>.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Generate API key</strong></span>.
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/synthetics-monitor-management-api-key.png" alt="API Keys tooltip on the Uptime app&#8217;s Monitor Management page">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are pushing to a <a class="xref" href="synthetics-private-location.html" title="Add a private location">private location</a>, you must use an API key generated in 8.4 or higher.</p>
</div>
</div>
<p>For more details on using the <code class="literal">push</code> command, see <a class="xref" href="synthetics-command-reference.html#elastic-synthetics-push-command" title="elastic-synthetics push"><code class="literal">elastic-synthetics push</code></a>.</p>
<p>One monitor will appear on the <span class="strong strong"><strong>Monitor management</strong></span> page for each journey,
and you&#8217;ll manage all the browser monitors from your local environment.</p>
<h5><a id="synthetics-inline-journey"></a>Use the Uptime app UI<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.5/docs/en/observability/synthetics-run-test.asciidoc">edit</a></h5>
<p>Alternatively, you can create a browser monitor using an <em>inline script</em> in the Uptime app.</p>
<p>An inline browser monitor is a single journey that you manage individually.
Inline monitors can be quick to set up, but can also be more difficult to manage.
Each inline browser monitor can contain only <em>one</em> journey, which must be maintained directly in Kibana.</p>
<div class="imageblock">
<div class="content">
<img src="images/create-browser-monitor-ui.png" alt="create browser monitor ui">
</div>
</div>
<p>If you depend on external packages, have your journeys next to your code repository, or wish to embed and manage more than one journey from a single monitor configuration, see <a class="xref" href="synthetic-run-tests.html#synthetic-monitor-choose-project" title="Use project monitors">Use project monitors</a> instead.</p>
<p>When writing an inline browser monitor, the <code class="literal">journey</code> keyword isn&#8217;t required, and variables like <code class="literal">page</code> and <code class="literal">params</code> will be part of your script&#8217;s scope.</p>
<p>To create a new monitor:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to <span class="strong strong"><strong>Monitor Management</strong></span> in the Uptime app.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Add monitor</strong></span>.
</li>
<li class="listitem">
Give your monitor a <em>Monitor name</em>.
</li>
<li class="listitem">
<p>Select one or more <em>Monitor locations</em>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you&#8217;ve <a class="xref" href="synthetics-private-location.html" title="Add a private location">added a private location</a>,
you&#8217;ll see your new private location in the list of <em>Monitor locations</em>.
The new private location will have the <em>Location name</em> you provided and
a "Private" badge next to its name.</p>
<div class="imageblock">
<div class="content">
<img src="images/private-locations-monitor-locations.png" alt="Screenshot of Monitor locations options including a private location">
</div>
</div>
</div>
</div>
</li>
<li class="listitem">
Select the <em>Monitor Type</em> <span class="strong strong"><strong>Browser</strong></span>.
</li>
<li class="listitem">
<p>Set the <em>Frequency</em>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/uptime-app-add-monitor-browser.png" alt="Monitor management options when adding a new browser monitor.">
</div>
</div>
</li>
<li class="listitem">
<p>Add steps to the <span class="strong strong"><strong>Inline script</strong></span> code block directly.
The <code class="literal">journey</code> keyword isn&#8217;t required, and variables like <code class="literal">page</code> and <code class="literal">params</code> will be part of your script&#8217;s scope.
You cannot <code class="literal">import</code> any dependencies when using inline browser monitors.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/uptime-app-inline-script.png" alt="Configure a synthetic monitor using an inline script in Elastic Fleet">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Alternatively, you can use the <span class="strong strong"><strong>Script recorder</strong></span> option.
You&#8217;ll use the Elastic Synthetics Recorder to generate a synthetic test by interacting with
a web page and exporting journey code that reflects all the actions you took.
For more information, refer to <a class="xref" href="synthetics-recorder.html" title="Synthetics Recorder">Synthetics Recorder</a>.</p>
</div>
</div>
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Advanced Browser options</strong></span> to see more ways to configure your monitor.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the <span class="strong strong"><strong>Synthetics agent options</strong></span> to provide fine-tuned configuration for the synthetics agent.
Read more about available options in <a class="xref" href="synthetics-command-reference.html" title="Synthetics command reference">Command reference</a>.
</li>
<li class="listitem">
Use <span class="strong strong"><strong>Throttling options</strong></span> to control the monitor&#8217;s network speed.
You can control the monitor&#8217;s download and upload speeds and its latency to simulate your application&#8217;s behavior on slower or laggier networks.
</li>
<li class="listitem">
Use <span class="strong strong"><strong>Data stream settings</strong></span> to configure additional Data Stream options.
</li>
</ul>
</div>
</li>
<li class="listitem">
(Optional) Click <span class="strong strong"><strong>Run test</strong></span> to verify that the test is valid.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save monitor</strong></span>.
</li>
</ol>
</div>
<h5><a id="synthetics-ci"></a>Run on CI<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.5/docs/en/observability/synthetics-run-test.asciidoc">edit</a></h5>
<p>You can also run a synthetic project on your CI environment. Elastic&#8217;s synthetics runner can output results in a few different formats, including JSON and JUnit
(the standard format supported by most CI platforms).</p>
<p>If any of your journeys fail, the synthetics agent it will yield a non-zero exit code, which most CI systems pick up as a failure by default.</p>
<p>You can see an example using GitHub Actions in the
<a href="https://github.com/elastic/synthetics-demo/blob/main/.github/workflows/run-synthetics.yml" class="ulink" target="_top">elastic/synthetics-demo</a> repository.
This example sets up a job that executes the synthetics runner and tells the runner to yield results in a JUnit format.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="synthetics-create-test.html">« Write a synthetic test</a>
</span>
<span class="next">
<a href="synthetics-manage-monitors.html">Manage browser monitors »</a>
</span>
</div>
</div>
</body>
</html>
