<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="Learn configuration options for Elastic Serverless Forwarder and how to transform your AWS data as it is collected from Amazon Web Services (AWS).">
<meta name="keywords" content="serverless">
<title>Configure lightweight monitors | Observability Guide [8.7] | Elastic</title>
<meta class="elastic" name="content" content="Configure lightweight monitors | Observability Guide [8.7]">

<link rel="home" href="index.html" title="Observability Guide [8.7]"/>
<link rel="up" href="monitor-uptime-synthetics.html" title="Synthetic monitoring"/>
<link rel="prev" href="synthetics-recorder.html" title="Use the Synthetics Recorder"/>
<link rel="next" href="synthetics-manage-monitors.html" title="Manage monitors"/>
<meta class="elastic" name="product_version" content="8.7"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.7"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.7"/>
</head>
<body><div class="page_header">
A newer version is available. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Observability Guide [8.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="monitor-uptime-synthetics.html">Synthetic monitoring</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="synthetics-recorder.html">« Use the Synthetics Recorder</a>
</span>
<span class="next">
<a href="synthetics-manage-monitors.html">Manage monitors »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="synthetics-lightweight"></a>Configure lightweight monitors<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>In the Synthetics app you can monitor the status of network endpoints using the following lightweight checks:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>HTTP</strong></span>: Monitor your website. The HTTP monitor checks to make sure specific endpoints return the correct
status code and display the correct text.
</li>
<li class="listitem">
<span class="strong strong"><strong>ICMP</strong></span>: Check the availability of your hosts. The ICMP monitor uses ICMP (v4 and v6) Echo
Requests to check the network reachability of the hosts you are pinging. This will tell you whether the
host is available and connected to the network, but doesn&#8217;t tell you if a service on the host is running or
not.
</li>
<li class="listitem">
<span class="strong strong"><strong>TCP</strong></span>: Monitor the services running on your hosts. The TCP monitor checks individual ports
to make sure the service is accessible and running.
</li>
</ul>
</div>
<p>Lightweight monitors can be configured using either the <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-ui" title="Synthetics app">Synthetics app</a>
or <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-projects" title="Project monitors">Project monitors</a>.</p>
<h3><a id="synthetics-lightweight-ui"></a>Synthetics app<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h3>
<p>To use the UI in the Synthetics app, go to the Synthetics app in Kibana to create and configure monitors.
For step-by-step instructions, refer to <a class="xref" href="synthetics-get-started-ui.html" title="Create monitors in the Synthetics app">Use the Synthetics app</a>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/uptime-set-up-ui.asciidoc.png" alt="Synthetics Create monitor UI">
</div>
</div>
<h3><a id="synthetics-lightweight-projects"></a>Project monitors<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h3>
<p>To use YAML files in to create project monitors, <a class="xref" href="synthetics-get-started-project.html" title="Create monitors with Project monitors">set up a project</a>
and configure monitors in YAML files in the <code class="literal">lightweight</code> directory.</p>
<p>In each YAML file, define a set of <code class="literal">monitors</code> to check your remote hosts.
Each <code class="literal">monitor</code> item is an entry in a YAML list and begins with a dash (<code class="literal">-</code>).
You can define the type of monitor to use, the hosts to check, and other
optional settings.</p>
<p>The following example configures three monitors checking via the <code class="literal">http</code>, <code class="literal">icmp</code>, and <code class="literal">tcp</code>
protocols and demonstrates how to use TCP Echo response verification:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">heartbeat.monitors:
- type: http
  name: Todos Lightweight
  id: todos-lightweight
  urls: "https://elastic.github.io/synthetics-demo/"
  schedule: '@every 1m'
- type: icmp
  id: ping-myhost
  name: My Host Ping
  hosts: ["myhost"]
  schedule: '@every 5m'
- type: tcp
  id: myhost-tcp-echo
  name: My Host TCP Echo
  hosts: ["myhost:777"]  # default TCP Echo Protocol
  check.send: "Check"
  check.receive: "Check"
  schedule: '@every 60s'</pre>
</div>
<p><a id="synthetics-monitor-options"></a>There are some common monitor configuration options that are the same for all lightweight monitor types.
For a complete list, refer to <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-common-options" title="Common options">Common options</a>.</p>
<p>Each monitor type also has additional configuration options that are specific to that type.
Refer to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-http" title="HTTP options">HTTP options</a>
</li>
<li class="listitem">
<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-icmp" title="ICMP options">ICMP options</a>
</li>
<li class="listitem">
<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-tcp" title="TCP options">TCP options</a>
</li>
</ul>
</div>
<p>The <code class="literal">tcp</code> and <code class="literal">http</code> monitor types both support SSL/TLS and some proxy settings.</p>
<h4><a id="synthetics-lightweight-common-options"></a>Common options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h4>
<p>You can specify the following options when defining a synthetic monitor in any location.
These options are the same for all monitors. Each monitor type has additional configuration
options that are specific to that monitor type.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Option (type)</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a id="monitor-type"></a> <span class="strong strong"><strong><code class="literal">type</code></strong></span><br>
(<code class="literal">"http"</code> | <code class="literal">"icmp"</code> | <code class="literal">"tcp"</code>)</p></td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Required</strong></span>. The type of monitor to run. One of:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">http</code>: Connects via HTTP and optionally verifies that the host returns the expected response.
</li>
<li class="listitem">
<code class="literal">icmp</code>: Uses an ICMP (v4 and v6) Echo Request to ping the configured hosts. Requires special permissions or root access.
</li>
<li class="listitem">
<code class="literal">tcp</code>: Connects via TCP and optionally verifies the endpoint by sending and/or receiving a custom payload.
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-id"></a> <span class="strong strong"><strong><code class="literal">id</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>)</p></td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Required</strong></span>. A unique identifier for this configuration. This should not change with edits to the monitor configuration regardless of changes to any config fields.</p>
<p><span class="strong strong"><strong>Examples</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">id: uploader-service</pre>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">id: http://example.net</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When querying against indexed monitor data this is the field you will be aggregating with. It appears in the exported fields as <code class="literal">monitor.id</code>.</p>
<p>If you do not set an <code class="literal">id</code> explicitly, the monitor&#8217;s config will be hashed and a generated value will be used. This value will change with any options change to this monitor making aggregations over time between changes impossible. For this reason, it&#8217;s recommended that you set this manually.</p>
</div>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-name"></a> <span class="strong strong"><strong><code class="literal">name</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>)</p></td>
<td align="left" valign="top">
<p>Human readable name for this monitor.</p>
<p><span class="strong strong"><strong>Examples</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">name: Uploader service</pre>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">name: Example website</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-service_name"></a> <span class="strong strong"><strong><code class="literal">service.name</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>)</p></td>
<td align="left" valign="top">
<p>APM service name for this monitor. Corresponds to the <code class="literal">service.name</code> ECS field. Set this when monitoring an app that is also using APM to enable integrations between Synthetics and APM data in Kibana.</p>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-enabled"></a> <span class="strong strong"><strong><code class="literal">enabled</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-bool" title="Boolean">boolean</a>)</p></td>
<td align="left" valign="top">
<p>Whether the monitor is enabled.</p>
<p><span class="strong strong"><strong>Default</strong></span>: <code class="literal">true</code></p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">enabled: false</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-schedule"></a> <span class="strong strong"><strong><code class="literal">schedule</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-duration" title="Duration">duration</a>)</p></td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Required</strong></span>. The task schedule.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Schedules with less than 1 minute resolution will be saved to the nearest minute. For example, <code class="literal">@every 5s</code> will be changed to <code class="literal">@every 60s</code> when the monitor is pushed using the CLI.</p>
</div>
</div>
<p><span class="strong strong"><strong>Example</strong></span>:<br>
Run the task every 5 minutes from the time the monitor was started.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">schedule: @every 5m</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-timeout"></a> <span class="strong strong"><strong><code class="literal">timeout</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-duration" title="Duration">duration</a>)</p></td>
<td align="left" valign="top">
<p>The total running time for each ping test. This is the total time allowed for testing the connection and exchanging data.</p>
<p><span class="strong strong"><strong>Default</strong></span>: <code class="literal">16s</code></p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">timeout: 2m</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-tags"></a> <span class="strong strong"><strong><code class="literal">tags</code></strong></span><br>
(list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)</p></td>
<td align="left" valign="top">
<p>A list of tags that will be sent with the monitor event.</p>
<p><span class="strong strong"><strong>Examples</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">tags:
  - tag one
  - tag two</pre>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">tags: ["tag one", "tag two"]</pre>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<h4><a id="synthetics-lightweight-http"></a>HTTP options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h4>
<p>The options described here configure Synthetics to connect via HTTP and
optionally verify that the host returns the expected response.</p>
<p>Valid options for HTTP monitors include <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-common-options" title="Common options">all common options</a>
and the following HTTP-specific options:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Option (type)</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-hosts"></a> <span class="strong strong"><strong><code class="literal">hosts</code></strong></span><br>
(list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)</p></td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Required</strong></span>. A list of URLs to ping.</p>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-max_redirects"></a> <span class="strong strong"><strong><code class="literal">max_redirects</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-numbers" title="Number">number</a>)</p></td>
<td align="left" valign="top">
<p>The total number of redirections Synthetics will follow.</p>
<p>By default, Synthetics will not follow redirects, but will report the status of the redirect. If set to a number greater than <code class="literal">0</code>, Synthetics will follow that number of redirects.</p>
<p>When this option is set to a value greater than <code class="literal">0</code>, the <code class="literal">monitor.ip</code> field will no longer be reported, as multiple DNS requests across multiple IPs may return multiple IPs. Fine-grained network timing data will also not be recorded, as with redirects that data will span multiple requests. Specifically the fields <code class="literal">http.rtt.content.us</code>, <code class="literal">http.rtt.response_header.us</code>, <code class="literal">http.rtt.total.us</code>, <code class="literal">http.rtt.validate.us</code>, <code class="literal">http.rtt.write_request.us</code> and <code class="literal">dns.rtt.us</code> will be omitted.</p>
<p><span class="strong strong"><strong>Default</strong></span>: <code class="literal">0</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-proxy_url"></a> <span class="strong strong"><strong><code class="literal">proxy_url</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>)</p></td>
<td align="left" valign="top">
<p>The HTTP proxy URL. This setting is optional.</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">http://proxy.mydomain.com:3128</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-username"></a> <span class="strong strong"><strong><code class="literal">username</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>)</p></td>
<td align="left" valign="top">
<p>The username for authenticating with the server. The credentials are passed with the request. This setting is optional.</p>
<p>You need to specify credentials when your <code class="literal">check.response</code> settings require it. For example, you can check for a 403 response (<code class="literal">check.response.status: [403]</code>) without setting credentials.</p>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-password"></a> <span class="strong strong"><strong><code class="literal">password</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>)</p></td>
<td align="left" valign="top">
<p>The password for authenticating with the server. This setting is optional.</p>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-ssl"></a> <span class="strong strong"><strong><code class="literal">ssl</code></strong></span><br>
(<a href="/guide/en/beats/heartbeat/8.7/configuration-ssl.html" class="ulink" target="_top">SSL</a>)</p></td>
<td align="left" valign="top">
<p>The TLS/SSL connection settings for use with the HTTPS endpoint. If you don&#8217;t specify settings, the system defaults are used.</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">- type: http
  id: my-http-service
  name: My HTTP Service
  hosts: ["https://myhost:443"]
  schedule: '@every 5s'
  ssl:
    certificate_authorities: ['/etc/ca.crt']
    supported_protocols: ["TLSv1.0", "TLSv1.1", "TLSv1.2"]</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-headers"></a> <span class="strong strong"><strong><code class="literal">headers</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-bool" title="Boolean">boolean</a>)</p></td>
<td align="left" valign="top">
<p>Controls the indexing of the HTTP response headers <code class="literal">http.response.body.headers</code> field. Set <code class="literal">response.include_headers</code> to <code class="literal">false</code> to disable.</p>
<p><span class="strong strong"><strong>Default</strong></span>: <code class="literal">true</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-response"></a> <span class="strong strong"><strong><code class="literal">response</code></strong></span></p></td>
<td align="left" valign="top">
<p>Controls the indexing of the HTTP response body contents to the <code class="literal">http.response.body.contents</code> field.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">include_body</code></strong></span> (<code class="literal">"on_error"</code> | <code class="literal">"never"</code> | <code class="literal">"always"</code>)
</span>
</dt>
<dd>
<p>
Set <code class="literal">response.include_body</code> to one of the options listed below.
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">on_error</code>: Include the body if an error is encountered during the check. This is the default.
</li>
<li class="listitem">
<code class="literal">never</code>: Never include the body.
</li>
<li class="listitem">
<code class="literal">always</code>: Always include the body with checks.
</li>
</ul>
</div>
</dd>
</dl>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-http-check"></a> <span class="strong strong"><strong><code class="literal">check</code></strong></span></p></td>
<td align="left" valign="top">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">request</code></strong></span>
</span>
</dt>
<dd>
<p>
An optional <code class="literal">request</code> to send to the remote host. Under <code class="literal">check.request</code>, specify these options:
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">method</code></strong></span> (<code class="literal">"HEAD"</code> | <code class="literal">"GET"</code> | <code class="literal">"POST"</code> | <code class="literal">"OPTIONS"</code>)
</span>
</dt>
<dd>
The HTTP method to use.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">headers</code></strong></span> (<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers" class="ulink" target="_top">HTTP headers</a>)
</span>
</dt>
<dd>
A dictionary of additional HTTP headers to send. By default Synthetics will set the <em>User-Agent</em> header to identify itself.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">body</code></strong></span>  (<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>)
</span>
</dt>
<dd>
Optional request body content.
</dd>
</dl>
</div>
<p><span class="strong strong"><strong>Example</strong></span>: This monitor POSTs an <code class="literal">x-www-form-urlencoded</code> string to the endpoint <code class="literal">/demo/add</code>.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">check.request:
  method: POST
  headers:
    'Content-Type': 'application/x-www-form-urlencoded'
  # urlencode the body:
  body: "name=first&amp;email=someemail%40someemailprovider.com"</pre>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">response</code></strong></span>
</span>
</dt>
<dd>
<p>
The expected <code class="literal">response</code>.
</p>
<p>Under <code class="literal">check.response</code>, specify these options:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">status</code></strong></span> (list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)
</span>
</dt>
<dd>
<p>
A list of expected status codes. 4xx and 5xx codes are considered <code class="literal">down</code> by default. Other codes are considered <code class="literal">up</code>.
</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">check.response:
  status: [200, 201]</pre>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">headers</code></strong></span> (<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers" class="ulink" target="_top">HTTP headers</a>)
</span>
</dt>
<dd>
The required response headers.
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">body.positive</code></strong></span> (list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)
</span>
</dt>
<dd>
<p>
A list of regular expressions to match the body output. Only a single expression needs to match.
</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<p>This monitor examines the response body for the strings <em>foo</em> or <em>Foo</em>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">check.response:
  status: [200, 201]
  body:
    positive:
      - foo
      - Foo</pre>
</div>
</dd>
</dl>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong><code class="literal">body.negative</code></strong></span> (list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)
</span>
</dt>
<dd>
<p>
A list of regular expressions to match the body output negatively. Return match failed if single expression matches. HTTP response bodies of up to 100MiB are supported.
</p>
<p>This monitor examines match successfully if there is no <em>bar</em> or <em>Bar</em> at all, examines match failed if there is <em>bar</em> or <em>Bar</em> in the response body:</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">check.response:
  status: [200, 201]
  body:
    negative:
      - bar
      - Bar</pre>
</div>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<p>This monitor examines match successfully only when <em>foo</em> or <em>Foo</em> in body AND no <em>bar</em> or <em>Bar</em> in body:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">check.response:
  status: [200, 201]
  body:
    positive:
      - foo
      - Foo
    negative:
      - bar
      - Bar</pre>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<h4><a id="synthetics-lightweight-icmp"></a>ICMP options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h4>
<p>The options described here configure Synthetics to use ICMP (v4 and v6) Echo
Requests to check the configured hosts. On most platforms you must execute
Synthetics with elevated permissions to perform ICMP pings.</p>
<p>On Linux, regular users may perform pings if the right file capabilities are set. Run
<code class="literal">sudo setcap cap_net_raw+eip /path/to/heartbeat</code> to  grant Synthetics ping capabilities on Linux.
Alternatively, you can grant ping permissions to the user being used to run Synthetics.
To grant ping permissions in this way, run <code class="literal">sudo sysctl -w net.ipv4.ping_group_range='myuserid myuserid'</code>.</p>
<p>Other platforms may require Synthetics to run as root or administrator to execute pings.</p>
<p>Valid options for ICMP monitors include <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-common-options" title="Common options">all common options</a>
and the following ICMP-specific options:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Option (type)</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a id="monitor-icmp-hosts"></a> <span class="strong strong"><strong><code class="literal">hosts</code></strong></span><br>
(list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)</p></td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Required</strong></span>. A list of hosts to ping.</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">hosts: ["myhost"]</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-icmp-wait"></a> <span class="strong strong"><strong><code class="literal">wait</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-duration" title="Duration">duration</a>)</p></td>
<td align="left" valign="top">
<p>The duration to wait before emitting another ICMP Echo Request if no response is received.</p>
<p><span class="strong strong"><strong>Default</strong></span>: <code class="literal">1s</code></p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">wait: 1m</pre>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<h4><a id="synthetics-lightweight-tcp"></a>TCP options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h4>
<p>The options described here configure Synthetics to connect via TCP and
optionally verify the endpoint by sending and/or receiving a custom payload.</p>
<p>Valid options for TCP monitors include <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-common-options" title="Common options">all common options</a>
and the following TCP-specific options:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Option (type)</th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><a id="monitor-tcp-hosts"></a> <span class="strong strong"><strong><code class="literal">hosts</code></strong></span><br>
(list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)</p></td>
<td align="left" valign="top">
<p><span class="strong strong"><strong>Required</strong></span>. A list of hosts to ping. The entries in the list can be:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>A plain host name, such as <code class="literal">localhost</code>, or an IP address.</strong></span><br>
If you specify this option, you must also specify a value for <a class="xref" href="synthetics-lightweight.html#monitor-tcp-ports"><code class="literal">ports</code></a>.  If the monitor is <a href="/guide/en/beats/heartbeat/8.7/configuration-ssl.html" class="ulink" target="_top">configured to use SSL</a>, Synthetics establishes an SSL/TLS-based connection. Otherwise, it establishes a plain TCP connection.
</li>
<li class="listitem">
<span class="strong strong"><strong>A hostname and port, such as <code class="literal">localhost:12345</code>.</strong></span><br>
Synthetics connects to the port on the specified host. If the monitor is <a href="/guide/en/beats/heartbeat/8.7/configuration-ssl.html" class="ulink" target="_top">configured to use SSL</a>, Synthetics establishes an SSL/TLS-based connection. Otherwise, it establishes a TCP connection.
</li>
<li class="listitem">
<p><span class="strong strong"><strong>A full URL using the syntax <code class="literal">scheme://&lt;host&gt;:[port]</code></strong></span>, where:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">scheme</code> is one of <code class="literal">tcp</code>, <code class="literal">plain</code>, <code class="literal">ssl</code> or <code class="literal">tls</code>. If <code class="literal">tcp</code> or <code class="literal">plain</code> is specified, Synthetics establishes a TCP connection even if the monitor is configured to use SSL. If <code class="literal">tls</code> or <code class="literal">ssl</code> is specified, Synthetics establishes an SSL connection. However, if the monitor is not configured to use SSL, the system defaults are used (currently not supported on Windows).
</li>
<li class="listitem">
<code class="literal">host</code> is the hostname.
</li>
<li class="listitem">
<code class="literal">port</code> is the port number. If <code class="literal">port</code> is missing in the URL, the <a class="xref" href="synthetics-lightweight.html#monitor-tcp-ports"><code class="literal">ports</code></a> setting is required.
</li>
</ul>
</div>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Examples</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">hosts: ["localhost"]</pre>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">hosts: ["localhost:8000"]</pre>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">hosts: ["tcp://localhost:8000"]</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-tcp-ports"></a> <span class="strong strong"><strong><code class="literal">ports</code></strong></span><br>
(list of <a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-string" title="String">string</a>s)</p></td>
<td align="left" valign="top">
<p>A list of ports to ping if the host specified in <a class="xref" href="synthetics-lightweight.html#monitor-tcp-hosts"><code class="literal">hosts</code></a> does not contain a port number. It is generally preferable to use a single value here, since each port will be monitored using a separate <code class="literal">id</code>, with the given <code class="literal">id</code> value, used as a prefix in the Synthetics data, and the configured <code class="literal">name</code> shared across events sent via this check.</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">hosts: ["localhost"]
ports: [80, 9200, 5044]</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-tcp-check"></a> <span class="strong strong"><strong><code class="literal">check</code></strong></span></p></td>
<td align="left" valign="top">
<p>An optional payload string to send to the remote host and the expected answer. If no payload is specified, the endpoint is assumed to be available if the connection attempt was successful. If <code class="literal">send</code> is specified without <code class="literal">receive</code>, any response is accepted as OK. If <code class="literal">receive</code> is specified without <code class="literal">send</code>, no payload is sent, but the client expects to receive a payload in the form of a "hello message" or "banner" on connect.</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">check.send: 'Hello World'
check.receive: 'Hello World'</pre>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">check:
  send: 'Hello World'
  receive: 'Hello World'</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-tcp-proxy_url"></a> <span class="strong strong"><strong><code class="literal">proxy_url</code></strong></span></p></td>
<td align="left" valign="top">
<p>The URL of the SOCKS5 proxy to use when connecting to the server. The value must be a URL with a scheme of socks5://.</p>
<p>If the SOCKS5 proxy server requires client authentication, then a username and password can be embedded in the URL.</p>
<p>When using a proxy, hostnames are resolved on the proxy server instead of on the client. You can change this behavior by setting the <code class="literal">proxy_use_local_resolver</code> option.</p>
<p><span class="strong strong"><strong>Examples</strong></span>:</p>
<p>A proxy URL that requires client authentication:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">proxy_url: socks5://user:password@socks5-proxy:2233</pre>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-tcp-proxy_use_local_resolver"></a> <span class="strong strong"><strong><code class="literal">proxy_use_local_resolver</code></strong></span><br>
(<a class="xref" href="synthetics-lightweight.html#synthetics-lightweight-data-bool" title="Boolean">boolean</a>)</p></td>
<td align="left" valign="top">
<p>A Boolean value that determines whether hostnames are resolved locally instead of being resolved on the proxy server. The default value is <code class="literal">false</code>, which means that name resolution occurs on the proxy server.</p>
<p><span class="strong strong"><strong>Default</strong></span>: <code class="literal">false</code></p>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><a id="monitor-tcp-ssl"></a> <span class="strong strong"><strong><code class="literal">ssl</code></strong></span><br>
(<a href="/guide/en/beats/heartbeat/8.7/configuration-ssl.html" class="ulink" target="_top">SSL</a>)</p></td>
<td align="left" valign="top">
<p>The TLS/SSL connection settings. If the monitor is <a href="/guide/en/beats/heartbeat/8.7/configuration-ssl.html" class="ulink" target="_top">configured to use SSL</a>, it will attempt an SSL handshake. If <code class="literal">check</code> is not configured, the monitor will only check to see if it can establish an SSL/TLS connection. This check can fail either at TCP level or during certificate validation.</p>
<p><span class="strong strong"><strong>Example</strong></span>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">ssl:
  certificate_authorities: ['/etc/ca.crt']
  supported_protocols: ["TLSv1.0", "TLSv1.1", "TLSv1.2"]</pre>
</div>
<p>Also see <a href="/guide/en/beats/heartbeat/8.7/configuration-ssl.html" class="ulink" target="_top">Configure SSL</a> for a full description of the <code class="literal">ssl</code> options.</p>
</td>
</tr>
</tbody>
</table>
</div>
<h4><a id="synthetics-lightweight-data-types"></a>Data types reference<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h4>
<p>Values of configuration settings are interpreted as required by Synthetics.
If a value can&#8217;t be correctly interpreted as the required type - for example a
string is given when a number is required - Synthetics will fail to start up.</p>
<h5><a id="synthetics-lightweight-data-bool"></a>Boolean<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h5>
<p>Boolean values can be either <code class="literal">true</code> or <code class="literal">false</code>. Alternative names for <code class="literal">true</code> are
<code class="literal">yes</code> and <code class="literal">on</code>. Instead of <code class="literal">false</code> the values <code class="literal">no</code> and <code class="literal">off</code> can be used.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">enabled: true
disabled: false</pre>
</div>
<h5><a id="synthetics-lightweight-data-numbers"></a>Number<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h5>
<p>Number values require you to enter the number <em>without</em> single or
double quotes.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">integer: 123
negative: -1
float: 5.4</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Some settings only support a restricted number range.</p>
</div>
</div>
<h5><a id="synthetics-lightweight-data-string"></a>String<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h5>
<p>In <a href="http://www.yaml.org" class="ulink" target="_top">YAML</a>, multiple styles of string definitions are supported:
double-quoted, single-quoted, unquoted.</p>
<p>The double-quoted style is specified by surrounding the string with <code class="literal">"</code>. This
style provides support for escaping unprintable characters using <code class="literal">\</code>, but comes
at the cost of having to escape <code class="literal">\</code> and <code class="literal">"</code> characters.</p>
<p>The single-quoted style is specified by surrounding the string with <code class="literal">'</code>. This
style supports no escaping (use <code class="literal">''</code> to quote a single quote). Only printable
characters can be used when using this form.</p>
<p>Unquoted style requires no quotes, but does not support any escaping and can&#8217;t
include any symbol that has a special meaning in YAML.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Single-quoted style is recommended when defining regular expressions,
event format strings, windows file paths, or non-alphabetical symbolic characters.</p>
</div>
</div>
<h5><a id="synthetics-lightweight-data-duration"></a>Duration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h5>
<p>Durations require a numeric value with optional fraction and required unit.
Valid time units are <code class="literal">ns</code>, <code class="literal">us</code>, <code class="literal">ms</code>, <code class="literal">s</code>, <code class="literal">m</code>, <code class="literal">h</code>. Sometimes features based
on durations can be disabled by using zero or negative durations.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">duration1: 2.5s
duration2: 6h
duration_disabled: -1s</pre>
</div>
<h5><a id="synthetics-lightweight-data-regex"></a>Regular expression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.7/docs/en/observability/synthetics-lightweight.asciidoc">edit</a></h5>
<p>Regular expressions are special strings that are compiled into regular
expressions at load time.</p>
<p>As regular expressions and YAML use <code class="literal">\</code> for escaping
characters in strings, it&#8217;s highly recommended to use single quoted strings when
defining regular expressions. When single quoted strings are used, the <code class="literal">\</code> character
is not interpreted by YAML parser as an escape symbol.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="synthetics-recorder.html">« Use the Synthetics Recorder</a>
</span>
<span class="next">
<a href="synthetics-manage-monitors.html">Manage monitors »</a>
</span>
</div>
</div>
</body>
</html>
