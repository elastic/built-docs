<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Create and assign feature roles to APM Server users | Elastic Observability [8.16] | Elastic</title>
<meta class="elastic" name="content" content="Create and assign feature roles to APM Server users | Elastic Observability [8.16]">

<link rel="home" href="index.html" title="Elastic Observability [8.16]"/>
<link rel="up" href="apm-secure-comms-stack.html" title="Secure communication with the Elastic Stack"/>
<link rel="prev" href="apm-secure-comms-stack.html" title="Secure communication with the Elastic Stack"/>
<link rel="next" href="apm-beats-api-keys.html" title="Grant access using API keys"/>
<meta class="elastic" name="product_version" content="8.16"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/8.16"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="8.16"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="apm-secure-comms-stack.html">« Secure communication with the Elastic Stack</a>
</span>
<span class="next">
<a href="apm-beats-api-keys.html">Grant access using API keys »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [8.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="application-and-service-monitoring.html">Application and service monitoring</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm.html">Application performance monitoring (APM)</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-securing-apm-server.html">Use APM securely</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-secure-comms-stack.html">Secure communication with the Elastic Stack</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Create and assign feature roles to APM Server users</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h5 class="title"><a id="apm-feature-roles"></a>Create and assign feature roles to APM Server users</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
</div></div></div>

<p>Manage access on a feature-by-feature basis by creating several custom feature-related <em>roles</em> and assigning one or more of these roles to each <em>user or group</em> based on which features they need to access.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>A <em>role</em> identifies a set of permissions that translates to privileges on resources. You can associate a <em>user or group</em> with an arbitrary number of roles. The total set of permissions that a user has is defined by the union of the permissions in all its roles.</p>
<p>In general, there are three types of privileges you&#8217;ll work with when creating roles:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Elasticsearch cluster privileges</strong></span>: Manage the actions a user can perform against your cluster.
</li>
<li class="listitem">
<span class="strong strong"><strong>Elasticsearch index privileges</strong></span>: Control access to the data in specific indices of your cluster.
</li>
<li class="listitem">
<span class="strong strong"><strong>Kibana space privileges</strong></span>: Grant users write or read access to features and apps within Kibana.
</li>
</ul>
</div>
</div>
</div>
<p>The following are common roles that APM Server users might need:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-events" title="Create a writer role"><span class="strong strong"><strong>Writer role</strong></span></a>:
Allows a user to publish events collected by APM Server, which is <span class="strong strong"><strong>required</strong></span> to write to Elasticsearch.
</li>
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-agent-central-config" title="Create a central configuration management role"><span class="strong strong"><strong>Central configuration management role</strong></span></a>:
Allows a user to view APM Agent central configurations, which is <span class="strong strong"><strong>required</strong></span> when
<a class="xref" href="apm-agent-configuration.html" title="APM agent central configuration">central configuration management</a> is enabled (it is enabled by default).
</li>
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-monitoring" title="Create a monitoring role"><span class="strong strong"><strong>Monitoring role</strong></span></a>: Allows a user to publish monitoring data,
view monitoring data, or both.
</li>
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-rum-source-mapping"><span class="strong strong"><strong>RUM source mapping role</strong></span></a>: Allows a user to read RUM source maps.
</li>
</ul>
</div>
<div class="sidebar">
<div class="titlepage"><div><div>
<p class="title"><strong>Example: Assigning multiple roles to an APM Server user</strong></p>
</div></div></div>
<p>If you want to create an APM Server user who can use the Elastic APM Real User Monitoring (RUM)
JavaScript Agent to ingest data from a frontend application and you use central configuration
to manage APM agents, you would need to assign these three roles to the user:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-events" title="Create a writer role">Writer role</a>
</li>
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-agent-central-config" title="Create a central configuration management role">Central configuration management role</a>
</li>
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-rum-source-mapping">RUM source mapping role</a>
</li>
</ul>
</div>
</div>
<div class="position-relative"><h7><a id="apm-privileges-to-publish-events"></a>Create a <em>writer</em> role</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<p>APM users that publish events to Elasticsearch <em>must</em> have privileges to write to APM data streams.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is not needed when APM Server doesn&#8217;t write to Elasticsearch directly.
For example, in some cases you may configure APM Server to write to another
output like Logstash, Kafka, or any other output supported by libbeat.
In these cases, different authentication credentials will need to be passed to
<a class="xref" href="apm-configure-agent-config.html#apm-agent-config-elasticsearch" title="apm-server.agent.config.elasticsearch"><code class="literal">apm-server.agent.config.elasticsearch</code></a>.</p>
</div>
</div>
<p>To grant an APM Server user the required privileges for writing events to Elasticsearch:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Create a <span class="strong strong"><strong>general writer role</strong></span>, called something like <code class="literal">apm_writer</code>,
that has the following privileges:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Privilege</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Index</p></td>
<td align="left" valign="top"><p><code class="literal">auto_configure</code> on <code class="literal">traces-apm*</code>, <code class="literal">logs-apm*</code>, and <code class="literal">metrics-apm*</code> indices</p></td>
<td align="left" valign="top"><p>Permits auto-creation of indices and data streams</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Index</p></td>
<td align="left" valign="top"><p><code class="literal">create_doc</code> on <code class="literal">traces-apm*</code>, <code class="literal">logs-apm*</code>, and <code class="literal">metrics-apm*</code> indices</p></td>
<td align="left" valign="top"><p>Write events into Elasticsearch</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Cluster</p></td>
<td align="left" valign="top"><p><code class="literal">monitor</code></p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Allows cluster UUID checks, which are performed as part of APM server startup preconditions
if <a href="/guide/en/elasticsearch/reference/8.16/security-settings.html" class="ulink" target="_top">Elasticsearch security</a> is enabled (it is enabled by default).
</li>
<li class="listitem">
Allows a license check, which is required if <a class="xref" href="apm-sampling.html#apm-tail-based-sampling" title="Tail-based sampling">tail-based sampling</a> is enabled.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you have explicitly disabled Elastic security <em>and</em> you are <em>not</em> using tail-based sampling,
this privilege may not be necessary.</p>
</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="listitem">
Assign the <span class="strong strong"><strong>general writer role</strong></span> to APM Server users who need to publish APM data.
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Assign <a class="xref" href="apm-feature-roles.html" title="Create and assign feature roles to APM Server users">additional APM feature roles</a> to users as needed including the
<em>Central configuration management role</em>, which is <a class="xref" href="apm-feature-roles.html#apm-central-config-role-note">required in most cases</a>.</p>
</div>
</div>
<div class="position-relative"><h7><a id="apm-privileges-agent-central-config"></a>Create a <em>central configuration management</em> role</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<a id="apm-central-config-role-note"></a>
<p>The privileges included in this role are <span class="strong strong"><strong>required</strong></span> for all users when <a class="xref" href="apm-agent-configuration.html" title="APM agent central configuration">central configuration management</a> is enabled (it is enabled by default). You need this role unless central configuration management has been explicitly disabled in the Applications UI.</p>
</div>
</div>
<p><a id="apm-privileges-agent-central-config-server"></a>APM Server acts as a proxy between your APM agents and the Applications UI.
The Applications UI communicates any changed settings to APM Server so that your agents only need to poll the Server
to determine which central configuration settings have changed.</p>
<p>To create a role with the required privileges for managing central configuration in Elasticsearch without Kibana,
you must use the <a href="/guide/en/elasticsearch/reference/8.16/security-api-put-role.html" class="ulink" target="_top">Roles API</a> (the required privileges can&#8217;t be assigned to a role in Kibana):</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST /_security/role/apm_agentcfg
{
 "description": "Allow APM Server to manage central configurations in Elasticsearch.",
 "indices": [
   {
     "names": [".apm-agent-configuration"],
     "privileges": ["read"],
     "allow_restricted_indices": true
   }
 ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/19.console"></div>
<p>The previous privileges should be sufficient for APM agent central configuration to work properly
as long as APM Server communicates with Elasticsearch successfully.
If it fails, it may fallback to read agent central configuration through Kibana if configured,
which requires the following privileges:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Privilege</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Spaces</p></td>
<td align="left" valign="top"><p><code class="literal">Read</code> on Applications UI</p></td>
<td align="left" valign="top"><p>Allow APM Server to manage central configurations via the Applications UI</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Assign <a class="xref" href="apm-feature-roles.html" title="Create and assign feature roles to APM Server users">additional APM feature roles</a> to users as needed including the
<em>Writer role</em>, which is <a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-events" title="Create a writer role">required in most cases</a>.</p>
</div>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Looking for privileges and roles needed to use central configuration from the Applications UI or APM UI API?
See <a class="xref" href="apm-app-central-config-user.html" title="Applications UI central config user">Applications UI central configuration user</a>.</p>
</div>
</div>
<div class="position-relative"><h7><a id="apm-privileges-to-publish-monitoring"></a>Create a <em>monitoring</em> role</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<p>Elasticsearch security features provides built-in users and roles for publishing and viewing monitoring data.
The privileges and roles needed to publish monitoring data
depend on the method used to collect that data.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p><a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-monitoring-write" title="Publish monitoring data">Publish monitoring data</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-monitoring-internal" title="Internal collection">Internal collection</a>
</li>
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-monitoring-metricbeat" title="Metricbeat collection">Metricbeat collection</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-monitoring-view" title="View monitoring data">View monitoring data</a>
</li>
</ul>
</div>
<div class="position-relative"><h8><a id="apm-privileges-to-publish-monitoring-write"></a>Publish monitoring data</h8><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>Elastic Cloud users:</strong></span> This section does not apply to our
<a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a>.
Monitoring on Elastic Cloud is enabled by clicking the <span class="strong strong"><strong>Enable</strong></span> button in the <span class="strong strong"><strong>Monitoring</strong></span> panel.</p>
</div>
</div>
<div class="position-relative"><h9><a id="apm-privileges-to-publish-monitoring-internal"></a>Internal collection</h9><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<p>If you&#8217;re using <a class="xref" href="apm-monitoring-internal-collection.html" title="Use internal collection to send monitoring data">internal collection</a> to
collect metrics about APM Server, either:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the built-in <code class="literal">apm_system</code> user or role
</li>
<li class="listitem">
Create a custom role
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Use a built-in user or role</strong></span></p>
<p>Elasticsearch security features provides the <code class="literal">apm_system</code> <a href="/guide/en/elasticsearch/reference/8.16/built-in-users.html" class="ulink" target="_top">built-in user</a> and
<code class="literal">apm_system</code> <a href="/guide/en/elasticsearch/reference/8.16/built-in-roles.html" class="ulink" target="_top">built-in role</a> to send
monitoring information. You can use the built-in user, if it&#8217;s available in your
environment, create a user who has the built-in role assigned,
or create a user and manually assign the privileges needed to send monitoring
information.</p>
<p>If you use the built-in <code class="literal">apm_system</code> user,
make sure you set the password before using it.</p>
<p><span class="strong strong"><strong>Create a custom role</strong></span></p>
<p>If you don&#8217;t use the <code class="literal">apm_system</code> user, you can create a custom role:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Create a <span class="strong strong"><strong>monitoring role</strong></span>, called something like
<code class="literal">apm_monitoring_writer</code>, that has the following privileges:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Privilege</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Index</p></td>
<td align="left" valign="top"><p><code class="literal">create_index</code> on <code class="literal">.monitoring-beats-*</code> indices</p></td>
<td align="left" valign="top"><p>Create monitoring indices in Elasticsearch</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Index</p></td>
<td align="left" valign="top"><p><code class="literal">create_doc</code> on <code class="literal">.monitoring-beats-*</code> indices</p></td>
<td align="left" valign="top"><p>Write monitoring events into Elasticsearch</p></td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="listitem">
Assign the <span class="strong strong"><strong>monitoring role</strong></span> to APM Server users who need to write monitoring data to Elasticsearch.
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Assign <a class="xref" href="apm-feature-roles.html" title="Create and assign feature roles to APM Server users">additional APM feature roles</a> to users as needed including the
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-events" title="Create a writer role"><em>Writer role</em></a> and <a class="xref" href="apm-feature-roles.html#apm-central-config-role-note"><em>Central configuration management role</em></a>,
both of which are required in most cases.</p>
</div>
</div>
<div class="position-relative"><h9><a id="apm-privileges-to-publish-monitoring-metricbeat"></a>Metricbeat collection</h9><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When using Metricbeat to collect metrics,
no roles or users need to be created with APM Server.
See <a class="xref" href="apm-monitoring-metricbeat-collection.html" title="Use Metricbeat to send monitoring data">Use Metricbeat collection</a>
for complete details on setting up Metricbeat collection.</p>
</div>
</div>
<p>If you&#8217;re <a class="xref" href="apm-monitoring-metricbeat-collection.html" title="Use Metricbeat to send monitoring data">using Metricbeat</a> to collect
metrics about APM Server, you can either:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the built-in <code class="literal">remote_monitoring_user</code> user or role
</li>
<li class="listitem">
Create a custom user
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Use a built-in user or role</strong></span></p>
<p>Elasticsearch security features provides the <code class="literal">remote_monitoring_user</code>
<a href="/guide/en/elasticsearch/reference/8.16/built-in-users.html" class="ulink" target="_top">built-in user</a>, and the <code class="literal">remote_monitoring_collector</code>
and <code class="literal">remote_monitoring_agent</code> <a href="/guide/en/elasticsearch/reference/8.16/built-in-roles.html" class="ulink" target="_top">built-in roles</a> for
collecting and sending monitoring information. You can use the built-in user, if
it&#8217;s available in your environment, or create a user who has the privileges
needed to collect and send monitoring information.</p>
<p>If you use the built-in <code class="literal">remote_monitoring_user</code> user,
make sure you set the password before using it.</p>
<p><span class="strong strong"><strong>Create a custom user</strong></span></p>
<p>If you don&#8217;t use the <code class="literal">remote_monitoring_user</code> user, you can create a custom user:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Create a <span class="strong strong"><strong>monitoring user</strong></span> on the production cluster who will collect and send monitoring
information. Assign the following roles to the <span class="strong strong"><strong>monitoring user</strong></span>:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Role</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">remote_monitoring_collector</code></p></td>
<td align="left" valign="top"><p>Collect monitoring metrics from APM Server</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">remote_monitoring_agent</code></p></td>
<td align="left" valign="top"><p>Send monitoring data to the monitoring cluster</p></td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Assign <a class="xref" href="apm-feature-roles.html" title="Create and assign feature roles to APM Server users">additional APM feature roles</a> to users as needed including the
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-events" title="Create a writer role"><em>Writer role</em></a> and <a class="xref" href="apm-feature-roles.html#apm-central-config-role-note"><em>Central configuration management role</em></a>,
both of which are required in most cases.</p>
</div>
</div>
<div class="position-relative"><h8><a id="apm-privileges-to-publish-monitoring-view"></a>View monitoring data</h8><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<p>To grant users the required privileges for viewing monitoring data:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Create a <span class="strong strong"><strong>monitoring role</strong></span>, called something like
<code class="literal">apm_monitoring_viewer</code>, that has the following privileges:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Privilege</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Spaces</p></td>
<td align="left" valign="top"><p><code class="literal">Read</code> on Stack monitoring</p></td>
<td align="left" valign="top"><p>Read-only access to the Stack Monitoring feature in Kibana.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Spaces</p></td>
<td align="left" valign="top"><p><code class="literal">Read</code> on Dashboards</p></td>
<td align="left" valign="top"><p>Read-only access to the Dashboards feature in Kibana.</p></td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="listitem">
<p>Assign the <span class="strong strong"><strong>monitoring role</strong></span>, along with the following built-in roles, to users who
need to view monitoring data for APM Server:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Role</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">monitoring_user</code></p></td>
<td align="left" valign="top"><p>Grants access to monitoring indices for APM Server</p></td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Assign <a class="xref" href="apm-feature-roles.html" title="Create and assign feature roles to APM Server users">additional APM feature roles</a> to users as needed including the
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-events" title="Create a writer role"><em>Writer role</em></a> and <a class="xref" href="apm-feature-roles.html#apm-central-config-role-note"><em>Central configuration management role</em></a>,
both of which are required in most cases.</p>
</div>
</div>
<div class="position-relative"><h7><a id="apm-privileges-rum-source-map"></a>Create a <em>source map</em> role</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/8.16/docs/en/observability/apm/security/elastic-stack/feature-roles.asciidoc">edit</a></div>
<p><a id="apm-privileges-rum-source-mapping"></a>If <a class="xref" href="apm-configuration-rum.html" title="Configure Real User Monitoring (RUM)">real user monitoring</a> is enabled, additional privileges are required to read source maps.</p>
<p>To grant an APM Server user with the required privileges for reading RUM source maps from Elasticsearch directly without Kibana,
assign the user the following privileges:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Privilege</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Index</p></td>
<td align="left" valign="top"><p><code class="literal">read</code> on <code class="literal">.apm-source-map</code> index</p></td>
<td align="left" valign="top"><p>Allow APM Server to read RUM source maps from Elasticsearch</p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Assign <a class="xref" href="apm-feature-roles.html" title="Create and assign feature roles to APM Server users">additional APM feature roles</a> to users as needed including the
<a class="xref" href="apm-feature-roles.html#apm-privileges-to-publish-events" title="Create a writer role"><em>Writer role</em></a> and <a class="xref" href="apm-feature-roles.html#apm-central-config-role-note"><em>Central configuration management role</em></a>,
both of which are required in most cases.</p>
</div>
</div>
<p>The previous privileges should be sufficient for RUM source mapping to work properly
as long as APM Server communicates with Elasticsearch successfully.
If it fails, it may fallback to read source maps through Kibana if configured,
which requires additional Kibana privileges.
See <a class="xref" href="apm-rum-sourcemap-api.html" title="RUM source map API">RUM source map API</a> for more details.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="apm-secure-comms-stack.html">« Secure communication with the Elastic Stack</a>
</span>
<span class="next">
<a href="apm-beats-api-keys.html">Grant access using API keys »</a>
</span>
</div>
</body>
</html>
