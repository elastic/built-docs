<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Annotation API | Elastic Observability [master] | Elastic</title>
<meta class="elastic" name="content" content="Annotation API | Elastic Observability [master]">

<link rel="home" href="index.html" title="Elastic Observability [master]"/>
<link rel="up" href="apm-app-api.html" title="APM UI API"/>
<link rel="prev" href="apm-search-config.html" title="Search configuration"/>
<link rel="next" href="apm-annotation-create.html" title="Create or update annotation"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/master"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="apm-search-config.html">« Search configuration</a>
</span>
<span class="next">
<a href="apm-annotation-create.html">Create or update annotation »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm.html">Application performance monitoring (APM)</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-app-api.html">APM UI API</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Annotation API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm-ui/api.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="apm-annotation-api"></a>Annotation API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm-ui/api.asciidoc">edit</a></h3>
</div></div></div>
<p>The Annotation API allows you to annotate visualizations in the APM UI with significant events, like deployments,
allowing you to easily see how these events are impacting the performance of your existing applications.</p>
<p>By default, annotations are stored in a newly created <code class="literal">observability-annotations</code> index.
The name of this index can be changed in your <code class="literal">config.yml</code> by editing <code class="literal">xpack.observability.annotations.index</code>.
If you change the default index name, you&#8217;ll also need to <a class="xref" href="apm-app-annotation-user-create.html" title="APM UI annotation user">update your user privileges</a> accordingly.</p>
<p>The following APIs are available:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="apm-annotation-create.html" title="Create or update annotation">Create or update annotation</a> to create an annotation for APM.
</li>
</ul>
</div>
<h5><a id="use-annotation-api"></a>How to use APM APIs<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm-ui/api.asciidoc">edit</a></h5>
<details>
<summary class="title">Expand for required headers, privileges, and usage details</summary>
<div class="content">
<p>Interact with APM APIs using cURL or another API tool.
All APM APIs are Kibana APIs, not Elasticsearch APIs;
because of this, the Kibana dev tools console cannot be used to interact with APM APIs.</p>
<p>For all APM APIs, you must use a request header.
Supported headers are <code class="literal">Authorization</code>, <code class="literal">kbn-xsrf</code>, and <code class="literal">Content-Type</code>.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization: ApiKey {credentials}</code>
</span>
</dt>
<dd>
<p>
Kibana supports token-based authentication with the Elasticsearch API key service.
The API key returned by the  <a href="/guide/en/elasticsearch/reference/master/security-api-create-api-key.html" class="ulink" target="_top">Elasticsearch create API key API</a>
can be used by sending a request with an <code class="literal">Authorization</code> header that has a value of <code class="literal">ApiKey</code> followed by the <code class="literal">{credentials}</code>,
where <code class="literal">{credentials}</code> is the base64 encoding of <code class="literal">id</code> and <code class="literal">api_key</code> joined by a colon.
</p>
<p>Alternatively, you can create a user and use their username and password to authenticate API access: <code class="literal">-u $USER:$PASSWORD</code>.</p>
<p>Whether using <code class="literal">Authorization: ApiKey {credentials}</code>, or <code class="literal">-u $USER:$PASSWORD</code>,
users interacting with APM APIs must have <a class="xref" href="apm-app-api-user.html" title="APM UI API user">sufficient privileges</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">kbn-xsrf: true</code>
</span>
</dt>
<dd>
<p>
By default, you must use <code class="literal">kbn-xsrf</code> for all API calls, except in the following scenarios:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The API endpoint uses the <code class="literal">GET</code> or <code class="literal">HEAD</code> operations
</li>
<li class="listitem">
The path is allowed using the <code class="literal">server.xsrf.allowlist</code> setting
</li>
<li class="listitem">
XSRF protections are disabled using the <code class="literal">server.xsrf.disableProtection</code> setting
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">Content-Type: application/json</code>
</span>
</dt>
<dd>
Applicable only when you send a payload in the API request.
Kibana API requests and responses use JSON.
Typically, if you include the <code class="literal">kbn-xsrf</code> header, you must also include the <code class="literal">Content-Type</code> header.
</dd>
</dl>
</div>
</div>
</details>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="apm-search-config.html">« Search configuration</a>
</span>
<span class="next">
<a href="apm-annotation-create.html">Create or update annotation »</a>
</span>
</div>
</body>
</html>
