<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Metrics | Elastic Observability [master] | Elastic</title>
<meta class="elastic" name="content" content="Metrics | Elastic Observability [master]">

<link rel="home" href="index.html" title="Elastic Observability [master]"/>
<link rel="up" href="apm-api-events.html" title="Elastic APM events intake API"/>
<link rel="prev" href="apm-api-error.html" title="Errors"/>
<link rel="next" href="apm-api-event-example.html" title="Example request body"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/master"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="apm-api-error.html">« Errors</a>
</span>
<span class="next">
<a href="apm-api-event-example.html">Example request body »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="application-and-service-monitoring.html">Application and service monitoring</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm.html">Application performance monitoring (APM)</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-api.html">APM Server API</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-api-events.html">Elastic APM events intake API</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Metrics</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/api-metricset.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h5 class="title"><a id="apm-api-metricset"></a>Metrics</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/api-metricset.asciidoc">edit</a></div>
</div></div></div>
<p>Metrics contain application metric data captured by an APM agent.</p>
<div class="position-relative"><h6><a id="apm-api-metricset-schema"></a>Metric Schema</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/api-metricset.asciidoc">edit</a></div>
<p>APM Server uses JSON Schema to validate requests. The specification for metrics is defined on
<a href="https://github.com/elastic/apm-server/blob/9.0/docs/spec/v2/metricset.json" class="ulink" target="_top">GitHub</a> and included below:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "$id": "docs/spec/v2/metricset",
  "type": "object",
  "properties": {
    "faas": {
      "description": "FAAS holds fields related to Function as a Service events.",
      "type": [
        "null",
        "object"
      ],
      "properties": {
        "coldstart": {
          "description": "Indicates whether a function invocation was a cold start or not.",
          "type": [
            "null",
            "boolean"
          ]
        },
        "execution": {
          "description": "The request id of the function invocation.",
          "type": [
            "null",
            "string"
          ]
        },
        "id": {
          "description": "A unique identifier of the invoked serverless function.",
          "type": [
            "null",
            "string"
          ]
        },
        "name": {
          "description": "The lambda function name.",
          "type": [
            "null",
            "string"
          ]
        },
        "trigger": {
          "description": "Trigger attributes.",
          "type": [
            "null",
            "object"
          ],
          "properties": {
            "request_id": {
              "description": "The id of the origin trigger request.",
              "type": [
                "null",
                "string"
              ]
            },
            "type": {
              "description": "The trigger type.",
              "type": [
                "null",
                "string"
              ]
            }
          }
        },
        "version": {
          "description": "The lambda function version.",
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "samples": {
      "description": "Samples hold application metrics collected from the agent.",
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^[^*\"]*$": {
          "type": [
            "null",
            "object"
          ],
          "properties": {
            "counts": {
              "description": "Counts holds the bucket counts for histogram metrics.  These numbers must be positive or zero.  If Counts is specified, then Values is expected to be specified with the same number of elements, and with the same order.",
              "type": [
                "null",
                "array"
              ],
              "items": {
                "type": "integer",
                "minimum": 0
              },
              "minItems": 0
            },
            "type": {
              "description": "Type holds an optional metric type: gauge, counter, or histogram.  If Type is unknown, it will be ignored.",
              "type": [
                "null",
                "string"
              ]
            },
            "unit": {
              "description": "Unit holds an optional unit for the metric.  - \"percent\" (value is in the range [0,1]) - \"byte\" - a time unit: \"nanos\", \"micros\", \"ms\", \"s\", \"m\", \"h\", \"d\"  If Unit is unknown, it will be ignored.",
              "type": [
                "null",
                "string"
              ]
            },
            "value": {
              "description": "Value holds the value of a single metric sample.",
              "type": [
                "null",
                "number"
              ]
            },
            "values": {
              "description": "Values holds the bucket values for histogram metrics.  Values must be provided in ascending order; failure to do so will result in the metric being discarded.",
              "type": [
                "null",
                "array"
              ],
              "items": {
                "type": "number"
              },
              "minItems": 0
            }
          },
          "allOf": [
            {
              "if": {
                "properties": {
                  "counts": {
                    "type": "array"
                  }
                },
                "required": [
                  "counts"
                ]
              },
              "then": {
                "properties": {
                  "values": {
                    "type": "array"
                  }
                },
                "required": [
                  "values"
                ]
              }
            },
            {
              "if": {
                "properties": {
                  "values": {
                    "type": "array"
                  }
                },
                "required": [
                  "values"
                ]
              },
              "then": {
                "properties": {
                  "counts": {
                    "type": "array"
                  }
                },
                "required": [
                  "counts"
                ]
              }
            }
          ],
          "anyOf": [
            {
              "properties": {
                "value": {
                  "type": "number"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "properties": {
                "values": {
                  "type": "array"
                }
              },
              "required": [
                "values"
              ]
            }
          ]
        }
      }
    },
    "service": {
      "description": "Service holds selected information about the correlated service.",
      "type": [
        "null",
        "object"
      ],
      "properties": {
        "name": {
          "description": "Name of the correlated service.",
          "type": [
            "null",
            "string"
          ],
          "maxLength": 1024
        },
        "version": {
          "description": "Version of the correlated service.",
          "type": [
            "null",
            "string"
          ],
          "maxLength": 1024
        }
      }
    },
    "span": {
      "description": "Span holds selected information about the correlated transaction.",
      "type": [
        "null",
        "object"
      ],
      "properties": {
        "subtype": {
          "description": "Subtype is a further sub-division of the type (e.g. postgresql, elasticsearch)",
          "type": [
            "null",
            "string"
          ],
          "maxLength": 1024
        },
        "type": {
          "description": "Type expresses the correlated span's type as keyword that has specific relevance within the service's domain, eg: 'request', 'backgroundjob'.",
          "type": [
            "null",
            "string"
          ],
          "maxLength": 1024
        }
      }
    },
    "tags": {
      "description": "Tags are a flat mapping of user-defined tags. On the agent side, tags are called labels. Allowed value types are string, boolean and number values. Tags are indexed and searchable.",
      "type": [
        "null",
        "object"
      ],
      "additionalProperties": {
        "type": [
          "null",
          "string",
          "boolean",
          "number"
        ],
        "maxLength": 1024
      }
    },
    "timestamp": {
      "description": "Timestamp holds the recorded time of the event, UTC based and formatted as microseconds since Unix epoch",
      "type": [
        "null",
        "integer"
      ]
    },
    "transaction": {
      "description": "Transaction holds selected information about the correlated transaction.",
      "type": [
        "null",
        "object"
      ],
      "properties": {
        "name": {
          "description": "Name of the correlated transaction.",
          "type": [
            "null",
            "string"
          ],
          "maxLength": 1024
        },
        "type": {
          "description": "Type expresses the correlated transaction's type as keyword that has specific relevance within the service's domain, eg: 'request', 'backgroundjob'.",
          "type": [
            "null",
            "string"
          ],
          "maxLength": 1024
        }
      }
    }
  },
  "required": [
    "samples"
  ]
}</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="apm-api-error.html">« Errors</a>
</span>
<span class="next">
<a href="apm-api-event-example.html">Example request body »</a>
</span>
</div>
</body>
</html>
