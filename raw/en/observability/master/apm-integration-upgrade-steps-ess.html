<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Switch an Elastic Cloud cluster to the APM integration | Elastic Observability [master] | Elastic</title>
<meta class="elastic" name="content" content="Switch an Elastic Cloud cluster to the APM integration | Elastic Observability [master]">

<link rel="home" href="index.html" title="Elastic Observability [master]"/>
<link rel="up" href="apm-upgrade-to-apm-integration.html" title="Switch to the Elastic APM integration"/>
<link rel="prev" href="apm-integration-upgrade-steps.html" title="Switch a self-installation to the APM integration"/>
<link rel="next" href="apm-release-notes.html" title="Release notes"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/master"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="apm-integration-upgrade-steps.html">« Switch a self-installation to the APM integration</a>
</span>
<span class="next">
<a href="apm-release-notes.html">Release notes »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm.html">Application performance monitoring (APM)</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-upgrade.html">Upgrade</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-upgrade-to-apm-integration.html">Switch to the Elastic APM integration</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Switch an Elastic Cloud cluster to the APM integration</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/upgrading-to-integration.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="apm-integration-upgrade-steps-ess"></a>Switch an Elastic Cloud cluster to the APM integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/upgrading-to-integration.asciidoc">edit</a></h4>
</div></div></div>

<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="apm-integration-upgrade-steps-ess.html#apm-integration-upgrade-ess-1" title="Upgrade the Elastic Stack">Upgrade the Elastic Stack</a>
</li>
<li class="listitem">
<a class="xref" href="apm-integration-upgrade-steps-ess.html#apm-integration-upgrade-ess-2" title="Switch to Elastic Agent">Switch to Elastic Agent</a>
</li>
<li class="listitem">
<a class="xref" href="apm-integration-upgrade-steps-ess.html#apm-integration-upgrade-ess-3" title="Configure the APM integration">Configure the APM integration</a>
</li>
<li class="listitem">
<a class="xref" href="apm-integration-upgrade-steps-ess.html#apm-integration-upgrade-ess-4" title="Scale APM and Fleet">Scale APM and Fleet</a>
</li>
</ol>
</div>
<h5><a id="apm-integration-upgrade-ess-1"></a>Upgrade the Elastic Stack<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/upgrading-to-integration.asciidoc">edit</a></h5>
<p>Use the Elastic Cloud console to upgrade the Elastic Stack to version 8.16.0.
See the <a href="/guide/en/cloud/current/ec-upgrade-deployment.html" class="ulink" target="_top">Elasticsearch Service upgrade guide</a> for details.</p>
<h5><a id="apm-integration-upgrade-ess-2"></a>Switch to Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/upgrading-to-integration.asciidoc">edit</a></h5>
<p>APM data collection will be interrupted while the migration is in progress.
The process of migrating should only take a few minutes.</p>
<p>With a Superuser account, complete the following steps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In Kibana, navigate to <span class="strong strong"><strong>Observability</strong></span> &gt; <span class="strong strong"><strong>APM</strong></span> &gt; <span class="strong strong"><strong>Settings</strong></span> &gt; <span class="strong strong"><strong>Schema</strong></span>.</p>
<div class="imageblock">
<div class="content">
<img src="./images/schema-agent.png" alt="switch to Elastic Agent">
</div>
</div>
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Switch to Elastic Agent</strong></span>.
Make a note of the <code class="literal">apm-server.yml</code> user settings that are incompatible with Elastic Agent.
Check the confirmation box and click <span class="strong strong"><strong>Switch to Elastic Agent</strong></span>.</p>
<div class="imageblock">
<div class="content">
<img src="./images/agent-settings-migration.png" alt="Elastic Agent settings migration">
</div>
</div>
</li>
</ol>
</div>
<p>Elastic Cloud will now create a Fleet Server instance to contain the new APM integration,
and then will shut down the old APM server instance.
Within minutes your data should begin appearing in the APM app again.</p>
<h5><a id="apm-integration-upgrade-ess-3"></a>Configure the APM integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/upgrading-to-integration.asciidoc">edit</a></h5>
<p>You can now update settings that were removed during the upgrade.
See <a class="xref" href="apm-configuring-howto-apm-server.html" title="Configure">Configure</a> for a reference of all available settings.</p>
<p>In Kibana, navigate to <span class="strong strong"><strong>Management</strong></span> &gt; <span class="strong strong"><strong>Fleet</strong></span>.
Select the <span class="strong strong"><strong>Elastic Cloud Agent Policy</strong></span>.
Next to the <span class="strong strong"><strong>Elastic APM</strong></span> integration, select <span class="strong strong"><strong>Actions</strong></span> &gt; <span class="strong strong"><strong>Edit integration</strong></span>.</p>
<h5><a id="apm-integration-upgrade-ess-4"></a>Scale APM and Fleet<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/upgrading-to-integration.asciidoc">edit</a></h5>
<p>Certain Elasticsearch output configuration options are not available with the APM integration.
To ensure data is not lost, you can scale APM and Fleet up and out.
APM&#8217;s capacity to process events increases with the instance memory size.</p>
<p>Go to the <a href="https://cloud.elastic.co?page=docs&amp;placement=docs-body" class="ulink" target="_top">Elastic Cloud console</a>, select your deployment and click <span class="strong strong"><strong>Edit</strong></span>.
Here you can edit the number and size of each availability zone.</p>
<div class="imageblock">
<div class="content">
<img src="./images/scale-apm.png" alt="scale APM">
</div>
</div>
<p>Congratulations -- you now have the latest and greatest in Elastic APM!</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="apm-integration-upgrade-steps.html">« Switch a self-installation to the APM integration</a>
</span>
<span class="next">
<a href="apm-release-notes.html">Release notes »</a>
</span>
</div>
</body>
</html>
