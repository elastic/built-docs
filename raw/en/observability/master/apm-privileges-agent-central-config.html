<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Grant privileges and roles needed for APM Agent central configuration | Elastic Observability [master] | Elastic</title>
<meta class="elastic" name="content" content="Grant privileges and roles needed for APM Agent central configuration | Elastic Observability [master]">

<link rel="home" href="index.html" title="Elastic Observability [master]"/>
<link rel="up" href="apm-secure-comms-stack.html" title="Secure communication with the Elastic Stack"/>
<link rel="prev" href="apm-privileges-api-key.html" title="Grant privileges and roles needed for API key management"/>
<link rel="next" href="apm-privileges-rum-source-map.html" title="Grant privileges and roles needed for reading source maps"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/master"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="apm-privileges-api-key.html">« Grant privileges and roles needed for API key management</a>
</span>
<span class="next">
<a href="apm-privileges-rum-source-map.html">Grant privileges and roles needed for reading source maps »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm.html">Application performance monitoring (APM)</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-securing-apm-server.html">Secure communication with the Elastic Stack</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="apm-secure-comms-stack.html">Secure communication with the Elastic Stack</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Grant privileges and roles needed for APM Agent central configuration</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/feature-roles.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="apm-privileges-agent-central-config"></a>Grant privileges and roles needed for APM Agent central configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/feature-roles.asciidoc">edit</a></h4>
</div></div></div>

<div class="section">
<div class="titlepage"><div><div>
<h5 class="title"><a id="apm-privileges-agent-central-config-server"></a>APM Server agent central configuration management<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/apm/feature-roles.asciidoc">edit</a></h5>
</div></div></div>
<p>APM Server acts as a proxy between your APM agents and the APM UI.
The APM UI communicates any changed settings to APM Server so that your agents only need to poll the Server
to determine which central configuration settings have changed.</p>
<p>To grant an APM Server user with the required privileges for managing central configuration in Elasticsearch without Kibana,
assign the user the following privileges:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Privilege</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Index</p></td>
<td align="left" valign="top"><p><code class="literal">read</code> on <code class="literal">.apm-agent-configuration</code> index, <code class="literal">allow_restricted_indices: true</code></p></td>
<td align="left" valign="top"><p>Allow APM Server to manage central configurations in Elasticsearch</p></td>
</tr>
</tbody>
</table>
</div>
<p>The above privileges should be sufficient for APM agent central configuration to work properly
as long as APM Server communicates with Elasticsearch successfully.
If it fails, it may fallback to read agent central configuration via Kibana if configured,
which requires the following privileges:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Privilege</th>
<th align="left" valign="top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Spaces</p></td>
<td align="left" valign="top"><p><code class="literal">Read</code> on APM UI</p></td>
<td align="left" valign="top"><p>Allow APM Server to manage central configurations via the APM UI</p></td>
</tr>
</tbody>
</table>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Looking for privileges and roles needed to use central configuration from the APM UI or APM UI API?
See <a class="xref" href="apm-app-central-config-user.html" title="APM UI central config user">APM UI central configuration user</a>.</p>
</div>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="apm-privileges-api-key.html">« Grant privileges and roles needed for API key management</a>
</span>
<span class="next">
<a href="apm-privileges-rum-source-map.html">Grant privileges and roles needed for reading source maps »</a>
</span>
</div>
</body>
</html>
