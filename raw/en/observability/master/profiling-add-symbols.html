<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Add symbols for native frames | Elastic Observability [master] | Elastic</title>
<meta class="elastic" name="content" content="Add symbols for native frames | Elastic Observability [master]">

<link rel="home" href="index.html" title="Elastic Observability [master]"/>
<link rel="up" href="profiling-advanced-configuration.html" title="Advanced configuration"/>
<link rel="prev" href="profiling-tag-data-query.html" title="Tag data for querying"/>
<link rel="next" href="profiling-use-a-proxy.html" title="Use a proxy with the host-agent"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Observability"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Observability/Guide/master"/>
<meta name="DC.subject" content="Observability"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Observability [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="universal-profiling.html">Universal Profiling</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="profiling-advanced-configuration.html">Advanced configuration</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="profiling-tag-data-query.html">« Tag data for querying</a>
</span>
<span class="next">
<a href="profiling-use-a-proxy.html">Use a proxy with the host-agent »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="profiling-add-symbols"></a>Add symbols for native frames<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/profiling-add-symbols.asciidoc">edit</a></h3>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>To see function names and line numbers in traces of applications written in programming languages that
compile to native code (C, C++, Rust, Go, etc.), you need to push symbols to the cluster using the <code class="literal">symbtool</code> CLI utility.</p>
<h5><a id="profiling-download-symbtool"></a>Download the <code class="literal">symbtool</code> binary<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/profiling-add-symbols.asciidoc">edit</a></h5>
<p>Click the appropriate link for your system to download the <code class="literal">symbtool</code> binary:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://ela.st/symbtool-linux-amd64" class="ulink" target="_top">x86_64</a>
</li>
<li class="listitem">
<a href="https://ela.st/symbtool-linux-arm64" class="ulink" target="_top">ARM64</a>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">symbtool</code> binary currently requires a Linux machine.</p>
</div>
</div>
<h5><a id="profiling-use-symbtool"></a>Use the <code class="literal">symbtool</code> binary<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/profiling-add-symbols.asciidoc">edit</a></h5>
<p>Before using the <code class="literal">symbtool</code> binary, create an <a href="/guide/en/kibana/master/api-keys.html#create-api-key" class="ulink" target="_top">Elasticsearch API token</a>.
Pass this token using the <code class="literal">-t</code> or <code class="literal">--api-key</code> argument.</p>
<p>You also need to copy the <span class="strong strong"><strong>Symbols</strong></span> endpoint from the deployment overview page. Pass this URL using the <code class="literal">-u</code> or <code class="literal">--url</code> argument.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/profiling-symbolizer-url.png" alt="profiling symbolizer url">
</div>
</div>
<h5><a id="profiling-symbols-c"></a>Custom C, C++, Go and Rust applications<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/profiling-add-symbols.asciidoc">edit</a></h5>
<p>C/C++ applications must be built with debug symbols (<code class="literal">-g</code>) for symbolization to work. Rust applications
must be built with <a href="https://doc.rust-lang.org/cargo/reference/profiles.html#debug" class="ulink" target="_top"><code class="literal">debug = 1</code></a> (or higher).
Go binaries will not require any special compiler flags and come with debug information by default. The debug
info doesn&#8217;t have to be deployed to production, but it does have to be present temporarily to push it to the
Elastic cluster.</p>
<p>If you don&#8217;t mind deploying your applications with debug symbols, run:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">./symbtool push-symbols executable -e ./my-app -u &lt;symbolizer url&gt; -t &lt;API token&gt;</pre>
</div>
<p>If you don&#8217;t want debug symbols in production, copy the executable and strip the copy.
You can then use the <code class="literal">-d</code> argument to instruct the tool to read the symbols from the original
unstripped binary while still calculating the file ID from the final stripped binary. After
the symbols have been pushed, you can remove the unstripped binary:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">cp ./my-app ./my-stripped-app
strip ./my-stripped-app
./symbtool push-symbols executable -e ./my-stripped-app -d ./my-app -u &lt;symbolizer url&gt; -t &lt;API token&gt;
rm ./my-app</pre>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Pushing debug information and then stripping the binary later <span class="strong strong"><strong>does not work</strong></span>.
The executable passed using the <code class="literal">-e</code> argument is used to calculate the file ID that associates stack
traces with their symbols and stripping the binary later changes that ID.</p>
</div>
</div>
<h5><a id="profiling-symbols-linux"></a>Linux distribution packages<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/observability/profiling-add-symbols.asciidoc">edit</a></h5>
<p>Elastic hosts a public service with symbol information for all packages in the repositories
for various popular Linux distributions. Applications installed from these repositories are automatically symbolized without any action required on the user&#8217;s side.</p>
<p>Elastic supports the following Linux distributions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Alpine Linux
</li>
<li class="listitem">
Amazon Linux
</li>
<li class="listitem">
Debian
</li>
<li class="listitem">
Fedora
</li>
<li class="listitem">
Ubuntu
</li>
</ul>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="profiling-tag-data-query.html">« Tag data for querying</a>
</span>
<span class="next">
<a href="profiling-use-a-proxy.html">Use a proxy with the host-agent »</a>
</span>
</div>
</div>
</body>
</html>
