<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Hot/Frozen - High Availability | Reference architectures | Elastic</title>
<meta class="elastic" name="content" content="Hot/Frozen - High Availability | Reference architectures">

<link rel="home" href="index.html" title="Reference architectures"/>
<link rel="up" href="reference-architectures-overview.html" title="Reference architectures"/>
<link rel="prev" href="reference-architectures-overview.html" title="Reference architectures"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Reference Architectures"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Reference Architectures"/>
<meta name="DC.subject" content="Reference Architectures"/>
<meta name="DC.identifier" content="master"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="reference-architectures-overview.html">« Reference architectures</a>
</span>
<span class="next">
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Reference architectures</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="reference-architectures-overview.html">Reference architectures</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Hot/Frozen - High Availability</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="hot-frozen-architecture"></a>Hot/Frozen - High Availability</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
</div></div></div>
<p>The Hot/Frozen High Availability architecture is cost optimized for large time-series datasets.
In this architecture, the hot tier is primarily used for indexing, searching, and continuity for automated processes.
<a href="/guide/en/elasticsearch/reference/current/searchable-snapshots.html" class="ulink" target="_top">Searchable snapshots</a> are taken from hot into a repository, such as a cloud object store or an on-premises shared filesystem, and then cached to any desired volume on the local disks of the frozen tier.
Data in the repository is indexed for fast retrieval and accessed on-demand from the frozen nodes.
Index and snapshot lifecycle management are used to automate this process.</p>
<p>This architecture is ideal for time-series use cases, such as Observability or Security, that do not require updating.
All the necessary components of the Elastic Stack are included.
This is not intended for sizing workloads, but rather as a basis to ensure that your cluster is ready to handle any desired workload with resiliency.
A very high level representation of data flow is included, and for more detail around ingest architecture see our <a href="/guide/en/ingest/master/use-case-arch.html" class="ulink" target="_top">ingest architectures</a> documentation.</p>
<div class="position-relative"><h3><a id="hot-frozen-use-case"></a>Hot/Frozen use case</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
<p>This Hot/Frozen – High Availability architecture is intended for organizations that:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Have a requirement for cost effective long term data storage (many months or years).
</li>
<li class="listitem">
Provide insights and alerts using logs, metrics, traces, or various event types to ensure optimal performance and quick issue resolution for applications.
</li>
<li class="listitem">
Apply <a href="/guide/en/kibana/current/xpack-ml-anomalies.html" class="ulink" target="_top">machine learning anomaly detection</a> to help detect patterns in time series data to find root cause and resolve problems faster.
</li>
<li class="listitem">
Use an AI assistant (<a href="/guide/en/observability/current/obs-ai-assistant.html" class="ulink" target="_top">Observability</a>, <a href="/guide/en/security/current/security-assistant.html" class="ulink" target="_top">Security</a>, or <a href="/guide/en/kibana/current/playground.html" class="ulink" target="_top">Playground</a>) for investigation, incident response, reporting, query generation, or query conversion from other languages using natural language.
</li>
<li class="listitem">
Deploy an architecture model that allows for maximum flexibility between storage cost and performance.
</li>
</ul>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p><span class="strong strong"><strong>Automated operations that frequently read large data volumes require both high availability (replicas) and predictable low latency (hot, warm or cold tier).</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Common examples of these tasks include look-back windows on security detection/alert rules, transforms, machine learning jobs, or watches; and long running scroll queries or external extract processes.
</li>
<li class="listitem">
These operations should be completed before moving the data into a frozen tier.
</li>
</ul>
</div>
</div>
</div>
<div class="position-relative"><h3><a id="hot-frozen-architecture-diagram"></a>Architecture</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
<div class="imageblock">
<div class="content">
<img src="images/hot-frozen.png" alt="A Hot/Frozen Highly available architecture">
</div>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>We use an Availability Zone (AZ) concept in the architecture above.
When running in your own Data Center (DC) you can equate AZs to failure zones within a datacenter, racks, or even separate physical machines depending on your constraints.</p>
</div>
</div>
<p>The diagram illustrates an Elasticsearch cluster deployed across 3 availability zones (AZ). For production we recommend a minimum of 2 availability zones and 3 availability zones for mission critical applications. See <a href="/guide/en/cloud/current/ec-planning.html" class="ulink" target="_top">Plan for production</a> for more details. A cluster that is running in Elastic Cloud that has data nodes in only two AZs will create a third master-eligible node in a third AZ. High availability cannot be achieved without three zones for any distributed computing technology.</p>
<p>The number of data nodes shown for each tier (hot and frozen) is illustrative and would be scaled up depending on ingest volume and retention period. Hot nodes contain both primary and replica shards. By default, primary and replica shards are always guaranteed to be in different availability zones in Elasticsearch Service, but when self-deploying <a href="/guide/en/elasticsearch/reference/master/shard-allocation-awareness.html" class="ulink" target="_top">shard allocation awareness</a> would need to be configured. Frozen nodes act as a large high-speed cache and retrieve data from the snapshot store as needed.</p>
<p>Machine learning nodes are optional but highly recommended for large scale time series use cases since the amount of data quickly becomes too difficult to analyze. Applying techniques such as machine learning based anomaly detection or Search AI with large language models helps to dramatically speed up problem identification and resolution.</p>
<div class="position-relative"><h3><a id="hot-frozen-hardware"></a>Recommended hardware specifications</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
<p>With Elastic Cloud you can deploy clusters in AWS, Azure, and Google Cloud.  Available hardware types and configurations vary across all three cloud providers but each provides instance types that meet our recommendations for the node types used in this architecture. For more details on these instance types, see our documentation on Elastic Cloud hardware for <a href="/guide/en/cloud/current/ec-default-aws-configurations.html" class="ulink" target="_top">AWS</a>, <a href="/guide/en/cloud/current/ec-default-azure-configurations.html" class="ulink" target="_top">Azure</a>, and <a href="/guide/en/cloud/current/ec-default-gcp-configurations.html" class="ulink" target="_top">GCP</a>. The <span class="strong strong"><strong>Physical</strong></span> column below is guidance, based on the cloud node types, when self-deploying Elasticsearch in your own data center.</p>
<p>In the links provided above, Elastic has performance tested hardware for each of the cloud providers to find the optimal hardware for each node type. We use ratios to represent the best mix of CPU, RAM, and disk for each type.   In some cases the CPU to RAM ratio is key, in others the disk to memory ratio and type of disk is critical. Significantly deviating from these ratios may seem like a way to save on hardware costs, but may result in an Elasticsearch cluster that does not scale and perform well.</p>
<p>This table shows our specific recommendations for nodes in a Hot/Frozen architecture.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
<col class="col_5"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Type</strong></span></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>AWS</strong></span></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Azure</strong></span></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>GCP</strong></span></p></td>
<td align="left" valign="top"><p><span class="strong strong"><strong>Physical</strong></span></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="image"><img src="images/hot.png" alt="Hot data node"></span></p></td>
<td align="left" valign="top"><p>c6gd</p></td>
<td align="left" valign="top"><p>f32sv2</p></td>
<td align="left" valign="top"><p>N2</p></td>
<td align="left" valign="top"><p>16-32 vCPU<br>
64 GB RAM<br>
2-6 TB NVMe SSD</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="image"><img src="images/frozen.png" alt="Frozen data node"></span></p></td>
<td align="left" valign="top"><p>i3en</p></td>
<td align="left" valign="top"><p>e8dsv4</p></td>
<td align="left" valign="top"><p>N2</p></td>
<td align="left" valign="top"><p>8 vCPU<br>
64 GB RAM<br>
6-20+ TB NVMe SSD<br>
Depending on days cached</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="image"><img src="images/machine-learning.png" alt="Machine learning node"></span></p></td>
<td align="left" valign="top"><p>m6gd</p></td>
<td align="left" valign="top"><p>f16sv2</p></td>
<td align="left" valign="top"><p>N2</p></td>
<td align="left" valign="top"><p>16 vCPU<br>
64 GB RAM<br>
256 GB SSD</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="image"><img src="images/master.png" alt="Master node"></span></p></td>
<td align="left" valign="top"><p>c5d</p></td>
<td align="left" valign="top"><p>f16sv2</p></td>
<td align="left" valign="top"><p>N2</p></td>
<td align="left" valign="top"><p>8 vCPU<br>
16 GB RAM<br>
256 GB SSD</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="image"><img src="images/kibana.png" alt="Kibana node"></span></p></td>
<td align="left" valign="top"><p>c6gd</p></td>
<td align="left" valign="top"><p>f16sv2</p></td>
<td align="left" valign="top"><p>N2</p></td>
<td align="left" valign="top"><p>8-16 vCPU<br>
8 GB RAM<br>
256 GB SSD</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h3><a id="hot-frozen-considerations"></a>Important considerations</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
<p><span class="strong strong"><strong>Updating data:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Typically, time series logging use cases are append-only and there is rarely a need to update documents. The frozen tier is read-only.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Multi-AZ frozen tier:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Three availability zones is ideal, but at least two availability zones are recommended to ensure that there will be data nodes available in the event of an AZ failure.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Shard management:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The most important foundational step to maintaining performance as you scale is proper shard management. This includes even shard distribution amongst nodes, shard size, and shard count. For a complete understanding of what shards are and how they should be used, refer to <a href="/guide/en/elasticsearch/reference/current/size-your-shards.html" class="ulink" target="_top">Size your shards</a>.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Snapshots:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If auditable or business critical events are being logged, a backup is necessary.  The choice to back up data will depend on each individual business&#8217;s needs and requirements. Refer to our <a href="/guide/en/elasticsearch/reference/current/snapshots-register-repository.html" class="ulink" target="_top">snapshot repository</a> documentation to learn more.
</li>
<li class="listitem">
To automate snapshots and attach to Index lifecycle management policies, refer to <a href="/guide/en/elasticsearch/reference/current/snapshots-take-snapshot.html#automate-snapshots-slm" class="ulink" target="_top">SLM (Snapshot lifecycle management)</a>.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Kibana:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If self-deploying outside of Elasticsearch Service, ensure that Kibana is configured for <a href="/guide/en/kibana/current/production.html#high-availability" class="ulink" target="_top">high availability</a>.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="hot-frozen-estimate"></a>How many nodes of each do you need?</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
<p>It depends on:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The type of data being ingested (such as logs, metrics, traces)
</li>
<li class="listitem">
The retention period of searchable data (such as 30 days, 90 days, 1 year)
</li>
<li class="listitem">
The amount of data you need to ingest each day
</li>
<li class="listitem">
The number of dashboards, queries, query types and how frequent they are run.
</li>
</ul>
</div>
<p>You can <a href="/contact" class="ulink" target="_top">contact us</a> for an estimate and recommended configuration based on your specific scenario.</p>
<div class="position-relative"><h3><a id="hot-frozen-resources"></a>Resources and references</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/do-not-delete_legacy-docs/docs/en/reference-architectures/hot-frozen.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/current/scalability.html" class="ulink" target="_top">Elasticsearch - Get ready for production</a>
</li>
<li class="listitem">
<a href="/guide/en/cloud/current/ec-prepare-production.html" class="ulink" target="_top">Elasticsearch Service - Preparing a deployment for production</a>
</li>
<li class="listitem">
<a href="/guide/en/elasticsearch/reference/current/size-your-shards.html" class="ulink" target="_top">Size your shards</a>
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="reference-architectures-overview.html">« Reference architectures</a>
</span>
<span class="next">
</span>
</div>
</body>
</html>
