<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Getting Started | Reporting | Elastic</title>
<link rel="home" href="index.html" title="Reporting"/>
<link rel="up" href="index.html" title="Reporting"/>
<link rel="prev" href="index.html" title="Reporting"/>
<link rel="next" href="installing-reporting.html" title="Installing Reporting"/>
<meta name="DC.type" content="Learn/Docs/Legacy/Reporting/Reference"/>
<meta name="DC.subject" content="Reporting"/>
<meta name="DC.identifier" content="2.4"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
From version 5.0 onward, Reporting is part of X-Pack. For more information, see 
<a href=https://www.elastic.co/guide/en/kibana/current/xpack-reporting.html>
    Reporting from Kibana</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Reporting</a></span>
»
<span class="breadcrumb-node">Getting Started</span>
</div>
<div class="navheader">
<span class="prev">
</span>
<span class="next">
<a href="installing-reporting.html">Installing Reporting »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="getting-started"></a>Getting Started<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/reporting/getting-started.asciidoc">edit</a></h1>
</div></div></div>
<p><em>Reporting</em> enables you generate reports that contain Kibana dashboards,
visualizations, and saved searches.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Any user with access to the reporting index has access to every
report generated by all users.</p>
</div>
</div>
<p><a id="getting-started-installation"></a>To install Reporting:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>If you haven&#8217;t already, install the License plugin in Elasticsearch by running
<code class="literal">bin/plugin</code> in  your Elasticsearch installation directory.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/plugin install license</pre>
</div>
</li>
<li class="listitem">
<p>Install the Reporting app into Kibana by running <code class="literal">bin/kibana plugin</code> in your
Kibana installation directory.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">bin/kibana plugin --install kibana/reporting/latest</pre>
</div>
</li>
<li class="listitem">
<p>Set the <code class="literal">reporting.encryptionKey</code> property in the <code class="literal">kibana.yml</code> configuration file.
You can use any text string as the encryption key.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">reporting.encryptionKey: "something_secret"</pre>
</div>
</li>
<li class="listitem">
<p>Windows users must set the <code class="literal">server.host</code> property in the <code class="literal">kibana.yml</code> configuration file.
You can use <code class="literal">localhost</code> to allow only local access, or the IP address of the host.
You can not leave the default <code class="literal">0.0.0.0</code> when using reporting on Windows.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">server.host: localhost</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are using Shield, see <a href="/guide/en/shield/2.4/kibana.html" class="ulink" target="_top">
Using Kibana with Shield</a> and <a href="/guide/en/shield/2.4/reporting.html" class="ulink" target="_top">Using
Reporting with Shield</a> for additional setup instructions.</p>
</div>
</div>
</li>
<li class="listitem">
Start Kibana by running <code class="literal">bin/kibana</code>.
</li>
<li class="listitem">
<p>To verify your Reporting installation, point your web browser at
<code class="literal">http://localhost:5601/</code> to open Kibana. The Generate Report button is
added to the Toolbar:</p>
<p><span class="image"><a class="image" href="images/reporting.jpg"><img src="images/reporting.jpg" alt="Reporting"></a></span></p>
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If report generation fails with the error
"Phantom immediately exited with: 127" you&#8217;ll need to install the <code class="literal">libfontconfig</code>
and <code class="literal">libfreetype6</code> packages.</p>
</div>
</div>
<p>For offline installation instructions and more, see <a class="xref" href="installing-reporting.html" title="Installing Reporting">Installing Reporting</a>.</p>
<h2><a id="manually-generating-reports"></a>Manually Generating Reports<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/reporting/getting-started.asciidoc">edit</a></h2>
<p>The easiest way to generate reports is through the controls in the Kibana UI.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Kibana, load the dashboard, visualization, or saved search you want to
include in the report.
</li>
<li class="listitem">
<p>Click the <span class="strong strong"><strong>Generate PDF</strong></span> button in the Kibana toolbar:</p>
<p><span class="image"><a class="image" href="images/reporting.jpg"><img src="images/reporting.jpg" alt="Reporting"></a></span></p>
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Printable PDF</strong></span>.
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you want to automatically generate reports from a script or with Watcher,
use the displayed Generation URL.</p>
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These examples all use <code class="literal">localhost</code> but in a production environment you would use
the actual host name or IP address.</p>
</div>
</div>
<h2><a id="automating-report-generation"></a>Automating Report Generation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/reporting/getting-started.asciidoc">edit</a></h2>
<p>Report generation can be automated with Watcher, or by submitting an HTTP POST
request from a script.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The interval between report requests must be longer than the time it
takes to generate the reports&#8212;&#8203;otherwise, the report queue can back up. To
avoid this, increase the time between report requests.</p>
<p>If you are using watches to generate a lot of reports, set up a dedicated
Watcher cluster instead of running Watcher on your production cluster.
Currently, if the report queue backs up due to a high number of watcher-related
tasks, you might need to delete the watch index and restart the node to
recover. We are actively working to improve the integration between Watcher
and Reporting to prevent this from happening.</p>
</div>
</div>
<p>You can request PDF reports through three Kibana endpoints:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Dashboard Reports:  <code class="literal">/api/reporting/generate/dashboard/&lt;dashboard-id&gt;&amp;sync</code>
</li>
<li class="listitem">
Visualization Reports:  <code class="literal">/api/reporting/generate/visualization/&lt;visualization-id&gt;&amp;sync</code>
</li>
<li class="listitem">
Saved Search Reports: <code class="literal">/api/reporting/generate/search/&lt;saved-search-id&gt;&amp;sync</code>
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">&amp;sync</code> parameter is required to retrieve a PDF of the report. If you
omit it, Reporting returns a JSON structure that only contains the report
metadata.</p>
</div>
</div>
<p>To specify the time period you want to include in the report, you use the <code class="literal">_g</code>
parameter in the request. For example:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">http://localhost:5601/api/reporting/generate/dashboard/error-monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now-1d%2Fd))&amp;sync</pre>
</div>
<p>You can get the URL for a particular report through the Kibana UI:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Load the saved object.
</li>
<li class="listitem">
Click the <span class="strong strong"><strong>Generate PDF</strong></span> button in the Kibana toolbar.
</li>
<li class="listitem">
Copy the displayed <span class="strong strong"><strong>Generation URL</strong></span>.
</li>
</ol>
</div>
<p>To configure a watch to email reports, you use the
<a href="/guide/en/watcher/current/actions.html#configuring-email-attachments" class="ulink" target="_top">
<code class="literal">http</code> attachment type</a> in an <code class="literal">email</code> action.</p>
<p>For example, the following watch generates a report that contains the
<span class="strong strong"><strong>Error Monitoring</strong></span> dashboard and emails the report every hour:</p>
<div class="pre_wrapper lang-sense">
<pre class="programlisting prettyprint lang-sense">PUT _watcher/watch/error_report
{
  "trigger" : {
    "schedule": {
      "interval": "1h"
    }
  },
  "actions" : {
  "email_admin" : { <a id="CO1-1"></a><i class="conum" data-value="1"></i>
    "email": {
      "to": "'Recipient Name &lt;recipient@example.com&gt;'",
      "subject": "Error Monitoring Report",
      "attachments" : {
        "error_report.pdf" : {
          "http" : {
            "content_type" : "application/pdf",
            "request" : {
              "method": "POST", <a id="CO1-2"></a><i class="conum" data-value="2"></i>
              "headers": {
                "kbn-xsrf": "reporting"
              },
              "read_timeout": "300s", <a id="CO1-3"></a><i class="conum" data-value="3"></i>
              "url": "http://localhost:5601/api/reporting/generate/dashboard/Error-Monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now))&amp;sync" <a id="CO1-4"></a><i class="conum" data-value="4"></i>
            }
          }
        }
      }
    }
  }
 }
}</pre>
</div>
<div class="sense_widget" data-snippet="snippets/1.sense"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>You must <a href="/guide/en/watcher/current/email-services.html#email-account" class="ulink" target="_top">
configure at least one email account</a> to enable Watcher to send email.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>As of <a class="xref" href="reporting-release-notes.html#post-change" title="2.4.1">version 2.4.1</a>, requests to the Reporting endpoints
must use POST and include the <code class="literal">kbn-xsrf</code> header.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Increase the <code class="literal">read_timeout</code> to give Reporting enough time to generate the
report.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO1-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>This is an example Generation URL. You can copy and paste the URL for any
report from the Kibana UI.</p>
</td>
</tr>
</table>
</div>
<p>For more information about configuring watches, see the
<a href="/guide/en/watcher/2.4/" class="ulink" target="_top">Watcher Reference</a>.</p>
<h3><a id="securing-reporting"></a>Securing the Reporting Endpoints<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/x-pack/edit/2.4/docs/public/reporting/getting-started.asciidoc">edit</a></h3>
<p>In a production environment, you should use Shield to restrict access to the
Reporting endpoints to authorized users. This requires that you:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a href="/guide/en/shield/2.4/getting-started.html" class="ulink" target="_top">Install and configure Shield</a> on your
Elasticsearch cluster.
</li>
<li class="listitem">
<a href="/guide/en/shield/2.4/kibana.html" class="ulink" target="_top">Install the Shield plugin</a>  into Kibana.
</li>
<li class="listitem">
<a href="/guide/en/shield/2.4/kibana.html#configure-kibana-cert" class="ulink" target="_top">Configure an SSL certificate</a>
for Kibana.
</li>
<li class="listitem">
<p>Configure Watcher to trust the Kibana server&#8217;s certificate by adding it to
the Watcher truststore on each node:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Import the Kibana server certificate into the Watcher truststore using
Java Keytool:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">keytool -importcert -keystore watcher-truststore.jks -file server.crt</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the truststore doesn&#8217;t already exist, it is created.</p>
</div>
</div>
</li>
<li class="listitem">
Make sure the <code class="literal">watcher.http.ssl.truststore.path</code> setting in
<code class="literal">elasticsearch.yml</code> specifies the location of the Watcher
truststore.
</li>
</ol>
</div>
</li>
<li class="listitem">
<a href="/guide/en/shield/2.4/reporting.html" class="ulink" target="_top">Add one or more users</a> who have the permissions
necessary to use Kibana and Reporting.
</li>
</ol>
</div>
<p>Once you&#8217;ve installed the Shield plugin into Kibana and enabled SSL, all
requests to the Reporting endpoints must include valid credentials.
For example, the following watch submits requests as the <code class="literal">es_admin</code> user:</p>
<div class="pre_wrapper lang-sense">
<pre class="programlisting prettyprint lang-sense">PUT _watcher/watch/error_report
{
  "trigger" : {
    "schedule": {
      "interval": "1h"
    }
  },
  "actions" : {
  "email_admin" : {
    "email": {
      "to": "'Recipient Name &lt;recipient@example.com&gt;'",
      "subject": "Error Monitoring Report",
      "attachments" : {
        "error_report.pdf" : {
          "http" : {
            "content_type" : "application/pdf",
            "request" : {
              "method": "POST",
              "scheme": "https", <a id="CO2-1"></a><i class="conum" data-value="1"></i>
              "headers": {
                "kbn-xsrf": "reporting"
              },
              "auth": { <a id="CO2-2"></a><i class="conum" data-value="2"></i>
                "basic": {
                  "username": "es_admin",
                  "password": "adminpassword"
                }
              },
              "read_timeout": "300s",
              "url": "https://localhost:5601/api/reporting/generate/dashboard/Error-Monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now))&amp;sync"
            }
          }
        }
      }
    }
  }
 }
}</pre>
</div>
<div class="sense_widget" data-snippet="snippets/2.sense"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>You must connect to the Reporting endpoints via HTTPS when SSL is enabled.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Provide user credentials for a user with permission to access Kibana and Reporting.
For more information, see <a href="/guide/en/shield/2.4/reporting.html#reporting-app-users" class="ulink" target="_top">
Setting up a Reporting Role</a>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
</span>
<span class="next">
<a href="installing-reporting.html">Installing Reporting »</a>
</span>
</div>
</div>
</body>
</html>
