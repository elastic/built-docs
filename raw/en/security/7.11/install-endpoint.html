<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configure and install Elastic Endpoint Integration (beta) | Elastic Security Solution [7.11] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Security Solution [7.11]"/>
<link rel="up" href="getting-started.html" title="Get started with Elastic Security"/>
<link rel="prev" href="ingest-data.html" title="Ingest data to Elastic Security"/>
<link rel="next" href="advanced-settings.html" title="Configure advanced settings"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/7.11"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="7.11"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [7.11]</a></span>
»
<span class="breadcrumb-link"><a href="getting-started.html">Get started with Elastic Security</a></span>
»
<span class="breadcrumb-node">Configure and install Elastic Endpoint Integration (beta)</span>
</div>
<div class="navheader">
<span class="prev">
<a href="ingest-data.html">« Ingest data to Elastic Security</a>
</span>
<span class="next">
<a href="advanced-settings.html">Configure advanced settings »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="install-endpoint"></a>Configure and install Elastic Endpoint Integration (beta)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>Like other Elastic integrations, Elastic Endpoint Security can be integrated into the Elastic Agent through <a href="/guide/en/fleet/7.11/fleet-overview.html" class="ulink" target="_top">Fleet</a>. Upon configuration, the integration allows the Elastic Agent to monitor for events on your host and send data to the Elastic Security app.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Configuring the Endpoint Integration on the Elastic Agent requires that the user have permission to use Fleet in Kibana.</p>
</div>
</div>
<h3><a id="security-before-you-begin"></a>Before you begin<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<p>Depending on the macOS version you&#8217;re using, macOS requires that you give full disk access to different kernels, system extensions, or files. Review <a class="xref" href="sensor-full-disk-access.html" title="Enable Full Disk Access">Enable Full Disk Access</a> for details.</p>
<h3><a id="add-security-integration"></a>Add Elastic Endpoint integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In Kibana, select <span class="strong strong"><strong>Security</strong></span> &gt; <span class="strong strong"><strong>Administration</strong></span>. If this is not your first time using Elastic Security, select <span class="strong strong"><strong>Fleet</strong></span> &gt; <span class="strong strong"><strong>Integrations</strong></span> and search for "Elastic Endpoint Security".</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/security-integration.png" alt="security integration">
</div>
</div>
</li>
<li class="listitem">
On the Administration page of the Elastic Security app or the Elastic Endpoint Security integration page in Fleet, select <span class="strong strong"><strong>Add Endpoint Security</strong></span>. The integration configuration page appears.
</li>
<li class="listitem">
Select a configuration for the Elastic Agent. You can use either the <span class="strong strong"><strong>Default config</strong></span>, or add security integration to a custom or existing configuration. For more details on Elastic Agent configuration settings, see <a href="/guide/en/fleet/7.11/elastic-agent-configuration.html" class="ulink" target="_top">Configuration settings</a>.
</li>
<li class="listitem">
<p>Configure the Endpoint Security integration with a name and optional description. When the configuration is complete, select <span class="strong strong"><strong>Save integration</strong></span>. Kibana redirects you back to the administration section of the Elastic Security app.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/add-elastic-endpoint-security.png" alt="add elastic endpoint security">
</div>
</div>
</li>
<li class="listitem">
On the "Enable Elastic Endpoint Security" on your Agent&#8217;s page, select the name of your new integration. To enroll your agents with Endpoint Security, select <span class="strong strong"><strong>Enroll Agent</strong></span>.
</li>
<li class="listitem">
Kibana redirects you back to Fleet to add the Elastic Agent to your host.
</li>
</ol>
</div>
<h3><a id="enroll-security-agent"></a>Configure and enroll Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<p>When integrating with the Elastic Agent, Elastic Endpoint Security <span class="strong strong"><strong>requires</strong></span> enrollment through Fleet to enable the integration.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Endpoint Security cannot be integrated with an Elastic Agent in Standalone mode.</p>
</div>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Go to Fleet. Select <span class="strong strong"><strong>Overview</strong></span> &gt; <span class="strong strong"><strong>Add agent</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/add-agent.png" alt="add agent">
</div>
</div>
</li>
<li class="listitem">
In the Add agent pane of the Configurations section, download the Elastic Agent on your host&#8217;s machine.
</li>
<li class="listitem">
<p>After the download is complete, select an agent configuration. The selected integrations should include <span class="strong strong"><strong>Elastic Endpoint Security</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/endpoint-configuration.png" alt="endpoint configuration">
</div>
</div>
</li>
<li class="listitem">
After the Elastic Agent is installed on your host machine, open a command-line interface, and navigate to your Agent&#8217;s directory. Copy the commands from Fleet for your OS to enroll and run the Agent.
</li>
</ol>
</div>
<p>After you have enrolled the Elastic Agent on your host, select <span class="strong strong"><strong>Continue</strong></span>. The host now appears in the Endpoints list, located on the Administration page in the Elastic Security app.</p>
<p>To unenroll an agent from your host, see <a href="/guide/en/fleet/7.11/unenroll-elastic-agent.html" class="ulink" target="_top">Unenroll Elastic Agent</a>.</p>
<h3><a id="enable-kernel-extension"></a>Enable Elastic Endpoint kernel<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<p>When running the Elastic Agent with endpoint integrated on macOS 10.13, 10.14 and 10.15, you will be prompted to approve a kernel extension from "Endgame, Inc". To approve the extension:</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Endgame Sensor users can approve the kernel the same way for the <span class="strong strong"><strong>Elastic Endgame</strong></span> app.</p>
</div>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Select <span class="strong strong"><strong>Open Security Preferences</strong></span>. The <span class="strong strong"><strong>Security and Privacy</strong></span> window opens.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/system-extension.png" alt="system extension">
</div>
</div>
</li>
<li class="listitem">
<p>Select the <span class="strong strong"><strong>Lock</strong></span> icon at the bottom left of the window to make changes to your security settings.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/unlock-security-panel.png" alt="unlock security panel">
</div>
</div>
</li>
<li class="listitem">
<p>Allow "Endgame, Inc" by selecting the <span class="strong strong"><strong>Allow</strong></span> button.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/allow-endgame.png" alt="allow endgame">
</div>
</div>
</li>
</ol>
</div>
<p>If the prompt does not appear because you&#8217;re using a version earlier than macOS Big Sur (11.0), enable the extension by doing the following:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open a Terminal application.
</li>
<li class="listitem">
Enter <code class="literal">kextload /Library/Extension/kendpoint.kext</code>. Prepend the command with <code class="literal">sudo</code> if necessary.
</li>
<li class="listitem">
To confirm the kernel extension has loaded, enter <code class="literal">kextstat | grep co.elastic.kendpoint</code>.
</li>
<li class="listitem">
You should receive an output similar to <code class="literal">149    0 0xffffff7f82e7b000 0x21000    0x21000    co.elastic.kendpoint (7.11.0) BD152A57-ABD3-370A-BBE8-D15A0FCBD19A &lt;6 5 2 1&gt;</code>. If you receive this output, the kernel extension is enabled.
</li>
</ol>
</div>
<h3><a id="configure-security-policy"></a>Configure an integration policy (optional)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<p>After the Elastic Agent is installed successfully, malware prevention is automatically enabled on protected hosts. If needed, you can update the Integration Policy to configure malware protection, event collection, and antivirus settings to meet your company&#8217;s security needs.</p>
<p>To access the security integration policy:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In the Elastic Security app, select the <span class="strong strong"><strong>Administration</strong></span> tab to view the Endpoints list. Remember that you must have admin permissions in Kibana to access this page.
</li>
<li class="listitem">
From the <span class="strong strong"><strong>Integration Policy</strong></span> column, select the Policy you want to configure. The Integration Policy page appears.
</li>
</ol>
</div>
<h4><a id="malware-protection"></a>Malware protection<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h4>
<p>By default, the <span class="strong strong"><strong>Malware Protections Enabled</strong></span> toggle is on, with host notifications enabled or disabled based on the protection level. To disable malware protection, switch the toggle off. Malware protection levels are as follows:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Detect</strong></span>: Detects malware on the host and generates an alert. The agent will <span class="strong strong"><strong>not</strong></span> block malware. You must pay attention to and analyze any malware alerts that are generated. Notifications do not appear by default. Select the <span class="strong strong"><strong>Notify User</strong></span> option to enable them.
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Prevent</strong></span> (Default): Detects malware on the host, blocks it from executing, and generates an alert. Notifications appear by default. Deselect the <span class="strong strong"><strong>Notify User</strong></span> option to disable them.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>Platinum and enterprise users can customize these notifications using the <code class="literal">Elastic Security {action} {filename}</code> syntax.</p>
</div>
</div>
</li>
</ul>
</div>
<h4><a id="event-collection"></a>Event Collection<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h4>
<p>In the <span class="strong strong"><strong>Settings</strong></span> section, review the events that collect data on each operating system. By default, all event data is collected. If you no longer want a specific event to collect data, deselect it.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/malware-protection.png" alt="malware protection">
</div>
</div>
<h4><a id="register-as-antivirus"></a>(Optional) Register as Windows 10 antivirus<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h4>
<p>If you download the Elastic Agent on Windows 10 or above, you can configure Elastic Security as your antivirus software by doing the following:</p>
<p>On the Integration Edit page, look for the <span class="strong strong"><strong>Settings</strong></span> section and find <span class="strong strong"><strong>Type: Register as antivirus</strong></span>. Toggle this option to enable.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/register-as-antivirus.png" alt="register as antivirus">
</div>
</div>
<h4><a id="save-policy"></a>Save Integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h4>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
After you have customized your desired policy settings, click <span class="strong strong"><strong>Save</strong></span>.
</li>
<li class="listitem">
On the dialog that appears, click <span class="strong strong"><strong>Save and Deploy changes</strong></span>. If successful, a "Success" confirmation appears in the lower-right corner.
</li>
</ol>
</div>
<h3><a id="verify-endpoint-enrollment"></a>Verify Endpoint Enrollment<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/7.11/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<p>After installing the Elastic Agent, there&#8217;s a lag time of several hours between when the Elastic Endpoint begins detecting and sending alerts to Kibana. To ensure that the installation of Elastic Endpoint on your host was successful,  go to <span class="strong strong"><strong>Administration &gt; Endpoints</strong></span>. A message appears that says, "Endpoints are enrolling. View agents to track progress". Select <span class="strong strong"><strong>View agents</strong></span> to check the status of your endpoint enrollment.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/endpoints-enrolling.png" alt="endpoints enrolling">
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="ingest-data.html">« Ingest data to Elastic Security</a>
</span>
<span class="next">
<a href="advanced-settings.html">Configure advanced settings »</a>
</span>
</div>
</div>
</body>
</html>
