<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>List endpoints | Elastic Security Solution [7.16] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Security Solution [7.16]"/>
<link rel="up" href="management-api-overview.html" title="Endpoint management API"/>
<link rel="prev" href="get-endpoint-api.html" title="Get endpoint"/>
<link rel="next" href="host-isolation-api.html" title="Isolate a host"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/7.16"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="7.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [7.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="security-apis.html">Elastic Security APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="management-api-overview.html">Endpoint management API</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="get-endpoint-api.html">« Get endpoint</a>
</span>
<span class="next">
<a href="host-isolation-api.html">Isolate a host »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="list-endpoints-api"></a>List endpoints<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/7.16/docs/management/api/list-endpoints-api.asciidoc">edit</a></h2>
</div></div></div>
<p>Retrieves a list of hosts running Endpoint Security.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Console supports Elasticsearch APIs only. Console doesn&#8217;t allow interactions with Kibana APIs. You must use <code class="literal">curl</code> or another HTTP tool instead. For more information, refer to <a href="/guide/en/kibana/current/console-kibana.html" class="ulink" target="_top">Run Elasticsearch API requests</a>.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_request_url_81"></a>Request URL<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/7.16/docs/management/api/list-endpoints-api.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST &lt;kibana host&gt;:&lt;port&gt;/api/endpoint/metadata</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_request_body_35"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/7.16/docs/management/api/list-endpoints-api.asciidoc">edit</a></h3>
</div></div></div>
<p>A JSON object with these fields:</p>
<div class="informaltable">
<table border="1" cellpadding="4px" width="100%">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">paging_properties</code></p></td>
<td align="left" valign="top"><p>Array</p></td>
<td align="left" valign="top">
<p>A set of page instruction Objects that contain the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">page_size</code> (number): Size of results per page. 1 to 10000.
</li>
<li class="listitem">
<code class="literal">page_index</code> (number): The zero-based page of results to retrieve.
</li>
</ul>
</div>
<p>A sample value for <code class="literal">paging_properties</code> would be:</p>
<p><code class="literal">paging_properties: [{page_size: 20}, {page_index: 0}]</code></p>
</td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">filters</code></p></td>
<td align="left" valign="top"><p>Object</p></td>
<td align="left" valign="top">
<p>Filters to apply to the list query. It may contain the following filters as properties:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">kql</code> (string): A KQL string.
</li>
<li class="listitem">
<code class="literal">host_status</code> (array, string): A set of agent health statuses to filter by.
</li>
</ul>
</div>
<p>Accepted health status values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">healthy</code>
</li>
<li class="listitem">
<code class="literal">unhealthy</code>
</li>
<li class="listitem">
<code class="literal">offline</code>
</li>
<li class="listitem">
<code class="literal">updating</code>
</li>
<li class="listitem">
<code class="literal">inactive</code>
</li>
<li class="listitem">
<code class="literal">unenrolled</code>
</li>
</ul>
</div>
</td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_example_requests_22"></a>Example requests<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/7.16/docs/management/api/list-endpoints-api.asciidoc">edit</a></h4>
</div></div></div>
<p>List endpoints:</p>
<div class="pre_wrapper lang-kibana">
<pre class="programlisting prettyprint lang-kibana">POST /api/endpoint/metadata
{
	"paging_properties": [
		{ "page_size": 10 },
		{ "page_index": 0 }
	]
}</pre>
</div>
<div class="kibana_widget" data-snippet="snippets/111.kibana"></div>
<p>Lists endpoints, filtered by Windows OS:</p>
<div class="pre_wrapper lang-kibana">
<pre class="programlisting prettyprint lang-kibana">POST /api/endpoint/metadata
{
    "paging_properties": [
        { "page_size": 10 },
        { "page_index": 0 }
    ],
    "filters": {
        "kql": "united.endpoint.host.os.name : \"Windows\""
    }
}</pre>
</div>
<div class="kibana_widget" data-snippet="snippets/112.kibana"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_response_code_75"></a>Response code<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/7.16/docs/management/api/list-endpoints-api.asciidoc">edit</a></h4>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
Indicates a successful call.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_example_response_22"></a>Example response<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/7.16/docs/management/api/list-endpoints-api.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "hosts": [
        {
            "host_status": "healthy",
            "metadata": {
                "@timestamp": "2021-11-24T15:47:57.432173535Z",
                "Endpoint": {
                    "capabilities": [
                        "isolation"
                    ],
                    "configuration": {
                        "isolation": false
                    },
                    "policy": {
                        "applied": {
                            "endpoint_policy_version": "2",
                            "id": "d5371dcd-93b7-4627-af88-4084f7d6aa3e",
                            "name": "test",
                            "status": "success",
                            "version": "3"
                        }
                    },
                    "state": {
                        "isolation": false
                    },
                    "status": "enrolled"
                },
                "agent": {
                    "build": {
                        "original": "version: 7.16.0, compiled: Tue Nov 16 16:00:00 2021, branch: 7.16, commit: 73a51033db85e0fb3be1c934697ef6a2b08979ab"
                    },
                    "id": "285297c6-3bff-4b83-9a07-f3e749801123",
                    "type": "endpoint",
                    "version": "7.16.0"
                },
                "data_stream": {
                    "dataset": "endpoint.metadata",
                    "namespace": "default",
                    "type": "metrics"
                },
                "ecs": {
                    "version": "1.11.0"
                },
                "elastic": {
                    "agent": {
                        "id": "285297c6-3bff-4b83-9a07-f3e749801123"
                    }
                },
                "event": {
                    "action": "endpoint_metadata",
                    "agent_id_status": "verified",
                    "category": [
                        "host"
                    ],
                    "created": "2021-11-24T15:47:57.432173535Z",
                    "dataset": "endpoint.metadata",
                    "id": "MNtSXK/SkhEBnmgt++++++7S",
                    "ingested": "2021-11-24T15:47:58Z",
                    "kind": "metric",
                    "module": "endpoint",
                    "sequence": 400,
                    "type": [
                        "info"
                    ]
                },
                "host": {
                    "architecture": "x86_64",
                    "hostname": "david-Xubuntu",
                    "id": "0cfead88e2024bd8a27476352b5ab264",
                    "ip": [
                        "127.0.0.1",
                        "::1",
                        "10.0.2.15",
                        "fe80::2ac7:8e15:b957:2fa1"
                    ],
                    "mac": [
                        "08:00:27:e6:78:8b"
                    ],
                    "name": "david-Xubuntu",
                    "os": {
                        "Ext": {
                            "variant": "Ubuntu"
                        },
                        "family": "ubuntu",
                        "full": "Ubuntu 20.04.2",
                        "kernel": "5.8.0-59-generic #66~20.04.1-Ubuntu SMP Thu Jun 17 11:14:10 UTC 2021",
                        "name": "Linux",
                        "platform": "ubuntu",
                        "type": "linux",
                        "version": "20.04.2"
                    }
                },
                "message": "Endpoint metadata"
            },
            "policy_info": {
                "agent": {
                    "applied": {
                        "id": "ed7e3720-4bad-11ec-a2a8-fb22e62a5753",
                        "revision": 0
                    },
                    "configured": {
                        "id": "ed7e3720-4bad-11ec-a2a8-fb22e62a5753",
                        "revision": 3
                    }
                },
                "endpoint": {
                    "id": "d5371dcd-93b7-4627-af88-4084f7d6aa3e",
                    "revision": 2
                }
            }
        },
        {
            "host_status": "healthy",
            "metadata": {
                "@timestamp": "2021-11-24T15:44:31.4917849Z",
                "Endpoint": {
                    "capabilities": [
                        "isolation"
                    ],
                    "configuration": {
                        "isolation": false
                    },
                    "policy": {
                        "applied": {
                            "endpoint_policy_version": "2",
                            "id": "d5371dcd-93b7-4627-af88-4084f7d6aa3e",
                            "name": "test",
                            "status": "success",
                            "version": "3"
                        }
                    },
                    "state": {
                        "isolation": false
                    },
                    "status": "enrolled"
                },
                "agent": {
                    "build": {
                        "original": "version: 7.16.0, compiled: Tue Nov 16 17:00:00 2021, branch: 7.16, commit: 73a51033db85e0fb3be1c934697ef6a2b08979ab"
                    },
                    "id": "abb8a826-6812-448c-a571-6d8269b51449",
                    "type": "endpoint",
                    "version": "7.16.0"
                },
                "data_stream": {
                    "dataset": "endpoint.metadata",
                    "namespace": "default",
                    "type": "metrics"
                },
                "ecs": {
                    "version": "1.11.0"
                },
                "elastic": {
                    "agent": {
                        "id": "abb8a826-6812-448c-a571-6d8269b51449"
                    }
                },
                "event": {
                    "action": "endpoint_metadata",
                    "agent_id_status": "verified",
                    "category": [
                        "host"
                    ],
                    "created": "2021-11-24T15:44:31.4917849Z",
                    "dataset": "endpoint.metadata",
                    "id": "MNtRc++KoKHXXwlj+++++/N9",
                    "ingested": "2021-11-24T15:44:33Z",
                    "kind": "metric",
                    "module": "endpoint",
                    "sequence": 5159,
                    "type": [
                        "info"
                    ]
                },
                "host": {
                    "architecture": "x86_64",
                    "hostname": "WinDev2104Eval",
                    "id": "17d9cabc-7edd-43bc-bacb-8da5f5e6c0e5",
                    "ip": [
                        "10.0.2.15",
                        "fe80::21a6:63d3:d70e:e3ad",
                        "127.0.0.1",
                        "::1"
                    ],
                    "mac": [
                        "08:00:27:b1:1d:5a"
                    ],
                    "name": "WinDev2104Eval",
                    "os": {
                        "Ext": {
                            "variant": "Windows 10 Enterprise Evaluation"
                        },
                        "family": "windows",
                        "full": "Windows 10 Enterprise Evaluation 20H2 (10.0.19042.906)",
                        "kernel": "20H2 (10.0.19042.906)",
                        "name": "Windows",
                        "platform": "windows",
                        "type": "windows",
                        "version": "20H2 (10.0.19042.906)"
                    }
                },
                "message": "Endpoint metadata"
            },
            "policy_info": {
                "agent": {
                    "applied": {
                        "id": "ed7e3720-4bad-11ec-a2a8-fb22e62a5753",
                        "revision": 0
                    },
                    "configured": {
                        "id": "ed7e3720-4bad-11ec-a2a8-fb22e62a5753",
                        "revision": 3
                    }
                },
                "endpoint": {
                    "id": "d5371dcd-93b7-4627-af88-4084f7d6aa3e",
                    "revision": 2
                }
            }
        }
    ],
    "request_page_index": 0,
    "request_page_size": 10,
    "total": 2
}</pre>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="get-endpoint-api.html">« Get endpoint</a>
</span>
<span class="next">
<a href="host-isolation-api.html">Isolate a host »</a>
</span>
</div>
</div>
</body>
</html>
