<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bulk prompt actions | Elastic Security Solution [8.16] | Elastic</title>
<meta class="elastic" name="content" content="Bulk prompt actions | Elastic Security Solution [8.16]">

<link rel="home" href="index.html" title="Elastic Security Solution [8.16]"/>
<link rel="up" href="assistant-api-overview.html" title="Elastic AI Assistant API"/>
<link rel="prev" href="prompts-api-find.html" title="Find prompts"/>
<link rel="next" href="anonymization-fields-api-find.html" title="Find anonymization fields"/>
<meta class="elastic" name="product_version" content="8.16"/>
<meta class="elastic" name="product_name" content="Security"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/8.16"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="8.16"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="prompts-api-find.html">« Find prompts</a>
</span>
<span class="next">
<a href="anonymization-fields-api-find.html">Find anonymization fields »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [8.16]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="security-apis.html">Elastic Security APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="assistant-api-overview.html">Elastic AI Assistant API</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Bulk prompt actions</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="bulk-actions-prompts-api"></a>Bulk prompt actions</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
</div></div></div>
<p>Apply a bulk action (create, update, or delete) to multiple prompts. The bulk action is applied to all prompts that match the filter or to the list of prompts by their IDs.</p>
<div class="position-relative"><h5><a id="_request_url_81"></a>Request URL</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<p><code class="literal">POST &lt;kibana host&gt;:&lt;port&gt;/api/security_ai_assistant/prompts/_bulk_action</code></p>
<div class="position-relative"><h5><a id="_request_body_53"></a>Request body</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<p>A JSON object with the following properties:</p>
<div class="informaltable">
<table border="1" cellpadding="4px" width="100%">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">create</code></p></td>
<td align="left" valign="top"><p><a class="xref" href="bulk-actions-prompts-api.html#bulk-create-object-schema" title="BulkCreateAction object">BulkCreateAction[]</a></p></td>
<td align="left" valign="top"><p>Array of prompt objects to create.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">delete</code></p></td>
<td align="left" valign="top"><p>String[]</p></td>
<td align="left" valign="top"><p>Array of IDs of the prompts to delete.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">update</code></p></td>
<td align="left" valign="top"><p><a class="xref" href="bulk-actions-prompts-api.html#bulk-update-object-schema" title="BulkUpdateAction object">BulkUpdateAction[]</a></p></td>
<td align="left" valign="top"><p>Array of prompt objects with the fields to update.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="bulk-create-object-schema"></a>BulkCreateAction object</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<div class="informaltable">
<table border="1" cellpadding="4px" width="100%">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">name</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Short prompt title.</p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">id</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Prompt ID.</p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">promptType</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top">
<p>Prompt type. Valid values are:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">system</code>
</li>
<li class="listitem">
<code class="literal">quick</code>
</li>
</ul>
</div>
</td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">consumer</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Solution application that the prompt belongs to. For example <code class="literal">securitySolutionUI</code>, <code class="literal">ml</code></p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">content</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Prompt text to send to LLM.</p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">color</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Sets the display color for quick prompts in the UI.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">categories</code></p></td>
<td align="left" valign="top"><p>String[]</p></td>
<td align="left" valign="top"><p>Array of prompt categories.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h4><a id="bulk-update-object-schema"></a>BulkUpdateAction object</h4><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<div class="informaltable">
<table border="1" cellpadding="4px" width="100%">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
<col class="col_4"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Name</th>
<th align="left" valign="top">Type</th>
<th align="left" valign="top">Description</th>
<th align="left" valign="top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">id</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Prompt ID.</p></td>
<td align="left" valign="top"><p>Yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">content</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Prompt text to send to LLM.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">color</code></p></td>
<td align="left" valign="top"><p>String</p></td>
<td align="left" valign="top"><p>Sets the display color for quick prompts in the UI.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">categories</code></p></td>
<td align="left" valign="top"><p>String[]</p></td>
<td align="left" valign="top"><p>Array of prompts categories.</p></td>
<td align="left" valign="top"><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h5><a id="_example_requests_42"></a>Example requests</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<p><span class="strong strong"><strong>Example 1</strong></span></p>
<p>The following request creates a new quick prompt:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST api/security_ai_assistant/prompts/_bulk_action
{
  "create": [
    {
      "name": "test",
      "id": "test",
      "content": "some test content",
      "color": "#D36086",
      "categories": [],
      "promptType": "quick",
      "consumer": "securitySolutionUI"
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/152.console"></div>
<div class="position-relative"><h5><a id="_response_code_107"></a>Response code</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
Indicates a successful call.
</dd>
</dl>
</div>
<div class="position-relative"><h5><a id="_response_payload_83"></a>Response payload</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<p>JSON object containing the action&#8217;s outcome:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">attributes.summary.total</code>: Total number of prompts matching the bulk action
</li>
<li class="listitem">
<code class="literal">attributes.summary.succeeded</code>: Number of successful outcomes (number of prompts that were created, deleted, or updated)
</li>
<li class="listitem">
<code class="literal">attributes.summary.failed</code>: Number of failed outcomes
</li>
<li class="listitem">
<code class="literal">attributes.summary.skipped</code>: Number of prompts that were skipped due to various reasons (explained below)
</li>
<li class="listitem">
<code class="literal">attributes.results.created</code>: Prompt objects that were created during the action&#8217;s execution
</li>
<li class="listitem">
<code class="literal">attributes.results.updated</code>: Prompt objects that were updated during the action&#8217;s execution
</li>
<li class="listitem">
<code class="literal">attributes.results.deleted</code>: Prompt objects that were deleted during the action&#8217;s execution
</li>
<li class="listitem">
<code class="literal">attributes.results.skipped</code>: Prompt that were skipped during the action&#8217;s execution
</li>
</ul>
</div>
<p>A prompt can only be <code class="literal">skipped</code> when the bulk action to be performed on it results in nothing being done. For example, if the <code class="literal">update</code> action is used to update a field that already has the specified value. Objects returned in <code class="literal">attributes.results.skipped</code> only include a prompt&#8217;s <code class="literal">id</code>, <code class="literal">name</code>, and <code class="literal">skip_reason</code>.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "success": true,
  "prompts_count": 1,
  "attributes": {
    "results": {
      "updated": [],
      "created": [
        {
          "timestamp": "2024-08-13T20:24:08.610Z",
          "users": [
            {
              "id": "testuser",
              "name": "elastic"
            }
          ],
          "content": "some test content",
          "updatedAt": "2024-08-13T20:24:08.610Z",
          "id": "0B1pTZEBYaDeA-NhjHej",
          "name": "test",
          "promptType": "quick",
          "color": "#D36086",
          "categories": [],
          "consumer": "securitySolutionUI"
        }
      ],
      "deleted": [],
      "skipped": []
    },
    "summary": {
      "failed": 0,
      "succeeded": 1,
      "skipped": 0,
      "total": 1
    }
  }
}</pre>
</div>
<p><span class="strong strong"><strong>Example 2: Partial failure</strong></span></p>
<p>The following request deletes prompt by ID "8bc7dad0-9320-11ec-9265-8b772383a08d" and updates another prompt by ID "2-R12SZEBYaDeA-NhnUyW" with the new values for content, color and categories:</p>
<div class="pre_wrapper lang-console">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-console">POST api/security_ai_assistant/prompts/_bulk_action
{
  "delete": {
    "ids": [
      "8bc7dad0-9320-11ec-9265-8b772383a08d"
    ]
  },
  "update": [
    {
      "content": "As an expert in security operations and incident response, provide a breakdown of the attached alert and summarize what it might mean for my organization.",
      "id": "2-R12SZEBYaDeA-NhnUyW",
      "color": "#F68FBE",
      "categories": [
        "alert"
      ]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/153.console"></div>
<div class="position-relative"><h5><a id="_response_code_108"></a>Response code</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">500</code>
</span>
</dt>
<dd>
Indicates partial bulk action failure.
</dd>
</dl>
</div>
<div class="position-relative"><h5><a id="_response_payload_84"></a>Response payload</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/AI-for-security/api/bulk-actions-prompts-api.asciidoc">edit</a></div>
<p>If the processing of any prompts fails, the response outputs a partial error, with the ID and/or name of the affected prompt and the corresponding error message. The response also includes successfully processed prompts, in the same format as a successful <code class="literal">200</code> request.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "message": "Bulk delete partially failed",
  "status_code": 500,
  "attributes": {
    "errors": [
      {
        "message": "Some error happened here",
        "status_code": 500,
        "prompts": [
          {
            "id": "8bc7dad0-9320-11ec-9265-8b772383a08d",
            "name": "Prompt title"
          }
        ]
      }
    ],
    "results": {
      "updated": [
        {
          "timestamp": "2024-08-13T01:59:56.053Z",
          "users": [
            {
              "id": "u_mGBROF_q5bmFCATbLXAcCwKa0k8JvONAwSruelyKA5E_0",
              "name": "elastic"
            }
          ],
          "content": "As an expert in security operations and incident response, provide a breakdown of the attached alert and summarize what it might mean for my organization.",
          "isDefault": true,
          "updatedAt": "2024-08-13T20:45:14.763Z",
          "name": "Alert summarization",
          "promptType": "quick",
          "color": "#F68FBE",
          "categories": [
            "alert"
          ],
          "consumer": "securitySolutionUI"
        }
      ],
      "created": [],
      "deleted": [],
      "skipped": []
    },
    "summary": {
      "failed": 1,
      "succeeded": 1,
      "skipped": 0,
      "total": 2
    }
  }
}</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="prompts-api-find.html">« Find prompts</a>
</span>
<span class="next">
<a href="anonymization-fields-api-find.html">Find anonymization fields »</a>
</span>
</div>
</body>
</html>
