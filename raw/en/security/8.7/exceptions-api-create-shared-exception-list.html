<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Create shared exception list | Elastic Security Solution [8.7] | Elastic</title>
<meta class="elastic" name="content" content="Create shared exception list | Elastic Security Solution [8.7]">

<link rel="home" href="index.html" title="Elastic Security Solution [8.7]"/>
<link rel="up" href="exceptions-api-overview.html" title="Exceptions API"/>
<link rel="prev" href="exceptions-api-create-exception-item.html" title="Create exception item"/>
<link rel="next" href="exceptions-api-find-exception-containers.html" title="Find exception containers"/>
<meta class="elastic" name="product_version" content="8.7"/>
<meta class="elastic" name="product_name" content="Security"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/8.7"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="8.7"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [8.7]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="security-apis.html">Elastic Security APIs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="exceptions-api-overview.html">Exceptions API</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="exceptions-api-create-exception-item.html">« Create exception item</a>
</span>
<span class="next">
<a href="exceptions-api-find-exception-containers.html">Find exception containers »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="exceptions-api-create-shared-exception-list"></a>Create shared exception list<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.7/docs/detections/api/exceptions/api-create-shared-exception-list.asciidoc">edit</a></h2>
</div></div></div>
<p>Creates a shared exception list.</p>
<p>An exception list groups <a class="xref" href="exceptions-api-create-exception-item.html" title="Create exception item">exception items</a>
and can be associated with rules. When an exception item&#8217;s query evaluates to
<code class="literal">true</code>, associated rules do <span class="strong strong"><strong>not</strong></span> issue alerts even when their other criteria are met.</p>
<p>A shared exception list can apply to multiple detection rules.
For more information, refer to <a class="xref" href="rules-api-create.html" title="Create rule">Create rule</a> and <a class="xref" href="rules-api-update.html" title="Update rule">Update rule</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>All exception items added to the same list are evaluated using
<code class="literal">OR</code> logic. This means that if any of the items in a list evaluate to <code class="literal">true</code>, this
prevents the rule from generating an alert. Likewise, <code class="literal">OR</code> logic is
used for evaluating exceptions when more than one exception list is
assigned to a rule. To use the <code class="literal">AND</code> operator, you can define multiple clauses
(<code class="literal">entries</code>) in a single exception item.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_request_url_23"></a>Request URL<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.7/docs/detections/api/exceptions/api-create-shared-exception-list.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">POST &lt;kibana host&gt;:&lt;port&gt;/api/exceptions/shared</code></p>
<p>For example, using cURL:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">curl -X POST "&lt;KibanaURL&gt;/api/exceptions/shared"
-u &lt;username&gt;:&lt;password&gt; -H 'kbn-xsrf: true' -H "Content-Type: application/json"
--data "@&lt;link to file&gt;" <a id="CO22-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/43.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO22-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The relative link to the <code class="literal">.ndjson</code> file containing the exception list.</p>
</td>
</tr>
</table>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_example_request_17"></a>Example request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.7/docs/detections/api/exceptions/api-create-shared-exception-list.asciidoc">edit</a></h4>
</div></div></div>
<p>Creates the exception list in the <code class="literal">exception_lists.ndjson</code> file and overwrites
existing lists with the same <code class="literal">list_id</code> values:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">curl -X POST "&lt;KibanaURL&gt;/api/exceptions/shared"
-u &lt;username&gt;:&lt;password&gt; -H 'kbn-xsrf: true' -H "Content-Type: application/json"
--data "@&lt;link to file&gt;" <a id="CO23-1"></a><i class="conum" data-value="1"></i></pre>
</div>
<div class="console_widget" data-snippet="snippets/44.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO23-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The relative link to the <code class="literal">.ndjson</code> file containing the exception list.</p>
</td>
</tr>
</table>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_response_code_25"></a>Response code<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.7/docs/detections/api/exceptions/api-create-shared-exception-list.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200</code>
</span>
</dt>
<dd>
Indicates a successful call.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_response_payload_18"></a>Response payload<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.7/docs/detections/api/exceptions/api-create-shared-exception-list.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "_version":"WzM2NDAsMV0=",
    "created_at":"2022-12-08T18:24:11.678Z",
    "created_by":"elastic",
    "description":"I want to share this list with other rules",
    "id":"832fb2f0-7725-11ed-aec7-81feddf7ae2b",
    "immutable":false,
    "list_id":"dc9e6f28-cedb-4dbb-985b-008956e49fd6",
    "name":"my shared exception list",
    "namespace_type":"single",
    "os_types":[],
    "tags":[],
    "tie_breaker_id":"8c041278-7a1c-4d8c-bb70-f84987fb2c63",
    "type":"detection",
    "updated_at":"2022-12-08T18:24:11.679Z",
    "updated_by":"elastic",
    "version":1
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_sample_ndjson_file"></a>Sample ndjson file<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.7/docs/detections/api/exceptions/api-create-shared-exception-list.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "name": "my shared exception list",
    "description": "I want to share this list with other rules"
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="exceptions-api-create-exception-item.html">« Create exception item</a>
</span>
<span class="next">
<a href="exceptions-api-find-exception-containers.html">Find exception containers »</a>
</span>
</div>
</div>
</body>
</html>
