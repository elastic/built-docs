<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Agentless integrations | Elastic Security Solution [8.x] | Elastic</title>
<meta class="elastic" name="content" content="Agentless integrations | Elastic Security Solution [8.x]">

<link rel="home" href="index.html" title="Elastic Security Solution [8.x]"/>
<link rel="up" href="ingest-data.html" title="Ingest data to Elastic Security"/>
<link rel="prev" href="automatic-import.html" title="Automatic import"/>
<link rel="next" href="security-spaces.html" title="Spaces and Elastic Security"/>
<meta class="elastic" name="product_version" content="8.x"/>
<meta class="elastic" name="product_name" content="Security"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/8.x"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="8.x"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="automatic-import.html">« Automatic import</a>
</span>
<span class="next">
<a href="security-spaces.html">Spaces and Elastic Security »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [8.x]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="getting-started.html">Get started with Elastic Security</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="ingest-data.html">Ingest data to Elastic Security</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Agentless integrations</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-integrations.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="agentless-integrations"></a>Agentless integrations</h2><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-integrations.asciidoc">edit</a></div>
</div></div></div>
<p>Agentless integrations provide a means to ingest data while avoiding the orchestration, management, and maintenance needs associated with standard ingest infrastructure. Using agentless integrations makes manual agent deployment unnecessary, allowing you to focus on your data instead of the agent that collects it.</p>
<p>We currently support one agentless integration: cloud security posture management (CSPM). Using this integration&#8217;s agentless deployment option, you can enable Elastic&#8217;s CSPM capabilities just by providing the necessary credentials. Agentless CSPM deployments support AWS, Azure, and GCP accounts.</p>
<p>To learn more about agentless CSPM deployments, refer to the getting started guides for CSPM on <a class="xref" href="cspm-get-started.html" title="Get started with CSPM for AWS">AWS</a>,  <a class="xref" href="cspm-get-started-azure.html" title="Get started with CSPM for Azure">Azure</a>, or <a class="xref" href="cspm-get-started-gcp.html" title="Get started with CSPM for GCP">GCP</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="agentless-integration-troubleshooting"></a>Agentless integrations FAQ</h3><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-troubleshooting.asciidoc">edit</a></div>
</div></div></div>
<p>Frequently asked questions and troubleshooting steps for Elastic Security&#8217;s agentless CSPM integration.</p>
<div class="position-relative"><h5><a id="_when_i_make_a_new_integration_when_will_i_see_the_agent_appear_on_the_integration_policies_page"></a>When I make a new integration, when will I see the agent appear on the Integration Policies page?</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-troubleshooting.asciidoc">edit</a></div>
<p>After you create a new agentless integration, the new integration policy may show a button that says <span class="strong strong"><strong>Add agent</strong></span> instead of the associated agent for several minutes during agent enrollment. No action is needed other than refreshing the page once enrollment is complete.</p>
<div class="position-relative"><h5><a id="_how_do_i_troubleshoot_an_offline_agent"></a>How do I troubleshoot an <code class="literal">Offline</code> agent?</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-troubleshooting.asciidoc">edit</a></div>
<p>For agentless integrations to successfully connect to Elastic Security, the Fleet server host value must be the default. Otherwise, the agent status on the Fleet page will be <code class="literal">Offline</code>, and logs will include the error <code class="literal">[elastic_agent][error] Cannot checkin in with fleet-server, retrying</code>.</p>
<p>To troubleshoot this issue:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Find <span class="strong strong"><strong>Fleet</strong></span> in the navigation menu or use the <a href="/guide/en/kibana/8.x/introduction.html#kibana-navigation-search" class="ulink" target="_top">global search field</a>. Go to the <span class="strong strong"><strong>Settings</strong></span> tab.
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Fleet server hosts</strong></span>, click the <span class="strong strong"><strong>Actions</strong></span> button for the policy named <code class="literal">Default</code>. This opens the Edit Fleet Server flyout. The policy named <code class="literal">Default</code> should have the <span class="strong strong"><strong>Make this Fleet server the default one</strong></span> setting enabled. If not, enable it, then delete your integration and create it again.
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If the <span class="strong strong"><strong>Make this Fleet server the default one</strong></span> setting was already enabled but problems persist, it&#8217;s possible someone changed the default Fleet server&#8217;s <span class="strong strong"><strong>URL</strong></span> value. In this case, contact Elastic Support to find out what the original <span class="strong strong"><strong>URL</strong></span> value was, update the settings to match this value, then delete your integration and create it again.</p>
</div>
</div>
<div class="position-relative"><h5><a id="_how_do_i_troubleshoot_an_unhealthy_agent"></a>How do I troubleshoot an <code class="literal">Unhealthy</code> agent?</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-troubleshooting.asciidoc">edit</a></div>
<p>On the <span class="strong strong"><strong>Fleet</strong></span> page, the agent associated with an agentless integration has a name that begins with <code class="literal">agentless</code>. To troubleshoot an <code class="literal">Unhealthy</code> agent:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Confirm that you entered the correct credentials for the cloud provider you&#8217;re monitoring. The following is an example of an error log resulting from using incorrect AWS credentials:</p>
<pre class="screen">[elastic_agent.cloudbeat][error] Failed to update registry: failed to get AWS accounts: operation error Organizations: ListAccounts, get identity: get credentials: failed to refresh cached credentials, operation error STS: AssumeRole, https response error StatusCode: 403, RequestID: XXX, api error AccessDenied: User: XXX is not authorized to perform: sts:AssumeRole on resource:XXX</pre>
</li>
</ul>
</div>
<p>For instructions on checking Fleet logs, refer to <a href="/guide/en/fleet/8.x/fleet-troubleshooting.html" class="ulink" target="_top">Fleet troubleshooting</a>.</p>
<div class="position-relative"><h5><a id="_what_does_it_mean_if_no_agents_appear_in_my_integration_policy"></a>What does it mean if no agents appear in my integration policy?</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-troubleshooting.asciidoc">edit</a></div>
<p>Your agentless integration policy won&#8217;t have any enrolled agents if you are using traffic filtering, because agentless integrations do not work in environments with <a href="/guide/en/cloud/current/ec-traffic-filtering-deployment-configuration.html" class="ulink" target="_top">Traffic filtering</a>.</p>
<div class="position-relative"><h5><a id="_how_do_i_delete_an_agentless_integration"></a>How do I delete an agentless integration?</h5><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/security-docs/edit/8.x/docs/getting-started/agentless-troubleshooting.asciidoc">edit</a></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Deleting your integration will remove all associated resources and stop data ingestion.</p>
</div>
</div>
<p>When you create a new agentless CSPM integration, a new agent policy appears within the <span class="strong strong"><strong>Agent policies</strong></span> tab on the <span class="strong strong"><strong>Fleet</strong></span> page, but you can&#8217;t use the <span class="strong strong"><strong>Delete integration</strong></span> button on this page. Instead, you must delete the integration from the CSPM Integration&#8217;s <span class="strong strong"><strong>Integration policies</strong></span> tab.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Find <span class="strong strong"><strong>Integrations</strong></span> in the navigation menu or use the <a href="/guide/en/kibana/8.x/introduction.html#kibana-navigation-search" class="ulink" target="_top">global search field</a>, then search for and select <code class="literal">CSPM</code>.
</li>
<li class="listitem">
Go to the CSPM Integration&#8217;s <span class="strong strong"><strong>Integration policies</strong></span> tab.
</li>
<li class="listitem">
Find the integration policy for the integration you want to delete. Click <span class="strong strong"><strong>Actions</strong></span>, then <span class="strong strong"><strong>Delete integration</strong></span>.
</li>
<li class="listitem">
Confirm by clicking <span class="strong strong"><strong>Delete integration</strong></span> again.
</li>
</ol>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="automatic-import.html">« Automatic import</a>
</span>
<span class="next">
<a href="security-spaces.html">Spaces and Elastic Security »</a>
</span>
</div>
</body>
</html>
