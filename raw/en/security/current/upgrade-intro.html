<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Upgrade Elastic Security to 8.17.3 | Elastic Security Solution [8.17] | Elastic</title>
<meta class="elastic" name="content" content="Upgrade Elastic Security to 8.17.3 | Elastic Security Solution [8.17]">

<link rel="home" href="index.html" title="Elastic Security Solution [8.17]"/>
<link rel="up" href="index.html" title="Elastic Security Solution [8.17]"/>
<link rel="prev" href="whats-new.html" title="What&#8217;s new in 8.17"/>
<link rel="next" href="upgrade-7.17-8x.html" title="Upgrade from 7.17 to an 8.x version"/>
<meta class="elastic" name="product_version" content="8.17"/>
<meta class="elastic" name="product_name" content="Security"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/8.17"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="8.17"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="whats-new.html">« What&#8217;s new in 8.17</a>
</span>
<span class="next">
<a href="upgrade-7.17-8x.html">Upgrade from 7.17 to an 8.x version »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [8.17]</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Upgrade Elastic Security to 8.17.3</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="part">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="upgrade-intro"></a>Upgrade Elastic Security to 8.17.3</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
</div></div></div>
<div class="openblock partintro">
<div class="content">
<p>Before you upgrade Elastic Security, take the necessary preparation steps, which will vary depending on what version you are upgrading to:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="upgrade-intro.html#upgrade-8x-8x" title="Upgrade from an 8.x to an 8.x version">Upgrade from an 8.x to an 8.x version</a>
</li>
<li class="listitem">
<a class="xref" href="upgrade-7.17-8x.html" title="Upgrade from 7.17 to an 8.x version">Upgrade from 7.17 to an 8.x version</a>
</li>
<li class="listitem">
<a class="xref" href="upgrade-intro.html#upgrade-7.16-8.x" title="Upgrade from 7.16 or earlier to an 8.x version">Upgrade from 7.16 or earlier to an 8.x version</a>
</li>
</ul>
</div>
<p>Rolling upgrades are unsupported in Elastic Security, which runs within the Kibana application. To upgrade, you must shut down all Kibana instances, install the new software, and restart Kibana.
Upgrading while older Kibana instances are running can cause data loss or upgrade failures.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>When required, Kibana automatically migrates <a href="/guide/en/kibana/8.17/saved-object-migrations.html" class="ulink" target="_top">saved objects</a>.
In case of an upgrade failure, you can roll back to an
earlier version of Kibana. To roll back, you <span class="strong strong"><strong>must</strong></span> have a
<a href="/guide/en/elasticsearch/reference/8.17/snapshot-restore.html" class="ulink" target="_top">backup snapshot</a> that includes the <code class="literal">kibana</code> feature
state. By default, snapshots include the <code class="literal">kibana</code> feature state.</p>
</div>
</div>
<div class="position-relative"><h2><a id="_upgrading_multiple_kibana_instances"></a>Upgrading multiple Kibana instances</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p>When upgrading several Kibana instances connected to the same Elasticsearch cluster,
ensure that all outdated instances are shut down before starting the upgrade.</p>
<p>Rolling upgrades are unsupported in Kibana. However, when outdated instances are shut down, you can start all upgraded instances in parallel,
which allows all instances to participate in the upgrade migration in parallel.</p>
<p>For large deployments with more than 10 Kibana instances and more than 10,000 saved objects,
you can reduce the upgrade downtime by bringing up a single Kibana instance and waiting for it to
complete the upgrade migration before bringing up the remaining instances.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can upgrade to pre-release versions for testing,
but upgrading from a pre-release to the Generally Available version is unsupported.
You should use pre-release versions only for testing in a temporary environment.</p>
</div>
</div>
<div class="position-relative"><h3><a id="_ensure_that_all_kibana_instances_are_the_same"></a>Ensure that all Kibana instances are the same</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p>When you perform an upgrade migration of different Kibana versions, the migration can fail.
Ensure that all Kibana instances are running the same version, configuration, and plugins.</p>
<div class="position-relative"><h2><a id="_support_for_elastic_prebuilt_detection_rule_automatic_updates"></a>Support for Elastic prebuilt detection rule automatic updates</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p><a class="xref" href="prebuilt-rules-management.html#update-prebuilt-rules" title="Update Elastic prebuilt rules">Automatic updates of Elastic prebuilt detection rules</a> are supported for the current Elastic Security version and the latest three previous minor releases. For example, if you’re upgrading to Elastic Security 8.10, you’ll be able to use the Rules UI to update your prebuilt rules until Elastic Security 8.14 is released. After that point, you can still manually download and install updated prebuilt rules, but you must upgrade to the latest Elastic Security version to receive automatic updates.</p>
<div class="position-relative"><h2><a id="upgrade-8x-8x"></a>Upgrade from an 8.x to an 8.x version</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p>Follow this guide to upgrade from an earlier 8.x version to a later 8.x version.</p>
<div class="position-relative"><h3><a id="_plan_for_your_upgrade"></a>Plan for your upgrade</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p>Before upgrading from an earlier 8.x version, consider the following recommendations:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Plan for an appropriate amount of time to complete the upgrade. Depending on your configuration and the size of your cluster, the process can take up to a week to complete.
</li>
<li class="listitem">
Open a <a href="https://support.elastic.co" class="ulink" target="_top">support case</a> with Elastic to alert our Elastic Support team of your system change. If you need additional assistance, <a href="/consulting" class="ulink" target="_top">Elastic Consulting Services</a> provides the technical expertise and step-by-step approach for upgrading your Elastic deployment.
</li>
<li class="listitem">
Choose a version to upgrade to. We recommend the latest minor and patch version. Be sure to upgrade your development or non-production deployment to the same version as your production deployment.
</li>
<li class="listitem">
Ensure that you have <a href="/guide/en/kibana/8.17/xpack-monitoring.html" class="ulink" target="_top">stack monitoring</a> enabled in Kibana. Take note of your current index and search rate.
</li>
<li class="listitem">
Review your selected version&#8217;s features, Elastic connectors, integrations, and detection rules to determine if you can replace any customized content with out-of-the-box functionality. This can help reduce your workload and the complexity of your upgrade.
</li>
<li class="listitem">
Review release notes, deprecations, and breaking changes for <a href="/guide/en/security/8.17/release-notes.html" class="ulink" target="_top">Elastic Security</a>, <a href="/guide/en/elasticsearch/reference/8.17/es-release-notes.html" class="ulink" target="_top">Elasticsearch</a>, <a href="/guide/en/kibana/8.17/release-notes.html" class="ulink" target="_top">Kibana</a>, and, if applicable, <a href="/guide/en/fleet/8.17/release-notes.html" class="ulink" target="_top">Fleet and Elastic Agent</a>, <a href="/guide/en/beats/libbeat/8.17/release-notes.html" class="ulink" target="_top">Beats</a>, and <a href="/guide/en/logstash/8.17/releasenotes.html" class="ulink" target="_top">Logstash</a>. Identify any issues that might affect your deployment. Work with your Elastic team on any questions you may have. Start with breaking changes for your solution and platform components, such as Elasticsearch and Kibana.
</li>
<li class="listitem">
Schedule a system maintenance window within your organization.
</li>
</ul>
</div>
<div class="position-relative"><h3><a id="_pre_upgrade_steps"></a>Pre-upgrade steps</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p>To prepare for the upgrade process, follow these steps before you start:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Do a software version inventory across your entire Elastic deployment, including Elasticsearch, Kibana, Elastic Agent, Beats, and Logstash.
</li>
<li class="listitem">
If you&#8217;re not using <a href="/guide/en/elasticsearch/reference/8.17/snapshots-take-snapshot.html#automate-snapshots-slm" class="ulink" target="_top">snapshot lifecycle management (SLM)</a>, you must set up and configure a policy, then run the policy to create at least one <a href="/guide/en/elasticsearch/reference/8.17/snapshot-restore.html" class="ulink" target="_top">snapshot</a>—a backup of indices taken from a running cluster. If you need to roll back during the upgrade process, use a recent snapshot to avoid data loss. Snapshots are <a href="/guide/en/elasticsearch/reference/8.17/snapshot-restore.html#how-snapshots-work" class="ulink" target="_top">incremental</a>—depending on the cluster size and the input/output rate, the initial snapshot may take several hours to complete. If you&#8217;re using SLM, <a href="/guide/en/elasticsearch/reference/8.17/snapshots-take-snapshot.html#check-slm-history" class="ulink" target="_top">check the SLM history</a> to ensure that snapshots are completing successfully.
</li>
</ol>
</div>
<div class="position-relative"><h3><a id="_perform_an_8_x_to_8_x_upgrade_on_a_deployment"></a>Perform an 8.x to 8.x upgrade on a deployment</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>We strongly recommend performing the following steps on a non-production deployment first to address any potential issues before upgrading your production deployments. If you&#8217;re using a cross-cluster search environment, upgrade your remote deployments first.</p>
</div>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
If you haven&#8217;t already done so, back up your cluster data to a <a href="/guide/en/elasticsearch/reference/8.17/snapshots-take-snapshot.html" class="ulink" target="_top">snapshot</a>.
</li>
<li class="listitem">
We recommend you <a class="xref" href="rules-api-export.html" title="Export rules">export all your custom detection rules</a> in case there are issues with the detection engine after the upgrade.
</li>
<li class="listitem">
<p>Upgrade Elasticsearch.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you&#8217;re using Elastic Cloud, we recommend upgrades with no downtime. Refer to <a href="/guide/en/cloud/current/ec-upgrade-deployment.html" class="ulink" target="_top">these instructions</a>.
</li>
<li class="listitem">
If you&#8217;re using Elastic Cloud Enterprise (ECE), refer to <a href="/guide/en/cloud-enterprise/current/ece-upgrade-deployment.html" class="ulink" target="_top">these instructions</a>.
</li>
<li class="listitem">
If you&#8217;re using Elastic Cloud on Kubernetes (ECK), refer to <a href="/guide/en/cloud-on-k8s/current/k8s-upgrading-stack.html" class="ulink" target="_top">these instructions</a>.
</li>
<li class="listitem">
<p>If you&#8217;re upgrading a self-orchestrated deployment, refer to <a href="/guide/en/elastic-stack/8.17/upgrading-elasticsearch.html" class="ulink" target="_top">these instructions</a> and upgrade the data nodes tier by tier in this order:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li class="listitem">
Frozen tier
</li>
<li class="listitem">
Cold tier
</li>
<li class="listitem">
Warm tier
</li>
<li class="listitem">
Hot tier
</li>
<li class="listitem">
Any other nodes not in a tier
</li>
<li class="listitem">
All remaining nodes that are neither master-eligible nor data nodes
</li>
<li class="listitem">
Master-eligible nodes
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Upgrade Kibana. Refer to <a href="/guide/en/elastic-stack/8.17/upgrading-kibana.html" class="ulink" target="_top">these instructions</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you&#8217;re using Elastic Cloud Hosted or Elastic Cloud Enterprise, this is already included in the Elasticsearch upgrade.</p>
</div>
</div>
</li>
<li class="listitem">
<p>Validate that Elasticsearch and Kibana are operating as expected by completing the following checks:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>For Elasticsearch:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li class="listitem">
Check the status of your clusters and ensure that they&#8217;re green by running a <code class="literal">GET _cat/health</code> API request. For more information, refer to the <a href="/guide/en/elasticsearch/reference/8.17/cat-health.html" class="ulink" target="_top">cat health API documentation</a>.
</li>
<li class="listitem">
<p>Ensure that the index and search rate are close to what they were before upgrading. Go to <span class="strong strong"><strong>Stack Monitoring</strong></span> &#8594; <span class="strong strong"><strong>Elasticsearch</strong></span> &#8594; <span class="strong strong"><strong>Overview</strong></span>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can also check the index document count using the <a href="/guide/en/elasticsearch/reference/8.17/cat-indices.html" class="ulink" target="_top">cat index API</a>.</p>
</div>
</div>
</li>
<li class="listitem">
Verify that snapshot lifecycle management (SLM) is taking snapshots by <a href="/guide/en/elasticsearch/reference/8.17/snapshots-take-snapshot.html#check-slm-history" class="ulink" target="_top">checking the SLM history</a>.
</li>
<li class="listitem">
If you use machine learning, ensure that it is up and running.
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>For Kibana:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li class="listitem">
Ensure that you and your users can successfully log in to Kibana and access desired pages.
</li>
<li class="listitem">
Check <a href="/guide/en/kibana/8.17/discover.html" class="ulink" target="_top">Discover</a> and verify that the index patterns you typically use are available.
</li>
<li class="listitem">
Verify that your commonly used <a href="/guide/en/kibana/8.17/dashboard.html" class="ulink" target="_top">dashboards</a> are available and working properly.
</li>
<li class="listitem">
If you use any Watcher-based Kibana scheduled <a href="/guide/en/kibana/8.17/reporting-getting-started.html" class="ulink" target="_top">reporting</a>, ensure that it&#8217;s working properly.
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li class="listitem">
Upgrade your ingest components (such as Logstash, Fleet and Elastic Agent, Beats, etc.). For details, refer to the <a href="/guide/en/elastic-stack/8.17/upgrading-elastic-stack.html" class="ulink" target="_top">Elastic Stack upgrade docs</a>.
</li>
<li class="listitem">
<p>Validate that ingest is operating correctly.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open <span class="strong strong"><strong>Discover</strong></span>, go through data views for each of your expected ingest data streams, and ensure that data is being ingested in the expected format and volume.
</li>
</ol>
</div>
</li>
<li class="listitem">
<p>Validate that Elastic Security is operating correctly.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
On the <span class="strong strong"><strong>Rules</strong></span> page, re-enable your desired SIEM detection rules (<span class="strong strong"><strong>Rule Management</strong></span> tab), and ensure that enabled rules are running without errors or warnings (<span class="strong strong"><strong>Rule Monitoring</strong></span> tab).
</li>
<li class="listitem">
Ensure that any SOAR workflows that consume alerts are working.
</li>
<li class="listitem">
Verify that any custom dashboards your team has created are working properly, especially if they operate on alert documents.
</li>
</ol>
</div>
</li>
<li class="listitem">
If you performed these steps on a non-production deployment, repeat these same steps on your production environment. If you&#8217;re using a cross-cluster search environment and performed these steps on your remote clusters, repeat these same steps on your other deployments.
</li>
<li class="listitem">
Confirm with your appropriate stakeholders that the upgrade process has been successful.
</li>
</ol>
</div>
<div class="position-relative"><h3><a id="upgrade-notes-8.8"></a>Considerations when upgrading to 8.8 or later</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p>After you upgrade to 8.8 or later, frequency settings for <a class="xref" href="rules-ui-create.html#rule-notifications" title="Set up rule actions (optional)">rule actions</a> created in 8.7 or earlier are automatically moved from the rule level to the action level. The action schedules remain the same and will continue to run on their previously specified frequency (<code class="literal">On each rule execution</code>, <code class="literal">Hourly</code>, <code class="literal">Daily</code>, or <code class="literal">Weekly</code>).</p>
<div class="position-relative"><h2><a id="upgrade-7.16-8.x"></a>Upgrade from 7.16 or earlier to an 8.x version</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.17/docs/upgrade/upgrade-security.asciidoc">edit</a></div>
<p>To upgrade from 7.16.0 or earlier to 8.17.3, you must first upgrade your Elastic Stack and Elastic Agents to 7.17 (refer to <a href="/guide/en/fleet/8.17/upgrade-elastic-agent.html" class="ulink" target="_top">Upgrade Fleet-managed Elastic Agents</a>). This enables you to use the <a href="/guide/en/kibana/8.17/upgrade-assistant.html" class="ulink" target="_top">Upgrade Assistant</a> to prepare for the upgrade. Before you upgrade, you must resolve all critical issues identified by the Upgrade Assistant. Afterwards, you can <a class="xref" href="upgrade-7.17-8x.html" title="Upgrade from 7.17 to an 8.x version">upgrade to 8.x</a>.</p>
<p>Initially, Elastic Agents will be version 7.17. This is fine because Elastic Security 8.x supports the last minor release in 7.x (7.17) and any subsequent Elastic Endpoint versions in 8.x. After the Elastic Stack upgrade, you can decide whether to upgrade Elastic Agents to 8.x, which is recommended to ensure you get the latest features.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You do not need to shut down your Elastic Agents or endpoints to upgrade the Elastic Stack.</p>
</div>
</div>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="whats-new.html">« What&#8217;s new in 8.17</a>
</span>
<span class="next">
<a href="upgrade-7.17-8x.html">Upgrade from 7.17 to an 8.x version »</a>
</span>
</div>
</body>
</html>
