<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Install and configure the Elastic Defend integration | Elastic Security Solution [master] | Elastic</title>
<meta class="elastic" name="content" content="Install and configure the Elastic Defend integration | Elastic Security Solution [master]">

<link rel="home" href="index.html" title="Elastic Security Solution [master]"/>
<link rel="up" href="getting-started.html" title="Get started with Elastic Security"/>
<link rel="prev" href="ingest-data.html" title="Ingest data to Elastic Security"/>
<link rel="next" href="agent-tamper-protection.html" title="Prevent Elastic Agent uninstallation"/>
<meta class="elastic" name="product_version" content="master"/>
<meta class="elastic" name="product_name" content="Security"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/master"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
This documentation contains work-in-progress information for future Elastic Stack and Cloud releases. Use the version selector to view supported release docs. It also contains some Elastic Cloud serverless information. Check out our <a href="https://www.elastic.co/docs/current/serverless">serverless docs</a> for more details.
</div>
<div class="navheader">
<span class="prev">
<a href="ingest-data.html">« Ingest data to Elastic Security</a>
</span>
<span class="next">
<a href="agent-tamper-protection.html">Prevent Elastic Agent uninstallation »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [master]</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="getting-started.html">Get started with Elastic Security</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Install and configure the Elastic Defend integration</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/main/docs/getting-started/install-endpoint.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="install-endpoint"></a>Install and configure the Elastic Defend integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/main/docs/getting-started/install-endpoint.asciidoc">edit</a></h2>
</div></div></div>
<p>Like other Elastic integrations, Elastic Defend is integrated into the Elastic Agent using <a href="/guide/en/fleet/master/fleet-overview.html" class="ulink" target="_top">Fleet</a>. Upon configuration, the integration allows the Elastic Agent to monitor events on your host and send data to the Elastic Security app.</p>
<div class="sidebar">
<div class="titlepage"><div><div>
<p class="title"><strong>Requirements</strong></p>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fleet is required for Elastic Defend.
</li>
<li class="listitem">
To configure the Elastic Defend integration on the Elastic Agent, you must have permission to use Fleet in Kibana.
</li>
<li class="listitem">
You must have the <span class="strong strong"><strong>Elastic Defend Policy Management : All</strong></span> <a class="xref" href="endpoint-management-req.html" title="Elastic Defend feature privileges">privilege</a> to configure an integration policy, and the <span class="strong strong"><strong>Endpoint List</strong></span> <a class="xref" href="endpoint-management-req.html" title="Elastic Defend feature privileges">privilege</a> to access the <span class="strong strong"><strong>Endpoints</strong></span> page.
</li>
</ul>
</div>
</div>
<h3><a id="security-before-you-begin"></a>Before you begin<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/main/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<p>If you&#8217;re using macOS, some versions may require you to grant Full Disk Access to different kernels, system extensions, or files. Refer to <a class="xref" href="elastic-endpoint-deploy-reqs.html" title="Elastic Endpoint requirements">requirements for Elastic Endpoint</a> if you&#8217;re installing the Elastic Endpoint or <a class="xref" href="endgame-sensor-full-disk-access.html" title="Enable Full Disk Access for the Elastic Endgame sensor on macOS Catalina though Monterey">requirements for the Endgame sensor</a> for more information.</p>
<h3><a id="add-security-integration"></a>Add the Elastic Defend integration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/main/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Go to the <span class="strong strong"><strong>Integrations</strong></span> page, which you can access in several ways:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
In Kibana: <span class="strong strong"><strong>Management</strong></span> &#8594; <span class="strong strong"><strong>Integrations</strong></span>
</li>
<li class="listitem">
In the Elastic Security app: <span class="strong strong"><strong>Get started</strong></span> &#8594; <span class="strong strong"><strong>Add security integrations</strong></span>
</li>
</ul>
</div>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/endpoint-cloud-sec-integrations-page.png" alt="Search result for &quot;Elastic Defend&quot; on the Integrations page.">
</div>
</div>
</li>
<li class="listitem">
<p>Search for and select <span class="strong strong"><strong>Elastic Defend</strong></span>, then select <span class="strong strong"><strong>Add Elastic Defend</strong></span>. The integration configuration page appears.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If this is the first integration you&#8217;ve installed and the <span class="strong strong"><strong>Ready to add your first integration?</strong></span> page appears instead, select <span class="strong strong"><strong>Add integration only (skip agent installation)</strong></span> to proceed. You can <a class="xref" href="install-endpoint.html#enroll-agent" title="Add the Elastic Agent">install Elastic Agent</a> after setting up the Elastic Defend integration.</p>
</div>
</div>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/endpoint-cloud-security-configuration.png" alt="Add Elastic Defend integration page" width="75%">
</div>
</div>
</li>
<li class="listitem">
Configure the Elastic Defend integration with an <span class="strong strong"><strong>Integration name</strong></span> and optional <span class="strong strong"><strong>Description</strong></span>.
</li>
<li class="listitem">
Select the type of environment you want to protect, either <span class="strong strong"><strong>Traditional Endpoints</strong></span> or <span class="strong strong"><strong>Cloud Workloads</strong></span>.
</li>
<li class="listitem">
<p>Select a configuration preset. Each preset comes with different default settings for Elastic Agent — you can further customize these later by <a class="xref" href="configure-endpoint-integration-policy.html" title="Configure an integration policy for Elastic Defend">configuring the Elastic Defend integration policy</a>.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Traditional Endpoint presets</strong></span></p></td>
<td align="left" valign="top">
<p>All traditional endpoint presets <em>except <span class="strong strong"><strong>Data Collection</strong></span></em> have these preventions enabled by default: malware, ransomware, memory threat, malicious behavior, and credential theft. Each preset collects the following events:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Data Collection:</strong></span> All events; no preventions
</li>
<li class="listitem">
<span class="strong strong"><strong>Next-Generation Antivirus (NGAV):</strong></span> Process events; all preventions
</li>
<li class="listitem">
<span class="strong strong"><strong>Essential EDR (Endpoint Detection &amp; Response):</strong></span> Process, Network, File events; all preventions
</li>
<li class="listitem">
<span class="strong strong"><strong>Complete EDR (Endpoint Detection &amp; Response):</strong></span> All events; all preventions
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Cloud Workloads presets</strong></span></p></td>
<td align="left" valign="top">
<p>Both cloud workload presets are intended for monitoring cloud-based Linux hosts. Therefore, <a class="xref" href="session-view.html" title="Session View">session data</a> collection, which enriches process events, is enabled by default. They both have all preventions disabled by default, and collect process, network, and file events.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>All events:</strong></span> Includes data from automated sessions.
</li>
<li class="listitem">
<span class="strong strong"><strong>Interactive only:</strong></span> Filters out data from non-interactive sessions by creating an <a class="xref" href="event-filters.html" title="Event filters">event filter</a>.
</li>
</ul>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="listitem">
Enter a name for the agent policy in <span class="strong strong"><strong>New agent policy name</strong></span>. If other agent policies already exist, you can click the <span class="strong strong"><strong>Existing hosts</strong></span> tab and select an existing policy instead. For more details on Elastic Agent configuration settings, refer to <a href="/guide/en/fleet/master/agent-policy.html" class="ulink" target="_top">Elastic Agent policies</a>.
</li>
<li class="listitem">
When you&#8217;re ready, click <span class="strong strong"><strong>Save and continue</strong></span>.
</li>
<li class="listitem">
To complete the integration, select <span class="strong strong"><strong>Add Elastic Agent to your hosts</strong></span> and continue to the next section to install the Elastic Agent on your hosts.
</li>
</ol>
</div>
<h3><a id="enroll-security-agent"></a>Configure and enroll the Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/main/docs/getting-started/install-endpoint.asciidoc">edit</a></h3>
<p>To enable the Elastic Defend integration, you must enroll agents in the relevant policy using Fleet.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before you add an Elastic Agent, a Fleet Server must be running. Refer to <a href="/guide/en/fleet/master/add-a-fleet-server.html" class="ulink" target="_top">Add a Fleet Server</a>.</p>
<p>Elastic Defend cannot be integrated with an Elastic Agent in standalone mode.</p>
</div>
</div>
<h4><a id="fleet-server-upgrade"></a>Important information about Fleet Server<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/main/docs/getting-started/install-endpoint.asciidoc">edit</a></h4>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you are running an Elastic Stack version earlier than 7.13.0, you can skip this section.</p>
</div>
</div>
<p>If you have upgraded to an Elastic Stack version that includes Fleet Server 7.13.0 or newer, you will need to redeploy your agents. Review the following scenarios to ensure you take the appropriate steps.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you redeploy the Elastic Agent to the same machine through the Fleet application after you upgrade, a new agent will appear.
</li>
<li class="listitem">
If you want to remove the Elastic Agent entirely without transitioning to the Fleet Server, then you will need to manually uninstall the Elastic Agent on the machine. This will also uninstall the endpoint. Refer to <a href="/guide/en/fleet/master/uninstall-elastic-agent.html" class="ulink" target="_top">Uninstall Elastic Agent</a>.
</li>
<li class="listitem">
In the rare event that the Elastic Agent fails to uninstall, you might need to manually uninstall the endpoint. Refer to <a class="xref" href="uninstall-endpoint.html" title="Uninstall Elastic Endpoint">Uninstall an endpoint</a> at the end of this topic.
</li>
</ul>
</div>
<h4><a id="enroll-agent"></a>Add the Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/main/docs/getting-started/install-endpoint.asciidoc">edit</a></h4>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>If you&#8217;re in the process of installing an Elastic Agent integration (such as Elastic Defend), the <span class="strong strong"><strong>Add agent</strong></span> UI opens automatically. Otherwise, go to <span class="strong strong"><strong>Fleet</strong></span> &#8594; <span class="strong strong"><strong>Agents</strong></span> &#8594; <span class="strong strong"><strong>Add agent</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/endpoint-cloud-sec-add-agent.png" alt="Add agent flyout on the Fleet page.">
</div>
</div>
</li>
<li class="listitem">
<p>Select an agent policy for the Elastic Agent. You can select an existing policy, or select <span class="strong strong"><strong>Create new agent policy</strong></span> to create a new one. For more details on Elastic Agent configuration settings, refer to <a href="/guide/en/fleet/master/agent-policy.html" class="ulink" target="_top">Elastic Agent policies</a>.</p>
<p>The selected agent policy should include the integration you want to install on the hosts covered by the agent policy (in this example, Elastic Defend).</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/endpoint-cloud-sec-add-agent-detail.png" alt="Add agent flyout with Elastic Defend integration highlighted." width="575">
</div>
</div>
</li>
<li class="listitem">
Ensure that the <span class="strong strong"><strong>Enroll in Fleet</strong></span> option is selected. Elastic Defend cannot be integrated with Elastic Agent in standalone mode.
</li>
<li class="listitem">
Select the appropriate platform or operating system for the host, then copy the provided commands.
</li>
<li class="listitem">
On the host, open a command-line interface and navigate to the directory where you want to install Elastic Agent. Paste and run the commands from Fleet to download, extract, enroll, and start Elastic Agent.
</li>
<li class="listitem">
(Optional) Return to the <span class="strong strong"><strong>Add agent</strong></span> flyout in Fleet, and observe the <span class="strong strong"><strong>Confirm agent enrollment</strong></span> and <span class="strong strong"><strong>Confirm incoming data</strong></span> steps automatically checking the host connection. It may take a few minutes for data to arrive in Elasticsearch.
</li>
<li class="listitem">
<p>After you have enrolled the Elastic Agent on your host, you can click <span class="strong strong"><strong>View enrolled agents</strong></span> to access the list of agents enrolled in Fleet. Otherwise, select <span class="strong strong"><strong>Close</strong></span>.</p>
<p>The host will now appear on the <span class="strong strong"><strong>Endpoints</strong></span> page in the Elastic Security app. It may take another minute or two for endpoint data to appear in Elastic Security.</p>
</li>
<li class="listitem">
For macOS, continue with <a class="xref" href="deploy-elastic-endpoint.html" title="Install Elastic Endpoint manually on macOS Catalina through Monterey">these instructions</a> to grant Elastic Endpoint the required permissions.
</li>
</ol>
</div>



</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="ingest-data.html">« Ingest data to Elastic Security</a>
</span>
<span class="next">
<a href="agent-tamper-protection.html">Prevent Elastic Agent uninstallation »</a>
</span>
</div>
</body>
</html>
