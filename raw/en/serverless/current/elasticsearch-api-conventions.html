<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elasticsearch API conventions | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Elasticsearch API conventions | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="elasticsearch-http-apis.html" title="REST APIs"/>
<link rel="prev" href="elasticsearch-http-apis.html" title="REST APIs"/>
<link rel="next" href="elasticsearch-kibana-api-conventions.html" title="Management API conventions"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-http-apis.html">« REST APIs</a>
</span>
<span class="next">
<a href="elasticsearch-kibana-api-conventions.html">Management API conventions »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-elasticsearch-serverless.html">Elasticsearch</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elasticsearch-http-apis.html">REST APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Elasticsearch API conventions</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/apis-elasticsearch-conventions.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="elasticsearch-api-conventions"></a>Elasticsearch API conventions</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/apis-elasticsearch-conventions.asciidoc">edit</a></div>
</div></div></div>
<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span></p>
<p>You can run Elasticsearch API requests in <span class="strong strong"><strong>Dev Tools → Console</strong></span>.
For example:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">GET _cat/indices?v=true</pre>
</div>
<p>Check out <a class="xref" href="devtools-run-api-requests-in-the-console.html" title="Console">Console</a>.</p>
<div class="position-relative"><h5><a id="elasticsearch-api-conventions-request-headers"></a>Request headers</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/apis-elasticsearch-conventions.asciidoc">edit</a></div>
<p>When you call Elasticsearch APIs outside of the Console, you must provide a request header.
The Elasticsearch APIs support the <code class="literal">Authorization</code>, <code class="literal">Content-Type</code>, and <code class="literal">X-Opaque-Id</code> headers.</p>
<div class="position-relative"><h6><a id="elasticsearch-api-conventions-authorization"></a>Authorization</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/apis-elasticsearch-conventions.asciidoc">edit</a></div>
<p>Elasticsearch APIs use key-based authentication.
You must create an API key and use the encoded value in the request header.
For example:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X GET "${ES_URL}/_cat/indices?v=true" \
  -H "Authorization: ApiKey ${API_KEY}"</pre>
</div>
<p>To get API keys or the Elasticsearch Endpoint (<code class="literal">${ES_URL}</code>) for a project, refer to <a class="xref" href="elasticsearch-get-started.html" title="Get started">Get started</a>.</p>
<div class="position-relative"><h6><a id="elasticsearch-api-conventions-content-type"></a>Content-type</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/apis-elasticsearch-conventions.asciidoc">edit</a></div>
<p>The type of the content sent in a request body must be specified using the <code class="literal">Content-Type</code> header.
For example:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X GET "${ES_URL}/_search?pretty" \
  -H "Authorization: ApiKey ${API_KEY}" \
  -H "Content-Type: application/json" \
  -d '
  {
    "query": {
      "match_all": { "boost" : 1.2 }
    }
  }
'</pre>
</div>
<p>The value of this header must map to one of the formats that the API supports.
Most APIs support JSON, YAML, CBOR, and SMILE.
The bulk and multi-search APIs support NDJSON, JSON, and SMILE; other types will result in an error response.</p>
<p>If you use the <code class="literal">source</code> query string parameter, you must specify the content type with the <code class="literal">source_content_type</code> query string parameter.</p>
<p>Elasticsearch APIs support only UTF-8-encoded JSON.
Any other encoding headings sent with a request are ignored.
Responses are also UTF-8 encoded.</p>
<div class="position-relative"><h6><a id="elasticsearch-api-conventions-x-opaque-id"></a>X-Opaque-Id</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/apis-elasticsearch-conventions.asciidoc">edit</a></div>
<p>You can pass an <code class="literal">X-Opaque-Id</code> HTTP header to track the origin of a request in Elasticsearch logs and tasks.
For example:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X GET "${ES_URL}/_search?pretty" \
  -H "Authorization: ApiKey ${API_KEY}" \
  -H "Content-Type: application/json" \
  -H "X-Opaque-Id: 123456" \
  -d '
  {
    "query": {
      "match_all": { "boost" : 1.2 }
    }
  }
'</pre>
</div>
<p>Elasticsearch surfaces the <code class="literal">X-Opaque-Id</code> value in the:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Response of any request that includes the header
</li>
<li class="listitem">
Task management API response
</li>
<li class="listitem">
Slow logs
</li>
<li class="listitem">
Deprecation logs
</li>
</ul>
</div>
<p>For the deprecation logs, Elasticsearch also uses the <code class="literal">X-Opaque-Id</code> value to throttle and deduplicate deprecation warnings.</p>
<p>The <code class="literal">X-Opaque-Id</code> header accepts any arbitrary value.
However, it is recommended that you limit these values to a finite set, such as an ID per client.
Don&#8217;t generate a unique <code class="literal">X-Opaque-Id</code> header for every request.
Too many unique <code class="literal">X-Opaque-Id</code> values can prevent Elasticsearch from deduplicating warnings in the deprecation logs.</p>
<div class="position-relative"><h5><a id="elasticsearch-api-conventions-request-bodies"></a>Request bodies</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/apis-elasticsearch-conventions.asciidoc">edit</a></div>
<p>A number of Elasticsearch APIs with GET operations&#8212;&#8203;most notably the search API&#8212;&#8203;support a request body.
While the GET operation makes sense in the context of retrieving information, GET requests with a body are not supported by all HTTP libraries.</p>
<p>All Elasticsearch APIs with GET operations that require a body can also be submitted as POST requests.
Alternatively, you can pass the request body as the <code class="literal">source</code> query string parameter when using GET.
When you use this method, the <code class="literal">source_content_type</code> parameter should also be passed with a media type value that indicates the format of the source, such as <code class="literal">application/json</code>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="elasticsearch-http-apis.html">« REST APIs</a>
</span>
<span class="next">
<a href="elasticsearch-kibana-api-conventions.html">Management API conventions »</a>
</span>
</div>
</body>
</html>
