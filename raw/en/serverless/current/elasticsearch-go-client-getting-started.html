<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Get started with the Elasticsearch Go client | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Get started with the Elasticsearch Go client | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="elasticsearch-clients.html" title="Client libraries"/>
<link rel="prev" href="elasticsearch-clients.html" title="Client libraries"/>
<link rel="next" href="elasticsearch-java-client-getting-started.html" title="Get started with the Java client"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-clients.html">« Client libraries</a>
</span>
<span class="next">
<a href="elasticsearch-java-client-getting-started.html">Get started with the Java client »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-elasticsearch-serverless.html">Elasticsearch Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elasticsearch-clients.html">Client libraries</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Get started with the Elasticsearch Go client</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="elasticsearch-go-client-getting-started"></a>Get started with the Elasticsearch Go client</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This client is for use with Elasticsearch Serverless only. See also the <a href="/guide/en/elasticsearch/client/index.html" class="ulink" target="_top">Elasticsearch clients</a>.</p>
</div>
</div>
<p>This page guides you through the installation process of the Go
client for Elasticsearch Serverless, shows you how to initialize the client, and how to perform basic
Elasticsearch operations with it.</p>
<div class="position-relative"><h5><a id="elasticsearch-go-client-getting-started-requirements"></a>Requirements</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Go 1.22 or higher installed on your system.
</li>
</ul>
</div>
<div class="position-relative"><h5><a id="elasticsearch-go-client-getting-started-installation"></a>Installation</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<div class="position-relative"><h6><a id="elasticsearch-go-client-getting-started-using-the-command-line"></a>Using the command line</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>You can install the Go client with the following
commands:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">go get -u github.com/elastic/go-elasticsearch/v8@latest</pre>
</div>
<div class="position-relative"><h5><a id="elasticsearch-go-client-getting-started-imports"></a>Imports</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>The following snippets use these imports:</p>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">import (
  "context"
  "encoding/json"
  "fmt"
  "log"
  "strconv"

  "github.com/elastic/go-elasticsearch/v8"
  "github.com/elastic/go-elasticsearch/v8/typedapi/types"
  "github.com/elastic/go-elasticsearch/v8/typedapi/types/enums/result"
)</pre>
</div>
<div class="position-relative"><h5><a id="elasticsearch-go-client-getting-started-initialize-the-client"></a>Initialize the client</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>Initialize the client using your API key and Elasticsearch endpoint:</p>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">client, err := elasticsearch.NewTypedClient(elasticsearch.Config{
    Addresses: []string{"https://my-project-url"},
    APIKey:    "your-api-key",
})
if err != nil {
    log.Fatalf("Error creating the client: %s", err)
}</pre>
</div>
<p>To get API keys for the Elasticsearch endpoint for a project, see <a class="xref" href="elasticsearch-get-started.html" title="Get started">Get started</a>.</p>
<div class="position-relative"><h5><a id="elasticsearch-go-client-getting-started-using-the-api"></a>Using the API</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>After you&#8217;ve initialized the client, you can start ingesting documents. You can
use the <code class="literal">bulk</code> API for this. This API enables you to index, update, and delete
several documents in one request.</p>
<div class="position-relative"><h6><a id="elasticsearch-go-client-getting-started-creating-an-index-and-ingesting-documents"></a>Creating an index and ingesting documents</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>You can call the <code class="literal">bulk</code> API with a body parameter, an array of hashes that
define the action, and a document.</p>
<p>The following is an example of indexing some classic books into the <code class="literal">books</code>
index:</p>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">type Book struct {
    Name        string `json:"name"`
    Author      string `json:"author"`
    ReleaseDate string `json:"release_date"`
    PageCount   int    `json:"page_count"`
}

books := []Book{
    {Name: "Snow Crash", Author: "Neal Stephenson", ReleaseDate: "1992-06-01", PageCount: 470},
    {Name: "Revelation Space", Author: "Alastair Reynolds", ReleaseDate: "2000-03-15", PageCount: 585},
    {Name: "1984", Author: "George Orwell", ReleaseDate: "1949-06-08", PageCount: 328},
    {Name: "Fahrenheit 451", Author: "Ray Bradbury", ReleaseDate: "1953-10-15", PageCount: 227},
    {Name: "Brave New World", Author: "Aldous Huxley", ReleaseDate: "1932-06-01", PageCount: 268},
    {Name: "The Handmaid's Tale", Author: "Margaret Atwood", ReleaseDate: "1985-06-01", PageCount: 311},
}
indexName := "books"

bulk := client.Bulk()
for i, book := range books {
    id := strconv.Itoa(i)
    err := bulk.CreateOp(types.CreateOperation{Index_: &amp;indexName, Id_: &amp;id}, book)
    if err != nil {
        log.Fatal(err)
    }
}
bulkRes, err := bulk.Do(context.TODO())
if err != nil {
    log.Fatal(err)
}

fmt.Printf("Bulk: %#v\n", bulkRes.Items)</pre>
</div>
<p>When you use the client to make a request to Elasticsearch Serverless, it returns an API
response object. You can access the body values directly as seen on
the previous example with <code class="literal">bulkRes</code>.</p>
<div class="position-relative"><h6><a id="elasticsearch-go-client-getting-started-getting-documents"></a>Getting documents</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>You can get documents by using the following code:</p>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">getRes, err := client.Get(indexName, "5").Do(context.TODO())
if err != nil {
    log.Fatal(err)
}
book := Book{}
if err := json.Unmarshal(getRes.Source_, &amp;book); err != nil {
    log.Fatal(err)
}
fmt.Printf("Get book: %#v\n", book)</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-go-client-getting-started-searching"></a>Searching</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>Now that some data is available, you can search your documents using the
<code class="literal">search</code> API:</p>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">searchRes, err := client.Search().
    Index("books").
    Q("snow").
    Do(context.TODO())
if err != nil {
    log.Fatal(err)
}

bookSearch := []Book{}
for _, hit := range searchRes.Hits.Hits {
    book := Book{}
    if err := json.Unmarshal(hit.Source_, &amp;book); err != nil {
        log.Fatal(err)
    }
    bookSearch = append(bookSearch, book)
}
fmt.Printf("Search books: %#v\n", bookSearch)</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-go-client-getting-started-updating-a-document"></a>Updating a document</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>You can call the <code class="literal">Update</code> API to update a document, in this example updating the
<code class="literal">page_count</code> for "The Handmaid&#8217;s Tale" with id "5":</p>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">updateRes, err := client.Update("books", "5").
    Doc(
        struct {
            PageCount int `json:"page_count"`
        }{PageCount: 312},
    ).
    Do(context.TODO())
if err != nil {
    log.Fatal(err)
}

if updateRes.Result == result.Updated {
    fmt.Printf("Update book: %#v\n", updateRes)
}</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-go-client-getting-started-deleting-a-document"></a>Deleting a document</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<p>You can call the <code class="literal">Delete</code> API to delete a document:</p>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">deleteRes, err := client.Delete("books", "5").Do(context.TODO())
if err != nil {
    log.Fatal(err)
}

if deleteRes.Result == result.Deleted {
    fmt.Printf("Delete book: %#v\n", deleteRes)
}</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-go-client-getting-started-deleting-an-index"></a>Deleting an index</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-go-getting-started.asciidoc">edit</a></div>
<div class="pre_wrapper lang-go">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-go">indexDeleteRes, err := client.Indices.Delete("books").Do(context.TODO())
if err != nil {
    log.Fatal(err)
}

if indexDeleteRes.Acknowledged {
    fmt.Printf("Delete index: %#v\n", indexDeleteRes)
}</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="elasticsearch-clients.html">« Client libraries</a>
</span>
<span class="next">
<a href="elasticsearch-java-client-getting-started.html">Get started with the Java client »</a>
</span>
</div>
</body>
</html>
