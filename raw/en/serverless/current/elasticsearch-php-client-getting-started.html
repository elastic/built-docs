<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Get started with the serverless PHP client | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Get started with the serverless PHP client | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="elasticsearch-clients.html" title="Client libraries"/>
<link rel="prev" href="elasticsearch-nodejs-client-getting-started.html" title="Get started with the serverless Node.js client"/>
<link rel="next" href="elasticsearch-python-client-getting-started.html" title="Get started with the Elasticsearch Python client"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-nodejs-client-getting-started.html">« Get started with the serverless Node.js client</a>
</span>
<span class="next">
<a href="elasticsearch-python-client-getting-started.html">Get started with the Elasticsearch Python client »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-elasticsearch-serverless.html">Elasticsearch Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elasticsearch-clients.html">Client libraries</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Get started with the serverless PHP client</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="elasticsearch-php-client-getting-started"></a>Get started with the serverless PHP client</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This client is for use with Elasticsearch Serverless only. See also the <a href="/guide/en/elasticsearch/client/index.html" class="ulink" target="_top">Elasticsearch clients</a>.</p>
</div>
</div>
<p>This page guides you through the installation process of the
PHP client for Elasticsearch Serverless, shows you how to initialize the client, and how to perform basic
Elasticsearch operations with it.</p>
<div class="position-relative"><h5><a id="elasticsearch-php-client-getting-started-requirements"></a>Requirements</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
PHP 8.0 or higher installed on your system.
</li>
</ul>
</div>
<div class="position-relative"><h5><a id="elasticsearch-php-client-getting-started-installation"></a>Installation</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<div class="position-relative"><h6><a id="elasticsearch-php-client-getting-started-using-the-command-line"></a>Using the command line</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>You can install the PHP client using
<a href="https://getcomposer.org/" class="ulink" target="_top">composer</a> with the following commands:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">composer require elastic/elasticsearch-serverless</pre>
</div>
<div class="position-relative"><h5><a id="elasticsearch-php-client-getting-started-initialize-the-client"></a>Initialize the client</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>Initialize the client using your API key and Elasticsearch endpoint:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">require 'vendor/autoload.php';

use Elastic\Elasticsearch\Serverless\ClientBuilder;

$client = ClientBuilder::create()
  -&gt;setEndpoint('&lt;elasticsearch-endpoint&gt;')
  -&gt;setApiKey('&lt;api-key&gt;')
  -&gt;build();</pre>
</div>
<p>To get API keys for the Elasticsearch endpoint for a project, see <a class="xref" href="elasticsearch-get-started.html" title="Get started">Get started</a>.</p>
<div class="position-relative"><h5><a id="elasticsearch-php-client-getting-started-using-the-api"></a>Using the API</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>After you&#8217;ve initialized the client, you can start ingesting documents. You can
use the <code class="literal">bulk</code> API for this. This API enables you to index, update, and delete
several documents in one request.</p>
<div class="position-relative"><h6><a id="elasticsearch-php-client-getting-started-creating-an-index-and-ingesting-documents"></a>Creating an index and ingesting documents</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>You can call the <code class="literal">bulk</code> API with a body parameter, an array of actions (index)
and documents.</p>
<p>The following is an example of indexing some classic books into the <code class="literal">books</code>
index:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$body = [
    [ "index" =&gt; [ "_index" =&gt; "books" ]],
    [ "name" =&gt; "Snow Crash", "author" =&gt; "Neal Stephenson", "release_date" =&gt; "1992-06-01", "page_count" =&gt; 470],
    [ "index" =&gt; [ "_index" =&gt; "books" ]],
    [ "name" =&gt; "Revelation Space", "author" =&gt; "Alastair Reynolds", "release_date" =&gt; "2000-03-15", "page_count" =&gt; 585],
    [ "index" =&gt; [ "_index" =&gt; "books" ]],
    [ "name" =&gt; "1984", "author" =&gt; "George Orwell", "release_date" =&gt; "1949-06-08", "page_count" =&gt; 328],
    [ "index" =&gt; [ "_index" =&gt; "books" ]],
    [ "name" =&gt; "Fahrenheit 451", "author" =&gt; "Ray Bradbury", "release_date" =&gt; "1953-10-15", "page_count" =&gt; 227],
    [ "index" =&gt; [ "_index" =&gt; "books" ]],
    [ "name" =&gt; "Brave New World", "author" =&gt; "Aldous Huxley", "release_date" =&gt; "1932-06-01", "page_count" =&gt; 268],
    [ "index" =&gt; [ "_index" =&gt; "books" ]],
    [ "name" =&gt; "The Handmaid's Tale", "author" =&gt; "Margaret Atwood", "release_date" =&gt; "1985-06-01", "page_count" =&gt; 311]
];

$response = $client-&gt;bulk(body: $body);
# You can check the response if the items are indexed and have an ID
print_r($response['items']);</pre>
</div>
<p>When you use the client to make a request to Elasticsearch, it returns an API response
object. This object implements the <a href="https://www.php-fig.org/psr/psr-7/" class="ulink" target="_top">PSR-7</a>
interface, that means you can check the for the HTTP status using the following
method:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">print($response-&gt;getStatusCode());</pre>
</div>
<p>or get the HTTP response headers using the following:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">print_r($response-&gt;getHeaders());</pre>
</div>
<p>or reading the HTTP response body as follows:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">print($response-&gt;getBody()-&gt;getContents());
# or using the asString() dedicated method
print($response-&gt;asString());</pre>
</div>
<p>The response body can be accessed as associative array or as object.</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">var_dump($response['items']); # associative array
var_dump($response-&gt;items);   # object</pre>
</div>
<p>There are also methods to render the response as array, object, string and
boolean values.</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">var_dump($response-&gt;asArray());  // response body content as array
var_dump($response-&gt;asObject()); // response body content as object
var_dump($response-&gt;asString()); // response body as string (JSON)
var_dump($response-&gt;asBool());   // true if HTTP response code between 200 and 300</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-php-client-getting-started-getting-documents"></a>Getting documents</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>You can get documents by using the following code:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$response = $client-&gt;get(index: "books", id: $id);</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-php-client-getting-started-searching"></a>Searching</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>You can search your documents using the <code class="literal">search</code> API:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php"># Search for all the books written by Ray Bradbury
$query = [ 'query' =&gt; [ 'match' =&gt; [ 'author' =&gt; 'Ray Bradbury' ]]];
$response = $client-&gt;search(index: "books", body: $query);

printf("Documents found: %d\n", $response['hits']['total']['value']); # total documents found
print_r($response['hits']['hits']); # list of books</pre>
</div>
<p>For more information about the <code class="literal">search</code> API&#8217;s query parameters and the response type,
refer to the
<a href="/docs/api/doc/elasticsearch-serverless/group/endpoint-search" class="ulink" target="_top">Search API</a>
docs.</p>
<div class="position-relative"><h6><a id="elasticsearch-php-client-getting-started-updating-documents"></a>Updating documents</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>You can call the <code class="literal">update</code> API to update a document:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$id = '&lt;insert the document ID&gt;';
# update the "page_count" value to 300
$body = [ "doc" =&gt; [ "page_count" =&gt; 300 ]];
$response = $client-&gt;update(index: "books", id: $id, body: $body);
printf("Operation result: %s\n", $response['result']); # You get 'updated' as a result.</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-php-client-getting-started-deleting-documents"></a>Deleting documents</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>You can call the <code class="literal">delete</code> API to delete a document:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$id = '&lt;insert the document ID&gt;';
$response = $client-&gt;delete(index: "books", id: $id);
printf("Operation result: %s\n", $response['result']); # You get "deleted" a as result.</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-php-client-getting-started-deleting-an-index"></a>Deleting an index</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-php-getting-started.asciidoc">edit</a></div>
<p>You can delete an entire index as follows:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$response = $client-&gt;indices()-&gt;delete(index: "books");
if ($response['acknowledged']) {
    print("Index successfully removed!");
}</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="elasticsearch-nodejs-client-getting-started.html">« Get started with the serverless Node.js client</a>
</span>
<span class="next">
<a href="elasticsearch-python-client-getting-started.html">Get started with the Elasticsearch Python client »</a>
</span>
</div>
</body>
</html>
