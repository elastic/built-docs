<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Detect metric anomalies | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Detect metric anomalies | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="observability-infrastructure-monitoring.html" title="Infrastructure monitoring"/>
<link rel="prev" href="observability-analyze-hosts.html" title="Analyze and compare hosts"/>
<link rel="next" href="observability-configure-intra-settings.html" title="Configure settings"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="observability-analyze-hosts.html">« Analyze and compare hosts</a>
</span>
<span class="next">
<a href="observability-configure-intra-settings.html">Configure settings »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-observability-serverless.html">Elastic Observability serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-infrastructure-monitoring.html">Infrastructure monitoring</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Detect metric anomalies</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/infra-monitoring/detect-metric-anomalies.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="observability-detect-metric-anomalies"></a>Detect metric anomalies</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/infra-monitoring/detect-metric-anomalies.asciidoc">edit</a></div>
</div></div></div>
<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span></p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p class="admon_title">Required role</p>
<p>The <span class="strong strong"><strong>Editor</strong></span> role or higher is required to create machine learning jobs. To learn more, refer to <a class="xref" href="general-assign-user-roles.html" title="Assign user roles and privileges">Assign user roles and privileges</a>.</p>
</div>
</div>
<p>You can create machine learning jobs to detect and inspect memory usage and network traffic anomalies for hosts and Kubernetes pods.</p>
<p>You can model system memory usage, along with inbound and outbound network traffic across hosts or pods.
You can detect unusual increases in memory usage and unusually high inbound or outbound traffic across hosts or pods.</p>
<div class="position-relative"><h5><a id="ml-jobs-hosts"></a>Enable machine learning jobs for hosts or Kubernetes pods</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/infra-monitoring/detect-metric-anomalies.asciidoc">edit</a></div>
<p>Create a machine learning job to detect anomalous memory usage and network traffic automatically.</p>
<p>After creating machine learning jobs, you cannot change the settings.
You can recreate these jobs later.
However, you will remove any previously detected anomalies.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In your Observability project, go to <span class="strong strong"><strong>Infrastructure</strong></span> → <span class="strong strong"><strong>Inventory</strong></span>
and click the <span class="strong strong"><strong>Anomaly detection</strong></span> link at the top of the page.
</li>
<li class="listitem">
Under <span class="strong strong"><strong>Hosts</strong></span> or <span class="strong strong"><strong>Kubernetes Pods</strong></span>, click <span class="strong strong"><strong>Enable</strong></span> to create a machine learning job.
</li>
<li class="listitem">
Choose a start date for the machine learning analysis. Machine learning jobs analyze the last four weeks of data and continue to run indefinitely.
</li>
<li class="listitem">
Select a partition field.
Partitions allow you to create independent models for different groups of data that share similar behavior.
For example, you may want to build separate models for machine type or cloud availability zone so that anomalies are not weighted equally across groups.
</li>
<li class="listitem">
By default, machine learning jobs analyze all of your metric data.
You can filter this list to view only the jobs or metrics that you are interested in.
For example, you can filter by job name and node name to view specific anomaly detection jobs for that host.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Enable jobs</strong></span>.
</li>
<li class="listitem">
You&#8217;re now ready to explore your metric anomalies. Click <span class="strong strong"><strong>Anomalies</strong></span>.
</li>
</ol>
</div>
<div class="imageblock screenshot">
<div class="content">
<img src="images/metrics-ml-jobs.png" alt="Infrastructure Machine Learning anomalies">
</div>
</div>
<p>The <span class="strong strong"><strong>Anomalies</strong></span> table displays a list of each single metric anomaly detection job for the specific host or Kubernetes pod.
By default, anomaly jobs are sorted by time to show the most recent job.</p>
<p>Along with each anomaly job and the node name,
detected anomalies with a severity score equal to 50 or higher are listed.
These scores represent a severity of "warning" or higher in the selected time period.
The <span class="strong strong"><strong>summary</strong></span> value represents the increase between the actual value and the expected ("typical") value of the metric in the anomaly record result.</p>
<p>To drill down and analyze the metric anomaly,
select <span class="strong strong"><strong>Actions → Open in Anomaly Explorer</strong></span> to view the Anomaly Explorer.
You can also select <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Show in Inventory</strong></span> to view the host or Kubernetes pods Inventory page,
filtered by the specific metric.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>These predefined anomaly detection jobs use <a href="/guide/en/machine-learning/master/ml-rules.html" class="ulink" target="_top">custom rules</a>.
To update the rules in the Anomaly Explorer, select <span class="strong strong"><strong>Actions</strong></span> → <span class="strong strong"><strong>Configure rules</strong></span>.
The changes only take effect for new results.
If you want to apply the changes to existing results, clone and rerun the job.</p>
</div>
</div>
<div class="position-relative"><h5><a id="history-chart"></a>History chart</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/infra-monitoring/detect-metric-anomalies.asciidoc">edit</a></div>
<p>On the <span class="strong strong"><strong>Inventory</strong></span> page, click <span class="strong strong"><strong>Show history</strong></span> to view the metric values within the selected time frame.
Detected anomalies with an anomaly score equal to 50 or higher are highlighted in red.
To examine the detected anomalies, use the Anomaly Explorer.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/metrics-history-chart.png" alt="History">
</div>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="observability-analyze-hosts.html">« Analyze and compare hosts</a>
</span>
<span class="next">
<a href="observability-configure-intra-settings.html">Configure settings »</a>
</span>
</div>
</body>
</html>
