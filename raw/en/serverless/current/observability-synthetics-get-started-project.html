<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Create monitors with a Synthetics project | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Create monitors with a Synthetics project | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="observability-synthetics-get-started.html" title="Get started"/>
<link rel="prev" href="observability-synthetics-get-started.html" title="Get started"/>
<link rel="next" href="observability-synthetics-get-started-ui.html" title="Create monitors in the Synthetics UI"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="observability-synthetics-get-started.html">« Get started</a>
</span>
<span class="next">
<a href="observability-synthetics-get-started-ui.html">Create monitors in the Synthetics UI »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-observability-serverless.html">Elastic Observability serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="application-and-service-monitoring.html">Application and service monitoring</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-monitor-synthetics.html">Synthetic monitoring</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-synthetics-get-started.html">Get started</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Create monitors with a Synthetics project</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h5 class="title"><a id="observability-synthetics-get-started-project"></a>Create monitors with a Synthetics project</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
</div></div></div>

<p>A Synthetics project is the most powerful and sophisticated way to configure synthetic monitors.
A Synthetics project lets you define your infrastructure as code, more commonly known as IaaC or Git-ops.
With monitors created and managed in Synthetics projects, you organize your YAML configuration and
JavaScript- or TypeScript-defined monitors on the filesystem, use Git for version control,
and deploy via a CLI tool, usually executed on a CI/CD platform.</p>
<div class="imageblock">
<div class="content">
<img src="images/synthetics-get-started-projects.png" alt="Diagram showing which pieces of software are used to configure monitors" width="create monitors" height="and view results when using Synthetic project monitors.">
</div>
</div>
<p>This is one of <a class="xref" href="observability-synthetics-get-started.html" title="Get started">two approaches</a> you can use to set up a synthetic monitor.</p>
<div class="position-relative"><h7><a id="observability-synthetics-get-started-project-prerequisites"></a>Prerequisites</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
<p>You must be signed in as a user with <a class="xref" href="observability-synthetics-feature-roles.html" title="Grant users access to secured resources">Editor</a> access.</p>
<p>Working with a Synthetics project requires working with the Elastic Synthetics CLI tool, which
can be invoked via the <code class="literal">npx @elastic/synthetics</code> command. Before getting started
you&#8217;ll need to:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Install <a href="https://nodejs.dev/en/" class="ulink" target="_top">Node.js</a>
</li>
<li class="listitem">
<p>Install the package:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">npm install -g @elastic/synthetics</pre>
</div>
</li>
<li class="listitem">
<p>Confirm your system is setup correctly:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">npx @elastic/synthetics -h</pre>
</div>
</li>
</ol>
</div>
<p>You should also decide where you want to run the monitors before getting started.
You can run monitors in Synthetics projects on one or both of the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Elastic&#8217;s global managed testing infrastructure</strong></span>:
With Elastic&#8217;s global managed testing infrastructure, you can create and run monitors in multiple
locations without having to manage your own infrastructure.
Elastic takes care of software updates and capacity planning for you.
</li>
<li class="listitem">
<span class="strong strong"><strong>Private Locations</strong></span>: Private Locations allow you to run monitors from your own premises.
To use Private Locations you must create a Private Location before continuing.
For step-by-step instructions, refer to <a class="xref" href="observability-synthetics-private-location.html" title="Monitor resources on private networks">Monitor resources on private networks</a>.
</li>
</ul>
</div>
<div class="position-relative"><h7><a id="observability-synthetics-get-started-project-create-a-synthetics-project"></a>Create a Synthetics project</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
<p>Start by creating your first Synthetics project. Run the command below to create a new
Synthetics project named <code class="literal">synthetic-project-test</code> in the current directory.</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">npx @elastic/synthetics init synthetic-project-test</pre>
</div>
<p>Then, follow the prompts on screen to set up the correct default variables for your Synthetics project.
When complete, set the <code class="literal">SYNTHETICS_API_KEY</code> environment variable in your terminal, which is used
to connect to your Observability project:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>To generate an API key:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to <span class="strong strong"><strong>Synthetics</strong></span> in your Observability project.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Settings</strong></span>.
</li>
<li class="listitem">
Switch to the <span class="strong strong"><strong>Project API Keys</strong></span> tab.
</li>
<li class="listitem">
<p>Click <span class="strong strong"><strong>Generate Project API key</strong></span>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>To generate a Project API key, you must be logged in as a user with <a class="xref" href="observability-synthetics-feature-roles.html" title="Grant users access to secured resources">Editor</a> access.</p>
</div>
</div>
<div class="imageblock screenshot">
<div class="content">
<img src="images/synthetics-monitor-management-api-key.png" alt="Project API Keys tab in Synthetics settings">
</div>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To use an API key to push to Elastic&#8217;s global managed testing infrastructure,
the <em>Elastic managed locations enabled</em> toggle must be on when generating the API key.
If the <em>Elastic managed locations enabled</em> toggle is disabled, an administrator has restricted
access to Elastic&#8217;s global managed testing infrastructure.</p>
</div>
</div>
</li>
</ol>
</div>
</li>
<li class="listitem">
Set the <code class="literal">SYNTHETICS_API_KEY</code> environment variable in your terminal.
You will most likely want to set this permanently.
This is done differently in <a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_environment_variables?view=powershell-7.2#saving-changes-to-environment-variables" class="ulink" target="_top">Powershell</a> and <a href="https://unix.stackexchange.com/a/117470" class="ulink" target="_top">Bash</a>.
</li>
</ol>
</div>
<p>Then, take a look at key files and directories inside your Synthetics project:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">journeys</code> is where you&#8217;ll add <code class="literal">.ts</code> and <code class="literal">.js</code> files defining your browser monitors.
When you create a new Synthetics project, this directory will contain files defining sample monitors.
</li>
<li class="listitem">
<code class="literal">lightweight</code> is where you&#8217;ll add <code class="literal">.yaml</code> files defining your lightweight monitors.
When you create a new Synthetics project, this directory will contain a file defining sample monitors.
</li>
<li class="listitem">
<p><code class="literal">synthetics.config.ts</code> contains settings for your Synthetics project.
When you create a new Synthetics project, it will contain some basic configuration options that you can customize later.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">synthetics.config.ts</code> in the sample Synthetics project uses a location on Elastic&#8217;s global managed testing infrastructure.
Administrators can restrict access to Elastic&#8217;s global managed testing infrastructure.
When you attempt to <a class="xref" href="observability-synthetics-get-started-project.html#observability-synthetics-get-started-project-test-and-connect-to-your-observability-project" title="Test and connect to your Observability project"><code class="literal">push</code> the sample monitors</a>,
if you see an error stating that you don&#8217;t have permission to use Elastic managed global locations,
refer to the <a class="xref" href="observability-synthetics-troubleshooting.html#synthetics-troubleshooting-no-locations" title="No locations are available">troubleshooting guide</a> for guidance.</p>
</div>
</div>
</li>
<li class="listitem">
<code class="literal">package.json</code> contains NPM settings for your Synthetics project. Learn more in the <a href="https://docs.npmjs.com/about-packages-and-modules" class="ulink" target="_top">NPM documentation</a>.
</li>
<li class="listitem">
<code class="literal">.github</code> contains sample workflow files to use with GitHub Actions.
</li>
</ul>
</div>
<div class="position-relative"><h7><a id="observability-synthetics-get-started-project-examine-sample-monitors"></a>Examine sample monitors</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
<p>Inside the <code class="literal">lightweight</code> directory you&#8217;ll find sample lightweight monitors.
Here&#8217;s an example of a YAML file defining a lightweight monitor:</p>
<div class="pre_wrapper lang-yml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yml"># lightweight.yml
heartbeat.monitors:
- type: http
  name: Todos Lightweight
  id: todos-lightweight
  urls: "https://elastic.github.io/synthetics-demo/"
  schedule: '@every 1m'</pre>
</div>
<p>For more details on lightweight monitor configuration options,
refer to <a class="xref" href="observability-synthetics-lightweight.html" title="Configure lightweight monitors">Configure lightweight monitors</a>.</p>
<p>Inside the <code class="literal">journeys</code> directory you&#8217;ll find sample browser monitors.
Here&#8217;s an example of a TypeScript file defining a browser monitor:</p>
<div class="pre_wrapper lang-ts">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-ts">// example.journey.ts
import { journey, step, monitor, expect } from '@elastic/synthetics';
journey('My Example Journey', ({ page, params }) =&gt; {
  // Only relevant for the push command to create
  // monitors in your Observability project
  monitor.use({
    id: 'example-monitor',
    schedule: 10,
  });
  step('launch application', async () =&gt; {
    await page.goto(params.url);
  });
  step('assert title', async () =&gt; {
    const header = await page.locator('h1');
    expect(await header.textContent()).toBe('todos');
  });
});</pre>
</div>
<p>For more details on writing journeys and configuring browser monitors,
refer to <a class="xref" href="observability-synthetics-journeys.html" title="Scripting browser monitors">Scripting browser monitors</a>.</p>
<div class="position-relative"><h7><a id="observability-synthetics-get-started-project-test-and-connect-to-your-observability-project"></a>Test and connect to your Observability project</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
<p>While inside the Synthetics project directory you can do two things with the <code class="literal">npx @elastic/synthetics</code> command:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>Test browser-based monitors locally. To run all journeys defined in <code class="literal">.ts</code> and <code class="literal">.js</code> files:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">npx @elastic/synthetics journeys</pre>
</div>
</li>
<li class="listitem">
<p>Push all monitor configurations to an Elastic Observability project.
Run the following command from inside your Synthetics project directory:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">npx @elastic/synthetics push --auth $SYNTHETICS_API_KEY --url &lt;observability-project-url&gt;</pre>
</div>
</li>
</ul>
</div>
<p>One monitor will appear in the Synthetics UI for each journey or
lightweight monitor, and you&#8217;ll manage all monitors from your local environment.
For more details on using the <code class="literal">push</code> command, refer to <a class="xref" href="observability-synthetics-command-reference.html#elastic-synthetics-push-command" title="@elastic/synthetics push"><code class="literal">@elastic/synthetics push</code></a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you&#8217;ve <a class="xref" href="observability-synthetics-private-location.html" title="Monitor resources on private networks">added a Private Location</a>,
you can <code class="literal">push</code> to that Private Location.</p>
<p>To list available Private Locations,
run the <a class="xref" href="observability-synthetics-command-reference.html#elastic-synthetics-locations-command" title="@elastic/synthetics locations"><code class="literal">elastic-synthetics locations</code> command</a>
with the URL for the Observability project from which to fetch available locations.</p>
</div>
</div>
<div class="position-relative"><h7><a id="observability-synthetics-get-started-project-view-in-your-observability-project"></a>View in your Observability project</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
<p>Then, go to <span class="strong strong"><strong>Synthetics</strong></span> in your Observability project. You should see your newly pushed monitors running.
You can also go to the <span class="strong strong"><strong>Management</strong></span> tab to see the monitors' configuration settings.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When a monitor is created or updated, the first run might not occur immediately, but the time it takes for the first run to occur will be less than the monitor&#8217;s configured frequency. For example, if you create a monitor and configure it to run every 10 minutes, the first run will occur within 10 minutes of being created. After the first run, the monitor will begin running regularly based on the configured frequency. You can run a manual test if you want to see the results more quickly.</p>
</div>
</div>
<div class="position-relative"><h7><a id="observability-synthetics-get-started-project-next-steps"></a>Next steps</h7><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/synthetics/synthetics-get-started-project.asciidoc">edit</a></div>
<p>Learn more about:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="observability-synthetics-lightweight.html" title="Configure lightweight monitors">Configuring lightweight monitors</a>
</li>
<li class="listitem">
<a class="xref" href="observability-synthetics-create-test.html" title="Write a synthetic test">Configuring browser monitors</a>
</li>
<li class="listitem">
<a class="xref" href="observability-synthetics-manage-monitors.html#synthetics-projects-best-practices" title="Implement best practices for Synthetics projects">Implementing best practices for working with Synthetics projects</a>
</li>
</ul>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="observability-synthetics-get-started.html">« Get started</a>
</span>
<span class="next">
<a href="observability-synthetics-get-started-ui.html">Create monitors in the Synthetics UI »</a>
</span>
</div>
</body>
</html>
