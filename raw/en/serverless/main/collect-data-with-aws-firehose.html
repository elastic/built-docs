<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quickstart: Collect data with AWS Firehose | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Quickstart: Collect data with AWS Firehose | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="observability-get-started.html" title="Get started with Elastic Observability"/>
<link rel="prev" href="observability-quickstarts-k8s-logs-metrics.html" title="Quickstart: Monitor your Kubernetes cluster with Elastic Agent"/>
<link rel="next" href="observability-dashboards.html" title="Get started with dashboards"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="observability-quickstarts-k8s-logs-metrics.html">« Quickstart: Monitor your Kubernetes cluster with Elastic Agent</a>
</span>
<span class="next">
<a href="observability-dashboards.html">Get started with dashboards »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-observability-serverless.html">Elastic Observability serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-get-started.html">Get started with Elastic Observability</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Quickstart: Collect data with AWS Firehose</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/quickstarts/collect-data-with-aws-firehose.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="collect-data-with-aws-firehose"></a>Quickstart: Collect data with AWS Firehose</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/quickstarts/collect-data-with-aws-firehose.asciidoc">edit</a></div>
</div></div></div>
<p>In this quickstart guide, you&#8217;ll learn how to use AWS Firehose to send logs and metrics to Elastic.</p>
<p>The AWS Firehose streams are created using a CloudFormation template, which can collect all available CloudWatch logs and metrics for your AWS account.</p>
<p>This approach requires minimal configuration as the CloudFormation template creates a Firehose stream, enables CloudWatch metrics collection across all namespaces, and sets up an account-level subscription filter for CloudWatch log groups to send logs to Elastic via Firehose.
You can use an AWS CLI command or upload the template to the AWS CloudFormation portal to customize the following parameter values:</p>
<details>
<summary class="title">Required Input Parameters</summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">ElasticEndpointURL</code>: Elastic endpoint URL.
</li>
<li class="listitem">
<code class="literal">ElasticAPIKey</code>: Elastic API Key.
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title">Optional Input Parameters</summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">HttpBufferInterval</code>: The Kinesis Firehose HTTP buffer interval, in seconds. Default is <code class="literal">60</code>.
</li>
<li class="listitem">
<code class="literal">HttpBufferSize</code>: The Kinesis Firehose HTTP buffer size, in MiB. Default is <code class="literal">1</code>.
</li>
<li class="listitem">
<code class="literal">S3BackupMode</code>: Source record backup in Amazon S3, failed data only or all data. Default is <code class="literal">FailedDataOnly</code>.
</li>
<li class="listitem">
<code class="literal">S3BufferInterval</code>: The Kinesis Firehose S3 buffer interval, in seconds. Default is <code class="literal">300</code>.
</li>
<li class="listitem">
<code class="literal">S3BufferSize</code>: The Kinesis Firehose S3 buffer size, in MiB. Default is <code class="literal">5</code>.
</li>
<li class="listitem">
<code class="literal">S3BackupBucketARN</code>: By default, an S3 bucket for backup will be created. You can override this behaviour by providing an ARN of an existing S3 bucket that ensures the data can be recovered if record processing transformation does not produce the desired results.
</li>
<li class="listitem">
<code class="literal">Attributes</code>: List of attribute name-value pairs for HTTP endpoint separated by commas. For example "name1=value1,name2=value2".
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title">Optional Input Parameters Specific for Metrics</summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">EnableCloudWatchMetrics</code>: Enable CloudWatch Metrics collection. Default is <code class="literal">true</code>. When CloudWatch metrics collection is enabled, by default a metric stream will be created with metrics from all namespaces.
</li>
<li class="listitem">
<code class="literal">FirehoseStreamNameForMetrics</code>: Name for Amazon Data Firehose Stream for collecting CloudWatch metrics. Default is <code class="literal">elastic-firehose-metrics</code>.
</li>
<li class="listitem">
<code class="literal">IncludeOrExclude</code>: Select the metrics you want to stream. You can include or exclude specific namespaces and metrics. If no filter namespace is given, then default to all namespaces. Default is <code class="literal">Include</code>.
</li>
<li class="listitem">
<code class="literal">MetricNameFilters</code>: Comma-delimited list of namespace-metric names pairs to use for filtering metrics from the stream. If no metric name filter is given, then default to all namespaces and all metrics. For example "AWS/EC2:CPUUtilization|NetworkIn|NetworkOut,AWS/RDS,AWS/S3:AllRequests".
</li>
<li class="listitem">
<code class="literal">IncludeLinkedAccountsMetrics</code>: If you are creating a metric stream in a monitoring account, specify <code class="literal">true</code> to include metrics from source accounts that are linked to this monitoring account, in the metric stream. Default is <code class="literal">false</code>.
</li>
<li class="listitem">
<code class="literal">Tags</code>: Comma-delimited list of tags to apply to the metric stream. For example "org:eng,project:firehose".
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title">Optional Input Parameters Specific for Logs</summary>
<div class="content">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">EnableCloudWatchLogs</code>: Enable CloudWatch Logs collection. Default is <code class="literal">true</code>. When CloudWatch logs collection is enabled, an account-level subscription filter policy is created for all CloudWatch log groups (except the log groups created for Firehose logs).
</li>
<li class="listitem">
<code class="literal">FirehoseStreamNameForLogs</code>: Name for Amazon Data Firehose Stream for collecting CloudWatch logs. Default is <code class="literal">elastic-firehose-logs</code>.
</li>
</ul>
</div>
</div>
</details>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Some AWS services need additional manual configuration to properly ingest logs and metrics. For more information, check the
<a href="/docs/current/integrations/aws" class="ulink" target="_top">AWS integration</a> documentation.</p>
</div>
</div>
<p>Data collection with AWS Firehose is supported on Amazon Web Services.</p>
<div class="position-relative"><h5><a id="_prerequisites"></a>Prerequisites</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/quickstarts/collect-data-with-aws-firehose.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
An Elastic Observability Serverless project. To learn more, refer to <a class="xref" href="observability-create-an-observability-project.html" title="Create an Elastic Observability Serverless project">Create an Observability project</a>.
</li>
<li class="listitem">
A user with the <span class="strong strong"><strong>Admin</strong></span> role or higher—required to onboard system logs and metrics. To learn more, refer to <a class="xref" href="general-assign-user-roles.html" title="Assign user roles and privileges">Assign user roles and privileges</a>.
</li>
<li class="listitem">
An active AWS account and the necessary permissions to create delivery streams.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The default CloudFormation stack is created in the AWS region selected for the user&#8217;s account. This region can be modified either through the AWS Console interface or by specifying a <code class="literal">--region</code> parameter in the AWS CLI command when creating the stack.</p>
</div>
</div>
<div class="position-relative"><h5><a id="_limitations"></a>Limitations</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/quickstarts/collect-data-with-aws-firehose.asciidoc">edit</a></div>
<p>The AWS Firehose receiver has the following limitations:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
It does not support AWS PrivateLink.
</li>
<li class="listitem">
The CloudFormation template detects and ingests logs and metrics within a single AWS region only.
</li>
</ul>
</div>
<p>The following table shows the type of data ingested by the supported AWS services:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">AWS Service</th>
<th align="left" valign="top">Data type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>VPC Flow Logs</p></td>
<td align="left" valign="top"><p>Logs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>API Gateway</p></td>
<td align="left" valign="top"><p>Logs, Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>CloudTrail</p></td>
<td align="left" valign="top"><p>Logs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Network Firewall</p></td>
<td align="left" valign="top"><p>Logs, Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Route53</p></td>
<td align="left" valign="top"><p>Logs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>WAF</p></td>
<td align="left" valign="top"><p>Logs</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>DynamoDB</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>EBS</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>EC2</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ECS</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>ELB</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>EMR</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>MSK</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Kinesis Data Stream</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Lambda</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>NAT Gateway</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>RDS</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>S3</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>SNS</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>SQS</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Transit Gateway</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>AWS Usage</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>VPN</p></td>
<td align="left" valign="top"><p>Metrics</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Uncategorized Firehose Logs</p></td>
<td align="left" valign="top"><p>Logs</p></td>
</tr>
</tbody>
</table>
</div>
<div class="position-relative"><h5><a id="_collect_your_data"></a>Collect your data</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/quickstarts/collect-data-with-aws-firehose.asciidoc">edit</a></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a class="xref" href="observability-create-an-observability-project.html" title="Create an Elastic Observability Serverless project">Create a new Elastic Observability Serverless project</a>, or open an existing one.
</li>
<li class="listitem">
In your Elastic Observability Serverless project, go to <span class="strong strong"><strong>Add Data</strong></span>.
</li>
<li class="listitem">
<p>Go to <span class="strong strong"><strong>Cloud</strong></span> &gt; <span class="strong strong"><strong>AWS</strong></span>, and then select <span class="strong strong"><strong>AWS Firehose</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/quickstart-aws-firehose-entry-point.png" alt="AWS Firehose entry point">
</div>
</div>
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Create Firehose Stream in AWS</strong></span> to create a CloudFormation stack from the CloudFormation template.
</li>
<li class="listitem">
Go back to the <span class="strong strong"><strong>Add Observability Data</strong></span> page.
</li>
</ol>
</div>
<div class="position-relative"><h5><a id="_visualize_your_data"></a>Visualize your data</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/quickstarts/collect-data-with-aws-firehose.asciidoc">edit</a></div>
<p>After installation is complete and all relevant data is flowing into Elastic,
the <span class="strong strong"><strong>Visualize your data</strong></span> section allows you to access the different dashboards for the various services.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/quickstart-aws-firehose-dashboards.png" alt="AWS Firehose dashboards">
</div>
</div>
<p>Here is an example of the VPC Flow logs dashboard:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/quickstart-aws-firehose-vpc-flow.png" alt="AWS Firehose VPC flow">
</div>
</div>
<p>Refer to <a class="xref" href="observability-serverless-observability-overview.html" title="Observability overview">Observability overview</a> for a description of other useful features.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="observability-quickstarts-k8s-logs-metrics.html">« Quickstart: Monitor your Kubernetes cluster with Elastic Agent</a>
</span>
<span class="next">
<a href="observability-dashboards.html">Get started with dashboards »</a>
</span>
</div>
</body>
</html>
