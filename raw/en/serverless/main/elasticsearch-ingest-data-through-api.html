<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ingest data through API | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Ingest data through API | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="elasticsearch-ingest-your-data.html" title="Ingest your data"/>
<link rel="prev" href="elasticsearch-ingest-your-data.html" title="Ingest your data"/>
<link rel="next" href="elasticsearch-ingest-data-through-integrations-connector-client.html" title="Connector clients"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-ingest-your-data.html">« Ingest your data</a>
</span>
<span class="next">
<a href="elasticsearch-ingest-data-through-integrations-connector-client.html">Connector clients »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-elasticsearch-serverless.html">Elasticsearch Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elasticsearch-ingest-your-data.html">Ingest your data</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Ingest data through API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/ingest-your-data-ingest-data-through-api.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="elasticsearch-ingest-data-through-api"></a>Ingest data through API</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/ingest-your-data-ingest-data-through-api.asciidoc">edit</a></div>
</div></div></div>
<p>The Elasticsearch APIs enable you to ingest data through code.
You can use the APIs of one of the
<a class="xref" href="elasticsearch-clients.html" title="Client libraries">language clients</a> or the
Elasticsearch HTTP APIs. The examples
on this page use the HTTP APIs to demonstrate how ingesting works in
Elasticsearch through APIs.
If you want to ingest timestamped data or have a
more complex ingestion use case, check out
<a class="xref" href="elasticsearch-ingest-data-through-beats.html" title="Beats">Beats</a> or
<a class="xref" href="elasticsearch-ingest-data-through-logstash.html" title="Logstash">Logstash</a>.</p>
<div class="position-relative"><h5><a id="elasticsearch-ingest-data-through-api-using-the-bulk-api"></a>Using the bulk API</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/ingest-your-data-ingest-data-through-api.asciidoc">edit</a></div>
<p>You can index multiple JSON documents to an index and make it searchable using
the bulk API.</p>
<p>The following example uses the bulk API to ingest book-related data into an
index called <code class="literal">books</code>. The API call creates the index if it doesn&#8217;t exist already.</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X POST "${ES_URL}/_bulk?pretty" \
-H "Authorization: ApiKey ${API_KEY}" \
-H "Content-Type: application/json" \
-d'
{ "index" : { "_index" : "books" } }
{"title": "Snow Crash", "author": "Neal Stephenson", "release_date": "1992-06-01", "page_count": 470}
{ "index" : { "_index" : "books" } }
{"title": "Revelation Space", "author": "Alastair Reynolds", "release_date": "2000-03-15", "page_count": 585}
{ "index" : { "_index" : "books" } }
{"title": "1984", "author": "George Orwell", "release_date": "1985-06-01", "page_count": 328}
{ "index" : { "_index" : "books" } }
{"title": "Fahrenheit 451", "author": "Ray Bradbury", "release_date": "1953-10-15", "page_count": 227}
{ "index" : { "_index" : "books" } }
{"title": "Brave New World", "author": "Aldous Huxley", "release_date": "1932-06-01", "page_count": 268}
{ "index" : { "_index" : "books" } }
{"title": "The Blind Assassin", "author": "Margaret Atwood", "release_date": "2000-09-02", "page_count": 536}
'</pre>
</div>
<p>The API returns a response similar to this:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "errors": false,
  "took": 902,
  "items": [
    {
      "index": {
        "_index": "books",
        "_id": "MCYbQooByucZ6Gimx2BL",
        "_version": 1,
        "result": "created",
        "_shards": {
          "total": 1,
          "successful": 1,
          "failed": 0
        },
        "_seq_no": 0,
        "_primary_term": 1,
        "status": 201
      }
    },
    ...
  ]
}</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Under the hood, the bulk request creates a data schema, called "mappings" for the <code class="literal">books</code> index.
To review the mappings and ensure the JSON body matches the index mappings, navigate to <span class="strong strong"><strong>Content</strong></span> → <span class="strong strong"><strong>Index management</strong></span>, select the index you want to ingest the data into, and click the <span class="strong strong"><strong>Mappings</strong></span> tab.</p>
</div>
</div>
<p>The API call creates an index called <code class="literal">books</code> and adds six documents to it. All
those documents have the <code class="literal">title</code>, <code class="literal">author</code>, <code class="literal">release_date</code>, and <code class="literal">page_count</code>
fields with associated values. This data is now searchable.</p>
<p>You can check if a book is in the index by calling the search API and specifying
either of the properties of the book in a <code class="literal">match</code> query, for example:</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl "${ES_URL}/books/_search?pretty" \
-H "Authorization: ApiKey ${API_KEY}" \
-H "Content-Type: application/json" \
-d'
{
  "query": {
    "match": {
      "title": "Snow Crash"
    }
  }
}
'</pre>
</div>
<p>The API response contains an array of hits. Each hit represents a document that
matches the query. The response contains the whole document. Only one document
matches this query.</p>
<div class="position-relative"><h5><a id="elasticsearch-ingest-data-through-api-using-the-index-api"></a>Using the index API</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/ingest-your-data-ingest-data-through-api.asciidoc">edit</a></div>
<p>Use the index API to ingest a single document to an index. Following the
previous example, a new document will be added to the <code class="literal">books</code> index.</p>
<div class="pre_wrapper lang-bash">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-bash">curl -X POST "${ES_URL}/books/_doc/" \
-H "Authorization: ApiKey ${API_KEY}" \
-H "Content-Type: application/json" \
-d'
{
  "title": "Neuromancer",
  "author": "William Gibson",
  "release_date": "1984-07-01",
  "page_count": "271"
}
'</pre>
</div>
<p>The API call indexes the new document into the <code class="literal">books</code> index. Now you can search
for it!</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="elasticsearch-ingest-your-data.html">« Ingest your data</a>
</span>
<span class="next">
<a href="elasticsearch-ingest-data-through-integrations-connector-client.html">Connector clients »</a>
</span>
</div>
</body>
</html>
