<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Get started with the serverless Java client | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Get started with the serverless Java client | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="elasticsearch-clients.html" title="Client libraries"/>
<link rel="prev" href="elasticsearch-go-client-getting-started.html" title="Get started with the serverless Go client"/>
<link rel="next" href="elasticsearch-dot-net-client-getting-started.html" title="Get started with the serverless .NET client"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-go-client-getting-started.html">« Get started with the serverless Go client</a>
</span>
<span class="next">
<a href="elasticsearch-dot-net-client-getting-started.html">Get started with the serverless .NET client »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-elasticsearch-serverless.html">Elasticsearch Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="elasticsearch-clients.html">Client libraries</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Get started with the serverless Java client</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="elasticsearch-java-client-getting-started"></a>Get started with the serverless Java client</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This client is for use with Elasticsearch Serverless only. See also the <a href="/guide/en/elasticsearch/client/index.html" class="ulink" target="_top">Elasticsearch clients</a>.</p>
</div>
</div>
<p>This page guides you through the installation process of the Java
client for Elasticsearch Serverless, shows you how to initialize the client, and how to perform basic
Elasticsearch operations with it.</p>
<div class="position-relative"><h5><a id="elasticsearch-java-client-getting-started-requirements"></a>Requirements</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Java 8 or later.
</li>
<li class="listitem">
A JSON object mapping library to allow seamless integration of
your application classes with the Elasticsearch API. The examples below
show usage with Jackson.
</li>
</ul>
</div>
<div class="position-relative"><h5><a id="elasticsearch-java-client-getting-started-installation"></a>Installation</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>You can add the Java client to your Java project using
either Gradle or Maven.</p>
<div class="position-relative"><h6><a id="elasticsearch-java-client-getting-started-using-gradle"></a>Using Gradle</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>You can install the Java client as a Gradle dependency:</p>
<div class="pre_wrapper lang-groovy">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-groovy">dependencies {
    implementation 'co.elastic.clients:elasticsearch-java-serverless:1.0.0-20231031'
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.17.0'
}</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-java-client-getting-started-using-maven"></a>Using Maven</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>You can install the Java client as a Maven dependency, add
the following to the <code class="literal">pom.xml</code> of your project:</p>
<div class="pre_wrapper lang-xml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-xml">&lt;project&gt;
    &lt;dependencies&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;co.elastic.clients&lt;/groupId&gt;
            &lt;artifactId&gt;elasticsearch-java-serverless&lt;/artifactId&gt;
            &lt;version&gt;1.0.0-20231031&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
            &lt;version&gt;2.17.0&lt;/version&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;
&lt;/project&gt;</pre>
</div>
<div class="position-relative"><h5><a id="elasticsearch-java-client-getting-started-initialize-the-client"></a>Initialize the client</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>Initialize the client using your API key and Elasticsearch endpoint:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">// URL and API key
String serverUrl = "https://...elastic.cloud";
String apiKey = "VnVhQ2ZHY0JDZGJrU...";

// Create the low-level client
RestClient restClient = RestClient
    .builder(HttpHost.create(serverUrl))
    .setDefaultHeaders(new Header[]{
        new BasicHeader("Authorization", "ApiKey " + apiKey)
    })
    .build();

// Create the transport with a Jackson mapper
ElasticsearchTransport transport = new RestClientTransport(
    restClient, new JacksonJsonpMapper());

// And create the API client
ElasticsearchClient esClient = new ElasticsearchClient(transport);</pre>
</div>
<p>To get API keys for the Elasticsearch endpoint for a project, see <a class="xref" href="elasticsearch-get-started.html" title="Get started">Get started</a>.</p>
<div class="position-relative"><h5><a id="elasticsearch-java-client-getting-started-using-the-api"></a>Using the API</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>After you initialized the client, you can start ingesting documents.</p>
<div class="position-relative"><h6><a id="elasticsearch-java-client-getting-started-creating-an-index-and-ingesting-documents"></a>Creating an index and ingesting documents</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>The following is an example of indexing a document, here a <code class="literal">Product</code> application
object in the <code class="literal">products</code> index:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">Product product = new Product("bk-1", "City bike", 123.0);

IndexResponse response = esClient.index(i -&gt; i
    .index("products")
    .id(product.getSku())
    .document(product)
);

logger.info("Indexed with version " + response.version());</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-java-client-getting-started-searching"></a>Searching</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>Now that some data is available, you can search your documents using the
<code class="literal">search</code> API:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">String searchText = "bike";

SearchResponse&lt;Product&gt; response = esClient.search(s -&gt; s
    .index("products")
    .query(q -&gt; q
        .match(t -&gt; t
            .field("name")
            .query(searchText)
        )
    ),
    Product.class
);</pre>
</div>
<p>A few things to note in the above example:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The search query is built using a hierarchy of lambda expressions that closely
follows the Elasticsearch HTTP API. Lambda expressions allows you to be guided
by your IDE&#8217;s autocompletion, without having to import (or even know!) the
actual classes representing a query.
</li>
<li class="listitem">
The last parameter <code class="literal">Product.class</code> instructs the client to return results as
<code class="literal">Product</code> application objects instead of raw JSON.
</li>
</ul>
</div>
<div class="position-relative"><h6><a id="elasticsearch-java-client-getting-started-updating"></a>Updating</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>You can update your documents using the <code class="literal">update</code> API:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">Product product = new Product("bk-1", "City bike", 123.0);

esClient.update(u -&gt; u
        .index("products")
        .id("bk-1")
        .upsert(product),
    Product.class
);</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-java-client-getting-started-delete"></a>Delete</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<p>You can also delete documents:</p>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">esClient.delete(d -&gt; d.index("products").id("bk-1"));</pre>
</div>
<div class="position-relative"><h6><a id="elasticsearch-java-client-getting-started-deleting-an-index"></a>Deleting an index</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/docs-content/edit/main/serverless/pages/clients-java-getting-started.asciidoc">edit</a></div>
<div class="pre_wrapper lang-java">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-java">esClient.indices().delete(d -&gt; d.index("products"));</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="elasticsearch-go-client-getting-started.html">« Get started with the serverless Go client</a>
</span>
<span class="next">
<a href="elasticsearch-dot-net-client-getting-started.html">Get started with the serverless .NET client »</a>
</span>
</div>
</body>
</html>
