<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Troubleshooting | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Troubleshooting | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="observability-apm.html" title="Application performance monitoring (APM)"/>
<link rel="prev" href="observability-apm-keep-data-secure.html" title="Keep APM data secure"/>
<link rel="next" href="observability-apm-reference.html" title="Reference"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="observability-apm-keep-data-secure.html">« Keep APM data secure</a>
</span>
<span class="next">
<a href="observability-apm-reference.html">Reference »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-observability-serverless.html">Elastic Observability serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="observability-apm.html">Application performance monitoring (APM)</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Troubleshooting</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="observability-apm-troubleshooting"></a>Troubleshooting</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting.asciidoc">edit</a></div>
</div></div></div>
<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span></p>
<p>This section provides solutions to common questions and problems,
and processing and performance guidance.</p>
<div class="position-relative"><h5><a id="observability-apm-troubleshooting-common-problems"></a>Common problems</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting.asciidoc">edit</a></div>
<p>This section describes common problems you might encounter.</p>
<div class="position-relative"><h6><a id="no-data-is-indexed"></a>No data is indexed</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting/common-problems.asciidoc">edit</a></div>
<p>If no data shows up, first make sure that your APM components are properly connected.</p>
<p><span class="strong strong"><strong>Are the URL and API key correct?</strong></span></p>
<p>Double check that the intake URL and API key are correct in your APM agent configuration.
Reference the relevant <a href="/guide/en/apm/agent/index.html" class="ulink" target="_top">APM agent documentation</a> for details on how to set these configuration variables.</p>
<p>To create a new API key, see <a class="xref" href="observability-apm-keep-data-secure.html#observability-apm-keep-data-secure-create-a-new-api-key" title="Create a new API key">Create a new API key</a>.</p>
<p>If you see requests coming through the managed intake service but they are not accepted (a response code other than <code class="literal">202</code>),
see <a class="xref" href="observability-apm-troubleshooting.html#observability-apm-troubleshooting-common-response-codes" title="Common response codes">managed intake service response codes</a> to narrow down the possible causes.</p>
<p><span class="strong strong"><strong>Are there instrumentation gaps?</strong></span></p>
<p>APM agents provide auto-instrumentation for many popular frameworks and libraries.
If the APM agent is not auto-instrumenting something that you were expecting, data won&#8217;t be sent to Elastic.
Reference the relevant <a href="/guide/en/apm/agent/index.html" class="ulink" target="_top">APM agent documentation</a> for details on what is automatically instrumented.</p>
<div class="position-relative"><h6><a id="data-indexed-no-apm-legacy"></a>Data is indexed but doesn&#8217;t appear in the Applications UI</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting/common-problems.asciidoc">edit</a></div>
<p>Elastic APM relies on default index mappings, data streams, and pipelines to query and display data.
If your APM data isn&#8217;t showing up in the Applications UI, but is elsewhere in Elastic, like Discover,
you&#8217;ve likely made a change that overwrote a default.
If you&#8217;ve manually changed a data stream, index template, or index pipeline,
please verify you are not interfering with the default APM setup.</p>
<div class="position-relative"><h6><a id="field-limit-exceeded-legacy"></a>Field limit exceeded</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting/common-problems.asciidoc">edit</a></div>
<p>When adding too many distinct tag keys on a transaction or span,
you risk creating a <a href="/guide/en/elasticsearch/reference/master/mapping.html#mapping-limit-settings" class="ulink" target="_top">mapping explosion</a>.</p>
<p>For example, you should avoid that user-specified data,
like URL parameters, is used as a tag key.
Likewise, using the current timestamp or a user ID as a tag key is not a good idea.
However, tag <span class="strong strong"><strong>values</strong></span> with a high cardinality are not a problem.
Just try to keep the number of distinct tag keys at a minimum.</p>
<p>The symptom of a mapping explosion is that transactions and spans are not indexed anymore after a certain time. Usually, on the next day,
the spans and transactions will be indexed again because a new index is created each day.
But as soon as the field limit is reached, indexing stops again.</p>
<div class="position-relative"><h5><a id="observability-apm-troubleshooting-common-response-codes"></a>Common response codes</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting.asciidoc">edit</a></div>
<div class="position-relative"><h6><a id="bad-request"></a>HTTP 400: Data decoding error / Data validation error</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting/common-response-codes.asciidoc">edit</a></div>
<p>The most likely cause for this error is using an incompatible version of an APM agent.
See <a class="xref" href="observability-apm-agents-elastic-apm-agents.html#observability-apm-agents-elastic-apm-agents-minimum-supported-versions" title="Minimum supported versions">minimum supported APM agent versions</a> to verify compatibility.</p>
<div class="position-relative"><h6><a id="event-too-large"></a>HTTP 400: Event too large</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting/common-response-codes.asciidoc">edit</a></div>
<p>APM agents communicate with the Managed intake service by sending events in an HTTP request. Each event is sent as its own line in the HTTP request body. If events are too large, you can reduce the size of the events that your APM agents send by: <a class="xref" href="observability-apm-compress-spans.html" title="Compress spans">enabling span compression</a> or <a class="xref" href="observability-apm-stacktrace-collection.html" title="Stacktrace collection">reducing collected stack trace information</a>.</p>
<div class="position-relative"><h6><a id="unauthorized"></a>HTTP 401: Invalid token</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting/common-response-codes.asciidoc">edit</a></div>
<p>The API key is invalid.</p>
<div class="position-relative"><h5><a id="observability-apm-troubleshooting-related-troubleshooting-resources"></a>Related troubleshooting resources</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting.asciidoc">edit</a></div>
<p>For additional help with other APM components, see the links below.
Elastic Agent and each APM agent has its own troubleshooting guide:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="/guide/en/fleet/master/troubleshooting-intro.html" class="ulink" target="_top">Fleet and Elastic Agent troubleshooting</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/dotnet/current/troubleshooting.html" class="ulink" target="_top">.NET agent troubleshooting</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/go/current/troubleshooting.html" class="ulink" target="_top">Go agent troubleshooting</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/java/current/trouble-shooting.html" class="ulink" target="_top">Java agent troubleshooting</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/nodejs/current/troubleshooting.html" class="ulink" target="_top">Node.js agent troubleshooting</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/php/current/troubleshooting.html" class="ulink" target="_top">PHP agent troubleshooting</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/python/current/troubleshooting.html" class="ulink" target="_top">Python agent troubleshooting</a>
</li>
<li class="listitem">
<a href="/guide/en/apm/agent/ruby/current/debugging.html" class="ulink" target="_top">Ruby agent troubleshooting</a>
</li>
</ul>
</div>
<div class="position-relative"><h5><a id="observability-apm-troubleshooting-elastic-support"></a>Elastic Support</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/main/docs/en/serverless/apm/apm-troubleshooting.asciidoc">edit</a></div>
<p>We offer a support experience unlike any other.
Our team of professionals <em>speak human and code</em> and love making your day.
<a href="/subscriptions" class="ulink" target="_top">Learn more about subscriptions</a>.</p>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="observability-apm-keep-data-secure.html">« Keep APM data secure</a>
</span>
<span class="next">
<a href="observability-apm-reference.html">Reference »</a>
</span>
</div>
</body>
</html>
