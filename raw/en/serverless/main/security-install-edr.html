<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Install the Elastic Defend integration | Serverless | Elastic</title>
<meta class="elastic" name="content" content="Install the Elastic Defend integration | Serverless">

<link rel="home" href="index.html" title="Serverless"/>
<link rel="up" href="security-endpoint-protection-intro.html" title="Configure endpoint protection with Elastic Defend"/>
<link rel="prev" href="security-elastic-endpoint-deploy-reqs.html" title="Elastic Defend requirements"/>
<link rel="next" href="security-install-endpoint-manually.html" title="Enable access for macOS Monterey"/>
<meta class="elastic" name="product_version" content="main"/>
<meta class="elastic" name="product_name" content="Serverless"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Serverless/Guide"/>
<meta name="DC.subject" content="Serverless"/>
<meta name="DC.identifier" content="main"/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="security-elastic-endpoint-deploy-reqs.html">« Elastic Defend requirements</a>
</span>
<span class="next">
<a href="security-install-endpoint-manually.html">Enable access for macOS Monterey »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="what-is-security-serverless.html">Elastic Security Serverless</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="security-endpoint-protection-intro.html">Configure endpoint protection with Elastic Defend</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Install the Elastic Defend integration</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/do-not-delete_legacy-docs/docs/serverless/edr-install-config/install-elastic-defend.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div id="url-to-v3" class="version-warning">
    <strong>IMPORTANT</strong>: This documentation is no longer updated. Refer to <a href="https://www.elastic.co/support/eol">Elastic's version policy</a> and the <a href="https://www.elastic.co/docs/solutions/security/configure-elastic-defend/install-elastic-defend">latest documentation</a>.
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="security-install-edr"></a>Install the Elastic Defend integration</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/do-not-delete_legacy-docs/docs/serverless/edr-install-config/install-elastic-defend.asciidoc">edit</a></div>
</div></div></div>

<p>Like other Elastic integrations, Elastic Defend is integrated into the Elastic Agent using <a href="/guide/en/fleet/8.19/fleet-overview.html" class="ulink" target="_top">Fleet</a>. Upon configuration, the integration allows the Elastic Agent to monitor events on your host and send data to the Elastic Security app.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p class="admon_title">Requirements</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fleet is required for Elastic Defend.
</li>
<li class="listitem">
To configure the Elastic Defend integration on the Elastic Agent, you must have permission to use Fleet.
</li>
<li class="listitem">
You must have the appropriate user role to configure an integration policy and access the <span class="strong strong"><strong>Endpoints</strong></span> page.
</li>
</ul>
</div>
</div>
</div>
<div class="position-relative"><h5><a id="security-before-you-begin"></a>Before you begin</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/do-not-delete_legacy-docs/docs/serverless/edr-install-config/install-elastic-defend.asciidoc">edit</a></div>
<p>If you&#8217;re using macOS, some versions may require you to grant Full Disk Access to different kernels, system extensions, or files. Refer to <a class="xref" href="security-elastic-endpoint-deploy-reqs.html" title="Elastic Defend requirements">Elastic Defend requirements</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Defend does not support deployment within an Elastic Agent DaemonSet in Kubernetes.</p>
</div>
</div>
<div class="position-relative"><h5><a id="add-security-integration"></a>Add the Elastic Defend integration</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/do-not-delete_legacy-docs/docs/serverless/edr-install-config/install-elastic-defend.asciidoc">edit</a></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Go to the <span class="strong strong"><strong>Integrations</strong></span> page, which you can access in several ways:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <span class="strong strong"><strong>Add integrations</strong></span> link at the top of most pages
</li>
<li class="listitem">
<span class="strong strong"><strong>Assets</strong></span> → <span class="strong strong"><strong>Browse Integrations</strong></span>
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Project settings</strong></span> → <span class="strong strong"><strong>Integrations</strong></span></p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/-getting-started-install-endpoint-endpoint-cloud-sec-integrations-page.png" alt="Search result for &quot;Elastic Defend&quot; on the Integrations page.">
</div>
</div>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>Search for and select <span class="strong strong"><strong>Elastic Defend</strong></span>, then select <span class="strong strong"><strong>Add Elastic Defend</strong></span>. The integration configuration page appears.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If this is the first integration you&#8217;ve installed and the <span class="strong strong"><strong>Ready to add your first integration?</strong></span> page appears instead, select <span class="strong strong"><strong>Add integration only (skip agent installation)</strong></span> to proceed. You can <a class="xref" href="security-install-edr.html#enroll-agent" title="Add the Elastic Agent">install Elastic Agent</a> after setting up the Elastic Defend integration.</p>
</div>
</div>
<p class="screenshot"><span class="image"><img src="images/install-endpoint/-getting-started-install-endpoint-endpoint-cloud-security-configuration.png" alt="Add Elastic Defend integration page"></span></p>
</li>
<li class="listitem">
Configure the Elastic Defend integration with an <span class="strong strong"><strong>Integration name</strong></span> and optional <span class="strong strong"><strong>Description</strong></span>.
</li>
<li class="listitem">
Select the type of environment you want to protect, either <span class="strong strong"><strong>Traditional Endpoints</strong></span> or <span class="strong strong"><strong>Cloud Workloads</strong></span>.
</li>
<li class="listitem">
<p>Select a configuration preset. Each preset comes with different default settings for Elastic Agent — you can further customize these later by <a class="xref" href="security-configure-endpoint-integration-policy.html" title="Configure an integration policy for Elastic Defend">configuring the Elastic Defend integration policy</a>.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top"></th>
<th align="left" valign="top"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Traditional Endpoint presets</strong></span></p></td>
<td align="left" valign="top">
<p>All traditional endpoint presets <em>except</em> <span class="strong strong"><strong>Data Collection</strong></span> have these preventions enabled by default: malware, ransomware, memory threat, malicious behavior, and credential theft. Each preset collects the following events:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Data Collection:</strong></span> All events; no preventions
</li>
<li class="listitem">
<span class="strong strong"><strong>Next-Generation Antivirus (NGAV):</strong></span> Process events; all preventions
</li>
<li class="listitem">
<span class="strong strong"><strong>Essential EDR (Endpoint Detection &amp; Response):</strong></span> Process, Network, File events; all preventions
</li>
<li class="listitem">
<span class="strong strong"><strong>Complete EDR (Endpoint Detection &amp; Response):</strong></span> All events; all preventions
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p><span class="strong strong"><strong>Cloud Workloads presets</strong></span></p></td>
<td align="left" valign="top">
<p>Both cloud workload presets are intended for monitoring cloud-based Linux hosts. Therefore, <a class="xref" href="security-session-view.html" title="Session View">session data</a> collection, which enriches process events, is enabled by default. They both have all preventions disabled by default, and collect process, network, and file events.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>All events:</strong></span> Includes data from automated sessions.
</li>
<li class="listitem">
<span class="strong strong"><strong>Interactive only:</strong></span> Filters out data from non-interactive sessions by creating an <a class="xref" href="security-event-filters.html" title="Event filters">event filter</a>.
</li>
</ul>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="listitem">
Enter a name for the agent policy in <span class="strong strong"><strong>New agent policy name</strong></span>. If other agent policies already exist, you can click the <span class="strong strong"><strong>Existing hosts</strong></span> tab and select an existing policy instead. For more details on Elastic Agent configuration settings, refer to <a href="/guide/en/fleet/8.19/agent-policy.html" class="ulink" target="_top">Elastic Agent policies</a>.
</li>
<li class="listitem">
When you&#8217;re ready, click <span class="strong strong"><strong>Save and continue</strong></span>.
</li>
<li class="listitem">
To complete the integration, select <span class="strong strong"><strong>Add Elastic Agent to your hosts</strong></span> and continue to the next section to install the Elastic Agent on your hosts.
</li>
</ol>
</div>
<div class="position-relative"><h5><a id="enroll-security-agent"></a>Configure and enroll the Elastic Agent</h5><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/do-not-delete_legacy-docs/docs/serverless/edr-install-config/install-elastic-defend.asciidoc">edit</a></div>
<p>To enable the Elastic Defend integration, you must enroll agents in the relevant policy using Fleet.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Before you add an Elastic Agent, a Fleet Server must be running. Refer to <a href="/guide/en/fleet/8.19/add-a-fleet-server.html" class="ulink" target="_top">Add a Fleet Server</a>.</p>
<p>Elastic Defend cannot be integrated with an Elastic Agent in standalone mode.</p>
</div>
</div>
<div class="position-relative"><h6><a id="enroll-agent"></a>Add the Elastic Agent</h6><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/do-not-delete_legacy-docs/docs/serverless/edr-install-config/install-elastic-defend.asciidoc">edit</a></div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>If you&#8217;re in the process of installing an Elastic Agent integration (such as Elastic Defend), the <span class="strong strong"><strong>Add agent</strong></span> UI opens automatically. Otherwise, go to <span class="strong strong"><strong>Assets</strong></span> → <span class="strong strong"><strong>Fleet</strong></span> → <span class="strong strong"><strong>Agents</strong></span> → <span class="strong strong"><strong>Add agent</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/install-endpoint/-getting-started-install-endpoint-endpoint-cloud-sec-add-agent.png" alt="Add agent flyout on the Fleet page.">
</div>
</div>
</li>
<li class="listitem">
<p>Select an agent policy for the Elastic Agent. You can select an existing policy, or select <span class="strong strong"><strong>Create new agent policy</strong></span> to create a new one. For more details on Elastic Agent configuration settings, refer to <a href="/guide/en/fleet/8.19/agent-policy.html" class="ulink" target="_top">Elastic Agent policies</a>.</p>
<p>The selected agent policy should include the integration you want to install on the hosts covered by the agent policy (in this example, Elastic Defend).</p>
<p class="screenshot"><span class="image"><img src="images/install-endpoint/-getting-started-install-endpoint-endpoint-cloud-sec-add-agent-detail.png" alt="Add agent flyout with Elastic Defend integration highlighted."></span></p>
</li>
<li class="listitem">
Ensure that the <span class="strong strong"><strong>Enroll in Fleet</strong></span> option is selected. Elastic Defend cannot be integrated with Elastic Agent in standalone mode.
</li>
<li class="listitem">
Select the appropriate platform or operating system for the host, then copy the provided commands.
</li>
<li class="listitem">
On the host, open a command-line interface and navigate to the directory where you want to install Elastic Agent. Paste and run the commands from Fleet to download, extract, enroll, and start Elastic Agent.
</li>
<li class="listitem">
(Optional) Return to the <span class="strong strong"><strong>Add agent</strong></span> flyout in Fleet, and observe the <span class="strong strong"><strong>Confirm agent enrollment</strong></span> and <span class="strong strong"><strong>Confirm incoming data</strong></span> steps automatically checking the host connection. It may take a few minutes for data to arrive in Elasticsearch.
</li>
<li class="listitem">
<p>After you have enrolled the Elastic Agent on your host, you can click <span class="strong strong"><strong>View enrolled agents</strong></span> to access the list of agents enrolled in Fleet. Otherwise, select <span class="strong strong"><strong>Close</strong></span>.</p>
<p>The host will now appear on the <span class="strong strong"><strong>Endpoints</strong></span> page in the Elastic Security app. It may take another minute or two for endpoint data to appear in Elastic Security.</p>
</li>
<li class="listitem">
For macOS, continue with <a class="xref" href="security-install-endpoint-manually.html" title="Enable access for macOS Monterey">these instructions</a> to grant Elastic Endpoint the required permissions.
</li>
</ol>
</div>




</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="security-elastic-endpoint-deploy-reqs.html">« Elastic Defend requirements</a>
</span>
<span class="next">
<a href="security-install-endpoint-manually.html">Enable access for macOS Monterey »</a>
</span>
</div>
</body>
</html>
