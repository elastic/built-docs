<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Search API Reference | Workplace Search Guide [7.11] | Elastic</title>
<link rel="home" href="index.html" title="Workplace Search Guide [7.11]"/>
<link rel="up" href="workplace-search-api-overview.html" title="Workplace Search API Reference"/>
<link rel="prev" href="workplace-search-external-identities-api.html" title="External Identities API Reference"/>
<link rel="next" href="workplace-search-search-oauth.html" title="OAuth Service API Reference"/>
<meta name="DC.type" content="Learn/Docs/Workplace Search/Guide/7.11"/>
<meta name="DC.subject" content="Workplace Search"/>
<meta name="DC.identifier" content="7.11"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Workplace Search Guide [7.11]</a></span>
»
<span class="breadcrumb-link"><a href="workplace-search-api-overview.html">Workplace Search API Reference</a></span>
»
<span class="breadcrumb-node">Search API Reference</span>
</div>
<div class="navheader">
<span class="prev">
<a href="workplace-search-external-identities-api.html">« External Identities API Reference</a>
</span>
<span class="next">
<a href="workplace-search-search-oauth.html">OAuth Service API Reference »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="workplace-search-search-api"></a>Search API Reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h2>
</div></div></div>

<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <a class="xref" href="building-custom-search-workplace-search.html" title="Building Custom Search Experiences">Custom search experiences</a> guide provides a conceptual walkthrough of the steps involved in issuing search requests on behalf of users via OAuth.</p>
</div>
</div>
<h3><a id="search-api-toc"></a>In this API reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-api-overview" title="Search API Overview">Search API Overview</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-query" title="Search Query">Querying</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-page" title="Pagination">Paginating</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-sort" title="Sorting">Sorting results</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-search-fields" title="Search Fields">Restricting search fields</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-result-fields" title="Result Fields">Restricting result fields</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-value-filters" title="Value Filters">Filtering a query with a value</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-range-filters" title="Range Filters">Filtering a query with a numerical range</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-geo-filters" title="Geo Filters">Filtering a query with geolocation data</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-combining-filters" title="Combining Filters">Combining filters</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-value-facets" title="Value Facets">Configuring value facet options</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-range-facets" title="Range Facets">Configuring range facet options</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-geo-facets" title="Geolocation Facets">Configuring geolocation facet options</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-value-boosts" title="Value boosts">Configuring a value boost</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-functional-boosts" title="Functional boosts">Configuring a functional boost</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-proximity-boosts" title="Proximity boosts">Configuring a proximity boost</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-recency-boosts" title="Recency boosts">Configuring a recency boost</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-search-api.html#search-automatic-query-refinements" title="Automatic query refinements">Configuring automatic query refinements</a>
</li>
</ul>
</div>
<hr>
<h3><a id="search-api-overview"></a>Search API Overview<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">POST http://localhost:3002/api/ws/v1/search</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">query</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>The search query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">page</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Provides optional keys of size and current. Specifies the number of results per page and which page the API should return.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sort</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Sort results ASC or DESC for a field</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">search_fields</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Fields used for full-text matching</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">result_fields</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Fields returned in the JSON response</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">filters</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Query modifiers used to refine a query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">facets</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration</p></td>
</tr>
</tbody>
</table>
</div>
<hr>
<h3><a id="search-query"></a>Search Query<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">query</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>A string or number used to find related documents</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "denali"
}'</pre>
</div>
<hr>
<h3><a id="search-page"></a>Pagination<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">page</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Provides optional keys of size and current. Specifies the number of results per page and which page the API should return.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">size</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Specifies the number of results per page. Must be greater than or equal to <code class="literal">1</code> and less than or equal to <code class="literal">100</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">current</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Specifies which page of results to retrieve for the query. Must be greater than or equal to <code class="literal">1</code> and less than or equal to <code class="literal">100</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "denali",
  "page": {
    "size": 1,
    "current": 1
  }
}'</pre>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="search-results-limit"></a>Limit on results per query<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
</div></div></div>
<p>As described in <a class="xref" href="workplace-search-search-api.html#search-page" title="Pagination">Pagination</a>, Workplace Search limits <code class="literal">page.size</code> to <code class="literal">100</code> and <code class="literal">page.current</code> to <code class="literal">100</code>.
Therefore, <span class="strong strong"><strong>Workplace Search effectively limits each search query to ten thousand (10000) results</strong></span>.</p>
<p>Work around this limitation by requesting fewer documents.
Divide a large set of documents into smaller sets by filtering, perhaps by content source, type, or timestamps (e.g. updated, created).
Choose filters that create sets smaller than 10000.</p>
<hr>
<h3><a id="search-sort"></a>Sorting<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sort</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Sort results ASC or DESC for one or multiple field</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of the field used for sorting</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">value</code></p></td>
<td align="left" valign="top"><p>direction</p></td>
<td align="left" valign="top"><p>ASC or DESC direction for sorting</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "denali",
  "sort": [
    { "square_km": "desc" },
    { "date_established": "asc" }
  ]
}'</pre>
</div>
<hr>
<h3><a id="search-search-fields"></a>Search Fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">search_fields</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Fields used for full-text matching</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of the field used for full-text matching</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">weight</code></p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>The relative importance of fields in a query. A higher value represents greater importance for algorithmic scoring.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "denali",
  "search_fields": {
    "title": {
      "weight": 10
    },
    "description": {}
  }
}'</pre>
</div>
<hr>
<h3><a id="search-result-fields"></a>Result Fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">result_fields</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Fields returned in the JSON response</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Children of the <code class="literal">result_fields</code> object. Name of the field to be returned in the response</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">raw</code></p></td>
<td align="left" valign="top"><p>result type</p></td>
<td align="left" valign="top"><p>Value of the field as originally indexed</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">snippet</code></p></td>
<td align="left" valign="top"><p>result type</p></td>
<td align="left" valign="top"><p>Value of the field with highlighting markup added to visually distinguish where the match occurred</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">size</code></p></td>
<td align="left" valign="top"><p>integer</p></td>
<td align="left" valign="top"><p>Character length of the returned value</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">fallback</code></p></td>
<td align="left" valign="top"><p>boolean</p></td>
<td align="left" valign="top"><p>For <code class="literal">snippet</code> only. Returns the <code class="literal">raw</code> value as <code class="literal">snippet</code> even when no match was highlighted</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "america",
  "result_fields": {
    "title": {
      "raw": {},
      "snippet": {}
    },
    "description": {
      "raw": {
        "size": 50
      },
      "snippet": {
        "fallback": true,
        "size": 50
      }
    },
    "states": {
      "snippet": {
        "size": 50
      }
    }
  }
}'</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    ...
  },
  "results": [
    {
      "title": {
        "raw": "American Samoa",
        "snippet": "&lt;em&gt;American&lt;/em&gt; Samoa"
      },
      "_meta": {
        "source": "custom",
        "last_updated": "2020-03-27T20:10:33+00:00",
        "content_source_id": "5e7e5d911897c6dbb7e3e72a",
        "id": "park_american-samoa",
        "score": 6.359234
      },
      "source": {
        "raw": "custom"
      },
      "states": {
        "snippet": "&lt;em&gt;American&lt;/em&gt; Samoa"
      },
      "description": {
        "raw": "The southernmost National Park is on three Samoan",
        "snippet": "The southernmost National Park is on three Samoan"
      },
      "last_updated": {
        "raw": "2020-03-27T20:10:33+00:00"
      },
      "content_source_id": {
        "raw": "5e7e5d911897c6dbb7e3e72a"
      },
      "id": {
        "raw": "park_american-samoa"
      }
    },
    {
      "title": {
        "raw": "Denali",
        "snippet": null
      },
      "_meta": {
        "source": "custom",
        "last_updated": "2020-03-27T20:10:33+00:00",
        "content_source_id": "5e7e5d911897c6dbb7e3e72a",
        "id": "park_denali",
        "score": 6.357545
      },
      "source": {
        "raw": "custom"
      },
      "states": {
        "snippet": null
      },
      "description": {
        "raw": "Centered on Denali, the tallest mountain in North",
        "snippet": " &lt;em&gt;America&lt;/em&gt;, Denali is serviced by a single road"
      },
      "last_updated": {
        "raw": "2020-03-27T20:10:33+00:00"
      },
      "content_source_id": {
        "raw": "5e7e5d911897c6dbb7e3e72a"
      },
      "id": {
        "raw": "park_denali"
      }
    },
    ...
  ]
}</pre>
</div>
<hr>
<h3><a id="search-value-filters"></a>Value Filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">filters</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Query modifiers used to refine a query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of field upon which to apply your filter</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field value</code></p></td>
<td align="left" valign="top"><p>field value</p></td>
<td align="left" valign="top"><p>The value upon which to filter. The value must be an exact match, even casing: <code class="literal">True</code> will not match on <code class="literal">true</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "filters": {
    "states": ["California", "Washington"]
  }
}'</pre>
</div>
<hr>
<h3><a id="search-range-filters"></a>Range Filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">filters</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Query modifiers used to refine a query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of field upon which to apply your filter</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">from</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Inclusive lower bound of the range. Is required if <code class="literal">to</code> is not provided.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">to</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Exclusive upper bound of the range. Is required if <code class="literal">from</code> is not provided.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "filters": {
    "visitors": {
      "from": 100
    }
  }
}'</pre>
</div>
<hr>
<h3><a id="search-geo-filters"></a>Geo Filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">filters</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Query modifiers used to refine a query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of field upon which to apply your filter</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">center</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>The mode of the distribution, specified as a latitude-longitude pair. See <a class="xref" href="workplace-search-custom-sources-api.html#geolocation" title="geolocation Fields">Geolocation fields</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">unit</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>The base unit of measurement: <code class="literal">mm</code>, <code class="literal">cm</code>, <code class="literal">m</code> (meters), <code class="literal">km</code>, <code class="literal">in</code>, <code class="literal">ft</code>, <code class="literal">yd</code>, or <code class="literal">mi</code> (miles).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">distance</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>A number representing the distance unit. Is required if <code class="literal">from</code> or <code class="literal">to</code> is not given.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">from</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Inclusive lower bound of the range. Is required if <code class="literal">to</code> is not provided.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">to</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Exclusive upper bound of the range. Is required if <code class="literal">from</code> is not provided.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "filters": {
    "location": {
      "unit": "km",
      "center": "47.6062,122.3321",
      "distance": 1000
    }
  }
}'</pre>
</div>
<hr>
<h3><a id="search-combining-filters"></a>Combining Filters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">filters</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Query modifiers used to refine a query</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">all</code></p></td>
<td align="left" valign="top"><p>array</p></td>
<td align="left" valign="top"><p>All of the filters must match. This functions as an <code class="literal">AND</code> condition.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">any</code></p></td>
<td align="left" valign="top"><p>array</p></td>
<td align="left" valign="top"><p>At least one of the filters must match. This functions as an <code class="literal">OR</code> condition.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">none</code></p></td>
<td align="left" valign="top"><p>array</p></td>
<td align="left" valign="top"><p>All of the filters must <span class="strong strong"><strong>not</strong></span> match. This functions as a <code class="literal">NOT</code> condition.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "filters": {
    "all": [
      {
        "states": ["California", "Washington"]
      },
      {
        "visitors": {
          "from": 100
        }
      },
      {
        "date_established": {
          "to": "1900-01-01"
        }
      }
    ],
    "any": [
      {
        "location": {
          "unit": "km",
          "center": "47.6062,122.3321",
          "distance": 1000
        }
      },
      {
        "location": {
          "unit": "km",
          "center": "37.7749,122.4194",
          "from": 100,
          "to": 10000
        }
      }
    ],
    "none": {
      "world_heritage_site": "true"
    }
  }
}'</pre>
</div>
<hr>
<h3><a id="search-value-facets"></a>Value Facets<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">facets</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of field upon which to apply your facet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">type</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of facet, in this case <code class="literal">value</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">name</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Name given to facet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">size</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Between 1 and 250, defaults to 10</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">sort</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>JSON object where the key is either <code class="literal">count</code> or <code class="literal">value</code> and the value is <code class="literal">asc</code> or <code class="literal">desc</code>. The default is sorting by descending count.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "facets": {
    "states": {
      "type": "value",
      "name": "top-five-states",
      "sort": { "count": "desc" },
      "size": 5
    }
  }
}'</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    ...
  },
  "results": [
    ...
  ],
  "facets": {
    "states": [
      {
        "type": "value",
        "data": [
          {
            "value": "Alaska",
            "count": 5
          },
          {
            "value": "Utah",
            "count": 2
          },
          {
            "value": "Colorado",
            "count": 2
          },
          {
            "value": "California",
            "count": 2
          },
          {
            "value": "Washington",
            "count": 1
          }
        ],
        "name": "top-five-states"
      }
    ],
  }
}</pre>
</div>
<hr>
<h3><a id="search-range-facets"></a>Range Facets<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">facets</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of field upon which to apply your facet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">type</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of facet, in this case <code class="literal">range</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">name</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Name given to facet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ranges</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>An array of range objects</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">from</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Inclusive lower bound of the range. Is required if <code class="literal">to</code> is not provided.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">to</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Exclusive upper bound of the range. Is required if <code class="literal">from</code> is not provided.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">name</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Name given to range</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "facets": {
    "acres": [
      {
        "type": "range",
        "name": "min-and-max-range",
        "ranges": [
          { "from": 1, "to": 10000 },
          { "from": 10000 }
        ]
      }
    ],
    "date_established": {
      "type": "range",
      "name": "half-century",
      "ranges": [
        { "from": "1900-01-01T12:00:00+00:00", "to": "1950-01-01T00:00:00+00:00" }
      ]
    }
  }
}'</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    ...
  },
  "results": [
    ...
  ],
  "facets": {
    "acres": [
      {
        "type": "range",
        "data": [
          {
            "key": "5e7e6cbd1897c6aa79a79c95",
            "from": 1,
            "to": 10000,
            "count": 1
          },
          {
            "key": "5e7e6cbd1897c6aa79a79c96",
            "from": 10000,
            "count": 19
          }
        ],
        "name": "min-and-max-range"
      }
    ],
    "date_established": [
      {
        "type": "range",
        "data": [
          {
            "key": "5e7e6cbd1897c6aa79a79c97",
            "from": "1900-01-01T12:00:00.000Z",
            "to": "1950-01-01T00:00:00.000Z",
            "count": 11
          }
        ],
        "name": "half-century"
      }
    ]
  }
}</pre>
</div>
<hr>
<h3><a id="search-geo-facets"></a>Geolocation Facets<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">facets</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">field</code></p></td>
<td align="left" valign="top"><p>field</p></td>
<td align="left" valign="top"><p>Name of field upon which to apply your facet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">type</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of facet, in this case <code class="literal">range</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">name</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Name given to facet</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">ranges</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>An array of range objects</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">from</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Inclusive lower bound of the range. Is required if <code class="literal">to</code> is not provided.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">to</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Exclusive upper bound of the range. Is required if <code class="literal">from</code> is not provided.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">center</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>The mode of the distribution, specified as a latitude-longitude pair. See <a class="xref" href="workplace-search-custom-sources-api.html#geolocation" title="geolocation Fields">Geolocation fields</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">unit</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>The base unit of measurement: <code class="literal">mm</code>, <code class="literal">cm</code>, <code class="literal">m</code> (meters), <code class="literal">km</code>, <code class="literal">in</code>, <code class="literal">ft</code>, <code class="literal">yd</code>, or <code class="literal">mi</code> (miles).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">name</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Name given to range</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "facets": {
    "location": {
      "type": "range",
      "name": "geo-range-from-san-francisco",
      "center": "37.386483, -122.083842",
      "unit": "m",
      "ranges": [
        { "from": 0, "to": 100000, "name": "Nearby" },
        { "from": 100000, "to": 300000, "name": "A longer drive." },
        { "from": 300000, "name": "Perhaps fly?" }
      ]
    }
  }
}'</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    ...
  },
  "results": [
    ...
  ],
  "facets": {
    "location": [
      {
        "type": "range",
        "data": [
          {
            "key": "Nearby",
            "from": 0,
            "to": 100000,
            "count": 0
          },
          {
            "key": "A longer drive.",
            "from": 100000,
            "to": 300000,
            "count": 0
          },
          {
            "key": "Perhaps fly?",
            "from": 300000,
            "count": 20
          }
        ],
        "name": "geo-range-from-san-francisco"
      }
    ]
  }
}</pre>
</div>
<hr>
<h3><a id="search-boosts"></a>Boosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<p>Boosting allows you to control the relevance of a document based on criteria for the value of a field (or fields) within a document.</p>
<p>Different boosts are applied to different field types.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Value boosts: <code class="literal">text</code>, <code class="literal">number</code>, <code class="literal">date</code>
</li>
<li class="listitem">
Functional boosts: <code class="literal">number</code>
</li>
<li class="listitem">
Proximity Boosts: <code class="literal">number</code>, <code class="literal">location</code>
</li>
<li class="listitem">
Recency boosts: <code class="literal">date</code>
</li>
</ul>
</div>
<p>The general format for a single boost looks like so:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
    "boosts": {
        "(field)": { (boost parameters) },
        "(field_2)": ...,
        ...
    }
}'</pre>
</div>
<p>The general format for multiple boosts looks like so:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
    "boosts": {
        "(field)": [
            { (boost parameter 1) },
            { (boost parameter 2) },
            ...
        ]
    }
}'</pre>
</div>
<hr>
<h4><a id="search-value-boosts"></a>Value boosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h4>
<p>A value boost will boost the score of a document based on a direct value match. Available on text, number, and date fields. A document’s overall score will only be boosted once.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">boosts</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">type</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of boost. For a value boost, this should be <code class="literal">value</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">value</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>The value to exact match on, or use an array to match on multiple values.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">operation</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>The arithmetic operation used to combine the original document score with your boost value. Can be <code class="literal">add</code> or <code class="literal">multiply</code>. Defaults to <code class="literal">add</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">factor</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Factor to alter the impact of a boost on the score of a document. Must be between <code class="literal">0.0</code> and <code class="literal">10.0</code>. Defaults to <code class="literal">1.0</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "",
  "sort": { "_score": "desc" },
  "boosts": {
  	"states": {
  		"type": "value",
  		"value": "California",
  		"operation": "multiply",
  		"factor": 2
  	}
  },
  "result_fields": {
  	"title": { "raw": {} },
  	"visitors": { "raw": {} },
  	"states": { "raw": {} }
  },
  "page": {
  	"size": 100
  }
}'</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "meta": {
      ...
    },
    "results": [
        {
            "title": {
                "raw": "Channel Islands"
            },
            "_meta": {
                "source": "custom",
                "last_updated": "2020-10-22T17:20:58+00:00",
                "content_source_id": "5f91bf7888f9297b02a3d80c",
                "id": "park_channel-islands",
                "score": 2.0
            },
            "source": {
                "raw": "custom"
            },
            "states": {
                "raw": [
                    "California"
                ]
            },
            "last_updated": {
                "raw": "2020-10-22T17:20:58+00:00"
            },
            "visitors": {
                "raw": 364807.0
            },
            "content_source_id": {
                "raw": "5f91bf7888f9297b02a3d80c"
            },
            "id": {
                "raw": "park_channel-islands"
            }
        },
        {
            "title": {
                "raw": "Death Valley"
            },
            "_meta": {
                "source": "custom",
                "last_updated": "2020-10-22T17:20:58+00:00",
                "content_source_id": "5f91bf7888f9297b02a3d80c",
                "id": "park_death-valley",
                "score": 2.0
            },
            "source": {
                "raw": "custom"
            },
            "states": {
                "raw": [
                    "California",
                    "Nevada"
                ]
            },
            "last_updated": {
                "raw": "2020-10-22T17:20:58+00:00"
            },
            "visitors": {
                "raw": 1296283.0
            },
            "content_source_id": {
                "raw": "5f91bf7888f9297b02a3d80c"
            },
            "id": {
                "raw": "park_death-valley"
            }
        },
        ...
    ]
}</pre>
</div>
<h4><a id="search-functional-boosts"></a>Functional boosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h4>
<p>A functional boost will apply a function to the overall document score based on the value of the numeric field. Only available on number fields.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">boosts</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">type</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of boost. For a functional boost, this should be <code class="literal">functional</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">function</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of function to calculate the boost value. Can be <code class="literal">linear</code>, <code class="literal">exponential</code>, or <code class="literal">logarithmic</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">operation</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>The arithmetic operation used to combine the original document score with your boost value. Can be <code class="literal">add</code> or <code class="literal">multiply</code>. Defaults to <code class="literal">add</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">factor</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Factor to alter the impact of a boost on the score of a document. Must be between <code class="literal">0.0</code> and <code class="literal">10.0</code>. Defaults to <code class="literal">1.0</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "",
  "filters": { "states": ["California"] },
  "sort": { "_score": "desc" },
  "boosts": {
  	"visitors": {
  		"type": "functional",
  		"function": "linear",
  		"operation": "multiply",
  		"factor": 2
  	}
  },
  "result_fields": {
  	"title": { "raw": {} },
  	"visitors": { "raw": {} }
  }
}'</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
    "meta": {
      ...
    },
    "results": [
        {
            "title": {
                "raw": "Yosemite"
            },
            "_meta": {
                "source": "custom",
                "last_updated": "2020-10-22T17:20:58+00:00",
                "content_source_id": "5f91bf7888f9297b02a3d80c",
                "id": "park_yosemite",
                "score": 1.0057736E7
            },
            "source": {
                "raw": "custom"
            },
            "last_updated": {
                "raw": "2020-10-22T17:20:58+00:00"
            },
            "visitors": {
                "raw": 5028868.0
            },
            "content_source_id": {
                "raw": "5f91bf7888f9297b02a3d80c"
            },
            "id": {
                "raw": "park_yosemite"
            }
        },
        {
            "title": {
                "raw": "Joshua Tree"
            },
            "_meta": {
                "source": "custom",
                "last_updated": "2020-10-22T17:20:58+00:00",
                "content_source_id": "5f91bf7888f9297b02a3d80c",
                "id": "park_joshua-tree",
                "score": 5010572.0
            },
            "source": {
                "raw": "custom"
            },
            "last_updated": {
                "raw": "2020-10-22T17:20:58+00:00"
            },
            "visitors": {
                "raw": 2505286.0
            },
            "content_source_id": {
                "raw": "5f91bf7888f9297b02a3d80c"
            },
            "id": {
                "raw": "park_joshua-tree"
            }
        },
        ...
    ]
}</pre>
</div>
<h4><a id="search-proximity-boosts"></a>Proximity boosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h4>
<p>Boost on the difference of a document value and a given value from the center parameter. Available on number and geolocation fields.</p>
<p>For date fields see recency boosts.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">boosts</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">type</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of boost. For a proximity boost, this should be <code class="literal">proximity</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">function</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of function to calculate the boost value. Can be <code class="literal">linear</code>, <code class="literal">exponential</code>, or <code class="literal">gaussian</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">center</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>The mode of the distribution. Should be a number or a set of geolocation coordinates, like <code class="literal">25.32, -80.93</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">factor</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Factor to alter the impact of a boost on the score of a document. Must be between <code class="literal">0.0</code> and <code class="literal">10.0</code>. Defaults to <code class="literal">1.0</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "boosts": {
    "location": {
      "type": "proximity",
      "function": "linear",
      "center": "25.32, -80.93",
      "factor": 8
    }
  },
  "query": "old growth"
}'</pre>
</div>
<h5><a id="search-recency-boosts"></a>Recency boosts<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h5>
<p>A proximity boost, but with a timeframe as the center instead of a coordinate. Recency boosts are syntactically the same as proximity boosts, however they exclusively operate on a date/time field. In addition, the value for these boosts can use the keyword "now" to specify the center, or origin, of the boost function as the current date/time.</p>
<p>Only applies to date fields.</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">access_token</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Must be included in HTTP authorization headers, is acquired via an <a class="xref" href="building-custom-search-workplace-search.html#configuring-search-oauth" title="Configuring the OAuth Application for Search">OAuth authorization flow</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">boosts</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Faceting configuration</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">type</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of boost. For a recency boost, this should be <code class="literal">proximity</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">function</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Type of function to calculate the boost value. Can be <code class="literal">linear</code>, <code class="literal">exponential</code>, or <code class="literal">gaussian</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">center</code></p></td>
<td align="left" valign="top"><p>required</p></td>
<td align="left" valign="top"><p>Provide a time-frame. Consider using <code class="literal">now</code> to establish recency from the present time, or, an ISO 8601 date/time formatted value such as: <code class="literal">1974-01-13T05:15:12.65Z</code>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">factor</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Factor to alter the impact of a boost on the score of a document. Must be between <code class="literal">0.0</code> and <code class="literal">10.0</code>. Defaults to <code class="literal">1.0</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "boosts": {
    "location": {
      "type": "proximity",
      "function": "linear",
      "center": "25.32, -80.93",
      "factor": 8
    }
  },
  "query": "old growth"
}'</pre>
</div>
<hr>
<h3><a id="search-automatic-query-refinements"></a>Automatic query refinements<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/workplace-search-docs/api/search.asciidoc">edit</a></h3>
<p>Automatic query refinements are on by default.</p>
<p>To disable automatic query refinements, change the boolean value on the <code class="literal">automatic_query_refinement</code> top-level field:</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">{
  …
  "automatic_query_refinement": {true|false, default: true}
  …
}</pre>
</div>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
<col class="col_3"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">automatic_query_refinement</code></p></td>
<td align="left" valign="top"><p>optional</p></td>
<td align="left" valign="top"><p>Can be <code class="literal">true</code> or <code class="literal">false</code>. Defaults to <code class="literal">true</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">curl -X POST http://localhost:3002/api/ws/v1/search \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "query": "documents updated last week",
  "automatic_query_refinement": true
}'</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">{
  “meta”: {
    …
    “query_refinements”:
      “submitted_query”: “”,
      “decorated_query_html”: “&lt;span class=\"tag tag-filter active highlighted\"&gt;documents&lt;/span&gt; updated &lt;span class=\"tag tag-filter active highlighted\"&gt;last week&lt;/span&gt;”
      “refinements”: [
        {
          “term”: “documents”,
          ‘position”: [0,8],
          “trigger_type”: “filter”,
          “trigger_filter_type”: “static”,
          “filter”: {
          “mime_type”: ["application/iwork-keynote-sffkey", "application/iwork-numbers-sffnumbers",… (full list abbreviated here for clarity) … ]”
          }
        },
        {
          “term”: “updated last week”,
          “position”: [10,27],
          “trigger_type”: “filter”,
          “trigger_filter_type”: “static”,
          “filter”: {
            “last_updated”: {
              “from”: "2020-04-10"
            }
          }
        }
      ]
    }
    …
  },
  …
}</pre>
</div>
<p>A breakdown of the response fields might help you parse and action what you receive:</p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<tbody>
<tr>
<td align="left" valign="top"><p><code class="literal">submitted_query</code></p></td>
<td align="left" valign="top"><p>The actual query that is submitted to the underlying Elasticsearch instance. May be transformed based on filter settings.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">decorated_query_html</code></p></td>
<td align="left" valign="top"><p>The query with the triggered terms and phrases highlighted. You might use this to display the query via HTML with stylistic decoration.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">refinements</code></p></td>
<td align="left" valign="top"><p>Metadata about each filter or query refinement that was created. Includes the term or phrase, the start and end character position in the original query, the filter type, and the actual filter that was built. You can re-use the returned filter fields in new search queries as they appear.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code class="literal">trigger_filter_type</code></p></td>
<td align="left" valign="top"><p>Can be: (1) <code class="literal">static</code>: a static filter based on a value or range, (2) <code class="literal">dynamic</code>: a filter based on dynamic fields such as a status, tag, assigned person, or similar, in the document itself, (3) <code class="literal">me</code>: a specific filter pertaining to the logged in user, or (4) <code class="literal">content</code>: a filter based on the content source, like GitHub, Slack, and so on.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="workplace-search-external-identities-api.html">« External Identities API Reference</a>
</span>
<span class="next">
<a href="workplace-search-search-oauth.html">OAuth Service API Reference »</a>
</span>
</div>
</div>
</body>
</html>
