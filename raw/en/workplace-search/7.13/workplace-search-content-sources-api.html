<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Content sources API reference | Workplace Search Guide [7.13] | Elastic</title>
<meta class="elastic" name="content" content="Content sources API reference | Workplace Search Guide [7.13]">

<link rel="home" href="index.html" title="Workplace Search Guide [7.13]"/>
<link rel="up" href="workplace-search-api-overview.html" title="Workplace Search API Reference"/>
<link rel="prev" href="workplace-search-api-authentication.html" title="API Authentication Reference"/>
<link rel="next" href="workplace-search-custom-sources-api.html" title="Custom sources indexing API reference"/>
<meta class="elastic" name="product_version" content="7.13"/>
<meta class="elastic" name="product_name" content="Workplace Search"/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/Workplace Search/Guide/7.13"/>
<meta name="DC.subject" content="Workplace Search"/>
<meta name="DC.identifier" content="7.13"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div class="navheader">
<span class="prev">
<a href="workplace-search-api-authentication.html">« API Authentication Reference</a>
</span>
<span class="next">
<a href="workplace-search-custom-sources-api.html">Custom sources indexing API reference »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link">
<div id="related-products" class="dropdown">
<div class="related-products-title"></div>
<div class="dropdown-anchor" tabindex="0">Workplace Search Guide<span class="dropdown-icon"></span></div>
<div class="dropdown-content">
<ul>
<li class="dropdown-category">Enterprise Search guides</li>
<ul>
<li><a href="/guide/en/enterprise-search/current/index.html" target="_blank">Enterprise Search</a></li>
<li><a href="/guide/en/app-search/current/index.html" target="_blank">App Search</a></li>
<li><a href="/guide/en/workplace-search/current/index.html" target="_blank">Workplace Search</a></li>
</ul>
<li class="dropdown-category">Programming language clients</li>
<ul>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/enterprise-search-node/current/index.html" target="_blank">Node.js client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/php/current/index.html" target="_blank">PHP client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/python/current/index.html" target="_blank">Python client</a></li>
<li><a href="https://www.elastic.co/guide/en/enterprise-search-clients/ruby/current/index.html" target="_blank">Ruby client</a></li>
</ul>
</ul>
</div>
</div>
</span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="workplace-search-api-overview.html">Workplace Search API Reference</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Content sources API reference</h1><a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="workplace-search-content-sources-api"></a>Content sources API reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h2>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>This is a technical API reference. Refer to the <a class="xref" href="workplace-search-custom-api-sources.html" title="Connecting custom sources">Custom API sources</a> for a conceptual walkthrough.</p>
</div>
</div>
<h3><a id="content-sources-api-toc"></a>In this API reference<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">Content source JSON representation</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#list-content-sources-api" title="List All content sources">List all content sources</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api" title="Get a content source">Get a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#create-content-source-api" title="Create a content source">Create a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#update-content-source-api" title="Update a content source">Update a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#remove-content-source-api" title="Remove a content source">Remove a content source</a>
</li>
<li class="listitem">
<a class="xref" href="workplace-search-content-sources-api.html#get-document-by-id-api" title="Get a document">Get a document</a>
</li>
</ul>
</div>
<h3><a id="content-sources-api-model"></a>Content source JSON representation<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Content sources represent the individual connections to 3rd party services, and the documents indexed from those connections. Before using the API to create, access, update, or delete content sources, it is important to be familiar with the JSON notation that will be present in many of these response bodies.</p>
<h4><a id="content-source-fields"></a>Content source fields<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">id</code> (required)
</span>
</dt>
<dd>
<p>The string that uniquely identifies the content source. This ID is generated by Workplace Search.</p>
</dd>
<dt>
<span class="term">
<code class="literal">service_type</code> (required)
</span>
</dt>
<dd>
<p>The string representing the content source&#8217;s service type.</p>
</dd>
<dt>
<span class="term">
<code class="literal">created_at</code> (required)
</span>
</dt>
<dd>
<p>The string in RFC-3339 format representing the date/time at which this content source was originally created.</p>
</dd>
<dt>
<span class="term">
<code class="literal">last_updated_at</code> (required)
</span>
</dt>
<dd>
<p>The string in RFC-3339 format representing the date/time at which this content source was last updated.</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_remote</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source is a "remote" content source. See <a class="xref" href="workplace-search-content-sources.html#remote" title="Standard content sources vs remote content sources">Standard content sources vs remote content sources</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">details</code> (required)
</span>
</dt>
<dd>
<p>The list of objects that provide metadata for the content source and the account which authenticated/connected it. These details will be displayed in the source details Overview page.</p>
<p>While this key is required, the list may be empty.</p>
<p>Any objects present in this list will contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable name of this piece of metadata.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description</code> (required)
</span>
</dt>
<dd>
<p>The string value to be displayed under the corresponding title.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">groups</code> (required)
</span>
</dt>
<dd>
<p>The list of objects which represent Workplace Search groups that have access to this content source. Each object contains two keypairs, one for <code class="literal">id</code> and one for <code class="literal">name</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">name</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display name of this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">schema</code> (required)
</span>
</dt>
<dd>
<p>The object representing the schema that each document in this content source must adhere to. The keys of this object can be anything constructed of lower-case letters, numbers, and the underscore (<code class="literal">_</code>) character. These keys define the field names that may be present on indexed documents. The values of these keypairs must be one of <code class="literal">text</code>, <code class="literal">number</code>, <code class="literal">date</code>, or <code class="literal">geolocation</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display</code> (required)
</span>
</dt>
<dd>
<p>The object representing the display details which govern how documents are displayed in search results.</p>
<p>The <code class="literal">display</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s title.</p>
</dd>
<dt>
<span class="term">
<code class="literal">subtitle_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s subtitle. If <code class="literal">null</code>, the search result will not display a subtitle.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s long-form description or body. In the UI, this content will be truncated to fit. If <code class="literal">null</code>, the search result will not have a long-form description/body.</p>
</dd>
<dt>
<span class="term">
<code class="literal">url_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be used to link a given search result to its source of truth.</p>
</dd>
<dt>
<span class="term">
<code class="literal">detail_fields</code> (required)
</span>
</dt>
<dd>
<p>The list of objects representing how the detailed view of a search result item is displayed, when clicked on.</p>
<p>The <code class="literal">detail_fields</code> objects each contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field_name</code> (required)
</span>
</dt>
<dd>
<p>The string field name that this detail pertains to.</p>
</dd>
<dt>
<span class="term">
<code class="literal">label</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display of this field.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">color</code> (optional)
</span>
</dt>
<dd>
<p>A string hex-color code. The <code class="literal">color</code> determines what color to fill the custom source icon with in the search UI.</p>
<p><code class="literal">color</code> is only present for custom content sources.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">context</code> (required)
</span>
</dt>
<dd>
<p>The string specifying whether this content source is available to groups of users, or a single user. The value can be either "organization" or "private."</p>
</dd>
<dt>
<span class="term">
<code class="literal">is_searchable</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source can currently be searched over on the search page.</p>
</dd>
<dt>
<span class="term">
<code class="literal">document_count</code> (conditional)
</span>
</dt>
<dd>
<p>The integer of how many documents are currently indexed in this content source. This field is not applicable to Remote content sources.</p>
</dd>
<dt>
<span class="term">
<code class="literal">last_indexed_at</code> (conditional)
</span>
</dt>
<dd>
<p>The string in RFC-3339 format representing the date/time when documents were last indexed into this content source. This may be null if documents have not yet been indexed. This field is not applicable to Remote content sources.</p>
</dd>
</dl>
</div>
<h4><a id="content-source-example"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<p>Below is an example content source&#8217;s JSON representation:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "id": "603ebf0440b06a31115f4bad",
  "service_type": "custom",
  "created_at": "2021-03-02T22:41:08+00:00",
  "last_updated_at": "2021-03-02T22:41:16+00:00",
  "is_remote": false,
  "details": [
    {
      "title": "Cited Source",
      "description": "http://nps.gov"
    },
    {
      "title": "Usage",
      "description": "For Enterprise Search Examples"
    }
  ],
  "groups": [
    {
      "id": "603ea1a440b06a9c11fd832d",
      "name": "Default"
    }
  ],
  "name": "National Parks",
  "schema": {
    "description": "text",
    "title": "text",
    "nps_link": "text",
    "states": "text",
    "visitors": "number",
    "square_km": "number",
    "world_heritage_site": "text",
    "date_established": "date",
    "location": "geolocation",
    "acres": "number"
  },
  "display": {
    "title_field": "title",
    "subtitle_field": "states",
    "description_field": "description",
    "url_field": "nps_link",
    "detail_fields": [
      {
        "field_name": "states",
        "label": "States"
      },
      {
        "field_name": "description",
        "label": "Description"
      },
      {
        "field_name": "date_established",
        "label": "Established"
      },
      {
        "field_name": "visitors",
        "label": "Number of Visitors"
      },
      {
        "field_name": "location",
        "label": "Location"
      },
      {
        "field_name": "world_heritage_site",
        "label": "World Heritage Site?"
      },
      {
        "field_name": "square_km",
        "label": "Square Kilometers"
      },
      {
        "field_name": "acres",
        "label": "Acres"
      }
    ],
    "color": "#000000"
  },
  "context": "organization",
  "is_searchable": true,
  "document_count": 59,
  "last_indexed_at": "2021-03-02T22:41:15+00:00"
}</pre>
</div>
<h3><a id="list-content-sources-api"></a>List All content sources<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Retrieve a paginated list of all content sources.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">GET /api/ws/v1/sources</pre>
</div>
<h4><a id="list-content-sources-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="list-content-sources-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">page[current]</code> (optional)
</span>
</dt>
<dd>
<p>The integer page of results to retrieve. Default is <code class="literal">1</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">page[size]</code> (optional)
</span>
</dt>
<dd>
<p>The integer size of results to retrieve in a single page. Default is <code class="literal">25</code></p>
</dd>
</dl>
</div>
<h4><a id="list-content-sources-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url 'https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io/api/ws/v1/sources' \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url 'http://localhost:3002/api/ws/v1/sources' \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<p>With pagination:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url 'http://localhost:3002/api/ws/v1/sources?page[current]=2&amp;page[size]=1' \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="list-content-sources-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The paginated list of content sources is returned.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "meta": {
    "page": {
      "current": 1,
      "total_pages": 1,
      "total_results": 4,
      "size": 25
    }
  },
  "results": [
    { &lt;ContentSourceOne&gt; },
    { &lt;ContentSourceTwo&gt; },
    { &lt;ContentSourceThree&gt; },
    { &lt;ContentSourceFour&gt; }
  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The request body was incomplete or invalid.
The response body provides additional information.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
</dd>
</dl>
</div>
<h3><a id="get-content-source-api"></a>Get a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Retrieve a single content source by its ID.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">GET /api/ws/v1/sources/&lt;content-source-id&gt;</pre>
</div>
<h4><a id="get-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="get-content-source-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to be retrieved.</p>
</dd>
</dl>
</div>
<h4><a id="get-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="get-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single content sources is returned.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{ &lt;ContentSource&gt; }</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
</dd>
</dl>
</div>
<h3><a id="create-content-source-api"></a>Create a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Create a single custom content source.</p>
<p>Only custom content sources can be created with this endpoint. Other service types cannot be created programmatically.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">POST /api/ws/v1/sources</pre>
</div>
<h4><a id="create-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
<dt>
<span class="term">
<code class="literal">Content-Type</code>
</span>
</dt>
<dd>
<p><code class="literal">application/json</code>. This endpoint accepts only JSON POST data.</p>
</dd>
</dl>
</div>
<h4><a id="create-content-source-api-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Content source definition (required)
</span>
</dt>
<dd>
<p>The JSON object defining the content source to be created.</p>
</dd>
<dt>
<span class="term">
<code class="literal">name</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display name of this content source.</p>
<p>The <code class="literal">name</code> may not start or end with special characters.</p>
<p>The <code class="literal">name</code> may not include special characters other than underscore (<code class="literal">_</code>).</p>
<p>The <code class="literal">name</code> may not be longer than 64 characters.</p>
</dd>
<dt>
<span class="term">
<code class="literal">schema</code> (optional)
</span>
</dt>
<dd>
<p>The object representing the schema that each document in this content source must adhere to. The keys of this object can be anything constructed of lower-case letters, numbers, and the underscore (<code class="literal">_</code>) character. These keys define the field names that may be present on indexed documents. The values of these keypairs must be one of <code class="literal">text</code>, <code class="literal">number</code>, <code class="literal">date</code>, or <code class="literal">geolocation</code>.</p>
<p>If omitted, you cannot specify a <code class="literal">display</code> at creation time.</p>
<p>You can update <code class="literal">schema</code> later by indexing documents (the schema will be inferred) or by using the <a class="xref" href="workplace-search-content-sources-api.html#update-content-source-api" title="Update a content source">update endpoint</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display</code> (optional)
</span>
</dt>
<dd>
<p>The object representing the display details which govern how documents will be displayed in search results.</p>
<p>The <code class="literal">display</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s title.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">url_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be used to link a given search result to its source of truth.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">subtitle_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s subtitle.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a subtitle, and subtitles will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s long-form description or body. In the UI, this content will be truncated to fit.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a description, and descriptions will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">detail_fields</code> (optional)
</span>
</dt>
<dd>
<p>The list of objects representing how the detailed view of a search result item should be displayed when clicked on.</p>
<p>The <code class="literal">detail_fields</code> objects must each contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field_name</code> (required)
</span>
</dt>
<dd>
<p>The string field name that this detail pertains to.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">label</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display of this field.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">color</code> (optional)
</span>
</dt>
<dd>
<p>A string hex-color code. The <code class="literal">color</code> determines what color to fill the custom source icon with in the search UI.</p>
<p><code class="literal">color</code> must be a 7-character string, beginning with a hash (<code class="literal">#</code>) followed by 6 hexadecimal digits (0-9, A-F). Other color strings or code formats will not be accepted.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">is_searchable</code> (optional)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source should be searchable.</p>
</dd>
</dl>
</div>
<h5><a id="create-content-source-api-request-body-example"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h5>
<p>Below is an example content source definition&#8217;s JSON representation:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "name": "National Parks",
  "schema": {
    "description": "text",
    "title": "text",
    "nps_link": "text",
    "states": "text",
    "visitors": "number",
    "square_km": "number",
    "world_heritage_site": "text",
    "date_established": "date",
    "location": "geolocation",
    "acres": "number"
  },
  "display": {
    "title_field": "title",
    "subtitle_field": "states",
    "description_field": "description",
    "url_field": "nps_link",
    "detail_fields": [
      {
        "field_name": "states",
        "label": "States"
      },
      {
        "field_name": "description",
        "label": "Description"
      },
      {
        "field_name": "date_established",
        "label": "Established"
      },
      {
        "field_name": "visitors",
        "label": "Number of Visitors"
      },
      {
        "field_name": "location",
        "label": "Location"
      },
      {
        "field_name": "world_heritage_site",
        "label": "World Heritage Site?"
      },
      {
        "field_name": "square_km",
        "label": "Square Kilometers"
      },
      {
        "field_name": "acres",
        "label": "Acres"
      }
    ],
    "color": "#000000"
  },
  "is_searchable": true
}</pre>
</div>
<h4><a id="create-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'POST' \
--url 'https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io/api/ws/v1/sources/' \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Field"
      }
    ],
    "color": "#111111"
  },
  "is_searchable": true
}
'</pre>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'POST' \
--url 'http://localhost:3002/api/ws/v1/sources/' \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Field"
      }
    ],
    "color": "#111111"
  },
  "is_searchable": true
}
'</pre>
</div>
<h4><a id="create-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single created content source is returned.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{ &lt;ContentSource&gt; }</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The request body did not meet requirements. See the <code class="literal">errors</code> array to determine what may be wrong.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "The property '#/schema/my_field' value \"integer\" did not match one of the following values: text, geolocation, number, date",
    "The property '#/display' did not contain a required property of 'title_field'",
    "The property '#/is_searchable' did not match any of the following types: boolean",
    "The property '#/name' value \"&amp;special_chars*\" did not match the regex '(?-mix:\\A[\\w\\s.()'\\-\\/]*\\z)'"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Invalid Display</code>
</span>
</dt>
<dd>
<p>The request body included a <code class="literal">display</code> configuration that, while syntactically correct, did not align with the content source&#8217;s <code class="literal">schema</code>. This was not detected until after the content source was created, but did prevent the display settings from being applied as expected. The response includes both the current state of the new content source, and the errors in configuring the display.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "created" : { &lt;ContentSource&gt; },
  "errors" : [
    "Invalid display setting: title_field: \"title\" is not a field on the content source",
    "Invalid display setting: subtitle_field: \"states\" is not a field on the content source",
    "Invalid display setting: description_field: \"description\" is not a field on the content source",
    "Invalid display setting: url_field: \"nps_link\" is not a field on the content source",
    "Invalid display setting: detail_fields: \"states\" is not a field on the content source, \"description\" is not a field on the content source, \"date_established\" is not a field on the content source, \"visitors\" is not a field on the content source, \"location\" is not a field on the content source, \"world_heritage_site\" is not a field on the content source, \"square_km\" is not a field on the content source, \"acres\" is not a field on the content source"

  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
</dd>
</dl>
</div>
<h3><a id="update-content-source-api"></a>Update a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Update a single custom content source.</p>
<p>Only custom content sources can be updated with this endpoint. Other service types cannot be updated programmatically.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">PUT /api/ws/v1/sources/&lt;content-source-id&gt;</pre>
</div>
<h4><a id="update-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
<dt>
<span class="term">
<code class="literal">Content-Type</code>
</span>
</dt>
<dd>
<p><code class="literal">application/json</code>. This endpoint accepts only JSON PUT data.</p>
</dd>
</dl>
</div>
<h4><a id="update-content-source-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to be updated.</p>
</dd>
</dl>
</div>
<h4><a id="update-content-source-api-request-body"></a>Request body<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
Content source definition (required)
</span>
</dt>
<dd>
<p>The JSON object defining the new state of the content source.</p>
<p>Unlike the <a class="xref" href="workplace-search-content-sources-api.html#create-content-source-api-request-body" title="Request body"><code class="literal">create</code> request body</a>, all parameters of this body are required. You may find it useful to first do a <a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api" title="Get a content source">get request</a>, to ensure you send the complete current values to avoid unwanted changes.</p>
</dd>
<dt>
<span class="term">
<code class="literal">name</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display name of this content source.</p>
<p>The <code class="literal">name</code> may not start or end with special characters.</p>
<p>The <code class="literal">name</code> may not include special characters other than underscore (<code class="literal">_</code>).</p>
<p>The <code class="literal">name</code> may not be longer than 64 characters.</p>
</dd>
<dt>
<span class="term">
<code class="literal">schema</code> (required)
</span>
</dt>
<dd>
<p>The object representing the schema that each document in this content source must adhere to. The keys of this object can be anything constructed of lower-case letters, numbers, and the underscore (<code class="literal">_</code>) character. These keys define the field names that may be present on indexed documents. The values of these keypairs must be one of <code class="literal">text</code>, <code class="literal">number</code>, <code class="literal">date</code>, or <code class="literal">geolocation</code>.</p>
<p>If the content source already contains documents, this <code class="literal">schema</code> must not attempt to change the types of fields for document that do not have an implicit type conversion available to them. For example, a document of</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "field_one": 42,
  "field_two": "the answer"
}</pre>
</div>
<p>a schema update of</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "field_one": "text",
  "field_two": "text"
}</pre>
</div>
<p>is fine, because <code class="literal">42</code> (numeric) can implicitly be converted to <code class="literal">"42"</code> (string) without issue. However, a schema update of</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "field_one": "number",
  "field_two": "number"
}</pre>
</div>
<p>will fail, because there is no implicit numeric value for <code class="literal">"the answer"</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">display</code> (required)
</span>
</dt>
<dd>
<p>The object representing the display details which govern how documents will be displayed in search results.</p>
<p>The <code class="literal">display</code> object contains the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">title_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s title.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">url_field</code> (required)
</span>
</dt>
<dd>
<p>The string field name that will be used to link a given search result to its source of truth.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">subtitle_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s subtitle.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a subtitle, and subtitles will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">description_field</code> (optional)
</span>
</dt>
<dd>
<p>The string field name that will be displayed as a search result&#8217;s long-form description or body. In the UI, this content will be truncated to fit.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
<p>If <code class="literal">null</code>, no field will be assigned as a description, and descriptions will not be displayed for any search result in this content source.</p>
</dd>
<dt>
<span class="term">
<code class="literal">detail_fields</code> (optional)
</span>
</dt>
<dd>
<p>The list of objects representing how the detailed view of a search result item should be displayed when clicked on.</p>
<p>The <code class="literal">detail_fields</code> objects must each contain the following keys:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">field_name</code> (required)
</span>
</dt>
<dd>
<p>The string field name that this detail pertains to.</p>
<p>This field must exist in the <code class="literal">schema</code>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">label</code> (required)
</span>
</dt>
<dd>
<p>The string for the human readable display of this field.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">color</code> (required)
</span>
</dt>
<dd>
<p>A string hex-color code. The <code class="literal">color</code> determines what color to fill the custom source icon with in the search UI.</p>
<p><code class="literal">color</code> must be a 7-character string, beginning with a hash (<code class="literal">#</code>) followed by 6 hexadecimal digits (0-9, A-F). Other color strings or code formats will not be accepted.</p>
</dd>
</dl>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">is_searchable</code> (required)
</span>
</dt>
<dd>
<p>The boolean for whether or not this content source should be searchable.</p>
</dd>
</dl>
</div>
<h5><a id="update-content-source-api-request-body-example"></a>Example<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h5>
<p>Below is an example content source definition&#8217;s JSON representation:</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "name": "National Parks",
  "schema": {
    "description": "text",
    "title": "text",
    "nps_link": "text",
    "states": "text",
    "visitors": "number",
    "square_km": "number",
    "world_heritage_site": "text",
    "date_established": "date",
    "location": "geolocation",
    "acres": "number"
  },
  "display": {
    "title_field": "title",
    "subtitle_field": "states",
    "description_field": "description",
    "url_field": "nps_link",
    "detail_fields": [
      {
        "field_name": "states",
        "label": "States"
      },
      {
        "field_name": "description",
        "label": "Description"
      },
      {
        "field_name": "date_established",
        "label": "Established"
      },
      {
        "field_name": "visitors",
        "label": "Number of Visitors"
      },
      {
        "field_name": "location",
        "label": "Location"
      },
      {
        "field_name": "world_heritage_site",
        "label": "World Heritage Site?"
      },
      {
        "field_name": "square_km",
        "label": "Square Kilometers"
      },
      {
        "field_name": "acres",
        "label": "Acres"
      }
    ],
    "color": "#000000"
  },
  "is_searchable": true
}</pre>
</div>
<h4><a id="update-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'PUT' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test Update",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Updated Field Display"
      }
    ],
    "color": "#2222"
  },
  "is_searchable": true
}
'</pre>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'PUT' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header 'Content-Type: application/json' \
--header "Authorization: Bearer $ACCESS_TOKEN" \
--data '
{
  "name": "Test Update",
  "schema": {
    "title": "text",
    "url": "text",
    "my_field": "text"
  },
  "display": {
    "title_field": "title",
    "url_field": "url",
    "detail_fields": [
      {
        "field_name": "my_field",
        "label": "My Updated Field Display"
      }
    ],
    "color": "#2222"
  },
  "is_searchable": true
}
'</pre>
</div>
<h4><a id="update-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single updated content source is returned.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{ &lt;ContentSource&gt; }</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The request body did not meet requirements. See the <code class="literal">errors</code> array to determine what may be wrong.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "errors": [
    "The property '#/schema/my_field' value \"integer\" did not match one of the following values: text, geolocation, number, date",
    "The property '#/display' did not contain a required property of 'title_field'",
    "The property '#/is_searchable' did not match any of the following types: boolean",
    "The property '#/name' value \"&amp;special_chars*\" did not match the regex '(?-mix:\\A[\\w\\s.()'\\-\\/]*\\z)'"
  ]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Illegal Schema Change</code>
</span>
</dt>
<dd>
<p>The request body included a <code class="literal">schema</code> that, while syntactically correct, would require field type changes for document values that cannot match the new type. This was not detected until after some updates may have been applied, but did prevent the schema update from being applied as expected. The response includes both the current state of the updated content source, and the errors in updating the schema.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "updated" : { &lt;ContentSource&gt; },
  "errors": [
    "Field 'description' cannot be changed to type 'float'. Example IDs that would fail: [\"park_acadia\", \"park_badlands\", \"park_big-bend\", \"park_bryce-canyon\", \"park_canyonlands\", \"park_capitol-reef\", \"park_carlsbad-caverns\", \"park_congaree\", \"park_cuyahoga-valley\", \"park_denali\"]"
  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">400 Invalid Display</code>
</span>
</dt>
<dd>
<p>The request body included a <code class="literal">display</code> configuration that, while syntactically correct, did not align with the content source&#8217;s <code class="literal">schema</code>. This was not detected until after some updates may have been applied, but did prevent the display settings from being applied as expected. The response includes both the current state of the updated content source, and the errors in configuring the display.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "updated" : { &lt;ContentSource&gt; },
  "errors" : [
    "Invalid display setting: title_field: \"title\" is not a field on the content source",
    "Invalid display setting: subtitle_field: \"states\" is not a field on the content source",
    "Invalid display setting: description_field: \"description\" is not a field on the content source",
    "Invalid display setting: url_field: \"nps_link\" is not a field on the content source",
    "Invalid display setting: detail_fields: \"states\" is not a field on the content source, \"description\" is not a field on the content source, \"date_established\" is not a field on the content source, \"visitors\" is not a field on the content source, \"location\" is not a field on the content source, \"world_heritage_site\" is not a field on the content source, \"square_km\" is not a field on the content source, \"acres\" is not a field on the content source"

  ]
}</pre>
</div>
<p>See the above <a class="xref" href="workplace-search-content-sources-api.html#content-sources-api-model" title="Content source JSON representation">content source JSON representation</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>
The specified content source ID does not exist
</p>
<p>OR</p>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
</dd>
</dl>
</div>
<h3><a id="remove-content-source-api"></a>Remove a content source<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Remove a single content source by its ID.</p>
<p>Only organization content sources can be deleted with this endpoint. Private content sources cannot be deleted with this endpoint.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">DELETE /api/ws/v1/sources/&lt;content-source-id&gt;</pre>
</div>
<h4><a id="remove-content-source-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="remove-content-source-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source to be removed.</p>
</dd>
</dl>
</div>
<h4><a id="remove-content-source-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'DELETE' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'DELETE' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="remove-content-source-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>An acknowledgement that the content source was deleted</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{ "deleted" : true }</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">400 Bad Request</code>
</span>
</dt>
<dd>
<p>The provided <code class="literal">content_source_id</code> is for a private content source, which is not allowed.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{ "errors": ["Invalid parameter(s): Private content sources cannot be deleted by this API"] }</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
</dd>
</dl>
</div>
<h3><a id="get-document-by-id-api"></a>Get a document<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h3>
<p>Retrieve a single content source document, given the IDs of both the content source and the document.</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">GET /api/ws/v1/sources/&lt;content-source-id&gt;/documents/&lt;document-id&gt;</pre>
</div>
<h4><a id="get-document-by-id-api-request-headers"></a>Request headers<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">Authorization</code>
</span>
</dt>
<dd>
<p>Bearer token permitting API access.</p>
<p>For more authentication methods see <a class="xref" href="workplace-search-api-authentication.html" title="API Authentication Reference">API Authentication Reference</a></p>
</dd>
</dl>
</div>
<h4><a id="get-document-by-id-api-request-params"></a>Request parameters<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">content-source-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the content source that contains the desired document.</p>
</dd>
<dt>
<span class="term">
<code class="literal">document-id</code> (required)
</span>
</dt>
<dd>
<p>The string ID for the document to be retrieved.</p>
</dd>
</dl>
</div>
<h4><a id="get-document-by-id-api-request-examples"></a>Request examples<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "https://f3fae9ab3e4f423d9d345979331ef3a1.ent-search.us-east-1.aws.cloud.es.io/api/ws/v1/sources/$CONTENT_SOURCE_ID/documents/$DOCUMENT_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">curl \
--request 'GET' \
--url "http://localhost:3002/api/ws/v1/sources/$CONTENT_SOURCE_ID/documents/$DOCUMENT_ID" \
--header "Authorization: Bearer $ACCESS_TOKEN"</pre>
</div>
<h4><a id="get-document-by-id-api-responses"></a>Responses<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.13/workplace-search-docs/api/content-sources.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">200 OK</code>
</span>
</dt>
<dd>
<p>The single content source document is returned.</p>
<p>The only guaranteed response fields are <code class="literal">id</code>, <code class="literal">source</code>, <code class="literal">content_source_id</code>, and <code class="literal">last_updated</code>. The others are content source specific, and must be part of the content source&#8217;s schema. You can view a content source&#8217;s schema with the <a class="xref" href="workplace-search-content-sources-api.html#get-content-source-api" title="Get a content source">get content source API</a>.</p>
<div class="pre_wrapper lang-json">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-json">{
  "id":  "some_string_id",
  "source": "custom",
  "content_source_id": "603d2c8319cbdbc907675c02",
  "last_updated": "2021-03-02T22:41:16+00:00",
  "some_text_field": "some text value",
  "some_number_field": 42,
  "some_date_field": "2021-03-02T22:41:16+00:00",
  "some_geolocation_field": "44.35,-68.21",
  "_allow_permissions": ["perm1", "perm2"],
  "_deny_permissions": ["perm3", "perm4"]
}</pre>
</div>
</dd>
<dt>
<span class="term">
<code class="literal">401 Unauthorized</code>
</span>
</dt>
<dd>
<p>The authorization header was missing from the request or authentication failed.</p>
</dd>
<dt>
<span class="term">
<code class="literal">404 Not Found</code>
</span>
</dt>
<dd>
<p>The authenticated user is not an Admin user, and therefore does not have permission.</p>
<p>OR</p>
<p>The authenticated user has specified a private content source that is not theirs, and they therefore do not have permission.</p>
<p>OR</p>
<p>The specified document has document-level-permissions which prohibit access to the authenticated user.</p>
<p>OR</p>
<p>The provided <code class="literal">content_source_id</code> does not exist.</p>
<p>OR</p>
<p>The provided <code class="literal">document_id</code> does not exist.</p>
</dd>
</dl>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="workplace-search-api-authentication.html">« API Authentication Reference</a>
</span>
<span class="next">
<a href="workplace-search-custom-sources-api.html">Custom sources indexing API reference »</a>
</span>
</div>
</body>
</html>
