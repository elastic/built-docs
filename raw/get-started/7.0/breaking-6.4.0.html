<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Breaking changes in 6.4.0 | APM Overview [7.0] | Elastic</title>
<link rel="home" href="index.html" title="APM Overview [7.0]"/>
<link rel="up" href="apm-breaking-changes.html" title="Breaking changes"/>
<link rel="prev" href="breaking-7.0.0.html" title="Breaking changes in 7.0.0"/>
<link rel="next" href="apm-release-notes.html" title="Release highlights"/>
<meta name="DC.type" content="Learn/Docs/APM Server/Reference/7.0"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="7.0"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body><div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates
will be released for this version. For the latest information, see the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM Overview [7.0]</a></span>
»
<span class="breadcrumb-link"><a href="apm-breaking-changes.html">Breaking changes</a></span>
»
<span class="breadcrumb-node">Breaking changes in 6.4.0</span>
</div>
<div class="navheader">
<span class="prev">
<a href="breaking-7.0.0.html">« Breaking changes in 7.0.0</a>
</span>
<span class="next">
<a href="apm-release-notes.html">Release highlights »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="breaking-6.4.0"></a>Breaking changes in 6.4.0<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/apm-server/edit/7.0/docs/guide/apm-breaking-changes.asciidoc">edit</a></h2>
</div></div></div>
<p>We previously split APM data into separate indices (transaction, span, error, etc.).
In 6.4 APM Kibana UI starts to leverage those separate indices for queries.</p>
<p>In case you only update Kibana but run an older version of APM Server you will not be able to see any APM data by default.
To fix this, use the <a href="/guide/en/kibana/7.0/apm-settings-kb.html" class="ulink" target="_top">Kibana APM settings</a> to specify the location of the APM index:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">apm_oss.errorIndices: apm-*
apm_oss.spanIndices: apm-*
apm_oss.transactionIndices: apm-*
apm_oss.onboardingIndices: apm-*</pre>
</div>
<p>In case you are upgrading APM Server from an older version, you might need to refresh your APM index pattern for certain APM UI features to work.
Also ensure to add the new config options in <code class="literal">apm-server.yml</code> in case you keep your existing configuration file:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">output.elasticsearch:
  indices:
    - index: "apm-%{[observer.version]}-sourcemap"
      when.contains:
        processor.event: "sourcemap"
    - index: "apm-%{[observer.version]}-error-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "error"
    - index: "apm-%{[observer.version]}-transaction-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "transaction"
    - index: "apm-%{[observer.version]}-span-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "span"
    - index: "apm-%{[observer.version]}-metric-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "metric"
    - index: "apm-%{[observer.version]}-onboarding-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "onboarding"</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="breaking-7.0.0.html">« Breaking changes in 7.0.0</a>
</span>
<span class="next">
<a href="apm-release-notes.html">Release highlights »</a>
</span>
</div>
</div>
</body>
</html>
